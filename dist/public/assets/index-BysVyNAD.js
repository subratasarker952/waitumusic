var nN=t=>{throw TypeError(t)};var df=(t,s,n)=>s.has(t)||nN("Cannot "+n);var Ce=(t,s,n)=>(df(t,s,"read from private field"),n?n.call(t):s.get(t)),$t=(t,s,n)=>s.has(t)?nN("Cannot add the same private member more than once"):s instanceof WeakSet?s.add(t):s.set(t,n),Nt=(t,s,n,a)=>(df(t,s,"write to private field"),a?a.call(t,n):s.set(t,n),n),ls=(t,s,n)=>(df(t,s,"access private method"),n);var Fm=(t,s,n,a)=>({set _(r){Nt(t,s,r,n)},get _(){return Ce(t,s,a)}});function L5(t,s){for(var n=0;n<s.length;n++){const a=s[n];if(typeof a!="string"&&!Array.isArray(a)){for(const r in a)if(r!=="default"&&!(r in t)){const i=Object.getOwnPropertyDescriptor(a,r);i&&Object.defineProperty(t,r,i.get?i:{enumerable:!0,get:()=>a[r]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))a(r);new MutationObserver(r=>{for(const i of r)if(i.type==="childList")for(const l of i.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&a(l)}).observe(document,{childList:!0,subtree:!0});function n(r){const i={};return r.integrity&&(i.integrity=r.integrity),r.referrerPolicy&&(i.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?i.credentials="include":r.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function a(r){if(r.ep)return;r.ep=!0;const i=n(r);fetch(r.href,i)}})();var Za=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function yv(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var W1={exports:{}},Ux={},H1={exports:{}},xs={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var om=Symbol.for("react.element"),F5=Symbol.for("react.portal"),q5=Symbol.for("react.fragment"),$5=Symbol.for("react.strict_mode"),B5=Symbol.for("react.profiler"),U5=Symbol.for("react.provider"),z5=Symbol.for("react.context"),V5=Symbol.for("react.forward_ref"),G5=Symbol.for("react.suspense"),W5=Symbol.for("react.memo"),H5=Symbol.for("react.lazy"),aN=Symbol.iterator;function K5(t){return t===null||typeof t!="object"?null:(t=aN&&t[aN]||t["@@iterator"],typeof t=="function"?t:null)}var K1={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Y1=Object.assign,Q1={};function gd(t,s,n){this.props=t,this.context=s,this.refs=Q1,this.updater=n||K1}gd.prototype.isReactComponent={};gd.prototype.setState=function(t,s){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,s,"setState")};gd.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function Z1(){}Z1.prototype=gd.prototype;function Nv(t,s,n){this.props=t,this.context=s,this.refs=Q1,this.updater=n||K1}var bv=Nv.prototype=new Z1;bv.constructor=Nv;Y1(bv,gd.prototype);bv.isPureReactComponent=!0;var rN=Array.isArray,X1=Object.prototype.hasOwnProperty,wv={current:null},J1={key:!0,ref:!0,__self:!0,__source:!0};function e2(t,s,n){var a,r={},i=null,l=null;if(s!=null)for(a in s.ref!==void 0&&(l=s.ref),s.key!==void 0&&(i=""+s.key),s)X1.call(s,a)&&!J1.hasOwnProperty(a)&&(r[a]=s[a]);var c=arguments.length-2;if(c===1)r.children=n;else if(1<c){for(var o=Array(c),d=0;d<c;d++)o[d]=arguments[d+2];r.children=o}if(t&&t.defaultProps)for(a in c=t.defaultProps,c)r[a]===void 0&&(r[a]=c[a]);return{$$typeof:om,type:t,key:i,ref:l,props:r,_owner:wv.current}}function Y5(t,s){return{$$typeof:om,type:t.type,key:s,ref:t.ref,props:t.props,_owner:t._owner}}function Sv(t){return typeof t=="object"&&t!==null&&t.$$typeof===om}function Q5(t){var s={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return s[n]})}var iN=/\/+/g;function uf(t,s){return typeof t=="object"&&t!==null&&t.key!=null?Q5(""+t.key):s.toString(36)}function gh(t,s,n,a,r){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var l=!1;if(t===null)l=!0;else switch(i){case"string":case"number":l=!0;break;case"object":switch(t.$$typeof){case om:case F5:l=!0}}if(l)return l=t,r=r(l),t=a===""?"."+uf(l,0):a,rN(r)?(n="",t!=null&&(n=t.replace(iN,"$&/")+"/"),gh(r,s,n,"",function(d){return d})):r!=null&&(Sv(r)&&(r=Y5(r,n+(!r.key||l&&l.key===r.key?"":(""+r.key).replace(iN,"$&/")+"/")+t)),s.push(r)),1;if(l=0,a=a===""?".":a+":",rN(t))for(var c=0;c<t.length;c++){i=t[c];var o=a+uf(i,c);l+=gh(i,s,n,o,r)}else if(o=K5(t),typeof o=="function")for(t=o.call(t),c=0;!(i=t.next()).done;)i=i.value,o=a+uf(i,c++),l+=gh(i,s,n,o,r);else if(i==="object")throw s=String(t),Error("Objects are not valid as a React child (found: "+(s==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":s)+"). If you meant to render a collection of children, use an array instead.");return l}function qm(t,s,n){if(t==null)return t;var a=[],r=0;return gh(t,a,"","",function(i){return s.call(n,i,r++)}),a}function Z5(t){if(t._status===-1){var s=t._result;s=s(),s.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=s)}if(t._status===1)return t._result.default;throw t._result}var Sa={current:null},jh={transition:null},X5={ReactCurrentDispatcher:Sa,ReactCurrentBatchConfig:jh,ReactCurrentOwner:wv};function t2(){throw Error("act(...) is not supported in production builds of React.")}xs.Children={map:qm,forEach:function(t,s,n){qm(t,function(){s.apply(this,arguments)},n)},count:function(t){var s=0;return qm(t,function(){s++}),s},toArray:function(t){return qm(t,function(s){return s})||[]},only:function(t){if(!Sv(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};xs.Component=gd;xs.Fragment=q5;xs.Profiler=B5;xs.PureComponent=Nv;xs.StrictMode=$5;xs.Suspense=G5;xs.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=X5;xs.act=t2;xs.cloneElement=function(t,s,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var a=Y1({},t.props),r=t.key,i=t.ref,l=t._owner;if(s!=null){if(s.ref!==void 0&&(i=s.ref,l=wv.current),s.key!==void 0&&(r=""+s.key),t.type&&t.type.defaultProps)var c=t.type.defaultProps;for(o in s)X1.call(s,o)&&!J1.hasOwnProperty(o)&&(a[o]=s[o]===void 0&&c!==void 0?c[o]:s[o])}var o=arguments.length-2;if(o===1)a.children=n;else if(1<o){c=Array(o);for(var d=0;d<o;d++)c[d]=arguments[d+2];a.children=c}return{$$typeof:om,type:t.type,key:r,ref:i,props:a,_owner:l}};xs.createContext=function(t){return t={$$typeof:z5,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:U5,_context:t},t.Consumer=t};xs.createElement=e2;xs.createFactory=function(t){var s=e2.bind(null,t);return s.type=t,s};xs.createRef=function(){return{current:null}};xs.forwardRef=function(t){return{$$typeof:V5,render:t}};xs.isValidElement=Sv;xs.lazy=function(t){return{$$typeof:H5,_payload:{_status:-1,_result:t},_init:Z5}};xs.memo=function(t,s){return{$$typeof:W5,type:t,compare:s===void 0?null:s}};xs.startTransition=function(t){var s=jh.transition;jh.transition={};try{t()}finally{jh.transition=s}};xs.unstable_act=t2;xs.useCallback=function(t,s){return Sa.current.useCallback(t,s)};xs.useContext=function(t){return Sa.current.useContext(t)};xs.useDebugValue=function(){};xs.useDeferredValue=function(t){return Sa.current.useDeferredValue(t)};xs.useEffect=function(t,s){return Sa.current.useEffect(t,s)};xs.useId=function(){return Sa.current.useId()};xs.useImperativeHandle=function(t,s,n){return Sa.current.useImperativeHandle(t,s,n)};xs.useInsertionEffect=function(t,s){return Sa.current.useInsertionEffect(t,s)};xs.useLayoutEffect=function(t,s){return Sa.current.useLayoutEffect(t,s)};xs.useMemo=function(t,s){return Sa.current.useMemo(t,s)};xs.useReducer=function(t,s,n){return Sa.current.useReducer(t,s,n)};xs.useRef=function(t){return Sa.current.useRef(t)};xs.useState=function(t){return Sa.current.useState(t)};xs.useSyncExternalStore=function(t,s,n){return Sa.current.useSyncExternalStore(t,s,n)};xs.useTransition=function(){return Sa.current.useTransition()};xs.version="18.3.1";H1.exports=xs;var N=H1.exports;const lt=yv(N),s2=L5({__proto__:null,default:lt},[N]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var J5=N,eM=Symbol.for("react.element"),tM=Symbol.for("react.fragment"),sM=Object.prototype.hasOwnProperty,nM=J5.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,aM={key:!0,ref:!0,__self:!0,__source:!0};function n2(t,s,n){var a,r={},i=null,l=null;n!==void 0&&(i=""+n),s.key!==void 0&&(i=""+s.key),s.ref!==void 0&&(l=s.ref);for(a in s)sM.call(s,a)&&!aM.hasOwnProperty(a)&&(r[a]=s[a]);if(t&&t.defaultProps)for(a in s=t.defaultProps,s)r[a]===void 0&&(r[a]=s[a]);return{$$typeof:eM,type:t,key:i,ref:l,props:r,_owner:nM.current}}Ux.Fragment=tM;Ux.jsx=n2;Ux.jsxs=n2;W1.exports=Ux;var e=W1.exports,a2={exports:{}},ar={},r2={exports:{}},i2={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function s(z,F){var K=z.length;z.push(F);e:for(;0<K;){var D=K-1>>>1,G=z[D];if(0<r(G,F))z[D]=F,z[K]=G,K=D;else break e}}function n(z){return z.length===0?null:z[0]}function a(z){if(z.length===0)return null;var F=z[0],K=z.pop();if(K!==F){z[0]=K;e:for(var D=0,G=z.length,H=G>>>1;D<H;){var V=2*(D+1)-1,se=z[V],Z=V+1,le=z[Z];if(0>r(se,K))Z<G&&0>r(le,se)?(z[D]=le,z[Z]=K,D=Z):(z[D]=se,z[V]=K,D=V);else if(Z<G&&0>r(le,K))z[D]=le,z[Z]=K,D=Z;else break e}}return F}function r(z,F){var K=z.sortIndex-F.sortIndex;return K!==0?K:z.id-F.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var l=Date,c=l.now();t.unstable_now=function(){return l.now()-c}}var o=[],d=[],h=1,u=null,m=3,p=!1,g=!1,x=!1,v=typeof setTimeout=="function"?setTimeout:null,y=typeof clearTimeout=="function"?clearTimeout:null,f=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function b(z){for(var F=n(d);F!==null;){if(F.callback===null)a(d);else if(F.startTime<=z)a(d),F.sortIndex=F.expirationTime,s(o,F);else break;F=n(d)}}function j(z){if(x=!1,b(z),!g)if(n(o)!==null)g=!0,B(S);else{var F=n(d);F!==null&&O(j,F.startTime-z)}}function S(z,F){g=!1,x&&(x=!1,y(A),A=-1),p=!0;var K=m;try{for(b(F),u=n(o);u!==null&&(!(u.expirationTime>F)||z&&!P());){var D=u.callback;if(typeof D=="function"){u.callback=null,m=u.priorityLevel;var G=D(u.expirationTime<=F);F=t.unstable_now(),typeof G=="function"?u.callback=G:u===n(o)&&a(o),b(F)}else a(o);u=n(o)}if(u!==null)var H=!0;else{var V=n(d);V!==null&&O(j,V.startTime-F),H=!1}return H}finally{u=null,m=K,p=!1}}var k=!1,T=null,A=-1,C=5,w=-1;function P(){return!(t.unstable_now()-w<C)}function M(){if(T!==null){var z=t.unstable_now();w=z;var F=!0;try{F=T(!0,z)}finally{F?I():(k=!1,T=null)}}else k=!1}var I;if(typeof f=="function")I=function(){f(M)};else if(typeof MessageChannel<"u"){var W=new MessageChannel,_=W.port2;W.port1.onmessage=M,I=function(){_.postMessage(null)}}else I=function(){v(M,0)};function B(z){T=z,k||(k=!0,I())}function O(z,F){A=v(function(){z(t.unstable_now())},F)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(z){z.callback=null},t.unstable_continueExecution=function(){g||p||(g=!0,B(S))},t.unstable_forceFrameRate=function(z){0>z||125<z?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):C=0<z?Math.floor(1e3/z):5},t.unstable_getCurrentPriorityLevel=function(){return m},t.unstable_getFirstCallbackNode=function(){return n(o)},t.unstable_next=function(z){switch(m){case 1:case 2:case 3:var F=3;break;default:F=m}var K=m;m=F;try{return z()}finally{m=K}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(z,F){switch(z){case 1:case 2:case 3:case 4:case 5:break;default:z=3}var K=m;m=z;try{return F()}finally{m=K}},t.unstable_scheduleCallback=function(z,F,K){var D=t.unstable_now();switch(typeof K=="object"&&K!==null?(K=K.delay,K=typeof K=="number"&&0<K?D+K:D):K=D,z){case 1:var G=-1;break;case 2:G=250;break;case 5:G=1073741823;break;case 4:G=1e4;break;default:G=5e3}return G=K+G,z={id:h++,callback:F,priorityLevel:z,startTime:K,expirationTime:G,sortIndex:-1},K>D?(z.sortIndex=K,s(d,z),n(o)===null&&z===n(d)&&(x?(y(A),A=-1):x=!0,O(j,K-D))):(z.sortIndex=G,s(o,z),g||p||(g=!0,B(S))),z},t.unstable_shouldYield=P,t.unstable_wrapCallback=function(z){var F=m;return function(){var K=m;m=F;try{return z.apply(this,arguments)}finally{m=K}}}})(i2);r2.exports=i2;var rM=r2.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var iM=N,nr=rM;function it(t){for(var s="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)s+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var l2=new Set,yu={};function Ho(t,s){Qc(t,s),Qc(t+"Capture",s)}function Qc(t,s){for(yu[t]=s,t=0;t<s.length;t++)l2.add(s[t])}var $i=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),kg=Object.prototype.hasOwnProperty,lM=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,lN={},oN={};function oM(t){return kg.call(oN,t)?!0:kg.call(lN,t)?!1:lM.test(t)?oN[t]=!0:(lN[t]=!0,!1)}function cM(t,s,n,a){if(n!==null&&n.type===0)return!1;switch(typeof s){case"function":case"symbol":return!0;case"boolean":return a?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function dM(t,s,n,a){if(s===null||typeof s>"u"||cM(t,s,n,a))return!0;if(a)return!1;if(n!==null)switch(n.type){case 3:return!s;case 4:return s===!1;case 5:return isNaN(s);case 6:return isNaN(s)||1>s}return!1}function Ca(t,s,n,a,r,i,l){this.acceptsBooleans=s===2||s===3||s===4,this.attributeName=a,this.attributeNamespace=r,this.mustUseProperty=n,this.propertyName=t,this.type=s,this.sanitizeURL=i,this.removeEmptyString=l}var ea={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){ea[t]=new Ca(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var s=t[0];ea[s]=new Ca(s,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){ea[t]=new Ca(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){ea[t]=new Ca(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){ea[t]=new Ca(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){ea[t]=new Ca(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){ea[t]=new Ca(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){ea[t]=new Ca(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){ea[t]=new Ca(t,5,!1,t.toLowerCase(),null,!1,!1)});var Cv=/[\-:]([a-z])/g;function kv(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var s=t.replace(Cv,kv);ea[s]=new Ca(s,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var s=t.replace(Cv,kv);ea[s]=new Ca(s,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var s=t.replace(Cv,kv);ea[s]=new Ca(s,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){ea[t]=new Ca(t,1,!1,t.toLowerCase(),null,!1,!1)});ea.xlinkHref=new Ca("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){ea[t]=new Ca(t,1,!1,t.toLowerCase(),null,!0,!0)});function Av(t,s,n,a){var r=ea.hasOwnProperty(s)?ea[s]:null;(r!==null?r.type!==0:a||!(2<s.length)||s[0]!=="o"&&s[0]!=="O"||s[1]!=="n"&&s[1]!=="N")&&(dM(s,n,r,a)&&(n=null),a||r===null?oM(s)&&(n===null?t.removeAttribute(s):t.setAttribute(s,""+n)):r.mustUseProperty?t[r.propertyName]=n===null?r.type===3?!1:"":n:(s=r.attributeName,a=r.attributeNamespace,n===null?t.removeAttribute(s):(r=r.type,n=r===3||r===4&&n===!0?"":""+n,a?t.setAttributeNS(a,s,n):t.setAttribute(s,n))))}var Ki=iM.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,$m=Symbol.for("react.element"),cc=Symbol.for("react.portal"),dc=Symbol.for("react.fragment"),Pv=Symbol.for("react.strict_mode"),Ag=Symbol.for("react.profiler"),o2=Symbol.for("react.provider"),c2=Symbol.for("react.context"),Tv=Symbol.for("react.forward_ref"),Pg=Symbol.for("react.suspense"),Tg=Symbol.for("react.suspense_list"),Ev=Symbol.for("react.memo"),ml=Symbol.for("react.lazy"),d2=Symbol.for("react.offscreen"),cN=Symbol.iterator;function Id(t){return t===null||typeof t!="object"?null:(t=cN&&t[cN]||t["@@iterator"],typeof t=="function"?t:null)}var dn=Object.assign,mf;function Xd(t){if(mf===void 0)try{throw Error()}catch(n){var s=n.stack.trim().match(/\n( *(at )?)/);mf=s&&s[1]||""}return`
`+mf+t}var hf=!1;function xf(t,s){if(!t||hf)return"";hf=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(s)if(s=function(){throw Error()},Object.defineProperty(s.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(s,[])}catch(d){var a=d}Reflect.construct(t,[],s)}else{try{s.call()}catch(d){a=d}t.call(s.prototype)}else{try{throw Error()}catch(d){a=d}t()}}catch(d){if(d&&a&&typeof d.stack=="string"){for(var r=d.stack.split(`
`),i=a.stack.split(`
`),l=r.length-1,c=i.length-1;1<=l&&0<=c&&r[l]!==i[c];)c--;for(;1<=l&&0<=c;l--,c--)if(r[l]!==i[c]){if(l!==1||c!==1)do if(l--,c--,0>c||r[l]!==i[c]){var o=`
`+r[l].replace(" at new "," at ");return t.displayName&&o.includes("<anonymous>")&&(o=o.replace("<anonymous>",t.displayName)),o}while(1<=l&&0<=c);break}}}finally{hf=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Xd(t):""}function uM(t){switch(t.tag){case 5:return Xd(t.type);case 16:return Xd("Lazy");case 13:return Xd("Suspense");case 19:return Xd("SuspenseList");case 0:case 2:case 15:return t=xf(t.type,!1),t;case 11:return t=xf(t.type.render,!1),t;case 1:return t=xf(t.type,!0),t;default:return""}}function Eg(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case dc:return"Fragment";case cc:return"Portal";case Ag:return"Profiler";case Pv:return"StrictMode";case Pg:return"Suspense";case Tg:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case c2:return(t.displayName||"Context")+".Consumer";case o2:return(t._context.displayName||"Context")+".Provider";case Tv:var s=t.render;return t=t.displayName,t||(t=s.displayName||s.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Ev:return s=t.displayName||null,s!==null?s:Eg(t.type)||"Memo";case ml:s=t._payload,t=t._init;try{return Eg(t(s))}catch{}}return null}function mM(t){var s=t.type;switch(t.tag){case 24:return"Cache";case 9:return(s.displayName||"Context")+".Consumer";case 10:return(s._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=s.render,t=t.displayName||t.name||"",s.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return s;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Eg(s);case 8:return s===Pv?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof s=="function")return s.displayName||s.name||null;if(typeof s=="string")return s}return null}function Fl(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function u2(t){var s=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function hM(t){var s=u2(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,s),a=""+t[s];if(!t.hasOwnProperty(s)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var r=n.get,i=n.set;return Object.defineProperty(t,s,{configurable:!0,get:function(){return r.call(this)},set:function(l){a=""+l,i.call(this,l)}}),Object.defineProperty(t,s,{enumerable:n.enumerable}),{getValue:function(){return a},setValue:function(l){a=""+l},stopTracking:function(){t._valueTracker=null,delete t[s]}}}}function Bm(t){t._valueTracker||(t._valueTracker=hM(t))}function m2(t){if(!t)return!1;var s=t._valueTracker;if(!s)return!0;var n=s.getValue(),a="";return t&&(a=u2(t)?t.checked?"true":"false":t.value),t=a,t!==n?(s.setValue(t),!0):!1}function $h(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Mg(t,s){var n=s.checked;return dn({},s,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function dN(t,s){var n=s.defaultValue==null?"":s.defaultValue,a=s.checked!=null?s.checked:s.defaultChecked;n=Fl(s.value!=null?s.value:n),t._wrapperState={initialChecked:a,initialValue:n,controlled:s.type==="checkbox"||s.type==="radio"?s.checked!=null:s.value!=null}}function h2(t,s){s=s.checked,s!=null&&Av(t,"checked",s,!1)}function _g(t,s){h2(t,s);var n=Fl(s.value),a=s.type;if(n!=null)a==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(a==="submit"||a==="reset"){t.removeAttribute("value");return}s.hasOwnProperty("value")?Rg(t,s.type,n):s.hasOwnProperty("defaultValue")&&Rg(t,s.type,Fl(s.defaultValue)),s.checked==null&&s.defaultChecked!=null&&(t.defaultChecked=!!s.defaultChecked)}function uN(t,s,n){if(s.hasOwnProperty("value")||s.hasOwnProperty("defaultValue")){var a=s.type;if(!(a!=="submit"&&a!=="reset"||s.value!==void 0&&s.value!==null))return;s=""+t._wrapperState.initialValue,n||s===t.value||(t.value=s),t.defaultValue=s}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Rg(t,s,n){(s!=="number"||$h(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Jd=Array.isArray;function Sc(t,s,n,a){if(t=t.options,s){s={};for(var r=0;r<n.length;r++)s["$"+n[r]]=!0;for(n=0;n<t.length;n++)r=s.hasOwnProperty("$"+t[n].value),t[n].selected!==r&&(t[n].selected=r),r&&a&&(t[n].defaultSelected=!0)}else{for(n=""+Fl(n),s=null,r=0;r<t.length;r++){if(t[r].value===n){t[r].selected=!0,a&&(t[r].defaultSelected=!0);return}s!==null||t[r].disabled||(s=t[r])}s!==null&&(s.selected=!0)}}function Og(t,s){if(s.dangerouslySetInnerHTML!=null)throw Error(it(91));return dn({},s,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function mN(t,s){var n=s.value;if(n==null){if(n=s.children,s=s.defaultValue,n!=null){if(s!=null)throw Error(it(92));if(Jd(n)){if(1<n.length)throw Error(it(93));n=n[0]}s=n}s==null&&(s=""),n=s}t._wrapperState={initialValue:Fl(n)}}function x2(t,s){var n=Fl(s.value),a=Fl(s.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),s.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),a!=null&&(t.defaultValue=""+a)}function hN(t){var s=t.textContent;s===t._wrapperState.initialValue&&s!==""&&s!==null&&(t.value=s)}function p2(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Dg(t,s){return t==null||t==="http://www.w3.org/1999/xhtml"?p2(s):t==="http://www.w3.org/2000/svg"&&s==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Um,f2=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(s,n,a,r){MSApp.execUnsafeLocalFunction(function(){return t(s,n,a,r)})}:t}(function(t,s){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=s;else{for(Um=Um||document.createElement("div"),Um.innerHTML="<svg>"+s.valueOf().toString()+"</svg>",s=Um.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;s.firstChild;)t.appendChild(s.firstChild)}});function Nu(t,s){if(s){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=s;return}}t.textContent=s}var ou={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},xM=["Webkit","ms","Moz","O"];Object.keys(ou).forEach(function(t){xM.forEach(function(s){s=s+t.charAt(0).toUpperCase()+t.substring(1),ou[s]=ou[t]})});function g2(t,s,n){return s==null||typeof s=="boolean"||s===""?"":n||typeof s!="number"||s===0||ou.hasOwnProperty(t)&&ou[t]?(""+s).trim():s+"px"}function j2(t,s){t=t.style;for(var n in s)if(s.hasOwnProperty(n)){var a=n.indexOf("--")===0,r=g2(n,s[n],a);n==="float"&&(n="cssFloat"),a?t.setProperty(n,r):t[n]=r}}var pM=dn({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Ig(t,s){if(s){if(pM[t]&&(s.children!=null||s.dangerouslySetInnerHTML!=null))throw Error(it(137,t));if(s.dangerouslySetInnerHTML!=null){if(s.children!=null)throw Error(it(60));if(typeof s.dangerouslySetInnerHTML!="object"||!("__html"in s.dangerouslySetInnerHTML))throw Error(it(61))}if(s.style!=null&&typeof s.style!="object")throw Error(it(62))}}function Lg(t,s){if(t.indexOf("-")===-1)return typeof s.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Fg=null;function Mv(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var qg=null,Cc=null,kc=null;function xN(t){if(t=um(t)){if(typeof qg!="function")throw Error(it(280));var s=t.stateNode;s&&(s=Hx(s),qg(t.stateNode,t.type,s))}}function v2(t){Cc?kc?kc.push(t):kc=[t]:Cc=t}function y2(){if(Cc){var t=Cc,s=kc;if(kc=Cc=null,xN(t),s)for(t=0;t<s.length;t++)xN(s[t])}}function N2(t,s){return t(s)}function b2(){}var pf=!1;function w2(t,s,n){if(pf)return t(s,n);pf=!0;try{return N2(t,s,n)}finally{pf=!1,(Cc!==null||kc!==null)&&(b2(),y2())}}function bu(t,s){var n=t.stateNode;if(n===null)return null;var a=Hx(n);if(a===null)return null;n=a[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(a=!a.disabled)||(t=t.type,a=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!a;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(it(231,s,typeof n));return n}var $g=!1;if($i)try{var Ld={};Object.defineProperty(Ld,"passive",{get:function(){$g=!0}}),window.addEventListener("test",Ld,Ld),window.removeEventListener("test",Ld,Ld)}catch{$g=!1}function fM(t,s,n,a,r,i,l,c,o){var d=Array.prototype.slice.call(arguments,3);try{s.apply(n,d)}catch(h){this.onError(h)}}var cu=!1,Bh=null,Uh=!1,Bg=null,gM={onError:function(t){cu=!0,Bh=t}};function jM(t,s,n,a,r,i,l,c,o){cu=!1,Bh=null,fM.apply(gM,arguments)}function vM(t,s,n,a,r,i,l,c,o){if(jM.apply(this,arguments),cu){if(cu){var d=Bh;cu=!1,Bh=null}else throw Error(it(198));Uh||(Uh=!0,Bg=d)}}function Ko(t){var s=t,n=t;if(t.alternate)for(;s.return;)s=s.return;else{t=s;do s=t,s.flags&4098&&(n=s.return),t=s.return;while(t)}return s.tag===3?n:null}function S2(t){if(t.tag===13){var s=t.memoizedState;if(s===null&&(t=t.alternate,t!==null&&(s=t.memoizedState)),s!==null)return s.dehydrated}return null}function pN(t){if(Ko(t)!==t)throw Error(it(188))}function yM(t){var s=t.alternate;if(!s){if(s=Ko(t),s===null)throw Error(it(188));return s!==t?null:t}for(var n=t,a=s;;){var r=n.return;if(r===null)break;var i=r.alternate;if(i===null){if(a=r.return,a!==null){n=a;continue}break}if(r.child===i.child){for(i=r.child;i;){if(i===n)return pN(r),t;if(i===a)return pN(r),s;i=i.sibling}throw Error(it(188))}if(n.return!==a.return)n=r,a=i;else{for(var l=!1,c=r.child;c;){if(c===n){l=!0,n=r,a=i;break}if(c===a){l=!0,a=r,n=i;break}c=c.sibling}if(!l){for(c=i.child;c;){if(c===n){l=!0,n=i,a=r;break}if(c===a){l=!0,a=i,n=r;break}c=c.sibling}if(!l)throw Error(it(189))}}if(n.alternate!==a)throw Error(it(190))}if(n.tag!==3)throw Error(it(188));return n.stateNode.current===n?t:s}function C2(t){return t=yM(t),t!==null?k2(t):null}function k2(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var s=k2(t);if(s!==null)return s;t=t.sibling}return null}var A2=nr.unstable_scheduleCallback,fN=nr.unstable_cancelCallback,NM=nr.unstable_shouldYield,bM=nr.unstable_requestPaint,bn=nr.unstable_now,wM=nr.unstable_getCurrentPriorityLevel,_v=nr.unstable_ImmediatePriority,P2=nr.unstable_UserBlockingPriority,zh=nr.unstable_NormalPriority,SM=nr.unstable_LowPriority,T2=nr.unstable_IdlePriority,zx=null,oi=null;function CM(t){if(oi&&typeof oi.onCommitFiberRoot=="function")try{oi.onCommitFiberRoot(zx,t,void 0,(t.current.flags&128)===128)}catch{}}var Lr=Math.clz32?Math.clz32:PM,kM=Math.log,AM=Math.LN2;function PM(t){return t>>>=0,t===0?32:31-(kM(t)/AM|0)|0}var zm=64,Vm=4194304;function eu(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Vh(t,s){var n=t.pendingLanes;if(n===0)return 0;var a=0,r=t.suspendedLanes,i=t.pingedLanes,l=n&268435455;if(l!==0){var c=l&~r;c!==0?a=eu(c):(i&=l,i!==0&&(a=eu(i)))}else l=n&~r,l!==0?a=eu(l):i!==0&&(a=eu(i));if(a===0)return 0;if(s!==0&&s!==a&&!(s&r)&&(r=a&-a,i=s&-s,r>=i||r===16&&(i&4194240)!==0))return s;if(a&4&&(a|=n&16),s=t.entangledLanes,s!==0)for(t=t.entanglements,s&=a;0<s;)n=31-Lr(s),r=1<<n,a|=t[n],s&=~r;return a}function TM(t,s){switch(t){case 1:case 2:case 4:return s+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function EM(t,s){for(var n=t.suspendedLanes,a=t.pingedLanes,r=t.expirationTimes,i=t.pendingLanes;0<i;){var l=31-Lr(i),c=1<<l,o=r[l];o===-1?(!(c&n)||c&a)&&(r[l]=TM(c,s)):o<=s&&(t.expiredLanes|=c),i&=~c}}function Ug(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function E2(){var t=zm;return zm<<=1,!(zm&4194240)&&(zm=64),t}function ff(t){for(var s=[],n=0;31>n;n++)s.push(t);return s}function cm(t,s,n){t.pendingLanes|=s,s!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,s=31-Lr(s),t[s]=n}function MM(t,s){var n=t.pendingLanes&~s;t.pendingLanes=s,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=s,t.mutableReadLanes&=s,t.entangledLanes&=s,s=t.entanglements;var a=t.eventTimes;for(t=t.expirationTimes;0<n;){var r=31-Lr(n),i=1<<r;s[r]=0,a[r]=-1,t[r]=-1,n&=~i}}function Rv(t,s){var n=t.entangledLanes|=s;for(t=t.entanglements;n;){var a=31-Lr(n),r=1<<a;r&s|t[a]&s&&(t[a]|=s),n&=~r}}var Ds=0;function M2(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var _2,Ov,R2,O2,D2,zg=!1,Gm=[],Pl=null,Tl=null,El=null,wu=new Map,Su=new Map,xl=[],_M="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function gN(t,s){switch(t){case"focusin":case"focusout":Pl=null;break;case"dragenter":case"dragleave":Tl=null;break;case"mouseover":case"mouseout":El=null;break;case"pointerover":case"pointerout":wu.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":Su.delete(s.pointerId)}}function Fd(t,s,n,a,r,i){return t===null||t.nativeEvent!==i?(t={blockedOn:s,domEventName:n,eventSystemFlags:a,nativeEvent:i,targetContainers:[r]},s!==null&&(s=um(s),s!==null&&Ov(s)),t):(t.eventSystemFlags|=a,s=t.targetContainers,r!==null&&s.indexOf(r)===-1&&s.push(r),t)}function RM(t,s,n,a,r){switch(s){case"focusin":return Pl=Fd(Pl,t,s,n,a,r),!0;case"dragenter":return Tl=Fd(Tl,t,s,n,a,r),!0;case"mouseover":return El=Fd(El,t,s,n,a,r),!0;case"pointerover":var i=r.pointerId;return wu.set(i,Fd(wu.get(i)||null,t,s,n,a,r)),!0;case"gotpointercapture":return i=r.pointerId,Su.set(i,Fd(Su.get(i)||null,t,s,n,a,r)),!0}return!1}function I2(t){var s=xo(t.target);if(s!==null){var n=Ko(s);if(n!==null){if(s=n.tag,s===13){if(s=S2(n),s!==null){t.blockedOn=s,D2(t.priority,function(){R2(n)});return}}else if(s===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function vh(t){if(t.blockedOn!==null)return!1;for(var s=t.targetContainers;0<s.length;){var n=Vg(t.domEventName,t.eventSystemFlags,s[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var a=new n.constructor(n.type,n);Fg=a,n.target.dispatchEvent(a),Fg=null}else return s=um(n),s!==null&&Ov(s),t.blockedOn=n,!1;s.shift()}return!0}function jN(t,s,n){vh(t)&&n.delete(s)}function OM(){zg=!1,Pl!==null&&vh(Pl)&&(Pl=null),Tl!==null&&vh(Tl)&&(Tl=null),El!==null&&vh(El)&&(El=null),wu.forEach(jN),Su.forEach(jN)}function qd(t,s){t.blockedOn===s&&(t.blockedOn=null,zg||(zg=!0,nr.unstable_scheduleCallback(nr.unstable_NormalPriority,OM)))}function Cu(t){function s(r){return qd(r,t)}if(0<Gm.length){qd(Gm[0],t);for(var n=1;n<Gm.length;n++){var a=Gm[n];a.blockedOn===t&&(a.blockedOn=null)}}for(Pl!==null&&qd(Pl,t),Tl!==null&&qd(Tl,t),El!==null&&qd(El,t),wu.forEach(s),Su.forEach(s),n=0;n<xl.length;n++)a=xl[n],a.blockedOn===t&&(a.blockedOn=null);for(;0<xl.length&&(n=xl[0],n.blockedOn===null);)I2(n),n.blockedOn===null&&xl.shift()}var Ac=Ki.ReactCurrentBatchConfig,Gh=!0;function DM(t,s,n,a){var r=Ds,i=Ac.transition;Ac.transition=null;try{Ds=1,Dv(t,s,n,a)}finally{Ds=r,Ac.transition=i}}function IM(t,s,n,a){var r=Ds,i=Ac.transition;Ac.transition=null;try{Ds=4,Dv(t,s,n,a)}finally{Ds=r,Ac.transition=i}}function Dv(t,s,n,a){if(Gh){var r=Vg(t,s,n,a);if(r===null)kf(t,s,a,Wh,n),gN(t,a);else if(RM(r,t,s,n,a))a.stopPropagation();else if(gN(t,a),s&4&&-1<_M.indexOf(t)){for(;r!==null;){var i=um(r);if(i!==null&&_2(i),i=Vg(t,s,n,a),i===null&&kf(t,s,a,Wh,n),i===r)break;r=i}r!==null&&a.stopPropagation()}else kf(t,s,a,null,n)}}var Wh=null;function Vg(t,s,n,a){if(Wh=null,t=Mv(a),t=xo(t),t!==null)if(s=Ko(t),s===null)t=null;else if(n=s.tag,n===13){if(t=S2(s),t!==null)return t;t=null}else if(n===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;t=null}else s!==t&&(t=null);return Wh=t,null}function L2(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(wM()){case _v:return 1;case P2:return 4;case zh:case SM:return 16;case T2:return 536870912;default:return 16}default:return 16}}var kl=null,Iv=null,yh=null;function F2(){if(yh)return yh;var t,s=Iv,n=s.length,a,r="value"in kl?kl.value:kl.textContent,i=r.length;for(t=0;t<n&&s[t]===r[t];t++);var l=n-t;for(a=1;a<=l&&s[n-a]===r[i-a];a++);return yh=r.slice(t,1<a?1-a:void 0)}function Nh(t){var s=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&s===13&&(t=13)):t=s,t===10&&(t=13),32<=t||t===13?t:0}function Wm(){return!0}function vN(){return!1}function rr(t){function s(n,a,r,i,l){this._reactName=n,this._targetInst=r,this.type=a,this.nativeEvent=i,this.target=l,this.currentTarget=null;for(var c in t)t.hasOwnProperty(c)&&(n=t[c],this[c]=n?n(i):i[c]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?Wm:vN,this.isPropagationStopped=vN,this}return dn(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Wm)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Wm)},persist:function(){},isPersistent:Wm}),s}var jd={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Lv=rr(jd),dm=dn({},jd,{view:0,detail:0}),LM=rr(dm),gf,jf,$d,Vx=dn({},dm,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Fv,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==$d&&($d&&t.type==="mousemove"?(gf=t.screenX-$d.screenX,jf=t.screenY-$d.screenY):jf=gf=0,$d=t),gf)},movementY:function(t){return"movementY"in t?t.movementY:jf}}),yN=rr(Vx),FM=dn({},Vx,{dataTransfer:0}),qM=rr(FM),$M=dn({},dm,{relatedTarget:0}),vf=rr($M),BM=dn({},jd,{animationName:0,elapsedTime:0,pseudoElement:0}),UM=rr(BM),zM=dn({},jd,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),VM=rr(zM),GM=dn({},jd,{data:0}),NN=rr(GM),WM={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},HM={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},KM={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function YM(t){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(t):(t=KM[t])?!!s[t]:!1}function Fv(){return YM}var QM=dn({},dm,{key:function(t){if(t.key){var s=WM[t.key]||t.key;if(s!=="Unidentified")return s}return t.type==="keypress"?(t=Nh(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?HM[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Fv,charCode:function(t){return t.type==="keypress"?Nh(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Nh(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),ZM=rr(QM),XM=dn({},Vx,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),bN=rr(XM),JM=dn({},dm,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Fv}),e3=rr(JM),t3=dn({},jd,{propertyName:0,elapsedTime:0,pseudoElement:0}),s3=rr(t3),n3=dn({},Vx,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),a3=rr(n3),r3=[9,13,27,32],qv=$i&&"CompositionEvent"in window,du=null;$i&&"documentMode"in document&&(du=document.documentMode);var i3=$i&&"TextEvent"in window&&!du,q2=$i&&(!qv||du&&8<du&&11>=du),wN=" ",SN=!1;function $2(t,s){switch(t){case"keyup":return r3.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function B2(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var uc=!1;function l3(t,s){switch(t){case"compositionend":return B2(s);case"keypress":return s.which!==32?null:(SN=!0,wN);case"textInput":return t=s.data,t===wN&&SN?null:t;default:return null}}function o3(t,s){if(uc)return t==="compositionend"||!qv&&$2(t,s)?(t=F2(),yh=Iv=kl=null,uc=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return q2&&s.locale!=="ko"?null:s.data;default:return null}}var c3={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function CN(t){var s=t&&t.nodeName&&t.nodeName.toLowerCase();return s==="input"?!!c3[t.type]:s==="textarea"}function U2(t,s,n,a){v2(a),s=Hh(s,"onChange"),0<s.length&&(n=new Lv("onChange","change",null,n,a),t.push({event:n,listeners:s}))}var uu=null,ku=null;function d3(t){J2(t,0)}function Gx(t){var s=xc(t);if(m2(s))return t}function u3(t,s){if(t==="change")return s}var z2=!1;if($i){var yf;if($i){var Nf="oninput"in document;if(!Nf){var kN=document.createElement("div");kN.setAttribute("oninput","return;"),Nf=typeof kN.oninput=="function"}yf=Nf}else yf=!1;z2=yf&&(!document.documentMode||9<document.documentMode)}function AN(){uu&&(uu.detachEvent("onpropertychange",V2),ku=uu=null)}function V2(t){if(t.propertyName==="value"&&Gx(ku)){var s=[];U2(s,ku,t,Mv(t)),w2(d3,s)}}function m3(t,s,n){t==="focusin"?(AN(),uu=s,ku=n,uu.attachEvent("onpropertychange",V2)):t==="focusout"&&AN()}function h3(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Gx(ku)}function x3(t,s){if(t==="click")return Gx(s)}function p3(t,s){if(t==="input"||t==="change")return Gx(s)}function f3(t,s){return t===s&&(t!==0||1/t===1/s)||t!==t&&s!==s}var Br=typeof Object.is=="function"?Object.is:f3;function Au(t,s){if(Br(t,s))return!0;if(typeof t!="object"||t===null||typeof s!="object"||s===null)return!1;var n=Object.keys(t),a=Object.keys(s);if(n.length!==a.length)return!1;for(a=0;a<n.length;a++){var r=n[a];if(!kg.call(s,r)||!Br(t[r],s[r]))return!1}return!0}function PN(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function TN(t,s){var n=PN(t);t=0;for(var a;n;){if(n.nodeType===3){if(a=t+n.textContent.length,t<=s&&a>=s)return{node:n,offset:s-t};t=a}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=PN(n)}}function G2(t,s){return t&&s?t===s?!0:t&&t.nodeType===3?!1:s&&s.nodeType===3?G2(t,s.parentNode):"contains"in t?t.contains(s):t.compareDocumentPosition?!!(t.compareDocumentPosition(s)&16):!1:!1}function W2(){for(var t=window,s=$h();s instanceof t.HTMLIFrameElement;){try{var n=typeof s.contentWindow.location.href=="string"}catch{n=!1}if(n)t=s.contentWindow;else break;s=$h(t.document)}return s}function $v(t){var s=t&&t.nodeName&&t.nodeName.toLowerCase();return s&&(s==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||s==="textarea"||t.contentEditable==="true")}function g3(t){var s=W2(),n=t.focusedElem,a=t.selectionRange;if(s!==n&&n&&n.ownerDocument&&G2(n.ownerDocument.documentElement,n)){if(a!==null&&$v(n)){if(s=a.start,t=a.end,t===void 0&&(t=s),"selectionStart"in n)n.selectionStart=s,n.selectionEnd=Math.min(t,n.value.length);else if(t=(s=n.ownerDocument||document)&&s.defaultView||window,t.getSelection){t=t.getSelection();var r=n.textContent.length,i=Math.min(a.start,r);a=a.end===void 0?i:Math.min(a.end,r),!t.extend&&i>a&&(r=a,a=i,i=r),r=TN(n,i);var l=TN(n,a);r&&l&&(t.rangeCount!==1||t.anchorNode!==r.node||t.anchorOffset!==r.offset||t.focusNode!==l.node||t.focusOffset!==l.offset)&&(s=s.createRange(),s.setStart(r.node,r.offset),t.removeAllRanges(),i>a?(t.addRange(s),t.extend(l.node,l.offset)):(s.setEnd(l.node,l.offset),t.addRange(s)))}}for(s=[],t=n;t=t.parentNode;)t.nodeType===1&&s.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<s.length;n++)t=s[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var j3=$i&&"documentMode"in document&&11>=document.documentMode,mc=null,Gg=null,mu=null,Wg=!1;function EN(t,s,n){var a=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Wg||mc==null||mc!==$h(a)||(a=mc,"selectionStart"in a&&$v(a)?a={start:a.selectionStart,end:a.selectionEnd}:(a=(a.ownerDocument&&a.ownerDocument.defaultView||window).getSelection(),a={anchorNode:a.anchorNode,anchorOffset:a.anchorOffset,focusNode:a.focusNode,focusOffset:a.focusOffset}),mu&&Au(mu,a)||(mu=a,a=Hh(Gg,"onSelect"),0<a.length&&(s=new Lv("onSelect","select",null,s,n),t.push({event:s,listeners:a}),s.target=mc)))}function Hm(t,s){var n={};return n[t.toLowerCase()]=s.toLowerCase(),n["Webkit"+t]="webkit"+s,n["Moz"+t]="moz"+s,n}var hc={animationend:Hm("Animation","AnimationEnd"),animationiteration:Hm("Animation","AnimationIteration"),animationstart:Hm("Animation","AnimationStart"),transitionend:Hm("Transition","TransitionEnd")},bf={},H2={};$i&&(H2=document.createElement("div").style,"AnimationEvent"in window||(delete hc.animationend.animation,delete hc.animationiteration.animation,delete hc.animationstart.animation),"TransitionEvent"in window||delete hc.transitionend.transition);function Wx(t){if(bf[t])return bf[t];if(!hc[t])return t;var s=hc[t],n;for(n in s)if(s.hasOwnProperty(n)&&n in H2)return bf[t]=s[n];return t}var K2=Wx("animationend"),Y2=Wx("animationiteration"),Q2=Wx("animationstart"),Z2=Wx("transitionend"),X2=new Map,MN="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Zl(t,s){X2.set(t,s),Ho(s,[t])}for(var wf=0;wf<MN.length;wf++){var Sf=MN[wf],v3=Sf.toLowerCase(),y3=Sf[0].toUpperCase()+Sf.slice(1);Zl(v3,"on"+y3)}Zl(K2,"onAnimationEnd");Zl(Y2,"onAnimationIteration");Zl(Q2,"onAnimationStart");Zl("dblclick","onDoubleClick");Zl("focusin","onFocus");Zl("focusout","onBlur");Zl(Z2,"onTransitionEnd");Qc("onMouseEnter",["mouseout","mouseover"]);Qc("onMouseLeave",["mouseout","mouseover"]);Qc("onPointerEnter",["pointerout","pointerover"]);Qc("onPointerLeave",["pointerout","pointerover"]);Ho("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Ho("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Ho("onBeforeInput",["compositionend","keypress","textInput","paste"]);Ho("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Ho("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Ho("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var tu="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),N3=new Set("cancel close invalid load scroll toggle".split(" ").concat(tu));function _N(t,s,n){var a=t.type||"unknown-event";t.currentTarget=n,vM(a,s,void 0,t),t.currentTarget=null}function J2(t,s){s=(s&4)!==0;for(var n=0;n<t.length;n++){var a=t[n],r=a.event;a=a.listeners;e:{var i=void 0;if(s)for(var l=a.length-1;0<=l;l--){var c=a[l],o=c.instance,d=c.currentTarget;if(c=c.listener,o!==i&&r.isPropagationStopped())break e;_N(r,c,d),i=o}else for(l=0;l<a.length;l++){if(c=a[l],o=c.instance,d=c.currentTarget,c=c.listener,o!==i&&r.isPropagationStopped())break e;_N(r,c,d),i=o}}}if(Uh)throw t=Bg,Uh=!1,Bg=null,t}function Ks(t,s){var n=s[Zg];n===void 0&&(n=s[Zg]=new Set);var a=t+"__bubble";n.has(a)||(eS(s,t,2,!1),n.add(a))}function Cf(t,s,n){var a=0;s&&(a|=4),eS(n,t,a,s)}var Km="_reactListening"+Math.random().toString(36).slice(2);function Pu(t){if(!t[Km]){t[Km]=!0,l2.forEach(function(n){n!=="selectionchange"&&(N3.has(n)||Cf(n,!1,t),Cf(n,!0,t))});var s=t.nodeType===9?t:t.ownerDocument;s===null||s[Km]||(s[Km]=!0,Cf("selectionchange",!1,s))}}function eS(t,s,n,a){switch(L2(s)){case 1:var r=DM;break;case 4:r=IM;break;default:r=Dv}n=r.bind(null,s,n,t),r=void 0,!$g||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(r=!0),a?r!==void 0?t.addEventListener(s,n,{capture:!0,passive:r}):t.addEventListener(s,n,!0):r!==void 0?t.addEventListener(s,n,{passive:r}):t.addEventListener(s,n,!1)}function kf(t,s,n,a,r){var i=a;if(!(s&1)&&!(s&2)&&a!==null)e:for(;;){if(a===null)return;var l=a.tag;if(l===3||l===4){var c=a.stateNode.containerInfo;if(c===r||c.nodeType===8&&c.parentNode===r)break;if(l===4)for(l=a.return;l!==null;){var o=l.tag;if((o===3||o===4)&&(o=l.stateNode.containerInfo,o===r||o.nodeType===8&&o.parentNode===r))return;l=l.return}for(;c!==null;){if(l=xo(c),l===null)return;if(o=l.tag,o===5||o===6){a=i=l;continue e}c=c.parentNode}}a=a.return}w2(function(){var d=i,h=Mv(n),u=[];e:{var m=X2.get(t);if(m!==void 0){var p=Lv,g=t;switch(t){case"keypress":if(Nh(n)===0)break e;case"keydown":case"keyup":p=ZM;break;case"focusin":g="focus",p=vf;break;case"focusout":g="blur",p=vf;break;case"beforeblur":case"afterblur":p=vf;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":p=yN;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":p=qM;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":p=e3;break;case K2:case Y2:case Q2:p=UM;break;case Z2:p=s3;break;case"scroll":p=LM;break;case"wheel":p=a3;break;case"copy":case"cut":case"paste":p=VM;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":p=bN}var x=(s&4)!==0,v=!x&&t==="scroll",y=x?m!==null?m+"Capture":null:m;x=[];for(var f=d,b;f!==null;){b=f;var j=b.stateNode;if(b.tag===5&&j!==null&&(b=j,y!==null&&(j=bu(f,y),j!=null&&x.push(Tu(f,j,b)))),v)break;f=f.return}0<x.length&&(m=new p(m,g,null,n,h),u.push({event:m,listeners:x}))}}if(!(s&7)){e:{if(m=t==="mouseover"||t==="pointerover",p=t==="mouseout"||t==="pointerout",m&&n!==Fg&&(g=n.relatedTarget||n.fromElement)&&(xo(g)||g[Bi]))break e;if((p||m)&&(m=h.window===h?h:(m=h.ownerDocument)?m.defaultView||m.parentWindow:window,p?(g=n.relatedTarget||n.toElement,p=d,g=g?xo(g):null,g!==null&&(v=Ko(g),g!==v||g.tag!==5&&g.tag!==6)&&(g=null)):(p=null,g=d),p!==g)){if(x=yN,j="onMouseLeave",y="onMouseEnter",f="mouse",(t==="pointerout"||t==="pointerover")&&(x=bN,j="onPointerLeave",y="onPointerEnter",f="pointer"),v=p==null?m:xc(p),b=g==null?m:xc(g),m=new x(j,f+"leave",p,n,h),m.target=v,m.relatedTarget=b,j=null,xo(h)===d&&(x=new x(y,f+"enter",g,n,h),x.target=b,x.relatedTarget=v,j=x),v=j,p&&g)t:{for(x=p,y=g,f=0,b=x;b;b=ec(b))f++;for(b=0,j=y;j;j=ec(j))b++;for(;0<f-b;)x=ec(x),f--;for(;0<b-f;)y=ec(y),b--;for(;f--;){if(x===y||y!==null&&x===y.alternate)break t;x=ec(x),y=ec(y)}x=null}else x=null;p!==null&&RN(u,m,p,x,!1),g!==null&&v!==null&&RN(u,v,g,x,!0)}}e:{if(m=d?xc(d):window,p=m.nodeName&&m.nodeName.toLowerCase(),p==="select"||p==="input"&&m.type==="file")var S=u3;else if(CN(m))if(z2)S=p3;else{S=h3;var k=m3}else(p=m.nodeName)&&p.toLowerCase()==="input"&&(m.type==="checkbox"||m.type==="radio")&&(S=x3);if(S&&(S=S(t,d))){U2(u,S,n,h);break e}k&&k(t,m,d),t==="focusout"&&(k=m._wrapperState)&&k.controlled&&m.type==="number"&&Rg(m,"number",m.value)}switch(k=d?xc(d):window,t){case"focusin":(CN(k)||k.contentEditable==="true")&&(mc=k,Gg=d,mu=null);break;case"focusout":mu=Gg=mc=null;break;case"mousedown":Wg=!0;break;case"contextmenu":case"mouseup":case"dragend":Wg=!1,EN(u,n,h);break;case"selectionchange":if(j3)break;case"keydown":case"keyup":EN(u,n,h)}var T;if(qv)e:{switch(t){case"compositionstart":var A="onCompositionStart";break e;case"compositionend":A="onCompositionEnd";break e;case"compositionupdate":A="onCompositionUpdate";break e}A=void 0}else uc?$2(t,n)&&(A="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(A="onCompositionStart");A&&(q2&&n.locale!=="ko"&&(uc||A!=="onCompositionStart"?A==="onCompositionEnd"&&uc&&(T=F2()):(kl=h,Iv="value"in kl?kl.value:kl.textContent,uc=!0)),k=Hh(d,A),0<k.length&&(A=new NN(A,t,null,n,h),u.push({event:A,listeners:k}),T?A.data=T:(T=B2(n),T!==null&&(A.data=T)))),(T=i3?l3(t,n):o3(t,n))&&(d=Hh(d,"onBeforeInput"),0<d.length&&(h=new NN("onBeforeInput","beforeinput",null,n,h),u.push({event:h,listeners:d}),h.data=T))}J2(u,s)})}function Tu(t,s,n){return{instance:t,listener:s,currentTarget:n}}function Hh(t,s){for(var n=s+"Capture",a=[];t!==null;){var r=t,i=r.stateNode;r.tag===5&&i!==null&&(r=i,i=bu(t,n),i!=null&&a.unshift(Tu(t,i,r)),i=bu(t,s),i!=null&&a.push(Tu(t,i,r))),t=t.return}return a}function ec(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function RN(t,s,n,a,r){for(var i=s._reactName,l=[];n!==null&&n!==a;){var c=n,o=c.alternate,d=c.stateNode;if(o!==null&&o===a)break;c.tag===5&&d!==null&&(c=d,r?(o=bu(n,i),o!=null&&l.unshift(Tu(n,o,c))):r||(o=bu(n,i),o!=null&&l.push(Tu(n,o,c)))),n=n.return}l.length!==0&&t.push({event:s,listeners:l})}var b3=/\r\n?/g,w3=/\u0000|\uFFFD/g;function ON(t){return(typeof t=="string"?t:""+t).replace(b3,`
`).replace(w3,"")}function Ym(t,s,n){if(s=ON(s),ON(t)!==s&&n)throw Error(it(425))}function Kh(){}var Hg=null,Kg=null;function Yg(t,s){return t==="textarea"||t==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var Qg=typeof setTimeout=="function"?setTimeout:void 0,S3=typeof clearTimeout=="function"?clearTimeout:void 0,DN=typeof Promise=="function"?Promise:void 0,C3=typeof queueMicrotask=="function"?queueMicrotask:typeof DN<"u"?function(t){return DN.resolve(null).then(t).catch(k3)}:Qg;function k3(t){setTimeout(function(){throw t})}function Af(t,s){var n=s,a=0;do{var r=n.nextSibling;if(t.removeChild(n),r&&r.nodeType===8)if(n=r.data,n==="/$"){if(a===0){t.removeChild(r),Cu(s);return}a--}else n!=="$"&&n!=="$?"&&n!=="$!"||a++;n=r}while(n);Cu(s)}function Ml(t){for(;t!=null;t=t.nextSibling){var s=t.nodeType;if(s===1||s===3)break;if(s===8){if(s=t.data,s==="$"||s==="$!"||s==="$?")break;if(s==="/$")return null}}return t}function IN(t){t=t.previousSibling;for(var s=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(s===0)return t;s--}else n==="/$"&&s++}t=t.previousSibling}return null}var vd=Math.random().toString(36).slice(2),ni="__reactFiber$"+vd,Eu="__reactProps$"+vd,Bi="__reactContainer$"+vd,Zg="__reactEvents$"+vd,A3="__reactListeners$"+vd,P3="__reactHandles$"+vd;function xo(t){var s=t[ni];if(s)return s;for(var n=t.parentNode;n;){if(s=n[Bi]||n[ni]){if(n=s.alternate,s.child!==null||n!==null&&n.child!==null)for(t=IN(t);t!==null;){if(n=t[ni])return n;t=IN(t)}return s}t=n,n=t.parentNode}return null}function um(t){return t=t[ni]||t[Bi],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function xc(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(it(33))}function Hx(t){return t[Eu]||null}var Xg=[],pc=-1;function Xl(t){return{current:t}}function Zs(t){0>pc||(t.current=Xg[pc],Xg[pc]=null,pc--)}function Vs(t,s){pc++,Xg[pc]=t.current,t.current=s}var ql={},da=Xl(ql),Da=Xl(!1),Mo=ql;function Zc(t,s){var n=t.type.contextTypes;if(!n)return ql;var a=t.stateNode;if(a&&a.__reactInternalMemoizedUnmaskedChildContext===s)return a.__reactInternalMemoizedMaskedChildContext;var r={},i;for(i in n)r[i]=s[i];return a&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=r),r}function Ia(t){return t=t.childContextTypes,t!=null}function Yh(){Zs(Da),Zs(da)}function LN(t,s,n){if(da.current!==ql)throw Error(it(168));Vs(da,s),Vs(Da,n)}function tS(t,s,n){var a=t.stateNode;if(s=s.childContextTypes,typeof a.getChildContext!="function")return n;a=a.getChildContext();for(var r in a)if(!(r in s))throw Error(it(108,mM(t)||"Unknown",r));return dn({},n,a)}function Qh(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||ql,Mo=da.current,Vs(da,t),Vs(Da,Da.current),!0}function FN(t,s,n){var a=t.stateNode;if(!a)throw Error(it(169));n?(t=tS(t,s,Mo),a.__reactInternalMemoizedMergedChildContext=t,Zs(Da),Zs(da),Vs(da,t)):Zs(Da),Vs(Da,n)}var Pi=null,Kx=!1,Pf=!1;function sS(t){Pi===null?Pi=[t]:Pi.push(t)}function T3(t){Kx=!0,sS(t)}function Jl(){if(!Pf&&Pi!==null){Pf=!0;var t=0,s=Ds;try{var n=Pi;for(Ds=1;t<n.length;t++){var a=n[t];do a=a(!0);while(a!==null)}Pi=null,Kx=!1}catch(r){throw Pi!==null&&(Pi=Pi.slice(t+1)),A2(_v,Jl),r}finally{Ds=s,Pf=!1}}return null}var fc=[],gc=0,Zh=null,Xh=0,ur=[],mr=0,_o=null,Ri=1,Oi="";function lo(t,s){fc[gc++]=Xh,fc[gc++]=Zh,Zh=t,Xh=s}function nS(t,s,n){ur[mr++]=Ri,ur[mr++]=Oi,ur[mr++]=_o,_o=t;var a=Ri;t=Oi;var r=32-Lr(a)-1;a&=~(1<<r),n+=1;var i=32-Lr(s)+r;if(30<i){var l=r-r%5;i=(a&(1<<l)-1).toString(32),a>>=l,r-=l,Ri=1<<32-Lr(s)+r|n<<r|a,Oi=i+t}else Ri=1<<i|n<<r|a,Oi=t}function Bv(t){t.return!==null&&(lo(t,1),nS(t,1,0))}function Uv(t){for(;t===Zh;)Zh=fc[--gc],fc[gc]=null,Xh=fc[--gc],fc[gc]=null;for(;t===_o;)_o=ur[--mr],ur[mr]=null,Oi=ur[--mr],ur[mr]=null,Ri=ur[--mr],ur[mr]=null}var Ja=null,Xa=null,tn=!1,_r=null;function aS(t,s){var n=pr(5,null,null,0);n.elementType="DELETED",n.stateNode=s,n.return=t,s=t.deletions,s===null?(t.deletions=[n],t.flags|=16):s.push(n)}function qN(t,s){switch(t.tag){case 5:var n=t.type;return s=s.nodeType!==1||n.toLowerCase()!==s.nodeName.toLowerCase()?null:s,s!==null?(t.stateNode=s,Ja=t,Xa=Ml(s.firstChild),!0):!1;case 6:return s=t.pendingProps===""||s.nodeType!==3?null:s,s!==null?(t.stateNode=s,Ja=t,Xa=null,!0):!1;case 13:return s=s.nodeType!==8?null:s,s!==null?(n=_o!==null?{id:Ri,overflow:Oi}:null,t.memoizedState={dehydrated:s,treeContext:n,retryLane:1073741824},n=pr(18,null,null,0),n.stateNode=s,n.return=t,t.child=n,Ja=t,Xa=null,!0):!1;default:return!1}}function Jg(t){return(t.mode&1)!==0&&(t.flags&128)===0}function ej(t){if(tn){var s=Xa;if(s){var n=s;if(!qN(t,s)){if(Jg(t))throw Error(it(418));s=Ml(n.nextSibling);var a=Ja;s&&qN(t,s)?aS(a,n):(t.flags=t.flags&-4097|2,tn=!1,Ja=t)}}else{if(Jg(t))throw Error(it(418));t.flags=t.flags&-4097|2,tn=!1,Ja=t}}}function $N(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Ja=t}function Qm(t){if(t!==Ja)return!1;if(!tn)return $N(t),tn=!0,!1;var s;if((s=t.tag!==3)&&!(s=t.tag!==5)&&(s=t.type,s=s!=="head"&&s!=="body"&&!Yg(t.type,t.memoizedProps)),s&&(s=Xa)){if(Jg(t))throw rS(),Error(it(418));for(;s;)aS(t,s),s=Ml(s.nextSibling)}if($N(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(it(317));e:{for(t=t.nextSibling,s=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(s===0){Xa=Ml(t.nextSibling);break e}s--}else n!=="$"&&n!=="$!"&&n!=="$?"||s++}t=t.nextSibling}Xa=null}}else Xa=Ja?Ml(t.stateNode.nextSibling):null;return!0}function rS(){for(var t=Xa;t;)t=Ml(t.nextSibling)}function Xc(){Xa=Ja=null,tn=!1}function zv(t){_r===null?_r=[t]:_r.push(t)}var E3=Ki.ReactCurrentBatchConfig;function Bd(t,s,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(it(309));var a=n.stateNode}if(!a)throw Error(it(147,t));var r=a,i=""+t;return s!==null&&s.ref!==null&&typeof s.ref=="function"&&s.ref._stringRef===i?s.ref:(s=function(l){var c=r.refs;l===null?delete c[i]:c[i]=l},s._stringRef=i,s)}if(typeof t!="string")throw Error(it(284));if(!n._owner)throw Error(it(290,t))}return t}function Zm(t,s){throw t=Object.prototype.toString.call(s),Error(it(31,t==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":t))}function BN(t){var s=t._init;return s(t._payload)}function iS(t){function s(y,f){if(t){var b=y.deletions;b===null?(y.deletions=[f],y.flags|=16):b.push(f)}}function n(y,f){if(!t)return null;for(;f!==null;)s(y,f),f=f.sibling;return null}function a(y,f){for(y=new Map;f!==null;)f.key!==null?y.set(f.key,f):y.set(f.index,f),f=f.sibling;return y}function r(y,f){return y=Dl(y,f),y.index=0,y.sibling=null,y}function i(y,f,b){return y.index=b,t?(b=y.alternate,b!==null?(b=b.index,b<f?(y.flags|=2,f):b):(y.flags|=2,f)):(y.flags|=1048576,f)}function l(y){return t&&y.alternate===null&&(y.flags|=2),y}function c(y,f,b,j){return f===null||f.tag!==6?(f=Df(b,y.mode,j),f.return=y,f):(f=r(f,b),f.return=y,f)}function o(y,f,b,j){var S=b.type;return S===dc?h(y,f,b.props.children,j,b.key):f!==null&&(f.elementType===S||typeof S=="object"&&S!==null&&S.$$typeof===ml&&BN(S)===f.type)?(j=r(f,b.props),j.ref=Bd(y,f,b),j.return=y,j):(j=Ph(b.type,b.key,b.props,null,y.mode,j),j.ref=Bd(y,f,b),j.return=y,j)}function d(y,f,b,j){return f===null||f.tag!==4||f.stateNode.containerInfo!==b.containerInfo||f.stateNode.implementation!==b.implementation?(f=If(b,y.mode,j),f.return=y,f):(f=r(f,b.children||[]),f.return=y,f)}function h(y,f,b,j,S){return f===null||f.tag!==7?(f=Ao(b,y.mode,j,S),f.return=y,f):(f=r(f,b),f.return=y,f)}function u(y,f,b){if(typeof f=="string"&&f!==""||typeof f=="number")return f=Df(""+f,y.mode,b),f.return=y,f;if(typeof f=="object"&&f!==null){switch(f.$$typeof){case $m:return b=Ph(f.type,f.key,f.props,null,y.mode,b),b.ref=Bd(y,null,f),b.return=y,b;case cc:return f=If(f,y.mode,b),f.return=y,f;case ml:var j=f._init;return u(y,j(f._payload),b)}if(Jd(f)||Id(f))return f=Ao(f,y.mode,b,null),f.return=y,f;Zm(y,f)}return null}function m(y,f,b,j){var S=f!==null?f.key:null;if(typeof b=="string"&&b!==""||typeof b=="number")return S!==null?null:c(y,f,""+b,j);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case $m:return b.key===S?o(y,f,b,j):null;case cc:return b.key===S?d(y,f,b,j):null;case ml:return S=b._init,m(y,f,S(b._payload),j)}if(Jd(b)||Id(b))return S!==null?null:h(y,f,b,j,null);Zm(y,b)}return null}function p(y,f,b,j,S){if(typeof j=="string"&&j!==""||typeof j=="number")return y=y.get(b)||null,c(f,y,""+j,S);if(typeof j=="object"&&j!==null){switch(j.$$typeof){case $m:return y=y.get(j.key===null?b:j.key)||null,o(f,y,j,S);case cc:return y=y.get(j.key===null?b:j.key)||null,d(f,y,j,S);case ml:var k=j._init;return p(y,f,b,k(j._payload),S)}if(Jd(j)||Id(j))return y=y.get(b)||null,h(f,y,j,S,null);Zm(f,j)}return null}function g(y,f,b,j){for(var S=null,k=null,T=f,A=f=0,C=null;T!==null&&A<b.length;A++){T.index>A?(C=T,T=null):C=T.sibling;var w=m(y,T,b[A],j);if(w===null){T===null&&(T=C);break}t&&T&&w.alternate===null&&s(y,T),f=i(w,f,A),k===null?S=w:k.sibling=w,k=w,T=C}if(A===b.length)return n(y,T),tn&&lo(y,A),S;if(T===null){for(;A<b.length;A++)T=u(y,b[A],j),T!==null&&(f=i(T,f,A),k===null?S=T:k.sibling=T,k=T);return tn&&lo(y,A),S}for(T=a(y,T);A<b.length;A++)C=p(T,y,A,b[A],j),C!==null&&(t&&C.alternate!==null&&T.delete(C.key===null?A:C.key),f=i(C,f,A),k===null?S=C:k.sibling=C,k=C);return t&&T.forEach(function(P){return s(y,P)}),tn&&lo(y,A),S}function x(y,f,b,j){var S=Id(b);if(typeof S!="function")throw Error(it(150));if(b=S.call(b),b==null)throw Error(it(151));for(var k=S=null,T=f,A=f=0,C=null,w=b.next();T!==null&&!w.done;A++,w=b.next()){T.index>A?(C=T,T=null):C=T.sibling;var P=m(y,T,w.value,j);if(P===null){T===null&&(T=C);break}t&&T&&P.alternate===null&&s(y,T),f=i(P,f,A),k===null?S=P:k.sibling=P,k=P,T=C}if(w.done)return n(y,T),tn&&lo(y,A),S;if(T===null){for(;!w.done;A++,w=b.next())w=u(y,w.value,j),w!==null&&(f=i(w,f,A),k===null?S=w:k.sibling=w,k=w);return tn&&lo(y,A),S}for(T=a(y,T);!w.done;A++,w=b.next())w=p(T,y,A,w.value,j),w!==null&&(t&&w.alternate!==null&&T.delete(w.key===null?A:w.key),f=i(w,f,A),k===null?S=w:k.sibling=w,k=w);return t&&T.forEach(function(M){return s(y,M)}),tn&&lo(y,A),S}function v(y,f,b,j){if(typeof b=="object"&&b!==null&&b.type===dc&&b.key===null&&(b=b.props.children),typeof b=="object"&&b!==null){switch(b.$$typeof){case $m:e:{for(var S=b.key,k=f;k!==null;){if(k.key===S){if(S=b.type,S===dc){if(k.tag===7){n(y,k.sibling),f=r(k,b.props.children),f.return=y,y=f;break e}}else if(k.elementType===S||typeof S=="object"&&S!==null&&S.$$typeof===ml&&BN(S)===k.type){n(y,k.sibling),f=r(k,b.props),f.ref=Bd(y,k,b),f.return=y,y=f;break e}n(y,k);break}else s(y,k);k=k.sibling}b.type===dc?(f=Ao(b.props.children,y.mode,j,b.key),f.return=y,y=f):(j=Ph(b.type,b.key,b.props,null,y.mode,j),j.ref=Bd(y,f,b),j.return=y,y=j)}return l(y);case cc:e:{for(k=b.key;f!==null;){if(f.key===k)if(f.tag===4&&f.stateNode.containerInfo===b.containerInfo&&f.stateNode.implementation===b.implementation){n(y,f.sibling),f=r(f,b.children||[]),f.return=y,y=f;break e}else{n(y,f);break}else s(y,f);f=f.sibling}f=If(b,y.mode,j),f.return=y,y=f}return l(y);case ml:return k=b._init,v(y,f,k(b._payload),j)}if(Jd(b))return g(y,f,b,j);if(Id(b))return x(y,f,b,j);Zm(y,b)}return typeof b=="string"&&b!==""||typeof b=="number"?(b=""+b,f!==null&&f.tag===6?(n(y,f.sibling),f=r(f,b),f.return=y,y=f):(n(y,f),f=Df(b,y.mode,j),f.return=y,y=f),l(y)):n(y,f)}return v}var Jc=iS(!0),lS=iS(!1),Jh=Xl(null),ex=null,jc=null,Vv=null;function Gv(){Vv=jc=ex=null}function Wv(t){var s=Jh.current;Zs(Jh),t._currentValue=s}function tj(t,s,n){for(;t!==null;){var a=t.alternate;if((t.childLanes&s)!==s?(t.childLanes|=s,a!==null&&(a.childLanes|=s)):a!==null&&(a.childLanes&s)!==s&&(a.childLanes|=s),t===n)break;t=t.return}}function Pc(t,s){ex=t,Vv=jc=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&s&&(Ra=!0),t.firstContext=null)}function yr(t){var s=t._currentValue;if(Vv!==t)if(t={context:t,memoizedValue:s,next:null},jc===null){if(ex===null)throw Error(it(308));jc=t,ex.dependencies={lanes:0,firstContext:t}}else jc=jc.next=t;return s}var po=null;function Hv(t){po===null?po=[t]:po.push(t)}function oS(t,s,n,a){var r=s.interleaved;return r===null?(n.next=n,Hv(s)):(n.next=r.next,r.next=n),s.interleaved=n,Ui(t,a)}function Ui(t,s){t.lanes|=s;var n=t.alternate;for(n!==null&&(n.lanes|=s),n=t,t=t.return;t!==null;)t.childLanes|=s,n=t.alternate,n!==null&&(n.childLanes|=s),n=t,t=t.return;return n.tag===3?n.stateNode:null}var hl=!1;function Kv(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function cS(t,s){t=t.updateQueue,s.updateQueue===t&&(s.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Ii(t,s){return{eventTime:t,lane:s,tag:0,payload:null,callback:null,next:null}}function _l(t,s,n){var a=t.updateQueue;if(a===null)return null;if(a=a.shared,bs&2){var r=a.pending;return r===null?s.next=s:(s.next=r.next,r.next=s),a.pending=s,Ui(t,n)}return r=a.interleaved,r===null?(s.next=s,Hv(a)):(s.next=r.next,r.next=s),a.interleaved=s,Ui(t,n)}function bh(t,s,n){if(s=s.updateQueue,s!==null&&(s=s.shared,(n&4194240)!==0)){var a=s.lanes;a&=t.pendingLanes,n|=a,s.lanes=n,Rv(t,n)}}function UN(t,s){var n=t.updateQueue,a=t.alternate;if(a!==null&&(a=a.updateQueue,n===a)){var r=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var l={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?r=i=l:i=i.next=l,n=n.next}while(n!==null);i===null?r=i=s:i=i.next=s}else r=i=s;n={baseState:a.baseState,firstBaseUpdate:r,lastBaseUpdate:i,shared:a.shared,effects:a.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=s:t.next=s,n.lastBaseUpdate=s}function tx(t,s,n,a){var r=t.updateQueue;hl=!1;var i=r.firstBaseUpdate,l=r.lastBaseUpdate,c=r.shared.pending;if(c!==null){r.shared.pending=null;var o=c,d=o.next;o.next=null,l===null?i=d:l.next=d,l=o;var h=t.alternate;h!==null&&(h=h.updateQueue,c=h.lastBaseUpdate,c!==l&&(c===null?h.firstBaseUpdate=d:c.next=d,h.lastBaseUpdate=o))}if(i!==null){var u=r.baseState;l=0,h=d=o=null,c=i;do{var m=c.lane,p=c.eventTime;if((a&m)===m){h!==null&&(h=h.next={eventTime:p,lane:0,tag:c.tag,payload:c.payload,callback:c.callback,next:null});e:{var g=t,x=c;switch(m=s,p=n,x.tag){case 1:if(g=x.payload,typeof g=="function"){u=g.call(p,u,m);break e}u=g;break e;case 3:g.flags=g.flags&-65537|128;case 0:if(g=x.payload,m=typeof g=="function"?g.call(p,u,m):g,m==null)break e;u=dn({},u,m);break e;case 2:hl=!0}}c.callback!==null&&c.lane!==0&&(t.flags|=64,m=r.effects,m===null?r.effects=[c]:m.push(c))}else p={eventTime:p,lane:m,tag:c.tag,payload:c.payload,callback:c.callback,next:null},h===null?(d=h=p,o=u):h=h.next=p,l|=m;if(c=c.next,c===null){if(c=r.shared.pending,c===null)break;m=c,c=m.next,m.next=null,r.lastBaseUpdate=m,r.shared.pending=null}}while(!0);if(h===null&&(o=u),r.baseState=o,r.firstBaseUpdate=d,r.lastBaseUpdate=h,s=r.shared.interleaved,s!==null){r=s;do l|=r.lane,r=r.next;while(r!==s)}else i===null&&(r.shared.lanes=0);Oo|=l,t.lanes=l,t.memoizedState=u}}function zN(t,s,n){if(t=s.effects,s.effects=null,t!==null)for(s=0;s<t.length;s++){var a=t[s],r=a.callback;if(r!==null){if(a.callback=null,a=n,typeof r!="function")throw Error(it(191,r));r.call(a)}}}var mm={},ci=Xl(mm),Mu=Xl(mm),_u=Xl(mm);function fo(t){if(t===mm)throw Error(it(174));return t}function Yv(t,s){switch(Vs(_u,s),Vs(Mu,t),Vs(ci,mm),t=s.nodeType,t){case 9:case 11:s=(s=s.documentElement)?s.namespaceURI:Dg(null,"");break;default:t=t===8?s.parentNode:s,s=t.namespaceURI||null,t=t.tagName,s=Dg(s,t)}Zs(ci),Vs(ci,s)}function ed(){Zs(ci),Zs(Mu),Zs(_u)}function dS(t){fo(_u.current);var s=fo(ci.current),n=Dg(s,t.type);s!==n&&(Vs(Mu,t),Vs(ci,n))}function Qv(t){Mu.current===t&&(Zs(ci),Zs(Mu))}var rn=Xl(0);function sx(t){for(var s=t;s!==null;){if(s.tag===13){var n=s.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return s}else if(s.tag===19&&s.memoizedProps.revealOrder!==void 0){if(s.flags&128)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===t)break;for(;s.sibling===null;){if(s.return===null||s.return===t)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}var Tf=[];function Zv(){for(var t=0;t<Tf.length;t++)Tf[t]._workInProgressVersionPrimary=null;Tf.length=0}var wh=Ki.ReactCurrentDispatcher,Ef=Ki.ReactCurrentBatchConfig,Ro=0,ln=null,qn=null,Hn=null,nx=!1,hu=!1,Ru=0,M3=0;function sa(){throw Error(it(321))}function Xv(t,s){if(s===null)return!1;for(var n=0;n<s.length&&n<t.length;n++)if(!Br(t[n],s[n]))return!1;return!0}function Jv(t,s,n,a,r,i){if(Ro=i,ln=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,wh.current=t===null||t.memoizedState===null?D3:I3,t=n(a,r),hu){i=0;do{if(hu=!1,Ru=0,25<=i)throw Error(it(301));i+=1,Hn=qn=null,s.updateQueue=null,wh.current=L3,t=n(a,r)}while(hu)}if(wh.current=ax,s=qn!==null&&qn.next!==null,Ro=0,Hn=qn=ln=null,nx=!1,s)throw Error(it(300));return t}function ey(){var t=Ru!==0;return Ru=0,t}function Xr(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Hn===null?ln.memoizedState=Hn=t:Hn=Hn.next=t,Hn}function Nr(){if(qn===null){var t=ln.alternate;t=t!==null?t.memoizedState:null}else t=qn.next;var s=Hn===null?ln.memoizedState:Hn.next;if(s!==null)Hn=s,qn=t;else{if(t===null)throw Error(it(310));qn=t,t={memoizedState:qn.memoizedState,baseState:qn.baseState,baseQueue:qn.baseQueue,queue:qn.queue,next:null},Hn===null?ln.memoizedState=Hn=t:Hn=Hn.next=t}return Hn}function Ou(t,s){return typeof s=="function"?s(t):s}function Mf(t){var s=Nr(),n=s.queue;if(n===null)throw Error(it(311));n.lastRenderedReducer=t;var a=qn,r=a.baseQueue,i=n.pending;if(i!==null){if(r!==null){var l=r.next;r.next=i.next,i.next=l}a.baseQueue=r=i,n.pending=null}if(r!==null){i=r.next,a=a.baseState;var c=l=null,o=null,d=i;do{var h=d.lane;if((Ro&h)===h)o!==null&&(o=o.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),a=d.hasEagerState?d.eagerState:t(a,d.action);else{var u={lane:h,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};o===null?(c=o=u,l=a):o=o.next=u,ln.lanes|=h,Oo|=h}d=d.next}while(d!==null&&d!==i);o===null?l=a:o.next=c,Br(a,s.memoizedState)||(Ra=!0),s.memoizedState=a,s.baseState=l,s.baseQueue=o,n.lastRenderedState=a}if(t=n.interleaved,t!==null){r=t;do i=r.lane,ln.lanes|=i,Oo|=i,r=r.next;while(r!==t)}else r===null&&(n.lanes=0);return[s.memoizedState,n.dispatch]}function _f(t){var s=Nr(),n=s.queue;if(n===null)throw Error(it(311));n.lastRenderedReducer=t;var a=n.dispatch,r=n.pending,i=s.memoizedState;if(r!==null){n.pending=null;var l=r=r.next;do i=t(i,l.action),l=l.next;while(l!==r);Br(i,s.memoizedState)||(Ra=!0),s.memoizedState=i,s.baseQueue===null&&(s.baseState=i),n.lastRenderedState=i}return[i,a]}function uS(){}function mS(t,s){var n=ln,a=Nr(),r=s(),i=!Br(a.memoizedState,r);if(i&&(a.memoizedState=r,Ra=!0),a=a.queue,ty(pS.bind(null,n,a,t),[t]),a.getSnapshot!==s||i||Hn!==null&&Hn.memoizedState.tag&1){if(n.flags|=2048,Du(9,xS.bind(null,n,a,r,s),void 0,null),Kn===null)throw Error(it(349));Ro&30||hS(n,s,r)}return r}function hS(t,s,n){t.flags|=16384,t={getSnapshot:s,value:n},s=ln.updateQueue,s===null?(s={lastEffect:null,stores:null},ln.updateQueue=s,s.stores=[t]):(n=s.stores,n===null?s.stores=[t]:n.push(t))}function xS(t,s,n,a){s.value=n,s.getSnapshot=a,fS(s)&&gS(t)}function pS(t,s,n){return n(function(){fS(s)&&gS(t)})}function fS(t){var s=t.getSnapshot;t=t.value;try{var n=s();return!Br(t,n)}catch{return!0}}function gS(t){var s=Ui(t,1);s!==null&&Fr(s,t,1,-1)}function VN(t){var s=Xr();return typeof t=="function"&&(t=t()),s.memoizedState=s.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ou,lastRenderedState:t},s.queue=t,t=t.dispatch=O3.bind(null,ln,t),[s.memoizedState,t]}function Du(t,s,n,a){return t={tag:t,create:s,destroy:n,deps:a,next:null},s=ln.updateQueue,s===null?(s={lastEffect:null,stores:null},ln.updateQueue=s,s.lastEffect=t.next=t):(n=s.lastEffect,n===null?s.lastEffect=t.next=t:(a=n.next,n.next=t,t.next=a,s.lastEffect=t)),t}function jS(){return Nr().memoizedState}function Sh(t,s,n,a){var r=Xr();ln.flags|=t,r.memoizedState=Du(1|s,n,void 0,a===void 0?null:a)}function Yx(t,s,n,a){var r=Nr();a=a===void 0?null:a;var i=void 0;if(qn!==null){var l=qn.memoizedState;if(i=l.destroy,a!==null&&Xv(a,l.deps)){r.memoizedState=Du(s,n,i,a);return}}ln.flags|=t,r.memoizedState=Du(1|s,n,i,a)}function GN(t,s){return Sh(8390656,8,t,s)}function ty(t,s){return Yx(2048,8,t,s)}function vS(t,s){return Yx(4,2,t,s)}function yS(t,s){return Yx(4,4,t,s)}function NS(t,s){if(typeof s=="function")return t=t(),s(t),function(){s(null)};if(s!=null)return t=t(),s.current=t,function(){s.current=null}}function bS(t,s,n){return n=n!=null?n.concat([t]):null,Yx(4,4,NS.bind(null,s,t),n)}function sy(){}function wS(t,s){var n=Nr();s=s===void 0?null:s;var a=n.memoizedState;return a!==null&&s!==null&&Xv(s,a[1])?a[0]:(n.memoizedState=[t,s],t)}function SS(t,s){var n=Nr();s=s===void 0?null:s;var a=n.memoizedState;return a!==null&&s!==null&&Xv(s,a[1])?a[0]:(t=t(),n.memoizedState=[t,s],t)}function CS(t,s,n){return Ro&21?(Br(n,s)||(n=E2(),ln.lanes|=n,Oo|=n,t.baseState=!0),s):(t.baseState&&(t.baseState=!1,Ra=!0),t.memoizedState=n)}function _3(t,s){var n=Ds;Ds=n!==0&&4>n?n:4,t(!0);var a=Ef.transition;Ef.transition={};try{t(!1),s()}finally{Ds=n,Ef.transition=a}}function kS(){return Nr().memoizedState}function R3(t,s,n){var a=Ol(t);if(n={lane:a,action:n,hasEagerState:!1,eagerState:null,next:null},AS(t))PS(s,n);else if(n=oS(t,s,n,a),n!==null){var r=ba();Fr(n,t,a,r),TS(n,s,a)}}function O3(t,s,n){var a=Ol(t),r={lane:a,action:n,hasEagerState:!1,eagerState:null,next:null};if(AS(t))PS(s,r);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=s.lastRenderedReducer,i!==null))try{var l=s.lastRenderedState,c=i(l,n);if(r.hasEagerState=!0,r.eagerState=c,Br(c,l)){var o=s.interleaved;o===null?(r.next=r,Hv(s)):(r.next=o.next,o.next=r),s.interleaved=r;return}}catch{}finally{}n=oS(t,s,r,a),n!==null&&(r=ba(),Fr(n,t,a,r),TS(n,s,a))}}function AS(t){var s=t.alternate;return t===ln||s!==null&&s===ln}function PS(t,s){hu=nx=!0;var n=t.pending;n===null?s.next=s:(s.next=n.next,n.next=s),t.pending=s}function TS(t,s,n){if(n&4194240){var a=s.lanes;a&=t.pendingLanes,n|=a,s.lanes=n,Rv(t,n)}}var ax={readContext:yr,useCallback:sa,useContext:sa,useEffect:sa,useImperativeHandle:sa,useInsertionEffect:sa,useLayoutEffect:sa,useMemo:sa,useReducer:sa,useRef:sa,useState:sa,useDebugValue:sa,useDeferredValue:sa,useTransition:sa,useMutableSource:sa,useSyncExternalStore:sa,useId:sa,unstable_isNewReconciler:!1},D3={readContext:yr,useCallback:function(t,s){return Xr().memoizedState=[t,s===void 0?null:s],t},useContext:yr,useEffect:GN,useImperativeHandle:function(t,s,n){return n=n!=null?n.concat([t]):null,Sh(4194308,4,NS.bind(null,s,t),n)},useLayoutEffect:function(t,s){return Sh(4194308,4,t,s)},useInsertionEffect:function(t,s){return Sh(4,2,t,s)},useMemo:function(t,s){var n=Xr();return s=s===void 0?null:s,t=t(),n.memoizedState=[t,s],t},useReducer:function(t,s,n){var a=Xr();return s=n!==void 0?n(s):s,a.memoizedState=a.baseState=s,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:s},a.queue=t,t=t.dispatch=R3.bind(null,ln,t),[a.memoizedState,t]},useRef:function(t){var s=Xr();return t={current:t},s.memoizedState=t},useState:VN,useDebugValue:sy,useDeferredValue:function(t){return Xr().memoizedState=t},useTransition:function(){var t=VN(!1),s=t[0];return t=_3.bind(null,t[1]),Xr().memoizedState=t,[s,t]},useMutableSource:function(){},useSyncExternalStore:function(t,s,n){var a=ln,r=Xr();if(tn){if(n===void 0)throw Error(it(407));n=n()}else{if(n=s(),Kn===null)throw Error(it(349));Ro&30||hS(a,s,n)}r.memoizedState=n;var i={value:n,getSnapshot:s};return r.queue=i,GN(pS.bind(null,a,i,t),[t]),a.flags|=2048,Du(9,xS.bind(null,a,i,n,s),void 0,null),n},useId:function(){var t=Xr(),s=Kn.identifierPrefix;if(tn){var n=Oi,a=Ri;n=(a&~(1<<32-Lr(a)-1)).toString(32)+n,s=":"+s+"R"+n,n=Ru++,0<n&&(s+="H"+n.toString(32)),s+=":"}else n=M3++,s=":"+s+"r"+n.toString(32)+":";return t.memoizedState=s},unstable_isNewReconciler:!1},I3={readContext:yr,useCallback:wS,useContext:yr,useEffect:ty,useImperativeHandle:bS,useInsertionEffect:vS,useLayoutEffect:yS,useMemo:SS,useReducer:Mf,useRef:jS,useState:function(){return Mf(Ou)},useDebugValue:sy,useDeferredValue:function(t){var s=Nr();return CS(s,qn.memoizedState,t)},useTransition:function(){var t=Mf(Ou)[0],s=Nr().memoizedState;return[t,s]},useMutableSource:uS,useSyncExternalStore:mS,useId:kS,unstable_isNewReconciler:!1},L3={readContext:yr,useCallback:wS,useContext:yr,useEffect:ty,useImperativeHandle:bS,useInsertionEffect:vS,useLayoutEffect:yS,useMemo:SS,useReducer:_f,useRef:jS,useState:function(){return _f(Ou)},useDebugValue:sy,useDeferredValue:function(t){var s=Nr();return qn===null?s.memoizedState=t:CS(s,qn.memoizedState,t)},useTransition:function(){var t=_f(Ou)[0],s=Nr().memoizedState;return[t,s]},useMutableSource:uS,useSyncExternalStore:mS,useId:kS,unstable_isNewReconciler:!1};function Tr(t,s){if(t&&t.defaultProps){s=dn({},s),t=t.defaultProps;for(var n in t)s[n]===void 0&&(s[n]=t[n]);return s}return s}function sj(t,s,n,a){s=t.memoizedState,n=n(a,s),n=n==null?s:dn({},s,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Qx={isMounted:function(t){return(t=t._reactInternals)?Ko(t)===t:!1},enqueueSetState:function(t,s,n){t=t._reactInternals;var a=ba(),r=Ol(t),i=Ii(a,r);i.payload=s,n!=null&&(i.callback=n),s=_l(t,i,r),s!==null&&(Fr(s,t,r,a),bh(s,t,r))},enqueueReplaceState:function(t,s,n){t=t._reactInternals;var a=ba(),r=Ol(t),i=Ii(a,r);i.tag=1,i.payload=s,n!=null&&(i.callback=n),s=_l(t,i,r),s!==null&&(Fr(s,t,r,a),bh(s,t,r))},enqueueForceUpdate:function(t,s){t=t._reactInternals;var n=ba(),a=Ol(t),r=Ii(n,a);r.tag=2,s!=null&&(r.callback=s),s=_l(t,r,a),s!==null&&(Fr(s,t,a,n),bh(s,t,a))}};function WN(t,s,n,a,r,i,l){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(a,i,l):s.prototype&&s.prototype.isPureReactComponent?!Au(n,a)||!Au(r,i):!0}function ES(t,s,n){var a=!1,r=ql,i=s.contextType;return typeof i=="object"&&i!==null?i=yr(i):(r=Ia(s)?Mo:da.current,a=s.contextTypes,i=(a=a!=null)?Zc(t,r):ql),s=new s(n,i),t.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,s.updater=Qx,t.stateNode=s,s._reactInternals=t,a&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=r,t.__reactInternalMemoizedMaskedChildContext=i),s}function HN(t,s,n,a){t=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(n,a),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(n,a),s.state!==t&&Qx.enqueueReplaceState(s,s.state,null)}function nj(t,s,n,a){var r=t.stateNode;r.props=n,r.state=t.memoizedState,r.refs={},Kv(t);var i=s.contextType;typeof i=="object"&&i!==null?r.context=yr(i):(i=Ia(s)?Mo:da.current,r.context=Zc(t,i)),r.state=t.memoizedState,i=s.getDerivedStateFromProps,typeof i=="function"&&(sj(t,s,i,n),r.state=t.memoizedState),typeof s.getDerivedStateFromProps=="function"||typeof r.getSnapshotBeforeUpdate=="function"||typeof r.UNSAFE_componentWillMount!="function"&&typeof r.componentWillMount!="function"||(s=r.state,typeof r.componentWillMount=="function"&&r.componentWillMount(),typeof r.UNSAFE_componentWillMount=="function"&&r.UNSAFE_componentWillMount(),s!==r.state&&Qx.enqueueReplaceState(r,r.state,null),tx(t,n,r,a),r.state=t.memoizedState),typeof r.componentDidMount=="function"&&(t.flags|=4194308)}function td(t,s){try{var n="",a=s;do n+=uM(a),a=a.return;while(a);var r=n}catch(i){r=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:s,stack:r,digest:null}}function Rf(t,s,n){return{value:t,source:null,stack:n??null,digest:s??null}}function aj(t,s){try{console.error(s.value)}catch(n){setTimeout(function(){throw n})}}var F3=typeof WeakMap=="function"?WeakMap:Map;function MS(t,s,n){n=Ii(-1,n),n.tag=3,n.payload={element:null};var a=s.value;return n.callback=function(){ix||(ix=!0,xj=a),aj(t,s)},n}function _S(t,s,n){n=Ii(-1,n),n.tag=3;var a=t.type.getDerivedStateFromError;if(typeof a=="function"){var r=s.value;n.payload=function(){return a(r)},n.callback=function(){aj(t,s)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){aj(t,s),typeof a!="function"&&(Rl===null?Rl=new Set([this]):Rl.add(this));var l=s.stack;this.componentDidCatch(s.value,{componentStack:l!==null?l:""})}),n}function KN(t,s,n){var a=t.pingCache;if(a===null){a=t.pingCache=new F3;var r=new Set;a.set(s,r)}else r=a.get(s),r===void 0&&(r=new Set,a.set(s,r));r.has(n)||(r.add(n),t=X3.bind(null,t,s,n),s.then(t,t))}function YN(t){do{var s;if((s=t.tag===13)&&(s=t.memoizedState,s=s!==null?s.dehydrated!==null:!0),s)return t;t=t.return}while(t!==null);return null}function QN(t,s,n,a,r){return t.mode&1?(t.flags|=65536,t.lanes=r,t):(t===s?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(s=Ii(-1,1),s.tag=2,_l(n,s,1))),n.lanes|=1),t)}var q3=Ki.ReactCurrentOwner,Ra=!1;function fa(t,s,n,a){s.child=t===null?lS(s,null,n,a):Jc(s,t.child,n,a)}function ZN(t,s,n,a,r){n=n.render;var i=s.ref;return Pc(s,r),a=Jv(t,s,n,a,i,r),n=ey(),t!==null&&!Ra?(s.updateQueue=t.updateQueue,s.flags&=-2053,t.lanes&=~r,zi(t,s,r)):(tn&&n&&Bv(s),s.flags|=1,fa(t,s,a,r),s.child)}function XN(t,s,n,a,r){if(t===null){var i=n.type;return typeof i=="function"&&!dy(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(s.tag=15,s.type=i,RS(t,s,i,a,r)):(t=Ph(n.type,null,a,s,s.mode,r),t.ref=s.ref,t.return=s,s.child=t)}if(i=t.child,!(t.lanes&r)){var l=i.memoizedProps;if(n=n.compare,n=n!==null?n:Au,n(l,a)&&t.ref===s.ref)return zi(t,s,r)}return s.flags|=1,t=Dl(i,a),t.ref=s.ref,t.return=s,s.child=t}function RS(t,s,n,a,r){if(t!==null){var i=t.memoizedProps;if(Au(i,a)&&t.ref===s.ref)if(Ra=!1,s.pendingProps=a=i,(t.lanes&r)!==0)t.flags&131072&&(Ra=!0);else return s.lanes=t.lanes,zi(t,s,r)}return rj(t,s,n,a,r)}function OS(t,s,n){var a=s.pendingProps,r=a.children,i=t!==null?t.memoizedState:null;if(a.mode==="hidden")if(!(s.mode&1))s.memoizedState={baseLanes:0,cachePool:null,transitions:null},Vs(yc,Ha),Ha|=n;else{if(!(n&1073741824))return t=i!==null?i.baseLanes|n:n,s.lanes=s.childLanes=1073741824,s.memoizedState={baseLanes:t,cachePool:null,transitions:null},s.updateQueue=null,Vs(yc,Ha),Ha|=t,null;s.memoizedState={baseLanes:0,cachePool:null,transitions:null},a=i!==null?i.baseLanes:n,Vs(yc,Ha),Ha|=a}else i!==null?(a=i.baseLanes|n,s.memoizedState=null):a=n,Vs(yc,Ha),Ha|=a;return fa(t,s,r,n),s.child}function DS(t,s){var n=s.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(s.flags|=512,s.flags|=2097152)}function rj(t,s,n,a,r){var i=Ia(n)?Mo:da.current;return i=Zc(s,i),Pc(s,r),n=Jv(t,s,n,a,i,r),a=ey(),t!==null&&!Ra?(s.updateQueue=t.updateQueue,s.flags&=-2053,t.lanes&=~r,zi(t,s,r)):(tn&&a&&Bv(s),s.flags|=1,fa(t,s,n,r),s.child)}function JN(t,s,n,a,r){if(Ia(n)){var i=!0;Qh(s)}else i=!1;if(Pc(s,r),s.stateNode===null)Ch(t,s),ES(s,n,a),nj(s,n,a,r),a=!0;else if(t===null){var l=s.stateNode,c=s.memoizedProps;l.props=c;var o=l.context,d=n.contextType;typeof d=="object"&&d!==null?d=yr(d):(d=Ia(n)?Mo:da.current,d=Zc(s,d));var h=n.getDerivedStateFromProps,u=typeof h=="function"||typeof l.getSnapshotBeforeUpdate=="function";u||typeof l.UNSAFE_componentWillReceiveProps!="function"&&typeof l.componentWillReceiveProps!="function"||(c!==a||o!==d)&&HN(s,l,a,d),hl=!1;var m=s.memoizedState;l.state=m,tx(s,a,l,r),o=s.memoizedState,c!==a||m!==o||Da.current||hl?(typeof h=="function"&&(sj(s,n,h,a),o=s.memoizedState),(c=hl||WN(s,n,c,a,m,o,d))?(u||typeof l.UNSAFE_componentWillMount!="function"&&typeof l.componentWillMount!="function"||(typeof l.componentWillMount=="function"&&l.componentWillMount(),typeof l.UNSAFE_componentWillMount=="function"&&l.UNSAFE_componentWillMount()),typeof l.componentDidMount=="function"&&(s.flags|=4194308)):(typeof l.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=a,s.memoizedState=o),l.props=a,l.state=o,l.context=d,a=c):(typeof l.componentDidMount=="function"&&(s.flags|=4194308),a=!1)}else{l=s.stateNode,cS(t,s),c=s.memoizedProps,d=s.type===s.elementType?c:Tr(s.type,c),l.props=d,u=s.pendingProps,m=l.context,o=n.contextType,typeof o=="object"&&o!==null?o=yr(o):(o=Ia(n)?Mo:da.current,o=Zc(s,o));var p=n.getDerivedStateFromProps;(h=typeof p=="function"||typeof l.getSnapshotBeforeUpdate=="function")||typeof l.UNSAFE_componentWillReceiveProps!="function"&&typeof l.componentWillReceiveProps!="function"||(c!==u||m!==o)&&HN(s,l,a,o),hl=!1,m=s.memoizedState,l.state=m,tx(s,a,l,r);var g=s.memoizedState;c!==u||m!==g||Da.current||hl?(typeof p=="function"&&(sj(s,n,p,a),g=s.memoizedState),(d=hl||WN(s,n,d,a,m,g,o)||!1)?(h||typeof l.UNSAFE_componentWillUpdate!="function"&&typeof l.componentWillUpdate!="function"||(typeof l.componentWillUpdate=="function"&&l.componentWillUpdate(a,g,o),typeof l.UNSAFE_componentWillUpdate=="function"&&l.UNSAFE_componentWillUpdate(a,g,o)),typeof l.componentDidUpdate=="function"&&(s.flags|=4),typeof l.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof l.componentDidUpdate!="function"||c===t.memoizedProps&&m===t.memoizedState||(s.flags|=4),typeof l.getSnapshotBeforeUpdate!="function"||c===t.memoizedProps&&m===t.memoizedState||(s.flags|=1024),s.memoizedProps=a,s.memoizedState=g),l.props=a,l.state=g,l.context=o,a=d):(typeof l.componentDidUpdate!="function"||c===t.memoizedProps&&m===t.memoizedState||(s.flags|=4),typeof l.getSnapshotBeforeUpdate!="function"||c===t.memoizedProps&&m===t.memoizedState||(s.flags|=1024),a=!1)}return ij(t,s,n,a,i,r)}function ij(t,s,n,a,r,i){DS(t,s);var l=(s.flags&128)!==0;if(!a&&!l)return r&&FN(s,n,!1),zi(t,s,i);a=s.stateNode,q3.current=s;var c=l&&typeof n.getDerivedStateFromError!="function"?null:a.render();return s.flags|=1,t!==null&&l?(s.child=Jc(s,t.child,null,i),s.child=Jc(s,null,c,i)):fa(t,s,c,i),s.memoizedState=a.state,r&&FN(s,n,!0),s.child}function IS(t){var s=t.stateNode;s.pendingContext?LN(t,s.pendingContext,s.pendingContext!==s.context):s.context&&LN(t,s.context,!1),Yv(t,s.containerInfo)}function eb(t,s,n,a,r){return Xc(),zv(r),s.flags|=256,fa(t,s,n,a),s.child}var lj={dehydrated:null,treeContext:null,retryLane:0};function oj(t){return{baseLanes:t,cachePool:null,transitions:null}}function LS(t,s,n){var a=s.pendingProps,r=rn.current,i=!1,l=(s.flags&128)!==0,c;if((c=l)||(c=t!==null&&t.memoizedState===null?!1:(r&2)!==0),c?(i=!0,s.flags&=-129):(t===null||t.memoizedState!==null)&&(r|=1),Vs(rn,r&1),t===null)return ej(s),t=s.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(s.mode&1?t.data==="$!"?s.lanes=8:s.lanes=1073741824:s.lanes=1,null):(l=a.children,t=a.fallback,i?(a=s.mode,i=s.child,l={mode:"hidden",children:l},!(a&1)&&i!==null?(i.childLanes=0,i.pendingProps=l):i=Jx(l,a,0,null),t=Ao(t,a,n,null),i.return=s,t.return=s,i.sibling=t,s.child=i,s.child.memoizedState=oj(n),s.memoizedState=lj,t):ny(s,l));if(r=t.memoizedState,r!==null&&(c=r.dehydrated,c!==null))return $3(t,s,l,a,c,r,n);if(i){i=a.fallback,l=s.mode,r=t.child,c=r.sibling;var o={mode:"hidden",children:a.children};return!(l&1)&&s.child!==r?(a=s.child,a.childLanes=0,a.pendingProps=o,s.deletions=null):(a=Dl(r,o),a.subtreeFlags=r.subtreeFlags&14680064),c!==null?i=Dl(c,i):(i=Ao(i,l,n,null),i.flags|=2),i.return=s,a.return=s,a.sibling=i,s.child=a,a=i,i=s.child,l=t.child.memoizedState,l=l===null?oj(n):{baseLanes:l.baseLanes|n,cachePool:null,transitions:l.transitions},i.memoizedState=l,i.childLanes=t.childLanes&~n,s.memoizedState=lj,a}return i=t.child,t=i.sibling,a=Dl(i,{mode:"visible",children:a.children}),!(s.mode&1)&&(a.lanes=n),a.return=s,a.sibling=null,t!==null&&(n=s.deletions,n===null?(s.deletions=[t],s.flags|=16):n.push(t)),s.child=a,s.memoizedState=null,a}function ny(t,s){return s=Jx({mode:"visible",children:s},t.mode,0,null),s.return=t,t.child=s}function Xm(t,s,n,a){return a!==null&&zv(a),Jc(s,t.child,null,n),t=ny(s,s.pendingProps.children),t.flags|=2,s.memoizedState=null,t}function $3(t,s,n,a,r,i,l){if(n)return s.flags&256?(s.flags&=-257,a=Rf(Error(it(422))),Xm(t,s,l,a)):s.memoizedState!==null?(s.child=t.child,s.flags|=128,null):(i=a.fallback,r=s.mode,a=Jx({mode:"visible",children:a.children},r,0,null),i=Ao(i,r,l,null),i.flags|=2,a.return=s,i.return=s,a.sibling=i,s.child=a,s.mode&1&&Jc(s,t.child,null,l),s.child.memoizedState=oj(l),s.memoizedState=lj,i);if(!(s.mode&1))return Xm(t,s,l,null);if(r.data==="$!"){if(a=r.nextSibling&&r.nextSibling.dataset,a)var c=a.dgst;return a=c,i=Error(it(419)),a=Rf(i,a,void 0),Xm(t,s,l,a)}if(c=(l&t.childLanes)!==0,Ra||c){if(a=Kn,a!==null){switch(l&-l){case 4:r=2;break;case 16:r=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:r=32;break;case 536870912:r=268435456;break;default:r=0}r=r&(a.suspendedLanes|l)?0:r,r!==0&&r!==i.retryLane&&(i.retryLane=r,Ui(t,r),Fr(a,t,r,-1))}return cy(),a=Rf(Error(it(421))),Xm(t,s,l,a)}return r.data==="$?"?(s.flags|=128,s.child=t.child,s=J3.bind(null,t),r._reactRetry=s,null):(t=i.treeContext,Xa=Ml(r.nextSibling),Ja=s,tn=!0,_r=null,t!==null&&(ur[mr++]=Ri,ur[mr++]=Oi,ur[mr++]=_o,Ri=t.id,Oi=t.overflow,_o=s),s=ny(s,a.children),s.flags|=4096,s)}function tb(t,s,n){t.lanes|=s;var a=t.alternate;a!==null&&(a.lanes|=s),tj(t.return,s,n)}function Of(t,s,n,a,r){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:a,tail:n,tailMode:r}:(i.isBackwards=s,i.rendering=null,i.renderingStartTime=0,i.last=a,i.tail=n,i.tailMode=r)}function FS(t,s,n){var a=s.pendingProps,r=a.revealOrder,i=a.tail;if(fa(t,s,a.children,n),a=rn.current,a&2)a=a&1|2,s.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=s.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&tb(t,n,s);else if(t.tag===19)tb(t,n,s);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===s)break e;for(;t.sibling===null;){if(t.return===null||t.return===s)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}a&=1}if(Vs(rn,a),!(s.mode&1))s.memoizedState=null;else switch(r){case"forwards":for(n=s.child,r=null;n!==null;)t=n.alternate,t!==null&&sx(t)===null&&(r=n),n=n.sibling;n=r,n===null?(r=s.child,s.child=null):(r=n.sibling,n.sibling=null),Of(s,!1,r,n,i);break;case"backwards":for(n=null,r=s.child,s.child=null;r!==null;){if(t=r.alternate,t!==null&&sx(t)===null){s.child=r;break}t=r.sibling,r.sibling=n,n=r,r=t}Of(s,!0,n,null,i);break;case"together":Of(s,!1,null,null,void 0);break;default:s.memoizedState=null}return s.child}function Ch(t,s){!(s.mode&1)&&t!==null&&(t.alternate=null,s.alternate=null,s.flags|=2)}function zi(t,s,n){if(t!==null&&(s.dependencies=t.dependencies),Oo|=s.lanes,!(n&s.childLanes))return null;if(t!==null&&s.child!==t.child)throw Error(it(153));if(s.child!==null){for(t=s.child,n=Dl(t,t.pendingProps),s.child=n,n.return=s;t.sibling!==null;)t=t.sibling,n=n.sibling=Dl(t,t.pendingProps),n.return=s;n.sibling=null}return s.child}function B3(t,s,n){switch(s.tag){case 3:IS(s),Xc();break;case 5:dS(s);break;case 1:Ia(s.type)&&Qh(s);break;case 4:Yv(s,s.stateNode.containerInfo);break;case 10:var a=s.type._context,r=s.memoizedProps.value;Vs(Jh,a._currentValue),a._currentValue=r;break;case 13:if(a=s.memoizedState,a!==null)return a.dehydrated!==null?(Vs(rn,rn.current&1),s.flags|=128,null):n&s.child.childLanes?LS(t,s,n):(Vs(rn,rn.current&1),t=zi(t,s,n),t!==null?t.sibling:null);Vs(rn,rn.current&1);break;case 19:if(a=(n&s.childLanes)!==0,t.flags&128){if(a)return FS(t,s,n);s.flags|=128}if(r=s.memoizedState,r!==null&&(r.rendering=null,r.tail=null,r.lastEffect=null),Vs(rn,rn.current),a)break;return null;case 22:case 23:return s.lanes=0,OS(t,s,n)}return zi(t,s,n)}var qS,cj,$S,BS;qS=function(t,s){for(var n=s.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===s)break;for(;n.sibling===null;){if(n.return===null||n.return===s)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};cj=function(){};$S=function(t,s,n,a){var r=t.memoizedProps;if(r!==a){t=s.stateNode,fo(ci.current);var i=null;switch(n){case"input":r=Mg(t,r),a=Mg(t,a),i=[];break;case"select":r=dn({},r,{value:void 0}),a=dn({},a,{value:void 0}),i=[];break;case"textarea":r=Og(t,r),a=Og(t,a),i=[];break;default:typeof r.onClick!="function"&&typeof a.onClick=="function"&&(t.onclick=Kh)}Ig(n,a);var l;n=null;for(d in r)if(!a.hasOwnProperty(d)&&r.hasOwnProperty(d)&&r[d]!=null)if(d==="style"){var c=r[d];for(l in c)c.hasOwnProperty(l)&&(n||(n={}),n[l]="")}else d!=="dangerouslySetInnerHTML"&&d!=="children"&&d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(yu.hasOwnProperty(d)?i||(i=[]):(i=i||[]).push(d,null));for(d in a){var o=a[d];if(c=r!=null?r[d]:void 0,a.hasOwnProperty(d)&&o!==c&&(o!=null||c!=null))if(d==="style")if(c){for(l in c)!c.hasOwnProperty(l)||o&&o.hasOwnProperty(l)||(n||(n={}),n[l]="");for(l in o)o.hasOwnProperty(l)&&c[l]!==o[l]&&(n||(n={}),n[l]=o[l])}else n||(i||(i=[]),i.push(d,n)),n=o;else d==="dangerouslySetInnerHTML"?(o=o?o.__html:void 0,c=c?c.__html:void 0,o!=null&&c!==o&&(i=i||[]).push(d,o)):d==="children"?typeof o!="string"&&typeof o!="number"||(i=i||[]).push(d,""+o):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&(yu.hasOwnProperty(d)?(o!=null&&d==="onScroll"&&Ks("scroll",t),i||c===o||(i=[])):(i=i||[]).push(d,o))}n&&(i=i||[]).push("style",n);var d=i;(s.updateQueue=d)&&(s.flags|=4)}};BS=function(t,s,n,a){n!==a&&(s.flags|=4)};function Ud(t,s){if(!tn)switch(t.tailMode){case"hidden":s=t.tail;for(var n=null;s!==null;)s.alternate!==null&&(n=s),s=s.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var a=null;n!==null;)n.alternate!==null&&(a=n),n=n.sibling;a===null?s||t.tail===null?t.tail=null:t.tail.sibling=null:a.sibling=null}}function na(t){var s=t.alternate!==null&&t.alternate.child===t.child,n=0,a=0;if(s)for(var r=t.child;r!==null;)n|=r.lanes|r.childLanes,a|=r.subtreeFlags&14680064,a|=r.flags&14680064,r.return=t,r=r.sibling;else for(r=t.child;r!==null;)n|=r.lanes|r.childLanes,a|=r.subtreeFlags,a|=r.flags,r.return=t,r=r.sibling;return t.subtreeFlags|=a,t.childLanes=n,s}function U3(t,s,n){var a=s.pendingProps;switch(Uv(s),s.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return na(s),null;case 1:return Ia(s.type)&&Yh(),na(s),null;case 3:return a=s.stateNode,ed(),Zs(Da),Zs(da),Zv(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(t===null||t.child===null)&&(Qm(s)?s.flags|=4:t===null||t.memoizedState.isDehydrated&&!(s.flags&256)||(s.flags|=1024,_r!==null&&(gj(_r),_r=null))),cj(t,s),na(s),null;case 5:Qv(s);var r=fo(_u.current);if(n=s.type,t!==null&&s.stateNode!=null)$S(t,s,n,a,r),t.ref!==s.ref&&(s.flags|=512,s.flags|=2097152);else{if(!a){if(s.stateNode===null)throw Error(it(166));return na(s),null}if(t=fo(ci.current),Qm(s)){a=s.stateNode,n=s.type;var i=s.memoizedProps;switch(a[ni]=s,a[Eu]=i,t=(s.mode&1)!==0,n){case"dialog":Ks("cancel",a),Ks("close",a);break;case"iframe":case"object":case"embed":Ks("load",a);break;case"video":case"audio":for(r=0;r<tu.length;r++)Ks(tu[r],a);break;case"source":Ks("error",a);break;case"img":case"image":case"link":Ks("error",a),Ks("load",a);break;case"details":Ks("toggle",a);break;case"input":dN(a,i),Ks("invalid",a);break;case"select":a._wrapperState={wasMultiple:!!i.multiple},Ks("invalid",a);break;case"textarea":mN(a,i),Ks("invalid",a)}Ig(n,i),r=null;for(var l in i)if(i.hasOwnProperty(l)){var c=i[l];l==="children"?typeof c=="string"?a.textContent!==c&&(i.suppressHydrationWarning!==!0&&Ym(a.textContent,c,t),r=["children",c]):typeof c=="number"&&a.textContent!==""+c&&(i.suppressHydrationWarning!==!0&&Ym(a.textContent,c,t),r=["children",""+c]):yu.hasOwnProperty(l)&&c!=null&&l==="onScroll"&&Ks("scroll",a)}switch(n){case"input":Bm(a),uN(a,i,!0);break;case"textarea":Bm(a),hN(a);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(a.onclick=Kh)}a=r,s.updateQueue=a,a!==null&&(s.flags|=4)}else{l=r.nodeType===9?r:r.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=p2(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=l.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof a.is=="string"?t=l.createElement(n,{is:a.is}):(t=l.createElement(n),n==="select"&&(l=t,a.multiple?l.multiple=!0:a.size&&(l.size=a.size))):t=l.createElementNS(t,n),t[ni]=s,t[Eu]=a,qS(t,s,!1,!1),s.stateNode=t;e:{switch(l=Lg(n,a),n){case"dialog":Ks("cancel",t),Ks("close",t),r=a;break;case"iframe":case"object":case"embed":Ks("load",t),r=a;break;case"video":case"audio":for(r=0;r<tu.length;r++)Ks(tu[r],t);r=a;break;case"source":Ks("error",t),r=a;break;case"img":case"image":case"link":Ks("error",t),Ks("load",t),r=a;break;case"details":Ks("toggle",t),r=a;break;case"input":dN(t,a),r=Mg(t,a),Ks("invalid",t);break;case"option":r=a;break;case"select":t._wrapperState={wasMultiple:!!a.multiple},r=dn({},a,{value:void 0}),Ks("invalid",t);break;case"textarea":mN(t,a),r=Og(t,a),Ks("invalid",t);break;default:r=a}Ig(n,r),c=r;for(i in c)if(c.hasOwnProperty(i)){var o=c[i];i==="style"?j2(t,o):i==="dangerouslySetInnerHTML"?(o=o?o.__html:void 0,o!=null&&f2(t,o)):i==="children"?typeof o=="string"?(n!=="textarea"||o!=="")&&Nu(t,o):typeof o=="number"&&Nu(t,""+o):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(yu.hasOwnProperty(i)?o!=null&&i==="onScroll"&&Ks("scroll",t):o!=null&&Av(t,i,o,l))}switch(n){case"input":Bm(t),uN(t,a,!1);break;case"textarea":Bm(t),hN(t);break;case"option":a.value!=null&&t.setAttribute("value",""+Fl(a.value));break;case"select":t.multiple=!!a.multiple,i=a.value,i!=null?Sc(t,!!a.multiple,i,!1):a.defaultValue!=null&&Sc(t,!!a.multiple,a.defaultValue,!0);break;default:typeof r.onClick=="function"&&(t.onclick=Kh)}switch(n){case"button":case"input":case"select":case"textarea":a=!!a.autoFocus;break e;case"img":a=!0;break e;default:a=!1}}a&&(s.flags|=4)}s.ref!==null&&(s.flags|=512,s.flags|=2097152)}return na(s),null;case 6:if(t&&s.stateNode!=null)BS(t,s,t.memoizedProps,a);else{if(typeof a!="string"&&s.stateNode===null)throw Error(it(166));if(n=fo(_u.current),fo(ci.current),Qm(s)){if(a=s.stateNode,n=s.memoizedProps,a[ni]=s,(i=a.nodeValue!==n)&&(t=Ja,t!==null))switch(t.tag){case 3:Ym(a.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Ym(a.nodeValue,n,(t.mode&1)!==0)}i&&(s.flags|=4)}else a=(n.nodeType===9?n:n.ownerDocument).createTextNode(a),a[ni]=s,s.stateNode=a}return na(s),null;case 13:if(Zs(rn),a=s.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(tn&&Xa!==null&&s.mode&1&&!(s.flags&128))rS(),Xc(),s.flags|=98560,i=!1;else if(i=Qm(s),a!==null&&a.dehydrated!==null){if(t===null){if(!i)throw Error(it(318));if(i=s.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(it(317));i[ni]=s}else Xc(),!(s.flags&128)&&(s.memoizedState=null),s.flags|=4;na(s),i=!1}else _r!==null&&(gj(_r),_r=null),i=!0;if(!i)return s.flags&65536?s:null}return s.flags&128?(s.lanes=n,s):(a=a!==null,a!==(t!==null&&t.memoizedState!==null)&&a&&(s.child.flags|=8192,s.mode&1&&(t===null||rn.current&1?Un===0&&(Un=3):cy())),s.updateQueue!==null&&(s.flags|=4),na(s),null);case 4:return ed(),cj(t,s),t===null&&Pu(s.stateNode.containerInfo),na(s),null;case 10:return Wv(s.type._context),na(s),null;case 17:return Ia(s.type)&&Yh(),na(s),null;case 19:if(Zs(rn),i=s.memoizedState,i===null)return na(s),null;if(a=(s.flags&128)!==0,l=i.rendering,l===null)if(a)Ud(i,!1);else{if(Un!==0||t!==null&&t.flags&128)for(t=s.child;t!==null;){if(l=sx(t),l!==null){for(s.flags|=128,Ud(i,!1),a=l.updateQueue,a!==null&&(s.updateQueue=a,s.flags|=4),s.subtreeFlags=0,a=n,n=s.child;n!==null;)i=n,t=a,i.flags&=14680066,l=i.alternate,l===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=l.childLanes,i.lanes=l.lanes,i.child=l.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=l.memoizedProps,i.memoizedState=l.memoizedState,i.updateQueue=l.updateQueue,i.type=l.type,t=l.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Vs(rn,rn.current&1|2),s.child}t=t.sibling}i.tail!==null&&bn()>sd&&(s.flags|=128,a=!0,Ud(i,!1),s.lanes=4194304)}else{if(!a)if(t=sx(l),t!==null){if(s.flags|=128,a=!0,n=t.updateQueue,n!==null&&(s.updateQueue=n,s.flags|=4),Ud(i,!0),i.tail===null&&i.tailMode==="hidden"&&!l.alternate&&!tn)return na(s),null}else 2*bn()-i.renderingStartTime>sd&&n!==1073741824&&(s.flags|=128,a=!0,Ud(i,!1),s.lanes=4194304);i.isBackwards?(l.sibling=s.child,s.child=l):(n=i.last,n!==null?n.sibling=l:s.child=l,i.last=l)}return i.tail!==null?(s=i.tail,i.rendering=s,i.tail=s.sibling,i.renderingStartTime=bn(),s.sibling=null,n=rn.current,Vs(rn,a?n&1|2:n&1),s):(na(s),null);case 22:case 23:return oy(),a=s.memoizedState!==null,t!==null&&t.memoizedState!==null!==a&&(s.flags|=8192),a&&s.mode&1?Ha&1073741824&&(na(s),s.subtreeFlags&6&&(s.flags|=8192)):na(s),null;case 24:return null;case 25:return null}throw Error(it(156,s.tag))}function z3(t,s){switch(Uv(s),s.tag){case 1:return Ia(s.type)&&Yh(),t=s.flags,t&65536?(s.flags=t&-65537|128,s):null;case 3:return ed(),Zs(Da),Zs(da),Zv(),t=s.flags,t&65536&&!(t&128)?(s.flags=t&-65537|128,s):null;case 5:return Qv(s),null;case 13:if(Zs(rn),t=s.memoizedState,t!==null&&t.dehydrated!==null){if(s.alternate===null)throw Error(it(340));Xc()}return t=s.flags,t&65536?(s.flags=t&-65537|128,s):null;case 19:return Zs(rn),null;case 4:return ed(),null;case 10:return Wv(s.type._context),null;case 22:case 23:return oy(),null;case 24:return null;default:return null}}var Jm=!1,ia=!1,V3=typeof WeakSet=="function"?WeakSet:Set,Pt=null;function vc(t,s){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(a){fn(t,s,a)}else n.current=null}function dj(t,s,n){try{n()}catch(a){fn(t,s,a)}}var sb=!1;function G3(t,s){if(Hg=Gh,t=W2(),$v(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var a=n.getSelection&&n.getSelection();if(a&&a.rangeCount!==0){n=a.anchorNode;var r=a.anchorOffset,i=a.focusNode;a=a.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var l=0,c=-1,o=-1,d=0,h=0,u=t,m=null;t:for(;;){for(var p;u!==n||r!==0&&u.nodeType!==3||(c=l+r),u!==i||a!==0&&u.nodeType!==3||(o=l+a),u.nodeType===3&&(l+=u.nodeValue.length),(p=u.firstChild)!==null;)m=u,u=p;for(;;){if(u===t)break t;if(m===n&&++d===r&&(c=l),m===i&&++h===a&&(o=l),(p=u.nextSibling)!==null)break;u=m,m=u.parentNode}u=p}n=c===-1||o===-1?null:{start:c,end:o}}else n=null}n=n||{start:0,end:0}}else n=null;for(Kg={focusedElem:t,selectionRange:n},Gh=!1,Pt=s;Pt!==null;)if(s=Pt,t=s.child,(s.subtreeFlags&1028)!==0&&t!==null)t.return=s,Pt=t;else for(;Pt!==null;){s=Pt;try{var g=s.alternate;if(s.flags&1024)switch(s.tag){case 0:case 11:case 15:break;case 1:if(g!==null){var x=g.memoizedProps,v=g.memoizedState,y=s.stateNode,f=y.getSnapshotBeforeUpdate(s.elementType===s.type?x:Tr(s.type,x),v);y.__reactInternalSnapshotBeforeUpdate=f}break;case 3:var b=s.stateNode.containerInfo;b.nodeType===1?b.textContent="":b.nodeType===9&&b.documentElement&&b.removeChild(b.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(it(163))}}catch(j){fn(s,s.return,j)}if(t=s.sibling,t!==null){t.return=s.return,Pt=t;break}Pt=s.return}return g=sb,sb=!1,g}function xu(t,s,n){var a=s.updateQueue;if(a=a!==null?a.lastEffect:null,a!==null){var r=a=a.next;do{if((r.tag&t)===t){var i=r.destroy;r.destroy=void 0,i!==void 0&&dj(s,n,i)}r=r.next}while(r!==a)}}function Zx(t,s){if(s=s.updateQueue,s=s!==null?s.lastEffect:null,s!==null){var n=s=s.next;do{if((n.tag&t)===t){var a=n.create;n.destroy=a()}n=n.next}while(n!==s)}}function uj(t){var s=t.ref;if(s!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof s=="function"?s(t):s.current=t}}function US(t){var s=t.alternate;s!==null&&(t.alternate=null,US(s)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(s=t.stateNode,s!==null&&(delete s[ni],delete s[Eu],delete s[Zg],delete s[A3],delete s[P3])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function zS(t){return t.tag===5||t.tag===3||t.tag===4}function nb(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||zS(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function mj(t,s,n){var a=t.tag;if(a===5||a===6)t=t.stateNode,s?n.nodeType===8?n.parentNode.insertBefore(t,s):n.insertBefore(t,s):(n.nodeType===8?(s=n.parentNode,s.insertBefore(t,n)):(s=n,s.appendChild(t)),n=n._reactRootContainer,n!=null||s.onclick!==null||(s.onclick=Kh));else if(a!==4&&(t=t.child,t!==null))for(mj(t,s,n),t=t.sibling;t!==null;)mj(t,s,n),t=t.sibling}function hj(t,s,n){var a=t.tag;if(a===5||a===6)t=t.stateNode,s?n.insertBefore(t,s):n.appendChild(t);else if(a!==4&&(t=t.child,t!==null))for(hj(t,s,n),t=t.sibling;t!==null;)hj(t,s,n),t=t.sibling}var Qn=null,Mr=!1;function Xi(t,s,n){for(n=n.child;n!==null;)VS(t,s,n),n=n.sibling}function VS(t,s,n){if(oi&&typeof oi.onCommitFiberUnmount=="function")try{oi.onCommitFiberUnmount(zx,n)}catch{}switch(n.tag){case 5:ia||vc(n,s);case 6:var a=Qn,r=Mr;Qn=null,Xi(t,s,n),Qn=a,Mr=r,Qn!==null&&(Mr?(t=Qn,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Qn.removeChild(n.stateNode));break;case 18:Qn!==null&&(Mr?(t=Qn,n=n.stateNode,t.nodeType===8?Af(t.parentNode,n):t.nodeType===1&&Af(t,n),Cu(t)):Af(Qn,n.stateNode));break;case 4:a=Qn,r=Mr,Qn=n.stateNode.containerInfo,Mr=!0,Xi(t,s,n),Qn=a,Mr=r;break;case 0:case 11:case 14:case 15:if(!ia&&(a=n.updateQueue,a!==null&&(a=a.lastEffect,a!==null))){r=a=a.next;do{var i=r,l=i.destroy;i=i.tag,l!==void 0&&(i&2||i&4)&&dj(n,s,l),r=r.next}while(r!==a)}Xi(t,s,n);break;case 1:if(!ia&&(vc(n,s),a=n.stateNode,typeof a.componentWillUnmount=="function"))try{a.props=n.memoizedProps,a.state=n.memoizedState,a.componentWillUnmount()}catch(c){fn(n,s,c)}Xi(t,s,n);break;case 21:Xi(t,s,n);break;case 22:n.mode&1?(ia=(a=ia)||n.memoizedState!==null,Xi(t,s,n),ia=a):Xi(t,s,n);break;default:Xi(t,s,n)}}function ab(t){var s=t.updateQueue;if(s!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new V3),s.forEach(function(a){var r=e_.bind(null,t,a);n.has(a)||(n.add(a),a.then(r,r))})}}function Ar(t,s){var n=s.deletions;if(n!==null)for(var a=0;a<n.length;a++){var r=n[a];try{var i=t,l=s,c=l;e:for(;c!==null;){switch(c.tag){case 5:Qn=c.stateNode,Mr=!1;break e;case 3:Qn=c.stateNode.containerInfo,Mr=!0;break e;case 4:Qn=c.stateNode.containerInfo,Mr=!0;break e}c=c.return}if(Qn===null)throw Error(it(160));VS(i,l,r),Qn=null,Mr=!1;var o=r.alternate;o!==null&&(o.return=null),r.return=null}catch(d){fn(r,s,d)}}if(s.subtreeFlags&12854)for(s=s.child;s!==null;)GS(s,t),s=s.sibling}function GS(t,s){var n=t.alternate,a=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Ar(s,t),Yr(t),a&4){try{xu(3,t,t.return),Zx(3,t)}catch(x){fn(t,t.return,x)}try{xu(5,t,t.return)}catch(x){fn(t,t.return,x)}}break;case 1:Ar(s,t),Yr(t),a&512&&n!==null&&vc(n,n.return);break;case 5:if(Ar(s,t),Yr(t),a&512&&n!==null&&vc(n,n.return),t.flags&32){var r=t.stateNode;try{Nu(r,"")}catch(x){fn(t,t.return,x)}}if(a&4&&(r=t.stateNode,r!=null)){var i=t.memoizedProps,l=n!==null?n.memoizedProps:i,c=t.type,o=t.updateQueue;if(t.updateQueue=null,o!==null)try{c==="input"&&i.type==="radio"&&i.name!=null&&h2(r,i),Lg(c,l);var d=Lg(c,i);for(l=0;l<o.length;l+=2){var h=o[l],u=o[l+1];h==="style"?j2(r,u):h==="dangerouslySetInnerHTML"?f2(r,u):h==="children"?Nu(r,u):Av(r,h,u,d)}switch(c){case"input":_g(r,i);break;case"textarea":x2(r,i);break;case"select":var m=r._wrapperState.wasMultiple;r._wrapperState.wasMultiple=!!i.multiple;var p=i.value;p!=null?Sc(r,!!i.multiple,p,!1):m!==!!i.multiple&&(i.defaultValue!=null?Sc(r,!!i.multiple,i.defaultValue,!0):Sc(r,!!i.multiple,i.multiple?[]:"",!1))}r[Eu]=i}catch(x){fn(t,t.return,x)}}break;case 6:if(Ar(s,t),Yr(t),a&4){if(t.stateNode===null)throw Error(it(162));r=t.stateNode,i=t.memoizedProps;try{r.nodeValue=i}catch(x){fn(t,t.return,x)}}break;case 3:if(Ar(s,t),Yr(t),a&4&&n!==null&&n.memoizedState.isDehydrated)try{Cu(s.containerInfo)}catch(x){fn(t,t.return,x)}break;case 4:Ar(s,t),Yr(t);break;case 13:Ar(s,t),Yr(t),r=t.child,r.flags&8192&&(i=r.memoizedState!==null,r.stateNode.isHidden=i,!i||r.alternate!==null&&r.alternate.memoizedState!==null||(iy=bn())),a&4&&ab(t);break;case 22:if(h=n!==null&&n.memoizedState!==null,t.mode&1?(ia=(d=ia)||h,Ar(s,t),ia=d):Ar(s,t),Yr(t),a&8192){if(d=t.memoizedState!==null,(t.stateNode.isHidden=d)&&!h&&t.mode&1)for(Pt=t,h=t.child;h!==null;){for(u=Pt=h;Pt!==null;){switch(m=Pt,p=m.child,m.tag){case 0:case 11:case 14:case 15:xu(4,m,m.return);break;case 1:vc(m,m.return);var g=m.stateNode;if(typeof g.componentWillUnmount=="function"){a=m,n=m.return;try{s=a,g.props=s.memoizedProps,g.state=s.memoizedState,g.componentWillUnmount()}catch(x){fn(a,n,x)}}break;case 5:vc(m,m.return);break;case 22:if(m.memoizedState!==null){ib(u);continue}}p!==null?(p.return=m,Pt=p):ib(u)}h=h.sibling}e:for(h=null,u=t;;){if(u.tag===5){if(h===null){h=u;try{r=u.stateNode,d?(i=r.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(c=u.stateNode,o=u.memoizedProps.style,l=o!=null&&o.hasOwnProperty("display")?o.display:null,c.style.display=g2("display",l))}catch(x){fn(t,t.return,x)}}}else if(u.tag===6){if(h===null)try{u.stateNode.nodeValue=d?"":u.memoizedProps}catch(x){fn(t,t.return,x)}}else if((u.tag!==22&&u.tag!==23||u.memoizedState===null||u===t)&&u.child!==null){u.child.return=u,u=u.child;continue}if(u===t)break e;for(;u.sibling===null;){if(u.return===null||u.return===t)break e;h===u&&(h=null),u=u.return}h===u&&(h=null),u.sibling.return=u.return,u=u.sibling}}break;case 19:Ar(s,t),Yr(t),a&4&&ab(t);break;case 21:break;default:Ar(s,t),Yr(t)}}function Yr(t){var s=t.flags;if(s&2){try{e:{for(var n=t.return;n!==null;){if(zS(n)){var a=n;break e}n=n.return}throw Error(it(160))}switch(a.tag){case 5:var r=a.stateNode;a.flags&32&&(Nu(r,""),a.flags&=-33);var i=nb(t);hj(t,i,r);break;case 3:case 4:var l=a.stateNode.containerInfo,c=nb(t);mj(t,c,l);break;default:throw Error(it(161))}}catch(o){fn(t,t.return,o)}t.flags&=-3}s&4096&&(t.flags&=-4097)}function W3(t,s,n){Pt=t,WS(t)}function WS(t,s,n){for(var a=(t.mode&1)!==0;Pt!==null;){var r=Pt,i=r.child;if(r.tag===22&&a){var l=r.memoizedState!==null||Jm;if(!l){var c=r.alternate,o=c!==null&&c.memoizedState!==null||ia;c=Jm;var d=ia;if(Jm=l,(ia=o)&&!d)for(Pt=r;Pt!==null;)l=Pt,o=l.child,l.tag===22&&l.memoizedState!==null?lb(r):o!==null?(o.return=l,Pt=o):lb(r);for(;i!==null;)Pt=i,WS(i),i=i.sibling;Pt=r,Jm=c,ia=d}rb(t)}else r.subtreeFlags&8772&&i!==null?(i.return=r,Pt=i):rb(t)}}function rb(t){for(;Pt!==null;){var s=Pt;if(s.flags&8772){var n=s.alternate;try{if(s.flags&8772)switch(s.tag){case 0:case 11:case 15:ia||Zx(5,s);break;case 1:var a=s.stateNode;if(s.flags&4&&!ia)if(n===null)a.componentDidMount();else{var r=s.elementType===s.type?n.memoizedProps:Tr(s.type,n.memoizedProps);a.componentDidUpdate(r,n.memoizedState,a.__reactInternalSnapshotBeforeUpdate)}var i=s.updateQueue;i!==null&&zN(s,i,a);break;case 3:var l=s.updateQueue;if(l!==null){if(n=null,s.child!==null)switch(s.child.tag){case 5:n=s.child.stateNode;break;case 1:n=s.child.stateNode}zN(s,l,n)}break;case 5:var c=s.stateNode;if(n===null&&s.flags&4){n=c;var o=s.memoizedProps;switch(s.type){case"button":case"input":case"select":case"textarea":o.autoFocus&&n.focus();break;case"img":o.src&&(n.src=o.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(s.memoizedState===null){var d=s.alternate;if(d!==null){var h=d.memoizedState;if(h!==null){var u=h.dehydrated;u!==null&&Cu(u)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(it(163))}ia||s.flags&512&&uj(s)}catch(m){fn(s,s.return,m)}}if(s===t){Pt=null;break}if(n=s.sibling,n!==null){n.return=s.return,Pt=n;break}Pt=s.return}}function ib(t){for(;Pt!==null;){var s=Pt;if(s===t){Pt=null;break}var n=s.sibling;if(n!==null){n.return=s.return,Pt=n;break}Pt=s.return}}function lb(t){for(;Pt!==null;){var s=Pt;try{switch(s.tag){case 0:case 11:case 15:var n=s.return;try{Zx(4,s)}catch(o){fn(s,n,o)}break;case 1:var a=s.stateNode;if(typeof a.componentDidMount=="function"){var r=s.return;try{a.componentDidMount()}catch(o){fn(s,r,o)}}var i=s.return;try{uj(s)}catch(o){fn(s,i,o)}break;case 5:var l=s.return;try{uj(s)}catch(o){fn(s,l,o)}}}catch(o){fn(s,s.return,o)}if(s===t){Pt=null;break}var c=s.sibling;if(c!==null){c.return=s.return,Pt=c;break}Pt=s.return}}var H3=Math.ceil,rx=Ki.ReactCurrentDispatcher,ay=Ki.ReactCurrentOwner,fr=Ki.ReactCurrentBatchConfig,bs=0,Kn=null,Tn=null,Xn=0,Ha=0,yc=Xl(0),Un=0,Iu=null,Oo=0,Xx=0,ry=0,pu=null,Ma=null,iy=0,sd=1/0,ki=null,ix=!1,xj=null,Rl=null,eh=!1,Al=null,lx=0,fu=0,pj=null,kh=-1,Ah=0;function ba(){return bs&6?bn():kh!==-1?kh:kh=bn()}function Ol(t){return t.mode&1?bs&2&&Xn!==0?Xn&-Xn:E3.transition!==null?(Ah===0&&(Ah=E2()),Ah):(t=Ds,t!==0||(t=window.event,t=t===void 0?16:L2(t.type)),t):1}function Fr(t,s,n,a){if(50<fu)throw fu=0,pj=null,Error(it(185));cm(t,n,a),(!(bs&2)||t!==Kn)&&(t===Kn&&(!(bs&2)&&(Xx|=n),Un===4&&pl(t,Xn)),La(t,a),n===1&&bs===0&&!(s.mode&1)&&(sd=bn()+500,Kx&&Jl()))}function La(t,s){var n=t.callbackNode;EM(t,s);var a=Vh(t,t===Kn?Xn:0);if(a===0)n!==null&&fN(n),t.callbackNode=null,t.callbackPriority=0;else if(s=a&-a,t.callbackPriority!==s){if(n!=null&&fN(n),s===1)t.tag===0?T3(ob.bind(null,t)):sS(ob.bind(null,t)),C3(function(){!(bs&6)&&Jl()}),n=null;else{switch(M2(a)){case 1:n=_v;break;case 4:n=P2;break;case 16:n=zh;break;case 536870912:n=T2;break;default:n=zh}n=eC(n,HS.bind(null,t))}t.callbackPriority=s,t.callbackNode=n}}function HS(t,s){if(kh=-1,Ah=0,bs&6)throw Error(it(327));var n=t.callbackNode;if(Tc()&&t.callbackNode!==n)return null;var a=Vh(t,t===Kn?Xn:0);if(a===0)return null;if(a&30||a&t.expiredLanes||s)s=ox(t,a);else{s=a;var r=bs;bs|=2;var i=YS();(Kn!==t||Xn!==s)&&(ki=null,sd=bn()+500,ko(t,s));do try{Q3();break}catch(c){KS(t,c)}while(!0);Gv(),rx.current=i,bs=r,Tn!==null?s=0:(Kn=null,Xn=0,s=Un)}if(s!==0){if(s===2&&(r=Ug(t),r!==0&&(a=r,s=fj(t,r))),s===1)throw n=Iu,ko(t,0),pl(t,a),La(t,bn()),n;if(s===6)pl(t,a);else{if(r=t.current.alternate,!(a&30)&&!K3(r)&&(s=ox(t,a),s===2&&(i=Ug(t),i!==0&&(a=i,s=fj(t,i))),s===1))throw n=Iu,ko(t,0),pl(t,a),La(t,bn()),n;switch(t.finishedWork=r,t.finishedLanes=a,s){case 0:case 1:throw Error(it(345));case 2:oo(t,Ma,ki);break;case 3:if(pl(t,a),(a&130023424)===a&&(s=iy+500-bn(),10<s)){if(Vh(t,0)!==0)break;if(r=t.suspendedLanes,(r&a)!==a){ba(),t.pingedLanes|=t.suspendedLanes&r;break}t.timeoutHandle=Qg(oo.bind(null,t,Ma,ki),s);break}oo(t,Ma,ki);break;case 4:if(pl(t,a),(a&4194240)===a)break;for(s=t.eventTimes,r=-1;0<a;){var l=31-Lr(a);i=1<<l,l=s[l],l>r&&(r=l),a&=~i}if(a=r,a=bn()-a,a=(120>a?120:480>a?480:1080>a?1080:1920>a?1920:3e3>a?3e3:4320>a?4320:1960*H3(a/1960))-a,10<a){t.timeoutHandle=Qg(oo.bind(null,t,Ma,ki),a);break}oo(t,Ma,ki);break;case 5:oo(t,Ma,ki);break;default:throw Error(it(329))}}}return La(t,bn()),t.callbackNode===n?HS.bind(null,t):null}function fj(t,s){var n=pu;return t.current.memoizedState.isDehydrated&&(ko(t,s).flags|=256),t=ox(t,s),t!==2&&(s=Ma,Ma=n,s!==null&&gj(s)),t}function gj(t){Ma===null?Ma=t:Ma.push.apply(Ma,t)}function K3(t){for(var s=t;;){if(s.flags&16384){var n=s.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var a=0;a<n.length;a++){var r=n[a],i=r.getSnapshot;r=r.value;try{if(!Br(i(),r))return!1}catch{return!1}}}if(n=s.child,s.subtreeFlags&16384&&n!==null)n.return=s,s=n;else{if(s===t)break;for(;s.sibling===null;){if(s.return===null||s.return===t)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function pl(t,s){for(s&=~ry,s&=~Xx,t.suspendedLanes|=s,t.pingedLanes&=~s,t=t.expirationTimes;0<s;){var n=31-Lr(s),a=1<<n;t[n]=-1,s&=~a}}function ob(t){if(bs&6)throw Error(it(327));Tc();var s=Vh(t,0);if(!(s&1))return La(t,bn()),null;var n=ox(t,s);if(t.tag!==0&&n===2){var a=Ug(t);a!==0&&(s=a,n=fj(t,a))}if(n===1)throw n=Iu,ko(t,0),pl(t,s),La(t,bn()),n;if(n===6)throw Error(it(345));return t.finishedWork=t.current.alternate,t.finishedLanes=s,oo(t,Ma,ki),La(t,bn()),null}function ly(t,s){var n=bs;bs|=1;try{return t(s)}finally{bs=n,bs===0&&(sd=bn()+500,Kx&&Jl())}}function Do(t){Al!==null&&Al.tag===0&&!(bs&6)&&Tc();var s=bs;bs|=1;var n=fr.transition,a=Ds;try{if(fr.transition=null,Ds=1,t)return t()}finally{Ds=a,fr.transition=n,bs=s,!(bs&6)&&Jl()}}function oy(){Ha=yc.current,Zs(yc)}function ko(t,s){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,S3(n)),Tn!==null)for(n=Tn.return;n!==null;){var a=n;switch(Uv(a),a.tag){case 1:a=a.type.childContextTypes,a!=null&&Yh();break;case 3:ed(),Zs(Da),Zs(da),Zv();break;case 5:Qv(a);break;case 4:ed();break;case 13:Zs(rn);break;case 19:Zs(rn);break;case 10:Wv(a.type._context);break;case 22:case 23:oy()}n=n.return}if(Kn=t,Tn=t=Dl(t.current,null),Xn=Ha=s,Un=0,Iu=null,ry=Xx=Oo=0,Ma=pu=null,po!==null){for(s=0;s<po.length;s++)if(n=po[s],a=n.interleaved,a!==null){n.interleaved=null;var r=a.next,i=n.pending;if(i!==null){var l=i.next;i.next=r,a.next=l}n.pending=a}po=null}return t}function KS(t,s){do{var n=Tn;try{if(Gv(),wh.current=ax,nx){for(var a=ln.memoizedState;a!==null;){var r=a.queue;r!==null&&(r.pending=null),a=a.next}nx=!1}if(Ro=0,Hn=qn=ln=null,hu=!1,Ru=0,ay.current=null,n===null||n.return===null){Un=1,Iu=s,Tn=null;break}e:{var i=t,l=n.return,c=n,o=s;if(s=Xn,c.flags|=32768,o!==null&&typeof o=="object"&&typeof o.then=="function"){var d=o,h=c,u=h.tag;if(!(h.mode&1)&&(u===0||u===11||u===15)){var m=h.alternate;m?(h.updateQueue=m.updateQueue,h.memoizedState=m.memoizedState,h.lanes=m.lanes):(h.updateQueue=null,h.memoizedState=null)}var p=YN(l);if(p!==null){p.flags&=-257,QN(p,l,c,i,s),p.mode&1&&KN(i,d,s),s=p,o=d;var g=s.updateQueue;if(g===null){var x=new Set;x.add(o),s.updateQueue=x}else g.add(o);break e}else{if(!(s&1)){KN(i,d,s),cy();break e}o=Error(it(426))}}else if(tn&&c.mode&1){var v=YN(l);if(v!==null){!(v.flags&65536)&&(v.flags|=256),QN(v,l,c,i,s),zv(td(o,c));break e}}i=o=td(o,c),Un!==4&&(Un=2),pu===null?pu=[i]:pu.push(i),i=l;do{switch(i.tag){case 3:i.flags|=65536,s&=-s,i.lanes|=s;var y=MS(i,o,s);UN(i,y);break e;case 1:c=o;var f=i.type,b=i.stateNode;if(!(i.flags&128)&&(typeof f.getDerivedStateFromError=="function"||b!==null&&typeof b.componentDidCatch=="function"&&(Rl===null||!Rl.has(b)))){i.flags|=65536,s&=-s,i.lanes|=s;var j=_S(i,c,s);UN(i,j);break e}}i=i.return}while(i!==null)}ZS(n)}catch(S){s=S,Tn===n&&n!==null&&(Tn=n=n.return);continue}break}while(!0)}function YS(){var t=rx.current;return rx.current=ax,t===null?ax:t}function cy(){(Un===0||Un===3||Un===2)&&(Un=4),Kn===null||!(Oo&268435455)&&!(Xx&268435455)||pl(Kn,Xn)}function ox(t,s){var n=bs;bs|=2;var a=YS();(Kn!==t||Xn!==s)&&(ki=null,ko(t,s));do try{Y3();break}catch(r){KS(t,r)}while(!0);if(Gv(),bs=n,rx.current=a,Tn!==null)throw Error(it(261));return Kn=null,Xn=0,Un}function Y3(){for(;Tn!==null;)QS(Tn)}function Q3(){for(;Tn!==null&&!NM();)QS(Tn)}function QS(t){var s=JS(t.alternate,t,Ha);t.memoizedProps=t.pendingProps,s===null?ZS(t):Tn=s,ay.current=null}function ZS(t){var s=t;do{var n=s.alternate;if(t=s.return,s.flags&32768){if(n=z3(n,s),n!==null){n.flags&=32767,Tn=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Un=6,Tn=null;return}}else if(n=U3(n,s,Ha),n!==null){Tn=n;return}if(s=s.sibling,s!==null){Tn=s;return}Tn=s=t}while(s!==null);Un===0&&(Un=5)}function oo(t,s,n){var a=Ds,r=fr.transition;try{fr.transition=null,Ds=1,Z3(t,s,n,a)}finally{fr.transition=r,Ds=a}return null}function Z3(t,s,n,a){do Tc();while(Al!==null);if(bs&6)throw Error(it(327));n=t.finishedWork;var r=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(it(177));t.callbackNode=null,t.callbackPriority=0;var i=n.lanes|n.childLanes;if(MM(t,i),t===Kn&&(Tn=Kn=null,Xn=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||eh||(eh=!0,eC(zh,function(){return Tc(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=fr.transition,fr.transition=null;var l=Ds;Ds=1;var c=bs;bs|=4,ay.current=null,G3(t,n),GS(n,t),g3(Kg),Gh=!!Hg,Kg=Hg=null,t.current=n,W3(n),bM(),bs=c,Ds=l,fr.transition=i}else t.current=n;if(eh&&(eh=!1,Al=t,lx=r),i=t.pendingLanes,i===0&&(Rl=null),CM(n.stateNode),La(t,bn()),s!==null)for(a=t.onRecoverableError,n=0;n<s.length;n++)r=s[n],a(r.value,{componentStack:r.stack,digest:r.digest});if(ix)throw ix=!1,t=xj,xj=null,t;return lx&1&&t.tag!==0&&Tc(),i=t.pendingLanes,i&1?t===pj?fu++:(fu=0,pj=t):fu=0,Jl(),null}function Tc(){if(Al!==null){var t=M2(lx),s=fr.transition,n=Ds;try{if(fr.transition=null,Ds=16>t?16:t,Al===null)var a=!1;else{if(t=Al,Al=null,lx=0,bs&6)throw Error(it(331));var r=bs;for(bs|=4,Pt=t.current;Pt!==null;){var i=Pt,l=i.child;if(Pt.flags&16){var c=i.deletions;if(c!==null){for(var o=0;o<c.length;o++){var d=c[o];for(Pt=d;Pt!==null;){var h=Pt;switch(h.tag){case 0:case 11:case 15:xu(8,h,i)}var u=h.child;if(u!==null)u.return=h,Pt=u;else for(;Pt!==null;){h=Pt;var m=h.sibling,p=h.return;if(US(h),h===d){Pt=null;break}if(m!==null){m.return=p,Pt=m;break}Pt=p}}}var g=i.alternate;if(g!==null){var x=g.child;if(x!==null){g.child=null;do{var v=x.sibling;x.sibling=null,x=v}while(x!==null)}}Pt=i}}if(i.subtreeFlags&2064&&l!==null)l.return=i,Pt=l;else e:for(;Pt!==null;){if(i=Pt,i.flags&2048)switch(i.tag){case 0:case 11:case 15:xu(9,i,i.return)}var y=i.sibling;if(y!==null){y.return=i.return,Pt=y;break e}Pt=i.return}}var f=t.current;for(Pt=f;Pt!==null;){l=Pt;var b=l.child;if(l.subtreeFlags&2064&&b!==null)b.return=l,Pt=b;else e:for(l=f;Pt!==null;){if(c=Pt,c.flags&2048)try{switch(c.tag){case 0:case 11:case 15:Zx(9,c)}}catch(S){fn(c,c.return,S)}if(c===l){Pt=null;break e}var j=c.sibling;if(j!==null){j.return=c.return,Pt=j;break e}Pt=c.return}}if(bs=r,Jl(),oi&&typeof oi.onPostCommitFiberRoot=="function")try{oi.onPostCommitFiberRoot(zx,t)}catch{}a=!0}return a}finally{Ds=n,fr.transition=s}}return!1}function cb(t,s,n){s=td(n,s),s=MS(t,s,1),t=_l(t,s,1),s=ba(),t!==null&&(cm(t,1,s),La(t,s))}function fn(t,s,n){if(t.tag===3)cb(t,t,n);else for(;s!==null;){if(s.tag===3){cb(s,t,n);break}else if(s.tag===1){var a=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof a.componentDidCatch=="function"&&(Rl===null||!Rl.has(a))){t=td(n,t),t=_S(s,t,1),s=_l(s,t,1),t=ba(),s!==null&&(cm(s,1,t),La(s,t));break}}s=s.return}}function X3(t,s,n){var a=t.pingCache;a!==null&&a.delete(s),s=ba(),t.pingedLanes|=t.suspendedLanes&n,Kn===t&&(Xn&n)===n&&(Un===4||Un===3&&(Xn&130023424)===Xn&&500>bn()-iy?ko(t,0):ry|=n),La(t,s)}function XS(t,s){s===0&&(t.mode&1?(s=Vm,Vm<<=1,!(Vm&130023424)&&(Vm=4194304)):s=1);var n=ba();t=Ui(t,s),t!==null&&(cm(t,s,n),La(t,n))}function J3(t){var s=t.memoizedState,n=0;s!==null&&(n=s.retryLane),XS(t,n)}function e_(t,s){var n=0;switch(t.tag){case 13:var a=t.stateNode,r=t.memoizedState;r!==null&&(n=r.retryLane);break;case 19:a=t.stateNode;break;default:throw Error(it(314))}a!==null&&a.delete(s),XS(t,n)}var JS;JS=function(t,s,n){if(t!==null)if(t.memoizedProps!==s.pendingProps||Da.current)Ra=!0;else{if(!(t.lanes&n)&&!(s.flags&128))return Ra=!1,B3(t,s,n);Ra=!!(t.flags&131072)}else Ra=!1,tn&&s.flags&1048576&&nS(s,Xh,s.index);switch(s.lanes=0,s.tag){case 2:var a=s.type;Ch(t,s),t=s.pendingProps;var r=Zc(s,da.current);Pc(s,n),r=Jv(null,s,a,t,r,n);var i=ey();return s.flags|=1,typeof r=="object"&&r!==null&&typeof r.render=="function"&&r.$$typeof===void 0?(s.tag=1,s.memoizedState=null,s.updateQueue=null,Ia(a)?(i=!0,Qh(s)):i=!1,s.memoizedState=r.state!==null&&r.state!==void 0?r.state:null,Kv(s),r.updater=Qx,s.stateNode=r,r._reactInternals=s,nj(s,a,t,n),s=ij(null,s,a,!0,i,n)):(s.tag=0,tn&&i&&Bv(s),fa(null,s,r,n),s=s.child),s;case 16:a=s.elementType;e:{switch(Ch(t,s),t=s.pendingProps,r=a._init,a=r(a._payload),s.type=a,r=s.tag=s_(a),t=Tr(a,t),r){case 0:s=rj(null,s,a,t,n);break e;case 1:s=JN(null,s,a,t,n);break e;case 11:s=ZN(null,s,a,t,n);break e;case 14:s=XN(null,s,a,Tr(a.type,t),n);break e}throw Error(it(306,a,""))}return s;case 0:return a=s.type,r=s.pendingProps,r=s.elementType===a?r:Tr(a,r),rj(t,s,a,r,n);case 1:return a=s.type,r=s.pendingProps,r=s.elementType===a?r:Tr(a,r),JN(t,s,a,r,n);case 3:e:{if(IS(s),t===null)throw Error(it(387));a=s.pendingProps,i=s.memoizedState,r=i.element,cS(t,s),tx(s,a,null,n);var l=s.memoizedState;if(a=l.element,i.isDehydrated)if(i={element:a,isDehydrated:!1,cache:l.cache,pendingSuspenseBoundaries:l.pendingSuspenseBoundaries,transitions:l.transitions},s.updateQueue.baseState=i,s.memoizedState=i,s.flags&256){r=td(Error(it(423)),s),s=eb(t,s,a,n,r);break e}else if(a!==r){r=td(Error(it(424)),s),s=eb(t,s,a,n,r);break e}else for(Xa=Ml(s.stateNode.containerInfo.firstChild),Ja=s,tn=!0,_r=null,n=lS(s,null,a,n),s.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Xc(),a===r){s=zi(t,s,n);break e}fa(t,s,a,n)}s=s.child}return s;case 5:return dS(s),t===null&&ej(s),a=s.type,r=s.pendingProps,i=t!==null?t.memoizedProps:null,l=r.children,Yg(a,r)?l=null:i!==null&&Yg(a,i)&&(s.flags|=32),DS(t,s),fa(t,s,l,n),s.child;case 6:return t===null&&ej(s),null;case 13:return LS(t,s,n);case 4:return Yv(s,s.stateNode.containerInfo),a=s.pendingProps,t===null?s.child=Jc(s,null,a,n):fa(t,s,a,n),s.child;case 11:return a=s.type,r=s.pendingProps,r=s.elementType===a?r:Tr(a,r),ZN(t,s,a,r,n);case 7:return fa(t,s,s.pendingProps,n),s.child;case 8:return fa(t,s,s.pendingProps.children,n),s.child;case 12:return fa(t,s,s.pendingProps.children,n),s.child;case 10:e:{if(a=s.type._context,r=s.pendingProps,i=s.memoizedProps,l=r.value,Vs(Jh,a._currentValue),a._currentValue=l,i!==null)if(Br(i.value,l)){if(i.children===r.children&&!Da.current){s=zi(t,s,n);break e}}else for(i=s.child,i!==null&&(i.return=s);i!==null;){var c=i.dependencies;if(c!==null){l=i.child;for(var o=c.firstContext;o!==null;){if(o.context===a){if(i.tag===1){o=Ii(-1,n&-n),o.tag=2;var d=i.updateQueue;if(d!==null){d=d.shared;var h=d.pending;h===null?o.next=o:(o.next=h.next,h.next=o),d.pending=o}}i.lanes|=n,o=i.alternate,o!==null&&(o.lanes|=n),tj(i.return,n,s),c.lanes|=n;break}o=o.next}}else if(i.tag===10)l=i.type===s.type?null:i.child;else if(i.tag===18){if(l=i.return,l===null)throw Error(it(341));l.lanes|=n,c=l.alternate,c!==null&&(c.lanes|=n),tj(l,n,s),l=i.sibling}else l=i.child;if(l!==null)l.return=i;else for(l=i;l!==null;){if(l===s){l=null;break}if(i=l.sibling,i!==null){i.return=l.return,l=i;break}l=l.return}i=l}fa(t,s,r.children,n),s=s.child}return s;case 9:return r=s.type,a=s.pendingProps.children,Pc(s,n),r=yr(r),a=a(r),s.flags|=1,fa(t,s,a,n),s.child;case 14:return a=s.type,r=Tr(a,s.pendingProps),r=Tr(a.type,r),XN(t,s,a,r,n);case 15:return RS(t,s,s.type,s.pendingProps,n);case 17:return a=s.type,r=s.pendingProps,r=s.elementType===a?r:Tr(a,r),Ch(t,s),s.tag=1,Ia(a)?(t=!0,Qh(s)):t=!1,Pc(s,n),ES(s,a,r),nj(s,a,r,n),ij(null,s,a,!0,t,n);case 19:return FS(t,s,n);case 22:return OS(t,s,n)}throw Error(it(156,s.tag))};function eC(t,s){return A2(t,s)}function t_(t,s,n,a){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=a,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function pr(t,s,n,a){return new t_(t,s,n,a)}function dy(t){return t=t.prototype,!(!t||!t.isReactComponent)}function s_(t){if(typeof t=="function")return dy(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Tv)return 11;if(t===Ev)return 14}return 2}function Dl(t,s){var n=t.alternate;return n===null?(n=pr(t.tag,s,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=s,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,s=t.dependencies,n.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Ph(t,s,n,a,r,i){var l=2;if(a=t,typeof t=="function")dy(t)&&(l=1);else if(typeof t=="string")l=5;else e:switch(t){case dc:return Ao(n.children,r,i,s);case Pv:l=8,r|=8;break;case Ag:return t=pr(12,n,s,r|2),t.elementType=Ag,t.lanes=i,t;case Pg:return t=pr(13,n,s,r),t.elementType=Pg,t.lanes=i,t;case Tg:return t=pr(19,n,s,r),t.elementType=Tg,t.lanes=i,t;case d2:return Jx(n,r,i,s);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case o2:l=10;break e;case c2:l=9;break e;case Tv:l=11;break e;case Ev:l=14;break e;case ml:l=16,a=null;break e}throw Error(it(130,t==null?t:typeof t,""))}return s=pr(l,n,s,r),s.elementType=t,s.type=a,s.lanes=i,s}function Ao(t,s,n,a){return t=pr(7,t,a,s),t.lanes=n,t}function Jx(t,s,n,a){return t=pr(22,t,a,s),t.elementType=d2,t.lanes=n,t.stateNode={isHidden:!1},t}function Df(t,s,n){return t=pr(6,t,null,s),t.lanes=n,t}function If(t,s,n){return s=pr(4,t.children!==null?t.children:[],t.key,s),s.lanes=n,s.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},s}function n_(t,s,n,a,r){this.tag=s,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=ff(0),this.expirationTimes=ff(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ff(0),this.identifierPrefix=a,this.onRecoverableError=r,this.mutableSourceEagerHydrationData=null}function uy(t,s,n,a,r,i,l,c,o){return t=new n_(t,s,n,c,o),s===1?(s=1,i===!0&&(s|=8)):s=0,i=pr(3,null,null,s),t.current=i,i.stateNode=t,i.memoizedState={element:a,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Kv(i),t}function a_(t,s,n){var a=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:cc,key:a==null?null:""+a,children:t,containerInfo:s,implementation:n}}function tC(t){if(!t)return ql;t=t._reactInternals;e:{if(Ko(t)!==t||t.tag!==1)throw Error(it(170));var s=t;do{switch(s.tag){case 3:s=s.stateNode.context;break e;case 1:if(Ia(s.type)){s=s.stateNode.__reactInternalMemoizedMergedChildContext;break e}}s=s.return}while(s!==null);throw Error(it(171))}if(t.tag===1){var n=t.type;if(Ia(n))return tS(t,n,s)}return s}function sC(t,s,n,a,r,i,l,c,o){return t=uy(n,a,!0,t,r,i,l,c,o),t.context=tC(null),n=t.current,a=ba(),r=Ol(n),i=Ii(a,r),i.callback=s??null,_l(n,i,r),t.current.lanes=r,cm(t,r,a),La(t,a),t}function ep(t,s,n,a){var r=s.current,i=ba(),l=Ol(r);return n=tC(n),s.context===null?s.context=n:s.pendingContext=n,s=Ii(i,l),s.payload={element:t},a=a===void 0?null:a,a!==null&&(s.callback=a),t=_l(r,s,l),t!==null&&(Fr(t,r,l,i),bh(t,r,l)),l}function cx(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function db(t,s){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<s?n:s}}function my(t,s){db(t,s),(t=t.alternate)&&db(t,s)}function r_(){return null}var nC=typeof reportError=="function"?reportError:function(t){console.error(t)};function hy(t){this._internalRoot=t}tp.prototype.render=hy.prototype.render=function(t){var s=this._internalRoot;if(s===null)throw Error(it(409));ep(t,s,null,null)};tp.prototype.unmount=hy.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var s=t.containerInfo;Do(function(){ep(null,t,null,null)}),s[Bi]=null}};function tp(t){this._internalRoot=t}tp.prototype.unstable_scheduleHydration=function(t){if(t){var s=O2();t={blockedOn:null,target:t,priority:s};for(var n=0;n<xl.length&&s!==0&&s<xl[n].priority;n++);xl.splice(n,0,t),n===0&&I2(t)}};function xy(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function sp(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function ub(){}function i_(t,s,n,a,r){if(r){if(typeof a=="function"){var i=a;a=function(){var d=cx(l);i.call(d)}}var l=sC(s,a,t,0,null,!1,!1,"",ub);return t._reactRootContainer=l,t[Bi]=l.current,Pu(t.nodeType===8?t.parentNode:t),Do(),l}for(;r=t.lastChild;)t.removeChild(r);if(typeof a=="function"){var c=a;a=function(){var d=cx(o);c.call(d)}}var o=uy(t,0,!1,null,null,!1,!1,"",ub);return t._reactRootContainer=o,t[Bi]=o.current,Pu(t.nodeType===8?t.parentNode:t),Do(function(){ep(s,o,n,a)}),o}function np(t,s,n,a,r){var i=n._reactRootContainer;if(i){var l=i;if(typeof r=="function"){var c=r;r=function(){var o=cx(l);c.call(o)}}ep(s,l,t,r)}else l=i_(n,s,t,r,a);return cx(l)}_2=function(t){switch(t.tag){case 3:var s=t.stateNode;if(s.current.memoizedState.isDehydrated){var n=eu(s.pendingLanes);n!==0&&(Rv(s,n|1),La(s,bn()),!(bs&6)&&(sd=bn()+500,Jl()))}break;case 13:Do(function(){var a=Ui(t,1);if(a!==null){var r=ba();Fr(a,t,1,r)}}),my(t,1)}};Ov=function(t){if(t.tag===13){var s=Ui(t,134217728);if(s!==null){var n=ba();Fr(s,t,134217728,n)}my(t,134217728)}};R2=function(t){if(t.tag===13){var s=Ol(t),n=Ui(t,s);if(n!==null){var a=ba();Fr(n,t,s,a)}my(t,s)}};O2=function(){return Ds};D2=function(t,s){var n=Ds;try{return Ds=t,s()}finally{Ds=n}};qg=function(t,s,n){switch(s){case"input":if(_g(t,n),s=n.name,n.type==="radio"&&s!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+s)+'][type="radio"]'),s=0;s<n.length;s++){var a=n[s];if(a!==t&&a.form===t.form){var r=Hx(a);if(!r)throw Error(it(90));m2(a),_g(a,r)}}}break;case"textarea":x2(t,n);break;case"select":s=n.value,s!=null&&Sc(t,!!n.multiple,s,!1)}};N2=ly;b2=Do;var l_={usingClientEntryPoint:!1,Events:[um,xc,Hx,v2,y2,ly]},zd={findFiberByHostInstance:xo,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},o_={bundleType:zd.bundleType,version:zd.version,rendererPackageName:zd.rendererPackageName,rendererConfig:zd.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Ki.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=C2(t),t===null?null:t.stateNode},findFiberByHostInstance:zd.findFiberByHostInstance||r_,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var th=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!th.isDisabled&&th.supportsFiber)try{zx=th.inject(o_),oi=th}catch{}}ar.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=l_;ar.createPortal=function(t,s){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!xy(s))throw Error(it(200));return a_(t,s,null,n)};ar.createRoot=function(t,s){if(!xy(t))throw Error(it(299));var n=!1,a="",r=nC;return s!=null&&(s.unstable_strictMode===!0&&(n=!0),s.identifierPrefix!==void 0&&(a=s.identifierPrefix),s.onRecoverableError!==void 0&&(r=s.onRecoverableError)),s=uy(t,1,!1,null,null,n,!1,a,r),t[Bi]=s.current,Pu(t.nodeType===8?t.parentNode:t),new hy(s)};ar.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var s=t._reactInternals;if(s===void 0)throw typeof t.render=="function"?Error(it(188)):(t=Object.keys(t).join(","),Error(it(268,t)));return t=C2(s),t=t===null?null:t.stateNode,t};ar.flushSync=function(t){return Do(t)};ar.hydrate=function(t,s,n){if(!sp(s))throw Error(it(200));return np(null,t,s,!0,n)};ar.hydrateRoot=function(t,s,n){if(!xy(t))throw Error(it(405));var a=n!=null&&n.hydratedSources||null,r=!1,i="",l=nC;if(n!=null&&(n.unstable_strictMode===!0&&(r=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(l=n.onRecoverableError)),s=sC(s,null,t,1,n??null,r,!1,i,l),t[Bi]=s.current,Pu(t),a)for(t=0;t<a.length;t++)n=a[t],r=n._getVersion,r=r(n._source),s.mutableSourceEagerHydrationData==null?s.mutableSourceEagerHydrationData=[n,r]:s.mutableSourceEagerHydrationData.push(n,r);return new tp(s)};ar.render=function(t,s,n){if(!sp(s))throw Error(it(200));return np(null,t,s,!1,n)};ar.unmountComponentAtNode=function(t){if(!sp(t))throw Error(it(40));return t._reactRootContainer?(Do(function(){np(null,null,t,!1,function(){t._reactRootContainer=null,t[Bi]=null})}),!0):!1};ar.unstable_batchedUpdates=ly;ar.unstable_renderSubtreeIntoContainer=function(t,s,n,a){if(!sp(n))throw Error(it(200));if(t==null||t._reactInternals===void 0)throw Error(it(38));return np(t,s,n,!1,a)};ar.version="18.3.1-next-f1338f8080-20240426";function aC(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(aC)}catch(t){console.error(t)}}aC(),a2.exports=ar;var eo=a2.exports;const c_=yv(eo);var rC,mb=eo;rC=mb.createRoot,mb.hydrateRoot;function d_(t,s){if(t instanceof RegExp)return{keys:!1,pattern:t};var n,a,r,i,l=[],c="",o=t.split("/");for(o[0]||o.shift();r=o.shift();)n=r[0],n==="*"?(l.push(n),c+=r[1]==="?"?"(?:/(.*))?":"/(.*)"):n===":"?(a=r.indexOf("?",1),i=r.indexOf(".",1),l.push(r.substring(1,~a?a:~i?i:r.length)),c+=~a&&!~i?"(?:/([^/]+?))?":"/([^/]+?)",~i&&(c+=(~a?"?":"")+"\\"+r.substring(i))):c+="/"+r;return{keys:l,pattern:new RegExp("^"+c+(s?"(?=$|/)":"/?$"),"i")}}var iC={exports:{}},lC={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var nd=N;function u_(t,s){return t===s&&(t!==0||1/t===1/s)||t!==t&&s!==s}var m_=typeof Object.is=="function"?Object.is:u_,h_=nd.useState,x_=nd.useEffect,p_=nd.useLayoutEffect,f_=nd.useDebugValue;function g_(t,s){var n=s(),a=h_({inst:{value:n,getSnapshot:s}}),r=a[0].inst,i=a[1];return p_(function(){r.value=n,r.getSnapshot=s,Lf(r)&&i({inst:r})},[t,n,s]),x_(function(){return Lf(r)&&i({inst:r}),t(function(){Lf(r)&&i({inst:r})})},[t]),f_(n),n}function Lf(t){var s=t.getSnapshot;t=t.value;try{var n=s();return!m_(t,n)}catch{return!0}}function j_(t,s){return s()}var v_=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?j_:g_;lC.useSyncExternalStore=nd.useSyncExternalStore!==void 0?nd.useSyncExternalStore:v_;iC.exports=lC;var y_=iC.exports;const N_=s2.useInsertionEffect,b_=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",w_=b_?N.useLayoutEffect:N.useEffect,S_=N_||w_,oC=t=>{const s=N.useRef([t,(...n)=>s[0](...n)]).current;return S_(()=>{s[0]=t}),s[1]},C_="popstate",py="pushState",fy="replaceState",k_="hashchange",hb=[C_,py,fy,k_],A_=t=>{for(const s of hb)addEventListener(s,t);return()=>{for(const s of hb)removeEventListener(s,t)}},cC=(t,s)=>y_.useSyncExternalStore(A_,t,s),P_=()=>location.search,T_=({ssrSearch:t=""}={})=>cC(P_,()=>t),xb=()=>location.pathname,E_=({ssrPath:t}={})=>cC(xb,t?()=>t:xb),M_=(t,{replace:s=!1,state:n=null}={})=>history[s?fy:py](n,"",t),__=(t={})=>[E_(t),M_],pb=Symbol.for("wouter_v3");if(typeof history<"u"&&typeof window[pb]>"u"){for(const t of[py,fy]){const s=history[t];history[t]=function(){const n=s.apply(this,arguments),a=new Event(t);return a.arguments=arguments,dispatchEvent(a),n}}Object.defineProperty(window,pb,{value:!0})}const R_=(t,s)=>s.toLowerCase().indexOf(t.toLowerCase())?"~"+s:s.slice(t.length)||"/",dC=(t="")=>t==="/"?"":t,O_=(t,s)=>t[0]==="~"?t.slice(1):dC(s)+t,D_=(t="",s)=>R_(fb(dC(t)),fb(s)),fb=t=>{try{return decodeURI(t)}catch{return t}},uC={hook:__,searchHook:T_,parser:d_,base:"",ssrPath:void 0,ssrSearch:void 0,hrefs:t=>t},mC=N.createContext(uC),hm=()=>N.useContext(mC),hC={},xC=N.createContext(hC),yd=()=>N.useContext(xC),ap=t=>{const[s,n]=t.hook(t);return[D_(t.base,s),oC((a,r)=>n(O_(a,t.base),r))]},As=()=>ap(hm()),pC=(t,s,n,a)=>{const{pattern:r,keys:i}=s instanceof RegExp?{keys:!1,pattern:s}:t(s||"*",a),l=r.exec(n)||[],[c,...o]=l;return c!==void 0?[!0,(()=>{const d=i!==!1?Object.fromEntries(i.map((u,m)=>[u,o[m]])):l.groups;let h={...o};return d&&Object.assign(h,d),h})(),...a?[c]:[]]:[!1,null]},I_=({children:t,...s})=>{var h,u;const n=hm(),a=s.hook?uC:n;let r=a;const[i,l]=((h=s.ssrPath)==null?void 0:h.split("?"))??[];l&&(s.ssrSearch=l,s.ssrPath=i),s.hrefs=s.hrefs??((u=s.hook)==null?void 0:u.hrefs);let c=N.useRef({}),o=c.current,d=o;for(let m in a){const p=m==="base"?a[m]+(s[m]||""):s[m]||a[m];o===d&&p!==d[m]&&(c.current=d={...d}),d[m]=p,p!==a[m]&&(r=d)}return N.createElement(mC.Provider,{value:r,children:t})},gb=({children:t,component:s},n)=>s?N.createElement(s,{params:n}):typeof t=="function"?t(n):t,L_=t=>{let s=N.useRef(hC),n=s.current;for(const a in t)t[a]!==n[a]&&(n=t);return Object.keys(t).length===0&&(n=t),s.current=n},yt=({path:t,nest:s,match:n,...a})=>{const r=hm(),[i]=ap(r),[l,c,o]=n??pC(r.parser,t,i,s),d=L_({...yd(),...c});if(!l)return null;const h=o?N.createElement(I_,{base:o},gb(a,d)):gb(a,d);return N.createElement(xC.Provider,{value:d,children:h})},Lt=N.forwardRef((t,s)=>{const n=hm(),[a,r]=ap(n),{to:i="",href:l=i,onClick:c,asChild:o,children:d,className:h,replace:u,state:m,...p}=t,g=oC(v=>{v.ctrlKey||v.metaKey||v.altKey||v.shiftKey||v.button!==0||(c==null||c(v),v.defaultPrevented||(v.preventDefault(),r(l,t)))}),x=n.hrefs(l[0]==="~"?l.slice(1):n.base+l,n);return o&&N.isValidElement(d)?N.cloneElement(d,{onClick:g,href:x}):N.createElement("a",{...p,onClick:g,href:x,className:h!=null&&h.call?h(a===l):h,children:d,ref:s})}),fC=t=>Array.isArray(t)?t.flatMap(s=>fC(s&&s.type===N.Fragment?s.props.children:s)):[t],F_=({children:t,location:s})=>{const n=hm(),[a]=ap(n);for(const r of fC(t)){let i=0;if(N.isValidElement(r)&&(i=pC(n.parser,r.props.path,s||a,r.props.nest))[0])return N.cloneElement(r,{match:i})}return null};var Nd=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(t){return this.listeners.add(t),this.onSubscribe(),()=>{this.listeners.delete(t),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},Io=typeof window>"u"||"Deno"in globalThis;function dr(){}function q_(t,s){return typeof t=="function"?t(s):t}function jj(t){return typeof t=="number"&&t>=0&&t!==1/0}function gC(t,s){return Math.max(t+(s||0)-Date.now(),0)}function Ec(t,s){return typeof t=="function"?t(s):t}function Rr(t,s){return typeof t=="function"?t(s):t}function jb(t,s){const{type:n="all",exact:a,fetchStatus:r,predicate:i,queryKey:l,stale:c}=t;if(l){if(a){if(s.queryHash!==gy(l,s.options))return!1}else if(!Lu(s.queryKey,l))return!1}if(n!=="all"){const o=s.isActive();if(n==="active"&&!o||n==="inactive"&&o)return!1}return!(typeof c=="boolean"&&s.isStale()!==c||r&&r!==s.state.fetchStatus||i&&!i(s))}function vb(t,s){const{exact:n,status:a,predicate:r,mutationKey:i}=t;if(i){if(!s.options.mutationKey)return!1;if(n){if(Lo(s.options.mutationKey)!==Lo(i))return!1}else if(!Lu(s.options.mutationKey,i))return!1}return!(a&&s.state.status!==a||r&&!r(s))}function gy(t,s){return((s==null?void 0:s.queryKeyHashFn)||Lo)(t)}function Lo(t){return JSON.stringify(t,(s,n)=>vj(n)?Object.keys(n).sort().reduce((a,r)=>(a[r]=n[r],a),{}):n)}function Lu(t,s){return t===s?!0:typeof t!=typeof s?!1:t&&s&&typeof t=="object"&&typeof s=="object"?!Object.keys(s).some(n=>!Lu(t[n],s[n])):!1}function jC(t,s){if(t===s)return t;const n=yb(t)&&yb(s);if(n||vj(t)&&vj(s)){const a=n?t:Object.keys(t),r=a.length,i=n?s:Object.keys(s),l=i.length,c=n?[]:{};let o=0;for(let d=0;d<l;d++){const h=n?d:i[d];(!n&&a.includes(h)||n)&&t[h]===void 0&&s[h]===void 0?(c[h]=void 0,o++):(c[h]=jC(t[h],s[h]),c[h]===t[h]&&t[h]!==void 0&&o++)}return r===l&&o===r?t:c}return s}function dx(t,s){if(!s||Object.keys(t).length!==Object.keys(s).length)return!1;for(const n in t)if(t[n]!==s[n])return!1;return!0}function yb(t){return Array.isArray(t)&&t.length===Object.keys(t).length}function vj(t){if(!Nb(t))return!1;const s=t.constructor;if(s===void 0)return!0;const n=s.prototype;return!(!Nb(n)||!n.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(t)!==Object.prototype)}function Nb(t){return Object.prototype.toString.call(t)==="[object Object]"}function $_(t){return new Promise(s=>{setTimeout(s,t)})}function yj(t,s,n){return typeof n.structuralSharing=="function"?n.structuralSharing(t,s):n.structuralSharing!==!1?jC(t,s):s}function B_(t,s,n=0){const a=[...t,s];return n&&a.length>n?a.slice(1):a}function U_(t,s,n=0){const a=[s,...t];return n&&a.length>n?a.slice(0,-1):a}var jy=Symbol();function vC(t,s){return!t.queryFn&&(s!=null&&s.initialPromise)?()=>s.initialPromise:!t.queryFn||t.queryFn===jy?()=>Promise.reject(new Error(`Missing queryFn: '${t.queryHash}'`)):t.queryFn}var vo,gl,Lc,I1,z_=(I1=class extends Nd{constructor(){super();$t(this,vo);$t(this,gl);$t(this,Lc);Nt(this,Lc,s=>{if(!Io&&window.addEventListener){const n=()=>s();return window.addEventListener("visibilitychange",n,!1),()=>{window.removeEventListener("visibilitychange",n)}}})}onSubscribe(){Ce(this,gl)||this.setEventListener(Ce(this,Lc))}onUnsubscribe(){var s;this.hasListeners()||((s=Ce(this,gl))==null||s.call(this),Nt(this,gl,void 0))}setEventListener(s){var n;Nt(this,Lc,s),(n=Ce(this,gl))==null||n.call(this),Nt(this,gl,s(a=>{typeof a=="boolean"?this.setFocused(a):this.onFocus()}))}setFocused(s){Ce(this,vo)!==s&&(Nt(this,vo,s),this.onFocus())}onFocus(){const s=this.isFocused();this.listeners.forEach(n=>{n(s)})}isFocused(){var s;return typeof Ce(this,vo)=="boolean"?Ce(this,vo):((s=globalThis.document)==null?void 0:s.visibilityState)!=="hidden"}},vo=new WeakMap,gl=new WeakMap,Lc=new WeakMap,I1),vy=new z_,Fc,jl,qc,L1,V_=(L1=class extends Nd{constructor(){super();$t(this,Fc,!0);$t(this,jl);$t(this,qc);Nt(this,qc,s=>{if(!Io&&window.addEventListener){const n=()=>s(!0),a=()=>s(!1);return window.addEventListener("online",n,!1),window.addEventListener("offline",a,!1),()=>{window.removeEventListener("online",n),window.removeEventListener("offline",a)}}})}onSubscribe(){Ce(this,jl)||this.setEventListener(Ce(this,qc))}onUnsubscribe(){var s;this.hasListeners()||((s=Ce(this,jl))==null||s.call(this),Nt(this,jl,void 0))}setEventListener(s){var n;Nt(this,qc,s),(n=Ce(this,jl))==null||n.call(this),Nt(this,jl,s(this.setOnline.bind(this)))}setOnline(s){Ce(this,Fc)!==s&&(Nt(this,Fc,s),this.listeners.forEach(a=>{a(s)}))}isOnline(){return Ce(this,Fc)}},Fc=new WeakMap,jl=new WeakMap,qc=new WeakMap,L1),ux=new V_;function Nj(){let t,s;const n=new Promise((r,i)=>{t=r,s=i});n.status="pending",n.catch(()=>{});function a(r){Object.assign(n,r),delete n.resolve,delete n.reject}return n.resolve=r=>{a({status:"fulfilled",value:r}),t(r)},n.reject=r=>{a({status:"rejected",reason:r}),s(r)},n}function G_(t){return Math.min(1e3*2**t,3e4)}function yC(t){return(t??"online")==="online"?ux.isOnline():!0}var NC=class extends Error{constructor(t){super("CancelledError"),this.revert=t==null?void 0:t.revert,this.silent=t==null?void 0:t.silent}};function Ff(t){return t instanceof NC}function bC(t){let s=!1,n=0,a=!1,r;const i=Nj(),l=x=>{var v;a||(m(new NC(x)),(v=t.abort)==null||v.call(t))},c=()=>{s=!0},o=()=>{s=!1},d=()=>vy.isFocused()&&(t.networkMode==="always"||ux.isOnline())&&t.canRun(),h=()=>yC(t.networkMode)&&t.canRun(),u=x=>{var v;a||(a=!0,(v=t.onSuccess)==null||v.call(t,x),r==null||r(),i.resolve(x))},m=x=>{var v;a||(a=!0,(v=t.onError)==null||v.call(t,x),r==null||r(),i.reject(x))},p=()=>new Promise(x=>{var v;r=y=>{(a||d())&&x(y)},(v=t.onPause)==null||v.call(t)}).then(()=>{var x;r=void 0,a||(x=t.onContinue)==null||x.call(t)}),g=()=>{if(a)return;let x;const v=n===0?t.initialPromise:void 0;try{x=v??t.fn()}catch(y){x=Promise.reject(y)}Promise.resolve(x).then(u).catch(y=>{var k;if(a)return;const f=t.retry??(Io?0:3),b=t.retryDelay??G_,j=typeof b=="function"?b(n,y):b,S=f===!0||typeof f=="number"&&n<f||typeof f=="function"&&f(n,y);if(s||!S){m(y);return}n++,(k=t.onFail)==null||k.call(t,n,y),$_(j).then(()=>d()?void 0:p()).then(()=>{s?m(y):g()})})};return{promise:i,cancel:l,continue:()=>(r==null||r(),i),cancelRetry:c,continueRetry:o,canStart:h,start:()=>(h()?g():p().then(g),i)}}function W_(){let t=[],s=0,n=c=>{c()},a=c=>{c()},r=c=>setTimeout(c,0);const i=c=>{s?t.push(c):r(()=>{n(c)})},l=()=>{const c=t;t=[],c.length&&r(()=>{a(()=>{c.forEach(o=>{n(o)})})})};return{batch:c=>{let o;s++;try{o=c()}finally{s--,s||l()}return o},batchCalls:c=>(...o)=>{i(()=>{c(...o)})},schedule:i,setNotifyFunction:c=>{n=c},setBatchNotifyFunction:c=>{a=c},setScheduler:c=>{r=c}}}var Bn=W_(),yo,F1,wC=(F1=class{constructor(){$t(this,yo)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),jj(this.gcTime)&&Nt(this,yo,setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(t){this.gcTime=Math.max(this.gcTime||0,t??(Io?1/0:5*60*1e3))}clearGcTimeout(){Ce(this,yo)&&(clearTimeout(Ce(this,yo)),Nt(this,yo,void 0))}},yo=new WeakMap,F1),$c,Bc,cr,aa,am,No,Er,wi,q1,H_=(q1=class extends wC{constructor(s){super();$t(this,Er);$t(this,$c);$t(this,Bc);$t(this,cr);$t(this,aa);$t(this,am);$t(this,No);Nt(this,No,!1),Nt(this,am,s.defaultOptions),this.setOptions(s.options),this.observers=[],Nt(this,cr,s.cache),this.queryKey=s.queryKey,this.queryHash=s.queryHash,Nt(this,$c,K_(this.options)),this.state=s.state??Ce(this,$c),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var s;return(s=Ce(this,aa))==null?void 0:s.promise}setOptions(s){this.options={...Ce(this,am),...s},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&Ce(this,cr).remove(this)}setData(s,n){const a=yj(this.state.data,s,this.options);return ls(this,Er,wi).call(this,{data:a,type:"success",dataUpdatedAt:n==null?void 0:n.updatedAt,manual:n==null?void 0:n.manual}),a}setState(s,n){ls(this,Er,wi).call(this,{type:"setState",state:s,setStateOptions:n})}cancel(s){var a,r;const n=(a=Ce(this,aa))==null?void 0:a.promise;return(r=Ce(this,aa))==null||r.cancel(s),n?n.then(dr).catch(dr):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(Ce(this,$c))}isActive(){return this.observers.some(s=>Rr(s.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===jy||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStale(){return this.state.isInvalidated?!0:this.getObserversCount()>0?this.observers.some(s=>s.getCurrentResult().isStale):this.state.data===void 0}isStaleByTime(s=0){return this.state.isInvalidated||this.state.data===void 0||!gC(this.state.dataUpdatedAt,s)}onFocus(){var n;const s=this.observers.find(a=>a.shouldFetchOnWindowFocus());s==null||s.refetch({cancelRefetch:!1}),(n=Ce(this,aa))==null||n.continue()}onOnline(){var n;const s=this.observers.find(a=>a.shouldFetchOnReconnect());s==null||s.refetch({cancelRefetch:!1}),(n=Ce(this,aa))==null||n.continue()}addObserver(s){this.observers.includes(s)||(this.observers.push(s),this.clearGcTimeout(),Ce(this,cr).notify({type:"observerAdded",query:this,observer:s}))}removeObserver(s){this.observers.includes(s)&&(this.observers=this.observers.filter(n=>n!==s),this.observers.length||(Ce(this,aa)&&(Ce(this,No)?Ce(this,aa).cancel({revert:!0}):Ce(this,aa).cancelRetry()),this.scheduleGc()),Ce(this,cr).notify({type:"observerRemoved",query:this,observer:s}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||ls(this,Er,wi).call(this,{type:"invalidate"})}fetch(s,n){var o,d,h;if(this.state.fetchStatus!=="idle"){if(this.state.data!==void 0&&(n!=null&&n.cancelRefetch))this.cancel({silent:!0});else if(Ce(this,aa))return Ce(this,aa).continueRetry(),Ce(this,aa).promise}if(s&&this.setOptions(s),!this.options.queryFn){const u=this.observers.find(m=>m.options.queryFn);u&&this.setOptions(u.options)}const a=new AbortController,r=u=>{Object.defineProperty(u,"signal",{enumerable:!0,get:()=>(Nt(this,No,!0),a.signal)})},i=()=>{const u=vC(this.options,n),m={queryKey:this.queryKey,meta:this.meta};return r(m),Nt(this,No,!1),this.options.persister?this.options.persister(u,m,this):u(m)},l={fetchOptions:n,options:this.options,queryKey:this.queryKey,state:this.state,fetchFn:i};r(l),(o=this.options.behavior)==null||o.onFetch(l,this),Nt(this,Bc,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((d=l.fetchOptions)==null?void 0:d.meta))&&ls(this,Er,wi).call(this,{type:"fetch",meta:(h=l.fetchOptions)==null?void 0:h.meta});const c=u=>{var m,p,g,x;Ff(u)&&u.silent||ls(this,Er,wi).call(this,{type:"error",error:u}),Ff(u)||((p=(m=Ce(this,cr).config).onError)==null||p.call(m,u,this),(x=(g=Ce(this,cr).config).onSettled)==null||x.call(g,this.state.data,u,this)),this.scheduleGc()};return Nt(this,aa,bC({initialPromise:n==null?void 0:n.initialPromise,fn:l.fetchFn,abort:a.abort.bind(a),onSuccess:u=>{var m,p,g,x;if(u===void 0){c(new Error(`${this.queryHash} data is undefined`));return}try{this.setData(u)}catch(v){c(v);return}(p=(m=Ce(this,cr).config).onSuccess)==null||p.call(m,u,this),(x=(g=Ce(this,cr).config).onSettled)==null||x.call(g,u,this.state.error,this),this.scheduleGc()},onError:c,onFail:(u,m)=>{ls(this,Er,wi).call(this,{type:"failed",failureCount:u,error:m})},onPause:()=>{ls(this,Er,wi).call(this,{type:"pause"})},onContinue:()=>{ls(this,Er,wi).call(this,{type:"continue"})},retry:l.options.retry,retryDelay:l.options.retryDelay,networkMode:l.options.networkMode,canRun:()=>!0})),Ce(this,aa).start()}},$c=new WeakMap,Bc=new WeakMap,cr=new WeakMap,aa=new WeakMap,am=new WeakMap,No=new WeakMap,Er=new WeakSet,wi=function(s){const n=a=>{switch(s.type){case"failed":return{...a,fetchFailureCount:s.failureCount,fetchFailureReason:s.error};case"pause":return{...a,fetchStatus:"paused"};case"continue":return{...a,fetchStatus:"fetching"};case"fetch":return{...a,...SC(a.data,this.options),fetchMeta:s.meta??null};case"success":return{...a,data:s.data,dataUpdateCount:a.dataUpdateCount+1,dataUpdatedAt:s.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!s.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const r=s.error;return Ff(r)&&r.revert&&Ce(this,Bc)?{...Ce(this,Bc),fetchStatus:"idle"}:{...a,error:r,errorUpdateCount:a.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:a.fetchFailureCount+1,fetchFailureReason:r,fetchStatus:"idle",status:"error"};case"invalidate":return{...a,isInvalidated:!0};case"setState":return{...a,...s.state}}};this.state=n(this.state),Bn.batch(()=>{this.observers.forEach(a=>{a.onQueryUpdate()}),Ce(this,cr).notify({query:this,type:"updated",action:s})})},q1);function SC(t,s){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:yC(s.networkMode)?"fetching":"paused",...t===void 0&&{error:null,status:"pending"}}}function K_(t){const s=typeof t.initialData=="function"?t.initialData():t.initialData,n=s!==void 0,a=n?typeof t.initialDataUpdatedAt=="function"?t.initialDataUpdatedAt():t.initialDataUpdatedAt:0;return{data:s,dataUpdateCount:0,dataUpdatedAt:n?a??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:n?"success":"pending",fetchStatus:"idle"}}var Jr,$1,Y_=($1=class extends Nd{constructor(s={}){super();$t(this,Jr);this.config=s,Nt(this,Jr,new Map)}build(s,n,a){const r=n.queryKey,i=n.queryHash??gy(r,n);let l=this.get(i);return l||(l=new H_({cache:this,queryKey:r,queryHash:i,options:s.defaultQueryOptions(n),state:a,defaultOptions:s.getQueryDefaults(r)}),this.add(l)),l}add(s){Ce(this,Jr).has(s.queryHash)||(Ce(this,Jr).set(s.queryHash,s),this.notify({type:"added",query:s}))}remove(s){const n=Ce(this,Jr).get(s.queryHash);n&&(s.destroy(),n===s&&Ce(this,Jr).delete(s.queryHash),this.notify({type:"removed",query:s}))}clear(){Bn.batch(()=>{this.getAll().forEach(s=>{this.remove(s)})})}get(s){return Ce(this,Jr).get(s)}getAll(){return[...Ce(this,Jr).values()]}find(s){const n={exact:!0,...s};return this.getAll().find(a=>jb(n,a))}findAll(s={}){const n=this.getAll();return Object.keys(s).length>0?n.filter(a=>jb(s,a)):n}notify(s){Bn.batch(()=>{this.listeners.forEach(n=>{n(s)})})}onFocus(){Bn.batch(()=>{this.getAll().forEach(s=>{s.onFocus()})})}onOnline(){Bn.batch(()=>{this.getAll().forEach(s=>{s.onOnline()})})}},Jr=new WeakMap,$1),ei,xa,bo,ti,rl,B1,Q_=(B1=class extends wC{constructor(s){super();$t(this,ti);$t(this,ei);$t(this,xa);$t(this,bo);this.mutationId=s.mutationId,Nt(this,xa,s.mutationCache),Nt(this,ei,[]),this.state=s.state||CC(),this.setOptions(s.options),this.scheduleGc()}setOptions(s){this.options=s,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(s){Ce(this,ei).includes(s)||(Ce(this,ei).push(s),this.clearGcTimeout(),Ce(this,xa).notify({type:"observerAdded",mutation:this,observer:s}))}removeObserver(s){Nt(this,ei,Ce(this,ei).filter(n=>n!==s)),this.scheduleGc(),Ce(this,xa).notify({type:"observerRemoved",mutation:this,observer:s})}optionalRemove(){Ce(this,ei).length||(this.state.status==="pending"?this.scheduleGc():Ce(this,xa).remove(this))}continue(){var s;return((s=Ce(this,bo))==null?void 0:s.continue())??this.execute(this.state.variables)}async execute(s){var r,i,l,c,o,d,h,u,m,p,g,x,v,y,f,b,j,S,k,T;Nt(this,bo,bC({fn:()=>this.options.mutationFn?this.options.mutationFn(s):Promise.reject(new Error("No mutationFn found")),onFail:(A,C)=>{ls(this,ti,rl).call(this,{type:"failed",failureCount:A,error:C})},onPause:()=>{ls(this,ti,rl).call(this,{type:"pause"})},onContinue:()=>{ls(this,ti,rl).call(this,{type:"continue"})},retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>Ce(this,xa).canRun(this)}));const n=this.state.status==="pending",a=!Ce(this,bo).canStart();try{if(!n){ls(this,ti,rl).call(this,{type:"pending",variables:s,isPaused:a}),await((i=(r=Ce(this,xa).config).onMutate)==null?void 0:i.call(r,s,this));const C=await((c=(l=this.options).onMutate)==null?void 0:c.call(l,s));C!==this.state.context&&ls(this,ti,rl).call(this,{type:"pending",context:C,variables:s,isPaused:a})}const A=await Ce(this,bo).start();return await((d=(o=Ce(this,xa).config).onSuccess)==null?void 0:d.call(o,A,s,this.state.context,this)),await((u=(h=this.options).onSuccess)==null?void 0:u.call(h,A,s,this.state.context)),await((p=(m=Ce(this,xa).config).onSettled)==null?void 0:p.call(m,A,null,this.state.variables,this.state.context,this)),await((x=(g=this.options).onSettled)==null?void 0:x.call(g,A,null,s,this.state.context)),ls(this,ti,rl).call(this,{type:"success",data:A}),A}catch(A){try{throw await((y=(v=Ce(this,xa).config).onError)==null?void 0:y.call(v,A,s,this.state.context,this)),await((b=(f=this.options).onError)==null?void 0:b.call(f,A,s,this.state.context)),await((S=(j=Ce(this,xa).config).onSettled)==null?void 0:S.call(j,void 0,A,this.state.variables,this.state.context,this)),await((T=(k=this.options).onSettled)==null?void 0:T.call(k,void 0,A,s,this.state.context)),A}finally{ls(this,ti,rl).call(this,{type:"error",error:A})}}finally{Ce(this,xa).runNext(this)}}},ei=new WeakMap,xa=new WeakMap,bo=new WeakMap,ti=new WeakSet,rl=function(s){const n=a=>{switch(s.type){case"failed":return{...a,failureCount:s.failureCount,failureReason:s.error};case"pause":return{...a,isPaused:!0};case"continue":return{...a,isPaused:!1};case"pending":return{...a,context:s.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:s.isPaused,status:"pending",variables:s.variables,submittedAt:Date.now()};case"success":return{...a,data:s.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...a,data:void 0,error:s.error,failureCount:a.failureCount+1,failureReason:s.error,isPaused:!1,status:"error"}}};this.state=n(this.state),Bn.batch(()=>{Ce(this,ei).forEach(a=>{a.onMutationUpdate(s)}),Ce(this,xa).notify({mutation:this,type:"updated",action:s})})},B1);function CC(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var Wa,rm,U1,Z_=(U1=class extends Nd{constructor(s={}){super();$t(this,Wa);$t(this,rm);this.config=s,Nt(this,Wa,new Map),Nt(this,rm,Date.now())}build(s,n,a){const r=new Q_({mutationCache:this,mutationId:++Fm(this,rm)._,options:s.defaultMutationOptions(n),state:a});return this.add(r),r}add(s){const n=sh(s),a=Ce(this,Wa).get(n)??[];a.push(s),Ce(this,Wa).set(n,a),this.notify({type:"added",mutation:s})}remove(s){var a;const n=sh(s);if(Ce(this,Wa).has(n)){const r=(a=Ce(this,Wa).get(n))==null?void 0:a.filter(i=>i!==s);r&&(r.length===0?Ce(this,Wa).delete(n):Ce(this,Wa).set(n,r))}this.notify({type:"removed",mutation:s})}canRun(s){var a;const n=(a=Ce(this,Wa).get(sh(s)))==null?void 0:a.find(r=>r.state.status==="pending");return!n||n===s}runNext(s){var a;const n=(a=Ce(this,Wa).get(sh(s)))==null?void 0:a.find(r=>r!==s&&r.state.isPaused);return(n==null?void 0:n.continue())??Promise.resolve()}clear(){Bn.batch(()=>{this.getAll().forEach(s=>{this.remove(s)})})}getAll(){return[...Ce(this,Wa).values()].flat()}find(s){const n={exact:!0,...s};return this.getAll().find(a=>vb(n,a))}findAll(s={}){return this.getAll().filter(n=>vb(s,n))}notify(s){Bn.batch(()=>{this.listeners.forEach(n=>{n(s)})})}resumePausedMutations(){const s=this.getAll().filter(n=>n.state.isPaused);return Bn.batch(()=>Promise.all(s.map(n=>n.continue().catch(dr))))}},Wa=new WeakMap,rm=new WeakMap,U1);function sh(t){var s;return((s=t.options.scope)==null?void 0:s.id)??String(t.mutationId)}function bb(t){return{onFetch:(s,n)=>{var h,u,m,p,g;const a=s.options,r=(m=(u=(h=s.fetchOptions)==null?void 0:h.meta)==null?void 0:u.fetchMore)==null?void 0:m.direction,i=((p=s.state.data)==null?void 0:p.pages)||[],l=((g=s.state.data)==null?void 0:g.pageParams)||[];let c={pages:[],pageParams:[]},o=0;const d=async()=>{let x=!1;const v=b=>{Object.defineProperty(b,"signal",{enumerable:!0,get:()=>(s.signal.aborted?x=!0:s.signal.addEventListener("abort",()=>{x=!0}),s.signal)})},y=vC(s.options,s.fetchOptions),f=async(b,j,S)=>{if(x)return Promise.reject();if(j==null&&b.pages.length)return Promise.resolve(b);const k={queryKey:s.queryKey,pageParam:j,direction:S?"backward":"forward",meta:s.options.meta};v(k);const T=await y(k),{maxPages:A}=s.options,C=S?U_:B_;return{pages:C(b.pages,T,A),pageParams:C(b.pageParams,j,A)}};if(r&&i.length){const b=r==="backward",j=b?X_:wb,S={pages:i,pageParams:l},k=j(a,S);c=await f(S,k,b)}else{const b=t??i.length;do{const j=o===0?l[0]??a.initialPageParam:wb(a,c);if(o>0&&j==null)break;c=await f(c,j),o++}while(o<b)}return c};s.options.persister?s.fetchFn=()=>{var x,v;return(v=(x=s.options).persister)==null?void 0:v.call(x,d,{queryKey:s.queryKey,meta:s.options.meta,signal:s.signal},n)}:s.fetchFn=d}}}function wb(t,{pages:s,pageParams:n}){const a=s.length-1;return s.length>0?t.getNextPageParam(s[a],s,n[a],n):void 0}function X_(t,{pages:s,pageParams:n}){var a;return s.length>0?(a=t.getPreviousPageParam)==null?void 0:a.call(t,s[0],s,n[0],n):void 0}var xn,vl,yl,Uc,zc,Nl,Vc,Gc,z1,J_=(z1=class{constructor(t={}){$t(this,xn);$t(this,vl);$t(this,yl);$t(this,Uc);$t(this,zc);$t(this,Nl);$t(this,Vc);$t(this,Gc);Nt(this,xn,t.queryCache||new Y_),Nt(this,vl,t.mutationCache||new Z_),Nt(this,yl,t.defaultOptions||{}),Nt(this,Uc,new Map),Nt(this,zc,new Map),Nt(this,Nl,0)}mount(){Fm(this,Nl)._++,Ce(this,Nl)===1&&(Nt(this,Vc,vy.subscribe(async t=>{t&&(await this.resumePausedMutations(),Ce(this,xn).onFocus())})),Nt(this,Gc,ux.subscribe(async t=>{t&&(await this.resumePausedMutations(),Ce(this,xn).onOnline())})))}unmount(){var t,s;Fm(this,Nl)._--,Ce(this,Nl)===0&&((t=Ce(this,Vc))==null||t.call(this),Nt(this,Vc,void 0),(s=Ce(this,Gc))==null||s.call(this),Nt(this,Gc,void 0))}isFetching(t){return Ce(this,xn).findAll({...t,fetchStatus:"fetching"}).length}isMutating(t){return Ce(this,vl).findAll({...t,status:"pending"}).length}getQueryData(t){var n;const s=this.defaultQueryOptions({queryKey:t});return(n=Ce(this,xn).get(s.queryHash))==null?void 0:n.state.data}ensureQueryData(t){const s=this.getQueryData(t.queryKey);if(s===void 0)return this.fetchQuery(t);{const n=this.defaultQueryOptions(t),a=Ce(this,xn).build(this,n);return t.revalidateIfStale&&a.isStaleByTime(Ec(n.staleTime,a))&&this.prefetchQuery(n),Promise.resolve(s)}}getQueriesData(t){return Ce(this,xn).findAll(t).map(({queryKey:s,state:n})=>{const a=n.data;return[s,a]})}setQueryData(t,s,n){const a=this.defaultQueryOptions({queryKey:t}),r=Ce(this,xn).get(a.queryHash),i=r==null?void 0:r.state.data,l=q_(s,i);if(l!==void 0)return Ce(this,xn).build(this,a).setData(l,{...n,manual:!0})}setQueriesData(t,s,n){return Bn.batch(()=>Ce(this,xn).findAll(t).map(({queryKey:a})=>[a,this.setQueryData(a,s,n)]))}getQueryState(t){var n;const s=this.defaultQueryOptions({queryKey:t});return(n=Ce(this,xn).get(s.queryHash))==null?void 0:n.state}removeQueries(t){const s=Ce(this,xn);Bn.batch(()=>{s.findAll(t).forEach(n=>{s.remove(n)})})}resetQueries(t,s){const n=Ce(this,xn),a={type:"active",...t};return Bn.batch(()=>(n.findAll(t).forEach(r=>{r.reset()}),this.refetchQueries(a,s)))}cancelQueries(t={},s={}){const n={revert:!0,...s},a=Bn.batch(()=>Ce(this,xn).findAll(t).map(r=>r.cancel(n)));return Promise.all(a).then(dr).catch(dr)}invalidateQueries(t={},s={}){return Bn.batch(()=>{if(Ce(this,xn).findAll(t).forEach(a=>{a.invalidate()}),t.refetchType==="none")return Promise.resolve();const n={...t,type:t.refetchType??t.type??"active"};return this.refetchQueries(n,s)})}refetchQueries(t={},s){const n={...s,cancelRefetch:(s==null?void 0:s.cancelRefetch)??!0},a=Bn.batch(()=>Ce(this,xn).findAll(t).filter(r=>!r.isDisabled()).map(r=>{let i=r.fetch(void 0,n);return n.throwOnError||(i=i.catch(dr)),r.state.fetchStatus==="paused"?Promise.resolve():i}));return Promise.all(a).then(dr)}fetchQuery(t){const s=this.defaultQueryOptions(t);s.retry===void 0&&(s.retry=!1);const n=Ce(this,xn).build(this,s);return n.isStaleByTime(Ec(s.staleTime,n))?n.fetch(s):Promise.resolve(n.state.data)}prefetchQuery(t){return this.fetchQuery(t).then(dr).catch(dr)}fetchInfiniteQuery(t){return t.behavior=bb(t.pages),this.fetchQuery(t)}prefetchInfiniteQuery(t){return this.fetchInfiniteQuery(t).then(dr).catch(dr)}ensureInfiniteQueryData(t){return t.behavior=bb(t.pages),this.ensureQueryData(t)}resumePausedMutations(){return ux.isOnline()?Ce(this,vl).resumePausedMutations():Promise.resolve()}getQueryCache(){return Ce(this,xn)}getMutationCache(){return Ce(this,vl)}getDefaultOptions(){return Ce(this,yl)}setDefaultOptions(t){Nt(this,yl,t)}setQueryDefaults(t,s){Ce(this,Uc).set(Lo(t),{queryKey:t,defaultOptions:s})}getQueryDefaults(t){const s=[...Ce(this,Uc).values()];let n={};return s.forEach(a=>{Lu(t,a.queryKey)&&(n={...n,...a.defaultOptions})}),n}setMutationDefaults(t,s){Ce(this,zc).set(Lo(t),{mutationKey:t,defaultOptions:s})}getMutationDefaults(t){const s=[...Ce(this,zc).values()];let n={};return s.forEach(a=>{Lu(t,a.mutationKey)&&(n={...n,...a.defaultOptions})}),n}defaultQueryOptions(t){if(t._defaulted)return t;const s={...Ce(this,yl).queries,...this.getQueryDefaults(t.queryKey),...t,_defaulted:!0};return s.queryHash||(s.queryHash=gy(s.queryKey,s)),s.refetchOnReconnect===void 0&&(s.refetchOnReconnect=s.networkMode!=="always"),s.throwOnError===void 0&&(s.throwOnError=!!s.suspense),!s.networkMode&&s.persister&&(s.networkMode="offlineFirst"),s.enabled!==!0&&s.queryFn===jy&&(s.enabled=!1),s}defaultMutationOptions(t){return t!=null&&t._defaulted?t:{...Ce(this,yl).mutations,...(t==null?void 0:t.mutationKey)&&this.getMutationDefaults(t.mutationKey),...t,_defaulted:!0}}clear(){Ce(this,xn).clear(),Ce(this,vl).clear()}},xn=new WeakMap,vl=new WeakMap,yl=new WeakMap,Uc=new WeakMap,zc=new WeakMap,Nl=new WeakMap,Vc=new WeakMap,Gc=new WeakMap,z1),Ta,fs,im,pa,wo,Wc,bl,si,lm,Hc,Kc,So,Co,wl,Yc,Ms,su,bj,wj,Sj,Cj,kj,Aj,Pj,kC,V1,eR=(V1=class extends Nd{constructor(s,n){super();$t(this,Ms);$t(this,Ta);$t(this,fs);$t(this,im);$t(this,pa);$t(this,wo);$t(this,Wc);$t(this,bl);$t(this,si);$t(this,lm);$t(this,Hc);$t(this,Kc);$t(this,So);$t(this,Co);$t(this,wl);$t(this,Yc,new Set);this.options=n,Nt(this,Ta,s),Nt(this,si,null),Nt(this,bl,Nj()),this.options.experimental_prefetchInRender||Ce(this,bl).reject(new Error("experimental_prefetchInRender feature flag is not enabled")),this.bindMethods(),this.setOptions(n)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(Ce(this,fs).addObserver(this),Sb(Ce(this,fs),this.options)?ls(this,Ms,su).call(this):this.updateResult(),ls(this,Ms,Cj).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return Tj(Ce(this,fs),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return Tj(Ce(this,fs),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,ls(this,Ms,kj).call(this),ls(this,Ms,Aj).call(this),Ce(this,fs).removeObserver(this)}setOptions(s,n){const a=this.options,r=Ce(this,fs);if(this.options=Ce(this,Ta).defaultQueryOptions(s),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof Rr(this.options.enabled,Ce(this,fs))!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");ls(this,Ms,Pj).call(this),Ce(this,fs).setOptions(this.options),a._defaulted&&!dx(this.options,a)&&Ce(this,Ta).getQueryCache().notify({type:"observerOptionsUpdated",query:Ce(this,fs),observer:this});const i=this.hasListeners();i&&Cb(Ce(this,fs),r,this.options,a)&&ls(this,Ms,su).call(this),this.updateResult(n),i&&(Ce(this,fs)!==r||Rr(this.options.enabled,Ce(this,fs))!==Rr(a.enabled,Ce(this,fs))||Ec(this.options.staleTime,Ce(this,fs))!==Ec(a.staleTime,Ce(this,fs)))&&ls(this,Ms,bj).call(this);const l=ls(this,Ms,wj).call(this);i&&(Ce(this,fs)!==r||Rr(this.options.enabled,Ce(this,fs))!==Rr(a.enabled,Ce(this,fs))||l!==Ce(this,wl))&&ls(this,Ms,Sj).call(this,l)}getOptimisticResult(s){const n=Ce(this,Ta).getQueryCache().build(Ce(this,Ta),s),a=this.createResult(n,s);return sR(this,a)&&(Nt(this,pa,a),Nt(this,Wc,this.options),Nt(this,wo,Ce(this,fs).state)),a}getCurrentResult(){return Ce(this,pa)}trackResult(s,n){const a={};return Object.keys(s).forEach(r=>{Object.defineProperty(a,r,{configurable:!1,enumerable:!0,get:()=>(this.trackProp(r),n==null||n(r),s[r])})}),a}trackProp(s){Ce(this,Yc).add(s)}getCurrentQuery(){return Ce(this,fs)}refetch({...s}={}){return this.fetch({...s})}fetchOptimistic(s){const n=Ce(this,Ta).defaultQueryOptions(s),a=Ce(this,Ta).getQueryCache().build(Ce(this,Ta),n);return a.fetch().then(()=>this.createResult(a,n))}fetch(s){return ls(this,Ms,su).call(this,{...s,cancelRefetch:s.cancelRefetch??!0}).then(()=>(this.updateResult(),Ce(this,pa)))}createResult(s,n){var A;const a=Ce(this,fs),r=this.options,i=Ce(this,pa),l=Ce(this,wo),c=Ce(this,Wc),d=s!==a?s.state:Ce(this,im),{state:h}=s;let u={...h},m=!1,p;if(n._optimisticResults){const C=this.hasListeners(),w=!C&&Sb(s,n),P=C&&Cb(s,a,n,r);(w||P)&&(u={...u,...SC(h.data,s.options)}),n._optimisticResults==="isRestoring"&&(u.fetchStatus="idle")}let{error:g,errorUpdatedAt:x,status:v}=u;if(n.select&&u.data!==void 0)if(i&&u.data===(l==null?void 0:l.data)&&n.select===Ce(this,lm))p=Ce(this,Hc);else try{Nt(this,lm,n.select),p=n.select(u.data),p=yj(i==null?void 0:i.data,p,n),Nt(this,Hc,p),Nt(this,si,null)}catch(C){Nt(this,si,C)}else p=u.data;if(n.placeholderData!==void 0&&p===void 0&&v==="pending"){let C;if(i!=null&&i.isPlaceholderData&&n.placeholderData===(c==null?void 0:c.placeholderData))C=i.data;else if(C=typeof n.placeholderData=="function"?n.placeholderData((A=Ce(this,Kc))==null?void 0:A.state.data,Ce(this,Kc)):n.placeholderData,n.select&&C!==void 0)try{C=n.select(C),Nt(this,si,null)}catch(w){Nt(this,si,w)}C!==void 0&&(v="success",p=yj(i==null?void 0:i.data,C,n),m=!0)}Ce(this,si)&&(g=Ce(this,si),p=Ce(this,Hc),x=Date.now(),v="error");const y=u.fetchStatus==="fetching",f=v==="pending",b=v==="error",j=f&&y,S=p!==void 0,T={status:v,fetchStatus:u.fetchStatus,isPending:f,isSuccess:v==="success",isError:b,isInitialLoading:j,isLoading:j,data:p,dataUpdatedAt:u.dataUpdatedAt,error:g,errorUpdatedAt:x,failureCount:u.fetchFailureCount,failureReason:u.fetchFailureReason,errorUpdateCount:u.errorUpdateCount,isFetched:u.dataUpdateCount>0||u.errorUpdateCount>0,isFetchedAfterMount:u.dataUpdateCount>d.dataUpdateCount||u.errorUpdateCount>d.errorUpdateCount,isFetching:y,isRefetching:y&&!f,isLoadingError:b&&!S,isPaused:u.fetchStatus==="paused",isPlaceholderData:m,isRefetchError:b&&S,isStale:yy(s,n),refetch:this.refetch,promise:Ce(this,bl)};if(this.options.experimental_prefetchInRender){const C=M=>{T.status==="error"?M.reject(T.error):T.data!==void 0&&M.resolve(T.data)},w=()=>{const M=Nt(this,bl,T.promise=Nj());C(M)},P=Ce(this,bl);switch(P.status){case"pending":s.queryHash===a.queryHash&&C(P);break;case"fulfilled":(T.status==="error"||T.data!==P.value)&&w();break;case"rejected":(T.status!=="error"||T.error!==P.reason)&&w();break}}return T}updateResult(s){const n=Ce(this,pa),a=this.createResult(Ce(this,fs),this.options);if(Nt(this,wo,Ce(this,fs).state),Nt(this,Wc,this.options),Ce(this,wo).data!==void 0&&Nt(this,Kc,Ce(this,fs)),dx(a,n))return;Nt(this,pa,a);const r={},i=()=>{if(!n)return!0;const{notifyOnChangeProps:l}=this.options,c=typeof l=="function"?l():l;if(c==="all"||!c&&!Ce(this,Yc).size)return!0;const o=new Set(c??Ce(this,Yc));return this.options.throwOnError&&o.add("error"),Object.keys(Ce(this,pa)).some(d=>{const h=d;return Ce(this,pa)[h]!==n[h]&&o.has(h)})};(s==null?void 0:s.listeners)!==!1&&i()&&(r.listeners=!0),ls(this,Ms,kC).call(this,{...r,...s})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&ls(this,Ms,Cj).call(this)}},Ta=new WeakMap,fs=new WeakMap,im=new WeakMap,pa=new WeakMap,wo=new WeakMap,Wc=new WeakMap,bl=new WeakMap,si=new WeakMap,lm=new WeakMap,Hc=new WeakMap,Kc=new WeakMap,So=new WeakMap,Co=new WeakMap,wl=new WeakMap,Yc=new WeakMap,Ms=new WeakSet,su=function(s){ls(this,Ms,Pj).call(this);let n=Ce(this,fs).fetch(this.options,s);return s!=null&&s.throwOnError||(n=n.catch(dr)),n},bj=function(){ls(this,Ms,kj).call(this);const s=Ec(this.options.staleTime,Ce(this,fs));if(Io||Ce(this,pa).isStale||!jj(s))return;const a=gC(Ce(this,pa).dataUpdatedAt,s)+1;Nt(this,So,setTimeout(()=>{Ce(this,pa).isStale||this.updateResult()},a))},wj=function(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(Ce(this,fs)):this.options.refetchInterval)??!1},Sj=function(s){ls(this,Ms,Aj).call(this),Nt(this,wl,s),!(Io||Rr(this.options.enabled,Ce(this,fs))===!1||!jj(Ce(this,wl))||Ce(this,wl)===0)&&Nt(this,Co,setInterval(()=>{(this.options.refetchIntervalInBackground||vy.isFocused())&&ls(this,Ms,su).call(this)},Ce(this,wl)))},Cj=function(){ls(this,Ms,bj).call(this),ls(this,Ms,Sj).call(this,ls(this,Ms,wj).call(this))},kj=function(){Ce(this,So)&&(clearTimeout(Ce(this,So)),Nt(this,So,void 0))},Aj=function(){Ce(this,Co)&&(clearInterval(Ce(this,Co)),Nt(this,Co,void 0))},Pj=function(){const s=Ce(this,Ta).getQueryCache().build(Ce(this,Ta),this.options);if(s===Ce(this,fs))return;const n=Ce(this,fs);Nt(this,fs,s),Nt(this,im,s.state),this.hasListeners()&&(n==null||n.removeObserver(this),s.addObserver(this))},kC=function(s){Bn.batch(()=>{s.listeners&&this.listeners.forEach(n=>{n(Ce(this,pa))}),Ce(this,Ta).getQueryCache().notify({query:Ce(this,fs),type:"observerResultsUpdated"})})},V1);function tR(t,s){return Rr(s.enabled,t)!==!1&&t.state.data===void 0&&!(t.state.status==="error"&&s.retryOnMount===!1)}function Sb(t,s){return tR(t,s)||t.state.data!==void 0&&Tj(t,s,s.refetchOnMount)}function Tj(t,s,n){if(Rr(s.enabled,t)!==!1){const a=typeof n=="function"?n(t):n;return a==="always"||a!==!1&&yy(t,s)}return!1}function Cb(t,s,n,a){return(t!==s||Rr(a.enabled,t)===!1)&&(!n.suspense||t.state.status!=="error")&&yy(t,n)}function yy(t,s){return Rr(s.enabled,t)!==!1&&t.isStaleByTime(Ec(s.staleTime,t))}function sR(t,s){return!dx(t.getCurrentResult(),s)}var Sl,Cl,Ea,Mi,qi,Th,Ej,G1,nR=(G1=class extends Nd{constructor(n,a){super();$t(this,qi);$t(this,Sl);$t(this,Cl);$t(this,Ea);$t(this,Mi);Nt(this,Sl,n),this.setOptions(a),this.bindMethods(),ls(this,qi,Th).call(this)}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(n){var r;const a=this.options;this.options=Ce(this,Sl).defaultMutationOptions(n),dx(this.options,a)||Ce(this,Sl).getMutationCache().notify({type:"observerOptionsUpdated",mutation:Ce(this,Ea),observer:this}),a!=null&&a.mutationKey&&this.options.mutationKey&&Lo(a.mutationKey)!==Lo(this.options.mutationKey)?this.reset():((r=Ce(this,Ea))==null?void 0:r.state.status)==="pending"&&Ce(this,Ea).setOptions(this.options)}onUnsubscribe(){var n;this.hasListeners()||(n=Ce(this,Ea))==null||n.removeObserver(this)}onMutationUpdate(n){ls(this,qi,Th).call(this),ls(this,qi,Ej).call(this,n)}getCurrentResult(){return Ce(this,Cl)}reset(){var n;(n=Ce(this,Ea))==null||n.removeObserver(this),Nt(this,Ea,void 0),ls(this,qi,Th).call(this),ls(this,qi,Ej).call(this)}mutate(n,a){var r;return Nt(this,Mi,a),(r=Ce(this,Ea))==null||r.removeObserver(this),Nt(this,Ea,Ce(this,Sl).getMutationCache().build(Ce(this,Sl),this.options)),Ce(this,Ea).addObserver(this),Ce(this,Ea).execute(n)}},Sl=new WeakMap,Cl=new WeakMap,Ea=new WeakMap,Mi=new WeakMap,qi=new WeakSet,Th=function(){var a;const n=((a=Ce(this,Ea))==null?void 0:a.state)??CC();Nt(this,Cl,{...n,isPending:n.status==="pending",isSuccess:n.status==="success",isError:n.status==="error",isIdle:n.status==="idle",mutate:this.mutate,reset:this.reset})},Ej=function(n){Bn.batch(()=>{var a,r,i,l,c,o,d,h;if(Ce(this,Mi)&&this.hasListeners()){const u=Ce(this,Cl).variables,m=Ce(this,Cl).context;(n==null?void 0:n.type)==="success"?((r=(a=Ce(this,Mi)).onSuccess)==null||r.call(a,n.data,u,m),(l=(i=Ce(this,Mi)).onSettled)==null||l.call(i,n.data,null,u,m)):(n==null?void 0:n.type)==="error"&&((o=(c=Ce(this,Mi)).onError)==null||o.call(c,n.error,u,m),(h=(d=Ce(this,Mi)).onSettled)==null||h.call(d,void 0,n.error,u,m))}this.listeners.forEach(u=>{u(Ce(this,Cl))})})},G1),AC=N.createContext(void 0),Tt=t=>{const s=N.useContext(AC);if(!s)throw new Error("No QueryClient set, use QueryClientProvider to set one");return s},aR=({client:t,children:s})=>(N.useEffect(()=>(t.mount(),()=>{t.unmount()}),[t]),e.jsx(AC.Provider,{value:t,children:s})),PC=N.createContext(!1),rR=()=>N.useContext(PC);PC.Provider;function iR(){let t=!1;return{clearReset:()=>{t=!1},reset:()=>{t=!0},isReset:()=>t}}var lR=N.createContext(iR()),oR=()=>N.useContext(lR);function TC(t,s){return typeof t=="function"?t(...s):!!t}function Mj(){}var cR=(t,s)=>{(t.suspense||t.throwOnError||t.experimental_prefetchInRender)&&(s.isReset()||(t.retryOnMount=!1))},dR=t=>{N.useEffect(()=>{t.clearReset()},[t])},uR=({result:t,errorResetBoundary:s,throwOnError:n,query:a})=>t.isError&&!s.isReset()&&!t.isFetching&&a&&TC(n,[t.error,a]),mR=t=>{t.suspense&&(t.staleTime===void 0&&(t.staleTime=1e3),typeof t.gcTime=="number"&&(t.gcTime=Math.max(t.gcTime,1e3)))},hR=(t,s)=>t.isLoading&&t.isFetching&&!s,xR=(t,s)=>(t==null?void 0:t.suspense)&&s.isPending,kb=(t,s,n)=>s.fetchOptimistic(t).catch(()=>{n.clearReset()});function pR(t,s,n){var h,u,m,p,g;const a=Tt(),r=rR(),i=oR(),l=a.defaultQueryOptions(t);(u=(h=a.getDefaultOptions().queries)==null?void 0:h._experimental_beforeQuery)==null||u.call(h,l),l._optimisticResults=r?"isRestoring":"optimistic",mR(l),cR(l,i),dR(i);const c=!a.getQueryCache().get(l.queryHash),[o]=N.useState(()=>new s(a,l)),d=o.getOptimisticResult(l);if(N.useSyncExternalStore(N.useCallback(x=>{const v=r?Mj:o.subscribe(Bn.batchCalls(x));return o.updateResult(),v},[o,r]),()=>o.getCurrentResult(),()=>o.getCurrentResult()),N.useEffect(()=>{o.setOptions(l,{listeners:!1})},[l,o]),xR(l,d))throw kb(l,o,i);if(uR({result:d,errorResetBoundary:i,throwOnError:l.throwOnError,query:a.getQueryCache().get(l.queryHash)}))throw d.error;if((p=(m=a.getDefaultOptions().queries)==null?void 0:m._experimental_afterQuery)==null||p.call(m,l,d),l.experimental_prefetchInRender&&!Io&&hR(d,r)){const x=c?kb(l,o,i):(g=a.getQueryCache().get(l.queryHash))==null?void 0:g.promise;x==null||x.catch(Mj).finally(()=>{o.updateResult()})}return l.notifyOnChangeProps?d:o.trackResult(d)}function ke(t,s){return pR(t,eR)}function Xe(t,s){const n=Tt(),[a]=N.useState(()=>new nR(n,t));N.useEffect(()=>{a.setOptions(t)},[a,t]);const r=N.useSyncExternalStore(N.useCallback(l=>a.subscribe(Bn.batchCalls(l)),[a]),()=>a.getCurrentResult(),()=>a.getCurrentResult()),i=N.useCallback((l,c)=>{a.mutate(l,c).catch(Mj)},[a]);if(r.error&&TC(a.options.throwOnError,[r.error]))throw r.error;return{...r,mutate:i,mutateAsync:r.mutate}}async function EC(t){if(!t.ok){const s=await t.text()||t.statusText;throw new Error(`${t.status}: ${s}`)}}async function xe(t,s){const{method:n="GET",body:a}=s||{},r=localStorage.getItem("token"),i=await fetch(t,{method:n,headers:{...a&&{"Content-Type":"application/json"},...r&&{Authorization:`Bearer ${r}`}},body:a?JSON.stringify(a):void 0,credentials:"include"});return await EC(i),await i.json()}const fR=({on401:t})=>async({queryKey:s})=>{const n=localStorage.getItem("token"),a=await fetch(s.join("/"),{credentials:"include",headers:{...n&&{Authorization:`Bearer ${n}`}}});return t==="returnNull"&&a.status===401?null:(await EC(a),await a.json())},MC=new J_({defaultOptions:{queries:{queryFn:fR({on401:"returnNull"}),refetchInterval:!1,refetchOnWindowFocus:!1,staleTime:5*60*1e3,retry:(t,s)=>{var n;return(n=s==null?void 0:s.message)!=null&&n.includes("401")?!1:t<2}},mutations:{retry:!1}}}),gR=5,jR=500;let qf=0;function vR(){return qf=(qf+1)%Number.MAX_SAFE_INTEGER,qf.toString()}const $f=new Map,Ab=t=>{if($f.has(t))return;const s=setTimeout(()=>{$f.delete(t),gu({type:"REMOVE_TOAST",toastId:t})},jR);$f.set(t,s)},yR=(t,s)=>{switch(s.type){case"ADD_TOAST":return{...t,toasts:[s.toast,...t.toasts].slice(0,gR)};case"UPDATE_TOAST":return{...t,toasts:t.toasts.map(n=>n.id===s.toast.id?{...n,...s.toast}:n)};case"DISMISS_TOAST":{const{toastId:n}=s;return n?Ab(n):t.toasts.forEach(a=>{Ab(a.id)}),{...t,toasts:t.toasts.map(a=>a.id===n||n===void 0?{...a,open:!1}:a)}}case"REMOVE_TOAST":return s.toastId===void 0?{...t,toasts:[]}:{...t,toasts:t.toasts.filter(n=>n.id!==s.toastId)}}},Eh=[];let Mh={toasts:[]};function gu(t){Mh=yR(Mh,t),Eh.forEach(s=>{s(Mh)})}function nu({...t}){const s=vR(),n=r=>gu({type:"UPDATE_TOAST",toast:{...r,id:s}}),a=()=>gu({type:"DISMISS_TOAST",toastId:s});return gu({type:"ADD_TOAST",toast:{...t,id:s,open:!0,onOpenChange:r=>{r||a()}}}),{id:s,dismiss:a,update:n}}function nt(){const[t,s]=N.useState(Mh);return N.useEffect(()=>(Eh.push(s),()=>{const n=Eh.indexOf(s);n>-1&&Eh.splice(n,1)}),[t]),{...t,toast:nu,dismiss:n=>gu({type:"DISMISS_TOAST",toastId:n})}}function tt(t,s,{checkForDefaultPrevented:n=!0}={}){return function(r){if(t==null||t(r),n===!1||!r.defaultPrevented)return s==null?void 0:s(r)}}function Pb(t,s){if(typeof t=="function")return t(s);t!=null&&(t.current=s)}function Yo(...t){return s=>{let n=!1;const a=t.map(r=>{const i=Pb(r,s);return!n&&typeof i=="function"&&(n=!0),i});if(n)return()=>{for(let r=0;r<a.length;r++){const i=a[r];typeof i=="function"?i():Pb(t[r],null)}}}}function Ht(...t){return N.useCallback(Yo(...t),t)}function NR(t,s){const n=N.createContext(s),a=i=>{const{children:l,...c}=i,o=N.useMemo(()=>c,Object.values(c));return e.jsx(n.Provider,{value:o,children:l})};a.displayName=t+"Provider";function r(i){const l=N.useContext(n);if(l)return l;if(s!==void 0)return s;throw new Error(`\`${i}\` must be used within \`${t}\``)}return[a,r]}function Yn(t,s=[]){let n=[];function a(i,l){const c=N.createContext(l),o=n.length;n=[...n,l];const d=u=>{var y;const{scope:m,children:p,...g}=u,x=((y=m==null?void 0:m[t])==null?void 0:y[o])||c,v=N.useMemo(()=>g,Object.values(g));return e.jsx(x.Provider,{value:v,children:p})};d.displayName=i+"Provider";function h(u,m){var x;const p=((x=m==null?void 0:m[t])==null?void 0:x[o])||c,g=N.useContext(p);if(g)return g;if(l!==void 0)return l;throw new Error(`\`${u}\` must be used within \`${i}\``)}return[d,h]}const r=()=>{const i=n.map(l=>N.createContext(l));return function(c){const o=(c==null?void 0:c[t])||i;return N.useMemo(()=>({[`__scope${t}`]:{...c,[t]:o}}),[c,o])}};return r.scopeName=t,[a,bR(r,...s)]}function bR(...t){const s=t[0];if(t.length===1)return s;const n=()=>{const a=t.map(r=>({useScope:r(),scopeName:r.scopeName}));return function(i){const l=a.reduce((c,{useScope:o,scopeName:d})=>{const u=o(i)[`__scope${d}`];return{...c,...u}},{});return N.useMemo(()=>({[`__scope${s.scopeName}`]:l}),[l])}};return n.scopeName=s.scopeName,n}function $l(t){const s=wR(t),n=N.forwardRef((a,r)=>{const{children:i,...l}=a,c=N.Children.toArray(i),o=c.find(SR);if(o){const d=o.props.children,h=c.map(u=>u===o?N.Children.count(d)>1?N.Children.only(null):N.isValidElement(d)?d.props.children:null:u);return e.jsx(s,{...l,ref:r,children:N.isValidElement(d)?N.cloneElement(d,void 0,h):null})}return e.jsx(s,{...l,ref:r,children:i})});return n.displayName=`${t}.Slot`,n}var _C=$l("Slot");function wR(t){const s=N.forwardRef((n,a)=>{const{children:r,...i}=n;if(N.isValidElement(r)){const l=kR(r),c=CR(i,r.props);return r.type!==N.Fragment&&(c.ref=a?Yo(a,l):l),N.cloneElement(r,c)}return N.Children.count(r)>1?N.Children.only(null):null});return s.displayName=`${t}.SlotClone`,s}var RC=Symbol("radix.slottable");function OC(t){const s=({children:n})=>e.jsx(e.Fragment,{children:n});return s.displayName=`${t}.Slottable`,s.__radixId=RC,s}function SR(t){return N.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===RC}function CR(t,s){const n={...s};for(const a in s){const r=t[a],i=s[a];/^on[A-Z]/.test(a)?r&&i?n[a]=(...c)=>{i(...c),r(...c)}:r&&(n[a]=r):a==="style"?n[a]={...r,...i}:a==="className"&&(n[a]=[r,i].filter(Boolean).join(" "))}return{...t,...n}}function kR(t){var a,r;let s=(a=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:a.get,n=s&&"isReactWarning"in s&&s.isReactWarning;return n?t.ref:(s=(r=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:r.get,n=s&&"isReactWarning"in s&&s.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}function xm(t){const s=t+"CollectionProvider",[n,a]=Yn(s),[r,i]=n(s,{collectionRef:{current:null},itemMap:new Map}),l=x=>{const{scope:v,children:y}=x,f=lt.useRef(null),b=lt.useRef(new Map).current;return e.jsx(r,{scope:v,itemMap:b,collectionRef:f,children:y})};l.displayName=s;const c=t+"CollectionSlot",o=$l(c),d=lt.forwardRef((x,v)=>{const{scope:y,children:f}=x,b=i(c,y),j=Ht(v,b.collectionRef);return e.jsx(o,{ref:j,children:f})});d.displayName=c;const h=t+"CollectionItemSlot",u="data-radix-collection-item",m=$l(h),p=lt.forwardRef((x,v)=>{const{scope:y,children:f,...b}=x,j=lt.useRef(null),S=Ht(v,j),k=i(h,y);return lt.useEffect(()=>(k.itemMap.set(j,{ref:j,...b}),()=>void k.itemMap.delete(j))),e.jsx(m,{[u]:"",ref:S,children:f})});p.displayName=h;function g(x){const v=i(t+"CollectionConsumer",x);return lt.useCallback(()=>{const f=v.collectionRef.current;if(!f)return[];const b=Array.from(f.querySelectorAll(`[${u}]`));return Array.from(v.itemMap.values()).sort((k,T)=>b.indexOf(k.ref.current)-b.indexOf(T.ref.current))},[v.collectionRef,v.itemMap])}return[{Provider:l,Slot:d,ItemSlot:p},g,a]}var AR=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],Dt=AR.reduce((t,s)=>{const n=$l(`Primitive.${s}`),a=N.forwardRef((r,i)=>{const{asChild:l,...c}=r,o=l?n:s;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),e.jsx(o,{...c,ref:i})});return a.displayName=`Primitive.${s}`,{...t,[s]:a}},{});function Ny(t,s){t&&eo.flushSync(()=>t.dispatchEvent(s))}function sn(t){const s=N.useRef(t);return N.useEffect(()=>{s.current=t}),N.useMemo(()=>(...n)=>{var a;return(a=s.current)==null?void 0:a.call(s,...n)},[])}function PR(t,s=globalThis==null?void 0:globalThis.document){const n=sn(t);N.useEffect(()=>{const a=r=>{r.key==="Escape"&&n(r)};return s.addEventListener("keydown",a,{capture:!0}),()=>s.removeEventListener("keydown",a,{capture:!0})},[n,s])}var TR="DismissableLayer",_j="dismissableLayer.update",ER="dismissableLayer.pointerDownOutside",MR="dismissableLayer.focusOutside",Tb,DC=N.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),Qo=N.forwardRef((t,s)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:a,onPointerDownOutside:r,onFocusOutside:i,onInteractOutside:l,onDismiss:c,...o}=t,d=N.useContext(DC),[h,u]=N.useState(null),m=(h==null?void 0:h.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,p]=N.useState({}),g=Ht(s,T=>u(T)),x=Array.from(d.layers),[v]=[...d.layersWithOutsidePointerEventsDisabled].slice(-1),y=x.indexOf(v),f=h?x.indexOf(h):-1,b=d.layersWithOutsidePointerEventsDisabled.size>0,j=f>=y,S=RR(T=>{const A=T.target,C=[...d.branches].some(w=>w.contains(A));!j||C||(r==null||r(T),l==null||l(T),T.defaultPrevented||c==null||c())},m),k=OR(T=>{const A=T.target;[...d.branches].some(w=>w.contains(A))||(i==null||i(T),l==null||l(T),T.defaultPrevented||c==null||c())},m);return PR(T=>{f===d.layers.size-1&&(a==null||a(T),!T.defaultPrevented&&c&&(T.preventDefault(),c()))},m),N.useEffect(()=>{if(h)return n&&(d.layersWithOutsidePointerEventsDisabled.size===0&&(Tb=m.body.style.pointerEvents,m.body.style.pointerEvents="none"),d.layersWithOutsidePointerEventsDisabled.add(h)),d.layers.add(h),Eb(),()=>{n&&d.layersWithOutsidePointerEventsDisabled.size===1&&(m.body.style.pointerEvents=Tb)}},[h,m,n,d]),N.useEffect(()=>()=>{h&&(d.layers.delete(h),d.layersWithOutsidePointerEventsDisabled.delete(h),Eb())},[h,d]),N.useEffect(()=>{const T=()=>p({});return document.addEventListener(_j,T),()=>document.removeEventListener(_j,T)},[]),e.jsx(Dt.div,{...o,ref:g,style:{pointerEvents:b?j?"auto":"none":void 0,...t.style},onFocusCapture:tt(t.onFocusCapture,k.onFocusCapture),onBlurCapture:tt(t.onBlurCapture,k.onBlurCapture),onPointerDownCapture:tt(t.onPointerDownCapture,S.onPointerDownCapture)})});Qo.displayName=TR;var _R="DismissableLayerBranch",IC=N.forwardRef((t,s)=>{const n=N.useContext(DC),a=N.useRef(null),r=Ht(s,a);return N.useEffect(()=>{const i=a.current;if(i)return n.branches.add(i),()=>{n.branches.delete(i)}},[n.branches]),e.jsx(Dt.div,{...t,ref:r})});IC.displayName=_R;function RR(t,s=globalThis==null?void 0:globalThis.document){const n=sn(t),a=N.useRef(!1),r=N.useRef(()=>{});return N.useEffect(()=>{const i=c=>{if(c.target&&!a.current){let o=function(){LC(ER,n,d,{discrete:!0})};const d={originalEvent:c};c.pointerType==="touch"?(s.removeEventListener("click",r.current),r.current=o,s.addEventListener("click",r.current,{once:!0})):o()}else s.removeEventListener("click",r.current);a.current=!1},l=window.setTimeout(()=>{s.addEventListener("pointerdown",i)},0);return()=>{window.clearTimeout(l),s.removeEventListener("pointerdown",i),s.removeEventListener("click",r.current)}},[s,n]),{onPointerDownCapture:()=>a.current=!0}}function OR(t,s=globalThis==null?void 0:globalThis.document){const n=sn(t),a=N.useRef(!1);return N.useEffect(()=>{const r=i=>{i.target&&!a.current&&LC(MR,n,{originalEvent:i},{discrete:!1})};return s.addEventListener("focusin",r),()=>s.removeEventListener("focusin",r)},[s,n]),{onFocusCapture:()=>a.current=!0,onBlurCapture:()=>a.current=!1}}function Eb(){const t=new CustomEvent(_j);document.dispatchEvent(t)}function LC(t,s,n,{discrete:a}){const r=n.originalEvent.target,i=new CustomEvent(t,{bubbles:!1,cancelable:!0,detail:n});s&&r.addEventListener(t,s,{once:!0}),a?Ny(r,i):r.dispatchEvent(i)}var DR=Qo,IR=IC,Nn=globalThis!=null&&globalThis.document?N.useLayoutEffect:()=>{},LR="Portal",bd=N.forwardRef((t,s)=>{var c;const{container:n,...a}=t,[r,i]=N.useState(!1);Nn(()=>i(!0),[]);const l=n||r&&((c=globalThis==null?void 0:globalThis.document)==null?void 0:c.body);return l?c_.createPortal(e.jsx(Dt.div,{...a,ref:s}),l):null});bd.displayName=LR;function FR(t,s){return N.useReducer((n,a)=>s[n][a]??n,t)}var Va=t=>{const{present:s,children:n}=t,a=qR(s),r=typeof n=="function"?n({present:a.isPresent}):N.Children.only(n),i=Ht(a.ref,$R(r));return typeof n=="function"||a.isPresent?N.cloneElement(r,{ref:i}):null};Va.displayName="Presence";function qR(t){const[s,n]=N.useState(),a=N.useRef({}),r=N.useRef(t),i=N.useRef("none"),l=t?"mounted":"unmounted",[c,o]=FR(l,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return N.useEffect(()=>{const d=nh(a.current);i.current=c==="mounted"?d:"none"},[c]),Nn(()=>{const d=a.current,h=r.current;if(h!==t){const m=i.current,p=nh(d);t?o("MOUNT"):p==="none"||(d==null?void 0:d.display)==="none"?o("UNMOUNT"):o(h&&m!==p?"ANIMATION_OUT":"UNMOUNT"),r.current=t}},[t,o]),Nn(()=>{if(s){let d;const h=s.ownerDocument.defaultView??window,u=p=>{const x=nh(a.current).includes(p.animationName);if(p.target===s&&x&&(o("ANIMATION_END"),!r.current)){const v=s.style.animationFillMode;s.style.animationFillMode="forwards",d=h.setTimeout(()=>{s.style.animationFillMode==="forwards"&&(s.style.animationFillMode=v)})}},m=p=>{p.target===s&&(i.current=nh(a.current))};return s.addEventListener("animationstart",m),s.addEventListener("animationcancel",u),s.addEventListener("animationend",u),()=>{h.clearTimeout(d),s.removeEventListener("animationstart",m),s.removeEventListener("animationcancel",u),s.removeEventListener("animationend",u)}}else o("ANIMATION_END")},[s,o]),{isPresent:["mounted","unmountSuspended"].includes(c),ref:N.useCallback(d=>{d&&(a.current=getComputedStyle(d)),n(d)},[])}}function nh(t){return(t==null?void 0:t.animationName)||"none"}function $R(t){var a,r;let s=(a=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:a.get,n=s&&"isReactWarning"in s&&s.isReactWarning;return n?t.ref:(s=(r=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:r.get,n=s&&"isReactWarning"in s&&s.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}function br({prop:t,defaultProp:s,onChange:n=()=>{}}){const[a,r]=BR({defaultProp:s,onChange:n}),i=t!==void 0,l=i?t:a,c=sn(n),o=N.useCallback(d=>{if(i){const u=typeof d=="function"?d(t):d;u!==t&&c(u)}else r(d)},[i,t,r,c]);return[l,o]}function BR({defaultProp:t,onChange:s}){const n=N.useState(t),[a]=n,r=N.useRef(a),i=sn(s);return N.useEffect(()=>{r.current!==a&&(i(a),r.current=a)},[a,r,i]),n}var UR="VisuallyHidden",pm=N.forwardRef((t,s)=>e.jsx(Dt.span,{...t,ref:s,style:{position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal",...t.style}}));pm.displayName=UR;var zR=pm,by="ToastProvider",[wy,VR,GR]=xm("Toast"),[FC,RJ]=Yn("Toast",[GR]),[WR,rp]=FC(by),qC=t=>{const{__scopeToast:s,label:n="Notification",duration:a=5e3,swipeDirection:r="right",swipeThreshold:i=50,children:l}=t,[c,o]=N.useState(null),[d,h]=N.useState(0),u=N.useRef(!1),m=N.useRef(!1);return n.trim()||console.error(`Invalid prop \`label\` supplied to \`${by}\`. Expected non-empty \`string\`.`),e.jsx(wy.Provider,{scope:s,children:e.jsx(WR,{scope:s,label:n,duration:a,swipeDirection:r,swipeThreshold:i,toastCount:d,viewport:c,onViewportChange:o,onToastAdd:N.useCallback(()=>h(p=>p+1),[]),onToastRemove:N.useCallback(()=>h(p=>p-1),[]),isFocusedToastEscapeKeyDownRef:u,isClosePausedRef:m,children:l})})};qC.displayName=by;var $C="ToastViewport",HR=["F8"],Rj="toast.viewportPause",Oj="toast.viewportResume",BC=N.forwardRef((t,s)=>{const{__scopeToast:n,hotkey:a=HR,label:r="Notifications ({hotkey})",...i}=t,l=rp($C,n),c=VR(n),o=N.useRef(null),d=N.useRef(null),h=N.useRef(null),u=N.useRef(null),m=Ht(s,u,l.onViewportChange),p=a.join("+").replace(/Key/g,"").replace(/Digit/g,""),g=l.toastCount>0;N.useEffect(()=>{const v=y=>{var b;a.length!==0&&a.every(j=>y[j]||y.code===j)&&((b=u.current)==null||b.focus())};return document.addEventListener("keydown",v),()=>document.removeEventListener("keydown",v)},[a]),N.useEffect(()=>{const v=o.current,y=u.current;if(g&&v&&y){const f=()=>{if(!l.isClosePausedRef.current){const k=new CustomEvent(Rj);y.dispatchEvent(k),l.isClosePausedRef.current=!0}},b=()=>{if(l.isClosePausedRef.current){const k=new CustomEvent(Oj);y.dispatchEvent(k),l.isClosePausedRef.current=!1}},j=k=>{!v.contains(k.relatedTarget)&&b()},S=()=>{v.contains(document.activeElement)||b()};return v.addEventListener("focusin",f),v.addEventListener("focusout",j),v.addEventListener("pointermove",f),v.addEventListener("pointerleave",S),window.addEventListener("blur",f),window.addEventListener("focus",b),()=>{v.removeEventListener("focusin",f),v.removeEventListener("focusout",j),v.removeEventListener("pointermove",f),v.removeEventListener("pointerleave",S),window.removeEventListener("blur",f),window.removeEventListener("focus",b)}}},[g,l.isClosePausedRef]);const x=N.useCallback(({tabbingDirection:v})=>{const f=c().map(b=>{const j=b.ref.current,S=[j,...i6(j)];return v==="forwards"?S:S.reverse()});return(v==="forwards"?f.reverse():f).flat()},[c]);return N.useEffect(()=>{const v=u.current;if(v){const y=f=>{var S,k,T;const b=f.altKey||f.ctrlKey||f.metaKey;if(f.key==="Tab"&&!b){const A=document.activeElement,C=f.shiftKey;if(f.target===v&&C){(S=d.current)==null||S.focus();return}const M=x({tabbingDirection:C?"backwards":"forwards"}),I=M.findIndex(W=>W===A);Bf(M.slice(I+1))?f.preventDefault():C?(k=d.current)==null||k.focus():(T=h.current)==null||T.focus()}};return v.addEventListener("keydown",y),()=>v.removeEventListener("keydown",y)}},[c,x]),e.jsxs(IR,{ref:o,role:"region","aria-label":r.replace("{hotkey}",p),tabIndex:-1,style:{pointerEvents:g?void 0:"none"},children:[g&&e.jsx(Dj,{ref:d,onFocusFromOutsideViewport:()=>{const v=x({tabbingDirection:"forwards"});Bf(v)}}),e.jsx(wy.Slot,{scope:n,children:e.jsx(Dt.ol,{tabIndex:-1,...i,ref:m})}),g&&e.jsx(Dj,{ref:h,onFocusFromOutsideViewport:()=>{const v=x({tabbingDirection:"backwards"});Bf(v)}})]})});BC.displayName=$C;var UC="ToastFocusProxy",Dj=N.forwardRef((t,s)=>{const{__scopeToast:n,onFocusFromOutsideViewport:a,...r}=t,i=rp(UC,n);return e.jsx(pm,{"aria-hidden":!0,tabIndex:0,...r,ref:s,style:{position:"fixed"},onFocus:l=>{var d;const c=l.relatedTarget;!((d=i.viewport)!=null&&d.contains(c))&&a()}})});Dj.displayName=UC;var ip="Toast",KR="toast.swipeStart",YR="toast.swipeMove",QR="toast.swipeCancel",ZR="toast.swipeEnd",zC=N.forwardRef((t,s)=>{const{forceMount:n,open:a,defaultOpen:r,onOpenChange:i,...l}=t,[c=!0,o]=br({prop:a,defaultProp:r,onChange:i});return e.jsx(Va,{present:n||c,children:e.jsx(e6,{open:c,...l,ref:s,onClose:()=>o(!1),onPause:sn(t.onPause),onResume:sn(t.onResume),onSwipeStart:tt(t.onSwipeStart,d=>{d.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:tt(t.onSwipeMove,d=>{const{x:h,y:u}=d.detail.delta;d.currentTarget.setAttribute("data-swipe","move"),d.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${h}px`),d.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${u}px`)}),onSwipeCancel:tt(t.onSwipeCancel,d=>{d.currentTarget.setAttribute("data-swipe","cancel"),d.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),d.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),d.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),d.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:tt(t.onSwipeEnd,d=>{const{x:h,y:u}=d.detail.delta;d.currentTarget.setAttribute("data-swipe","end"),d.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),d.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),d.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${h}px`),d.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${u}px`),o(!1)})})})});zC.displayName=ip;var[XR,JR]=FC(ip,{onClose(){}}),e6=N.forwardRef((t,s)=>{const{__scopeToast:n,type:a="foreground",duration:r,open:i,onClose:l,onEscapeKeyDown:c,onPause:o,onResume:d,onSwipeStart:h,onSwipeMove:u,onSwipeCancel:m,onSwipeEnd:p,...g}=t,x=rp(ip,n),[v,y]=N.useState(null),f=Ht(s,W=>y(W)),b=N.useRef(null),j=N.useRef(null),S=r||x.duration,k=N.useRef(0),T=N.useRef(S),A=N.useRef(0),{onToastAdd:C,onToastRemove:w}=x,P=sn(()=>{var _;(v==null?void 0:v.contains(document.activeElement))&&((_=x.viewport)==null||_.focus()),l()}),M=N.useCallback(W=>{!W||W===1/0||(window.clearTimeout(A.current),k.current=new Date().getTime(),A.current=window.setTimeout(P,W))},[P]);N.useEffect(()=>{const W=x.viewport;if(W){const _=()=>{M(T.current),d==null||d()},B=()=>{const O=new Date().getTime()-k.current;T.current=T.current-O,window.clearTimeout(A.current),o==null||o()};return W.addEventListener(Rj,B),W.addEventListener(Oj,_),()=>{W.removeEventListener(Rj,B),W.removeEventListener(Oj,_)}}},[x.viewport,S,o,d,M]),N.useEffect(()=>{i&&!x.isClosePausedRef.current&&M(S)},[i,S,x.isClosePausedRef,M]),N.useEffect(()=>(C(),()=>w()),[C,w]);const I=N.useMemo(()=>v?QC(v):null,[v]);return x.viewport?e.jsxs(e.Fragment,{children:[I&&e.jsx(t6,{__scopeToast:n,role:"status","aria-live":a==="foreground"?"assertive":"polite","aria-atomic":!0,children:I}),e.jsx(XR,{scope:n,onClose:P,children:eo.createPortal(e.jsx(wy.ItemSlot,{scope:n,children:e.jsx(DR,{asChild:!0,onEscapeKeyDown:tt(c,()=>{x.isFocusedToastEscapeKeyDownRef.current||P(),x.isFocusedToastEscapeKeyDownRef.current=!1}),children:e.jsx(Dt.li,{role:"status","aria-live":"off","aria-atomic":!0,tabIndex:0,"data-state":i?"open":"closed","data-swipe-direction":x.swipeDirection,...g,ref:f,style:{userSelect:"none",touchAction:"none",...t.style},onKeyDown:tt(t.onKeyDown,W=>{W.key==="Escape"&&(c==null||c(W.nativeEvent),W.nativeEvent.defaultPrevented||(x.isFocusedToastEscapeKeyDownRef.current=!0,P()))}),onPointerDown:tt(t.onPointerDown,W=>{W.button===0&&(b.current={x:W.clientX,y:W.clientY})}),onPointerMove:tt(t.onPointerMove,W=>{if(!b.current)return;const _=W.clientX-b.current.x,B=W.clientY-b.current.y,O=!!j.current,z=["left","right"].includes(x.swipeDirection),F=["left","up"].includes(x.swipeDirection)?Math.min:Math.max,K=z?F(0,_):0,D=z?0:F(0,B),G=W.pointerType==="touch"?10:2,H={x:K,y:D},V={originalEvent:W,delta:H};O?(j.current=H,ah(YR,u,V,{discrete:!1})):Mb(H,x.swipeDirection,G)?(j.current=H,ah(KR,h,V,{discrete:!1}),W.target.setPointerCapture(W.pointerId)):(Math.abs(_)>G||Math.abs(B)>G)&&(b.current=null)}),onPointerUp:tt(t.onPointerUp,W=>{const _=j.current,B=W.target;if(B.hasPointerCapture(W.pointerId)&&B.releasePointerCapture(W.pointerId),j.current=null,b.current=null,_){const O=W.currentTarget,z={originalEvent:W,delta:_};Mb(_,x.swipeDirection,x.swipeThreshold)?ah(ZR,p,z,{discrete:!0}):ah(QR,m,z,{discrete:!0}),O.addEventListener("click",F=>F.preventDefault(),{once:!0})}})})})}),x.viewport)})]}):null}),t6=t=>{const{__scopeToast:s,children:n,...a}=t,r=rp(ip,s),[i,l]=N.useState(!1),[c,o]=N.useState(!1);return a6(()=>l(!0)),N.useEffect(()=>{const d=window.setTimeout(()=>o(!0),1e3);return()=>window.clearTimeout(d)},[]),c?null:e.jsx(bd,{asChild:!0,children:e.jsx(pm,{...a,children:i&&e.jsxs(e.Fragment,{children:[r.label," ",n]})})})},s6="ToastTitle",VC=N.forwardRef((t,s)=>{const{__scopeToast:n,...a}=t;return e.jsx(Dt.div,{...a,ref:s})});VC.displayName=s6;var n6="ToastDescription",GC=N.forwardRef((t,s)=>{const{__scopeToast:n,...a}=t;return e.jsx(Dt.div,{...a,ref:s})});GC.displayName=n6;var WC="ToastAction",HC=N.forwardRef((t,s)=>{const{altText:n,...a}=t;return n.trim()?e.jsx(YC,{altText:n,asChild:!0,children:e.jsx(Sy,{...a,ref:s})}):(console.error(`Invalid prop \`altText\` supplied to \`${WC}\`. Expected non-empty \`string\`.`),null)});HC.displayName=WC;var KC="ToastClose",Sy=N.forwardRef((t,s)=>{const{__scopeToast:n,...a}=t,r=JR(KC,n);return e.jsx(YC,{asChild:!0,children:e.jsx(Dt.button,{type:"button",...a,ref:s,onClick:tt(t.onClick,r.onClose)})})});Sy.displayName=KC;var YC=N.forwardRef((t,s)=>{const{__scopeToast:n,altText:a,...r}=t;return e.jsx(Dt.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":a||void 0,...r,ref:s})});function QC(t){const s=[];return Array.from(t.childNodes).forEach(a=>{if(a.nodeType===a.TEXT_NODE&&a.textContent&&s.push(a.textContent),r6(a)){const r=a.ariaHidden||a.hidden||a.style.display==="none",i=a.dataset.radixToastAnnounceExclude==="";if(!r)if(i){const l=a.dataset.radixToastAnnounceAlt;l&&s.push(l)}else s.push(...QC(a))}}),s}function ah(t,s,n,{discrete:a}){const r=n.originalEvent.currentTarget,i=new CustomEvent(t,{bubbles:!0,cancelable:!0,detail:n});s&&r.addEventListener(t,s,{once:!0}),a?Ny(r,i):r.dispatchEvent(i)}var Mb=(t,s,n=0)=>{const a=Math.abs(t.x),r=Math.abs(t.y),i=a>r;return s==="left"||s==="right"?i&&a>n:!i&&r>n};function a6(t=()=>{}){const s=sn(t);Nn(()=>{let n=0,a=0;return n=window.requestAnimationFrame(()=>a=window.requestAnimationFrame(s)),()=>{window.cancelAnimationFrame(n),window.cancelAnimationFrame(a)}},[s])}function r6(t){return t.nodeType===t.ELEMENT_NODE}function i6(t){const s=[],n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:a=>{const r=a.tagName==="INPUT"&&a.type==="hidden";return a.disabled||a.hidden||r?NodeFilter.FILTER_SKIP:a.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)s.push(n.currentNode);return s}function Bf(t){const s=document.activeElement;return t.some(n=>n===s?!0:(n.focus(),document.activeElement!==s))}var ZC=qC,Cy=BC,ky=zC,Ay=VC,Py=GC,Ty=HC,Ey=Sy;function XC(t){var s,n,a="";if(typeof t=="string"||typeof t=="number")a+=t;else if(typeof t=="object")if(Array.isArray(t)){var r=t.length;for(s=0;s<r;s++)t[s]&&(n=XC(t[s]))&&(a&&(a+=" "),a+=n)}else for(n in t)t[n]&&(a&&(a+=" "),a+=n);return a}function JC(){for(var t,s,n=0,a="",r=arguments.length;n<r;n++)(t=arguments[n])&&(s=XC(t))&&(a&&(a+=" "),a+=s);return a}const _b=t=>typeof t=="boolean"?`${t}`:t===0?"0":t,Rb=JC,fm=(t,s)=>n=>{var a;if((s==null?void 0:s.variants)==null)return Rb(t,n==null?void 0:n.class,n==null?void 0:n.className);const{variants:r,defaultVariants:i}=s,l=Object.keys(r).map(d=>{const h=n==null?void 0:n[d],u=i==null?void 0:i[d];if(h===null)return null;const m=_b(h)||_b(u);return r[d][m]}),c=n&&Object.entries(n).reduce((d,h)=>{let[u,m]=h;return m===void 0||(d[u]=m),d},{}),o=s==null||(a=s.compoundVariants)===null||a===void 0?void 0:a.reduce((d,h)=>{let{class:u,className:m,...p}=h;return Object.entries(p).every(g=>{let[x,v]=g;return Array.isArray(v)?v.includes({...i,...c}[x]):{...i,...c}[x]===v})?[...d,u,m]:d},[]);return Rb(t,l,o,n==null?void 0:n.class,n==null?void 0:n.className)};/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const l6=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),e4=(...t)=>t.filter((s,n,a)=>!!s&&a.indexOf(s)===n).join(" ");/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var o6={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const c6=N.forwardRef(({color:t="currentColor",size:s=24,strokeWidth:n=2,absoluteStrokeWidth:a,className:r="",children:i,iconNode:l,...c},o)=>N.createElement("svg",{ref:o,...o6,width:s,height:s,stroke:t,strokeWidth:a?Number(n)*24/Number(s):n,className:e4("lucide",r),...c},[...l.map(([d,h])=>N.createElement(d,h)),...Array.isArray(i)?i:[i]]));/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const De=(t,s)=>{const n=N.forwardRef(({className:a,...r},i)=>N.createElement(c6,{ref:i,iconNode:s,className:e4(`lucide-${l6(t)}`,a),...r}));return n.displayName=`${t}`,n};/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _n=De("Activity",[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const d6=De("Album",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["polyline",{points:"11 3 11 11 14 8 17 11 17 3",key:"1wcwz3"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const u6=De("ArrowDown",[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const m6=De("ArrowLeftRight",[["path",{d:"M8 3 4 7l4 4",key:"9rb6wj"}],["path",{d:"M4 7h16",key:"6tx8e3"}],["path",{d:"m16 21 4-4-4-4",key:"siv7j2"}],["path",{d:"M20 17H4",key:"h6l3hr"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rn=De("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qa=De("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const h6=De("ArrowUpNarrowWide",[["path",{d:"m3 8 4-4 4 4",key:"11wl7u"}],["path",{d:"M7 4v16",key:"1glfcx"}],["path",{d:"M11 12h4",key:"q8tih4"}],["path",{d:"M11 16h7",key:"uosisv"}],["path",{d:"M11 20h10",key:"jvxblo"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const t4=De("ArrowUp",[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const la=De("Award",[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const x6=De("Ban",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m4.9 4.9 14.2 14.2",key:"1m5liu"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const p6=De("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Uf=De("Bold",[["path",{d:"M6 12h9a4 4 0 0 1 0 8H7a1 1 0 0 1-1-1V5a1 1 0 0 1 1-1h7a4 4 0 0 1 0 8",key:"mg9rjx"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _a=De("BookOpen",[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ob=De("BrainCircuit",[["path",{d:"M12 5a3 3 0 1 0-5.997.125 4 4 0 0 0-2.526 5.77 4 4 0 0 0 .556 6.588A4 4 0 1 0 12 18Z",key:"l5xja"}],["path",{d:"M9 13a4.5 4.5 0 0 0 3-4",key:"10igwf"}],["path",{d:"M6.003 5.125A3 3 0 0 0 6.401 6.5",key:"105sqy"}],["path",{d:"M3.477 10.896a4 4 0 0 1 .585-.396",key:"ql3yin"}],["path",{d:"M6 18a4 4 0 0 1-1.967-.516",key:"2e4loj"}],["path",{d:"M12 13h4",key:"1ku699"}],["path",{d:"M12 18h6a2 2 0 0 1 2 2v1",key:"105ag5"}],["path",{d:"M12 8h8",key:"1lhi5i"}],["path",{d:"M16 8V5a2 2 0 0 1 2-2",key:"u6izg6"}],["circle",{cx:"16",cy:"13",r:".5",key:"ry7gng"}],["circle",{cx:"18",cy:"3",r:".5",key:"1aiba7"}],["circle",{cx:"20",cy:"21",r:".5",key:"yhc1fs"}],["circle",{cx:"20",cy:"8",r:".5",key:"1e43v0"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ad=De("Brain",[["path",{d:"M12 5a3 3 0 1 0-5.997.125 4 4 0 0 0-2.526 5.77 4 4 0 0 0 .556 6.588A4 4 0 1 0 12 18Z",key:"l5xja"}],["path",{d:"M12 5a3 3 0 1 1 5.997.125 4 4 0 0 1 2.526 5.77 4 4 0 0 1-.556 6.588A4 4 0 1 1 12 18Z",key:"ep3f8r"}],["path",{d:"M15 13a4.5 4.5 0 0 1-3-4 4.5 4.5 0 0 1-3 4",key:"1p4c4q"}],["path",{d:"M17.599 6.5a3 3 0 0 0 .399-1.375",key:"tmeiqw"}],["path",{d:"M6.003 5.125A3 3 0 0 0 6.401 6.5",key:"105sqy"}],["path",{d:"M3.477 10.896a4 4 0 0 1 .585-.396",key:"ql3yin"}],["path",{d:"M19.938 10.5a4 4 0 0 1 .585.396",key:"1qfode"}],["path",{d:"M6 18a4 4 0 0 1-1.967-.516",key:"2e4loj"}],["path",{d:"M19.967 17.484A4 4 0 0 1 18 18",key:"159ez6"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Os=De("Briefcase",[["path",{d:"M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"jecpp"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Db=De("Brush",[["path",{d:"m9.06 11.9 8.07-8.06a2.85 2.85 0 1 1 4.03 4.03l-8.06 8.08",key:"1styjt"}],["path",{d:"M7.07 14.94c-1.66 0-3 1.35-3 3.02 0 1.33-2.5 1.52-2 2.02 1.08 1.1 2.49 2.02 4 2.02 2.2 0 4-1.8 4-4.04a3.01 3.01 0 0 0-3-3.02z",key:"z0l1mu"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const f6=De("Bug",[["path",{d:"m8 2 1.88 1.88",key:"fmnt4t"}],["path",{d:"M14.12 3.88 16 2",key:"qol33r"}],["path",{d:"M9 7.13v-1a3.003 3.003 0 1 1 6 0v1",key:"d7y7pr"}],["path",{d:"M12 20c-3.3 0-6-2.7-6-6v-3a4 4 0 0 1 4-4h4a4 4 0 0 1 4 4v3c0 3.3-2.7 6-6 6",key:"xs1cw7"}],["path",{d:"M12 20v-9",key:"1qisl0"}],["path",{d:"M6.53 9C4.6 8.8 3 7.1 3 5",key:"32zzws"}],["path",{d:"M6 13H2",key:"82j7cp"}],["path",{d:"M3 21c0-2.1 1.7-3.9 3.8-4",key:"4p0ekp"}],["path",{d:"M20.97 5c0 2.1-1.6 3.8-3.5 4",key:"18gb23"}],["path",{d:"M22 13h-4",key:"1jl80f"}],["path",{d:"M17.2 17c2.1.1 3.8 1.9 3.8 4",key:"k3fwyw"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ij=De("Building2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fo=De("Building",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ib=De("Calculator",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",key:"1nb95v"}],["line",{x1:"8",x2:"16",y1:"6",y2:"6",key:"x4nwl0"}],["line",{x1:"16",x2:"16",y1:"14",y2:"18",key:"wjye3r"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M8 18h.01",key:"lrp35t"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dt=De("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vi=De("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wn=De("ChartColumn",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const s4=De("ChartPie",[["path",{d:"M21 12c.552 0 1.005-.449.95-.998a10 10 0 0 0-8.953-8.951c-.55-.055-.998.398-.998.95v8a1 1 0 0 0 1 1z",key:"pzmjnu"}],["path",{d:"M21.21 15.89A10 10 0 1 1 8 2.83",key:"k2fpak"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ir=De("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const My=De("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ju=De("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qo=De("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const n4=De("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const on=De("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ct=De("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ti=De("CircleCheck",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lb=De("CirclePlay",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polygon",{points:"10 8 16 12 10 16 10 8",key:"1cimsy"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fa=De("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const a4=De("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qt=De("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rh=De("Code",[["polyline",{points:"16 18 22 12 16 6",key:"z7tu5w"}],["polyline",{points:"8 6 2 12 8 18",key:"1eg1df"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const co=De("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Il=De("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ns=De("Crown",[["path",{d:"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z",key:"1vdc57"}],["path",{d:"M5 21h14",key:"11awu3"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jn=De("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const g6=De("Disc",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const It=De("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cs=De("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _y=De("Drum",[["path",{d:"m2 2 8 8",key:"1v6059"}],["path",{d:"m22 2-8 8",key:"173r8a"}],["ellipse",{cx:"12",cy:"9",rx:"10",ry:"5",key:"liohsx"}],["path",{d:"M7 13.4v7.9",key:"1yi6u9"}],["path",{d:"M12 14v8",key:"1tn2tj"}],["path",{d:"M17 13.4v7.9",key:"eqz2v3"}],["path",{d:"M2 9v8a10 5 0 0 0 20 0V9",key:"1750ul"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const r4=De("Ellipsis",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zn=De("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const j6=De("EyeOff",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ns=De("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v6=De("FileAudio",[["path",{d:"M17.5 22h.5a2 2 0 0 0 2-2V7l-5-5H6a2 2 0 0 0-2 2v3",key:"rslqgf"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M2 19a2 2 0 1 1 4 0v1a2 2 0 1 1-4 0v-4a6 6 0 0 1 12 0v4a2 2 0 1 1-4 0v-1a2 2 0 1 1 4 0",key:"9f7x3i"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fb=De("FileMusic",[["circle",{cx:"14",cy:"16",r:"2",key:"1bzzi3"}],["circle",{cx:"6",cy:"18",r:"2",key:"1fncim"}],["path",{d:"M4 12.4V4a2 2 0 0 1 2-2h8.5L20 7.5V20a2 2 0 0 1-2 2h-7.5",key:"skc018"}],["path",{d:"M8 18v-7.7L16 9v7",key:"1oie6o"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y6=De("FileSpreadsheet",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M8 13h2",key:"yr2amv"}],["path",{d:"M14 13h2",key:"un5t4a"}],["path",{d:"M8 17h2",key:"2yhykz"}],["path",{d:"M14 17h2",key:"10kma7"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xt=De("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _h=De("File",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qb=De("Film",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M7 3v18",key:"bbkbws"}],["path",{d:"M3 7.5h4",key:"zfgn84"}],["path",{d:"M3 12h18",key:"1i2n21"}],["path",{d:"M3 16.5h4",key:"1230mu"}],["path",{d:"M17 3v18",key:"in4fa5"}],["path",{d:"M17 7.5h4",key:"myr1c1"}],["path",{d:"M17 16.5h4",key:"go4c1d"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const to=De("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lj=De("FolderOpen",[["path",{d:"m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2",key:"usdka0"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zf=De("Gift",[["rect",{x:"3",y:"8",width:"18",height:"4",rx:"1",key:"bkv52"}],["path",{d:"M12 8v13",key:"1c76mn"}],["path",{d:"M19 12v7a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2v-7",key:"6wjy6b"}],["path",{d:"M7.5 8a2.5 2.5 0 0 1 0-5A4.8 8 0 0 1 12 8a4.8 8 0 0 1 4.5-5 2.5 2.5 0 0 1 0 5",key:"1ihvrl"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N6=De("GitBranch",[["line",{x1:"6",x2:"6",y1:"3",y2:"15",key:"17qcm7"}],["circle",{cx:"18",cy:"6",r:"3",key:"1h7g24"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["path",{d:"M18 9a9 9 0 0 1-9 9",key:"n2h4wq"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const is=De("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const b6=De("Grid3x3",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Po=De("Guitar",[["path",{d:"m11.9 12.1 4.514-4.514",key:"109xqo"}],["path",{d:"M20.1 2.3a1 1 0 0 0-1.4 0l-1.114 1.114A2 2 0 0 0 17 4.828v1.344a2 2 0 0 1-.586 1.414A2 2 0 0 1 17.828 7h1.344a2 2 0 0 0 1.414-.586L21.7 5.3a1 1 0 0 0 0-1.4z",key:"txyc8t"}],["path",{d:"m6 16 2 2",key:"16qmzd"}],["path",{d:"M8.2 9.9C8.7 8.8 9.8 8 11 8c2.8 0 5 2.2 5 5 0 1.2-.8 2.3-1.9 2.8l-.9.4A2 2 0 0 0 12 18a4 4 0 0 1-4 4c-3.3 0-6-2.7-6-6a4 4 0 0 1 4-4 2 2 0 0 0 1.8-1.2z",key:"1u8q3z"}],["circle",{cx:"11.5",cy:"12.5",r:".5",fill:"currentColor",key:"16onso"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mx=De("HardDrive",[["line",{x1:"22",x2:"2",y1:"12",y2:"12",key:"1y58io"}],["path",{d:"M5.45 5.11 2 12v6a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6l-3.45-6.89A2 2 0 0 0 16.76 4H7.24a2 2 0 0 0-1.79 1.11z",key:"oot6mr"}],["line",{x1:"6",x2:"6.01",y1:"16",y2:"16",key:"sgf278"}],["line",{x1:"10",x2:"10.01",y1:"16",y2:"16",key:"1l4acy"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hx=De("Hash",[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jn=De("Headphones",[["path",{d:"M3 14h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-7a9 9 0 0 1 18 0v7a2 2 0 0 1-2 2h-1a2 2 0 0 1-2-2v-3a2 2 0 0 1 2-2h3",key:"1xhozi"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gn=De("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const i4=De("House",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vn=De("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gm=De("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $b=De("Instagram",[["rect",{width:"20",height:"20",x:"2",y:"2",rx:"5",ry:"5",key:"2e1cvw"}],["path",{d:"M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z",key:"9exkf1"}],["line",{x1:"17.5",x2:"17.51",y1:"6.5",y2:"6.5",key:"r4j83e"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ih=De("Italic",[["line",{x1:"19",x2:"10",y1:"4",y2:"4",key:"15jd3p"}],["line",{x1:"14",x2:"5",y1:"20",y2:"20",key:"bu0au3"}],["line",{x1:"15",x2:"9",y1:"4",y2:"20",key:"uljnxc"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w6=De("Key",[["path",{d:"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4",key:"g0fldk"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S6=De("Keyboard",[["path",{d:"M10 8h.01",key:"1r9ogq"}],["path",{d:"M12 12h.01",key:"1mp3jc"}],["path",{d:"M14 8h.01",key:"1primd"}],["path",{d:"M16 12h.01",key:"1l6xoz"}],["path",{d:"M18 8h.01",key:"emo2bl"}],["path",{d:"M6 8h.01",key:"x9i8wu"}],["path",{d:"M7 16h10",key:"wp8him"}],["path",{d:"M8 12h.01",key:"czm47f"}],["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C6=De("Layers",[["path",{d:"m12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83Z",key:"8b97xw"}],["path",{d:"m22 17.65-9.17 4.16a2 2 0 0 1-1.66 0L2 17.65",key:"dd6zsq"}],["path",{d:"m22 12.65-9.17 4.16a2 2 0 0 1-1.66 0L2 12.65",key:"ep9fru"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k6=De("Library",[["path",{d:"m16 6 4 14",key:"ji33uf"}],["path",{d:"M12 6v14",key:"1n7gus"}],["path",{d:"M8 8v12",key:"1gg7y9"}],["path",{d:"M4 4v16",key:"6qkkli"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bl=De("Lightbulb",[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vu=De("Link",[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A6=De("List",[["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 18h.01",key:"1tta3j"}],["path",{d:"M3 6h.01",key:"1rqtza"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 18h13",key:"1lx6n3"}],["path",{d:"M8 6h13",key:"ik3vkj"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oa=De("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const l4=De("LockOpen",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 9.9-1",key:"1mm8w8"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ul=De("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const o4=De("LogIn",[["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}],["polyline",{points:"10 17 15 12 10 7",key:"1ail0h"}],["line",{x1:"15",x2:"3",y1:"12",y2:"12",key:"v6grx8"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P6=De("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vn=De("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dn=De("MapPin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const c4=De("Maximize2",[["polyline",{points:"15 3 21 3 21 9",key:"mznyad"}],["polyline",{points:"9 21 3 21 3 15",key:"1avn1i"}],["line",{x1:"21",x2:"14",y1:"3",y2:"10",key:"ota7mn"}],["line",{x1:"3",x2:"10",y1:"21",y2:"14",key:"1atl0r"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T6=De("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Li=De("MessageCircle",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E6=De("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bb=De("MicVocal",[["path",{d:"m11 7.601-5.994 8.19a1 1 0 0 0 .1 1.298l.817.818a1 1 0 0 0 1.314.087L15.09 12",key:"80a601"}],["path",{d:"M16.5 21.174C15.5 20.5 14.372 20 13 20c-2.058 0-3.928 2.356-6 2-2.072-.356-2.775-3.369-1.5-4.5",key:"j0ngtp"}],["circle",{cx:"16",cy:"7",r:"5",key:"d08jfb"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yn=De("Mic",[["path",{d:"M12 2a3 3 0 0 0-3 3v7a3 3 0 0 0 6 0V5a3 3 0 0 0-3-3Z",key:"131961"}],["path",{d:"M19 10v2a7 7 0 0 1-14 0v-2",key:"1vc78b"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const d4=De("Minimize2",[["polyline",{points:"4 14 10 14 10 20",key:"11kfnr"}],["polyline",{points:"20 10 14 10 14 4",key:"rlmsce"}],["line",{x1:"14",x2:"21",y1:"10",y2:"3",key:"o5lafz"}],["line",{x1:"3",x2:"10",y1:"21",y2:"14",key:"1atl0r"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lp=De("Minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qr=De("Monitor",[["rect",{width:"20",height:"14",x:"2",y:"3",rx:"2",key:"48i651"}],["line",{x1:"8",x2:"16",y1:"21",y2:"21",key:"1svkeh"}],["line",{x1:"12",x2:"12",y1:"17",y2:"21",key:"vw1qmm"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M6=De("Move",[["path",{d:"M12 2v20",key:"t6zp3m"}],["path",{d:"m15 19-3 3-3-3",key:"11eu04"}],["path",{d:"m19 9 3 3-3 3",key:"1mg7y2"}],["path",{d:"M2 12h20",key:"9i4pu4"}],["path",{d:"m5 9-3 3 3 3",key:"j64kie"}],["path",{d:"m9 5 3-3 3 3",key:"l8vdw6"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rd=De("Music2",[["circle",{cx:"8",cy:"18",r:"4",key:"1fc0mg"}],["path",{d:"M12 18V2l7 4",key:"g04rme"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ue=De("Music",[["path",{d:"M9 18V5l12-2v13",key:"1jmyc2"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["circle",{cx:"18",cy:"16",r:"3",key:"1hluhg"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _6=De("Navigation",[["polygon",{points:"3 11 22 2 13 21 11 13 3 11",key:"1ltx0t"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Na=De("Package",[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["path",{d:"m3.3 7 7.703 4.734a2 2 0 0 0 1.994 0L20.7 7",key:"yx3hmr"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const id=De("Palette",[["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["path",{d:"M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10c.926 0 1.648-.746 1.648-1.688 0-.437-.18-.835-.437-1.125-.29-.289-.438-.652-.438-1.125a1.64 1.64 0 0 1 1.668-1.668h1.996c3.051 0 5.555-2.503 5.555-5.554C21.965 6.012 17.461 2 12 2z",key:"12rzf8"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const To=De("PanelsTopLeft",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M9 21V9",key:"1oto5p"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ry=De("Pause",[["rect",{x:"14",y:"4",width:"4",height:"16",rx:"1",key:"zuxfzm"}],["rect",{x:"6",y:"4",width:"4",height:"16",rx:"1",key:"1okwgv"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const u4=De("PenLine",[["path",{d:"M12 20h9",key:"t2du7b"}],["path",{d:"M16.376 3.622a1 1 0 0 1 3.002 3.002L7.368 18.635a2 2 0 0 1-.855.506l-2.872.838a.5.5 0 0 1-.62-.62l.838-2.872a2 2 0 0 1 .506-.854z",key:"1ykcvy"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ub=De("PenTool",[["path",{d:"M15.707 21.293a1 1 0 0 1-1.414 0l-1.586-1.586a1 1 0 0 1 0-1.414l5.586-5.586a1 1 0 0 1 1.414 0l1.586 1.586a1 1 0 0 1 0 1.414z",key:"nt11vn"}],["path",{d:"m18 13-1.375-6.874a1 1 0 0 0-.746-.776L3.235 2.028a1 1 0 0 0-1.207 1.207L5.35 15.879a1 1 0 0 0 .776.746L13 18",key:"15qc1e"}],["path",{d:"m2.3 2.3 7.286 7.286",key:"1wuzzi"}],["circle",{cx:"11",cy:"11",r:"2",key:"xmgehs"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R6=De("Pen",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O6=De("Pencil",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D6=De("Percent",[["line",{x1:"19",x2:"5",y1:"5",y2:"19",key:"1x9vlm"}],["circle",{cx:"6.5",cy:"6.5",r:"2.5",key:"4mh3h7"}],["circle",{cx:"17.5",cy:"17.5",r:"2.5",key:"1mdrzq"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const op=De("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I6=De("Piano",[["path",{d:"M18.5 8c-1.4 0-2.6-.8-3.2-2A6.87 6.87 0 0 0 2 9v11a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-8.5C22 9.6 20.4 8 18.5 8",key:"lag0yf"}],["path",{d:"M2 14h20",key:"myj16y"}],["path",{d:"M6 14v4",key:"9ng0ue"}],["path",{d:"M10 14v4",key:"1v8uk5"}],["path",{d:"M14 14v4",key:"1tqops"}],["path",{d:"M18 14v4",key:"18uqwm"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gn=De("Play",[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const st=De("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lh=De("QrCode",[["rect",{width:"5",height:"5",x:"3",y:"3",rx:"1",key:"1tu5fj"}],["rect",{width:"5",height:"5",x:"16",y:"3",rx:"1",key:"1v8r4q"}],["rect",{width:"5",height:"5",x:"3",y:"16",rx:"1",key:"1x03jg"}],["path",{d:"M21 16h-3a2 2 0 0 0-2 2v3",key:"177gqh"}],["path",{d:"M21 21v.01",key:"ents32"}],["path",{d:"M12 7v3a2 2 0 0 1-2 2H7",key:"8crl2c"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M12 3h.01",key:"n36tog"}],["path",{d:"M12 16v.01",key:"133mhm"}],["path",{d:"M16 12h1",key:"1slzba"}],["path",{d:"M21 12v.01",key:"1lwtk9"}],["path",{d:"M12 21v-1",key:"1880an"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const En=De("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L6=De("Repeat",[["path",{d:"m17 2 4 4-4 4",key:"nntrym"}],["path",{d:"M3 11v-1a4 4 0 0 1 4-4h14",key:"84bu3i"}],["path",{d:"m7 22-4-4 4-4",key:"1wqhfi"}],["path",{d:"M21 13v1a4 4 0 0 1-4 4H3",key:"1rx37r"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fu=De("Rocket",[["path",{d:"M4.5 16.5c-1.5 1.26-2 5-2 5s3.74-.5 5-2c.71-.84.7-2.13-.09-2.91a2.18 2.18 0 0 0-2.91-.09z",key:"m3kijz"}],["path",{d:"m12 15-3-3a22 22 0 0 1 2-3.95A12.88 12.88 0 0 1 22 2c0 2.72-.78 7.5-6 11a22.35 22.35 0 0 1-4 2z",key:"1fmvmk"}],["path",{d:"M9 12H4s.55-3.03 2-4c1.62-1.08 5 0 5 0",key:"1f8sc4"}],["path",{d:"M12 15v5s3.03-.55 4-2c1.08-1.62 0-5 0-5",key:"qeys4"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Oy=De("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const js=De("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zb=De("Scale",[["path",{d:"m16 16 3-8 3 8c-.87.65-1.92 1-3 1s-2.13-.35-3-1Z",key:"7g6ntu"}],["path",{d:"m2 16 3-8 3 8c-.87.65-1.92 1-3 1s-2.13-.35-3-1Z",key:"ijws7r"}],["path",{d:"M7 21h10",key:"1b0cd5"}],["path",{d:"M12 3v18",key:"108xh3"}],["path",{d:"M3 7h2c2 0 5-1 7-2 2 1 5 2 7 2h2",key:"3gwbw2"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bs=De("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gr=De("Send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cp=De("Server",[["rect",{width:"20",height:"8",x:"2",y:"2",rx:"2",ry:"2",key:"ngkwjq"}],["rect",{width:"20",height:"8",x:"2",y:"14",rx:"2",ry:"2",key:"iecqi9"}],["line",{x1:"6",x2:"6.01",y1:"6",y2:"6",key:"16zg32"}],["line",{x1:"6",x2:"6.01",y1:"18",y2:"18",key:"nzw8ys"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gt=De("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dy=De("Share2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bt=De("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dp=De("ShoppingBag",[["path",{d:"M6 2 3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4Z",key:"hou9p0"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M16 10a4 4 0 0 1-8 0",key:"1ltviw"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fs=De("ShoppingCart",[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F6=De("Shuffle",[["path",{d:"M2 18h1.4c1.3 0 2.5-.6 3.3-1.7l6.1-8.6c.7-1.1 2-1.7 3.3-1.7H22",key:"1wmou1"}],["path",{d:"m18 2 4 4-4 4",key:"pucp1d"}],["path",{d:"M2 6h1.9c1.5 0 2.9.9 3.6 2.2",key:"10bdb2"}],["path",{d:"M22 18h-5.9c-1.3 0-2.6-.7-3.3-1.8l-.5-.8",key:"vgxac0"}],["path",{d:"m18 14 4 4-4 4",key:"10pe0f"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const go=De("Signature",[["path",{d:"m21 17-2.156-1.868A.5.5 0 0 0 18 15.5v.5a1 1 0 0 1-1 1h-2a1 1 0 0 1-1-1c0-2.545-3.991-3.97-8.5-4a1 1 0 0 0 0 5c4.153 0 4.745-11.295 5.708-13.5a2.5 2.5 0 1 1 3.31 3.284",key:"y32ogt"}],["path",{d:"M3 21h18",key:"itz85i"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q6=De("SkipBack",[["polygon",{points:"19 20 9 12 19 4 19 20",key:"o2sva"}],["line",{x1:"5",x2:"5",y1:"19",y2:"5",key:"1ocqjk"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const m4=De("SkipForward",[["polygon",{points:"5 4 15 12 5 20 5 4",key:"16p6eg"}],["line",{x1:"19",x2:"19",y1:"5",y2:"19",key:"futhcm"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $6=De("SlidersVertical",[["line",{x1:"4",x2:"4",y1:"21",y2:"14",key:"1p332r"}],["line",{x1:"4",x2:"4",y1:"10",y2:"3",key:"gb41h5"}],["line",{x1:"12",x2:"12",y1:"21",y2:"12",key:"hf2csr"}],["line",{x1:"12",x2:"12",y1:"8",y2:"3",key:"1kfi7u"}],["line",{x1:"20",x2:"20",y1:"21",y2:"16",key:"1lhrwl"}],["line",{x1:"20",x2:"20",y1:"12",y2:"3",key:"16vvfq"}],["line",{x1:"2",x2:"6",y1:"14",y2:"14",key:"1uebub"}],["line",{x1:"10",x2:"14",y1:"8",y2:"8",key:"1yglbp"}],["line",{x1:"18",x2:"22",y1:"16",y2:"16",key:"1jxqpz"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Iy=De("Smartphone",[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ld=De("Sparkles",[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B6=De("Speaker",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",key:"1nb95v"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["circle",{cx:"12",cy:"14",r:"4",key:"1jruaj"}],["path",{d:"M12 14h.01",key:"1etili"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $s=De("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U6=De("SquareSplitVertical",[["path",{d:"M5 8V5c0-1 1-2 2-2h10c1 0 2 1 2 2v3",key:"1pi83i"}],["path",{d:"M19 16v3c0 1-1 2-2 2H7c-1 0-2-1-2-2v-3",key:"ido5k7"}],["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rt=De("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const up=De("Tag",[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Es=De("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z6=De("Timer",[["line",{x1:"10",x2:"14",y1:"2",y2:"2",key:"14vaq8"}],["line",{x1:"12",x2:"15",y1:"14",y2:"11",key:"17fdiu"}],["circle",{cx:"12",cy:"14",r:"8",key:"1e1u0o"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vt=De("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xx=De("TrendingDown",[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Is=De("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ys=De("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rh=De("Trophy",[["path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5H6",key:"17hqa7"}],["path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5H18",key:"lmptdp"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22",key:"1nw9bq"}],["path",{d:"M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22",key:"1np0yb"}],["path",{d:"M18 2H6v7a6 6 0 0 0 12 0V2Z",key:"u46fv3"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _i=De("Type",[["polyline",{points:"4 7 4 4 20 4 20 7",key:"1nosan"}],["line",{x1:"9",x2:"15",y1:"20",y2:"20",key:"swin9y"}],["line",{x1:"12",x2:"12",y1:"4",y2:"20",key:"1tx1rr"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xs=De("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ta=De("UserCheck",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["polyline",{points:"16 11 18 13 22 9",key:"1pwet4"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hr=De("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cn=De("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ze=De("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V6=De("Utensils",[["path",{d:"M3 2v7c0 1.1.9 2 2 2h4a2 2 0 0 0 2-2V2",key:"cjf0a3"}],["path",{d:"M7 2v20",key:"1473qp"}],["path",{d:"M21 15V2a5 5 0 0 0-5 5v6c0 1.1.9 2 2 2h3Zm0 0v7",key:"j28e5"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ca=De("Video",[["path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5",key:"ftymec"}],["rect",{x:"2",y:"6",width:"14",height:"12",rx:"2",key:"158x01"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qa=De("Volume2",[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["path",{d:"M16 9a5 5 0 0 1 0 6",key:"1q6k2b"}],["path",{d:"M19.364 18.364a9 9 0 0 0 0-12.728",key:"ijwkga"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mp=De("VolumeX",[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["line",{x1:"22",x2:"16",y1:"9",y2:"15",key:"1ewh16"}],["line",{x1:"16",x2:"22",y1:"9",y2:"15",key:"5ykzw1"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fj=De("WandSparkles",[["path",{d:"m21.64 3.64-1.28-1.28a1.21 1.21 0 0 0-1.72 0L2.36 18.64a1.21 1.21 0 0 0 0 1.72l1.28 1.28a1.2 1.2 0 0 0 1.72 0L21.64 5.36a1.2 1.2 0 0 0 0-1.72",key:"ul74o6"}],["path",{d:"m14 7 3 3",key:"1r5n42"}],["path",{d:"M5 6v4",key:"ilb8ba"}],["path",{d:"M19 14v4",key:"blhpug"}],["path",{d:"M10 2v2",key:"7u0qdc"}],["path",{d:"M7 8H3",key:"zfb6yr"}],["path",{d:"M21 16h-4",key:"1cnmox"}],["path",{d:"M11 3H9",key:"1obp7u"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G6=De("WifiOff",[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}],["path",{d:"M5 12.859a10 10 0 0 1 5.17-2.69",key:"1dl1wf"}],["path",{d:"M19 12.859a10 10 0 0 0-2.007-1.523",key:"4k23kn"}],["path",{d:"M2 8.82a15 15 0 0 1 4.177-2.643",key:"1grhjp"}],["path",{d:"M22 8.82a15 15 0 0 0-11.288-3.764",key:"z3jwby"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W6=De("Wifi",[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M2 8.82a15 15 0 0 1 20 0",key:"dnpr2z"}],["path",{d:"M5 12.859a10 10 0 0 1 14 0",key:"1x1e6c"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ya=De("Wrench",[["path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z",key:"cbrjhi"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xt=De("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H6=De("Youtube",[["path",{d:"M2.5 17a24.12 24.12 0 0 1 0-10 2 2 0 0 1 1.4-1.4 49.56 49.56 0 0 1 16.2 0A2 2 0 0 1 21.5 7a24.12 24.12 0 0 1 0 10 2 2 0 0 1-1.4 1.4 49.55 49.55 0 0 1-16.2 0A2 2 0 0 1 2.5 17",key:"1q2vi4"}],["path",{d:"m10 15 5-3-5-3z",key:"1jp15x"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const In=De("Zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]),Ly="-",K6=t=>{const s=Q6(t),{conflictingClassGroups:n,conflictingClassGroupModifiers:a}=t;return{getClassGroupId:l=>{const c=l.split(Ly);return c[0]===""&&c.length!==1&&c.shift(),h4(c,s)||Y6(l)},getConflictingClassGroupIds:(l,c)=>{const o=n[l]||[];return c&&a[l]?[...o,...a[l]]:o}}},h4=(t,s)=>{var l;if(t.length===0)return s.classGroupId;const n=t[0],a=s.nextPart.get(n),r=a?h4(t.slice(1),a):void 0;if(r)return r;if(s.validators.length===0)return;const i=t.join(Ly);return(l=s.validators.find(({validator:c})=>c(i)))==null?void 0:l.classGroupId},Vb=/^\[(.+)\]$/,Y6=t=>{if(Vb.test(t)){const s=Vb.exec(t)[1],n=s==null?void 0:s.substring(0,s.indexOf(":"));if(n)return"arbitrary.."+n}},Q6=t=>{const{theme:s,prefix:n}=t,a={nextPart:new Map,validators:[]};return X6(Object.entries(t.classGroups),n).forEach(([i,l])=>{qj(l,a,i,s)}),a},qj=(t,s,n,a)=>{t.forEach(r=>{if(typeof r=="string"){const i=r===""?s:Gb(s,r);i.classGroupId=n;return}if(typeof r=="function"){if(Z6(r)){qj(r(a),s,n,a);return}s.validators.push({validator:r,classGroupId:n});return}Object.entries(r).forEach(([i,l])=>{qj(l,Gb(s,i),n,a)})})},Gb=(t,s)=>{let n=t;return s.split(Ly).forEach(a=>{n.nextPart.has(a)||n.nextPart.set(a,{nextPart:new Map,validators:[]}),n=n.nextPart.get(a)}),n},Z6=t=>t.isThemeGetter,X6=(t,s)=>s?t.map(([n,a])=>{const r=a.map(i=>typeof i=="string"?s+i:typeof i=="object"?Object.fromEntries(Object.entries(i).map(([l,c])=>[s+l,c])):i);return[n,r]}):t,J6=t=>{if(t<1)return{get:()=>{},set:()=>{}};let s=0,n=new Map,a=new Map;const r=(i,l)=>{n.set(i,l),s++,s>t&&(s=0,a=n,n=new Map)};return{get(i){let l=n.get(i);if(l!==void 0)return l;if((l=a.get(i))!==void 0)return r(i,l),l},set(i,l){n.has(i)?n.set(i,l):r(i,l)}}},x4="!",eO=t=>{const{separator:s,experimentalParseClassName:n}=t,a=s.length===1,r=s[0],i=s.length,l=c=>{const o=[];let d=0,h=0,u;for(let v=0;v<c.length;v++){let y=c[v];if(d===0){if(y===r&&(a||c.slice(v,v+i)===s)){o.push(c.slice(h,v)),h=v+i;continue}if(y==="/"){u=v;continue}}y==="["?d++:y==="]"&&d--}const m=o.length===0?c:c.substring(h),p=m.startsWith(x4),g=p?m.substring(1):m,x=u&&u>h?u-h:void 0;return{modifiers:o,hasImportantModifier:p,baseClassName:g,maybePostfixModifierPosition:x}};return n?c=>n({className:c,parseClassName:l}):l},tO=t=>{if(t.length<=1)return t;const s=[];let n=[];return t.forEach(a=>{a[0]==="["?(s.push(...n.sort(),a),n=[]):n.push(a)}),s.push(...n.sort()),s},sO=t=>({cache:J6(t.cacheSize),parseClassName:eO(t),...K6(t)}),nO=/\s+/,aO=(t,s)=>{const{parseClassName:n,getClassGroupId:a,getConflictingClassGroupIds:r}=s,i=[],l=t.trim().split(nO);let c="";for(let o=l.length-1;o>=0;o-=1){const d=l[o],{modifiers:h,hasImportantModifier:u,baseClassName:m,maybePostfixModifierPosition:p}=n(d);let g=!!p,x=a(g?m.substring(0,p):m);if(!x){if(!g){c=d+(c.length>0?" "+c:c);continue}if(x=a(m),!x){c=d+(c.length>0?" "+c:c);continue}g=!1}const v=tO(h).join(":"),y=u?v+x4:v,f=y+x;if(i.includes(f))continue;i.push(f);const b=r(x,g);for(let j=0;j<b.length;++j){const S=b[j];i.push(y+S)}c=d+(c.length>0?" "+c:c)}return c};function rO(){let t=0,s,n,a="";for(;t<arguments.length;)(s=arguments[t++])&&(n=p4(s))&&(a&&(a+=" "),a+=n);return a}const p4=t=>{if(typeof t=="string")return t;let s,n="";for(let a=0;a<t.length;a++)t[a]&&(s=p4(t[a]))&&(n&&(n+=" "),n+=s);return n};function iO(t,...s){let n,a,r,i=l;function l(o){const d=s.reduce((h,u)=>u(h),t());return n=sO(d),a=n.cache.get,r=n.cache.set,i=c,c(o)}function c(o){const d=a(o);if(d)return d;const h=aO(o,n);return r(o,h),h}return function(){return i(rO.apply(null,arguments))}}const Hs=t=>{const s=n=>n[t]||[];return s.isThemeGetter=!0,s},f4=/^\[(?:([a-z-]+):)?(.+)\]$/i,lO=/^\d+\/\d+$/,oO=new Set(["px","full","screen"]),cO=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,dO=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,uO=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,mO=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,hO=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,yi=t=>Mc(t)||oO.has(t)||lO.test(t),Ji=t=>wd(t,"length",NO),Mc=t=>!!t&&!Number.isNaN(Number(t)),Vf=t=>wd(t,"number",Mc),Vd=t=>!!t&&Number.isInteger(Number(t)),xO=t=>t.endsWith("%")&&Mc(t.slice(0,-1)),rs=t=>f4.test(t),el=t=>cO.test(t),pO=new Set(["length","size","percentage"]),fO=t=>wd(t,pO,g4),gO=t=>wd(t,"position",g4),jO=new Set(["image","url"]),vO=t=>wd(t,jO,wO),yO=t=>wd(t,"",bO),Gd=()=>!0,wd=(t,s,n)=>{const a=f4.exec(t);return a?a[1]?typeof s=="string"?a[1]===s:s.has(a[1]):n(a[2]):!1},NO=t=>dO.test(t)&&!uO.test(t),g4=()=>!1,bO=t=>mO.test(t),wO=t=>hO.test(t),SO=()=>{const t=Hs("colors"),s=Hs("spacing"),n=Hs("blur"),a=Hs("brightness"),r=Hs("borderColor"),i=Hs("borderRadius"),l=Hs("borderSpacing"),c=Hs("borderWidth"),o=Hs("contrast"),d=Hs("grayscale"),h=Hs("hueRotate"),u=Hs("invert"),m=Hs("gap"),p=Hs("gradientColorStops"),g=Hs("gradientColorStopPositions"),x=Hs("inset"),v=Hs("margin"),y=Hs("opacity"),f=Hs("padding"),b=Hs("saturate"),j=Hs("scale"),S=Hs("sepia"),k=Hs("skew"),T=Hs("space"),A=Hs("translate"),C=()=>["auto","contain","none"],w=()=>["auto","hidden","clip","visible","scroll"],P=()=>["auto",rs,s],M=()=>[rs,s],I=()=>["",yi,Ji],W=()=>["auto",Mc,rs],_=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],B=()=>["solid","dashed","dotted","double","none"],O=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],z=()=>["start","end","center","between","around","evenly","stretch"],F=()=>["","0",rs],K=()=>["auto","avoid","all","avoid-page","page","left","right","column"],D=()=>[Mc,rs];return{cacheSize:500,separator:":",theme:{colors:[Gd],spacing:[yi,Ji],blur:["none","",el,rs],brightness:D(),borderColor:[t],borderRadius:["none","","full",el,rs],borderSpacing:M(),borderWidth:I(),contrast:D(),grayscale:F(),hueRotate:D(),invert:F(),gap:M(),gradientColorStops:[t],gradientColorStopPositions:[xO,Ji],inset:P(),margin:P(),opacity:D(),padding:M(),saturate:D(),scale:D(),sepia:F(),skew:D(),space:M(),translate:M()},classGroups:{aspect:[{aspect:["auto","square","video",rs]}],container:["container"],columns:[{columns:[el]}],"break-after":[{"break-after":K()}],"break-before":[{"break-before":K()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[..._(),rs]}],overflow:[{overflow:w()}],"overflow-x":[{"overflow-x":w()}],"overflow-y":[{"overflow-y":w()}],overscroll:[{overscroll:C()}],"overscroll-x":[{"overscroll-x":C()}],"overscroll-y":[{"overscroll-y":C()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[x]}],"inset-x":[{"inset-x":[x]}],"inset-y":[{"inset-y":[x]}],start:[{start:[x]}],end:[{end:[x]}],top:[{top:[x]}],right:[{right:[x]}],bottom:[{bottom:[x]}],left:[{left:[x]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",Vd,rs]}],basis:[{basis:P()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",rs]}],grow:[{grow:F()}],shrink:[{shrink:F()}],order:[{order:["first","last","none",Vd,rs]}],"grid-cols":[{"grid-cols":[Gd]}],"col-start-end":[{col:["auto",{span:["full",Vd,rs]},rs]}],"col-start":[{"col-start":W()}],"col-end":[{"col-end":W()}],"grid-rows":[{"grid-rows":[Gd]}],"row-start-end":[{row:["auto",{span:[Vd,rs]},rs]}],"row-start":[{"row-start":W()}],"row-end":[{"row-end":W()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",rs]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",rs]}],gap:[{gap:[m]}],"gap-x":[{"gap-x":[m]}],"gap-y":[{"gap-y":[m]}],"justify-content":[{justify:["normal",...z()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...z(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...z(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[f]}],px:[{px:[f]}],py:[{py:[f]}],ps:[{ps:[f]}],pe:[{pe:[f]}],pt:[{pt:[f]}],pr:[{pr:[f]}],pb:[{pb:[f]}],pl:[{pl:[f]}],m:[{m:[v]}],mx:[{mx:[v]}],my:[{my:[v]}],ms:[{ms:[v]}],me:[{me:[v]}],mt:[{mt:[v]}],mr:[{mr:[v]}],mb:[{mb:[v]}],ml:[{ml:[v]}],"space-x":[{"space-x":[T]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[T]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",rs,s]}],"min-w":[{"min-w":[rs,s,"min","max","fit"]}],"max-w":[{"max-w":[rs,s,"none","full","min","max","fit","prose",{screen:[el]},el]}],h:[{h:[rs,s,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[rs,s,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[rs,s,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[rs,s,"auto","min","max","fit"]}],"font-size":[{text:["base",el,Ji]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",Vf]}],"font-family":[{font:[Gd]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",rs]}],"line-clamp":[{"line-clamp":["none",Mc,Vf]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",yi,rs]}],"list-image":[{"list-image":["none",rs]}],"list-style-type":[{list:["none","disc","decimal",rs]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[t]}],"placeholder-opacity":[{"placeholder-opacity":[y]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[t]}],"text-opacity":[{"text-opacity":[y]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...B(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",yi,Ji]}],"underline-offset":[{"underline-offset":["auto",yi,rs]}],"text-decoration-color":[{decoration:[t]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:M()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",rs]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",rs]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[y]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[..._(),gO]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",fO]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},vO]}],"bg-color":[{bg:[t]}],"gradient-from-pos":[{from:[g]}],"gradient-via-pos":[{via:[g]}],"gradient-to-pos":[{to:[g]}],"gradient-from":[{from:[p]}],"gradient-via":[{via:[p]}],"gradient-to":[{to:[p]}],rounded:[{rounded:[i]}],"rounded-s":[{"rounded-s":[i]}],"rounded-e":[{"rounded-e":[i]}],"rounded-t":[{"rounded-t":[i]}],"rounded-r":[{"rounded-r":[i]}],"rounded-b":[{"rounded-b":[i]}],"rounded-l":[{"rounded-l":[i]}],"rounded-ss":[{"rounded-ss":[i]}],"rounded-se":[{"rounded-se":[i]}],"rounded-ee":[{"rounded-ee":[i]}],"rounded-es":[{"rounded-es":[i]}],"rounded-tl":[{"rounded-tl":[i]}],"rounded-tr":[{"rounded-tr":[i]}],"rounded-br":[{"rounded-br":[i]}],"rounded-bl":[{"rounded-bl":[i]}],"border-w":[{border:[c]}],"border-w-x":[{"border-x":[c]}],"border-w-y":[{"border-y":[c]}],"border-w-s":[{"border-s":[c]}],"border-w-e":[{"border-e":[c]}],"border-w-t":[{"border-t":[c]}],"border-w-r":[{"border-r":[c]}],"border-w-b":[{"border-b":[c]}],"border-w-l":[{"border-l":[c]}],"border-opacity":[{"border-opacity":[y]}],"border-style":[{border:[...B(),"hidden"]}],"divide-x":[{"divide-x":[c]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[c]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[y]}],"divide-style":[{divide:B()}],"border-color":[{border:[r]}],"border-color-x":[{"border-x":[r]}],"border-color-y":[{"border-y":[r]}],"border-color-s":[{"border-s":[r]}],"border-color-e":[{"border-e":[r]}],"border-color-t":[{"border-t":[r]}],"border-color-r":[{"border-r":[r]}],"border-color-b":[{"border-b":[r]}],"border-color-l":[{"border-l":[r]}],"divide-color":[{divide:[r]}],"outline-style":[{outline:["",...B()]}],"outline-offset":[{"outline-offset":[yi,rs]}],"outline-w":[{outline:[yi,Ji]}],"outline-color":[{outline:[t]}],"ring-w":[{ring:I()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[t]}],"ring-opacity":[{"ring-opacity":[y]}],"ring-offset-w":[{"ring-offset":[yi,Ji]}],"ring-offset-color":[{"ring-offset":[t]}],shadow:[{shadow:["","inner","none",el,yO]}],"shadow-color":[{shadow:[Gd]}],opacity:[{opacity:[y]}],"mix-blend":[{"mix-blend":[...O(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":O()}],filter:[{filter:["","none"]}],blur:[{blur:[n]}],brightness:[{brightness:[a]}],contrast:[{contrast:[o]}],"drop-shadow":[{"drop-shadow":["","none",el,rs]}],grayscale:[{grayscale:[d]}],"hue-rotate":[{"hue-rotate":[h]}],invert:[{invert:[u]}],saturate:[{saturate:[b]}],sepia:[{sepia:[S]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[n]}],"backdrop-brightness":[{"backdrop-brightness":[a]}],"backdrop-contrast":[{"backdrop-contrast":[o]}],"backdrop-grayscale":[{"backdrop-grayscale":[d]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[h]}],"backdrop-invert":[{"backdrop-invert":[u]}],"backdrop-opacity":[{"backdrop-opacity":[y]}],"backdrop-saturate":[{"backdrop-saturate":[b]}],"backdrop-sepia":[{"backdrop-sepia":[S]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[l]}],"border-spacing-x":[{"border-spacing-x":[l]}],"border-spacing-y":[{"border-spacing-y":[l]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",rs]}],duration:[{duration:D()}],ease:[{ease:["linear","in","out","in-out",rs]}],delay:[{delay:D()}],animate:[{animate:["none","spin","ping","pulse","bounce",rs]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[j]}],"scale-x":[{"scale-x":[j]}],"scale-y":[{"scale-y":[j]}],rotate:[{rotate:[Vd,rs]}],"translate-x":[{"translate-x":[A]}],"translate-y":[{"translate-y":[A]}],"skew-x":[{"skew-x":[k]}],"skew-y":[{"skew-y":[k]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",rs]}],accent:[{accent:["auto",t]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",rs]}],"caret-color":[{caret:[t]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":M()}],"scroll-mx":[{"scroll-mx":M()}],"scroll-my":[{"scroll-my":M()}],"scroll-ms":[{"scroll-ms":M()}],"scroll-me":[{"scroll-me":M()}],"scroll-mt":[{"scroll-mt":M()}],"scroll-mr":[{"scroll-mr":M()}],"scroll-mb":[{"scroll-mb":M()}],"scroll-ml":[{"scroll-ml":M()}],"scroll-p":[{"scroll-p":M()}],"scroll-px":[{"scroll-px":M()}],"scroll-py":[{"scroll-py":M()}],"scroll-ps":[{"scroll-ps":M()}],"scroll-pe":[{"scroll-pe":M()}],"scroll-pt":[{"scroll-pt":M()}],"scroll-pr":[{"scroll-pr":M()}],"scroll-pb":[{"scroll-pb":M()}],"scroll-pl":[{"scroll-pl":M()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",rs]}],fill:[{fill:[t,"none"]}],"stroke-w":[{stroke:[yi,Ji,Vf]}],stroke:[{stroke:[t,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},CO=iO(SO);function Je(...t){return CO(JC(t))}function lr(t,s="USD"){return new Intl.NumberFormat("en-US",{style:"currency",currency:s,minimumFractionDigits:0,maximumFractionDigits:2}).format(t)}const kO=ZC,j4=N.forwardRef(({className:t,...s},n)=>e.jsx(Cy,{ref:n,className:Je("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",t),...s}));j4.displayName=Cy.displayName;const AO=fm("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),v4=N.forwardRef(({className:t,variant:s,...n},a)=>e.jsx(ky,{ref:a,className:Je(AO({variant:s}),t),...n}));v4.displayName=ky.displayName;const PO=N.forwardRef(({className:t,...s},n)=>e.jsx(Ty,{ref:n,className:Je("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",t),...s}));PO.displayName=Ty.displayName;const y4=N.forwardRef(({className:t,...s},n)=>e.jsx(Ey,{ref:n,className:Je("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",t),"toast-close":"",...s,children:e.jsx(Xt,{className:"h-4 w-4"})}));y4.displayName=Ey.displayName;const N4=N.forwardRef(({className:t,...s},n)=>e.jsx(Ay,{ref:n,className:Je("text-sm font-semibold",t),...s}));N4.displayName=Ay.displayName;const b4=N.forwardRef(({className:t,...s},n)=>e.jsx(Py,{ref:n,className:Je("text-sm opacity-90",t),...s}));b4.displayName=Py.displayName;function TO(){const{toasts:t}=nt();return e.jsxs(kO,{children:[t.map(function({id:s,title:n,description:a,action:r,...i}){return e.jsxs(v4,{...i,children:[e.jsxs("div",{className:"grid gap-1",children:[n&&e.jsx(N4,{children:n}),a&&e.jsx(b4,{children:a})]}),r,e.jsx(y4,{})]},s)}),e.jsx(j4,{})]})}var EO=s2[" useId ".trim().toString()]||(()=>{}),MO=0;function jr(t){const[s,n]=N.useState(EO());return Nn(()=>{n(a=>a??String(MO++))},[t]),s?`radix-${s}`:""}const _O=["top","right","bottom","left"],zl=Math.min,Ya=Math.max,px=Math.round,oh=Math.floor,di=t=>({x:t,y:t}),RO={left:"right",right:"left",bottom:"top",top:"bottom"},OO={start:"end",end:"start"};function $j(t,s,n){return Ya(t,zl(s,n))}function Gi(t,s){return typeof t=="function"?t(s):t}function Wi(t){return t.split("-")[0]}function Sd(t){return t.split("-")[1]}function Fy(t){return t==="x"?"y":"x"}function qy(t){return t==="y"?"height":"width"}function Vl(t){return["top","bottom"].includes(Wi(t))?"y":"x"}function $y(t){return Fy(Vl(t))}function DO(t,s,n){n===void 0&&(n=!1);const a=Sd(t),r=$y(t),i=qy(r);let l=r==="x"?a===(n?"end":"start")?"right":"left":a==="start"?"bottom":"top";return s.reference[i]>s.floating[i]&&(l=fx(l)),[l,fx(l)]}function IO(t){const s=fx(t);return[Bj(t),s,Bj(s)]}function Bj(t){return t.replace(/start|end/g,s=>OO[s])}function LO(t,s,n){const a=["left","right"],r=["right","left"],i=["top","bottom"],l=["bottom","top"];switch(t){case"top":case"bottom":return n?s?r:a:s?a:r;case"left":case"right":return s?i:l;default:return[]}}function FO(t,s,n,a){const r=Sd(t);let i=LO(Wi(t),n==="start",a);return r&&(i=i.map(l=>l+"-"+r),s&&(i=i.concat(i.map(Bj)))),i}function fx(t){return t.replace(/left|right|bottom|top/g,s=>RO[s])}function qO(t){return{top:0,right:0,bottom:0,left:0,...t}}function w4(t){return typeof t!="number"?qO(t):{top:t,right:t,bottom:t,left:t}}function gx(t){const{x:s,y:n,width:a,height:r}=t;return{width:a,height:r,top:n,left:s,right:s+a,bottom:n+r,x:s,y:n}}function Wb(t,s,n){let{reference:a,floating:r}=t;const i=Vl(s),l=$y(s),c=qy(l),o=Wi(s),d=i==="y",h=a.x+a.width/2-r.width/2,u=a.y+a.height/2-r.height/2,m=a[c]/2-r[c]/2;let p;switch(o){case"top":p={x:h,y:a.y-r.height};break;case"bottom":p={x:h,y:a.y+a.height};break;case"right":p={x:a.x+a.width,y:u};break;case"left":p={x:a.x-r.width,y:u};break;default:p={x:a.x,y:a.y}}switch(Sd(s)){case"start":p[l]-=m*(n&&d?-1:1);break;case"end":p[l]+=m*(n&&d?-1:1);break}return p}const $O=async(t,s,n)=>{const{placement:a="bottom",strategy:r="absolute",middleware:i=[],platform:l}=n,c=i.filter(Boolean),o=await(l.isRTL==null?void 0:l.isRTL(s));let d=await l.getElementRects({reference:t,floating:s,strategy:r}),{x:h,y:u}=Wb(d,a,o),m=a,p={},g=0;for(let x=0;x<c.length;x++){const{name:v,fn:y}=c[x],{x:f,y:b,data:j,reset:S}=await y({x:h,y:u,initialPlacement:a,placement:m,strategy:r,middlewareData:p,rects:d,platform:l,elements:{reference:t,floating:s}});h=f??h,u=b??u,p={...p,[v]:{...p[v],...j}},S&&g<=50&&(g++,typeof S=="object"&&(S.placement&&(m=S.placement),S.rects&&(d=S.rects===!0?await l.getElementRects({reference:t,floating:s,strategy:r}):S.rects),{x:h,y:u}=Wb(d,m,o)),x=-1)}return{x:h,y:u,placement:m,strategy:r,middlewareData:p}};async function qu(t,s){var n;s===void 0&&(s={});const{x:a,y:r,platform:i,rects:l,elements:c,strategy:o}=t,{boundary:d="clippingAncestors",rootBoundary:h="viewport",elementContext:u="floating",altBoundary:m=!1,padding:p=0}=Gi(s,t),g=w4(p),v=c[m?u==="floating"?"reference":"floating":u],y=gx(await i.getClippingRect({element:(n=await(i.isElement==null?void 0:i.isElement(v)))==null||n?v:v.contextElement||await(i.getDocumentElement==null?void 0:i.getDocumentElement(c.floating)),boundary:d,rootBoundary:h,strategy:o})),f=u==="floating"?{x:a,y:r,width:l.floating.width,height:l.floating.height}:l.reference,b=await(i.getOffsetParent==null?void 0:i.getOffsetParent(c.floating)),j=await(i.isElement==null?void 0:i.isElement(b))?await(i.getScale==null?void 0:i.getScale(b))||{x:1,y:1}:{x:1,y:1},S=gx(i.convertOffsetParentRelativeRectToViewportRelativeRect?await i.convertOffsetParentRelativeRectToViewportRelativeRect({elements:c,rect:f,offsetParent:b,strategy:o}):f);return{top:(y.top-S.top+g.top)/j.y,bottom:(S.bottom-y.bottom+g.bottom)/j.y,left:(y.left-S.left+g.left)/j.x,right:(S.right-y.right+g.right)/j.x}}const BO=t=>({name:"arrow",options:t,async fn(s){const{x:n,y:a,placement:r,rects:i,platform:l,elements:c,middlewareData:o}=s,{element:d,padding:h=0}=Gi(t,s)||{};if(d==null)return{};const u=w4(h),m={x:n,y:a},p=$y(r),g=qy(p),x=await l.getDimensions(d),v=p==="y",y=v?"top":"left",f=v?"bottom":"right",b=v?"clientHeight":"clientWidth",j=i.reference[g]+i.reference[p]-m[p]-i.floating[g],S=m[p]-i.reference[p],k=await(l.getOffsetParent==null?void 0:l.getOffsetParent(d));let T=k?k[b]:0;(!T||!await(l.isElement==null?void 0:l.isElement(k)))&&(T=c.floating[b]||i.floating[g]);const A=j/2-S/2,C=T/2-x[g]/2-1,w=zl(u[y],C),P=zl(u[f],C),M=w,I=T-x[g]-P,W=T/2-x[g]/2+A,_=$j(M,W,I),B=!o.arrow&&Sd(r)!=null&&W!==_&&i.reference[g]/2-(W<M?w:P)-x[g]/2<0,O=B?W<M?W-M:W-I:0;return{[p]:m[p]+O,data:{[p]:_,centerOffset:W-_-O,...B&&{alignmentOffset:O}},reset:B}}}),UO=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(s){var n,a;const{placement:r,middlewareData:i,rects:l,initialPlacement:c,platform:o,elements:d}=s,{mainAxis:h=!0,crossAxis:u=!0,fallbackPlacements:m,fallbackStrategy:p="bestFit",fallbackAxisSideDirection:g="none",flipAlignment:x=!0,...v}=Gi(t,s);if((n=i.arrow)!=null&&n.alignmentOffset)return{};const y=Wi(r),f=Vl(c),b=Wi(c)===c,j=await(o.isRTL==null?void 0:o.isRTL(d.floating)),S=m||(b||!x?[fx(c)]:IO(c)),k=g!=="none";!m&&k&&S.push(...FO(c,x,g,j));const T=[c,...S],A=await qu(s,v),C=[];let w=((a=i.flip)==null?void 0:a.overflows)||[];if(h&&C.push(A[y]),u){const W=DO(r,l,j);C.push(A[W[0]],A[W[1]])}if(w=[...w,{placement:r,overflows:C}],!C.every(W=>W<=0)){var P,M;const W=(((P=i.flip)==null?void 0:P.index)||0)+1,_=T[W];if(_)return{data:{index:W,overflows:w},reset:{placement:_}};let B=(M=w.filter(O=>O.overflows[0]<=0).sort((O,z)=>O.overflows[1]-z.overflows[1])[0])==null?void 0:M.placement;if(!B)switch(p){case"bestFit":{var I;const O=(I=w.filter(z=>{if(k){const F=Vl(z.placement);return F===f||F==="y"}return!0}).map(z=>[z.placement,z.overflows.filter(F=>F>0).reduce((F,K)=>F+K,0)]).sort((z,F)=>z[1]-F[1])[0])==null?void 0:I[0];O&&(B=O);break}case"initialPlacement":B=c;break}if(r!==B)return{reset:{placement:B}}}return{}}}};function Hb(t,s){return{top:t.top-s.height,right:t.right-s.width,bottom:t.bottom-s.height,left:t.left-s.width}}function Kb(t){return _O.some(s=>t[s]>=0)}const zO=function(t){return t===void 0&&(t={}),{name:"hide",options:t,async fn(s){const{rects:n}=s,{strategy:a="referenceHidden",...r}=Gi(t,s);switch(a){case"referenceHidden":{const i=await qu(s,{...r,elementContext:"reference"}),l=Hb(i,n.reference);return{data:{referenceHiddenOffsets:l,referenceHidden:Kb(l)}}}case"escaped":{const i=await qu(s,{...r,altBoundary:!0}),l=Hb(i,n.floating);return{data:{escapedOffsets:l,escaped:Kb(l)}}}default:return{}}}}};async function VO(t,s){const{placement:n,platform:a,elements:r}=t,i=await(a.isRTL==null?void 0:a.isRTL(r.floating)),l=Wi(n),c=Sd(n),o=Vl(n)==="y",d=["left","top"].includes(l)?-1:1,h=i&&o?-1:1,u=Gi(s,t);let{mainAxis:m,crossAxis:p,alignmentAxis:g}=typeof u=="number"?{mainAxis:u,crossAxis:0,alignmentAxis:null}:{mainAxis:u.mainAxis||0,crossAxis:u.crossAxis||0,alignmentAxis:u.alignmentAxis};return c&&typeof g=="number"&&(p=c==="end"?g*-1:g),o?{x:p*h,y:m*d}:{x:m*d,y:p*h}}const GO=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(s){var n,a;const{x:r,y:i,placement:l,middlewareData:c}=s,o=await VO(s,t);return l===((n=c.offset)==null?void 0:n.placement)&&(a=c.arrow)!=null&&a.alignmentOffset?{}:{x:r+o.x,y:i+o.y,data:{...o,placement:l}}}}},WO=function(t){return t===void 0&&(t={}),{name:"shift",options:t,async fn(s){const{x:n,y:a,placement:r}=s,{mainAxis:i=!0,crossAxis:l=!1,limiter:c={fn:v=>{let{x:y,y:f}=v;return{x:y,y:f}}},...o}=Gi(t,s),d={x:n,y:a},h=await qu(s,o),u=Vl(Wi(r)),m=Fy(u);let p=d[m],g=d[u];if(i){const v=m==="y"?"top":"left",y=m==="y"?"bottom":"right",f=p+h[v],b=p-h[y];p=$j(f,p,b)}if(l){const v=u==="y"?"top":"left",y=u==="y"?"bottom":"right",f=g+h[v],b=g-h[y];g=$j(f,g,b)}const x=c.fn({...s,[m]:p,[u]:g});return{...x,data:{x:x.x-n,y:x.y-a,enabled:{[m]:i,[u]:l}}}}}},HO=function(t){return t===void 0&&(t={}),{options:t,fn(s){const{x:n,y:a,placement:r,rects:i,middlewareData:l}=s,{offset:c=0,mainAxis:o=!0,crossAxis:d=!0}=Gi(t,s),h={x:n,y:a},u=Vl(r),m=Fy(u);let p=h[m],g=h[u];const x=Gi(c,s),v=typeof x=="number"?{mainAxis:x,crossAxis:0}:{mainAxis:0,crossAxis:0,...x};if(o){const b=m==="y"?"height":"width",j=i.reference[m]-i.floating[b]+v.mainAxis,S=i.reference[m]+i.reference[b]-v.mainAxis;p<j?p=j:p>S&&(p=S)}if(d){var y,f;const b=m==="y"?"width":"height",j=["top","left"].includes(Wi(r)),S=i.reference[u]-i.floating[b]+(j&&((y=l.offset)==null?void 0:y[u])||0)+(j?0:v.crossAxis),k=i.reference[u]+i.reference[b]+(j?0:((f=l.offset)==null?void 0:f[u])||0)-(j?v.crossAxis:0);g<S?g=S:g>k&&(g=k)}return{[m]:p,[u]:g}}}},KO=function(t){return t===void 0&&(t={}),{name:"size",options:t,async fn(s){var n,a;const{placement:r,rects:i,platform:l,elements:c}=s,{apply:o=()=>{},...d}=Gi(t,s),h=await qu(s,d),u=Wi(r),m=Sd(r),p=Vl(r)==="y",{width:g,height:x}=i.floating;let v,y;u==="top"||u==="bottom"?(v=u,y=m===(await(l.isRTL==null?void 0:l.isRTL(c.floating))?"start":"end")?"left":"right"):(y=u,v=m==="end"?"top":"bottom");const f=x-h.top-h.bottom,b=g-h.left-h.right,j=zl(x-h[v],f),S=zl(g-h[y],b),k=!s.middlewareData.shift;let T=j,A=S;if((n=s.middlewareData.shift)!=null&&n.enabled.x&&(A=b),(a=s.middlewareData.shift)!=null&&a.enabled.y&&(T=f),k&&!m){const w=Ya(h.left,0),P=Ya(h.right,0),M=Ya(h.top,0),I=Ya(h.bottom,0);p?A=g-2*(w!==0||P!==0?w+P:Ya(h.left,h.right)):T=x-2*(M!==0||I!==0?M+I:Ya(h.top,h.bottom))}await o({...s,availableWidth:A,availableHeight:T});const C=await l.getDimensions(c.floating);return g!==C.width||x!==C.height?{reset:{rects:!0}}:{}}}};function hp(){return typeof window<"u"}function Cd(t){return S4(t)?(t.nodeName||"").toLowerCase():"#document"}function er(t){var s;return(t==null||(s=t.ownerDocument)==null?void 0:s.defaultView)||window}function gi(t){var s;return(s=(S4(t)?t.ownerDocument:t.document)||window.document)==null?void 0:s.documentElement}function S4(t){return hp()?t instanceof Node||t instanceof er(t).Node:!1}function Ur(t){return hp()?t instanceof Element||t instanceof er(t).Element:!1}function mi(t){return hp()?t instanceof HTMLElement||t instanceof er(t).HTMLElement:!1}function Yb(t){return!hp()||typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof er(t).ShadowRoot}function jm(t){const{overflow:s,overflowX:n,overflowY:a,display:r}=zr(t);return/auto|scroll|overlay|hidden|clip/.test(s+a+n)&&!["inline","contents"].includes(r)}function YO(t){return["table","td","th"].includes(Cd(t))}function xp(t){return[":popover-open",":modal"].some(s=>{try{return t.matches(s)}catch{return!1}})}function By(t){const s=Uy(),n=Ur(t)?zr(t):t;return["transform","translate","scale","rotate","perspective"].some(a=>n[a]?n[a]!=="none":!1)||(n.containerType?n.containerType!=="normal":!1)||!s&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!s&&(n.filter?n.filter!=="none":!1)||["transform","translate","scale","rotate","perspective","filter"].some(a=>(n.willChange||"").includes(a))||["paint","layout","strict","content"].some(a=>(n.contain||"").includes(a))}function QO(t){let s=Gl(t);for(;mi(s)&&!od(s);){if(By(s))return s;if(xp(s))return null;s=Gl(s)}return null}function Uy(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function od(t){return["html","body","#document"].includes(Cd(t))}function zr(t){return er(t).getComputedStyle(t)}function pp(t){return Ur(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.scrollX,scrollTop:t.scrollY}}function Gl(t){if(Cd(t)==="html")return t;const s=t.assignedSlot||t.parentNode||Yb(t)&&t.host||gi(t);return Yb(s)?s.host:s}function C4(t){const s=Gl(t);return od(s)?t.ownerDocument?t.ownerDocument.body:t.body:mi(s)&&jm(s)?s:C4(s)}function $u(t,s,n){var a;s===void 0&&(s=[]),n===void 0&&(n=!0);const r=C4(t),i=r===((a=t.ownerDocument)==null?void 0:a.body),l=er(r);if(i){const c=Uj(l);return s.concat(l,l.visualViewport||[],jm(r)?r:[],c&&n?$u(c):[])}return s.concat(r,$u(r,[],n))}function Uj(t){return t.parent&&Object.getPrototypeOf(t.parent)?t.frameElement:null}function k4(t){const s=zr(t);let n=parseFloat(s.width)||0,a=parseFloat(s.height)||0;const r=mi(t),i=r?t.offsetWidth:n,l=r?t.offsetHeight:a,c=px(n)!==i||px(a)!==l;return c&&(n=i,a=l),{width:n,height:a,$:c}}function zy(t){return Ur(t)?t:t.contextElement}function _c(t){const s=zy(t);if(!mi(s))return di(1);const n=s.getBoundingClientRect(),{width:a,height:r,$:i}=k4(s);let l=(i?px(n.width):n.width)/a,c=(i?px(n.height):n.height)/r;return(!l||!Number.isFinite(l))&&(l=1),(!c||!Number.isFinite(c))&&(c=1),{x:l,y:c}}const ZO=di(0);function A4(t){const s=er(t);return!Uy()||!s.visualViewport?ZO:{x:s.visualViewport.offsetLeft,y:s.visualViewport.offsetTop}}function XO(t,s,n){return s===void 0&&(s=!1),!n||s&&n!==er(t)?!1:s}function $o(t,s,n,a){s===void 0&&(s=!1),n===void 0&&(n=!1);const r=t.getBoundingClientRect(),i=zy(t);let l=di(1);s&&(a?Ur(a)&&(l=_c(a)):l=_c(t));const c=XO(i,n,a)?A4(i):di(0);let o=(r.left+c.x)/l.x,d=(r.top+c.y)/l.y,h=r.width/l.x,u=r.height/l.y;if(i){const m=er(i),p=a&&Ur(a)?er(a):a;let g=m,x=Uj(g);for(;x&&a&&p!==g;){const v=_c(x),y=x.getBoundingClientRect(),f=zr(x),b=y.left+(x.clientLeft+parseFloat(f.paddingLeft))*v.x,j=y.top+(x.clientTop+parseFloat(f.paddingTop))*v.y;o*=v.x,d*=v.y,h*=v.x,u*=v.y,o+=b,d+=j,g=er(x),x=Uj(g)}}return gx({width:h,height:u,x:o,y:d})}function Vy(t,s){const n=pp(t).scrollLeft;return s?s.left+n:$o(gi(t)).left+n}function P4(t,s,n){n===void 0&&(n=!1);const a=t.getBoundingClientRect(),r=a.left+s.scrollLeft-(n?0:Vy(t,a)),i=a.top+s.scrollTop;return{x:r,y:i}}function JO(t){let{elements:s,rect:n,offsetParent:a,strategy:r}=t;const i=r==="fixed",l=gi(a),c=s?xp(s.floating):!1;if(a===l||c&&i)return n;let o={scrollLeft:0,scrollTop:0},d=di(1);const h=di(0),u=mi(a);if((u||!u&&!i)&&((Cd(a)!=="body"||jm(l))&&(o=pp(a)),mi(a))){const p=$o(a);d=_c(a),h.x=p.x+a.clientLeft,h.y=p.y+a.clientTop}const m=l&&!u&&!i?P4(l,o,!0):di(0);return{width:n.width*d.x,height:n.height*d.y,x:n.x*d.x-o.scrollLeft*d.x+h.x+m.x,y:n.y*d.y-o.scrollTop*d.y+h.y+m.y}}function eD(t){return Array.from(t.getClientRects())}function tD(t){const s=gi(t),n=pp(t),a=t.ownerDocument.body,r=Ya(s.scrollWidth,s.clientWidth,a.scrollWidth,a.clientWidth),i=Ya(s.scrollHeight,s.clientHeight,a.scrollHeight,a.clientHeight);let l=-n.scrollLeft+Vy(t);const c=-n.scrollTop;return zr(a).direction==="rtl"&&(l+=Ya(s.clientWidth,a.clientWidth)-r),{width:r,height:i,x:l,y:c}}function sD(t,s){const n=er(t),a=gi(t),r=n.visualViewport;let i=a.clientWidth,l=a.clientHeight,c=0,o=0;if(r){i=r.width,l=r.height;const d=Uy();(!d||d&&s==="fixed")&&(c=r.offsetLeft,o=r.offsetTop)}return{width:i,height:l,x:c,y:o}}function nD(t,s){const n=$o(t,!0,s==="fixed"),a=n.top+t.clientTop,r=n.left+t.clientLeft,i=mi(t)?_c(t):di(1),l=t.clientWidth*i.x,c=t.clientHeight*i.y,o=r*i.x,d=a*i.y;return{width:l,height:c,x:o,y:d}}function Qb(t,s,n){let a;if(s==="viewport")a=sD(t,n);else if(s==="document")a=tD(gi(t));else if(Ur(s))a=nD(s,n);else{const r=A4(t);a={x:s.x-r.x,y:s.y-r.y,width:s.width,height:s.height}}return gx(a)}function T4(t,s){const n=Gl(t);return n===s||!Ur(n)||od(n)?!1:zr(n).position==="fixed"||T4(n,s)}function aD(t,s){const n=s.get(t);if(n)return n;let a=$u(t,[],!1).filter(c=>Ur(c)&&Cd(c)!=="body"),r=null;const i=zr(t).position==="fixed";let l=i?Gl(t):t;for(;Ur(l)&&!od(l);){const c=zr(l),o=By(l);!o&&c.position==="fixed"&&(r=null),(i?!o&&!r:!o&&c.position==="static"&&!!r&&["absolute","fixed"].includes(r.position)||jm(l)&&!o&&T4(t,l))?a=a.filter(h=>h!==l):r=c,l=Gl(l)}return s.set(t,a),a}function rD(t){let{element:s,boundary:n,rootBoundary:a,strategy:r}=t;const l=[...n==="clippingAncestors"?xp(s)?[]:aD(s,this._c):[].concat(n),a],c=l[0],o=l.reduce((d,h)=>{const u=Qb(s,h,r);return d.top=Ya(u.top,d.top),d.right=zl(u.right,d.right),d.bottom=zl(u.bottom,d.bottom),d.left=Ya(u.left,d.left),d},Qb(s,c,r));return{width:o.right-o.left,height:o.bottom-o.top,x:o.left,y:o.top}}function iD(t){const{width:s,height:n}=k4(t);return{width:s,height:n}}function lD(t,s,n){const a=mi(s),r=gi(s),i=n==="fixed",l=$o(t,!0,i,s);let c={scrollLeft:0,scrollTop:0};const o=di(0);if(a||!a&&!i)if((Cd(s)!=="body"||jm(r))&&(c=pp(s)),a){const m=$o(s,!0,i,s);o.x=m.x+s.clientLeft,o.y=m.y+s.clientTop}else r&&(o.x=Vy(r));const d=r&&!a&&!i?P4(r,c):di(0),h=l.left+c.scrollLeft-o.x-d.x,u=l.top+c.scrollTop-o.y-d.y;return{x:h,y:u,width:l.width,height:l.height}}function Gf(t){return zr(t).position==="static"}function Zb(t,s){if(!mi(t)||zr(t).position==="fixed")return null;if(s)return s(t);let n=t.offsetParent;return gi(t)===n&&(n=n.ownerDocument.body),n}function E4(t,s){const n=er(t);if(xp(t))return n;if(!mi(t)){let r=Gl(t);for(;r&&!od(r);){if(Ur(r)&&!Gf(r))return r;r=Gl(r)}return n}let a=Zb(t,s);for(;a&&YO(a)&&Gf(a);)a=Zb(a,s);return a&&od(a)&&Gf(a)&&!By(a)?n:a||QO(t)||n}const oD=async function(t){const s=this.getOffsetParent||E4,n=this.getDimensions,a=await n(t.floating);return{reference:lD(t.reference,await s(t.floating),t.strategy),floating:{x:0,y:0,width:a.width,height:a.height}}};function cD(t){return zr(t).direction==="rtl"}const dD={convertOffsetParentRelativeRectToViewportRelativeRect:JO,getDocumentElement:gi,getClippingRect:rD,getOffsetParent:E4,getElementRects:oD,getClientRects:eD,getDimensions:iD,getScale:_c,isElement:Ur,isRTL:cD};function M4(t,s){return t.x===s.x&&t.y===s.y&&t.width===s.width&&t.height===s.height}function uD(t,s){let n=null,a;const r=gi(t);function i(){var c;clearTimeout(a),(c=n)==null||c.disconnect(),n=null}function l(c,o){c===void 0&&(c=!1),o===void 0&&(o=1),i();const d=t.getBoundingClientRect(),{left:h,top:u,width:m,height:p}=d;if(c||s(),!m||!p)return;const g=oh(u),x=oh(r.clientWidth-(h+m)),v=oh(r.clientHeight-(u+p)),y=oh(h),b={rootMargin:-g+"px "+-x+"px "+-v+"px "+-y+"px",threshold:Ya(0,zl(1,o))||1};let j=!0;function S(k){const T=k[0].intersectionRatio;if(T!==o){if(!j)return l();T?l(!1,T):a=setTimeout(()=>{l(!1,1e-7)},1e3)}T===1&&!M4(d,t.getBoundingClientRect())&&l(),j=!1}try{n=new IntersectionObserver(S,{...b,root:r.ownerDocument})}catch{n=new IntersectionObserver(S,b)}n.observe(t)}return l(!0),i}function mD(t,s,n,a){a===void 0&&(a={});const{ancestorScroll:r=!0,ancestorResize:i=!0,elementResize:l=typeof ResizeObserver=="function",layoutShift:c=typeof IntersectionObserver=="function",animationFrame:o=!1}=a,d=zy(t),h=r||i?[...d?$u(d):[],...$u(s)]:[];h.forEach(y=>{r&&y.addEventListener("scroll",n,{passive:!0}),i&&y.addEventListener("resize",n)});const u=d&&c?uD(d,n):null;let m=-1,p=null;l&&(p=new ResizeObserver(y=>{let[f]=y;f&&f.target===d&&p&&(p.unobserve(s),cancelAnimationFrame(m),m=requestAnimationFrame(()=>{var b;(b=p)==null||b.observe(s)})),n()}),d&&!o&&p.observe(d),p.observe(s));let g,x=o?$o(t):null;o&&v();function v(){const y=$o(t);x&&!M4(x,y)&&n(),x=y,g=requestAnimationFrame(v)}return n(),()=>{var y;h.forEach(f=>{r&&f.removeEventListener("scroll",n),i&&f.removeEventListener("resize",n)}),u==null||u(),(y=p)==null||y.disconnect(),p=null,o&&cancelAnimationFrame(g)}}const hD=GO,xD=WO,pD=UO,fD=KO,gD=zO,Xb=BO,jD=HO,vD=(t,s,n)=>{const a=new Map,r={platform:dD,...n},i={...r.platform,_c:a};return $O(t,s,{...r,platform:i})};var Oh=typeof document<"u"?N.useLayoutEffect:N.useEffect;function jx(t,s){if(t===s)return!0;if(typeof t!=typeof s)return!1;if(typeof t=="function"&&t.toString()===s.toString())return!0;let n,a,r;if(t&&s&&typeof t=="object"){if(Array.isArray(t)){if(n=t.length,n!==s.length)return!1;for(a=n;a--!==0;)if(!jx(t[a],s[a]))return!1;return!0}if(r=Object.keys(t),n=r.length,n!==Object.keys(s).length)return!1;for(a=n;a--!==0;)if(!{}.hasOwnProperty.call(s,r[a]))return!1;for(a=n;a--!==0;){const i=r[a];if(!(i==="_owner"&&t.$$typeof)&&!jx(t[i],s[i]))return!1}return!0}return t!==t&&s!==s}function _4(t){return typeof window>"u"?1:(t.ownerDocument.defaultView||window).devicePixelRatio||1}function Jb(t,s){const n=_4(t);return Math.round(s*n)/n}function Wf(t){const s=N.useRef(t);return Oh(()=>{s.current=t}),s}function yD(t){t===void 0&&(t={});const{placement:s="bottom",strategy:n="absolute",middleware:a=[],platform:r,elements:{reference:i,floating:l}={},transform:c=!0,whileElementsMounted:o,open:d}=t,[h,u]=N.useState({x:0,y:0,strategy:n,placement:s,middlewareData:{},isPositioned:!1}),[m,p]=N.useState(a);jx(m,a)||p(a);const[g,x]=N.useState(null),[v,y]=N.useState(null),f=N.useCallback(z=>{z!==k.current&&(k.current=z,x(z))},[]),b=N.useCallback(z=>{z!==T.current&&(T.current=z,y(z))},[]),j=i||g,S=l||v,k=N.useRef(null),T=N.useRef(null),A=N.useRef(h),C=o!=null,w=Wf(o),P=Wf(r),M=Wf(d),I=N.useCallback(()=>{if(!k.current||!T.current)return;const z={placement:s,strategy:n,middleware:m};P.current&&(z.platform=P.current),vD(k.current,T.current,z).then(F=>{const K={...F,isPositioned:M.current!==!1};W.current&&!jx(A.current,K)&&(A.current=K,eo.flushSync(()=>{u(K)}))})},[m,s,n,P,M]);Oh(()=>{d===!1&&A.current.isPositioned&&(A.current.isPositioned=!1,u(z=>({...z,isPositioned:!1})))},[d]);const W=N.useRef(!1);Oh(()=>(W.current=!0,()=>{W.current=!1}),[]),Oh(()=>{if(j&&(k.current=j),S&&(T.current=S),j&&S){if(w.current)return w.current(j,S,I);I()}},[j,S,I,w,C]);const _=N.useMemo(()=>({reference:k,floating:T,setReference:f,setFloating:b}),[f,b]),B=N.useMemo(()=>({reference:j,floating:S}),[j,S]),O=N.useMemo(()=>{const z={position:n,left:0,top:0};if(!B.floating)return z;const F=Jb(B.floating,h.x),K=Jb(B.floating,h.y);return c?{...z,transform:"translate("+F+"px, "+K+"px)",..._4(B.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:F,top:K}},[n,c,B.floating,h.x,h.y]);return N.useMemo(()=>({...h,update:I,refs:_,elements:B,floatingStyles:O}),[h,I,_,B,O])}const ND=t=>{function s(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:t,fn(n){const{element:a,padding:r}=typeof t=="function"?t(n):t;return a&&s(a)?a.current!=null?Xb({element:a.current,padding:r}).fn(n):{}:a?Xb({element:a,padding:r}).fn(n):{}}}},bD=(t,s)=>({...hD(t),options:[t,s]}),wD=(t,s)=>({...xD(t),options:[t,s]}),SD=(t,s)=>({...jD(t),options:[t,s]}),CD=(t,s)=>({...pD(t),options:[t,s]}),kD=(t,s)=>({...fD(t),options:[t,s]}),AD=(t,s)=>({...gD(t),options:[t,s]}),PD=(t,s)=>({...ND(t),options:[t,s]});var TD="Arrow",R4=N.forwardRef((t,s)=>{const{children:n,width:a=10,height:r=5,...i}=t;return e.jsx(Dt.svg,{...i,ref:s,width:a,height:r,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:t.asChild?n:e.jsx("polygon",{points:"0,0 30,0 15,10"})})});R4.displayName=TD;var ED=R4;function fp(t){const[s,n]=N.useState(void 0);return Nn(()=>{if(t){n({width:t.offsetWidth,height:t.offsetHeight});const a=new ResizeObserver(r=>{if(!Array.isArray(r)||!r.length)return;const i=r[0];let l,c;if("borderBoxSize"in i){const o=i.borderBoxSize,d=Array.isArray(o)?o[0]:o;l=d.inlineSize,c=d.blockSize}else l=t.offsetWidth,c=t.offsetHeight;n({width:l,height:c})});return a.observe(t,{box:"border-box"}),()=>a.unobserve(t)}else n(void 0)},[t]),s}var Gy="Popper",[O4,so]=Yn(Gy),[MD,D4]=O4(Gy),I4=t=>{const{__scopePopper:s,children:n}=t,[a,r]=N.useState(null);return e.jsx(MD,{scope:s,anchor:a,onAnchorChange:r,children:n})};I4.displayName=Gy;var L4="PopperAnchor",F4=N.forwardRef((t,s)=>{const{__scopePopper:n,virtualRef:a,...r}=t,i=D4(L4,n),l=N.useRef(null),c=Ht(s,l);return N.useEffect(()=>{i.onAnchorChange((a==null?void 0:a.current)||l.current)}),a?null:e.jsx(Dt.div,{...r,ref:c})});F4.displayName=L4;var Wy="PopperContent",[_D,RD]=O4(Wy),q4=N.forwardRef((t,s)=>{var le,ne,ue,te,Ae,Ge;const{__scopePopper:n,side:a="bottom",sideOffset:r=0,align:i="center",alignOffset:l=0,arrowPadding:c=0,avoidCollisions:o=!0,collisionBoundary:d=[],collisionPadding:h=0,sticky:u="partial",hideWhenDetached:m=!1,updatePositionStrategy:p="optimized",onPlaced:g,...x}=t,v=D4(Wy,n),[y,f]=N.useState(null),b=Ht(s,be=>f(be)),[j,S]=N.useState(null),k=fp(j),T=(k==null?void 0:k.width)??0,A=(k==null?void 0:k.height)??0,C=a+(i!=="center"?"-"+i:""),w=typeof h=="number"?h:{top:0,right:0,bottom:0,left:0,...h},P=Array.isArray(d)?d:[d],M=P.length>0,I={padding:w,boundary:P.filter(DD),altBoundary:M},{refs:W,floatingStyles:_,placement:B,isPositioned:O,middlewareData:z}=yD({strategy:"fixed",placement:C,whileElementsMounted:(...be)=>mD(...be,{animationFrame:p==="always"}),elements:{reference:v.anchor},middleware:[bD({mainAxis:r+A,alignmentAxis:l}),o&&wD({mainAxis:!0,crossAxis:!1,limiter:u==="partial"?SD():void 0,...I}),o&&CD({...I}),kD({...I,apply:({elements:be,rects:Ie,availableWidth:ve,availableHeight:ie})=>{const{width:de,height:ee}=Ie.reference,ae=be.floating.style;ae.setProperty("--radix-popper-available-width",`${ve}px`),ae.setProperty("--radix-popper-available-height",`${ie}px`),ae.setProperty("--radix-popper-anchor-width",`${de}px`),ae.setProperty("--radix-popper-anchor-height",`${ee}px`)}}),j&&PD({element:j,padding:c}),ID({arrowWidth:T,arrowHeight:A}),m&&AD({strategy:"referenceHidden",...I})]}),[F,K]=U4(B),D=sn(g);Nn(()=>{O&&(D==null||D())},[O,D]);const G=(le=z.arrow)==null?void 0:le.x,H=(ne=z.arrow)==null?void 0:ne.y,V=((ue=z.arrow)==null?void 0:ue.centerOffset)!==0,[se,Z]=N.useState();return Nn(()=>{y&&Z(window.getComputedStyle(y).zIndex)},[y]),e.jsx("div",{ref:W.setFloating,"data-radix-popper-content-wrapper":"",style:{..._,transform:O?_.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:se,"--radix-popper-transform-origin":[(te=z.transformOrigin)==null?void 0:te.x,(Ae=z.transformOrigin)==null?void 0:Ae.y].join(" "),...((Ge=z.hide)==null?void 0:Ge.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:t.dir,children:e.jsx(_D,{scope:n,placedSide:F,onArrowChange:S,arrowX:G,arrowY:H,shouldHideArrow:V,children:e.jsx(Dt.div,{"data-side":F,"data-align":K,...x,ref:b,style:{...x.style,animation:O?void 0:"none"}})})})});q4.displayName=Wy;var $4="PopperArrow",OD={top:"bottom",right:"left",bottom:"top",left:"right"},B4=N.forwardRef(function(s,n){const{__scopePopper:a,...r}=s,i=RD($4,a),l=OD[i.placedSide];return e.jsx("span",{ref:i.onArrowChange,style:{position:"absolute",left:i.arrowX,top:i.arrowY,[l]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[i.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[i.placedSide],visibility:i.shouldHideArrow?"hidden":void 0},children:e.jsx(ED,{...r,ref:n,style:{...r.style,display:"block"}})})});B4.displayName=$4;function DD(t){return t!==null}var ID=t=>({name:"transformOrigin",options:t,fn(s){var v,y,f;const{placement:n,rects:a,middlewareData:r}=s,l=((v=r.arrow)==null?void 0:v.centerOffset)!==0,c=l?0:t.arrowWidth,o=l?0:t.arrowHeight,[d,h]=U4(n),u={start:"0%",center:"50%",end:"100%"}[h],m=(((y=r.arrow)==null?void 0:y.x)??0)+c/2,p=(((f=r.arrow)==null?void 0:f.y)??0)+o/2;let g="",x="";return d==="bottom"?(g=l?u:`${m}px`,x=`${-o}px`):d==="top"?(g=l?u:`${m}px`,x=`${a.floating.height+o}px`):d==="right"?(g=`${-o}px`,x=l?u:`${p}px`):d==="left"&&(g=`${a.floating.width+o}px`,x=l?u:`${p}px`),{data:{x:g,y:x}}}});function U4(t){const[s,n="center"]=t.split("-");return[s,n]}var gp=I4,vm=F4,jp=q4,vp=B4,[yp,OJ]=Yn("Tooltip",[so]),Np=so(),z4="TooltipProvider",LD=700,zj="tooltip.open",[FD,Hy]=yp(z4),V4=t=>{const{__scopeTooltip:s,delayDuration:n=LD,skipDelayDuration:a=300,disableHoverableContent:r=!1,children:i}=t,l=N.useRef(!0),c=N.useRef(!1),o=N.useRef(0);return N.useEffect(()=>{const d=o.current;return()=>window.clearTimeout(d)},[]),e.jsx(FD,{scope:s,isOpenDelayedRef:l,delayDuration:n,onOpen:N.useCallback(()=>{window.clearTimeout(o.current),l.current=!1},[]),onClose:N.useCallback(()=>{window.clearTimeout(o.current),o.current=window.setTimeout(()=>l.current=!0,a)},[a]),isPointerInTransitRef:c,onPointerInTransitChange:N.useCallback(d=>{c.current=d},[]),disableHoverableContent:r,children:i})};V4.displayName=z4;var bp="Tooltip",[qD,wp]=yp(bp),G4=t=>{const{__scopeTooltip:s,children:n,open:a,defaultOpen:r=!1,onOpenChange:i,disableHoverableContent:l,delayDuration:c}=t,o=Hy(bp,t.__scopeTooltip),d=Np(s),[h,u]=N.useState(null),m=jr(),p=N.useRef(0),g=l??o.disableHoverableContent,x=c??o.delayDuration,v=N.useRef(!1),[y=!1,f]=br({prop:a,defaultProp:r,onChange:T=>{T?(o.onOpen(),document.dispatchEvent(new CustomEvent(zj))):o.onClose(),i==null||i(T)}}),b=N.useMemo(()=>y?v.current?"delayed-open":"instant-open":"closed",[y]),j=N.useCallback(()=>{window.clearTimeout(p.current),p.current=0,v.current=!1,f(!0)},[f]),S=N.useCallback(()=>{window.clearTimeout(p.current),p.current=0,f(!1)},[f]),k=N.useCallback(()=>{window.clearTimeout(p.current),p.current=window.setTimeout(()=>{v.current=!0,f(!0),p.current=0},x)},[x,f]);return N.useEffect(()=>()=>{p.current&&(window.clearTimeout(p.current),p.current=0)},[]),e.jsx(gp,{...d,children:e.jsx(qD,{scope:s,contentId:m,open:y,stateAttribute:b,trigger:h,onTriggerChange:u,onTriggerEnter:N.useCallback(()=>{o.isOpenDelayedRef.current?k():j()},[o.isOpenDelayedRef,k,j]),onTriggerLeave:N.useCallback(()=>{g?S():(window.clearTimeout(p.current),p.current=0)},[S,g]),onOpen:j,onClose:S,disableHoverableContent:g,children:n})})};G4.displayName=bp;var Vj="TooltipTrigger",W4=N.forwardRef((t,s)=>{const{__scopeTooltip:n,...a}=t,r=wp(Vj,n),i=Hy(Vj,n),l=Np(n),c=N.useRef(null),o=Ht(s,c,r.onTriggerChange),d=N.useRef(!1),h=N.useRef(!1),u=N.useCallback(()=>d.current=!1,[]);return N.useEffect(()=>()=>document.removeEventListener("pointerup",u),[u]),e.jsx(vm,{asChild:!0,...l,children:e.jsx(Dt.button,{"aria-describedby":r.open?r.contentId:void 0,"data-state":r.stateAttribute,...a,ref:o,onPointerMove:tt(t.onPointerMove,m=>{m.pointerType!=="touch"&&!h.current&&!i.isPointerInTransitRef.current&&(r.onTriggerEnter(),h.current=!0)}),onPointerLeave:tt(t.onPointerLeave,()=>{r.onTriggerLeave(),h.current=!1}),onPointerDown:tt(t.onPointerDown,()=>{r.open&&r.onClose(),d.current=!0,document.addEventListener("pointerup",u,{once:!0})}),onFocus:tt(t.onFocus,()=>{d.current||r.onOpen()}),onBlur:tt(t.onBlur,r.onClose),onClick:tt(t.onClick,r.onClose)})})});W4.displayName=Vj;var $D="TooltipPortal",[DJ,BD]=yp($D,{forceMount:void 0}),cd="TooltipContent",H4=N.forwardRef((t,s)=>{const n=BD(cd,t.__scopeTooltip),{forceMount:a=n.forceMount,side:r="top",...i}=t,l=wp(cd,t.__scopeTooltip);return e.jsx(Va,{present:a||l.open,children:l.disableHoverableContent?e.jsx(K4,{side:r,...i,ref:s}):e.jsx(UD,{side:r,...i,ref:s})})}),UD=N.forwardRef((t,s)=>{const n=wp(cd,t.__scopeTooltip),a=Hy(cd,t.__scopeTooltip),r=N.useRef(null),i=Ht(s,r),[l,c]=N.useState(null),{trigger:o,onClose:d}=n,h=r.current,{onPointerInTransitChange:u}=a,m=N.useCallback(()=>{c(null),u(!1)},[u]),p=N.useCallback((g,x)=>{const v=g.currentTarget,y={x:g.clientX,y:g.clientY},f=HD(y,v.getBoundingClientRect()),b=KD(y,f),j=YD(x.getBoundingClientRect()),S=ZD([...b,...j]);c(S),u(!0)},[u]);return N.useEffect(()=>()=>m(),[m]),N.useEffect(()=>{if(o&&h){const g=v=>p(v,h),x=v=>p(v,o);return o.addEventListener("pointerleave",g),h.addEventListener("pointerleave",x),()=>{o.removeEventListener("pointerleave",g),h.removeEventListener("pointerleave",x)}}},[o,h,p,m]),N.useEffect(()=>{if(l){const g=x=>{const v=x.target,y={x:x.clientX,y:x.clientY},f=(o==null?void 0:o.contains(v))||(h==null?void 0:h.contains(v)),b=!QD(y,l);f?m():b&&(m(),d())};return document.addEventListener("pointermove",g),()=>document.removeEventListener("pointermove",g)}},[o,h,l,d,m]),e.jsx(K4,{...t,ref:i})}),[zD,VD]=yp(bp,{isInside:!1}),GD=OC("TooltipContent"),K4=N.forwardRef((t,s)=>{const{__scopeTooltip:n,children:a,"aria-label":r,onEscapeKeyDown:i,onPointerDownOutside:l,...c}=t,o=wp(cd,n),d=Np(n),{onClose:h}=o;return N.useEffect(()=>(document.addEventListener(zj,h),()=>document.removeEventListener(zj,h)),[h]),N.useEffect(()=>{if(o.trigger){const u=m=>{const p=m.target;p!=null&&p.contains(o.trigger)&&h()};return window.addEventListener("scroll",u,{capture:!0}),()=>window.removeEventListener("scroll",u,{capture:!0})}},[o.trigger,h]),e.jsx(Qo,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:i,onPointerDownOutside:l,onFocusOutside:u=>u.preventDefault(),onDismiss:h,children:e.jsxs(jp,{"data-state":o.stateAttribute,...d,...c,ref:s,style:{...c.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[e.jsx(GD,{children:a}),e.jsx(zD,{scope:n,isInside:!0,children:e.jsx(zR,{id:o.contentId,role:"tooltip",children:r||a})})]})})});H4.displayName=cd;var Y4="TooltipArrow",WD=N.forwardRef((t,s)=>{const{__scopeTooltip:n,...a}=t,r=Np(n);return VD(Y4,n).isInside?null:e.jsx(vp,{...r,...a,ref:s})});WD.displayName=Y4;function HD(t,s){const n=Math.abs(s.top-t.y),a=Math.abs(s.bottom-t.y),r=Math.abs(s.right-t.x),i=Math.abs(s.left-t.x);switch(Math.min(n,a,r,i)){case i:return"left";case r:return"right";case n:return"top";case a:return"bottom";default:throw new Error("unreachable")}}function KD(t,s,n=5){const a=[];switch(s){case"top":a.push({x:t.x-n,y:t.y+n},{x:t.x+n,y:t.y+n});break;case"bottom":a.push({x:t.x-n,y:t.y-n},{x:t.x+n,y:t.y-n});break;case"left":a.push({x:t.x+n,y:t.y-n},{x:t.x+n,y:t.y+n});break;case"right":a.push({x:t.x-n,y:t.y-n},{x:t.x-n,y:t.y+n});break}return a}function YD(t){const{top:s,right:n,bottom:a,left:r}=t;return[{x:r,y:s},{x:n,y:s},{x:n,y:a},{x:r,y:a}]}function QD(t,s){const{x:n,y:a}=t;let r=!1;for(let i=0,l=s.length-1;i<s.length;l=i++){const c=s[i].x,o=s[i].y,d=s[l].x,h=s[l].y;o>a!=h>a&&n<(d-c)*(a-o)/(h-o)+c&&(r=!r)}return r}function ZD(t){const s=t.slice();return s.sort((n,a)=>n.x<a.x?-1:n.x>a.x?1:n.y<a.y?-1:n.y>a.y?1:0),XD(s)}function XD(t){if(t.length<=1)return t.slice();const s=[];for(let a=0;a<t.length;a++){const r=t[a];for(;s.length>=2;){const i=s[s.length-1],l=s[s.length-2];if((i.x-l.x)*(r.y-l.y)>=(i.y-l.y)*(r.x-l.x))s.pop();else break}s.push(r)}s.pop();const n=[];for(let a=t.length-1;a>=0;a--){const r=t[a];for(;n.length>=2;){const i=n[n.length-1],l=n[n.length-2];if((i.x-l.x)*(r.y-l.y)>=(i.y-l.y)*(r.x-l.x))n.pop();else break}n.push(r)}return n.pop(),s.length===1&&n.length===1&&s[0].x===n[0].x&&s[0].y===n[0].y?s:s.concat(n)}var JD=V4,eI=G4,tI=W4,Q4=H4;const Ky=JD,il=eI,ll=tI,Ai=N.forwardRef(({className:t,sideOffset:s=4,...n},a)=>e.jsx(Q4,{ref:a,sideOffset:s,className:Je("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...n}));Ai.displayName=Q4.displayName;const sI={success:ct,error:on,warning:ys,info:gm},nI={success:"border-green-200 bg-green-50 text-green-900 dark:border-green-800 dark:bg-green-900/20 dark:text-green-100",error:"border-red-200 bg-red-50 text-red-900 dark:border-red-800 dark:bg-red-900/20 dark:text-red-100",warning:"border-yellow-200 bg-yellow-50 text-yellow-900 dark:border-yellow-800 dark:bg-yellow-900/20 dark:text-yellow-100",info:"border-blue-200 bg-blue-50 text-blue-900 dark:border-blue-800 dark:bg-blue-900/20 dark:text-blue-100"},aI={success:"text-green-600 dark:text-green-400",error:"text-red-600 dark:text-red-400",warning:"text-yellow-600 dark:text-yellow-400",info:"text-blue-600 dark:text-blue-400"},rI=({title:t,description:s,type:n="info",action:a,onClose:r})=>{const i=sI[n];return e.jsxs(ky,{className:Je("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all","data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",nI[n]),duration:5e3,children:[e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx(i,{className:Je("h-5 w-5 mt-0.5 flex-shrink-0",aI[n])}),e.jsxs("div",{className:"flex-1 space-y-1",children:[e.jsx(Ay,{className:"text-sm font-semibold",children:t}),s&&e.jsx(Py,{className:"text-sm opacity-90",children:s})]})]}),a&&e.jsx(Ty,{altText:a.label,className:"inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",onClick:a.onClick,children:a.label}),e.jsx(Ey,{className:"absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100",onClick:r,children:e.jsx(Xt,{className:"h-4 w-4"})})]})},Yy=lt.createContext(null),iI=()=>{const t=lt.useContext(Yy);if(!t)throw new Error("useEnhancedToast must be used within a ToastProvider");const{addToast:s}=t;return{showToast:r=>{s({title:r.title,description:r.description,type:r.type||"info",duration:r.duration})},toast:r=>{s({title:r.title,description:r.description,type:r.variant==="destructive"?"error":"info"})}}},lI=({children:t})=>{const[s,n]=lt.useState([]),a=lt.useCallback(l=>{const c=Math.random().toString(36).substr(2,9),o={...l,id:c};n(h=>[...h,o]);const d=l.duration||5e3;setTimeout(()=>{n(h=>h.filter(u=>u.id!==c))},d)},[]),r=lt.useCallback(l=>{n(c=>c.filter(o=>o.id!==l))},[]),i=lt.useCallback(()=>{n([])},[]);return e.jsxs(Yy.Provider,{value:{toasts:s,addToast:a,removeToast:r,clearToasts:i},children:[t,e.jsxs(ZC,{swipeDirection:"right",children:[s.map(l=>e.jsx(rI,{...l,onClose:()=>r(l.id)},l.id)),e.jsx(Cy,{className:"fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]"})]})]})},oI=()=>{const t=lt.useContext(Yy);if(!t)throw new Error("usePerfectToast must be used within a ToastProvider");return t},cI=oI;function dI(){const[t,s]=As();return{navigate:a=>{s(a)},location:t}}const Bu=fm("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),E=N.forwardRef(({className:t,variant:s,size:n,asChild:a=!1,...r},i)=>{const l=a?_C:"button";return e.jsx(l,{className:Je(Bu({variant:s,size:n,className:t})),ref:i,...r})});E.displayName="Button";const $a=lt.forwardRef(({children:t,loading:s=!1,success:n=!1,error:a=!1,loadingText:r="Loading...",successText:i,errorText:l,icon:c,iconPosition:o="left",confirmable:d=!1,confirmText:h="Are you sure?",onConfirm:u,onClick:m,disabled:p,className:g,analytics:x,tooltip:v,...y},f)=>{const[b,j]=lt.useState(!1),[S,k]=lt.useState("idle"),T=lt.useCallback(w=>{if(!(s||p)){if(x&&typeof window<"u"&&"gtag"in window&&window.gtag("event",x.action,{event_category:x.category,event_label:x.label}),d&&!b){j(!0);return}if(b&&u){u(),j(!1);return}m==null||m(w)}},[s,p,x,d,b,u,m]);lt.useEffect(()=>{if(b){const w=setTimeout(()=>j(!1),3e3);return()=>clearTimeout(w)}},[b]),lt.useEffect(()=>{if(n){k("success");const w=setTimeout(()=>k("idle"),2e3);return()=>clearTimeout(w)}if(a){k("error");const w=setTimeout(()=>k("idle"),2e3);return()=>clearTimeout(w)}},[n,a]);const A=()=>s?e.jsxs(e.Fragment,{children:[e.jsx(oa,{className:"h-4 w-4 animate-spin"}),r&&e.jsx("span",{className:"ml-2",children:r})]}):S==="success"&&i?e.jsxs(e.Fragment,{children:[e.jsx(ir,{className:"h-4 w-4 text-green-600"}),e.jsx("span",{className:"ml-2",children:i})]}):S==="error"&&l?e.jsxs(e.Fragment,{children:[e.jsx(on,{className:"h-4 w-4 text-red-600"}),e.jsx("span",{className:"ml-2",children:l})]}):b?e.jsxs(e.Fragment,{children:[e.jsx(on,{className:"h-4 w-4 text-orange-600"}),e.jsx("span",{className:"ml-2",children:h})]}):e.jsxs(e.Fragment,{children:[c&&o==="left"&&e.jsx("span",{className:"mr-2",children:c}),t,c&&o==="right"&&e.jsx("span",{className:"ml-2",children:c})]}),C=()=>{const w="transition-all duration-200 relative overflow-hidden";return s?Je(w,"cursor-wait",g):S==="success"?Je(w,"bg-green-600 hover:bg-green-700",g):S==="error"?Je(w,"bg-red-600 hover:bg-red-700",g):b?Je(w,"bg-orange-600 hover:bg-orange-700 animate-pulse",g):Je(w,g)};return e.jsxs(E,{ref:f,onClick:T,disabled:p||s,className:C(),title:v,"aria-label":v||(typeof t=="string"?t:void 0),...y,children:[A(),e.jsx("span",{className:"absolute inset-0 overflow-hidden rounded-md",children:e.jsx("span",{className:"absolute inset-0 rounded-md bg-white/20 opacity-0 transition-opacity duration-200 group-active:opacity-100"})})]})});$a.displayName="PerfectButton";const R=N.forwardRef(({className:t,...s},n)=>e.jsx("div",{ref:n,className:Je("rounded-lg border bg-card text-card-foreground shadow-sm",t),...s}));R.displayName="Card";const Y=N.forwardRef(({className:t,...s},n)=>e.jsx("div",{ref:n,className:Je("flex flex-col space-y-1.5 p-6",t),...s}));Y.displayName="CardHeader";const Q=N.forwardRef(({className:t,...s},n)=>e.jsx("div",{ref:n,className:Je("text-2xl font-semibold leading-none tracking-tight",t),...s}));Q.displayName="CardTitle";const rt=N.forwardRef(({className:t,...s},n)=>e.jsx("div",{ref:n,className:Je("text-sm text-muted-foreground",t),...s}));rt.displayName="CardDescription";const L=N.forwardRef(({className:t,...s},n)=>e.jsx("div",{ref:n,className:Je("p-6 pt-0",t),...s}));L.displayName="CardContent";const uI=N.forwardRef(({className:t,...s},n)=>e.jsx("div",{ref:n,className:Je("flex items-center p-6 pt-0",t),...s}));uI.displayName="CardFooter";let mI=class extends lt.Component{constructor(s){super(s),this.retry=()=>{this.setState({hasError:!1,error:void 0,errorInfo:void 0,errorId:void 0})},this.state={hasError:!1}}static getDerivedStateFromError(s){const n=`err_${Date.now()}_${Math.random().toString(36).substr(2,9)}`;return{hasError:!0,error:s,errorId:n}}componentDidCatch(s,n){var a,r;this.setState({errorInfo:n}),console.error("React Error Boundary caught an error:",s,n),(r=(a=this.props).onError)==null||r.call(a,s,n)}render(){if(this.state.hasError){if(this.props.fallback){const s=this.props.fallback;return e.jsx(s,{error:this.state.error,retry:this.retry})}return e.jsx(hI,{error:this.state.error,retry:this.retry})}return this.props.children}};const hI=({error:t,retry:s})=>{const[n,a]=lt.useState(!1);return e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 dark:bg-gray-900 p-4",children:e.jsxs(R,{className:"w-full max-w-md",children:[e.jsxs(Y,{className:"text-center",children:[e.jsx("div",{className:"mx-auto w-12 h-12 bg-red-100 dark:bg-red-900/20 rounded-full flex items-center justify-center mb-4",children:e.jsx(ys,{className:"w-6 h-6 text-red-600 dark:text-red-400"})}),e.jsx(Q,{className:"text-xl",children:"Something went wrong"}),e.jsx("p",{className:"text-sm text-muted-foreground mt-2",children:"We encountered an unexpected error. Don't worry, your data is safe."})]}),e.jsxs(L,{className:"space-y-4",children:[e.jsxs("div",{className:"flex flex-col space-y-2",children:[e.jsx($a,{onClick:s,icon:e.jsx(En,{className:"h-4 w-4"}),className:"w-full",children:"Try Again"}),e.jsx($a,{variant:"outline",onClick:()=>{const{navigate:r}=dI();r("/")},icon:e.jsx(i4,{className:"h-4 w-4"}),className:"w-full",children:"Go Home"})]}),e.jsxs("div",{className:"pt-4 border-t",children:[e.jsxs($a,{variant:"ghost",size:"sm",onClick:()=>a(!n),icon:e.jsx(f6,{className:"h-4 w-4"}),className:"w-full",children:[n?"Hide":"Show"," Technical Details"]}),n&&e.jsxs("div",{className:"mt-3 p-3 bg-gray-100 dark:bg-gray-800 rounded-md",children:[e.jsxs("p",{className:"text-xs font-mono text-red-600 dark:text-red-400 break-all",children:[t.name,": ",t.message]}),t.stack&&e.jsxs("details",{className:"mt-2",children:[e.jsx("summary",{className:"text-xs text-muted-foreground cursor-pointer",children:"Stack trace"}),e.jsx("pre",{className:"text-xs text-muted-foreground mt-1 whitespace-pre-wrap",children:t.stack})]})]})]})]})]})})};var Hf="focusScope.autoFocusOnMount",Kf="focusScope.autoFocusOnUnmount",ew={bubbles:!1,cancelable:!0},xI="FocusScope",ym=N.forwardRef((t,s)=>{const{loop:n=!1,trapped:a=!1,onMountAutoFocus:r,onUnmountAutoFocus:i,...l}=t,[c,o]=N.useState(null),d=sn(r),h=sn(i),u=N.useRef(null),m=Ht(s,x=>o(x)),p=N.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;N.useEffect(()=>{if(a){let x=function(b){if(p.paused||!c)return;const j=b.target;c.contains(j)?u.current=j:ol(u.current,{select:!0})},v=function(b){if(p.paused||!c)return;const j=b.relatedTarget;j!==null&&(c.contains(j)||ol(u.current,{select:!0}))},y=function(b){if(document.activeElement===document.body)for(const S of b)S.removedNodes.length>0&&ol(c)};document.addEventListener("focusin",x),document.addEventListener("focusout",v);const f=new MutationObserver(y);return c&&f.observe(c,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",x),document.removeEventListener("focusout",v),f.disconnect()}}},[a,c,p.paused]),N.useEffect(()=>{if(c){sw.add(p);const x=document.activeElement;if(!c.contains(x)){const y=new CustomEvent(Hf,ew);c.addEventListener(Hf,d),c.dispatchEvent(y),y.defaultPrevented||(pI(yI(Z4(c)),{select:!0}),document.activeElement===x&&ol(c))}return()=>{c.removeEventListener(Hf,d),setTimeout(()=>{const y=new CustomEvent(Kf,ew);c.addEventListener(Kf,h),c.dispatchEvent(y),y.defaultPrevented||ol(x??document.body,{select:!0}),c.removeEventListener(Kf,h),sw.remove(p)},0)}}},[c,d,h,p]);const g=N.useCallback(x=>{if(!n&&!a||p.paused)return;const v=x.key==="Tab"&&!x.altKey&&!x.ctrlKey&&!x.metaKey,y=document.activeElement;if(v&&y){const f=x.currentTarget,[b,j]=fI(f);b&&j?!x.shiftKey&&y===j?(x.preventDefault(),n&&ol(b,{select:!0})):x.shiftKey&&y===b&&(x.preventDefault(),n&&ol(j,{select:!0})):y===f&&x.preventDefault()}},[n,a,p.paused]);return e.jsx(Dt.div,{tabIndex:-1,...l,ref:m,onKeyDown:g})});ym.displayName=xI;function pI(t,{select:s=!1}={}){const n=document.activeElement;for(const a of t)if(ol(a,{select:s}),document.activeElement!==n)return}function fI(t){const s=Z4(t),n=tw(s,t),a=tw(s.reverse(),t);return[n,a]}function Z4(t){const s=[],n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:a=>{const r=a.tagName==="INPUT"&&a.type==="hidden";return a.disabled||a.hidden||r?NodeFilter.FILTER_SKIP:a.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)s.push(n.currentNode);return s}function tw(t,s){for(const n of t)if(!gI(n,{upTo:s}))return n}function gI(t,{upTo:s}){if(getComputedStyle(t).visibility==="hidden")return!0;for(;t;){if(s!==void 0&&t===s)return!1;if(getComputedStyle(t).display==="none")return!0;t=t.parentElement}return!1}function jI(t){return t instanceof HTMLInputElement&&"select"in t}function ol(t,{select:s=!1}={}){if(t&&t.focus){const n=document.activeElement;t.focus({preventScroll:!0}),t!==n&&jI(t)&&s&&t.select()}}var sw=vI();function vI(){let t=[];return{add(s){const n=t[0];s!==n&&(n==null||n.pause()),t=nw(t,s),t.unshift(s)},remove(s){var n;t=nw(t,s),(n=t[0])==null||n.resume()}}}function nw(t,s){const n=[...t],a=n.indexOf(s);return a!==-1&&n.splice(a,1),n}function yI(t){return t.filter(s=>s.tagName!=="A")}var Yf=0;function Sp(){N.useEffect(()=>{const t=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",t[0]??aw()),document.body.insertAdjacentElement("beforeend",t[1]??aw()),Yf++,()=>{Yf===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(s=>s.remove()),Yf--}},[])}function aw(){const t=document.createElement("span");return t.setAttribute("data-radix-focus-guard",""),t.tabIndex=0,t.style.outline="none",t.style.opacity="0",t.style.position="fixed",t.style.pointerEvents="none",t}var ai=function(){return ai=Object.assign||function(s){for(var n,a=1,r=arguments.length;a<r;a++){n=arguments[a];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(s[i]=n[i])}return s},ai.apply(this,arguments)};function X4(t,s){var n={};for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&s.indexOf(a)<0&&(n[a]=t[a]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,a=Object.getOwnPropertySymbols(t);r<a.length;r++)s.indexOf(a[r])<0&&Object.prototype.propertyIsEnumerable.call(t,a[r])&&(n[a[r]]=t[a[r]]);return n}function NI(t,s,n){if(n||arguments.length===2)for(var a=0,r=s.length,i;a<r;a++)(i||!(a in s))&&(i||(i=Array.prototype.slice.call(s,0,a)),i[a]=s[a]);return t.concat(i||Array.prototype.slice.call(s))}var Dh="right-scroll-bar-position",Ih="width-before-scroll-bar",bI="with-scroll-bars-hidden",wI="--removed-body-scroll-bar-size";function Qf(t,s){return typeof t=="function"?t(s):t&&(t.current=s),t}function SI(t,s){var n=N.useState(function(){return{value:t,callback:s,facade:{get current(){return n.value},set current(a){var r=n.value;r!==a&&(n.value=a,n.callback(a,r))}}}})[0];return n.callback=s,n.facade}var CI=typeof window<"u"?N.useLayoutEffect:N.useEffect,rw=new WeakMap;function kI(t,s){var n=SI(null,function(a){return t.forEach(function(r){return Qf(r,a)})});return CI(function(){var a=rw.get(n);if(a){var r=new Set(a),i=new Set(t),l=n.current;r.forEach(function(c){i.has(c)||Qf(c,null)}),i.forEach(function(c){r.has(c)||Qf(c,l)})}rw.set(n,t)},[t]),n}function AI(t){return t}function PI(t,s){s===void 0&&(s=AI);var n=[],a=!1,r={read:function(){if(a)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:t},useMedium:function(i){var l=s(i,a);return n.push(l),function(){n=n.filter(function(c){return c!==l})}},assignSyncMedium:function(i){for(a=!0;n.length;){var l=n;n=[],l.forEach(i)}n={push:function(c){return i(c)},filter:function(){return n}}},assignMedium:function(i){a=!0;var l=[];if(n.length){var c=n;n=[],c.forEach(i),l=n}var o=function(){var h=l;l=[],h.forEach(i)},d=function(){return Promise.resolve().then(o)};d(),n={push:function(h){l.push(h),d()},filter:function(h){return l=l.filter(h),n}}}};return r}function TI(t){t===void 0&&(t={});var s=PI(null);return s.options=ai({async:!0,ssr:!1},t),s}var J4=function(t){var s=t.sideCar,n=X4(t,["sideCar"]);if(!s)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var a=s.read();if(!a)throw new Error("Sidecar medium not found");return N.createElement(a,ai({},n))};J4.isSideCarExport=!0;function EI(t,s){return t.useMedium(s),J4}var ek=TI(),Zf=function(){},Cp=N.forwardRef(function(t,s){var n=N.useRef(null),a=N.useState({onScrollCapture:Zf,onWheelCapture:Zf,onTouchMoveCapture:Zf}),r=a[0],i=a[1],l=t.forwardProps,c=t.children,o=t.className,d=t.removeScrollBar,h=t.enabled,u=t.shards,m=t.sideCar,p=t.noIsolation,g=t.inert,x=t.allowPinchZoom,v=t.as,y=v===void 0?"div":v,f=t.gapMode,b=X4(t,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as","gapMode"]),j=m,S=kI([n,s]),k=ai(ai({},b),r);return N.createElement(N.Fragment,null,h&&N.createElement(j,{sideCar:ek,removeScrollBar:d,shards:u,noIsolation:p,inert:g,setCallbacks:i,allowPinchZoom:!!x,lockRef:n,gapMode:f}),l?N.cloneElement(N.Children.only(c),ai(ai({},k),{ref:S})):N.createElement(y,ai({},k,{className:o,ref:S}),c))});Cp.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};Cp.classNames={fullWidth:Ih,zeroRight:Dh};var MI=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function _I(){if(!document)return null;var t=document.createElement("style");t.type="text/css";var s=MI();return s&&t.setAttribute("nonce",s),t}function RI(t,s){t.styleSheet?t.styleSheet.cssText=s:t.appendChild(document.createTextNode(s))}function OI(t){var s=document.head||document.getElementsByTagName("head")[0];s.appendChild(t)}var DI=function(){var t=0,s=null;return{add:function(n){t==0&&(s=_I())&&(RI(s,n),OI(s)),t++},remove:function(){t--,!t&&s&&(s.parentNode&&s.parentNode.removeChild(s),s=null)}}},II=function(){var t=DI();return function(s,n){N.useEffect(function(){return t.add(s),function(){t.remove()}},[s&&n])}},tk=function(){var t=II(),s=function(n){var a=n.styles,r=n.dynamic;return t(a,r),null};return s},LI={left:0,top:0,right:0,gap:0},Xf=function(t){return parseInt(t||"",10)||0},FI=function(t){var s=window.getComputedStyle(document.body),n=s[t==="padding"?"paddingLeft":"marginLeft"],a=s[t==="padding"?"paddingTop":"marginTop"],r=s[t==="padding"?"paddingRight":"marginRight"];return[Xf(n),Xf(a),Xf(r)]},qI=function(t){if(t===void 0&&(t="margin"),typeof window>"u")return LI;var s=FI(t),n=document.documentElement.clientWidth,a=window.innerWidth;return{left:s[0],top:s[1],right:s[2],gap:Math.max(0,a-n+s[2]-s[0])}},$I=tk(),Rc="data-scroll-locked",BI=function(t,s,n,a){var r=t.left,i=t.top,l=t.right,c=t.gap;return n===void 0&&(n="margin"),`
  .`.concat(bI,` {
   overflow: hidden `).concat(a,`;
   padding-right: `).concat(c,"px ").concat(a,`;
  }
  body[`).concat(Rc,`] {
    overflow: hidden `).concat(a,`;
    overscroll-behavior: contain;
    `).concat([s&&"position: relative ".concat(a,";"),n==="margin"&&`
    padding-left: `.concat(r,`px;
    padding-top: `).concat(i,`px;
    padding-right: `).concat(l,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(c,"px ").concat(a,`;
    `),n==="padding"&&"padding-right: ".concat(c,"px ").concat(a,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(Dh,` {
    right: `).concat(c,"px ").concat(a,`;
  }
  
  .`).concat(Ih,` {
    margin-right: `).concat(c,"px ").concat(a,`;
  }
  
  .`).concat(Dh," .").concat(Dh,` {
    right: 0 `).concat(a,`;
  }
  
  .`).concat(Ih," .").concat(Ih,` {
    margin-right: 0 `).concat(a,`;
  }
  
  body[`).concat(Rc,`] {
    `).concat(wI,": ").concat(c,`px;
  }
`)},iw=function(){var t=parseInt(document.body.getAttribute(Rc)||"0",10);return isFinite(t)?t:0},UI=function(){N.useEffect(function(){return document.body.setAttribute(Rc,(iw()+1).toString()),function(){var t=iw()-1;t<=0?document.body.removeAttribute(Rc):document.body.setAttribute(Rc,t.toString())}},[])},zI=function(t){var s=t.noRelative,n=t.noImportant,a=t.gapMode,r=a===void 0?"margin":a;UI();var i=N.useMemo(function(){return qI(r)},[r]);return N.createElement($I,{styles:BI(i,!s,r,n?"":"!important")})},Gj=!1;if(typeof window<"u")try{var ch=Object.defineProperty({},"passive",{get:function(){return Gj=!0,!0}});window.addEventListener("test",ch,ch),window.removeEventListener("test",ch,ch)}catch{Gj=!1}var tc=Gj?{passive:!1}:!1,VI=function(t){return t.tagName==="TEXTAREA"},sk=function(t,s){if(!(t instanceof Element))return!1;var n=window.getComputedStyle(t);return n[s]!=="hidden"&&!(n.overflowY===n.overflowX&&!VI(t)&&n[s]==="visible")},GI=function(t){return sk(t,"overflowY")},WI=function(t){return sk(t,"overflowX")},lw=function(t,s){var n=s.ownerDocument,a=s;do{typeof ShadowRoot<"u"&&a instanceof ShadowRoot&&(a=a.host);var r=nk(t,a);if(r){var i=ak(t,a),l=i[1],c=i[2];if(l>c)return!0}a=a.parentNode}while(a&&a!==n.body);return!1},HI=function(t){var s=t.scrollTop,n=t.scrollHeight,a=t.clientHeight;return[s,n,a]},KI=function(t){var s=t.scrollLeft,n=t.scrollWidth,a=t.clientWidth;return[s,n,a]},nk=function(t,s){return t==="v"?GI(s):WI(s)},ak=function(t,s){return t==="v"?HI(s):KI(s)},YI=function(t,s){return t==="h"&&s==="rtl"?-1:1},QI=function(t,s,n,a,r){var i=YI(t,window.getComputedStyle(s).direction),l=i*a,c=n.target,o=s.contains(c),d=!1,h=l>0,u=0,m=0;do{var p=ak(t,c),g=p[0],x=p[1],v=p[2],y=x-v-i*g;(g||y)&&nk(t,c)&&(u+=y,m+=g),c instanceof ShadowRoot?c=c.host:c=c.parentNode}while(!o&&c!==document.body||o&&(s.contains(c)||s===c));return(h&&(Math.abs(u)<1||!r)||!h&&(Math.abs(m)<1||!r))&&(d=!0),d},dh=function(t){return"changedTouches"in t?[t.changedTouches[0].clientX,t.changedTouches[0].clientY]:[0,0]},ow=function(t){return[t.deltaX,t.deltaY]},cw=function(t){return t&&"current"in t?t.current:t},ZI=function(t,s){return t[0]===s[0]&&t[1]===s[1]},XI=function(t){return`
  .block-interactivity-`.concat(t,` {pointer-events: none;}
  .allow-interactivity-`).concat(t,` {pointer-events: all;}
`)},JI=0,sc=[];function eL(t){var s=N.useRef([]),n=N.useRef([0,0]),a=N.useRef(),r=N.useState(JI++)[0],i=N.useState(tk)[0],l=N.useRef(t);N.useEffect(function(){l.current=t},[t]),N.useEffect(function(){if(t.inert){document.body.classList.add("block-interactivity-".concat(r));var x=NI([t.lockRef.current],(t.shards||[]).map(cw),!0).filter(Boolean);return x.forEach(function(v){return v.classList.add("allow-interactivity-".concat(r))}),function(){document.body.classList.remove("block-interactivity-".concat(r)),x.forEach(function(v){return v.classList.remove("allow-interactivity-".concat(r))})}}},[t.inert,t.lockRef.current,t.shards]);var c=N.useCallback(function(x,v){if("touches"in x&&x.touches.length===2||x.type==="wheel"&&x.ctrlKey)return!l.current.allowPinchZoom;var y=dh(x),f=n.current,b="deltaX"in x?x.deltaX:f[0]-y[0],j="deltaY"in x?x.deltaY:f[1]-y[1],S,k=x.target,T=Math.abs(b)>Math.abs(j)?"h":"v";if("touches"in x&&T==="h"&&k.type==="range")return!1;var A=lw(T,k);if(!A)return!0;if(A?S=T:(S=T==="v"?"h":"v",A=lw(T,k)),!A)return!1;if(!a.current&&"changedTouches"in x&&(b||j)&&(a.current=S),!S)return!0;var C=a.current||S;return QI(C,v,x,C==="h"?b:j,!0)},[]),o=N.useCallback(function(x){var v=x;if(!(!sc.length||sc[sc.length-1]!==i)){var y="deltaY"in v?ow(v):dh(v),f=s.current.filter(function(S){return S.name===v.type&&(S.target===v.target||v.target===S.shadowParent)&&ZI(S.delta,y)})[0];if(f&&f.should){v.cancelable&&v.preventDefault();return}if(!f){var b=(l.current.shards||[]).map(cw).filter(Boolean).filter(function(S){return S.contains(v.target)}),j=b.length>0?c(v,b[0]):!l.current.noIsolation;j&&v.cancelable&&v.preventDefault()}}},[]),d=N.useCallback(function(x,v,y,f){var b={name:x,delta:v,target:y,should:f,shadowParent:tL(y)};s.current.push(b),setTimeout(function(){s.current=s.current.filter(function(j){return j!==b})},1)},[]),h=N.useCallback(function(x){n.current=dh(x),a.current=void 0},[]),u=N.useCallback(function(x){d(x.type,ow(x),x.target,c(x,t.lockRef.current))},[]),m=N.useCallback(function(x){d(x.type,dh(x),x.target,c(x,t.lockRef.current))},[]);N.useEffect(function(){return sc.push(i),t.setCallbacks({onScrollCapture:u,onWheelCapture:u,onTouchMoveCapture:m}),document.addEventListener("wheel",o,tc),document.addEventListener("touchmove",o,tc),document.addEventListener("touchstart",h,tc),function(){sc=sc.filter(function(x){return x!==i}),document.removeEventListener("wheel",o,tc),document.removeEventListener("touchmove",o,tc),document.removeEventListener("touchstart",h,tc)}},[]);var p=t.removeScrollBar,g=t.inert;return N.createElement(N.Fragment,null,g?N.createElement(i,{styles:XI(r)}):null,p?N.createElement(zI,{gapMode:t.gapMode}):null)}function tL(t){for(var s=null;t!==null;)t instanceof ShadowRoot&&(s=t.host,t=t.host),t=t.parentNode;return s}const sL=EI(ek,eL);var Nm=N.forwardRef(function(t,s){return N.createElement(Cp,ai({},t,{ref:s,sideCar:sL}))});Nm.classNames=Cp.classNames;var nL=function(t){if(typeof document>"u")return null;var s=Array.isArray(t)?t[0]:t;return s.ownerDocument.body},nc=new WeakMap,uh=new WeakMap,mh={},Jf=0,rk=function(t){return t&&(t.host||rk(t.parentNode))},aL=function(t,s){return s.map(function(n){if(t.contains(n))return n;var a=rk(n);return a&&t.contains(a)?a:(console.error("aria-hidden",n,"in not contained inside",t,". Doing nothing"),null)}).filter(function(n){return!!n})},rL=function(t,s,n,a){var r=aL(s,Array.isArray(t)?t:[t]);mh[n]||(mh[n]=new WeakMap);var i=mh[n],l=[],c=new Set,o=new Set(r),d=function(u){!u||c.has(u)||(c.add(u),d(u.parentNode))};r.forEach(d);var h=function(u){!u||o.has(u)||Array.prototype.forEach.call(u.children,function(m){if(c.has(m))h(m);else try{var p=m.getAttribute(a),g=p!==null&&p!=="false",x=(nc.get(m)||0)+1,v=(i.get(m)||0)+1;nc.set(m,x),i.set(m,v),l.push(m),x===1&&g&&uh.set(m,!0),v===1&&m.setAttribute(n,"true"),g||m.setAttribute(a,"true")}catch(y){console.error("aria-hidden: cannot operate on ",m,y)}})};return h(s),c.clear(),Jf++,function(){l.forEach(function(u){var m=nc.get(u)-1,p=i.get(u)-1;nc.set(u,m),i.set(u,p),m||(uh.has(u)||u.removeAttribute(a),uh.delete(u)),p||u.removeAttribute(n)}),Jf--,Jf||(nc=new WeakMap,nc=new WeakMap,uh=new WeakMap,mh={})}},kp=function(t,s,n){n===void 0&&(n="data-aria-hidden");var a=Array.from(Array.isArray(t)?t:[t]),r=nL(t);return r?(a.push.apply(a,Array.from(r.querySelectorAll("[aria-live]"))),rL(a,r,n,"aria-hidden")):function(){return null}},Qy="Dialog",[ik,lk]=Yn(Qy),[iL,Kr]=ik(Qy),ok=t=>{const{__scopeDialog:s,children:n,open:a,defaultOpen:r,onOpenChange:i,modal:l=!0}=t,c=N.useRef(null),o=N.useRef(null),[d=!1,h]=br({prop:a,defaultProp:r,onChange:i});return e.jsx(iL,{scope:s,triggerRef:c,contentRef:o,contentId:jr(),titleId:jr(),descriptionId:jr(),open:d,onOpenChange:h,onOpenToggle:N.useCallback(()=>h(u=>!u),[h]),modal:l,children:n})};ok.displayName=Qy;var ck="DialogTrigger",dk=N.forwardRef((t,s)=>{const{__scopeDialog:n,...a}=t,r=Kr(ck,n),i=Ht(s,r.triggerRef);return e.jsx(Dt.button,{type:"button","aria-haspopup":"dialog","aria-expanded":r.open,"aria-controls":r.contentId,"data-state":Jy(r.open),...a,ref:i,onClick:tt(t.onClick,r.onOpenToggle)})});dk.displayName=ck;var Zy="DialogPortal",[lL,uk]=ik(Zy,{forceMount:void 0}),mk=t=>{const{__scopeDialog:s,forceMount:n,children:a,container:r}=t,i=Kr(Zy,s);return e.jsx(lL,{scope:s,forceMount:n,children:N.Children.map(a,l=>e.jsx(Va,{present:n||i.open,children:e.jsx(bd,{asChild:!0,container:r,children:l})}))})};mk.displayName=Zy;var vx="DialogOverlay",hk=N.forwardRef((t,s)=>{const n=uk(vx,t.__scopeDialog),{forceMount:a=n.forceMount,...r}=t,i=Kr(vx,t.__scopeDialog);return i.modal?e.jsx(Va,{present:a||i.open,children:e.jsx(cL,{...r,ref:s})}):null});hk.displayName=vx;var oL=$l("DialogOverlay.RemoveScroll"),cL=N.forwardRef((t,s)=>{const{__scopeDialog:n,...a}=t,r=Kr(vx,n);return e.jsx(Nm,{as:oL,allowPinchZoom:!0,shards:[r.contentRef],children:e.jsx(Dt.div,{"data-state":Jy(r.open),...a,ref:s,style:{pointerEvents:"auto",...a.style}})})}),Bo="DialogContent",xk=N.forwardRef((t,s)=>{const n=uk(Bo,t.__scopeDialog),{forceMount:a=n.forceMount,...r}=t,i=Kr(Bo,t.__scopeDialog);return e.jsx(Va,{present:a||i.open,children:i.modal?e.jsx(dL,{...r,ref:s}):e.jsx(uL,{...r,ref:s})})});xk.displayName=Bo;var dL=N.forwardRef((t,s)=>{const n=Kr(Bo,t.__scopeDialog),a=N.useRef(null),r=Ht(s,n.contentRef,a);return N.useEffect(()=>{const i=a.current;if(i)return kp(i)},[]),e.jsx(pk,{...t,ref:r,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:tt(t.onCloseAutoFocus,i=>{var l;i.preventDefault(),(l=n.triggerRef.current)==null||l.focus()}),onPointerDownOutside:tt(t.onPointerDownOutside,i=>{const l=i.detail.originalEvent,c=l.button===0&&l.ctrlKey===!0;(l.button===2||c)&&i.preventDefault()}),onFocusOutside:tt(t.onFocusOutside,i=>i.preventDefault())})}),uL=N.forwardRef((t,s)=>{const n=Kr(Bo,t.__scopeDialog),a=N.useRef(!1),r=N.useRef(!1);return e.jsx(pk,{...t,ref:s,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:i=>{var l,c;(l=t.onCloseAutoFocus)==null||l.call(t,i),i.defaultPrevented||(a.current||(c=n.triggerRef.current)==null||c.focus(),i.preventDefault()),a.current=!1,r.current=!1},onInteractOutside:i=>{var o,d;(o=t.onInteractOutside)==null||o.call(t,i),i.defaultPrevented||(a.current=!0,i.detail.originalEvent.type==="pointerdown"&&(r.current=!0));const l=i.target;((d=n.triggerRef.current)==null?void 0:d.contains(l))&&i.preventDefault(),i.detail.originalEvent.type==="focusin"&&r.current&&i.preventDefault()}})}),pk=N.forwardRef((t,s)=>{const{__scopeDialog:n,trapFocus:a,onOpenAutoFocus:r,onCloseAutoFocus:i,...l}=t,c=Kr(Bo,n),o=N.useRef(null),d=Ht(s,o);return Sp(),e.jsxs(e.Fragment,{children:[e.jsx(ym,{asChild:!0,loop:!0,trapped:a,onMountAutoFocus:r,onUnmountAutoFocus:i,children:e.jsx(Qo,{role:"dialog",id:c.contentId,"aria-describedby":c.descriptionId,"aria-labelledby":c.titleId,"data-state":Jy(c.open),...l,ref:d,onDismiss:()=>c.onOpenChange(!1)})}),e.jsxs(e.Fragment,{children:[e.jsx(hL,{titleId:c.titleId}),e.jsx(pL,{contentRef:o,descriptionId:c.descriptionId})]})]})}),Xy="DialogTitle",fk=N.forwardRef((t,s)=>{const{__scopeDialog:n,...a}=t,r=Kr(Xy,n);return e.jsx(Dt.h2,{id:r.titleId,...a,ref:s})});fk.displayName=Xy;var gk="DialogDescription",jk=N.forwardRef((t,s)=>{const{__scopeDialog:n,...a}=t,r=Kr(gk,n);return e.jsx(Dt.p,{id:r.descriptionId,...a,ref:s})});jk.displayName=gk;var vk="DialogClose",yk=N.forwardRef((t,s)=>{const{__scopeDialog:n,...a}=t,r=Kr(vk,n);return e.jsx(Dt.button,{type:"button",...a,ref:s,onClick:tt(t.onClick,()=>r.onOpenChange(!1))})});yk.displayName=vk;function Jy(t){return t?"open":"closed"}var Nk="DialogTitleWarning",[mL,bk]=NR(Nk,{contentName:Bo,titleName:Xy,docsSlug:"dialog"}),hL=({titleId:t})=>{const s=bk(Nk),n=`\`${s.contentName}\` requires a \`${s.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${s.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${s.docsSlug}`;return N.useEffect(()=>{t&&(document.getElementById(t)||console.error(n))},[n,t]),null},xL="DialogDescriptionWarning",pL=({contentRef:t,descriptionId:s})=>{const a=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${bk(xL).contentName}}.`;return N.useEffect(()=>{var i;const r=(i=t.current)==null?void 0:i.getAttribute("aria-describedby");s&&r&&(document.getElementById(s)||console.warn(a))},[a,t,s]),null},e0=ok,wk=dk,t0=mk,Ap=hk,Pp=xk,Tp=fk,Ep=jk,Mp=yk;const kt=e0,ma=wk,fL=t0,Sk=N.forwardRef(({className:t,...s},n)=>e.jsx(Ap,{ref:n,className:Je("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...s}));Sk.displayName=Ap.displayName;const wt=N.forwardRef(({className:t,children:s,...n},a)=>e.jsxs(fL,{children:[e.jsx(Sk,{}),e.jsxs(Pp,{ref:a,className:Je("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",t),...n,children:[s,e.jsxs(Mp,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[e.jsx(Xt,{className:"h-4 w-4"}),e.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));wt.displayName=Pp.displayName;const St=({className:t,...s})=>e.jsx("div",{className:Je("flex flex-col space-y-1.5 text-center sm:text-left",t),...s});St.displayName="DialogHeader";const hi=({className:t,...s})=>e.jsx("div",{className:Je("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...s});hi.displayName="DialogFooter";const Ct=N.forwardRef(({className:t,...s},n)=>e.jsx(Tp,{ref:n,className:Je("text-lg font-semibold leading-none tracking-tight",t),...s}));Ct.displayName=Tp.displayName;const us=N.forwardRef(({className:t,...s},n)=>e.jsx(Ep,{ref:n,className:Je("text-sm text-muted-foreground",t),...s}));us.displayName=Ep.displayName;const s0=N.createContext(void 0);function gL({children:t}){const[s,n]=N.useState(null),[a,r]=N.useState(null),[i,l]=N.useState(null),[c,o]=N.useState(null),[d,h]=N.useState(!0),[u,m]=N.useState(!1),{toast:p}=nt(),g=24*60*60*1e3,x=()=>{localStorage.removeItem("token"),n(null),r(null),l(null),o(null),p({title:"Logged out",description:"You have been logged out successfully"})};N.useEffect(()=>{y()},[]),N.useEffect(()=>{const S=setTimeout(()=>{d&&(console.warn(" Auth check timed out, forcing completion"),h(!1))},1500);return()=>clearTimeout(S)},[d]),N.useEffect(()=>{if(!s)return;let S,k;const T=()=>{clearTimeout(S),clearTimeout(k),S=setTimeout(()=>{m(!0)},g-5*60*1e3),k=setTimeout(()=>{x(),p({title:"Session Expired",description:"You have been logged out due to inactivity.",variant:"destructive"})},g)},A=["mousedown","keydown","scroll","touchstart","click"],C=()=>{m(!1),T()};return A.forEach(w=>{document.addEventListener(w,C)}),T(),()=>{clearTimeout(S),clearTimeout(k),A.forEach(w=>{document.removeEventListener(w,C)})}},[s,x,p]);const v=()=>{m(!1)},y=async()=>{if(!localStorage.getItem("token")){h(!1);return}try{const k=await xe("/api/current-user");n(k),o({id:k.roleId,name:"User"}),l({id:k.roleId,name:"User"}),r(null)}catch{localStorage.removeItem("token"),n(null),r(null),l(null),o(null)}finally{h(!1)}},f=async(S,k)=>{var T;try{const A=await xe("/api/auth/login",{method:"POST",body:{email:S,password:k}});return localStorage.setItem("token",A.token),n(A.user),o({id:A.user.roleId,name:"User"}),l({id:A.user.roleId,name:"User"}),r(null),p({title:"Login successful",description:`Welcome back, ${A.user.fullName}!`}),!0}catch(A){return console.error("Login error:",A),p({title:"Login failed",description:(T=A.message)!=null&&T.includes("401")?"Invalid email or password":"Unable to connect to server. Please try again.",variant:"destructive"}),!1}},b=async S=>{var k;try{const T=await xe("/api/auth/register",{method:"POST",body:S});return localStorage.setItem("token",T.token),n(T.user),o({id:T.user.roleId,name:"User"}),l({id:T.user.roleId,name:"User"}),r(null),p({title:"Registration successful",description:"Welcome to Wai'tuMusic!"}),!0}catch(T){return console.error("Registration error:",T),p({title:"Registration failed",description:(k=T.message)!=null&&k.includes("400")?"Registration failed - user may already exist":"Unable to connect to server",variant:"destructive"}),!1}},j=()=>localStorage.getItem("token");return e.jsxs(s0.Provider,{value:{user:s,profile:a,roleData:i,role:c,isLoading:d,login:f,register:b,logout:x,refreshProfile:()=>{},getToken:j},children:[t,e.jsx(kt,{open:u,onOpenChange:m,children:e.jsxs(wt,{children:[e.jsxs(St,{children:[e.jsx(Ct,{children:"Session Expiring Soon"}),e.jsx(us,{children:"Your session will expire in 5 minutes due to inactivity. Would you like to extend your session?"})]}),e.jsxs(hi,{children:[e.jsx(E,{variant:"outline",onClick:x,children:"Log Out"}),e.jsx(E,{onClick:v,children:"Extend Session"})]})]})})]})}function _s(){const t=N.useContext(s0);if(t===void 0)throw new Error("useAuth must be used within an AuthProvider");return t}const Ck=N.createContext(void 0);function jL({children:t}){const[s,n]=N.useState([]);N.useEffect(()=>{const u=localStorage.getItem("waitumusic-cart");if(u)try{n(JSON.parse(u))}catch(m){console.error("Error loading cart from localStorage:",m)}},[]),N.useEffect(()=>{localStorage.setItem("waitumusic-cart",JSON.stringify(s))},[s]);const a=u=>{const m=`${u.type}-${u.itemId}`;n(p=>{if(p.find(x=>x.id===m))return p.map(x=>x.id===m?{...x,quantity:x.quantity+u.quantity}:x);{const x={...u,id:m,price:Number(u.price)||0};return[...p,x]}}),setTimeout(()=>{const p=document.querySelector(".cart-icon");p&&(p.classList.add("animate-cart-bounce"),setTimeout(()=>p.classList.remove("animate-cart-bounce"),600))},100)},r=u=>{n(m=>m.filter(p=>p.id!==u))},i=(u,m)=>{if(m<=0){r(u);return}n(p=>p.map(g=>g.id===u?{...g,quantity:m}:g))},l=()=>{n([])},c=()=>s.reduce((u,m)=>u+(Number(m.price)||0)*m.quantity,0),o=()=>s.reduce((u,m)=>u+m.quantity,0),d=o(),h=u=>{const m={type:u.type||"merchandise",itemId:u.id,title:u.name||u.title,artist:u.artist||"",price:u.price||0,quantity:u.quantity||1,imageUrl:u.imageUrl};a(m)};return e.jsx(Ck.Provider,{value:{items:s,cartItems:s,cartCount:d,addItem:a,addToCart:h,removeItem:r,updateQuantity:i,clearCart:l,getTotalPrice:c,getTotalItems:o},children:t})}function Zo(){const t=N.useContext(Ck);if(t===void 0)throw new Error("useCart must be used within a CartProvider");return t}const kk=N.createContext(void 0),vL=()=>{const t=N.useContext(kk);if(t===void 0)throw new Error("useMediaPlayer must be used within a MediaPlayerProvider");return t},yL=({children:t})=>{const[s,n]=N.useState(null),[a,r]=N.useState([]),[i,l]=N.useState(null),[c,o]=N.useState(!1),[d,h]=N.useState(!1),[u,m]=N.useState(0),[p,g]=N.useState("single"),[x,v]=N.useState("none"),[y,f]=N.useState(!1),b=O=>{r(z=>z.find(K=>K.id===O.id)?z:[...z,O])},j=O=>{r(z=>z.filter(F=>F.id!==O))},S=()=>{r([])},k=()=>{o(!0)},B={currentSong:s,playlist:a,currentAlbum:i,isVisible:c,isAlbumMode:d,currentTrackIndex:u,playbackMode:p,repeatMode:x,shuffleEnabled:y,setCurrentSong:O=>{n(O),O&&(k(),d||(b(O),g("single")))},setPlaylist:r,setCurrentAlbum:l,playAlbum:(O,z=0)=>{l(O),r(O.songs),m(z),n(O.songs[z]||null),h(!0),g("album"),k()},nextTrack:()=>{if(!i||!d)return;const O=u+1;O<i.songs.length?(m(O),n(i.songs[O])):x==="all"&&(m(0),n(i.songs[0]))},previousTrack:()=>{if(!i||!d)return;const O=u-1;if(O>=0)m(O),n(i.songs[O]);else if(x==="all"){const z=i.songs.length-1;m(z),n(i.songs[z])}},addToPlaylist:b,removeFromPlaylist:j,clearPlaylist:S,showPlayer:k,hidePlayer:()=>{o(!1)},togglePlayerVisibility:()=>{o(O=>!O)},toggleShuffle:()=>{f(O=>!O)},toggleRepeat:()=>{v(O=>O==="none"?"all":O==="all"?"one":"none")},getMerchandiseForCurrentSong:()=>{if(!s)return[];const O=s.merchandiseIds||[],z=(i==null?void 0:i.merchandiseIds)||[];return[...new Set([...O,...z])]}};return e.jsx(kk.Provider,{value:B,children:t})},Fi={platform:{name:"Wai'tuMusic",tagline:"Empowering Artists, Connecting Talent",description:"Comprehensive music industry management platform",version:"2.0.0"},features:{enableBookings:!0,enableEcommerce:!0,enableSplitsheets:!0,enableOppHub:!0,enableSocialMedia:!0,enableAnalytics:!0,enableNewsletter:!0,enablePressReleases:!0},security:{requireEmailVerification:!0,enableTwoFactor:!1,sessionTimeout:86400,maxLoginAttempts:5,maxFailedAttempts:5,lockoutDuration:900},notifications:{emailProvider:"sendgrid",enableEmailNotifications:!0,enableInAppNotifications:!0,enableSMSNotifications:!1},payments:{provider:"stripe",currency:"USD",enableSubscriptions:!0,enableOneTimePayments:!0},storage:{provider:"local",maxFileSize:104857600,allowedFileTypes:["mp3","wav","flac","mp4","pdf","jpg","jpeg","png","gif"]},ui:{toast:{duration:5e3,maxToasts:5},colors:{primary:"#7C3AED",secondary:"#10B981",success:"#10B981",warning:"#F59E0B",error:"#EF4444",info:"#3B82F6"},modal:{animationDuration:300}},technicalRider:{autoSaveInterval:3e4,maxBandMembers:50,maxTeamMembers:30,maxManagementMembers:20,allowAssignedTalentAccess:!1},api:{timeout:{short:5e3,medium:15e3,long:3e4}}};function NL(){return Fi}N.createContext({config:Fi,updateConfig:async()=>{},isLoading:!1,error:null});const bL=t=>`
    :root {
      /* Toast Configuration */
      --toast-duration: ${t.ui.toast.duration}ms;
      --toast-max-toasts: ${t.ui.toast.maxToasts};
      
      /* Color Configuration */
      --color-primary: ${t.ui.colors.primary};
      --color-secondary: ${t.ui.colors.secondary};
      --color-success: ${t.ui.colors.success};
      --color-warning: ${t.ui.colors.warning};
      --color-error: ${t.ui.colors.error};
      --color-info: ${t.ui.colors.info};
      
      /* Modal Configuration */
      --modal-animation-duration: ${t.ui.modal.animationDuration}ms;
      
      /* Technical Rider Configuration */
      --technical-rider-autosave-interval: ${t.technicalRider.autoSaveInterval}ms;
      --max-band-members: ${t.technicalRider.maxBandMembers};
      --max-team-members: ${t.technicalRider.maxTeamMembers};
      --max-management-members: ${t.technicalRider.maxManagementMembers};
      
      /* API Configuration (for frontend timeout displays) */
      --api-timeout-short: ${t.api.timeout.short}ms;
      --api-timeout-medium: ${t.api.timeout.medium}ms;
      --api-timeout-long: ${t.api.timeout.long}ms;
      
      /* Security Configuration (for frontend displays) */
      --session-timeout: ${t.security.sessionTimeout}ms;
      --max-login-attempts: ${t.security.maxFailedAttempts};
    }
  `,dw=t=>{if(typeof document<"u"){const s=document.getElementById("dynamic-config-styles")||document.createElement("style");s.id="dynamic-config-styles",s.textContent=bL(t),document.getElementById("dynamic-config-styles")||document.head.appendChild(s)}},Ak=N.createContext(null),n0=()=>{const t=N.useContext(Ak);if(!t)throw new Error("useConfiguration must be used within a ConfigurationProvider");return t};function wL({children:t}){const[s,n]=N.useState(null),a=Tt(),{user:r}=_s(),i=!!r&&(r.roleId===1||r.roleId===2),{data:l=Fi,isLoading:c}=ke({queryKey:["/api/admin/config"],queryFn:()=>xe("/api/admin/config"),staleTime:1e3*60*5,refetchOnWindowFocus:!1,enabled:i}),o=Xe({mutationFn:u=>xe("/api/admin/config",{method:"PUT",body:JSON.stringify(u)}),onSuccess:()=>{a.invalidateQueries({queryKey:["/api/admin/config"]}),n(null)},onError:u=>{n(u.message||"Failed to update configuration")}});N.useEffect(()=>{l&&dw(l)},[l]);const h={config:l,updateConfig:async u=>{const m={...l,...u};dw(m),await o.mutateAsync(u)},isLoading:c||o.isPending,error:s};return e.jsx(Ak.Provider,{value:h,children:t})}function SL(){return e.jsxs("div",{children:[e.jsx("h1",{children:"React Test Component Working"}),e.jsx("p",{children:"If you see this, React is rendering properly."})]})}var CL=N.createContext(void 0);function kd(t){const s=N.useContext(CL);return t||s||"ltr"}var eg="rovingFocusGroup.onEntryFocus",kL={bubbles:!1,cancelable:!0},_p="RovingFocusGroup",[Wj,Pk,AL]=xm(_p),[PL,Rp]=Yn(_p,[AL]),[TL,EL]=PL(_p),Tk=N.forwardRef((t,s)=>e.jsx(Wj.Provider,{scope:t.__scopeRovingFocusGroup,children:e.jsx(Wj.Slot,{scope:t.__scopeRovingFocusGroup,children:e.jsx(ML,{...t,ref:s})})}));Tk.displayName=_p;var ML=N.forwardRef((t,s)=>{const{__scopeRovingFocusGroup:n,orientation:a,loop:r=!1,dir:i,currentTabStopId:l,defaultCurrentTabStopId:c,onCurrentTabStopIdChange:o,onEntryFocus:d,preventScrollOnEntryFocus:h=!1,...u}=t,m=N.useRef(null),p=Ht(s,m),g=kd(i),[x=null,v]=br({prop:l,defaultProp:c,onChange:o}),[y,f]=N.useState(!1),b=sn(d),j=Pk(n),S=N.useRef(!1),[k,T]=N.useState(0);return N.useEffect(()=>{const A=m.current;if(A)return A.addEventListener(eg,b),()=>A.removeEventListener(eg,b)},[b]),e.jsx(TL,{scope:n,orientation:a,dir:g,loop:r,currentTabStopId:x,onItemFocus:N.useCallback(A=>v(A),[v]),onItemShiftTab:N.useCallback(()=>f(!0),[]),onFocusableItemAdd:N.useCallback(()=>T(A=>A+1),[]),onFocusableItemRemove:N.useCallback(()=>T(A=>A-1),[]),children:e.jsx(Dt.div,{tabIndex:y||k===0?-1:0,"data-orientation":a,...u,ref:p,style:{outline:"none",...t.style},onMouseDown:tt(t.onMouseDown,()=>{S.current=!0}),onFocus:tt(t.onFocus,A=>{const C=!S.current;if(A.target===A.currentTarget&&C&&!y){const w=new CustomEvent(eg,kL);if(A.currentTarget.dispatchEvent(w),!w.defaultPrevented){const P=j().filter(B=>B.focusable),M=P.find(B=>B.active),I=P.find(B=>B.id===x),_=[M,I,...P].filter(Boolean).map(B=>B.ref.current);_k(_,h)}}S.current=!1}),onBlur:tt(t.onBlur,()=>f(!1))})})}),Ek="RovingFocusGroupItem",Mk=N.forwardRef((t,s)=>{const{__scopeRovingFocusGroup:n,focusable:a=!0,active:r=!1,tabStopId:i,...l}=t,c=jr(),o=i||c,d=EL(Ek,n),h=d.currentTabStopId===o,u=Pk(n),{onFocusableItemAdd:m,onFocusableItemRemove:p}=d;return N.useEffect(()=>{if(a)return m(),()=>p()},[a,m,p]),e.jsx(Wj.ItemSlot,{scope:n,id:o,focusable:a,active:r,children:e.jsx(Dt.span,{tabIndex:h?0:-1,"data-orientation":d.orientation,...l,ref:s,onMouseDown:tt(t.onMouseDown,g=>{a?d.onItemFocus(o):g.preventDefault()}),onFocus:tt(t.onFocus,()=>d.onItemFocus(o)),onKeyDown:tt(t.onKeyDown,g=>{if(g.key==="Tab"&&g.shiftKey){d.onItemShiftTab();return}if(g.target!==g.currentTarget)return;const x=OL(g,d.orientation,d.dir);if(x!==void 0){if(g.metaKey||g.ctrlKey||g.altKey||g.shiftKey)return;g.preventDefault();let y=u().filter(f=>f.focusable).map(f=>f.ref.current);if(x==="last")y.reverse();else if(x==="prev"||x==="next"){x==="prev"&&y.reverse();const f=y.indexOf(g.currentTarget);y=d.loop?DL(y,f+1):y.slice(f+1)}setTimeout(()=>_k(y))}})})})});Mk.displayName=Ek;var _L={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function RL(t,s){return s!=="rtl"?t:t==="ArrowLeft"?"ArrowRight":t==="ArrowRight"?"ArrowLeft":t}function OL(t,s,n){const a=RL(t.key,n);if(!(s==="vertical"&&["ArrowLeft","ArrowRight"].includes(a))&&!(s==="horizontal"&&["ArrowUp","ArrowDown"].includes(a)))return _L[a]}function _k(t,s=!1){const n=document.activeElement;for(const a of t)if(a===n||(a.focus({preventScroll:s}),document.activeElement!==n))return}function DL(t,s){return t.map((n,a)=>t[(s+a)%t.length])}var Rk=Tk,Ok=Mk,Hj=["Enter"," "],IL=["ArrowDown","PageUp","Home"],Dk=["ArrowUp","PageDown","End"],LL=[...IL,...Dk],FL={ltr:[...Hj,"ArrowRight"],rtl:[...Hj,"ArrowLeft"]},qL={ltr:["ArrowLeft"],rtl:["ArrowRight"]},bm="Menu",[Uu,$L,BL]=xm(bm),[Xo,Ik]=Yn(bm,[BL,so,Rp]),Op=so(),Lk=Rp(),[UL,Jo]=Xo(bm),[zL,wm]=Xo(bm),Fk=t=>{const{__scopeMenu:s,open:n=!1,children:a,dir:r,onOpenChange:i,modal:l=!0}=t,c=Op(s),[o,d]=N.useState(null),h=N.useRef(!1),u=sn(i),m=kd(r);return N.useEffect(()=>{const p=()=>{h.current=!0,document.addEventListener("pointerdown",g,{capture:!0,once:!0}),document.addEventListener("pointermove",g,{capture:!0,once:!0})},g=()=>h.current=!1;return document.addEventListener("keydown",p,{capture:!0}),()=>{document.removeEventListener("keydown",p,{capture:!0}),document.removeEventListener("pointerdown",g,{capture:!0}),document.removeEventListener("pointermove",g,{capture:!0})}},[]),e.jsx(gp,{...c,children:e.jsx(UL,{scope:s,open:n,onOpenChange:u,content:o,onContentChange:d,children:e.jsx(zL,{scope:s,onClose:N.useCallback(()=>u(!1),[u]),isUsingKeyboardRef:h,dir:m,modal:l,children:a})})})};Fk.displayName=bm;var VL="MenuAnchor",a0=N.forwardRef((t,s)=>{const{__scopeMenu:n,...a}=t,r=Op(n);return e.jsx(vm,{...r,...a,ref:s})});a0.displayName=VL;var r0="MenuPortal",[GL,qk]=Xo(r0,{forceMount:void 0}),$k=t=>{const{__scopeMenu:s,forceMount:n,children:a,container:r}=t,i=Jo(r0,s);return e.jsx(GL,{scope:s,forceMount:n,children:e.jsx(Va,{present:n||i.open,children:e.jsx(bd,{asChild:!0,container:r,children:a})})})};$k.displayName=r0;var vr="MenuContent",[WL,i0]=Xo(vr),Bk=N.forwardRef((t,s)=>{const n=qk(vr,t.__scopeMenu),{forceMount:a=n.forceMount,...r}=t,i=Jo(vr,t.__scopeMenu),l=wm(vr,t.__scopeMenu);return e.jsx(Uu.Provider,{scope:t.__scopeMenu,children:e.jsx(Va,{present:a||i.open,children:e.jsx(Uu.Slot,{scope:t.__scopeMenu,children:l.modal?e.jsx(HL,{...r,ref:s}):e.jsx(KL,{...r,ref:s})})})})}),HL=N.forwardRef((t,s)=>{const n=Jo(vr,t.__scopeMenu),a=N.useRef(null),r=Ht(s,a);return N.useEffect(()=>{const i=a.current;if(i)return kp(i)},[]),e.jsx(l0,{...t,ref:r,trapFocus:n.open,disableOutsidePointerEvents:n.open,disableOutsideScroll:!0,onFocusOutside:tt(t.onFocusOutside,i=>i.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>n.onOpenChange(!1)})}),KL=N.forwardRef((t,s)=>{const n=Jo(vr,t.__scopeMenu);return e.jsx(l0,{...t,ref:s,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>n.onOpenChange(!1)})}),YL=$l("MenuContent.ScrollLock"),l0=N.forwardRef((t,s)=>{const{__scopeMenu:n,loop:a=!1,trapFocus:r,onOpenAutoFocus:i,onCloseAutoFocus:l,disableOutsidePointerEvents:c,onEntryFocus:o,onEscapeKeyDown:d,onPointerDownOutside:h,onFocusOutside:u,onInteractOutside:m,onDismiss:p,disableOutsideScroll:g,...x}=t,v=Jo(vr,n),y=wm(vr,n),f=Op(n),b=Lk(n),j=$L(n),[S,k]=N.useState(null),T=N.useRef(null),A=Ht(s,T,v.onContentChange),C=N.useRef(0),w=N.useRef(""),P=N.useRef(0),M=N.useRef(null),I=N.useRef("right"),W=N.useRef(0),_=g?Nm:N.Fragment,B=g?{as:YL,allowPinchZoom:!0}:void 0,O=F=>{var le,ne;const K=w.current+F,D=j().filter(ue=>!ue.disabled),G=document.activeElement,H=(le=D.find(ue=>ue.ref.current===G))==null?void 0:le.textValue,V=D.map(ue=>ue.textValue),se=lF(V,K,H),Z=(ne=D.find(ue=>ue.textValue===se))==null?void 0:ne.ref.current;(function ue(te){w.current=te,window.clearTimeout(C.current),te!==""&&(C.current=window.setTimeout(()=>ue(""),1e3))})(K),Z&&setTimeout(()=>Z.focus())};N.useEffect(()=>()=>window.clearTimeout(C.current),[]),Sp();const z=N.useCallback(F=>{var D,G;return I.current===((D=M.current)==null?void 0:D.side)&&cF(F,(G=M.current)==null?void 0:G.area)},[]);return e.jsx(WL,{scope:n,searchRef:w,onItemEnter:N.useCallback(F=>{z(F)&&F.preventDefault()},[z]),onItemLeave:N.useCallback(F=>{var K;z(F)||((K=T.current)==null||K.focus(),k(null))},[z]),onTriggerLeave:N.useCallback(F=>{z(F)&&F.preventDefault()},[z]),pointerGraceTimerRef:P,onPointerGraceIntentChange:N.useCallback(F=>{M.current=F},[]),children:e.jsx(_,{...B,children:e.jsx(ym,{asChild:!0,trapped:r,onMountAutoFocus:tt(i,F=>{var K;F.preventDefault(),(K=T.current)==null||K.focus({preventScroll:!0})}),onUnmountAutoFocus:l,children:e.jsx(Qo,{asChild:!0,disableOutsidePointerEvents:c,onEscapeKeyDown:d,onPointerDownOutside:h,onFocusOutside:u,onInteractOutside:m,onDismiss:p,children:e.jsx(Rk,{asChild:!0,...b,dir:y.dir,orientation:"vertical",loop:a,currentTabStopId:S,onCurrentTabStopIdChange:k,onEntryFocus:tt(o,F=>{y.isUsingKeyboardRef.current||F.preventDefault()}),preventScrollOnEntryFocus:!0,children:e.jsx(jp,{role:"menu","aria-orientation":"vertical","data-state":nA(v.open),"data-radix-menu-content":"",dir:y.dir,...f,...x,ref:A,style:{outline:"none",...x.style},onKeyDown:tt(x.onKeyDown,F=>{const D=F.target.closest("[data-radix-menu-content]")===F.currentTarget,G=F.ctrlKey||F.altKey||F.metaKey,H=F.key.length===1;D&&(F.key==="Tab"&&F.preventDefault(),!G&&H&&O(F.key));const V=T.current;if(F.target!==V||!LL.includes(F.key))return;F.preventDefault();const Z=j().filter(le=>!le.disabled).map(le=>le.ref.current);Dk.includes(F.key)&&Z.reverse(),rF(Z)}),onBlur:tt(t.onBlur,F=>{F.currentTarget.contains(F.target)||(window.clearTimeout(C.current),w.current="")}),onPointerMove:tt(t.onPointerMove,zu(F=>{const K=F.target,D=W.current!==F.clientX;if(F.currentTarget.contains(K)&&D){const G=F.clientX>W.current?"right":"left";I.current=G,W.current=F.clientX}}))})})})})})})});Bk.displayName=vr;var QL="MenuGroup",o0=N.forwardRef((t,s)=>{const{__scopeMenu:n,...a}=t;return e.jsx(Dt.div,{role:"group",...a,ref:s})});o0.displayName=QL;var ZL="MenuLabel",Uk=N.forwardRef((t,s)=>{const{__scopeMenu:n,...a}=t;return e.jsx(Dt.div,{...a,ref:s})});Uk.displayName=ZL;var yx="MenuItem",uw="menu.itemSelect",Dp=N.forwardRef((t,s)=>{const{disabled:n=!1,onSelect:a,...r}=t,i=N.useRef(null),l=wm(yx,t.__scopeMenu),c=i0(yx,t.__scopeMenu),o=Ht(s,i),d=N.useRef(!1),h=()=>{const u=i.current;if(!n&&u){const m=new CustomEvent(uw,{bubbles:!0,cancelable:!0});u.addEventListener(uw,p=>a==null?void 0:a(p),{once:!0}),Ny(u,m),m.defaultPrevented?d.current=!1:l.onClose()}};return e.jsx(zk,{...r,ref:o,disabled:n,onClick:tt(t.onClick,h),onPointerDown:u=>{var m;(m=t.onPointerDown)==null||m.call(t,u),d.current=!0},onPointerUp:tt(t.onPointerUp,u=>{var m;d.current||(m=u.currentTarget)==null||m.click()}),onKeyDown:tt(t.onKeyDown,u=>{const m=c.searchRef.current!=="";n||m&&u.key===" "||Hj.includes(u.key)&&(u.currentTarget.click(),u.preventDefault())})})});Dp.displayName=yx;var zk=N.forwardRef((t,s)=>{const{__scopeMenu:n,disabled:a=!1,textValue:r,...i}=t,l=i0(yx,n),c=Lk(n),o=N.useRef(null),d=Ht(s,o),[h,u]=N.useState(!1),[m,p]=N.useState("");return N.useEffect(()=>{const g=o.current;g&&p((g.textContent??"").trim())},[i.children]),e.jsx(Uu.ItemSlot,{scope:n,disabled:a,textValue:r??m,children:e.jsx(Ok,{asChild:!0,...c,focusable:!a,children:e.jsx(Dt.div,{role:"menuitem","data-highlighted":h?"":void 0,"aria-disabled":a||void 0,"data-disabled":a?"":void 0,...i,ref:d,onPointerMove:tt(t.onPointerMove,zu(g=>{a?l.onItemLeave(g):(l.onItemEnter(g),g.defaultPrevented||g.currentTarget.focus({preventScroll:!0}))})),onPointerLeave:tt(t.onPointerLeave,zu(g=>l.onItemLeave(g))),onFocus:tt(t.onFocus,()=>u(!0)),onBlur:tt(t.onBlur,()=>u(!1))})})})}),XL="MenuCheckboxItem",Vk=N.forwardRef((t,s)=>{const{checked:n=!1,onCheckedChange:a,...r}=t;return e.jsx(Yk,{scope:t.__scopeMenu,checked:n,children:e.jsx(Dp,{role:"menuitemcheckbox","aria-checked":Nx(n)?"mixed":n,...r,ref:s,"data-state":d0(n),onSelect:tt(r.onSelect,()=>a==null?void 0:a(Nx(n)?!0:!n),{checkForDefaultPrevented:!1})})})});Vk.displayName=XL;var Gk="MenuRadioGroup",[JL,eF]=Xo(Gk,{value:void 0,onValueChange:()=>{}}),Wk=N.forwardRef((t,s)=>{const{value:n,onValueChange:a,...r}=t,i=sn(a);return e.jsx(JL,{scope:t.__scopeMenu,value:n,onValueChange:i,children:e.jsx(o0,{...r,ref:s})})});Wk.displayName=Gk;var Hk="MenuRadioItem",Kk=N.forwardRef((t,s)=>{const{value:n,...a}=t,r=eF(Hk,t.__scopeMenu),i=n===r.value;return e.jsx(Yk,{scope:t.__scopeMenu,checked:i,children:e.jsx(Dp,{role:"menuitemradio","aria-checked":i,...a,ref:s,"data-state":d0(i),onSelect:tt(a.onSelect,()=>{var l;return(l=r.onValueChange)==null?void 0:l.call(r,n)},{checkForDefaultPrevented:!1})})})});Kk.displayName=Hk;var c0="MenuItemIndicator",[Yk,tF]=Xo(c0,{checked:!1}),Qk=N.forwardRef((t,s)=>{const{__scopeMenu:n,forceMount:a,...r}=t,i=tF(c0,n);return e.jsx(Va,{present:a||Nx(i.checked)||i.checked===!0,children:e.jsx(Dt.span,{...r,ref:s,"data-state":d0(i.checked)})})});Qk.displayName=c0;var sF="MenuSeparator",Zk=N.forwardRef((t,s)=>{const{__scopeMenu:n,...a}=t;return e.jsx(Dt.div,{role:"separator","aria-orientation":"horizontal",...a,ref:s})});Zk.displayName=sF;var nF="MenuArrow",Xk=N.forwardRef((t,s)=>{const{__scopeMenu:n,...a}=t,r=Op(n);return e.jsx(vp,{...r,...a,ref:s})});Xk.displayName=nF;var aF="MenuSub",[LJ,Jk]=Xo(aF),au="MenuSubTrigger",eA=N.forwardRef((t,s)=>{const n=Jo(au,t.__scopeMenu),a=wm(au,t.__scopeMenu),r=Jk(au,t.__scopeMenu),i=i0(au,t.__scopeMenu),l=N.useRef(null),{pointerGraceTimerRef:c,onPointerGraceIntentChange:o}=i,d={__scopeMenu:t.__scopeMenu},h=N.useCallback(()=>{l.current&&window.clearTimeout(l.current),l.current=null},[]);return N.useEffect(()=>h,[h]),N.useEffect(()=>{const u=c.current;return()=>{window.clearTimeout(u),o(null)}},[c,o]),e.jsx(a0,{asChild:!0,...d,children:e.jsx(zk,{id:r.triggerId,"aria-haspopup":"menu","aria-expanded":n.open,"aria-controls":r.contentId,"data-state":nA(n.open),...t,ref:Yo(s,r.onTriggerChange),onClick:u=>{var m;(m=t.onClick)==null||m.call(t,u),!(t.disabled||u.defaultPrevented)&&(u.currentTarget.focus(),n.open||n.onOpenChange(!0))},onPointerMove:tt(t.onPointerMove,zu(u=>{i.onItemEnter(u),!u.defaultPrevented&&!t.disabled&&!n.open&&!l.current&&(i.onPointerGraceIntentChange(null),l.current=window.setTimeout(()=>{n.onOpenChange(!0),h()},100))})),onPointerLeave:tt(t.onPointerLeave,zu(u=>{var p,g;h();const m=(p=n.content)==null?void 0:p.getBoundingClientRect();if(m){const x=(g=n.content)==null?void 0:g.dataset.side,v=x==="right",y=v?-5:5,f=m[v?"left":"right"],b=m[v?"right":"left"];i.onPointerGraceIntentChange({area:[{x:u.clientX+y,y:u.clientY},{x:f,y:m.top},{x:b,y:m.top},{x:b,y:m.bottom},{x:f,y:m.bottom}],side:x}),window.clearTimeout(c.current),c.current=window.setTimeout(()=>i.onPointerGraceIntentChange(null),300)}else{if(i.onTriggerLeave(u),u.defaultPrevented)return;i.onPointerGraceIntentChange(null)}})),onKeyDown:tt(t.onKeyDown,u=>{var p;const m=i.searchRef.current!=="";t.disabled||m&&u.key===" "||FL[a.dir].includes(u.key)&&(n.onOpenChange(!0),(p=n.content)==null||p.focus(),u.preventDefault())})})})});eA.displayName=au;var tA="MenuSubContent",sA=N.forwardRef((t,s)=>{const n=qk(vr,t.__scopeMenu),{forceMount:a=n.forceMount,...r}=t,i=Jo(vr,t.__scopeMenu),l=wm(vr,t.__scopeMenu),c=Jk(tA,t.__scopeMenu),o=N.useRef(null),d=Ht(s,o);return e.jsx(Uu.Provider,{scope:t.__scopeMenu,children:e.jsx(Va,{present:a||i.open,children:e.jsx(Uu.Slot,{scope:t.__scopeMenu,children:e.jsx(l0,{id:c.contentId,"aria-labelledby":c.triggerId,...r,ref:d,align:"start",side:l.dir==="rtl"?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:h=>{var u;l.isUsingKeyboardRef.current&&((u=o.current)==null||u.focus()),h.preventDefault()},onCloseAutoFocus:h=>h.preventDefault(),onFocusOutside:tt(t.onFocusOutside,h=>{h.target!==c.trigger&&i.onOpenChange(!1)}),onEscapeKeyDown:tt(t.onEscapeKeyDown,h=>{l.onClose(),h.preventDefault()}),onKeyDown:tt(t.onKeyDown,h=>{var p;const u=h.currentTarget.contains(h.target),m=qL[l.dir].includes(h.key);u&&m&&(i.onOpenChange(!1),(p=c.trigger)==null||p.focus(),h.preventDefault())})})})})})});sA.displayName=tA;function nA(t){return t?"open":"closed"}function Nx(t){return t==="indeterminate"}function d0(t){return Nx(t)?"indeterminate":t?"checked":"unchecked"}function rF(t){const s=document.activeElement;for(const n of t)if(n===s||(n.focus(),document.activeElement!==s))return}function iF(t,s){return t.map((n,a)=>t[(s+a)%t.length])}function lF(t,s,n){const r=s.length>1&&Array.from(s).every(d=>d===s[0])?s[0]:s,i=n?t.indexOf(n):-1;let l=iF(t,Math.max(i,0));r.length===1&&(l=l.filter(d=>d!==n));const o=l.find(d=>d.toLowerCase().startsWith(r.toLowerCase()));return o!==n?o:void 0}function oF(t,s){const{x:n,y:a}=t;let r=!1;for(let i=0,l=s.length-1;i<s.length;l=i++){const c=s[i].x,o=s[i].y,d=s[l].x,h=s[l].y;o>a!=h>a&&n<(d-c)*(a-o)/(h-o)+c&&(r=!r)}return r}function cF(t,s){if(!s)return!1;const n={x:t.clientX,y:t.clientY};return oF(n,s)}function zu(t){return s=>s.pointerType==="mouse"?t(s):void 0}var dF=Fk,uF=a0,mF=$k,hF=Bk,xF=o0,pF=Uk,fF=Dp,gF=Vk,jF=Wk,vF=Kk,yF=Qk,NF=Zk,bF=Xk,wF=eA,SF=sA,u0="DropdownMenu",[CF,FJ]=Yn(u0,[Ik]),ka=Ik(),[kF,aA]=CF(u0),rA=t=>{const{__scopeDropdownMenu:s,children:n,dir:a,open:r,defaultOpen:i,onOpenChange:l,modal:c=!0}=t,o=ka(s),d=N.useRef(null),[h=!1,u]=br({prop:r,defaultProp:i,onChange:l});return e.jsx(kF,{scope:s,triggerId:jr(),triggerRef:d,contentId:jr(),open:h,onOpenChange:u,onOpenToggle:N.useCallback(()=>u(m=>!m),[u]),modal:c,children:e.jsx(dF,{...o,open:h,onOpenChange:u,dir:a,modal:c,children:n})})};rA.displayName=u0;var iA="DropdownMenuTrigger",lA=N.forwardRef((t,s)=>{const{__scopeDropdownMenu:n,disabled:a=!1,...r}=t,i=aA(iA,n),l=ka(n);return e.jsx(uF,{asChild:!0,...l,children:e.jsx(Dt.button,{type:"button",id:i.triggerId,"aria-haspopup":"menu","aria-expanded":i.open,"aria-controls":i.open?i.contentId:void 0,"data-state":i.open?"open":"closed","data-disabled":a?"":void 0,disabled:a,...r,ref:Yo(s,i.triggerRef),onPointerDown:tt(t.onPointerDown,c=>{!a&&c.button===0&&c.ctrlKey===!1&&(i.onOpenToggle(),i.open||c.preventDefault())}),onKeyDown:tt(t.onKeyDown,c=>{a||(["Enter"," "].includes(c.key)&&i.onOpenToggle(),c.key==="ArrowDown"&&i.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(c.key)&&c.preventDefault())})})})});lA.displayName=iA;var AF="DropdownMenuPortal",oA=t=>{const{__scopeDropdownMenu:s,...n}=t,a=ka(s);return e.jsx(mF,{...a,...n})};oA.displayName=AF;var cA="DropdownMenuContent",dA=N.forwardRef((t,s)=>{const{__scopeDropdownMenu:n,...a}=t,r=aA(cA,n),i=ka(n),l=N.useRef(!1);return e.jsx(hF,{id:r.contentId,"aria-labelledby":r.triggerId,...i,...a,ref:s,onCloseAutoFocus:tt(t.onCloseAutoFocus,c=>{var o;l.current||(o=r.triggerRef.current)==null||o.focus(),l.current=!1,c.preventDefault()}),onInteractOutside:tt(t.onInteractOutside,c=>{const o=c.detail.originalEvent,d=o.button===0&&o.ctrlKey===!0,h=o.button===2||d;(!r.modal||h)&&(l.current=!0)}),style:{...t.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});dA.displayName=cA;var PF="DropdownMenuGroup",TF=N.forwardRef((t,s)=>{const{__scopeDropdownMenu:n,...a}=t,r=ka(n);return e.jsx(xF,{...r,...a,ref:s})});TF.displayName=PF;var EF="DropdownMenuLabel",uA=N.forwardRef((t,s)=>{const{__scopeDropdownMenu:n,...a}=t,r=ka(n);return e.jsx(pF,{...r,...a,ref:s})});uA.displayName=EF;var MF="DropdownMenuItem",mA=N.forwardRef((t,s)=>{const{__scopeDropdownMenu:n,...a}=t,r=ka(n);return e.jsx(fF,{...r,...a,ref:s})});mA.displayName=MF;var _F="DropdownMenuCheckboxItem",hA=N.forwardRef((t,s)=>{const{__scopeDropdownMenu:n,...a}=t,r=ka(n);return e.jsx(gF,{...r,...a,ref:s})});hA.displayName=_F;var RF="DropdownMenuRadioGroup",OF=N.forwardRef((t,s)=>{const{__scopeDropdownMenu:n,...a}=t,r=ka(n);return e.jsx(jF,{...r,...a,ref:s})});OF.displayName=RF;var DF="DropdownMenuRadioItem",xA=N.forwardRef((t,s)=>{const{__scopeDropdownMenu:n,...a}=t,r=ka(n);return e.jsx(vF,{...r,...a,ref:s})});xA.displayName=DF;var IF="DropdownMenuItemIndicator",pA=N.forwardRef((t,s)=>{const{__scopeDropdownMenu:n,...a}=t,r=ka(n);return e.jsx(yF,{...r,...a,ref:s})});pA.displayName=IF;var LF="DropdownMenuSeparator",fA=N.forwardRef((t,s)=>{const{__scopeDropdownMenu:n,...a}=t,r=ka(n);return e.jsx(NF,{...r,...a,ref:s})});fA.displayName=LF;var FF="DropdownMenuArrow",qF=N.forwardRef((t,s)=>{const{__scopeDropdownMenu:n,...a}=t,r=ka(n);return e.jsx(bF,{...r,...a,ref:s})});qF.displayName=FF;var $F="DropdownMenuSubTrigger",gA=N.forwardRef((t,s)=>{const{__scopeDropdownMenu:n,...a}=t,r=ka(n);return e.jsx(wF,{...r,...a,ref:s})});gA.displayName=$F;var BF="DropdownMenuSubContent",jA=N.forwardRef((t,s)=>{const{__scopeDropdownMenu:n,...a}=t,r=ka(n);return e.jsx(SF,{...r,...a,ref:s,style:{...t.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});jA.displayName=BF;var UF=rA,zF=lA,VF=oA,vA=dA,yA=uA,NA=mA,bA=hA,wA=xA,SA=pA,CA=fA,kA=gA,AA=jA;const m0=UF,h0=zF,GF=N.forwardRef(({className:t,inset:s,children:n,...a},r)=>e.jsxs(kA,{ref:r,className:Je("flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",s&&"pl-8",t),...a,children:[n,e.jsx(qo,{className:"ml-auto"})]}));GF.displayName=kA.displayName;const WF=N.forwardRef(({className:t,...s},n)=>e.jsx(AA,{ref:n,className:Je("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-dropdown-menu-content-transform-origin]",t),...s}));WF.displayName=AA.displayName;const Ip=N.forwardRef(({className:t,sideOffset:s=4,...n},a)=>e.jsx(VF,{children:e.jsx(vA,{ref:a,sideOffset:s,className:Je("z-50 max-h-[var(--radix-dropdown-menu-content-available-height)] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-dropdown-menu-content-transform-origin]",t),...n})}));Ip.displayName=vA.displayName;const ri=N.forwardRef(({className:t,inset:s,...n},a)=>e.jsx(NA,{ref:a,className:Je("relative flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",s&&"pl-8",t),...n}));ri.displayName=NA.displayName;const HF=N.forwardRef(({className:t,children:s,checked:n,...a},r)=>e.jsxs(bA,{ref:r,className:Je("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),checked:n,...a,children:[e.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:e.jsx(SA,{children:e.jsx(ir,{className:"h-4 w-4"})})}),s]}));HF.displayName=bA.displayName;const KF=N.forwardRef(({className:t,children:s,...n},a)=>e.jsxs(wA,{ref:a,className:Je("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...n,children:[e.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:e.jsx(SA,{children:e.jsx(a4,{className:"h-2 w-2 fill-current"})})}),s]}));KF.displayName=wA.displayName;const YF=N.forwardRef(({className:t,inset:s,...n},a)=>e.jsx(yA,{ref:a,className:Je("px-2 py-1.5 text-sm font-semibold",s&&"pl-8",t),...n}));YF.displayName=yA.displayName;const Kj=N.forwardRef(({className:t,...s},n)=>e.jsx(CA,{ref:n,className:Je("-mx-1 my-1 h-px bg-muted",t),...s}));Kj.displayName=CA.displayName;const QF="/assets/WaituMusic_Logo_AI_1753582673973-Dibllsxm.png",ZF=({className:t="",size:s="md",showText:n=!1})=>{const a={sm:"w-8 h-8",md:"w-12 h-12",lg:"w-16 h-16",xl:"w-24 h-24"},r={sm:"text-sm",md:"text-base",lg:"text-lg",xl:"text-xl"};return e.jsxs("div",{className:`flex items-center space-x-2 ${t}`,children:[e.jsx("img",{src:QF,alt:"WaituMusic Logo",className:`${a[s]} object-contain`}),n&&e.jsx("span",{className:`font-bold text-primary ${r[s]}`,children:"Wai'tuMusic"})]})},XF=fm("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function X({className:t,variant:s,...n}){return e.jsx("div",{className:Je(XF({variant:s}),t),...n})}var Sm=t=>t.type==="checkbox",jo=t=>t instanceof Date,ja=t=>t==null;const PA=t=>typeof t=="object";var Sn=t=>!ja(t)&&!Array.isArray(t)&&PA(t)&&!jo(t),TA=t=>Sn(t)&&t.target?Sm(t.target)?t.target.checked:t.target.value:t,JF=t=>t.substring(0,t.search(/\.\d+(\.|$)/))||t,EA=(t,s)=>t.has(JF(s)),e8=t=>{const s=t.constructor&&t.constructor.prototype;return Sn(s)&&s.hasOwnProperty("isPrototypeOf")},x0=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function nn(t){let s;const n=Array.isArray(t),a=typeof FileList<"u"?t instanceof FileList:!1;if(t instanceof Date)s=new Date(t);else if(t instanceof Set)s=new Set(t);else if(!(x0&&(t instanceof Blob||a))&&(n||Sn(t)))if(s=n?[]:{},!n&&!e8(t))s=t;else for(const r in t)t.hasOwnProperty(r)&&(s[r]=nn(t[r]));else return t;return s}var Cm=t=>Array.isArray(t)?t.filter(Boolean):[],Qs=t=>t===void 0,ut=(t,s,n)=>{if(!s||!Sn(t))return n;const a=Cm(s.split(/[,[\].]+?/)).reduce((r,i)=>ja(r)?r:r[i],t);return Qs(a)||a===t?Qs(t[s])?n:t[s]:a},Ka=t=>typeof t=="boolean",p0=t=>/^\w*$/.test(t),MA=t=>Cm(t.replace(/["|']|\]/g,"").split(/\.|\[/)),Ss=(t,s,n)=>{let a=-1;const r=p0(s)?[s]:MA(s),i=r.length,l=i-1;for(;++a<i;){const c=r[a];let o=n;if(a!==l){const d=t[c];o=Sn(d)||Array.isArray(d)?d:isNaN(+r[a+1])?{}:[]}if(c==="__proto__"||c==="constructor"||c==="prototype")return;t[c]=o,t=t[c]}};const bx={BLUR:"blur",FOCUS_OUT:"focusout",CHANGE:"change"},xr={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},Ni={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"},_A=lt.createContext(null),km=()=>lt.useContext(_A),t8=t=>{const{children:s,...n}=t;return lt.createElement(_A.Provider,{value:n},s)};var RA=(t,s,n,a=!0)=>{const r={defaultValues:s._defaultValues};for(const i in t)Object.defineProperty(r,i,{get:()=>{const l=i;return s._proxyFormState[l]!==xr.all&&(s._proxyFormState[l]=!a||xr.all),n&&(n[l]=!0),t[l]}});return r};function s8(t){const s=km(),{control:n=s.control,disabled:a,name:r,exact:i}=t||{},[l,c]=lt.useState(n._formState),o=lt.useRef({isDirty:!1,isLoading:!1,dirtyFields:!1,touchedFields:!1,validatingFields:!1,isValidating:!1,isValid:!1,errors:!1}),d=lt.useRef(r);return d.current=r,lt.useEffect(()=>n._subscribe({name:d.current,formState:o.current,exact:i,callback:h=>{!a&&c({...n._formState,...h})}}),[n,a,i]),lt.useEffect(()=>{o.current.isValid&&n._setValid(!0)},[n]),lt.useMemo(()=>RA(l,n,o.current,!1),[l,n])}var ii=t=>typeof t=="string",OA=(t,s,n,a,r)=>ii(t)?(a&&s.watch.add(t),ut(n,t,r)):Array.isArray(t)?t.map(i=>(a&&s.watch.add(i),ut(n,i))):(a&&(s.watchAll=!0),n);function n8(t){const s=km(),{control:n=s.control,name:a,defaultValue:r,disabled:i,exact:l}=t||{},c=lt.useRef(a),o=lt.useRef(r);c.current=a,lt.useEffect(()=>n._subscribe({name:c.current,formState:{values:!0},exact:l,callback:u=>!i&&h(OA(c.current,n._names,u.values||n._formValues,!1,o.current))}),[n,i,l]);const[d,h]=lt.useState(n._getWatch(a,r));return lt.useEffect(()=>n._removeUnmounted()),d}function a8(t){const s=km(),{name:n,disabled:a,control:r=s.control,shouldUnregister:i}=t,l=EA(r._names.array,n),c=n8({control:r,name:n,defaultValue:ut(r._formValues,n,ut(r._defaultValues,n,t.defaultValue)),exact:!0}),o=s8({control:r,name:n,exact:!0}),d=lt.useRef(t),h=lt.useRef(r.register(n,{...t.rules,value:c,...Ka(t.disabled)?{disabled:t.disabled}:{}})),u=lt.useMemo(()=>Object.defineProperties({},{invalid:{enumerable:!0,get:()=>!!ut(o.errors,n)},isDirty:{enumerable:!0,get:()=>!!ut(o.dirtyFields,n)},isTouched:{enumerable:!0,get:()=>!!ut(o.touchedFields,n)},isValidating:{enumerable:!0,get:()=>!!ut(o.validatingFields,n)},error:{enumerable:!0,get:()=>ut(o.errors,n)}}),[o,n]),m=lt.useCallback(v=>h.current.onChange({target:{value:TA(v),name:n},type:bx.CHANGE}),[n]),p=lt.useCallback(()=>h.current.onBlur({target:{value:ut(r._formValues,n),name:n},type:bx.BLUR}),[n,r._formValues]),g=lt.useCallback(v=>{const y=ut(r._fields,n);y&&v&&(y._f.ref={focus:()=>v.focus(),select:()=>v.select(),setCustomValidity:f=>v.setCustomValidity(f),reportValidity:()=>v.reportValidity()})},[r._fields,n]),x=lt.useMemo(()=>({name:n,value:c,...Ka(a)||o.disabled?{disabled:o.disabled||a}:{},onChange:m,onBlur:p,ref:g}),[n,a,o.disabled,m,p,g,c]);return lt.useEffect(()=>{const v=r._options.shouldUnregister||i;r.register(n,{...d.current.rules,...Ka(d.current.disabled)?{disabled:d.current.disabled}:{}});const y=(f,b)=>{const j=ut(r._fields,f);j&&j._f&&(j._f.mount=b)};if(y(n,!0),v){const f=nn(ut(r._options.defaultValues,n));Ss(r._defaultValues,n,f),Qs(ut(r._formValues,n))&&Ss(r._formValues,n,f)}return!l&&r.register(n),()=>{(l?v&&!r._state.action:v)?r.unregister(n):y(n,!1)}},[n,r,l,i]),lt.useEffect(()=>{r._setDisabledField({disabled:a,name:n})},[a,n,r]),lt.useMemo(()=>({field:x,formState:o,fieldState:u}),[x,o,u])}const r8=t=>t.render(a8(t));var DA=(t,s,n,a,r)=>s?{...n[t],types:{...n[t]&&n[t].types?n[t].types:{},[a]:r||!0}}:{},Oa=t=>Array.isArray(t)?t:[t],mw=()=>{let t=[];return{get observers(){return t},next:r=>{for(const i of t)i.next&&i.next(r)},subscribe:r=>(t.push(r),{unsubscribe:()=>{t=t.filter(i=>i!==r)}}),unsubscribe:()=>{t=[]}}},Yj=t=>ja(t)||!PA(t);function fl(t,s){if(Yj(t)||Yj(s))return t===s;if(jo(t)&&jo(s))return t.getTime()===s.getTime();const n=Object.keys(t),a=Object.keys(s);if(n.length!==a.length)return!1;for(const r of n){const i=t[r];if(!a.includes(r))return!1;if(r!=="ref"){const l=s[r];if(jo(i)&&jo(l)||Sn(i)&&Sn(l)||Array.isArray(i)&&Array.isArray(l)?!fl(i,l):i!==l)return!1}}return!0}var ra=t=>Sn(t)&&!Object.keys(t).length,f0=t=>t.type==="file",Dr=t=>typeof t=="function",wx=t=>{if(!x0)return!1;const s=t?t.ownerDocument:0;return t instanceof(s&&s.defaultView?s.defaultView.HTMLElement:HTMLElement)},IA=t=>t.type==="select-multiple",g0=t=>t.type==="radio",i8=t=>g0(t)||Sm(t),tg=t=>wx(t)&&t.isConnected;function l8(t,s){const n=s.slice(0,-1).length;let a=0;for(;a<n;)t=Qs(t)?a++:t[s[a++]];return t}function o8(t){for(const s in t)if(t.hasOwnProperty(s)&&!Qs(t[s]))return!1;return!0}function Pn(t,s){const n=Array.isArray(s)?s:p0(s)?[s]:MA(s),a=n.length===1?t:l8(t,n),r=n.length-1,i=n[r];return a&&delete a[i],r!==0&&(Sn(a)&&ra(a)||Array.isArray(a)&&o8(a))&&Pn(t,n.slice(0,-1)),t}var LA=t=>{for(const s in t)if(Dr(t[s]))return!0;return!1};function Sx(t,s={}){const n=Array.isArray(t);if(Sn(t)||n)for(const a in t)Array.isArray(t[a])||Sn(t[a])&&!LA(t[a])?(s[a]=Array.isArray(t[a])?[]:{},Sx(t[a],s[a])):ja(t[a])||(s[a]=!0);return s}function FA(t,s,n){const a=Array.isArray(t);if(Sn(t)||a)for(const r in t)Array.isArray(t[r])||Sn(t[r])&&!LA(t[r])?Qs(s)||Yj(n[r])?n[r]=Array.isArray(t[r])?Sx(t[r],[]):{...Sx(t[r])}:FA(t[r],ja(s)?{}:s[r],n[r]):n[r]=!fl(t[r],s[r]);return n}var Wd=(t,s)=>FA(t,s,Sx(s));const hw={value:!1,isValid:!1},xw={value:!0,isValid:!0};var qA=t=>{if(Array.isArray(t)){if(t.length>1){const s=t.filter(n=>n&&n.checked&&!n.disabled).map(n=>n.value);return{value:s,isValid:!!s.length}}return t[0].checked&&!t[0].disabled?t[0].attributes&&!Qs(t[0].attributes.value)?Qs(t[0].value)||t[0].value===""?xw:{value:t[0].value,isValid:!0}:xw:hw}return hw},$A=(t,{valueAsNumber:s,valueAsDate:n,setValueAs:a})=>Qs(t)?t:s?t===""?NaN:t&&+t:n&&ii(t)?new Date(t):a?a(t):t;const pw={isValid:!1,value:null};var BA=t=>Array.isArray(t)?t.reduce((s,n)=>n&&n.checked&&!n.disabled?{isValid:!0,value:n.value}:s,pw):pw;function fw(t){const s=t.ref;return f0(s)?s.files:g0(s)?BA(t.refs).value:IA(s)?[...s.selectedOptions].map(({value:n})=>n):Sm(s)?qA(t.refs).value:$A(Qs(s.value)?t.ref.value:s.value,t)}var c8=(t,s,n,a)=>{const r={};for(const i of t){const l=ut(s,i);l&&Ss(r,i,l._f)}return{criteriaMode:n,names:[...t],fields:r,shouldUseNativeValidation:a}},Cx=t=>t instanceof RegExp,Hd=t=>Qs(t)?t:Cx(t)?t.source:Sn(t)?Cx(t.value)?t.value.source:t.value:t,Nc=t=>({isOnSubmit:!t||t===xr.onSubmit,isOnBlur:t===xr.onBlur,isOnChange:t===xr.onChange,isOnAll:t===xr.all,isOnTouch:t===xr.onTouched});const gw="AsyncFunction";var d8=t=>!!t&&!!t.validate&&!!(Dr(t.validate)&&t.validate.constructor.name===gw||Sn(t.validate)&&Object.values(t.validate).find(s=>s.constructor.name===gw)),u8=t=>t.mount&&(t.required||t.min||t.max||t.maxLength||t.minLength||t.pattern||t.validate),Qj=(t,s,n)=>!n&&(s.watchAll||s.watch.has(t)||[...s.watch].some(a=>t.startsWith(a)&&/^\.\w+/.test(t.slice(a.length))));const Oc=(t,s,n,a)=>{for(const r of n||Object.keys(t)){const i=ut(t,r);if(i){const{_f:l,...c}=i;if(l){if(l.refs&&l.refs[0]&&s(l.refs[0],r)&&!a)return!0;if(l.ref&&s(l.ref,l.name)&&!a)return!0;if(Oc(c,s))break}else if(Sn(c)&&Oc(c,s))break}}};function jw(t,s,n){const a=ut(t,n);if(a||p0(n))return{error:a,name:n};const r=n.split(".");for(;r.length;){const i=r.join("."),l=ut(s,i),c=ut(t,i);if(l&&!Array.isArray(l)&&n!==i)return{name:n};if(c&&c.type)return{name:i,error:c};r.pop()}return{name:n}}var m8=(t,s,n,a)=>{n(t);const{name:r,...i}=t;return ra(i)||Object.keys(i).length>=Object.keys(s).length||Object.keys(i).find(l=>s[l]===(!a||xr.all))},h8=(t,s,n)=>!t||!s||t===s||Oa(t).some(a=>a&&(n?a===s:a.startsWith(s)||s.startsWith(a))),x8=(t,s,n,a,r)=>r.isOnAll?!1:!n&&r.isOnTouch?!(s||t):(n?a.isOnBlur:r.isOnBlur)?!t:(n?a.isOnChange:r.isOnChange)?t:!0,p8=(t,s)=>!Cm(ut(t,s)).length&&Pn(t,s),UA=(t,s,n)=>{const a=Oa(ut(t,n));return Ss(a,"root",s[n]),Ss(t,n,a),t},Lh=t=>ii(t);function vw(t,s,n="validate"){if(Lh(t)||Array.isArray(t)&&t.every(Lh)||Ka(t)&&!t)return{type:n,message:Lh(t)?t:"",ref:s}}var ac=t=>Sn(t)&&!Cx(t)?t:{value:t,message:""},Zj=async(t,s,n,a,r,i)=>{const{ref:l,refs:c,required:o,maxLength:d,minLength:h,min:u,max:m,pattern:p,validate:g,name:x,valueAsNumber:v,mount:y}=t._f,f=ut(n,x);if(!y||s.has(x))return{};const b=c?c[0]:l,j=M=>{r&&b.reportValidity&&(b.setCustomValidity(Ka(M)?"":M||""),b.reportValidity())},S={},k=g0(l),T=Sm(l),A=k||T,C=(v||f0(l))&&Qs(l.value)&&Qs(f)||wx(l)&&l.value===""||f===""||Array.isArray(f)&&!f.length,w=DA.bind(null,x,a,S),P=(M,I,W,_=Ni.maxLength,B=Ni.minLength)=>{const O=M?I:W;S[x]={type:M?_:B,message:O,ref:l,...w(M?_:B,O)}};if(i?!Array.isArray(f)||!f.length:o&&(!A&&(C||ja(f))||Ka(f)&&!f||T&&!qA(c).isValid||k&&!BA(c).isValid)){const{value:M,message:I}=Lh(o)?{value:!!o,message:o}:ac(o);if(M&&(S[x]={type:Ni.required,message:I,ref:b,...w(Ni.required,I)},!a))return j(I),S}if(!C&&(!ja(u)||!ja(m))){let M,I;const W=ac(m),_=ac(u);if(!ja(f)&&!isNaN(f)){const B=l.valueAsNumber||f&&+f;ja(W.value)||(M=B>W.value),ja(_.value)||(I=B<_.value)}else{const B=l.valueAsDate||new Date(f),O=K=>new Date(new Date().toDateString()+" "+K),z=l.type=="time",F=l.type=="week";ii(W.value)&&f&&(M=z?O(f)>O(W.value):F?f>W.value:B>new Date(W.value)),ii(_.value)&&f&&(I=z?O(f)<O(_.value):F?f<_.value:B<new Date(_.value))}if((M||I)&&(P(!!M,W.message,_.message,Ni.max,Ni.min),!a))return j(S[x].message),S}if((d||h)&&!C&&(ii(f)||i&&Array.isArray(f))){const M=ac(d),I=ac(h),W=!ja(M.value)&&f.length>+M.value,_=!ja(I.value)&&f.length<+I.value;if((W||_)&&(P(W,M.message,I.message),!a))return j(S[x].message),S}if(p&&!C&&ii(f)){const{value:M,message:I}=ac(p);if(Cx(M)&&!f.match(M)&&(S[x]={type:Ni.pattern,message:I,ref:l,...w(Ni.pattern,I)},!a))return j(I),S}if(g){if(Dr(g)){const M=await g(f,n),I=vw(M,b);if(I&&(S[x]={...I,...w(Ni.validate,I.message)},!a))return j(I.message),S}else if(Sn(g)){let M={};for(const I in g){if(!ra(M)&&!a)break;const W=vw(await g[I](f,n),b,I);W&&(M={...W,...w(I,W.message)},j(W.message),a&&(S[x]=M))}if(!ra(M)&&(S[x]={ref:b,...M},!a))return S}}return j(!0),S};const f8={mode:xr.onSubmit,reValidateMode:xr.onChange,shouldFocusError:!0};function g8(t={}){let s={...f8,...t},n={submitCount:0,isDirty:!1,isLoading:Dr(s.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:s.errors||{},disabled:s.disabled||!1};const a={};let r=Sn(s.defaultValues)||Sn(s.values)?nn(s.values||s.defaultValues)||{}:{},i=s.shouldUnregister?{}:nn(r),l={action:!1,mount:!1,watch:!1},c={mount:new Set,disabled:new Set,unMount:new Set,array:new Set,watch:new Set},o,d=0;const h={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1};let u={...h};const m={array:mw(),state:mw()},p=Nc(s.mode),g=Nc(s.reValidateMode),x=s.criteriaMode===xr.all,v=re=>je=>{clearTimeout(d),d=setTimeout(re,je)},y=async re=>{if(!s.disabled&&(h.isValid||u.isValid||re)){const je=s.resolver?ra((await C()).errors):await P(a,!0);je!==n.isValid&&m.state.next({isValid:je})}},f=(re,je)=>{!s.disabled&&(h.isValidating||h.validatingFields||u.isValidating||u.validatingFields)&&((re||Array.from(c.mount)).forEach(Pe=>{Pe&&(je?Ss(n.validatingFields,Pe,je):Pn(n.validatingFields,Pe))}),m.state.next({validatingFields:n.validatingFields,isValidating:!ra(n.validatingFields)}))},b=(re,je=[],Pe,He,Ye=!0,Ke=!0)=>{if(He&&Pe&&!s.disabled){if(l.action=!0,Ke&&Array.isArray(ut(a,re))){const oe=Pe(ut(a,re),He.argA,He.argB);Ye&&Ss(a,re,oe)}if(Ke&&Array.isArray(ut(n.errors,re))){const oe=Pe(ut(n.errors,re),He.argA,He.argB);Ye&&Ss(n.errors,re,oe),p8(n.errors,re)}if((h.touchedFields||u.touchedFields)&&Ke&&Array.isArray(ut(n.touchedFields,re))){const oe=Pe(ut(n.touchedFields,re),He.argA,He.argB);Ye&&Ss(n.touchedFields,re,oe)}(h.dirtyFields||u.dirtyFields)&&(n.dirtyFields=Wd(r,i)),m.state.next({name:re,isDirty:I(re,je),dirtyFields:n.dirtyFields,errors:n.errors,isValid:n.isValid})}else Ss(i,re,je)},j=(re,je)=>{Ss(n.errors,re,je),m.state.next({errors:n.errors})},S=re=>{n.errors=re,m.state.next({errors:n.errors,isValid:!1})},k=(re,je,Pe,He)=>{const Ye=ut(a,re);if(Ye){const Ke=ut(i,re,Qs(Pe)?ut(r,re):Pe);Qs(Ke)||He&&He.defaultChecked||je?Ss(i,re,je?Ke:fw(Ye._f)):B(re,Ke),l.mount&&y()}},T=(re,je,Pe,He,Ye)=>{let Ke=!1,oe=!1;const ye={name:re};if(!s.disabled){if(!Pe||He){(h.isDirty||u.isDirty)&&(oe=n.isDirty,n.isDirty=ye.isDirty=I(),Ke=oe!==ye.isDirty);const Te=fl(ut(r,re),je);oe=!!ut(n.dirtyFields,re),Te?Pn(n.dirtyFields,re):Ss(n.dirtyFields,re,!0),ye.dirtyFields=n.dirtyFields,Ke=Ke||(h.dirtyFields||u.dirtyFields)&&oe!==!Te}if(Pe){const Te=ut(n.touchedFields,re);Te||(Ss(n.touchedFields,re,Pe),ye.touchedFields=n.touchedFields,Ke=Ke||(h.touchedFields||u.touchedFields)&&Te!==Pe)}Ke&&Ye&&m.state.next(ye)}return Ke?ye:{}},A=(re,je,Pe,He)=>{const Ye=ut(n.errors,re),Ke=(h.isValid||u.isValid)&&Ka(je)&&n.isValid!==je;if(s.delayError&&Pe?(o=v(()=>j(re,Pe)),o(s.delayError)):(clearTimeout(d),o=null,Pe?Ss(n.errors,re,Pe):Pn(n.errors,re)),(Pe?!fl(Ye,Pe):Ye)||!ra(He)||Ke){const oe={...He,...Ke&&Ka(je)?{isValid:je}:{},errors:n.errors,name:re};n={...n,...oe},m.state.next(oe)}},C=async re=>{f(re,!0);const je=await s.resolver(i,s.context,c8(re||c.mount,a,s.criteriaMode,s.shouldUseNativeValidation));return f(re),je},w=async re=>{const{errors:je}=await C(re);if(re)for(const Pe of re){const He=ut(je,Pe);He?Ss(n.errors,Pe,He):Pn(n.errors,Pe)}else n.errors=je;return je},P=async(re,je,Pe={valid:!0})=>{for(const He in re){const Ye=re[He];if(Ye){const{_f:Ke,...oe}=Ye;if(Ke){const ye=c.array.has(Ke.name),Te=Ye._f&&d8(Ye._f);Te&&h.validatingFields&&f([He],!0);const et=await Zj(Ye,c.disabled,i,x,s.shouldUseNativeValidation&&!je,ye);if(Te&&h.validatingFields&&f([He]),et[Ke.name]&&(Pe.valid=!1,je))break;!je&&(ut(et,Ke.name)?ye?UA(n.errors,et,Ke.name):Ss(n.errors,Ke.name,et[Ke.name]):Pn(n.errors,Ke.name))}!ra(oe)&&await P(oe,je,Pe)}}return Pe.valid},M=()=>{for(const re of c.unMount){const je=ut(a,re);je&&(je._f.refs?je._f.refs.every(Pe=>!tg(Pe)):!tg(je._f.ref))&&ue(re)}c.unMount=new Set},I=(re,je)=>!s.disabled&&(re&&je&&Ss(i,re,je),!fl(G(),r)),W=(re,je,Pe)=>OA(re,c,{...l.mount?i:Qs(je)?r:ii(re)?{[re]:je}:je},Pe,je),_=re=>Cm(ut(l.mount?i:r,re,s.shouldUnregister?ut(r,re,[]):[])),B=(re,je,Pe={})=>{const He=ut(a,re);let Ye=je;if(He){const Ke=He._f;Ke&&(!Ke.disabled&&Ss(i,re,$A(je,Ke)),Ye=wx(Ke.ref)&&ja(je)?"":je,IA(Ke.ref)?[...Ke.ref.options].forEach(oe=>oe.selected=Ye.includes(oe.value)):Ke.refs?Sm(Ke.ref)?Ke.refs.length>1?Ke.refs.forEach(oe=>(!oe.defaultChecked||!oe.disabled)&&(oe.checked=Array.isArray(Ye)?!!Ye.find(ye=>ye===oe.value):Ye===oe.value)):Ke.refs[0]&&(Ke.refs[0].checked=!!Ye):Ke.refs.forEach(oe=>oe.checked=oe.value===Ye):f0(Ke.ref)?Ke.ref.value="":(Ke.ref.value=Ye,Ke.ref.type||m.state.next({name:re,values:nn(i)})))}(Pe.shouldDirty||Pe.shouldTouch)&&T(re,Ye,Pe.shouldTouch,Pe.shouldDirty,!0),Pe.shouldValidate&&D(re)},O=(re,je,Pe)=>{for(const He in je){const Ye=je[He],Ke=`${re}.${He}`,oe=ut(a,Ke);(c.array.has(re)||Sn(Ye)||oe&&!oe._f)&&!jo(Ye)?O(Ke,Ye,Pe):B(Ke,Ye,Pe)}},z=(re,je,Pe={})=>{const He=ut(a,re),Ye=c.array.has(re),Ke=nn(je);Ss(i,re,Ke),Ye?(m.array.next({name:re,values:nn(i)}),(h.isDirty||h.dirtyFields||u.isDirty||u.dirtyFields)&&Pe.shouldDirty&&m.state.next({name:re,dirtyFields:Wd(r,i),isDirty:I(re,Ke)})):He&&!He._f&&!ja(Ke)?O(re,Ke,Pe):B(re,Ke,Pe),Qj(re,c)&&m.state.next({...n}),m.state.next({name:l.mount?re:void 0,values:nn(i)})},F=async re=>{l.mount=!0;const je=re.target;let Pe=je.name,He=!0;const Ye=ut(a,Pe),Ke=oe=>{He=Number.isNaN(oe)||jo(oe)&&isNaN(oe.getTime())||fl(oe,ut(i,Pe,oe))};if(Ye){let oe,ye;const Te=je.type?fw(Ye._f):TA(re),et=re.type===bx.BLUR||re.type===bx.FOCUS_OUT,cs=!u8(Ye._f)&&!s.resolver&&!ut(n.errors,Pe)&&!Ye._f.deps||x8(et,ut(n.touchedFields,Pe),n.isSubmitted,g,p),ws=Qj(Pe,c,et);Ss(i,Pe,Te),et?(Ye._f.onBlur&&Ye._f.onBlur(re),o&&o(0)):Ye._f.onChange&&Ye._f.onChange(re);const fe=T(Pe,Te,et),Ve=!ra(fe)||ws;if(!et&&m.state.next({name:Pe,type:re.type,values:nn(i)}),cs)return(h.isValid||u.isValid)&&(s.mode==="onBlur"?et&&y():et||y()),Ve&&m.state.next({name:Pe,...ws?{}:fe});if(!et&&ws&&m.state.next({...n}),s.resolver){const{errors:zt}=await C([Pe]);if(Ke(Te),He){const gs=jw(n.errors,a,Pe),pt=jw(zt,a,gs.name||Pe);oe=pt.error,Pe=pt.name,ye=ra(zt)}}else f([Pe],!0),oe=(await Zj(Ye,c.disabled,i,x,s.shouldUseNativeValidation))[Pe],f([Pe]),Ke(Te),He&&(oe?ye=!1:(h.isValid||u.isValid)&&(ye=await P(a,!0)));He&&(Ye._f.deps&&D(Ye._f.deps),A(Pe,ye,oe,fe))}},K=(re,je)=>{if(ut(n.errors,je)&&re.focus)return re.focus(),1},D=async(re,je={})=>{let Pe,He;const Ye=Oa(re);if(s.resolver){const Ke=await w(Qs(re)?re:Ye);Pe=ra(Ke),He=re?!Ye.some(oe=>ut(Ke,oe)):Pe}else re?(He=(await Promise.all(Ye.map(async Ke=>{const oe=ut(a,Ke);return await P(oe&&oe._f?{[Ke]:oe}:oe)}))).every(Boolean),!(!He&&!n.isValid)&&y()):He=Pe=await P(a);return m.state.next({...!ii(re)||(h.isValid||u.isValid)&&Pe!==n.isValid?{}:{name:re},...s.resolver||!re?{isValid:Pe}:{},errors:n.errors}),je.shouldFocus&&!He&&Oc(a,K,re?Ye:c.mount),He},G=re=>{const je={...l.mount?i:r};return Qs(re)?je:ii(re)?ut(je,re):re.map(Pe=>ut(je,Pe))},H=(re,je)=>({invalid:!!ut((je||n).errors,re),isDirty:!!ut((je||n).dirtyFields,re),error:ut((je||n).errors,re),isValidating:!!ut(n.validatingFields,re),isTouched:!!ut((je||n).touchedFields,re)}),V=re=>{re&&Oa(re).forEach(je=>Pn(n.errors,je)),m.state.next({errors:re?n.errors:{}})},se=(re,je,Pe)=>{const He=(ut(a,re,{_f:{}})._f||{}).ref,Ye=ut(n.errors,re)||{},{ref:Ke,message:oe,type:ye,...Te}=Ye;Ss(n.errors,re,{...Te,...je,ref:He}),m.state.next({name:re,errors:n.errors,isValid:!1}),Pe&&Pe.shouldFocus&&He&&He.focus&&He.focus()},Z=(re,je)=>Dr(re)?m.state.subscribe({next:Pe=>re(W(void 0,je),Pe)}):W(re,je,!0),le=re=>m.state.subscribe({next:je=>{h8(re.name,je.name,re.exact)&&m8(je,re.formState||h,ae,re.reRenderRoot)&&re.callback({values:{...i},...n,...je})}}).unsubscribe,ne=re=>(l.mount=!0,u={...u,...re.formState},le({...re,formState:u})),ue=(re,je={})=>{for(const Pe of re?Oa(re):c.mount)c.mount.delete(Pe),c.array.delete(Pe),je.keepValue||(Pn(a,Pe),Pn(i,Pe)),!je.keepError&&Pn(n.errors,Pe),!je.keepDirty&&Pn(n.dirtyFields,Pe),!je.keepTouched&&Pn(n.touchedFields,Pe),!je.keepIsValidating&&Pn(n.validatingFields,Pe),!s.shouldUnregister&&!je.keepDefaultValue&&Pn(r,Pe);m.state.next({values:nn(i)}),m.state.next({...n,...je.keepDirty?{isDirty:I()}:{}}),!je.keepIsValid&&y()},te=({disabled:re,name:je})=>{(Ka(re)&&l.mount||re||c.disabled.has(je))&&(re?c.disabled.add(je):c.disabled.delete(je))},Ae=(re,je={})=>{let Pe=ut(a,re);const He=Ka(je.disabled)||Ka(s.disabled);return Ss(a,re,{...Pe||{},_f:{...Pe&&Pe._f?Pe._f:{ref:{name:re}},name:re,mount:!0,...je}}),c.mount.add(re),Pe?te({disabled:Ka(je.disabled)?je.disabled:s.disabled,name:re}):k(re,!0,je.value),{...He?{disabled:je.disabled||s.disabled}:{},...s.progressive?{required:!!je.required,min:Hd(je.min),max:Hd(je.max),minLength:Hd(je.minLength),maxLength:Hd(je.maxLength),pattern:Hd(je.pattern)}:{},name:re,onChange:F,onBlur:F,ref:Ye=>{if(Ye){Ae(re,je),Pe=ut(a,re);const Ke=Qs(Ye.value)&&Ye.querySelectorAll&&Ye.querySelectorAll("input,select,textarea")[0]||Ye,oe=i8(Ke),ye=Pe._f.refs||[];if(oe?ye.find(Te=>Te===Ke):Ke===Pe._f.ref)return;Ss(a,re,{_f:{...Pe._f,...oe?{refs:[...ye.filter(tg),Ke,...Array.isArray(ut(r,re))?[{}]:[]],ref:{type:Ke.type,name:re}}:{ref:Ke}}}),k(re,!1,void 0,Ke)}else Pe=ut(a,re,{}),Pe._f&&(Pe._f.mount=!1),(s.shouldUnregister||je.shouldUnregister)&&!(EA(c.array,re)&&l.action)&&c.unMount.add(re)}}},Ge=()=>s.shouldFocusError&&Oc(a,K,c.mount),be=re=>{Ka(re)&&(m.state.next({disabled:re}),Oc(a,(je,Pe)=>{const He=ut(a,Pe);He&&(je.disabled=He._f.disabled||re,Array.isArray(He._f.refs)&&He._f.refs.forEach(Ye=>{Ye.disabled=He._f.disabled||re}))},0,!1))},Ie=(re,je)=>async Pe=>{let He;Pe&&(Pe.preventDefault&&Pe.preventDefault(),Pe.persist&&Pe.persist());let Ye=nn(i);if(m.state.next({isSubmitting:!0}),s.resolver){const{errors:Ke,values:oe}=await C();n.errors=Ke,Ye=oe}else await P(a);if(c.disabled.size)for(const Ke of c.disabled)Ss(Ye,Ke,void 0);if(Pn(n.errors,"root"),ra(n.errors)){m.state.next({errors:{}});try{await re(Ye,Pe)}catch(Ke){He=Ke}}else je&&await je({...n.errors},Pe),Ge(),setTimeout(Ge);if(m.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:ra(n.errors)&&!He,submitCount:n.submitCount+1,errors:n.errors}),He)throw He},ve=(re,je={})=>{ut(a,re)&&(Qs(je.defaultValue)?z(re,nn(ut(r,re))):(z(re,je.defaultValue),Ss(r,re,nn(je.defaultValue))),je.keepTouched||Pn(n.touchedFields,re),je.keepDirty||(Pn(n.dirtyFields,re),n.isDirty=je.defaultValue?I(re,nn(ut(r,re))):I()),je.keepError||(Pn(n.errors,re),h.isValid&&y()),m.state.next({...n}))},ie=(re,je={})=>{const Pe=re?nn(re):r,He=nn(Pe),Ye=ra(re),Ke=Ye?r:He;if(je.keepDefaultValues||(r=Pe),!je.keepValues){if(je.keepDirtyValues){const oe=new Set([...c.mount,...Object.keys(Wd(r,i))]);for(const ye of Array.from(oe))ut(n.dirtyFields,ye)?Ss(Ke,ye,ut(i,ye)):z(ye,ut(Ke,ye))}else{if(x0&&Qs(re))for(const oe of c.mount){const ye=ut(a,oe);if(ye&&ye._f){const Te=Array.isArray(ye._f.refs)?ye._f.refs[0]:ye._f.ref;if(wx(Te)){const et=Te.closest("form");if(et){et.reset();break}}}}for(const oe of c.mount)z(oe,ut(Ke,oe))}i=nn(Ke),m.array.next({values:{...Ke}}),m.state.next({values:{...Ke}})}c={mount:je.keepDirtyValues?c.mount:new Set,unMount:new Set,array:new Set,disabled:new Set,watch:new Set,watchAll:!1,focus:""},l.mount=!h.isValid||!!je.keepIsValid||!!je.keepDirtyValues,l.watch=!!s.shouldUnregister,m.state.next({submitCount:je.keepSubmitCount?n.submitCount:0,isDirty:Ye?!1:je.keepDirty?n.isDirty:!!(je.keepDefaultValues&&!fl(re,r)),isSubmitted:je.keepIsSubmitted?n.isSubmitted:!1,dirtyFields:Ye?{}:je.keepDirtyValues?je.keepDefaultValues&&i?Wd(r,i):n.dirtyFields:je.keepDefaultValues&&re?Wd(r,re):je.keepDirty?n.dirtyFields:{},touchedFields:je.keepTouched?n.touchedFields:{},errors:je.keepErrors?n.errors:{},isSubmitSuccessful:je.keepIsSubmitSuccessful?n.isSubmitSuccessful:!1,isSubmitting:!1})},de=(re,je)=>ie(Dr(re)?re(i):re,je),ee=(re,je={})=>{const Pe=ut(a,re),He=Pe&&Pe._f;if(He){const Ye=He.refs?He.refs[0]:He.ref;Ye.focus&&(Ye.focus(),je.shouldSelect&&Dr(Ye.select)&&Ye.select())}},ae=re=>{n={...n,...re}},We={control:{register:Ae,unregister:ue,getFieldState:H,handleSubmit:Ie,setError:se,_subscribe:le,_runSchema:C,_getWatch:W,_getDirty:I,_setValid:y,_setFieldArray:b,_setDisabledField:te,_setErrors:S,_getFieldArray:_,_reset:ie,_resetDefaultValues:()=>Dr(s.defaultValues)&&s.defaultValues().then(re=>{de(re,s.resetOptions),m.state.next({isLoading:!1})}),_removeUnmounted:M,_disableForm:be,_subjects:m,_proxyFormState:h,get _fields(){return a},get _formValues(){return i},get _state(){return l},set _state(re){l=re},get _defaultValues(){return r},get _names(){return c},set _names(re){c=re},get _formState(){return n},get _options(){return s},set _options(re){s={...s,...re}}},subscribe:ne,trigger:D,register:Ae,handleSubmit:Ie,watch:Z,setValue:z,getValues:G,reset:de,resetField:ve,clearErrors:V,unregister:ue,setError:se,setFocus:ee,getFieldState:H};return{...We,formControl:We}}var tl=()=>{const t=typeof performance>"u"?Date.now():performance.now()*1e3;return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,s=>{const n=(Math.random()*16+t)%16|0;return(s=="x"?n:n&3|8).toString(16)})},sg=(t,s,n={})=>n.shouldFocus||Qs(n.shouldFocus)?n.focusName||`${t}.${Qs(n.focusIndex)?s:n.focusIndex}.`:"",ng=(t,s)=>[...t,...Oa(s)],ag=t=>Array.isArray(t)?t.map(()=>{}):void 0;function rg(t,s,n){return[...t.slice(0,s),...Oa(n),...t.slice(s)]}var ig=(t,s,n)=>Array.isArray(t)?(Qs(t[n])&&(t[n]=void 0),t.splice(n,0,t.splice(s,1)[0]),t):[],lg=(t,s)=>[...Oa(s),...Oa(t)];function j8(t,s){let n=0;const a=[...t];for(const r of s)a.splice(r-n,1),n++;return Cm(a).length?a:[]}var og=(t,s)=>Qs(s)?[]:j8(t,Oa(s).sort((n,a)=>n-a)),cg=(t,s,n)=>{[t[s],t[n]]=[t[n],t[s]]},yw=(t,s,n)=>(t[s]=n,t);function cl(t){const s=km(),{control:n=s.control,name:a,keyName:r="id",shouldUnregister:i,rules:l}=t,[c,o]=lt.useState(n._getFieldArray(a)),d=lt.useRef(n._getFieldArray(a).map(tl)),h=lt.useRef(c),u=lt.useRef(a),m=lt.useRef(!1);u.current=a,h.current=c,n._names.array.add(a),l&&n.register(a,l),lt.useEffect(()=>n._subjects.array.subscribe({next:({values:k,name:T})=>{if(T===u.current||!T){const A=ut(k,u.current);Array.isArray(A)&&(o(A),d.current=A.map(tl))}}}).unsubscribe,[n]);const p=lt.useCallback(k=>{m.current=!0,n._setFieldArray(a,k)},[n,a]),g=(k,T)=>{const A=Oa(nn(k)),C=ng(n._getFieldArray(a),A);n._names.focus=sg(a,C.length-1,T),d.current=ng(d.current,A.map(tl)),p(C),o(C),n._setFieldArray(a,C,ng,{argA:ag(k)})},x=(k,T)=>{const A=Oa(nn(k)),C=lg(n._getFieldArray(a),A);n._names.focus=sg(a,0,T),d.current=lg(d.current,A.map(tl)),p(C),o(C),n._setFieldArray(a,C,lg,{argA:ag(k)})},v=k=>{const T=og(n._getFieldArray(a),k);d.current=og(d.current,k),p(T),o(T),!Array.isArray(ut(n._fields,a))&&Ss(n._fields,a,void 0),n._setFieldArray(a,T,og,{argA:k})},y=(k,T,A)=>{const C=Oa(nn(T)),w=rg(n._getFieldArray(a),k,C);n._names.focus=sg(a,k,A),d.current=rg(d.current,k,C.map(tl)),p(w),o(w),n._setFieldArray(a,w,rg,{argA:k,argB:ag(T)})},f=(k,T)=>{const A=n._getFieldArray(a);cg(A,k,T),cg(d.current,k,T),p(A),o(A),n._setFieldArray(a,A,cg,{argA:k,argB:T},!1)},b=(k,T)=>{const A=n._getFieldArray(a);ig(A,k,T),ig(d.current,k,T),p(A),o(A),n._setFieldArray(a,A,ig,{argA:k,argB:T},!1)},j=(k,T)=>{const A=nn(T),C=yw(n._getFieldArray(a),k,A);d.current=[...C].map((w,P)=>!w||P===k?tl():d.current[P]),p(C),o([...C]),n._setFieldArray(a,C,yw,{argA:k,argB:A},!0,!1)},S=k=>{const T=Oa(nn(k));d.current=T.map(tl),p([...T]),o([...T]),n._setFieldArray(a,[...T],A=>A,{},!0,!1)};return lt.useEffect(()=>{if(n._state.action=!1,Qj(a,n._names)&&n._subjects.state.next({...n._formState}),m.current&&(!Nc(n._options.mode).isOnSubmit||n._formState.isSubmitted)&&!Nc(n._options.reValidateMode).isOnSubmit)if(n._options.resolver)n._runSchema([a]).then(k=>{const T=ut(k.errors,a),A=ut(n._formState.errors,a);(A?!T&&A.type||T&&(A.type!==T.type||A.message!==T.message):T&&T.type)&&(T?Ss(n._formState.errors,a,T):Pn(n._formState.errors,a),n._subjects.state.next({errors:n._formState.errors}))});else{const k=ut(n._fields,a);k&&k._f&&!(Nc(n._options.reValidateMode).isOnSubmit&&Nc(n._options.mode).isOnSubmit)&&Zj(k,n._names.disabled,n._formValues,n._options.criteriaMode===xr.all,n._options.shouldUseNativeValidation,!0).then(T=>!ra(T)&&n._subjects.state.next({errors:UA(n._formState.errors,T,a)}))}n._subjects.state.next({name:a,values:nn(n._formValues)}),n._names.focus&&Oc(n._fields,(k,T)=>{if(n._names.focus&&T.startsWith(n._names.focus)&&k.focus)return k.focus(),1}),n._names.focus="",n._setValid(),m.current=!1},[c,a,n]),lt.useEffect(()=>(!ut(n._formValues,a)&&n._setFieldArray(a),()=>{const k=(T,A)=>{const C=ut(n._fields,T);C&&C._f&&(C._f.mount=A)};n._options.shouldUnregister||i?n.unregister(a):k(a,!1)}),[a,n,r,i]),{swap:lt.useCallback(f,[p,a,n]),move:lt.useCallback(b,[p,a,n]),prepend:lt.useCallback(x,[p,a,n]),append:lt.useCallback(g,[p,a,n]),remove:lt.useCallback(v,[p,a,n]),insert:lt.useCallback(y,[p,a,n]),update:lt.useCallback(j,[p,a,n]),replace:lt.useCallback(S,[p,a,n]),fields:lt.useMemo(()=>c.map((k,T)=>({...k,[r]:d.current[T]||tl()})),[c,r])}}function Cn(t={}){const s=lt.useRef(void 0),n=lt.useRef(void 0),[a,r]=lt.useState({isDirty:!1,isValidating:!1,isLoading:Dr(t.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:t.errors||{},disabled:t.disabled||!1,defaultValues:Dr(t.defaultValues)?void 0:t.defaultValues});s.current||(s.current={...t.formControl?t.formControl:g8(t),formState:a},t.formControl&&t.defaultValues&&!Dr(t.defaultValues)&&t.formControl.reset(t.defaultValues,t.resetOptions));const i=s.current.control;return i._options=t,lt.useLayoutEffect(()=>i._subscribe({formState:i._proxyFormState,callback:()=>r({...i._formState}),reRenderRoot:!0}),[i]),lt.useEffect(()=>i._disableForm(t.disabled),[i,t.disabled]),lt.useEffect(()=>{if(i._proxyFormState.isDirty){const l=i._getDirty();l!==a.isDirty&&i._subjects.state.next({isDirty:l})}},[i,a.isDirty]),lt.useEffect(()=>{t.values&&!fl(t.values,n.current)?(i._reset(t.values,i._options.resetOptions),n.current=t.values,r(l=>({...l}))):i._resetDefaultValues()},[t.values,i]),lt.useEffect(()=>{t.errors&&!ra(t.errors)&&i._setErrors(t.errors)},[t.errors,i]),lt.useEffect(()=>{i._state.mount||(i._setValid(),i._state.mount=!0),i._state.watch&&(i._state.watch=!1,i._subjects.state.next({...i._formState})),i._removeUnmounted()}),lt.useEffect(()=>{t.shouldUnregister&&i._subjects.state.next({values:i._getWatch()})},[t.shouldUnregister,i]),s.current.formState=RA(a,i),s.current}const Nw=(t,s,n)=>{if(t&&"reportValidity"in t){const a=ut(n,s);t.setCustomValidity(a&&a.message||""),t.reportValidity()}},zA=(t,s)=>{for(const n in s.fields){const a=s.fields[n];a&&a.ref&&"reportValidity"in a.ref?Nw(a.ref,n,t):a.refs&&a.refs.forEach(r=>Nw(r,n,t))}},v8=(t,s)=>{s.shouldUseNativeValidation&&zA(t,s);const n={};for(const a in t){const r=ut(s.fields,a),i=Object.assign(t[a]||{},{ref:r&&r.ref});if(y8(s.names||Object.keys(t),a)){const l=Object.assign({},ut(n,a));Ss(l,"root",i),Ss(n,a,l)}else Ss(n,a,i)}return n},y8=(t,s)=>t.some(n=>n.startsWith(s+"."));var N8=function(t,s){for(var n={};t.length;){var a=t[0],r=a.code,i=a.message,l=a.path.join(".");if(!n[l])if("unionErrors"in a){var c=a.unionErrors[0].errors[0];n[l]={message:c.message,type:c.code}}else n[l]={message:i,type:r};if("unionErrors"in a&&a.unionErrors.forEach(function(h){return h.errors.forEach(function(u){return t.push(u)})}),s){var o=n[l].types,d=o&&o[a.code];n[l]=DA(l,s,n,r,d?[].concat(d,a.message):a.message)}t.shift()}return n},kn=function(t,s,n){return n===void 0&&(n={}),function(a,r,i){try{return Promise.resolve(function(l,c){try{var o=Promise.resolve(t[n.mode==="sync"?"parse":"parseAsync"](a,s)).then(function(d){return i.shouldUseNativeValidation&&zA({},i),{errors:{},values:n.raw?a:d}})}catch(d){return c(d)}return o&&o.then?o.then(void 0,c):o}(0,function(l){if(function(c){return Array.isArray(c==null?void 0:c.errors)}(l))return{values:{},errors:v8(N8(l.errors,!i.shouldUseNativeValidation&&i.criteriaMode==="all"),i)};throw l}))}catch(l){return Promise.reject(l)}}},vs;(function(t){t.assertEqual=r=>r;function s(r){}t.assertIs=s;function n(r){throw new Error}t.assertNever=n,t.arrayToEnum=r=>{const i={};for(const l of r)i[l]=l;return i},t.getValidEnumValues=r=>{const i=t.objectKeys(r).filter(c=>typeof r[r[c]]!="number"),l={};for(const c of i)l[c]=r[c];return t.objectValues(l)},t.objectValues=r=>t.objectKeys(r).map(function(i){return r[i]}),t.objectKeys=typeof Object.keys=="function"?r=>Object.keys(r):r=>{const i=[];for(const l in r)Object.prototype.hasOwnProperty.call(r,l)&&i.push(l);return i},t.find=(r,i)=>{for(const l of r)if(i(l))return l},t.isInteger=typeof Number.isInteger=="function"?r=>Number.isInteger(r):r=>typeof r=="number"&&isFinite(r)&&Math.floor(r)===r;function a(r,i=" | "){return r.map(l=>typeof l=="string"?`'${l}'`:l).join(i)}t.joinValues=a,t.jsonStringifyReplacer=(r,i)=>typeof i=="bigint"?i.toString():i})(vs||(vs={}));var Xj;(function(t){t.mergeShapes=(s,n)=>({...s,...n})})(Xj||(Xj={}));const bt=vs.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),Ei=t=>{switch(typeof t){case"undefined":return bt.undefined;case"string":return bt.string;case"number":return isNaN(t)?bt.nan:bt.number;case"boolean":return bt.boolean;case"function":return bt.function;case"bigint":return bt.bigint;case"symbol":return bt.symbol;case"object":return Array.isArray(t)?bt.array:t===null?bt.null:t.then&&typeof t.then=="function"&&t.catch&&typeof t.catch=="function"?bt.promise:typeof Map<"u"&&t instanceof Map?bt.map:typeof Set<"u"&&t instanceof Set?bt.set:typeof Date<"u"&&t instanceof Date?bt.date:bt.object;default:return bt.unknown}},at=vs.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),b8=t=>JSON.stringify(t,null,2).replace(/"([^"]+)":/g,"$1:");class tr extends Error{get errors(){return this.issues}constructor(s){super(),this.issues=[],this.addIssue=a=>{this.issues=[...this.issues,a]},this.addIssues=(a=[])=>{this.issues=[...this.issues,...a]};const n=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,n):this.__proto__=n,this.name="ZodError",this.issues=s}format(s){const n=s||function(i){return i.message},a={_errors:[]},r=i=>{for(const l of i.issues)if(l.code==="invalid_union")l.unionErrors.map(r);else if(l.code==="invalid_return_type")r(l.returnTypeError);else if(l.code==="invalid_arguments")r(l.argumentsError);else if(l.path.length===0)a._errors.push(n(l));else{let c=a,o=0;for(;o<l.path.length;){const d=l.path[o];o===l.path.length-1?(c[d]=c[d]||{_errors:[]},c[d]._errors.push(n(l))):c[d]=c[d]||{_errors:[]},c=c[d],o++}}};return r(this),a}static assert(s){if(!(s instanceof tr))throw new Error(`Not a ZodError: ${s}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,vs.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(s=n=>n.message){const n={},a=[];for(const r of this.issues)r.path.length>0?(n[r.path[0]]=n[r.path[0]]||[],n[r.path[0]].push(s(r))):a.push(s(r));return{formErrors:a,fieldErrors:n}}get formErrors(){return this.flatten()}}tr.create=t=>new tr(t);const dd=(t,s)=>{let n;switch(t.code){case at.invalid_type:t.received===bt.undefined?n="Required":n=`Expected ${t.expected}, received ${t.received}`;break;case at.invalid_literal:n=`Invalid literal value, expected ${JSON.stringify(t.expected,vs.jsonStringifyReplacer)}`;break;case at.unrecognized_keys:n=`Unrecognized key(s) in object: ${vs.joinValues(t.keys,", ")}`;break;case at.invalid_union:n="Invalid input";break;case at.invalid_union_discriminator:n=`Invalid discriminator value. Expected ${vs.joinValues(t.options)}`;break;case at.invalid_enum_value:n=`Invalid enum value. Expected ${vs.joinValues(t.options)}, received '${t.received}'`;break;case at.invalid_arguments:n="Invalid function arguments";break;case at.invalid_return_type:n="Invalid function return type";break;case at.invalid_date:n="Invalid date";break;case at.invalid_string:typeof t.validation=="object"?"includes"in t.validation?(n=`Invalid input: must include "${t.validation.includes}"`,typeof t.validation.position=="number"&&(n=`${n} at one or more positions greater than or equal to ${t.validation.position}`)):"startsWith"in t.validation?n=`Invalid input: must start with "${t.validation.startsWith}"`:"endsWith"in t.validation?n=`Invalid input: must end with "${t.validation.endsWith}"`:vs.assertNever(t.validation):t.validation!=="regex"?n=`Invalid ${t.validation}`:n="Invalid";break;case at.too_small:t.type==="array"?n=`Array must contain ${t.exact?"exactly":t.inclusive?"at least":"more than"} ${t.minimum} element(s)`:t.type==="string"?n=`String must contain ${t.exact?"exactly":t.inclusive?"at least":"over"} ${t.minimum} character(s)`:t.type==="number"?n=`Number must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${t.minimum}`:t.type==="date"?n=`Date must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(t.minimum))}`:n="Invalid input";break;case at.too_big:t.type==="array"?n=`Array must contain ${t.exact?"exactly":t.inclusive?"at most":"less than"} ${t.maximum} element(s)`:t.type==="string"?n=`String must contain ${t.exact?"exactly":t.inclusive?"at most":"under"} ${t.maximum} character(s)`:t.type==="number"?n=`Number must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="bigint"?n=`BigInt must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="date"?n=`Date must be ${t.exact?"exactly":t.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(t.maximum))}`:n="Invalid input";break;case at.custom:n="Invalid input";break;case at.invalid_intersection_types:n="Intersection results could not be merged";break;case at.not_multiple_of:n=`Number must be a multiple of ${t.multipleOf}`;break;case at.not_finite:n="Number must be finite";break;default:n=s.defaultError,vs.assertNever(t)}return{message:n}};let VA=dd;function w8(t){VA=t}function kx(){return VA}const Ax=t=>{const{data:s,path:n,errorMaps:a,issueData:r}=t,i=[...n,...r.path||[]],l={...r,path:i};if(r.message!==void 0)return{...r,path:i,message:r.message};let c="";const o=a.filter(d=>!!d).slice().reverse();for(const d of o)c=d(l,{data:s,defaultError:c}).message;return{...r,path:i,message:c}},S8=[];function ft(t,s){const n=kx(),a=Ax({issueData:s,data:t.data,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,n,n===dd?void 0:dd].filter(r=>!!r)});t.common.issues.push(a)}class ua{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(s,n){const a=[];for(const r of n){if(r.status==="aborted")return Yt;r.status==="dirty"&&s.dirty(),a.push(r.value)}return{status:s.value,value:a}}static async mergeObjectAsync(s,n){const a=[];for(const r of n){const i=await r.key,l=await r.value;a.push({key:i,value:l})}return ua.mergeObjectSync(s,a)}static mergeObjectSync(s,n){const a={};for(const r of n){const{key:i,value:l}=r;if(i.status==="aborted"||l.status==="aborted")return Yt;i.status==="dirty"&&s.dirty(),l.status==="dirty"&&s.dirty(),i.value!=="__proto__"&&(typeof l.value<"u"||r.alwaysSet)&&(a[i.value]=l.value)}return{status:s.value,value:a}}}const Yt=Object.freeze({status:"aborted"}),bc=t=>({status:"dirty",value:t}),wa=t=>({status:"valid",value:t}),Jj=t=>t.status==="aborted",ev=t=>t.status==="dirty",Uo=t=>t.status==="valid",Vu=t=>typeof Promise<"u"&&t instanceof Promise;function Px(t,s,n,a){if(typeof s=="function"?t!==s||!a:!s.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return s.get(t)}function GA(t,s,n,a,r){if(typeof s=="function"?t!==s||!r:!s.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return s.set(t,n),n}var _t;(function(t){t.errToObj=s=>typeof s=="string"?{message:s}:s||{},t.toString=s=>typeof s=="string"?s:s==null?void 0:s.message})(_t||(_t={}));var ru,iu;class xi{constructor(s,n,a,r){this._cachedPath=[],this.parent=s,this.data=n,this._path=a,this._key=r}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const bw=(t,s)=>{if(Uo(s))return{success:!0,data:s.value};if(!t.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const n=new tr(t.common.issues);return this._error=n,this._error}}};function as(t){if(!t)return{};const{errorMap:s,invalid_type_error:n,required_error:a,description:r}=t;if(s&&(n||a))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return s?{errorMap:s,description:r}:{errorMap:(l,c)=>{var o,d;const{message:h}=t;return l.code==="invalid_enum_value"?{message:h??c.defaultError}:typeof c.data>"u"?{message:(o=h??a)!==null&&o!==void 0?o:c.defaultError}:l.code!=="invalid_type"?{message:c.defaultError}:{message:(d=h??n)!==null&&d!==void 0?d:c.defaultError}},description:r}}class os{get description(){return this._def.description}_getType(s){return Ei(s.data)}_getOrReturnCtx(s,n){return n||{common:s.parent.common,data:s.data,parsedType:Ei(s.data),schemaErrorMap:this._def.errorMap,path:s.path,parent:s.parent}}_processInputParams(s){return{status:new ua,ctx:{common:s.parent.common,data:s.data,parsedType:Ei(s.data),schemaErrorMap:this._def.errorMap,path:s.path,parent:s.parent}}}_parseSync(s){const n=this._parse(s);if(Vu(n))throw new Error("Synchronous parse encountered promise.");return n}_parseAsync(s){const n=this._parse(s);return Promise.resolve(n)}parse(s,n){const a=this.safeParse(s,n);if(a.success)return a.data;throw a.error}safeParse(s,n){var a;const r={common:{issues:[],async:(a=n==null?void 0:n.async)!==null&&a!==void 0?a:!1,contextualErrorMap:n==null?void 0:n.errorMap},path:(n==null?void 0:n.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:s,parsedType:Ei(s)},i=this._parseSync({data:s,path:r.path,parent:r});return bw(r,i)}"~validate"(s){var n,a;const r={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:s,parsedType:Ei(s)};if(!this["~standard"].async)try{const i=this._parseSync({data:s,path:[],parent:r});return Uo(i)?{value:i.value}:{issues:r.common.issues}}catch(i){!((a=(n=i==null?void 0:i.message)===null||n===void 0?void 0:n.toLowerCase())===null||a===void 0)&&a.includes("encountered")&&(this["~standard"].async=!0),r.common={issues:[],async:!0}}return this._parseAsync({data:s,path:[],parent:r}).then(i=>Uo(i)?{value:i.value}:{issues:r.common.issues})}async parseAsync(s,n){const a=await this.safeParseAsync(s,n);if(a.success)return a.data;throw a.error}async safeParseAsync(s,n){const a={common:{issues:[],contextualErrorMap:n==null?void 0:n.errorMap,async:!0},path:(n==null?void 0:n.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:s,parsedType:Ei(s)},r=this._parse({data:s,path:a.path,parent:a}),i=await(Vu(r)?r:Promise.resolve(r));return bw(a,i)}refine(s,n){const a=r=>typeof n=="string"||typeof n>"u"?{message:n}:typeof n=="function"?n(r):n;return this._refinement((r,i)=>{const l=s(r),c=()=>i.addIssue({code:at.custom,...a(r)});return typeof Promise<"u"&&l instanceof Promise?l.then(o=>o?!0:(c(),!1)):l?!0:(c(),!1)})}refinement(s,n){return this._refinement((a,r)=>s(a)?!0:(r.addIssue(typeof n=="function"?n(a,r):n),!1))}_refinement(s){return new Vr({schema:this,typeName:Wt.ZodEffects,effect:{type:"refinement",refinement:s}})}superRefine(s){return this._refinement(s)}constructor(s){this.spa=this.safeParseAsync,this._def=s,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:n=>this["~validate"](n)}}optional(){return ui.create(this,this._def)}nullable(){return Yl.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return $r.create(this)}promise(){return md.create(this,this._def)}or(s){return Ku.create([this,s],this._def)}and(s){return Yu.create(this,s,this._def)}transform(s){return new Vr({...as(this._def),schema:this,typeName:Wt.ZodEffects,effect:{type:"transform",transform:s}})}default(s){const n=typeof s=="function"?s:()=>s;return new em({...as(this._def),innerType:this,defaultValue:n,typeName:Wt.ZodDefault})}brand(){return new j0({typeName:Wt.ZodBranded,type:this,...as(this._def)})}catch(s){const n=typeof s=="function"?s:()=>s;return new tm({...as(this._def),innerType:this,catchValue:n,typeName:Wt.ZodCatch})}describe(s){const n=this.constructor;return new n({...this._def,description:s})}pipe(s){return Am.create(this,s)}readonly(){return sm.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const C8=/^c[^\s-]{8,}$/i,k8=/^[0-9a-z]+$/,A8=/^[0-9A-HJKMNP-TV-Z]{26}$/i,P8=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,T8=/^[a-z0-9_-]{21}$/i,E8=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,M8=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,_8=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,R8="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let dg;const O8=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,D8=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,I8=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,L8=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,F8=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,q8=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,WA="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",$8=new RegExp(`^${WA}$`);function HA(t){let s="([01]\\d|2[0-3]):[0-5]\\d:[0-5]\\d";return t.precision?s=`${s}\\.\\d{${t.precision}}`:t.precision==null&&(s=`${s}(\\.\\d+)?`),s}function B8(t){return new RegExp(`^${HA(t)}$`)}function KA(t){let s=`${WA}T${HA(t)}`;const n=[];return n.push(t.local?"Z?":"Z"),t.offset&&n.push("([+-]\\d{2}:?\\d{2})"),s=`${s}(${n.join("|")})`,new RegExp(`^${s}$`)}function U8(t,s){return!!((s==="v4"||!s)&&O8.test(t)||(s==="v6"||!s)&&I8.test(t))}function z8(t,s){if(!E8.test(t))return!1;try{const[n]=t.split("."),a=n.replace(/-/g,"+").replace(/_/g,"/").padEnd(n.length+(4-n.length%4)%4,"="),r=JSON.parse(atob(a));return!(typeof r!="object"||r===null||!r.typ||!r.alg||s&&r.alg!==s)}catch{return!1}}function V8(t,s){return!!((s==="v4"||!s)&&D8.test(t)||(s==="v6"||!s)&&L8.test(t))}class Ir extends os{_parse(s){if(this._def.coerce&&(s.data=String(s.data)),this._getType(s)!==bt.string){const i=this._getOrReturnCtx(s);return ft(i,{code:at.invalid_type,expected:bt.string,received:i.parsedType}),Yt}const a=new ua;let r;for(const i of this._def.checks)if(i.kind==="min")s.data.length<i.value&&(r=this._getOrReturnCtx(s,r),ft(r,{code:at.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),a.dirty());else if(i.kind==="max")s.data.length>i.value&&(r=this._getOrReturnCtx(s,r),ft(r,{code:at.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),a.dirty());else if(i.kind==="length"){const l=s.data.length>i.value,c=s.data.length<i.value;(l||c)&&(r=this._getOrReturnCtx(s,r),l?ft(r,{code:at.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}):c&&ft(r,{code:at.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}),a.dirty())}else if(i.kind==="email")_8.test(s.data)||(r=this._getOrReturnCtx(s,r),ft(r,{validation:"email",code:at.invalid_string,message:i.message}),a.dirty());else if(i.kind==="emoji")dg||(dg=new RegExp(R8,"u")),dg.test(s.data)||(r=this._getOrReturnCtx(s,r),ft(r,{validation:"emoji",code:at.invalid_string,message:i.message}),a.dirty());else if(i.kind==="uuid")P8.test(s.data)||(r=this._getOrReturnCtx(s,r),ft(r,{validation:"uuid",code:at.invalid_string,message:i.message}),a.dirty());else if(i.kind==="nanoid")T8.test(s.data)||(r=this._getOrReturnCtx(s,r),ft(r,{validation:"nanoid",code:at.invalid_string,message:i.message}),a.dirty());else if(i.kind==="cuid")C8.test(s.data)||(r=this._getOrReturnCtx(s,r),ft(r,{validation:"cuid",code:at.invalid_string,message:i.message}),a.dirty());else if(i.kind==="cuid2")k8.test(s.data)||(r=this._getOrReturnCtx(s,r),ft(r,{validation:"cuid2",code:at.invalid_string,message:i.message}),a.dirty());else if(i.kind==="ulid")A8.test(s.data)||(r=this._getOrReturnCtx(s,r),ft(r,{validation:"ulid",code:at.invalid_string,message:i.message}),a.dirty());else if(i.kind==="url")try{new URL(s.data)}catch{r=this._getOrReturnCtx(s,r),ft(r,{validation:"url",code:at.invalid_string,message:i.message}),a.dirty()}else i.kind==="regex"?(i.regex.lastIndex=0,i.regex.test(s.data)||(r=this._getOrReturnCtx(s,r),ft(r,{validation:"regex",code:at.invalid_string,message:i.message}),a.dirty())):i.kind==="trim"?s.data=s.data.trim():i.kind==="includes"?s.data.includes(i.value,i.position)||(r=this._getOrReturnCtx(s,r),ft(r,{code:at.invalid_string,validation:{includes:i.value,position:i.position},message:i.message}),a.dirty()):i.kind==="toLowerCase"?s.data=s.data.toLowerCase():i.kind==="toUpperCase"?s.data=s.data.toUpperCase():i.kind==="startsWith"?s.data.startsWith(i.value)||(r=this._getOrReturnCtx(s,r),ft(r,{code:at.invalid_string,validation:{startsWith:i.value},message:i.message}),a.dirty()):i.kind==="endsWith"?s.data.endsWith(i.value)||(r=this._getOrReturnCtx(s,r),ft(r,{code:at.invalid_string,validation:{endsWith:i.value},message:i.message}),a.dirty()):i.kind==="datetime"?KA(i).test(s.data)||(r=this._getOrReturnCtx(s,r),ft(r,{code:at.invalid_string,validation:"datetime",message:i.message}),a.dirty()):i.kind==="date"?$8.test(s.data)||(r=this._getOrReturnCtx(s,r),ft(r,{code:at.invalid_string,validation:"date",message:i.message}),a.dirty()):i.kind==="time"?B8(i).test(s.data)||(r=this._getOrReturnCtx(s,r),ft(r,{code:at.invalid_string,validation:"time",message:i.message}),a.dirty()):i.kind==="duration"?M8.test(s.data)||(r=this._getOrReturnCtx(s,r),ft(r,{validation:"duration",code:at.invalid_string,message:i.message}),a.dirty()):i.kind==="ip"?U8(s.data,i.version)||(r=this._getOrReturnCtx(s,r),ft(r,{validation:"ip",code:at.invalid_string,message:i.message}),a.dirty()):i.kind==="jwt"?z8(s.data,i.alg)||(r=this._getOrReturnCtx(s,r),ft(r,{validation:"jwt",code:at.invalid_string,message:i.message}),a.dirty()):i.kind==="cidr"?V8(s.data,i.version)||(r=this._getOrReturnCtx(s,r),ft(r,{validation:"cidr",code:at.invalid_string,message:i.message}),a.dirty()):i.kind==="base64"?F8.test(s.data)||(r=this._getOrReturnCtx(s,r),ft(r,{validation:"base64",code:at.invalid_string,message:i.message}),a.dirty()):i.kind==="base64url"?q8.test(s.data)||(r=this._getOrReturnCtx(s,r),ft(r,{validation:"base64url",code:at.invalid_string,message:i.message}),a.dirty()):vs.assertNever(i);return{status:a.value,value:s.data}}_regex(s,n,a){return this.refinement(r=>s.test(r),{validation:n,code:at.invalid_string,..._t.errToObj(a)})}_addCheck(s){return new Ir({...this._def,checks:[...this._def.checks,s]})}email(s){return this._addCheck({kind:"email",..._t.errToObj(s)})}url(s){return this._addCheck({kind:"url",..._t.errToObj(s)})}emoji(s){return this._addCheck({kind:"emoji",..._t.errToObj(s)})}uuid(s){return this._addCheck({kind:"uuid",..._t.errToObj(s)})}nanoid(s){return this._addCheck({kind:"nanoid",..._t.errToObj(s)})}cuid(s){return this._addCheck({kind:"cuid",..._t.errToObj(s)})}cuid2(s){return this._addCheck({kind:"cuid2",..._t.errToObj(s)})}ulid(s){return this._addCheck({kind:"ulid",..._t.errToObj(s)})}base64(s){return this._addCheck({kind:"base64",..._t.errToObj(s)})}base64url(s){return this._addCheck({kind:"base64url",..._t.errToObj(s)})}jwt(s){return this._addCheck({kind:"jwt",..._t.errToObj(s)})}ip(s){return this._addCheck({kind:"ip",..._t.errToObj(s)})}cidr(s){return this._addCheck({kind:"cidr",..._t.errToObj(s)})}datetime(s){var n,a;return typeof s=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:s}):this._addCheck({kind:"datetime",precision:typeof(s==null?void 0:s.precision)>"u"?null:s==null?void 0:s.precision,offset:(n=s==null?void 0:s.offset)!==null&&n!==void 0?n:!1,local:(a=s==null?void 0:s.local)!==null&&a!==void 0?a:!1,..._t.errToObj(s==null?void 0:s.message)})}date(s){return this._addCheck({kind:"date",message:s})}time(s){return typeof s=="string"?this._addCheck({kind:"time",precision:null,message:s}):this._addCheck({kind:"time",precision:typeof(s==null?void 0:s.precision)>"u"?null:s==null?void 0:s.precision,..._t.errToObj(s==null?void 0:s.message)})}duration(s){return this._addCheck({kind:"duration",..._t.errToObj(s)})}regex(s,n){return this._addCheck({kind:"regex",regex:s,..._t.errToObj(n)})}includes(s,n){return this._addCheck({kind:"includes",value:s,position:n==null?void 0:n.position,..._t.errToObj(n==null?void 0:n.message)})}startsWith(s,n){return this._addCheck({kind:"startsWith",value:s,..._t.errToObj(n)})}endsWith(s,n){return this._addCheck({kind:"endsWith",value:s,..._t.errToObj(n)})}min(s,n){return this._addCheck({kind:"min",value:s,..._t.errToObj(n)})}max(s,n){return this._addCheck({kind:"max",value:s,..._t.errToObj(n)})}length(s,n){return this._addCheck({kind:"length",value:s,..._t.errToObj(n)})}nonempty(s){return this.min(1,_t.errToObj(s))}trim(){return new Ir({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new Ir({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new Ir({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(s=>s.kind==="datetime")}get isDate(){return!!this._def.checks.find(s=>s.kind==="date")}get isTime(){return!!this._def.checks.find(s=>s.kind==="time")}get isDuration(){return!!this._def.checks.find(s=>s.kind==="duration")}get isEmail(){return!!this._def.checks.find(s=>s.kind==="email")}get isURL(){return!!this._def.checks.find(s=>s.kind==="url")}get isEmoji(){return!!this._def.checks.find(s=>s.kind==="emoji")}get isUUID(){return!!this._def.checks.find(s=>s.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(s=>s.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(s=>s.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(s=>s.kind==="cuid2")}get isULID(){return!!this._def.checks.find(s=>s.kind==="ulid")}get isIP(){return!!this._def.checks.find(s=>s.kind==="ip")}get isCIDR(){return!!this._def.checks.find(s=>s.kind==="cidr")}get isBase64(){return!!this._def.checks.find(s=>s.kind==="base64")}get isBase64url(){return!!this._def.checks.find(s=>s.kind==="base64url")}get minLength(){let s=null;for(const n of this._def.checks)n.kind==="min"&&(s===null||n.value>s)&&(s=n.value);return s}get maxLength(){let s=null;for(const n of this._def.checks)n.kind==="max"&&(s===null||n.value<s)&&(s=n.value);return s}}Ir.create=t=>{var s;return new Ir({checks:[],typeName:Wt.ZodString,coerce:(s=t==null?void 0:t.coerce)!==null&&s!==void 0?s:!1,...as(t)})};function G8(t,s){const n=(t.toString().split(".")[1]||"").length,a=(s.toString().split(".")[1]||"").length,r=n>a?n:a,i=parseInt(t.toFixed(r).replace(".","")),l=parseInt(s.toFixed(r).replace(".",""));return i%l/Math.pow(10,r)}class Wl extends os{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(s){if(this._def.coerce&&(s.data=Number(s.data)),this._getType(s)!==bt.number){const i=this._getOrReturnCtx(s);return ft(i,{code:at.invalid_type,expected:bt.number,received:i.parsedType}),Yt}let a;const r=new ua;for(const i of this._def.checks)i.kind==="int"?vs.isInteger(s.data)||(a=this._getOrReturnCtx(s,a),ft(a,{code:at.invalid_type,expected:"integer",received:"float",message:i.message}),r.dirty()):i.kind==="min"?(i.inclusive?s.data<i.value:s.data<=i.value)&&(a=this._getOrReturnCtx(s,a),ft(a,{code:at.too_small,minimum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),r.dirty()):i.kind==="max"?(i.inclusive?s.data>i.value:s.data>=i.value)&&(a=this._getOrReturnCtx(s,a),ft(a,{code:at.too_big,maximum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),r.dirty()):i.kind==="multipleOf"?G8(s.data,i.value)!==0&&(a=this._getOrReturnCtx(s,a),ft(a,{code:at.not_multiple_of,multipleOf:i.value,message:i.message}),r.dirty()):i.kind==="finite"?Number.isFinite(s.data)||(a=this._getOrReturnCtx(s,a),ft(a,{code:at.not_finite,message:i.message}),r.dirty()):vs.assertNever(i);return{status:r.value,value:s.data}}gte(s,n){return this.setLimit("min",s,!0,_t.toString(n))}gt(s,n){return this.setLimit("min",s,!1,_t.toString(n))}lte(s,n){return this.setLimit("max",s,!0,_t.toString(n))}lt(s,n){return this.setLimit("max",s,!1,_t.toString(n))}setLimit(s,n,a,r){return new Wl({...this._def,checks:[...this._def.checks,{kind:s,value:n,inclusive:a,message:_t.toString(r)}]})}_addCheck(s){return new Wl({...this._def,checks:[...this._def.checks,s]})}int(s){return this._addCheck({kind:"int",message:_t.toString(s)})}positive(s){return this._addCheck({kind:"min",value:0,inclusive:!1,message:_t.toString(s)})}negative(s){return this._addCheck({kind:"max",value:0,inclusive:!1,message:_t.toString(s)})}nonpositive(s){return this._addCheck({kind:"max",value:0,inclusive:!0,message:_t.toString(s)})}nonnegative(s){return this._addCheck({kind:"min",value:0,inclusive:!0,message:_t.toString(s)})}multipleOf(s,n){return this._addCheck({kind:"multipleOf",value:s,message:_t.toString(n)})}finite(s){return this._addCheck({kind:"finite",message:_t.toString(s)})}safe(s){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:_t.toString(s)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:_t.toString(s)})}get minValue(){let s=null;for(const n of this._def.checks)n.kind==="min"&&(s===null||n.value>s)&&(s=n.value);return s}get maxValue(){let s=null;for(const n of this._def.checks)n.kind==="max"&&(s===null||n.value<s)&&(s=n.value);return s}get isInt(){return!!this._def.checks.find(s=>s.kind==="int"||s.kind==="multipleOf"&&vs.isInteger(s.value))}get isFinite(){let s=null,n=null;for(const a of this._def.checks){if(a.kind==="finite"||a.kind==="int"||a.kind==="multipleOf")return!0;a.kind==="min"?(n===null||a.value>n)&&(n=a.value):a.kind==="max"&&(s===null||a.value<s)&&(s=a.value)}return Number.isFinite(n)&&Number.isFinite(s)}}Wl.create=t=>new Wl({checks:[],typeName:Wt.ZodNumber,coerce:(t==null?void 0:t.coerce)||!1,...as(t)});class Hl extends os{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(s){if(this._def.coerce)try{s.data=BigInt(s.data)}catch{return this._getInvalidInput(s)}if(this._getType(s)!==bt.bigint)return this._getInvalidInput(s);let a;const r=new ua;for(const i of this._def.checks)i.kind==="min"?(i.inclusive?s.data<i.value:s.data<=i.value)&&(a=this._getOrReturnCtx(s,a),ft(a,{code:at.too_small,type:"bigint",minimum:i.value,inclusive:i.inclusive,message:i.message}),r.dirty()):i.kind==="max"?(i.inclusive?s.data>i.value:s.data>=i.value)&&(a=this._getOrReturnCtx(s,a),ft(a,{code:at.too_big,type:"bigint",maximum:i.value,inclusive:i.inclusive,message:i.message}),r.dirty()):i.kind==="multipleOf"?s.data%i.value!==BigInt(0)&&(a=this._getOrReturnCtx(s,a),ft(a,{code:at.not_multiple_of,multipleOf:i.value,message:i.message}),r.dirty()):vs.assertNever(i);return{status:r.value,value:s.data}}_getInvalidInput(s){const n=this._getOrReturnCtx(s);return ft(n,{code:at.invalid_type,expected:bt.bigint,received:n.parsedType}),Yt}gte(s,n){return this.setLimit("min",s,!0,_t.toString(n))}gt(s,n){return this.setLimit("min",s,!1,_t.toString(n))}lte(s,n){return this.setLimit("max",s,!0,_t.toString(n))}lt(s,n){return this.setLimit("max",s,!1,_t.toString(n))}setLimit(s,n,a,r){return new Hl({...this._def,checks:[...this._def.checks,{kind:s,value:n,inclusive:a,message:_t.toString(r)}]})}_addCheck(s){return new Hl({...this._def,checks:[...this._def.checks,s]})}positive(s){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:_t.toString(s)})}negative(s){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:_t.toString(s)})}nonpositive(s){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:_t.toString(s)})}nonnegative(s){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:_t.toString(s)})}multipleOf(s,n){return this._addCheck({kind:"multipleOf",value:s,message:_t.toString(n)})}get minValue(){let s=null;for(const n of this._def.checks)n.kind==="min"&&(s===null||n.value>s)&&(s=n.value);return s}get maxValue(){let s=null;for(const n of this._def.checks)n.kind==="max"&&(s===null||n.value<s)&&(s=n.value);return s}}Hl.create=t=>{var s;return new Hl({checks:[],typeName:Wt.ZodBigInt,coerce:(s=t==null?void 0:t.coerce)!==null&&s!==void 0?s:!1,...as(t)})};class Gu extends os{_parse(s){if(this._def.coerce&&(s.data=!!s.data),this._getType(s)!==bt.boolean){const a=this._getOrReturnCtx(s);return ft(a,{code:at.invalid_type,expected:bt.boolean,received:a.parsedType}),Yt}return wa(s.data)}}Gu.create=t=>new Gu({typeName:Wt.ZodBoolean,coerce:(t==null?void 0:t.coerce)||!1,...as(t)});class zo extends os{_parse(s){if(this._def.coerce&&(s.data=new Date(s.data)),this._getType(s)!==bt.date){const i=this._getOrReturnCtx(s);return ft(i,{code:at.invalid_type,expected:bt.date,received:i.parsedType}),Yt}if(isNaN(s.data.getTime())){const i=this._getOrReturnCtx(s);return ft(i,{code:at.invalid_date}),Yt}const a=new ua;let r;for(const i of this._def.checks)i.kind==="min"?s.data.getTime()<i.value&&(r=this._getOrReturnCtx(s,r),ft(r,{code:at.too_small,message:i.message,inclusive:!0,exact:!1,minimum:i.value,type:"date"}),a.dirty()):i.kind==="max"?s.data.getTime()>i.value&&(r=this._getOrReturnCtx(s,r),ft(r,{code:at.too_big,message:i.message,inclusive:!0,exact:!1,maximum:i.value,type:"date"}),a.dirty()):vs.assertNever(i);return{status:a.value,value:new Date(s.data.getTime())}}_addCheck(s){return new zo({...this._def,checks:[...this._def.checks,s]})}min(s,n){return this._addCheck({kind:"min",value:s.getTime(),message:_t.toString(n)})}max(s,n){return this._addCheck({kind:"max",value:s.getTime(),message:_t.toString(n)})}get minDate(){let s=null;for(const n of this._def.checks)n.kind==="min"&&(s===null||n.value>s)&&(s=n.value);return s!=null?new Date(s):null}get maxDate(){let s=null;for(const n of this._def.checks)n.kind==="max"&&(s===null||n.value<s)&&(s=n.value);return s!=null?new Date(s):null}}zo.create=t=>new zo({checks:[],coerce:(t==null?void 0:t.coerce)||!1,typeName:Wt.ZodDate,...as(t)});class Tx extends os{_parse(s){if(this._getType(s)!==bt.symbol){const a=this._getOrReturnCtx(s);return ft(a,{code:at.invalid_type,expected:bt.symbol,received:a.parsedType}),Yt}return wa(s.data)}}Tx.create=t=>new Tx({typeName:Wt.ZodSymbol,...as(t)});class Wu extends os{_parse(s){if(this._getType(s)!==bt.undefined){const a=this._getOrReturnCtx(s);return ft(a,{code:at.invalid_type,expected:bt.undefined,received:a.parsedType}),Yt}return wa(s.data)}}Wu.create=t=>new Wu({typeName:Wt.ZodUndefined,...as(t)});class Hu extends os{_parse(s){if(this._getType(s)!==bt.null){const a=this._getOrReturnCtx(s);return ft(a,{code:at.invalid_type,expected:bt.null,received:a.parsedType}),Yt}return wa(s.data)}}Hu.create=t=>new Hu({typeName:Wt.ZodNull,...as(t)});class ud extends os{constructor(){super(...arguments),this._any=!0}_parse(s){return wa(s.data)}}ud.create=t=>new ud({typeName:Wt.ZodAny,...as(t)});class Eo extends os{constructor(){super(...arguments),this._unknown=!0}_parse(s){return wa(s.data)}}Eo.create=t=>new Eo({typeName:Wt.ZodUnknown,...as(t)});class Hi extends os{_parse(s){const n=this._getOrReturnCtx(s);return ft(n,{code:at.invalid_type,expected:bt.never,received:n.parsedType}),Yt}}Hi.create=t=>new Hi({typeName:Wt.ZodNever,...as(t)});class Ex extends os{_parse(s){if(this._getType(s)!==bt.undefined){const a=this._getOrReturnCtx(s);return ft(a,{code:at.invalid_type,expected:bt.void,received:a.parsedType}),Yt}return wa(s.data)}}Ex.create=t=>new Ex({typeName:Wt.ZodVoid,...as(t)});class $r extends os{_parse(s){const{ctx:n,status:a}=this._processInputParams(s),r=this._def;if(n.parsedType!==bt.array)return ft(n,{code:at.invalid_type,expected:bt.array,received:n.parsedType}),Yt;if(r.exactLength!==null){const l=n.data.length>r.exactLength.value,c=n.data.length<r.exactLength.value;(l||c)&&(ft(n,{code:l?at.too_big:at.too_small,minimum:c?r.exactLength.value:void 0,maximum:l?r.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:r.exactLength.message}),a.dirty())}if(r.minLength!==null&&n.data.length<r.minLength.value&&(ft(n,{code:at.too_small,minimum:r.minLength.value,type:"array",inclusive:!0,exact:!1,message:r.minLength.message}),a.dirty()),r.maxLength!==null&&n.data.length>r.maxLength.value&&(ft(n,{code:at.too_big,maximum:r.maxLength.value,type:"array",inclusive:!0,exact:!1,message:r.maxLength.message}),a.dirty()),n.common.async)return Promise.all([...n.data].map((l,c)=>r.type._parseAsync(new xi(n,l,n.path,c)))).then(l=>ua.mergeArray(a,l));const i=[...n.data].map((l,c)=>r.type._parseSync(new xi(n,l,n.path,c)));return ua.mergeArray(a,i)}get element(){return this._def.type}min(s,n){return new $r({...this._def,minLength:{value:s,message:_t.toString(n)}})}max(s,n){return new $r({...this._def,maxLength:{value:s,message:_t.toString(n)}})}length(s,n){return new $r({...this._def,exactLength:{value:s,message:_t.toString(n)}})}nonempty(s){return this.min(1,s)}}$r.create=(t,s)=>new $r({type:t,minLength:null,maxLength:null,exactLength:null,typeName:Wt.ZodArray,...as(s)});function oc(t){if(t instanceof an){const s={};for(const n in t.shape){const a=t.shape[n];s[n]=ui.create(oc(a))}return new an({...t._def,shape:()=>s})}else return t instanceof $r?new $r({...t._def,type:oc(t.element)}):t instanceof ui?ui.create(oc(t.unwrap())):t instanceof Yl?Yl.create(oc(t.unwrap())):t instanceof pi?pi.create(t.items.map(s=>oc(s))):t}class an extends os{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const s=this._def.shape(),n=vs.objectKeys(s);return this._cached={shape:s,keys:n}}_parse(s){if(this._getType(s)!==bt.object){const d=this._getOrReturnCtx(s);return ft(d,{code:at.invalid_type,expected:bt.object,received:d.parsedType}),Yt}const{status:a,ctx:r}=this._processInputParams(s),{shape:i,keys:l}=this._getCached(),c=[];if(!(this._def.catchall instanceof Hi&&this._def.unknownKeys==="strip"))for(const d in r.data)l.includes(d)||c.push(d);const o=[];for(const d of l){const h=i[d],u=r.data[d];o.push({key:{status:"valid",value:d},value:h._parse(new xi(r,u,r.path,d)),alwaysSet:d in r.data})}if(this._def.catchall instanceof Hi){const d=this._def.unknownKeys;if(d==="passthrough")for(const h of c)o.push({key:{status:"valid",value:h},value:{status:"valid",value:r.data[h]}});else if(d==="strict")c.length>0&&(ft(r,{code:at.unrecognized_keys,keys:c}),a.dirty());else if(d!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const d=this._def.catchall;for(const h of c){const u=r.data[h];o.push({key:{status:"valid",value:h},value:d._parse(new xi(r,u,r.path,h)),alwaysSet:h in r.data})}}return r.common.async?Promise.resolve().then(async()=>{const d=[];for(const h of o){const u=await h.key,m=await h.value;d.push({key:u,value:m,alwaysSet:h.alwaysSet})}return d}).then(d=>ua.mergeObjectSync(a,d)):ua.mergeObjectSync(a,o)}get shape(){return this._def.shape()}strict(s){return _t.errToObj,new an({...this._def,unknownKeys:"strict",...s!==void 0?{errorMap:(n,a)=>{var r,i,l,c;const o=(l=(i=(r=this._def).errorMap)===null||i===void 0?void 0:i.call(r,n,a).message)!==null&&l!==void 0?l:a.defaultError;return n.code==="unrecognized_keys"?{message:(c=_t.errToObj(s).message)!==null&&c!==void 0?c:o}:{message:o}}}:{}})}strip(){return new an({...this._def,unknownKeys:"strip"})}passthrough(){return new an({...this._def,unknownKeys:"passthrough"})}extend(s){return new an({...this._def,shape:()=>({...this._def.shape(),...s})})}merge(s){return new an({unknownKeys:s._def.unknownKeys,catchall:s._def.catchall,shape:()=>({...this._def.shape(),...s._def.shape()}),typeName:Wt.ZodObject})}setKey(s,n){return this.augment({[s]:n})}catchall(s){return new an({...this._def,catchall:s})}pick(s){const n={};return vs.objectKeys(s).forEach(a=>{s[a]&&this.shape[a]&&(n[a]=this.shape[a])}),new an({...this._def,shape:()=>n})}omit(s){const n={};return vs.objectKeys(this.shape).forEach(a=>{s[a]||(n[a]=this.shape[a])}),new an({...this._def,shape:()=>n})}deepPartial(){return oc(this)}partial(s){const n={};return vs.objectKeys(this.shape).forEach(a=>{const r=this.shape[a];s&&!s[a]?n[a]=r:n[a]=r.optional()}),new an({...this._def,shape:()=>n})}required(s){const n={};return vs.objectKeys(this.shape).forEach(a=>{if(s&&!s[a])n[a]=this.shape[a];else{let i=this.shape[a];for(;i instanceof ui;)i=i._def.innerType;n[a]=i}}),new an({...this._def,shape:()=>n})}keyof(){return YA(vs.objectKeys(this.shape))}}an.create=(t,s)=>new an({shape:()=>t,unknownKeys:"strip",catchall:Hi.create(),typeName:Wt.ZodObject,...as(s)});an.strictCreate=(t,s)=>new an({shape:()=>t,unknownKeys:"strict",catchall:Hi.create(),typeName:Wt.ZodObject,...as(s)});an.lazycreate=(t,s)=>new an({shape:t,unknownKeys:"strip",catchall:Hi.create(),typeName:Wt.ZodObject,...as(s)});class Ku extends os{_parse(s){const{ctx:n}=this._processInputParams(s),a=this._def.options;function r(i){for(const c of i)if(c.result.status==="valid")return c.result;for(const c of i)if(c.result.status==="dirty")return n.common.issues.push(...c.ctx.common.issues),c.result;const l=i.map(c=>new tr(c.ctx.common.issues));return ft(n,{code:at.invalid_union,unionErrors:l}),Yt}if(n.common.async)return Promise.all(a.map(async i=>{const l={...n,common:{...n.common,issues:[]},parent:null};return{result:await i._parseAsync({data:n.data,path:n.path,parent:l}),ctx:l}})).then(r);{let i;const l=[];for(const o of a){const d={...n,common:{...n.common,issues:[]},parent:null},h=o._parseSync({data:n.data,path:n.path,parent:d});if(h.status==="valid")return h;h.status==="dirty"&&!i&&(i={result:h,ctx:d}),d.common.issues.length&&l.push(d.common.issues)}if(i)return n.common.issues.push(...i.ctx.common.issues),i.result;const c=l.map(o=>new tr(o));return ft(n,{code:at.invalid_union,unionErrors:c}),Yt}}get options(){return this._def.options}}Ku.create=(t,s)=>new Ku({options:t,typeName:Wt.ZodUnion,...as(s)});const Si=t=>t instanceof Zu?Si(t.schema):t instanceof Vr?Si(t.innerType()):t instanceof Xu?[t.value]:t instanceof Kl?t.options:t instanceof Ju?vs.objectValues(t.enum):t instanceof em?Si(t._def.innerType):t instanceof Wu?[void 0]:t instanceof Hu?[null]:t instanceof ui?[void 0,...Si(t.unwrap())]:t instanceof Yl?[null,...Si(t.unwrap())]:t instanceof j0||t instanceof sm?Si(t.unwrap()):t instanceof tm?Si(t._def.innerType):[];class Lp extends os{_parse(s){const{ctx:n}=this._processInputParams(s);if(n.parsedType!==bt.object)return ft(n,{code:at.invalid_type,expected:bt.object,received:n.parsedType}),Yt;const a=this.discriminator,r=n.data[a],i=this.optionsMap.get(r);return i?n.common.async?i._parseAsync({data:n.data,path:n.path,parent:n}):i._parseSync({data:n.data,path:n.path,parent:n}):(ft(n,{code:at.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[a]}),Yt)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(s,n,a){const r=new Map;for(const i of n){const l=Si(i.shape[s]);if(!l.length)throw new Error(`A discriminator value for key \`${s}\` could not be extracted from all schema options`);for(const c of l){if(r.has(c))throw new Error(`Discriminator property ${String(s)} has duplicate value ${String(c)}`);r.set(c,i)}}return new Lp({typeName:Wt.ZodDiscriminatedUnion,discriminator:s,options:n,optionsMap:r,...as(a)})}}function tv(t,s){const n=Ei(t),a=Ei(s);if(t===s)return{valid:!0,data:t};if(n===bt.object&&a===bt.object){const r=vs.objectKeys(s),i=vs.objectKeys(t).filter(c=>r.indexOf(c)!==-1),l={...t,...s};for(const c of i){const o=tv(t[c],s[c]);if(!o.valid)return{valid:!1};l[c]=o.data}return{valid:!0,data:l}}else if(n===bt.array&&a===bt.array){if(t.length!==s.length)return{valid:!1};const r=[];for(let i=0;i<t.length;i++){const l=t[i],c=s[i],o=tv(l,c);if(!o.valid)return{valid:!1};r.push(o.data)}return{valid:!0,data:r}}else return n===bt.date&&a===bt.date&&+t==+s?{valid:!0,data:t}:{valid:!1}}class Yu extends os{_parse(s){const{status:n,ctx:a}=this._processInputParams(s),r=(i,l)=>{if(Jj(i)||Jj(l))return Yt;const c=tv(i.value,l.value);return c.valid?((ev(i)||ev(l))&&n.dirty(),{status:n.value,value:c.data}):(ft(a,{code:at.invalid_intersection_types}),Yt)};return a.common.async?Promise.all([this._def.left._parseAsync({data:a.data,path:a.path,parent:a}),this._def.right._parseAsync({data:a.data,path:a.path,parent:a})]).then(([i,l])=>r(i,l)):r(this._def.left._parseSync({data:a.data,path:a.path,parent:a}),this._def.right._parseSync({data:a.data,path:a.path,parent:a}))}}Yu.create=(t,s,n)=>new Yu({left:t,right:s,typeName:Wt.ZodIntersection,...as(n)});class pi extends os{_parse(s){const{status:n,ctx:a}=this._processInputParams(s);if(a.parsedType!==bt.array)return ft(a,{code:at.invalid_type,expected:bt.array,received:a.parsedType}),Yt;if(a.data.length<this._def.items.length)return ft(a,{code:at.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),Yt;!this._def.rest&&a.data.length>this._def.items.length&&(ft(a,{code:at.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),n.dirty());const i=[...a.data].map((l,c)=>{const o=this._def.items[c]||this._def.rest;return o?o._parse(new xi(a,l,a.path,c)):null}).filter(l=>!!l);return a.common.async?Promise.all(i).then(l=>ua.mergeArray(n,l)):ua.mergeArray(n,i)}get items(){return this._def.items}rest(s){return new pi({...this._def,rest:s})}}pi.create=(t,s)=>{if(!Array.isArray(t))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new pi({items:t,typeName:Wt.ZodTuple,rest:null,...as(s)})};class Qu extends os{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(s){const{status:n,ctx:a}=this._processInputParams(s);if(a.parsedType!==bt.object)return ft(a,{code:at.invalid_type,expected:bt.object,received:a.parsedType}),Yt;const r=[],i=this._def.keyType,l=this._def.valueType;for(const c in a.data)r.push({key:i._parse(new xi(a,c,a.path,c)),value:l._parse(new xi(a,a.data[c],a.path,c)),alwaysSet:c in a.data});return a.common.async?ua.mergeObjectAsync(n,r):ua.mergeObjectSync(n,r)}get element(){return this._def.valueType}static create(s,n,a){return n instanceof os?new Qu({keyType:s,valueType:n,typeName:Wt.ZodRecord,...as(a)}):new Qu({keyType:Ir.create(),valueType:s,typeName:Wt.ZodRecord,...as(n)})}}class Mx extends os{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(s){const{status:n,ctx:a}=this._processInputParams(s);if(a.parsedType!==bt.map)return ft(a,{code:at.invalid_type,expected:bt.map,received:a.parsedType}),Yt;const r=this._def.keyType,i=this._def.valueType,l=[...a.data.entries()].map(([c,o],d)=>({key:r._parse(new xi(a,c,a.path,[d,"key"])),value:i._parse(new xi(a,o,a.path,[d,"value"]))}));if(a.common.async){const c=new Map;return Promise.resolve().then(async()=>{for(const o of l){const d=await o.key,h=await o.value;if(d.status==="aborted"||h.status==="aborted")return Yt;(d.status==="dirty"||h.status==="dirty")&&n.dirty(),c.set(d.value,h.value)}return{status:n.value,value:c}})}else{const c=new Map;for(const o of l){const d=o.key,h=o.value;if(d.status==="aborted"||h.status==="aborted")return Yt;(d.status==="dirty"||h.status==="dirty")&&n.dirty(),c.set(d.value,h.value)}return{status:n.value,value:c}}}}Mx.create=(t,s,n)=>new Mx({valueType:s,keyType:t,typeName:Wt.ZodMap,...as(n)});class Vo extends os{_parse(s){const{status:n,ctx:a}=this._processInputParams(s);if(a.parsedType!==bt.set)return ft(a,{code:at.invalid_type,expected:bt.set,received:a.parsedType}),Yt;const r=this._def;r.minSize!==null&&a.data.size<r.minSize.value&&(ft(a,{code:at.too_small,minimum:r.minSize.value,type:"set",inclusive:!0,exact:!1,message:r.minSize.message}),n.dirty()),r.maxSize!==null&&a.data.size>r.maxSize.value&&(ft(a,{code:at.too_big,maximum:r.maxSize.value,type:"set",inclusive:!0,exact:!1,message:r.maxSize.message}),n.dirty());const i=this._def.valueType;function l(o){const d=new Set;for(const h of o){if(h.status==="aborted")return Yt;h.status==="dirty"&&n.dirty(),d.add(h.value)}return{status:n.value,value:d}}const c=[...a.data.values()].map((o,d)=>i._parse(new xi(a,o,a.path,d)));return a.common.async?Promise.all(c).then(o=>l(o)):l(c)}min(s,n){return new Vo({...this._def,minSize:{value:s,message:_t.toString(n)}})}max(s,n){return new Vo({...this._def,maxSize:{value:s,message:_t.toString(n)}})}size(s,n){return this.min(s,n).max(s,n)}nonempty(s){return this.min(1,s)}}Vo.create=(t,s)=>new Vo({valueType:t,minSize:null,maxSize:null,typeName:Wt.ZodSet,...as(s)});class Dc extends os{constructor(){super(...arguments),this.validate=this.implement}_parse(s){const{ctx:n}=this._processInputParams(s);if(n.parsedType!==bt.function)return ft(n,{code:at.invalid_type,expected:bt.function,received:n.parsedType}),Yt;function a(c,o){return Ax({data:c,path:n.path,errorMaps:[n.common.contextualErrorMap,n.schemaErrorMap,kx(),dd].filter(d=>!!d),issueData:{code:at.invalid_arguments,argumentsError:o}})}function r(c,o){return Ax({data:c,path:n.path,errorMaps:[n.common.contextualErrorMap,n.schemaErrorMap,kx(),dd].filter(d=>!!d),issueData:{code:at.invalid_return_type,returnTypeError:o}})}const i={errorMap:n.common.contextualErrorMap},l=n.data;if(this._def.returns instanceof md){const c=this;return wa(async function(...o){const d=new tr([]),h=await c._def.args.parseAsync(o,i).catch(p=>{throw d.addIssue(a(o,p)),d}),u=await Reflect.apply(l,this,h);return await c._def.returns._def.type.parseAsync(u,i).catch(p=>{throw d.addIssue(r(u,p)),d})})}else{const c=this;return wa(function(...o){const d=c._def.args.safeParse(o,i);if(!d.success)throw new tr([a(o,d.error)]);const h=Reflect.apply(l,this,d.data),u=c._def.returns.safeParse(h,i);if(!u.success)throw new tr([r(h,u.error)]);return u.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...s){return new Dc({...this._def,args:pi.create(s).rest(Eo.create())})}returns(s){return new Dc({...this._def,returns:s})}implement(s){return this.parse(s)}strictImplement(s){return this.parse(s)}static create(s,n,a){return new Dc({args:s||pi.create([]).rest(Eo.create()),returns:n||Eo.create(),typeName:Wt.ZodFunction,...as(a)})}}class Zu extends os{get schema(){return this._def.getter()}_parse(s){const{ctx:n}=this._processInputParams(s);return this._def.getter()._parse({data:n.data,path:n.path,parent:n})}}Zu.create=(t,s)=>new Zu({getter:t,typeName:Wt.ZodLazy,...as(s)});class Xu extends os{_parse(s){if(s.data!==this._def.value){const n=this._getOrReturnCtx(s);return ft(n,{received:n.data,code:at.invalid_literal,expected:this._def.value}),Yt}return{status:"valid",value:s.data}}get value(){return this._def.value}}Xu.create=(t,s)=>new Xu({value:t,typeName:Wt.ZodLiteral,...as(s)});function YA(t,s){return new Kl({values:t,typeName:Wt.ZodEnum,...as(s)})}class Kl extends os{constructor(){super(...arguments),ru.set(this,void 0)}_parse(s){if(typeof s.data!="string"){const n=this._getOrReturnCtx(s),a=this._def.values;return ft(n,{expected:vs.joinValues(a),received:n.parsedType,code:at.invalid_type}),Yt}if(Px(this,ru)||GA(this,ru,new Set(this._def.values)),!Px(this,ru).has(s.data)){const n=this._getOrReturnCtx(s),a=this._def.values;return ft(n,{received:n.data,code:at.invalid_enum_value,options:a}),Yt}return wa(s.data)}get options(){return this._def.values}get enum(){const s={};for(const n of this._def.values)s[n]=n;return s}get Values(){const s={};for(const n of this._def.values)s[n]=n;return s}get Enum(){const s={};for(const n of this._def.values)s[n]=n;return s}extract(s,n=this._def){return Kl.create(s,{...this._def,...n})}exclude(s,n=this._def){return Kl.create(this.options.filter(a=>!s.includes(a)),{...this._def,...n})}}ru=new WeakMap;Kl.create=YA;class Ju extends os{constructor(){super(...arguments),iu.set(this,void 0)}_parse(s){const n=vs.getValidEnumValues(this._def.values),a=this._getOrReturnCtx(s);if(a.parsedType!==bt.string&&a.parsedType!==bt.number){const r=vs.objectValues(n);return ft(a,{expected:vs.joinValues(r),received:a.parsedType,code:at.invalid_type}),Yt}if(Px(this,iu)||GA(this,iu,new Set(vs.getValidEnumValues(this._def.values))),!Px(this,iu).has(s.data)){const r=vs.objectValues(n);return ft(a,{received:a.data,code:at.invalid_enum_value,options:r}),Yt}return wa(s.data)}get enum(){return this._def.values}}iu=new WeakMap;Ju.create=(t,s)=>new Ju({values:t,typeName:Wt.ZodNativeEnum,...as(s)});class md extends os{unwrap(){return this._def.type}_parse(s){const{ctx:n}=this._processInputParams(s);if(n.parsedType!==bt.promise&&n.common.async===!1)return ft(n,{code:at.invalid_type,expected:bt.promise,received:n.parsedType}),Yt;const a=n.parsedType===bt.promise?n.data:Promise.resolve(n.data);return wa(a.then(r=>this._def.type.parseAsync(r,{path:n.path,errorMap:n.common.contextualErrorMap})))}}md.create=(t,s)=>new md({type:t,typeName:Wt.ZodPromise,...as(s)});class Vr extends os{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===Wt.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(s){const{status:n,ctx:a}=this._processInputParams(s),r=this._def.effect||null,i={addIssue:l=>{ft(a,l),l.fatal?n.abort():n.dirty()},get path(){return a.path}};if(i.addIssue=i.addIssue.bind(i),r.type==="preprocess"){const l=r.transform(a.data,i);if(a.common.async)return Promise.resolve(l).then(async c=>{if(n.value==="aborted")return Yt;const o=await this._def.schema._parseAsync({data:c,path:a.path,parent:a});return o.status==="aborted"?Yt:o.status==="dirty"||n.value==="dirty"?bc(o.value):o});{if(n.value==="aborted")return Yt;const c=this._def.schema._parseSync({data:l,path:a.path,parent:a});return c.status==="aborted"?Yt:c.status==="dirty"||n.value==="dirty"?bc(c.value):c}}if(r.type==="refinement"){const l=c=>{const o=r.refinement(c,i);if(a.common.async)return Promise.resolve(o);if(o instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return c};if(a.common.async===!1){const c=this._def.schema._parseSync({data:a.data,path:a.path,parent:a});return c.status==="aborted"?Yt:(c.status==="dirty"&&n.dirty(),l(c.value),{status:n.value,value:c.value})}else return this._def.schema._parseAsync({data:a.data,path:a.path,parent:a}).then(c=>c.status==="aborted"?Yt:(c.status==="dirty"&&n.dirty(),l(c.value).then(()=>({status:n.value,value:c.value}))))}if(r.type==="transform")if(a.common.async===!1){const l=this._def.schema._parseSync({data:a.data,path:a.path,parent:a});if(!Uo(l))return l;const c=r.transform(l.value,i);if(c instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:n.value,value:c}}else return this._def.schema._parseAsync({data:a.data,path:a.path,parent:a}).then(l=>Uo(l)?Promise.resolve(r.transform(l.value,i)).then(c=>({status:n.value,value:c})):l);vs.assertNever(r)}}Vr.create=(t,s,n)=>new Vr({schema:t,typeName:Wt.ZodEffects,effect:s,...as(n)});Vr.createWithPreprocess=(t,s,n)=>new Vr({schema:s,effect:{type:"preprocess",transform:t},typeName:Wt.ZodEffects,...as(n)});class ui extends os{_parse(s){return this._getType(s)===bt.undefined?wa(void 0):this._def.innerType._parse(s)}unwrap(){return this._def.innerType}}ui.create=(t,s)=>new ui({innerType:t,typeName:Wt.ZodOptional,...as(s)});class Yl extends os{_parse(s){return this._getType(s)===bt.null?wa(null):this._def.innerType._parse(s)}unwrap(){return this._def.innerType}}Yl.create=(t,s)=>new Yl({innerType:t,typeName:Wt.ZodNullable,...as(s)});class em extends os{_parse(s){const{ctx:n}=this._processInputParams(s);let a=n.data;return n.parsedType===bt.undefined&&(a=this._def.defaultValue()),this._def.innerType._parse({data:a,path:n.path,parent:n})}removeDefault(){return this._def.innerType}}em.create=(t,s)=>new em({innerType:t,typeName:Wt.ZodDefault,defaultValue:typeof s.default=="function"?s.default:()=>s.default,...as(s)});class tm extends os{_parse(s){const{ctx:n}=this._processInputParams(s),a={...n,common:{...n.common,issues:[]}},r=this._def.innerType._parse({data:a.data,path:a.path,parent:{...a}});return Vu(r)?r.then(i=>({status:"valid",value:i.status==="valid"?i.value:this._def.catchValue({get error(){return new tr(a.common.issues)},input:a.data})})):{status:"valid",value:r.status==="valid"?r.value:this._def.catchValue({get error(){return new tr(a.common.issues)},input:a.data})}}removeCatch(){return this._def.innerType}}tm.create=(t,s)=>new tm({innerType:t,typeName:Wt.ZodCatch,catchValue:typeof s.catch=="function"?s.catch:()=>s.catch,...as(s)});class _x extends os{_parse(s){if(this._getType(s)!==bt.nan){const a=this._getOrReturnCtx(s);return ft(a,{code:at.invalid_type,expected:bt.nan,received:a.parsedType}),Yt}return{status:"valid",value:s.data}}}_x.create=t=>new _x({typeName:Wt.ZodNaN,...as(t)});const W8=Symbol("zod_brand");class j0 extends os{_parse(s){const{ctx:n}=this._processInputParams(s),a=n.data;return this._def.type._parse({data:a,path:n.path,parent:n})}unwrap(){return this._def.type}}class Am extends os{_parse(s){const{status:n,ctx:a}=this._processInputParams(s);if(a.common.async)return(async()=>{const i=await this._def.in._parseAsync({data:a.data,path:a.path,parent:a});return i.status==="aborted"?Yt:i.status==="dirty"?(n.dirty(),bc(i.value)):this._def.out._parseAsync({data:i.value,path:a.path,parent:a})})();{const r=this._def.in._parseSync({data:a.data,path:a.path,parent:a});return r.status==="aborted"?Yt:r.status==="dirty"?(n.dirty(),{status:"dirty",value:r.value}):this._def.out._parseSync({data:r.value,path:a.path,parent:a})}}static create(s,n){return new Am({in:s,out:n,typeName:Wt.ZodPipeline})}}class sm extends os{_parse(s){const n=this._def.innerType._parse(s),a=r=>(Uo(r)&&(r.value=Object.freeze(r.value)),r);return Vu(n)?n.then(r=>a(r)):a(n)}unwrap(){return this._def.innerType}}sm.create=(t,s)=>new sm({innerType:t,typeName:Wt.ZodReadonly,...as(s)});function ww(t,s){const n=typeof t=="function"?t(s):typeof t=="string"?{message:t}:t;return typeof n=="string"?{message:n}:n}function QA(t,s={},n){return t?ud.create().superRefine((a,r)=>{var i,l;const c=t(a);if(c instanceof Promise)return c.then(o=>{var d,h;if(!o){const u=ww(s,a),m=(h=(d=u.fatal)!==null&&d!==void 0?d:n)!==null&&h!==void 0?h:!0;r.addIssue({code:"custom",...u,fatal:m})}});if(!c){const o=ww(s,a),d=(l=(i=o.fatal)!==null&&i!==void 0?i:n)!==null&&l!==void 0?l:!0;r.addIssue({code:"custom",...o,fatal:d})}}):ud.create()}const H8={object:an.lazycreate};var Wt;(function(t){t.ZodString="ZodString",t.ZodNumber="ZodNumber",t.ZodNaN="ZodNaN",t.ZodBigInt="ZodBigInt",t.ZodBoolean="ZodBoolean",t.ZodDate="ZodDate",t.ZodSymbol="ZodSymbol",t.ZodUndefined="ZodUndefined",t.ZodNull="ZodNull",t.ZodAny="ZodAny",t.ZodUnknown="ZodUnknown",t.ZodNever="ZodNever",t.ZodVoid="ZodVoid",t.ZodArray="ZodArray",t.ZodObject="ZodObject",t.ZodUnion="ZodUnion",t.ZodDiscriminatedUnion="ZodDiscriminatedUnion",t.ZodIntersection="ZodIntersection",t.ZodTuple="ZodTuple",t.ZodRecord="ZodRecord",t.ZodMap="ZodMap",t.ZodSet="ZodSet",t.ZodFunction="ZodFunction",t.ZodLazy="ZodLazy",t.ZodLiteral="ZodLiteral",t.ZodEnum="ZodEnum",t.ZodEffects="ZodEffects",t.ZodNativeEnum="ZodNativeEnum",t.ZodOptional="ZodOptional",t.ZodNullable="ZodNullable",t.ZodDefault="ZodDefault",t.ZodCatch="ZodCatch",t.ZodPromise="ZodPromise",t.ZodBranded="ZodBranded",t.ZodPipeline="ZodPipeline",t.ZodReadonly="ZodReadonly"})(Wt||(Wt={}));const K8=(t,s={message:`Input not instance of ${t.name}`})=>QA(n=>n instanceof t,s),ZA=Ir.create,XA=Wl.create,Y8=_x.create,Q8=Hl.create,JA=Gu.create,Z8=zo.create,X8=Tx.create,J8=Wu.create,eq=Hu.create,tq=ud.create,sq=Eo.create,nq=Hi.create,aq=Ex.create,rq=$r.create,iq=an.create,lq=an.strictCreate,oq=Ku.create,cq=Lp.create,dq=Yu.create,uq=pi.create,mq=Qu.create,hq=Mx.create,xq=Vo.create,pq=Dc.create,fq=Zu.create,gq=Xu.create,jq=Kl.create,vq=Ju.create,yq=md.create,Sw=Vr.create,Nq=ui.create,bq=Yl.create,wq=Vr.createWithPreprocess,Sq=Am.create,Cq=()=>ZA().optional(),kq=()=>XA().optional(),Aq=()=>JA().optional(),Pq={string:t=>Ir.create({...t,coerce:!0}),number:t=>Wl.create({...t,coerce:!0}),boolean:t=>Gu.create({...t,coerce:!0}),bigint:t=>Hl.create({...t,coerce:!0}),date:t=>zo.create({...t,coerce:!0})},Tq=Yt;var pe=Object.freeze({__proto__:null,defaultErrorMap:dd,setErrorMap:w8,getErrorMap:kx,makeIssue:Ax,EMPTY_PATH:S8,addIssueToContext:ft,ParseStatus:ua,INVALID:Yt,DIRTY:bc,OK:wa,isAborted:Jj,isDirty:ev,isValid:Uo,isAsync:Vu,get util(){return vs},get objectUtil(){return Xj},ZodParsedType:bt,getParsedType:Ei,ZodType:os,datetimeRegex:KA,ZodString:Ir,ZodNumber:Wl,ZodBigInt:Hl,ZodBoolean:Gu,ZodDate:zo,ZodSymbol:Tx,ZodUndefined:Wu,ZodNull:Hu,ZodAny:ud,ZodUnknown:Eo,ZodNever:Hi,ZodVoid:Ex,ZodArray:$r,ZodObject:an,ZodUnion:Ku,ZodDiscriminatedUnion:Lp,ZodIntersection:Yu,ZodTuple:pi,ZodRecord:Qu,ZodMap:Mx,ZodSet:Vo,ZodFunction:Dc,ZodLazy:Zu,ZodLiteral:Xu,ZodEnum:Kl,ZodNativeEnum:Ju,ZodPromise:md,ZodEffects:Vr,ZodTransformer:Vr,ZodOptional:ui,ZodNullable:Yl,ZodDefault:em,ZodCatch:tm,ZodNaN:_x,BRAND:W8,ZodBranded:j0,ZodPipeline:Am,ZodReadonly:sm,custom:QA,Schema:os,ZodSchema:os,late:H8,get ZodFirstPartyTypeKind(){return Wt},coerce:Pq,any:tq,array:rq,bigint:Q8,boolean:JA,date:Z8,discriminatedUnion:cq,effect:Sw,enum:jq,function:pq,instanceof:K8,intersection:dq,lazy:fq,literal:gq,map:hq,nan:Y8,nativeEnum:vq,never:nq,null:eq,nullable:bq,number:XA,object:iq,oboolean:Aq,onumber:kq,optional:Nq,ostring:Cq,pipeline:Sq,preprocess:wq,promise:yq,record:mq,set:xq,strictObject:lq,string:ZA,symbol:X8,transformer:Sw,tuple:uq,undefined:J8,union:oq,unknown:sq,void:aq,NEVER:Tq,ZodIssueCode:at,quotelessJson:b8,ZodError:tr});async function $n(t,s={}){const{skipAuth:n=!1,...a}=s,r={"Content-Type":"application/json",...a.headers};if(!n){const l=localStorage.getItem("token");l&&(r.Authorization=`Bearer ${l}`)}const i=await fetch(t,{...a,headers:r});if(i.status===401&&!n){localStorage.removeItem("token");const l=new CustomEvent("auth:logout");throw window.dispatchEvent(l),new Error("Session expired")}if(!i.ok){const l=await i.json().catch(()=>({}));throw new Error(l.message||`HTTP ${i.status}: ${i.statusText}`)}return i}var Eq="Label",eP=N.forwardRef((t,s)=>e.jsx(Dt.label,{...t,ref:s,onMouseDown:n=>{var r;n.target.closest("button, input, select, textarea")||((r=t.onMouseDown)==null||r.call(t,n),!n.defaultPrevented&&n.detail>1&&n.preventDefault())}}));eP.displayName=Eq;var tP=eP;const Mq=fm("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),q=N.forwardRef(({className:t,...s},n)=>e.jsx(tP,{ref:n,className:Je(Mq(),t),...s}));q.displayName=tP.displayName;const On=t8,sP=N.createContext({}),$e=({...t})=>e.jsx(sP.Provider,{value:{name:t.name},children:e.jsx(r8,{...t})}),Fp=()=>{const t=N.useContext(sP),s=N.useContext(nP),{getFieldState:n,formState:a}=km(),r=n(t.name,a);if(!t)throw new Error("useFormField should be used within <FormField>");const{id:i}=s;return{id:i,name:t.name,formItemId:`${i}-form-item`,formDescriptionId:`${i}-form-item-description`,formMessageId:`${i}-form-item-message`,...r}},nP=N.createContext({}),Fe=N.forwardRef(({className:t,...s},n)=>{const a=N.useId();return e.jsx(nP.Provider,{value:{id:a},children:e.jsx("div",{ref:n,className:Je("space-y-2",t),...s})})});Fe.displayName="FormItem";const qe=N.forwardRef(({className:t,...s},n)=>{const{error:a,formItemId:r}=Fp();return e.jsx(q,{ref:n,className:Je(a&&"text-destructive",t),htmlFor:r,...s})});qe.displayName="FormLabel";const Le=N.forwardRef(({...t},s)=>{const{error:n,formItemId:a,formDescriptionId:r,formMessageId:i}=Fp();return e.jsx(_C,{ref:s,id:a,"aria-describedby":n?`${r} ${i}`:`${r}`,"aria-invalid":!!n,...t})});Le.displayName="FormControl";const Or=N.forwardRef(({className:t,...s},n)=>{const{formDescriptionId:a}=Fp();return e.jsx("p",{ref:n,id:a,className:Je("text-sm text-muted-foreground",t),...s})});Or.displayName="FormDescription";const ze=N.forwardRef(({className:t,children:s,...n},a)=>{const{error:r,formMessageId:i}=Fp(),l=r?String((r==null?void 0:r.message)??""):s;return l?e.jsx("p",{ref:a,id:i,className:Je("text-sm font-medium text-destructive",t),...n,children:l}):null});ze.displayName="FormMessage";const $=N.forwardRef(({className:t,type:s,...n},a)=>e.jsx("input",{type:s,className:Je("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",t),ref:a,...n}));$.displayName="Input";const mt=N.forwardRef(({className:t,...s},n)=>e.jsx("textarea",{className:Je("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",t),ref:n,...s}));mt.displayName="Textarea";function nm(t,[s,n]){return Math.min(n,Math.max(s,t))}function qp(t){const s=N.useRef({value:t,previous:t});return N.useMemo(()=>(s.current.value!==t&&(s.current.previous=s.current.value,s.current.value=t),s.current.previous),[t])}var _q=[" ","Enter","ArrowUp","ArrowDown"],Rq=[" ","Enter"],Pm="Select",[$p,Bp,Oq]=xm(Pm),[Ad,qJ]=Yn(Pm,[Oq,so]),Up=so(),[Dq,no]=Ad(Pm),[Iq,Lq]=Ad(Pm),aP=t=>{const{__scopeSelect:s,children:n,open:a,defaultOpen:r,onOpenChange:i,value:l,defaultValue:c,onValueChange:o,dir:d,name:h,autoComplete:u,disabled:m,required:p,form:g}=t,x=Up(s),[v,y]=N.useState(null),[f,b]=N.useState(null),[j,S]=N.useState(!1),k=kd(d),[T=!1,A]=br({prop:a,defaultProp:r,onChange:i}),[C,w]=br({prop:l,defaultProp:c,onChange:o}),P=N.useRef(null),M=v?g||!!v.closest("form"):!0,[I,W]=N.useState(new Set),_=Array.from(I).map(B=>B.props.value).join(";");return e.jsx(gp,{...x,children:e.jsxs(Dq,{required:p,scope:s,trigger:v,onTriggerChange:y,valueNode:f,onValueNodeChange:b,valueNodeHasChildren:j,onValueNodeHasChildrenChange:S,contentId:jr(),value:C,onValueChange:w,open:T,onOpenChange:A,dir:k,triggerPointerDownPosRef:P,disabled:m,children:[e.jsx($p.Provider,{scope:s,children:e.jsx(Iq,{scope:t.__scopeSelect,onNativeOptionAdd:N.useCallback(B=>{W(O=>new Set(O).add(B))},[]),onNativeOptionRemove:N.useCallback(B=>{W(O=>{const z=new Set(O);return z.delete(B),z})},[]),children:n})}),M?e.jsxs(TP,{"aria-hidden":!0,required:p,tabIndex:-1,name:h,autoComplete:u,value:C,onChange:B=>w(B.target.value),disabled:m,form:g,children:[C===void 0?e.jsx("option",{value:""}):null,Array.from(I)]},_):null]})})};aP.displayName=Pm;var rP="SelectTrigger",iP=N.forwardRef((t,s)=>{const{__scopeSelect:n,disabled:a=!1,...r}=t,i=Up(n),l=no(rP,n),c=l.disabled||a,o=Ht(s,l.onTriggerChange),d=Bp(n),h=N.useRef("touch"),[u,m,p]=EP(x=>{const v=d().filter(b=>!b.disabled),y=v.find(b=>b.value===l.value),f=MP(v,x,y);f!==void 0&&l.onValueChange(f.value)}),g=x=>{c||(l.onOpenChange(!0),p()),x&&(l.triggerPointerDownPosRef.current={x:Math.round(x.pageX),y:Math.round(x.pageY)})};return e.jsx(vm,{asChild:!0,...i,children:e.jsx(Dt.button,{type:"button",role:"combobox","aria-controls":l.contentId,"aria-expanded":l.open,"aria-required":l.required,"aria-autocomplete":"none",dir:l.dir,"data-state":l.open?"open":"closed",disabled:c,"data-disabled":c?"":void 0,"data-placeholder":PP(l.value)?"":void 0,...r,ref:o,onClick:tt(r.onClick,x=>{x.currentTarget.focus(),h.current!=="mouse"&&g(x)}),onPointerDown:tt(r.onPointerDown,x=>{h.current=x.pointerType;const v=x.target;v.hasPointerCapture(x.pointerId)&&v.releasePointerCapture(x.pointerId),x.button===0&&x.ctrlKey===!1&&x.pointerType==="mouse"&&(g(x),x.preventDefault())}),onKeyDown:tt(r.onKeyDown,x=>{const v=u.current!=="";!(x.ctrlKey||x.altKey||x.metaKey)&&x.key.length===1&&m(x.key),!(v&&x.key===" ")&&_q.includes(x.key)&&(g(),x.preventDefault())})})})});iP.displayName=rP;var lP="SelectValue",oP=N.forwardRef((t,s)=>{const{__scopeSelect:n,className:a,style:r,children:i,placeholder:l="",...c}=t,o=no(lP,n),{onValueNodeHasChildrenChange:d}=o,h=i!==void 0,u=Ht(s,o.onValueNodeChange);return Nn(()=>{d(h)},[d,h]),e.jsx(Dt.span,{...c,ref:u,style:{pointerEvents:"none"},children:PP(o.value)?e.jsx(e.Fragment,{children:l}):i})});oP.displayName=lP;var Fq="SelectIcon",cP=N.forwardRef((t,s)=>{const{__scopeSelect:n,children:a,...r}=t;return e.jsx(Dt.span,{"aria-hidden":!0,...r,ref:s,children:a||""})});cP.displayName=Fq;var qq="SelectPortal",dP=t=>e.jsx(bd,{asChild:!0,...t});dP.displayName=qq;var Go="SelectContent",uP=N.forwardRef((t,s)=>{const n=no(Go,t.__scopeSelect),[a,r]=N.useState();if(Nn(()=>{r(new DocumentFragment)},[]),!n.open){const i=a;return i?eo.createPortal(e.jsx(mP,{scope:t.__scopeSelect,children:e.jsx($p.Slot,{scope:t.__scopeSelect,children:e.jsx("div",{children:t.children})})}),i):null}return e.jsx(hP,{...t,ref:s})});uP.displayName=Go;var Pr=10,[mP,ao]=Ad(Go),$q="SelectContentImpl",Bq=$l("SelectContent.RemoveScroll"),hP=N.forwardRef((t,s)=>{const{__scopeSelect:n,position:a="item-aligned",onCloseAutoFocus:r,onEscapeKeyDown:i,onPointerDownOutside:l,side:c,sideOffset:o,align:d,alignOffset:h,arrowPadding:u,collisionBoundary:m,collisionPadding:p,sticky:g,hideWhenDetached:x,avoidCollisions:v,...y}=t,f=no(Go,n),[b,j]=N.useState(null),[S,k]=N.useState(null),T=Ht(s,le=>j(le)),[A,C]=N.useState(null),[w,P]=N.useState(null),M=Bp(n),[I,W]=N.useState(!1),_=N.useRef(!1);N.useEffect(()=>{if(b)return kp(b)},[b]),Sp();const B=N.useCallback(le=>{const[ne,...ue]=M().map(Ge=>Ge.ref.current),[te]=ue.slice(-1),Ae=document.activeElement;for(const Ge of le)if(Ge===Ae||(Ge==null||Ge.scrollIntoView({block:"nearest"}),Ge===ne&&S&&(S.scrollTop=0),Ge===te&&S&&(S.scrollTop=S.scrollHeight),Ge==null||Ge.focus(),document.activeElement!==Ae))return},[M,S]),O=N.useCallback(()=>B([A,b]),[B,A,b]);N.useEffect(()=>{I&&O()},[I,O]);const{onOpenChange:z,triggerPointerDownPosRef:F}=f;N.useEffect(()=>{if(b){let le={x:0,y:0};const ne=te=>{var Ae,Ge;le={x:Math.abs(Math.round(te.pageX)-(((Ae=F.current)==null?void 0:Ae.x)??0)),y:Math.abs(Math.round(te.pageY)-(((Ge=F.current)==null?void 0:Ge.y)??0))}},ue=te=>{le.x<=10&&le.y<=10?te.preventDefault():b.contains(te.target)||z(!1),document.removeEventListener("pointermove",ne),F.current=null};return F.current!==null&&(document.addEventListener("pointermove",ne),document.addEventListener("pointerup",ue,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",ne),document.removeEventListener("pointerup",ue,{capture:!0})}}},[b,z,F]),N.useEffect(()=>{const le=()=>z(!1);return window.addEventListener("blur",le),window.addEventListener("resize",le),()=>{window.removeEventListener("blur",le),window.removeEventListener("resize",le)}},[z]);const[K,D]=EP(le=>{const ne=M().filter(Ae=>!Ae.disabled),ue=ne.find(Ae=>Ae.ref.current===document.activeElement),te=MP(ne,le,ue);te&&setTimeout(()=>te.ref.current.focus())}),G=N.useCallback((le,ne,ue)=>{const te=!_.current&&!ue;(f.value!==void 0&&f.value===ne||te)&&(C(le),te&&(_.current=!0))},[f.value]),H=N.useCallback(()=>b==null?void 0:b.focus(),[b]),V=N.useCallback((le,ne,ue)=>{const te=!_.current&&!ue;(f.value!==void 0&&f.value===ne||te)&&P(le)},[f.value]),se=a==="popper"?sv:xP,Z=se===sv?{side:c,sideOffset:o,align:d,alignOffset:h,arrowPadding:u,collisionBoundary:m,collisionPadding:p,sticky:g,hideWhenDetached:x,avoidCollisions:v}:{};return e.jsx(mP,{scope:n,content:b,viewport:S,onViewportChange:k,itemRefCallback:G,selectedItem:A,onItemLeave:H,itemTextRefCallback:V,focusSelectedItem:O,selectedItemText:w,position:a,isPositioned:I,searchRef:K,children:e.jsx(Nm,{as:Bq,allowPinchZoom:!0,children:e.jsx(ym,{asChild:!0,trapped:f.open,onMountAutoFocus:le=>{le.preventDefault()},onUnmountAutoFocus:tt(r,le=>{var ne;(ne=f.trigger)==null||ne.focus({preventScroll:!0}),le.preventDefault()}),children:e.jsx(Qo,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:i,onPointerDownOutside:l,onFocusOutside:le=>le.preventDefault(),onDismiss:()=>f.onOpenChange(!1),children:e.jsx(se,{role:"listbox",id:f.contentId,"data-state":f.open?"open":"closed",dir:f.dir,onContextMenu:le=>le.preventDefault(),...y,...Z,onPlaced:()=>W(!0),ref:T,style:{display:"flex",flexDirection:"column",outline:"none",...y.style},onKeyDown:tt(y.onKeyDown,le=>{const ne=le.ctrlKey||le.altKey||le.metaKey;if(le.key==="Tab"&&le.preventDefault(),!ne&&le.key.length===1&&D(le.key),["ArrowUp","ArrowDown","Home","End"].includes(le.key)){let te=M().filter(Ae=>!Ae.disabled).map(Ae=>Ae.ref.current);if(["ArrowUp","End"].includes(le.key)&&(te=te.slice().reverse()),["ArrowUp","ArrowDown"].includes(le.key)){const Ae=le.target,Ge=te.indexOf(Ae);te=te.slice(Ge+1)}setTimeout(()=>B(te)),le.preventDefault()}})})})})})})});hP.displayName=$q;var Uq="SelectItemAlignedPosition",xP=N.forwardRef((t,s)=>{const{__scopeSelect:n,onPlaced:a,...r}=t,i=no(Go,n),l=ao(Go,n),[c,o]=N.useState(null),[d,h]=N.useState(null),u=Ht(s,T=>h(T)),m=Bp(n),p=N.useRef(!1),g=N.useRef(!0),{viewport:x,selectedItem:v,selectedItemText:y,focusSelectedItem:f}=l,b=N.useCallback(()=>{if(i.trigger&&i.valueNode&&c&&d&&x&&v&&y){const T=i.trigger.getBoundingClientRect(),A=d.getBoundingClientRect(),C=i.valueNode.getBoundingClientRect(),w=y.getBoundingClientRect();if(i.dir!=="rtl"){const Ae=w.left-A.left,Ge=C.left-Ae,be=T.left-Ge,Ie=T.width+be,ve=Math.max(Ie,A.width),ie=window.innerWidth-Pr,de=nm(Ge,[Pr,Math.max(Pr,ie-ve)]);c.style.minWidth=Ie+"px",c.style.left=de+"px"}else{const Ae=A.right-w.right,Ge=window.innerWidth-C.right-Ae,be=window.innerWidth-T.right-Ge,Ie=T.width+be,ve=Math.max(Ie,A.width),ie=window.innerWidth-Pr,de=nm(Ge,[Pr,Math.max(Pr,ie-ve)]);c.style.minWidth=Ie+"px",c.style.right=de+"px"}const P=m(),M=window.innerHeight-Pr*2,I=x.scrollHeight,W=window.getComputedStyle(d),_=parseInt(W.borderTopWidth,10),B=parseInt(W.paddingTop,10),O=parseInt(W.borderBottomWidth,10),z=parseInt(W.paddingBottom,10),F=_+B+I+z+O,K=Math.min(v.offsetHeight*5,F),D=window.getComputedStyle(x),G=parseInt(D.paddingTop,10),H=parseInt(D.paddingBottom,10),V=T.top+T.height/2-Pr,se=M-V,Z=v.offsetHeight/2,le=v.offsetTop+Z,ne=_+B+le,ue=F-ne;if(ne<=V){const Ae=P.length>0&&v===P[P.length-1].ref.current;c.style.bottom="0px";const Ge=d.clientHeight-x.offsetTop-x.offsetHeight,be=Math.max(se,Z+(Ae?H:0)+Ge+O),Ie=ne+be;c.style.height=Ie+"px"}else{const Ae=P.length>0&&v===P[0].ref.current;c.style.top="0px";const be=Math.max(V,_+x.offsetTop+(Ae?G:0)+Z)+ue;c.style.height=be+"px",x.scrollTop=ne-V+x.offsetTop}c.style.margin=`${Pr}px 0`,c.style.minHeight=K+"px",c.style.maxHeight=M+"px",a==null||a(),requestAnimationFrame(()=>p.current=!0)}},[m,i.trigger,i.valueNode,c,d,x,v,y,i.dir,a]);Nn(()=>b(),[b]);const[j,S]=N.useState();Nn(()=>{d&&S(window.getComputedStyle(d).zIndex)},[d]);const k=N.useCallback(T=>{T&&g.current===!0&&(b(),f==null||f(),g.current=!1)},[b,f]);return e.jsx(Vq,{scope:n,contentWrapper:c,shouldExpandOnScrollRef:p,onScrollButtonChange:k,children:e.jsx("div",{ref:o,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:j},children:e.jsx(Dt.div,{...r,ref:u,style:{boxSizing:"border-box",maxHeight:"100%",...r.style}})})})});xP.displayName=Uq;var zq="SelectPopperPosition",sv=N.forwardRef((t,s)=>{const{__scopeSelect:n,align:a="start",collisionPadding:r=Pr,...i}=t,l=Up(n);return e.jsx(jp,{...l,...i,ref:s,align:a,collisionPadding:r,style:{boxSizing:"border-box",...i.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});sv.displayName=zq;var[Vq,v0]=Ad(Go,{}),nv="SelectViewport",pP=N.forwardRef((t,s)=>{const{__scopeSelect:n,nonce:a,...r}=t,i=ao(nv,n),l=v0(nv,n),c=Ht(s,i.onViewportChange),o=N.useRef(0);return e.jsxs(e.Fragment,{children:[e.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:a}),e.jsx($p.Slot,{scope:n,children:e.jsx(Dt.div,{"data-radix-select-viewport":"",role:"presentation",...r,ref:c,style:{position:"relative",flex:1,overflow:"hidden auto",...r.style},onScroll:tt(r.onScroll,d=>{const h=d.currentTarget,{contentWrapper:u,shouldExpandOnScrollRef:m}=l;if(m!=null&&m.current&&u){const p=Math.abs(o.current-h.scrollTop);if(p>0){const g=window.innerHeight-Pr*2,x=parseFloat(u.style.minHeight),v=parseFloat(u.style.height),y=Math.max(x,v);if(y<g){const f=y+p,b=Math.min(g,f),j=f-b;u.style.height=b+"px",u.style.bottom==="0px"&&(h.scrollTop=j>0?j:0,u.style.justifyContent="flex-end")}}}o.current=h.scrollTop})})})]})});pP.displayName=nv;var fP="SelectGroup",[Gq,Wq]=Ad(fP),Hq=N.forwardRef((t,s)=>{const{__scopeSelect:n,...a}=t,r=jr();return e.jsx(Gq,{scope:n,id:r,children:e.jsx(Dt.div,{role:"group","aria-labelledby":r,...a,ref:s})})});Hq.displayName=fP;var gP="SelectLabel",jP=N.forwardRef((t,s)=>{const{__scopeSelect:n,...a}=t,r=Wq(gP,n);return e.jsx(Dt.div,{id:r.id,...a,ref:s})});jP.displayName=gP;var Rx="SelectItem",[Kq,vP]=Ad(Rx),yP=N.forwardRef((t,s)=>{const{__scopeSelect:n,value:a,disabled:r=!1,textValue:i,...l}=t,c=no(Rx,n),o=ao(Rx,n),d=c.value===a,[h,u]=N.useState(i??""),[m,p]=N.useState(!1),g=Ht(s,f=>{var b;return(b=o.itemRefCallback)==null?void 0:b.call(o,f,a,r)}),x=jr(),v=N.useRef("touch"),y=()=>{r||(c.onValueChange(a),c.onOpenChange(!1))};if(a==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return e.jsx(Kq,{scope:n,value:a,disabled:r,textId:x,isSelected:d,onItemTextChange:N.useCallback(f=>{u(b=>b||((f==null?void 0:f.textContent)??"").trim())},[]),children:e.jsx($p.ItemSlot,{scope:n,value:a,disabled:r,textValue:h,children:e.jsx(Dt.div,{role:"option","aria-labelledby":x,"data-highlighted":m?"":void 0,"aria-selected":d&&m,"data-state":d?"checked":"unchecked","aria-disabled":r||void 0,"data-disabled":r?"":void 0,tabIndex:r?void 0:-1,...l,ref:g,onFocus:tt(l.onFocus,()=>p(!0)),onBlur:tt(l.onBlur,()=>p(!1)),onClick:tt(l.onClick,()=>{v.current!=="mouse"&&y()}),onPointerUp:tt(l.onPointerUp,()=>{v.current==="mouse"&&y()}),onPointerDown:tt(l.onPointerDown,f=>{v.current=f.pointerType}),onPointerMove:tt(l.onPointerMove,f=>{var b;v.current=f.pointerType,r?(b=o.onItemLeave)==null||b.call(o):v.current==="mouse"&&f.currentTarget.focus({preventScroll:!0})}),onPointerLeave:tt(l.onPointerLeave,f=>{var b;f.currentTarget===document.activeElement&&((b=o.onItemLeave)==null||b.call(o))}),onKeyDown:tt(l.onKeyDown,f=>{var j;((j=o.searchRef)==null?void 0:j.current)!==""&&f.key===" "||(Rq.includes(f.key)&&y(),f.key===" "&&f.preventDefault())})})})})});yP.displayName=Rx;var lu="SelectItemText",NP=N.forwardRef((t,s)=>{const{__scopeSelect:n,className:a,style:r,...i}=t,l=no(lu,n),c=ao(lu,n),o=vP(lu,n),d=Lq(lu,n),[h,u]=N.useState(null),m=Ht(s,y=>u(y),o.onItemTextChange,y=>{var f;return(f=c.itemTextRefCallback)==null?void 0:f.call(c,y,o.value,o.disabled)}),p=h==null?void 0:h.textContent,g=N.useMemo(()=>e.jsx("option",{value:o.value,disabled:o.disabled,children:p},o.value),[o.disabled,o.value,p]),{onNativeOptionAdd:x,onNativeOptionRemove:v}=d;return Nn(()=>(x(g),()=>v(g)),[x,v,g]),e.jsxs(e.Fragment,{children:[e.jsx(Dt.span,{id:o.textId,...i,ref:m}),o.isSelected&&l.valueNode&&!l.valueNodeHasChildren?eo.createPortal(i.children,l.valueNode):null]})});NP.displayName=lu;var bP="SelectItemIndicator",wP=N.forwardRef((t,s)=>{const{__scopeSelect:n,...a}=t;return vP(bP,n).isSelected?e.jsx(Dt.span,{"aria-hidden":!0,...a,ref:s}):null});wP.displayName=bP;var av="SelectScrollUpButton",SP=N.forwardRef((t,s)=>{const n=ao(av,t.__scopeSelect),a=v0(av,t.__scopeSelect),[r,i]=N.useState(!1),l=Ht(s,a.onScrollButtonChange);return Nn(()=>{if(n.viewport&&n.isPositioned){let c=function(){const d=o.scrollTop>0;i(d)};const o=n.viewport;return c(),o.addEventListener("scroll",c),()=>o.removeEventListener("scroll",c)}},[n.viewport,n.isPositioned]),r?e.jsx(kP,{...t,ref:l,onAutoScroll:()=>{const{viewport:c,selectedItem:o}=n;c&&o&&(c.scrollTop=c.scrollTop-o.offsetHeight)}}):null});SP.displayName=av;var rv="SelectScrollDownButton",CP=N.forwardRef((t,s)=>{const n=ao(rv,t.__scopeSelect),a=v0(rv,t.__scopeSelect),[r,i]=N.useState(!1),l=Ht(s,a.onScrollButtonChange);return Nn(()=>{if(n.viewport&&n.isPositioned){let c=function(){const d=o.scrollHeight-o.clientHeight,h=Math.ceil(o.scrollTop)<d;i(h)};const o=n.viewport;return c(),o.addEventListener("scroll",c),()=>o.removeEventListener("scroll",c)}},[n.viewport,n.isPositioned]),r?e.jsx(kP,{...t,ref:l,onAutoScroll:()=>{const{viewport:c,selectedItem:o}=n;c&&o&&(c.scrollTop=c.scrollTop+o.offsetHeight)}}):null});CP.displayName=rv;var kP=N.forwardRef((t,s)=>{const{__scopeSelect:n,onAutoScroll:a,...r}=t,i=ao("SelectScrollButton",n),l=N.useRef(null),c=Bp(n),o=N.useCallback(()=>{l.current!==null&&(window.clearInterval(l.current),l.current=null)},[]);return N.useEffect(()=>()=>o(),[o]),Nn(()=>{var h;const d=c().find(u=>u.ref.current===document.activeElement);(h=d==null?void 0:d.ref.current)==null||h.scrollIntoView({block:"nearest"})},[c]),e.jsx(Dt.div,{"aria-hidden":!0,...r,ref:s,style:{flexShrink:0,...r.style},onPointerDown:tt(r.onPointerDown,()=>{l.current===null&&(l.current=window.setInterval(a,50))}),onPointerMove:tt(r.onPointerMove,()=>{var d;(d=i.onItemLeave)==null||d.call(i),l.current===null&&(l.current=window.setInterval(a,50))}),onPointerLeave:tt(r.onPointerLeave,()=>{o()})})}),Yq="SelectSeparator",AP=N.forwardRef((t,s)=>{const{__scopeSelect:n,...a}=t;return e.jsx(Dt.div,{"aria-hidden":!0,...a,ref:s})});AP.displayName=Yq;var iv="SelectArrow",Qq=N.forwardRef((t,s)=>{const{__scopeSelect:n,...a}=t,r=Up(n),i=no(iv,n),l=ao(iv,n);return i.open&&l.position==="popper"?e.jsx(vp,{...r,...a,ref:s}):null});Qq.displayName=iv;function PP(t){return t===""||t===void 0}var TP=N.forwardRef((t,s)=>{const{value:n,...a}=t,r=N.useRef(null),i=Ht(s,r),l=qp(n);return N.useEffect(()=>{const c=r.current,o=window.HTMLSelectElement.prototype,h=Object.getOwnPropertyDescriptor(o,"value").set;if(l!==n&&h){const u=new Event("change",{bubbles:!0});h.call(c,n),c.dispatchEvent(u)}},[l,n]),e.jsx(pm,{asChild:!0,children:e.jsx("select",{...a,ref:i,defaultValue:n})})});TP.displayName="BubbleSelect";function EP(t){const s=sn(t),n=N.useRef(""),a=N.useRef(0),r=N.useCallback(l=>{const c=n.current+l;s(c),function o(d){n.current=d,window.clearTimeout(a.current),d!==""&&(a.current=window.setTimeout(()=>o(""),1e3))}(c)},[s]),i=N.useCallback(()=>{n.current="",window.clearTimeout(a.current)},[]);return N.useEffect(()=>()=>window.clearTimeout(a.current),[]),[n,r,i]}function MP(t,s,n){const r=s.length>1&&Array.from(s).every(d=>d===s[0])?s[0]:s,i=n?t.indexOf(n):-1;let l=Zq(t,Math.max(i,0));r.length===1&&(l=l.filter(d=>d!==n));const o=l.find(d=>d.textValue.toLowerCase().startsWith(r.toLowerCase()));return o!==n?o:void 0}function Zq(t,s){return t.map((n,a)=>t[(s+a)%t.length])}var Xq=aP,_P=iP,Jq=oP,e$=cP,t$=dP,RP=uP,s$=pP,OP=jP,DP=yP,n$=NP,a$=wP,IP=SP,LP=CP,FP=AP;const Re=Xq,Oe=Jq,Me=N.forwardRef(({className:t,children:s,...n},a)=>e.jsxs(_P,{ref:a,className:Je("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background data-[placeholder]:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",t),...n,children:[s,e.jsx(e$,{asChild:!0,children:e.jsx(My,{className:"h-4 w-4 opacity-50"})})]}));Me.displayName=_P.displayName;const qP=N.forwardRef(({className:t,...s},n)=>e.jsx(IP,{ref:n,className:Je("flex cursor-default items-center justify-center py-1",t),...s,children:e.jsx(n4,{className:"h-4 w-4"})}));qP.displayName=IP.displayName;const $P=N.forwardRef(({className:t,...s},n)=>e.jsx(LP,{ref:n,className:Je("flex cursor-default items-center justify-center py-1",t),...s,children:e.jsx(My,{className:"h-4 w-4"})}));$P.displayName=LP.displayName;const _e=N.forwardRef(({className:t,children:s,position:n="popper",...a},r)=>e.jsx(t$,{children:e.jsxs(RP,{ref:r,className:Je("relative z-50 max-h-[--radix-select-content-available-height] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-select-content-transform-origin]",n==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",t),position:n,...a,children:[e.jsx(qP,{}),e.jsx(s$,{className:Je("p-1",n==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:s}),e.jsx($P,{})]})}));_e.displayName=RP.displayName;const r$=N.forwardRef(({className:t,...s},n)=>e.jsx(OP,{ref:n,className:Je("py-1.5 pl-8 pr-2 text-sm font-semibold",t),...s}));r$.displayName=OP.displayName;const U=N.forwardRef(({className:t,children:s,...n},a)=>e.jsxs(DP,{ref:a,className:Je("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...n,children:[e.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:e.jsx(a$,{children:e.jsx(ir,{className:"h-4 w-4"})})}),e.jsx(n$,{children:s})]}));U.displayName=DP.displayName;const i$=N.forwardRef(({className:t,...s},n)=>e.jsx(FP,{ref:n,className:Je("-mx-1 my-1 h-px bg-muted",t),...s}));i$.displayName=FP.displayName;function l$(t){const s=o$(t),n=N.forwardRef((a,r)=>{const{children:i,...l}=a,c=N.Children.toArray(i),o=c.find(d$);if(o){const d=o.props.children,h=c.map(u=>u===o?N.Children.count(d)>1?N.Children.only(null):N.isValidElement(d)?d.props.children:null:u);return e.jsx(s,{...l,ref:r,children:N.isValidElement(d)?N.cloneElement(d,void 0,h):null})}return e.jsx(s,{...l,ref:r,children:i})});return n.displayName=`${t}.Slot`,n}function o$(t){const s=N.forwardRef((n,a)=>{const{children:r,...i}=n;if(N.isValidElement(r)){const l=m$(r),c=u$(i,r.props);return r.type!==N.Fragment&&(c.ref=a?Yo(a,l):l),N.cloneElement(r,c)}return N.Children.count(r)>1?N.Children.only(null):null});return s.displayName=`${t}.SlotClone`,s}var c$=Symbol("radix.slottable");function d$(t){return N.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===c$}function u$(t,s){const n={...s};for(const a in s){const r=t[a],i=s[a];/^on[A-Z]/.test(a)?r&&i?n[a]=(...c)=>{const o=i(...c);return r(...c),o}:r&&(n[a]=r):a==="style"?n[a]={...r,...i}:a==="className"&&(n[a]=[r,i].filter(Boolean).join(" "))}return{...t,...n}}function m$(t){var a,r;let s=(a=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:a.get,n=s&&"isReactWarning"in s&&s.isReactWarning;return n?t.ref:(s=(r=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:r.get,n=s&&"isReactWarning"in s&&s.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}var h$=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],x$=h$.reduce((t,s)=>{const n=l$(`Primitive.${s}`),a=N.forwardRef((r,i)=>{const{asChild:l,...c}=r,o=l?n:s;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),e.jsx(o,{...c,ref:i})});return a.displayName=`Primitive.${s}`,{...t,[s]:a}},{}),p$="Separator",Cw="horizontal",f$=["horizontal","vertical"],BP=N.forwardRef((t,s)=>{const{decorative:n,orientation:a=Cw,...r}=t,i=g$(a)?a:Cw,c=n?{role:"none"}:{"aria-orientation":i==="vertical"?i:void 0,role:"separator"};return e.jsx(x$.div,{"data-orientation":i,...c,...r,ref:s})});BP.displayName=p$;function g$(t){return f$.includes(t)}var UP=BP;const ss=N.forwardRef(({className:t,orientation:s="horizontal",decorative:n=!0,...a},r)=>e.jsx(UP,{ref:r,decorative:n,orientation:s,className:Je("shrink-0 bg-border",s==="horizontal"?"h-[1px] w-full":"h-full w-[1px]",t),...a}));ss.displayName=UP.displayName;const j$=pe.object({requestedRoleType:pe.enum(["managed_artist","managed_musician","managed_professional","artist","musician","professional"],{required_error:"Please select a role type"}),requestedManagementTierId:pe.number().optional(),applicationReason:pe.string().min(50,"Please provide at least 50 characters explaining why you want this role"),businessPlan:pe.string().optional(),expectedRevenue:pe.string().optional(),portfolioLinks:pe.string().optional(),socialMediaMetrics:pe.string().optional()});function v$({children:t,onSuccess:s}){const[n,a]=N.useState(!1),[r,i]=N.useState(!1),{toast:l}=nt(),c=Cn({resolver:kn(j$),defaultValues:{applicationReason:"",businessPlan:"",expectedRevenue:"",portfolioLinks:"",socialMediaMetrics:""}}),o=[{value:"managed_artist",label:"Managed Artist",description:"Professional artist with management support"},{value:"managed_musician",label:"Managed Musician",description:"Session musician with management benefits"},{value:"managed_professional",label:"Managed Professional",description:"Professional service provider with management"},{value:"artist",label:"Artist",description:"Independent artist"},{value:"musician",label:"Musician",description:"Independent session musician"},{value:"professional",label:"Professional",description:"Independent service professional"}],d={artist:[{id:1,name:"Publisher",description:"Up to 10% discounts, publishing only"},{id:2,name:"Representation",description:"Up to 50% discounts, business handling"},{id:3,name:"Full Management",description:"Up to 100% discounts, complete career responsibility"}],musician:[{id:1,name:"Publisher",description:"Up to 10% discounts, publishing only"},{id:2,name:"Representation",description:"Up to 50% discounts, business handling"},{id:3,name:"Full Management",description:"Up to 100% discounts, complete career responsibility"}],professional:[{id:2,name:"Representation",description:"Up to 50% discounts, business handling"},{id:3,name:"Full Management",description:"Up to 100% discounts, complete career responsibility"}]},h=c.watch("requestedRoleType"),u=h==null?void 0:h.startsWith("managed_"),m=u?h.replace("managed_",""):null,p=async x=>{i(!0);try{await $n("/api/management-applications",{method:"POST",body:JSON.stringify(x)}),l({title:"Application submitted successfully",description:"Your management application has been submitted for review."}),c.reset(),a(!1),s==null||s()}catch(v){console.error("Error submitting application:",v),l({title:"Error",description:"Failed to submit application. Please try again.",variant:"destructive"})}finally{i(!1)}},g=x=>{r||(a(x),x||c.reset())};return e.jsxs(kt,{open:n,onOpenChange:g,children:[e.jsx(ma,{asChild:!0,children:t}),e.jsxs(wt,{className:"max-w-4xl max-h-[90vh] overflow-y-auto",children:[e.jsxs(St,{children:[e.jsx(Ct,{className:"text-2xl font-bold bg-gradient-to-r from-purple-600 to-pink-600 bg-clip-text text-transparent",children:"Apply for Role Change"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Change your role or apply for managed status with exclusive benefits and professional support."})]}),e.jsx(On,{...c,children:e.jsxs("form",{onSubmit:c.handleSubmit(p),className:"space-y-6",children:[e.jsx($e,{control:c.control,name:"requestedRoleType",render:({field:x})=>e.jsxs(Fe,{children:[e.jsx(qe,{className:"text-lg font-semibold",children:"Select Role Type"}),e.jsxs(Re,{onValueChange:x.onChange,children:[e.jsx(Le,{children:e.jsx(Me,{children:e.jsx(Oe,{placeholder:"Choose the role you want to apply for"})})}),e.jsx(_e,{children:o.map(v=>e.jsx(U,{value:v.value,children:e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"font-medium",children:v.label}),e.jsx("span",{className:"text-xs text-muted-foreground",children:v.description})]})},v.value))})]}),e.jsx(ze,{})]})}),u&&m&&e.jsx($e,{control:c.control,name:"requestedManagementTierId",render:({field:x})=>{var v;return e.jsxs(Fe,{children:[e.jsx(qe,{className:"text-lg font-semibold",children:"Select Management Tier"}),e.jsxs(Re,{onValueChange:y=>x.onChange(parseInt(y)),children:[e.jsx(Le,{children:e.jsx(Me,{children:e.jsx(Oe,{placeholder:"Choose your preferred management tier"})})}),e.jsx(_e,{children:(v=d[m])==null?void 0:v.map(y=>e.jsx(U,{value:y.id.toString(),children:e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"font-medium",children:y.name}),e.jsx("span",{className:"text-xs text-muted-foreground",children:y.description})]})},y.id))})]}),e.jsx(ze,{})]})}}),e.jsx(ss,{}),e.jsx($e,{control:c.control,name:"applicationReason",render:({field:x})=>e.jsxs(Fe,{children:[e.jsx(qe,{className:"text-lg font-semibold",children:"Application Reason"}),e.jsx(Le,{children:e.jsx(mt,{placeholder:"Tell us why you want this role and how it fits your goals...",className:"min-h-[100px]",...x})}),e.jsx(ze,{})]})}),e.jsx($e,{control:c.control,name:"businessPlan",render:({field:x})=>e.jsxs(Fe,{children:[e.jsx(qe,{children:"Business Plan & Career Strategy (Optional)"}),e.jsx(Le,{children:e.jsx(mt,{placeholder:"Describe your business plan and career strategy...",className:"min-h-[80px]",...x})}),e.jsx(ze,{})]})}),e.jsx($e,{control:c.control,name:"expectedRevenue",render:({field:x})=>e.jsxs(Fe,{children:[e.jsx(qe,{children:"Expected Annual Revenue (USD) (Optional)"}),e.jsx(Le,{children:e.jsx($,{type:"number",placeholder:"e.g., 50000",...x})}),e.jsx(ze,{})]})}),e.jsx($e,{control:c.control,name:"portfolioLinks",render:({field:x})=>e.jsxs(Fe,{children:[e.jsx(qe,{children:"Portfolio/Website Links (Optional)"}),e.jsx(Le,{children:e.jsx(mt,{placeholder:"Share links to your portfolio, website, or relevant work...",className:"min-h-[60px]",...x})}),e.jsx(ze,{})]})}),e.jsx($e,{control:c.control,name:"socialMediaMetrics",render:({field:x})=>e.jsxs(Fe,{children:[e.jsx(qe,{children:"Social Media Metrics (Optional)"}),e.jsx(Le,{children:e.jsx(mt,{placeholder:"Share your social media following and engagement metrics...",className:"min-h-[60px]",...x})}),e.jsx(ze,{})]})}),e.jsxs("div",{className:"border rounded-lg p-4 bg-blue-50 dark:bg-blue-950/20",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(Qt,{className:"w-5 h-5 text-blue-500"}),e.jsx("h3",{className:"font-semibold text-blue-700 dark:text-blue-300",children:"Application Process"})]}),e.jsxs("ol",{className:"list-decimal list-inside space-y-1 text-sm text-blue-600 dark:text-blue-400",children:[e.jsx("li",{children:"Submit your application with all required information"}),e.jsx("li",{children:"Our team will review your application (typically 3-5 business days)"}),e.jsx("li",{children:"If approved, you'll receive a management contract for signing"}),e.jsx("li",{children:"Welcome to the WaituMusic family!"})]})]}),e.jsxs("div",{className:"flex justify-end gap-4",children:[e.jsx(E,{type:"button",variant:"outline",onClick:()=>a(!1),disabled:r,children:"Cancel"}),e.jsx(E,{type:"submit",disabled:r,children:r?"Submitting...":"Submit Application"})]})]})})]})]})}function y$(){const[t]=As(),[s,n]=N.useState(!1),[a,r]=N.useState(!0),{user:i,role:l,logout:c}=_s(),{getTotalItems:o}=Zo(),d=o(),h={C4:261.63,"C#4":277.18,D4:293.66,"D#4":311.13,E4:329.63,F4:349.23,"F#4":369.99,G4:392,"G#4":415.3,A4:440,"A#4":466.16,B4:493.88,C5:523.25,"C#5":554.37,D5:587.33,"D#5":622.25,E5:659.25,F5:698.46,"F#5":739.99,G5:783.99,"G#5":830.61,A5:880,"A#5":932.33},[u,m]=N.useState(null),[p,g]=N.useState(!1),x=N.useCallback(async()=>{try{if(!u){const b=new(window.AudioContext||window.webkitAudioContext);m(b),g(!0)}}catch{}},[u]),v=N.useCallback(async b=>{if(a)try{if(!u){await x();return}u.state==="suspended"&&await u.resume();const j=u.createOscillator(),S=u.createGain();j.connect(S),S.connect(u.destination),j.frequency.value=h[b],j.type="sine";const k=u.currentTime;S.gain.setValueAtTime(0,k),S.gain.linearRampToValueAtTime(.3,k+.01),S.gain.exponentialRampToValueAtTime(.01,k+.6),j.start(k),j.stop(k+.6)}catch{m(null),g(!1)}},[a,u,x]),y=b=>t===b,f=[{href:"/",label:"Home"},{href:"/artists",label:"Artists"},{href:"/store",label:"Store"},{href:"/opphub",label:"OppHub"},{href:"/booking",label:"Bookings"},{href:"/services",label:"Services"},{href:"/consultation",label:"Consultation"},{href:"/about",label:"About"},{href:"/contact",label:"Contact"}];return e.jsxs("nav",{className:"nav-musical sticky top-0 z-50",children:[e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"flex justify-between items-center h-16",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(Lt,{href:"/",children:e.jsx(E,{variant:"ghost",className:"text-lg font-bold text-primary hover:text-primary/80 px-2",children:e.jsx(ZF,{size:"md",showText:!0,className:"mr-1"})})}),e.jsx("div",{className:"hidden md:block ml-10",children:e.jsx("div",{className:"flex items-baseline space-x-4",children:f.map(b=>e.jsx(Lt,{href:b.href,className:`px-3 py-2 rounded-md text-sm font-medium transition-all duration-300 hover:scale-105 ${y(b.href)?"text-white bg-gradient-to-r from-blue-500 to-purple-600 shadow-lg animate-pulse-slow":"text-gray-700 hover:text-transparent hover:bg-gradient-to-r hover:from-orange-500 hover:to-red-600 hover:bg-clip-text hover:font-bold"}`,children:b.label},b.href))})})]}),e.jsxs("div",{className:"hidden md:flex items-center space-x-4",children:[e.jsx(Lt,{href:"/cart",children:e.jsxs(E,{variant:"ghost",size:"sm",className:`relative btn-musical hover:rotate-6 transition-all duration-300 cart-icon ${d>0?"animate-cart-glow":""}`,children:[e.jsx(Fs,{className:`h-5 w-5 transition-all duration-300 ${d>0?"text-blue-600 animate-pulse":"text-gray-600"}`}),d>0&&e.jsx(X,{className:"absolute -top-2 -right-2 h-6 w-6 p-0 flex items-center justify-center text-xs font-bold bg-gradient-to-r from-orange-500 to-red-600 text-white animate-bounce border-2 border-white shadow-lg",children:d})]})}),i?e.jsxs(m0,{children:[e.jsx(h0,{asChild:!0,children:e.jsxs(E,{variant:"ghost",size:"sm",className:"flex items-center space-x-2",children:[e.jsx(cn,{className:"h-4 w-4"}),e.jsx("span",{children:i.fullName})]})}),e.jsxs(Ip,{align:"end",children:[e.jsx(ri,{asChild:!0,children:e.jsx(Lt,{href:"/dashboard",children:"Dashboard"})}),i&&![1,2,3,5,7].includes(i.roleId)&&e.jsxs(e.Fragment,{children:[e.jsx(Kj,{}),e.jsx(ri,{asChild:!0,children:e.jsx(v$,{children:e.jsxs("button",{className:"w-full flex items-center gap-2 text-left",children:[e.jsx(hr,{className:"w-4 h-4"}),"Apply for Management"]})})})]}),e.jsx(Kj,{}),e.jsx(ri,{onClick:c,children:"Logout"})]})]}):e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(Lt,{href:"/login",children:e.jsx(E,{variant:"ghost",size:"sm",children:"Sign In"})}),e.jsx(Lt,{href:"/register",children:e.jsx(E,{size:"sm",className:"gradient-primary",children:"Get Started"})})]})]}),e.jsxs("div",{className:"md:hidden flex items-center space-x-2",children:[e.jsx(Lt,{href:"/cart",children:e.jsxs(E,{variant:"ghost",size:"lg",className:`relative cart-icon h-12 w-12 p-0 ${d>0?"animate-cart-glow":""}`,children:[e.jsx(Fs,{className:`h-6 w-6 transition-all duration-300 ${d>0?"text-blue-600 animate-pulse":"text-gray-600"}`}),d>0&&e.jsx(X,{className:"absolute -top-2 -right-2 h-6 w-6 p-0 flex items-center justify-center text-xs font-bold bg-gradient-to-r from-orange-500 to-red-600 text-white animate-bounce border-2 border-white shadow-lg",children:d})]})}),e.jsx(E,{variant:"ghost",size:"lg",onClick:()=>n(!s),className:"h-12 w-12 p-0",children:s?e.jsx(Xt,{className:"h-7 w-7"}):e.jsx(T6,{className:"h-7 w-7"})})]})]})}),s&&e.jsx("div",{className:"md:hidden relative z-[999]",children:e.jsxs("div",{className:"relative overflow-hidden",children:[e.jsx("div",{className:"absolute inset-0",style:{background:"linear-gradient(135deg, #92400e 0%, #d97706 50%, #92400e 100%)"}}),e.jsx("div",{className:`relative transition-all duration-1000 ease-out ${s?"transform -translate-y-0 opacity-100":"transform translate-y-full opacity-0"}`,style:{background:"linear-gradient(135deg, #1a1a1a 0%, #2d2d2d 25%, #1a1a1a 50%, #2d2d2d 75%, #1a1a1a 100%)",boxShadow:"inset 0 4px 8px rgba(0,0,0,0.3), 0 8px 16px rgba(0,0,0,0.3)"},children:e.jsx("div",{className:`transition-all duration-500 ${s?"opacity-0 h-0":"opacity-100 h-16"}`,children:e.jsx("div",{className:"flex items-center justify-center h-16",children:e.jsx("div",{className:"text-center text-amber-200",children:e.jsx("div",{className:"text-2xl",children:" Opening Piano..."})})})})}),e.jsxs("div",{className:`transition-all duration-800 delay-500 ${s?"opacity-100 max-h-[800px]":"opacity-0 max-h-0"} overflow-hidden`,children:[e.jsx("div",{className:"p-4 border-b-4 border-amber-700",style:{background:"linear-gradient(135deg, #92400e 0%, #d97706 50%, #92400e 100%)",boxShadow:"inset 0 2px 4px rgba(0,0,0,0.3), 0 4px 8px rgba(0,0,0,0.2)"},children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("div",{className:"text-amber-100 font-serif text-lg",children:" Musical Navigation "}),e.jsx(E,{variant:"ghost",size:"sm",onClick:async()=>{u||await x(),r(!a)},className:"text-amber-100 hover:bg-amber-800/50 h-10 w-10 p-0 rounded-full border border-amber-600",title:a?"Disable piano sounds":"Enable piano sounds",children:a?e.jsx(qa,{className:"h-5 w-5"}):e.jsx(mp,{className:"h-5 w-5"})})]})}),e.jsxs("div",{className:"p-4",children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("div",{className:"text-center text-gray-600 text-sm mb-2",children:"Navigation Keys"}),e.jsxs("div",{className:"relative",style:{height:"225px"},children:[e.jsx("div",{className:"absolute inset-x-0 bottom-0 flex",style:{height:"225px"},children:f.slice(1,8).map((b,j)=>{const k=["C4","D4","E4","F4","G4","A4","B4"][j],A=((C,w)=>C==="Book Talent"?14.29+8:C==="Consultation"?14.29+10:C==="Services"?14.29+6:C==="Artists"||C==="Contact"||C==="OppHub"?14.29+2:14.29)(b.label);return e.jsx("div",{className:`border-2 border-gray-400 border-r-0 last:border-r-2 bg-white hover:bg-gray-50 transform transition-all duration-200 touch-manipulation active:scale-95 flex flex-col items-center justify-center text-xs font-medium relative overflow-hidden ${y(b.href)?"bg-blue-100 border-blue-400":""}`,onClick:async C=>{a&&C.target===C.currentTarget&&(u?v(k):(await x(),setTimeout(()=>v(k),100)))},onTouchStart:async C=>{a&&C.target===C.currentTarget&&(u?v(k):(await x(),setTimeout(()=>v(k),100)))},style:{width:`${A}%`,background:y(b.href)?"linear-gradient(to bottom, #dbeafe 0%, #93c5fd 100%)":"linear-gradient(to bottom, #ffffff 0%, #f8fafc 100%)",boxShadow:"0 2px 4px rgba(0,0,0,0.1), inset 0 1px 0 rgba(255,255,255,0.8)",padding:"2px"},children:e.jsxs(Lt,{href:b.href,className:"text-center bg-blue-50 hover:bg-blue-100 rounded-lg border border-blue-200 shadow-sm transition-all duration-200 hover:shadow-md absolute text-xs font-semibold",style:{top:"60%",left:"50%",transform:"translate(-50%, -50%)",maxWidth:"calc(100% - 8px)",width:b.label==="Book an Artist"?"calc(100% - 12px)":b.label==="Consultation"||b.label==="Services"?"calc(100% - 10px)":b.label==="About"?"calc(100% - 20px)":"calc(100% - 16px)",minWidth:"40px",padding:"1px 3px",whiteSpace:b.label==="Book an Artist"?"normal":"nowrap",lineHeight:b.label==="Book an Artist"?"1.1":"1.2",overflow:"hidden",textOverflow:"ellipsis",wordBreak:"break-word",boxSizing:"border-box"},onClick:C=>{C.stopPropagation(),n(!1)},children:[e.jsx("div",{className:"text-blue-700 leading-tight",style:{fontSize:b.label.length>10?"10px":"11px"},children:b.label}),e.jsx("div",{className:"text-purple-600 font-bold text-xs",children:""})]})},b.href)})}),e.jsxs("div",{className:"absolute inset-x-0 top-0 flex",style:{height:"105px"},children:[e.jsx("div",{style:{width:"16.67%"}}),[0,1,2,3,4].map(b=>{const S=["C#4","D#4","F#4","G#4","A#4"][b];return e.jsxs("div",{className:"flex",style:{width:"16.67%"},children:[e.jsx("div",{className:"bg-gray-800 hover:bg-gray-700 text-white border border-gray-600 transform transition-all duration-200 touch-manipulation active:scale-95 flex flex-col items-center justify-center text-xs font-medium cursor-pointer",onClick:async()=>{a&&(u?v(S):(await x(),setTimeout(()=>v(S),100)))},onTouchStart:async()=>{a&&(u?v(S):(await x(),setTimeout(()=>v(S),100)))},style:{width:"60%",margin:"0 auto",background:"linear-gradient(to bottom, #374151 0%, #1f2937 100%)",boxShadow:"0 2px 4px rgba(0,0,0,0.3), inset 0 1px 0 rgba(255,255,255,0.1)"},children:e.jsx("div",{className:"text-yellow-400 font-bold text-lg",children:""})}),b===1&&e.jsx("div",{style:{width:"16.67%"}})]},b)})]})]})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("div",{className:"text-center text-gray-600 text-sm mb-2",children:"Action Keys"}),e.jsx("div",{className:"relative",style:{height:"100px"},children:e.jsxs("div",{className:"absolute inset-x-0 bottom-0 flex",style:{height:"80px"},children:[e.jsx("div",{className:`flex-1 border-2 border-gray-400 border-r-0 bg-white hover:bg-gray-50 transform transition-all duration-200 touch-manipulation active:scale-95 flex flex-col items-center justify-center text-xs font-medium relative ${y("/")?"bg-blue-100 border-blue-400":""}`,onClick:async b=>{a&&b.target===b.currentTarget&&(u?v("B4"):(await x(),setTimeout(()=>v("B4"),100)))},onTouchStart:async b=>{a&&b.target===b.currentTarget&&(u?v("B4"):(await x(),setTimeout(()=>v("B4"),100)))},style:{background:y("/")?"linear-gradient(to bottom, #dbeafe 0%, #93c5fd 100%)":"linear-gradient(to bottom, #ffffff 0%, #f8fafc 100%)",boxShadow:"0 2px 4px rgba(0,0,0,0.1), inset 0 1px 0 rgba(255,255,255,0.8)"},children:e.jsxs(Lt,{href:"/",className:"bg-blue-50 hover:bg-blue-100 rounded-lg px-2 py-1 border border-blue-200 shadow-sm transition-all duration-200 hover:shadow-md flex flex-col items-center",onClick:b=>{b.stopPropagation(),n(!1)},children:[e.jsx(i4,{className:"h-4 w-4 text-blue-700"}),e.jsx("div",{className:"text-blue-700 font-semibold",children:"Home "})]})}),e.jsx("div",{className:`flex-1 border-2 border-gray-400 border-r-0 bg-white hover:bg-gray-50 transform transition-all duration-200 touch-manipulation active:scale-95 flex flex-col items-center justify-center text-xs font-medium relative ${d>0?"bg-orange-100 border-orange-400":""}`,onClick:async b=>{a&&b.target===b.currentTarget&&(u?v("C5"):(await x(),setTimeout(()=>v("C5"),100)))},onTouchStart:async b=>{a&&b.target===b.currentTarget&&(u?v("C5"):(await x(),setTimeout(()=>v("C5"),100)))},style:{background:d>0?"linear-gradient(to bottom, #fed7aa 0%, #fb923c 100%)":"linear-gradient(to bottom, #ffffff 0%, #f8fafc 100%)",boxShadow:"0 2px 4px rgba(0,0,0,0.1), inset 0 1px 0 rgba(255,255,255,0.8)"},children:e.jsxs(Lt,{href:"/cart",className:"bg-blue-50 hover:bg-blue-100 rounded-lg px-2 py-1 border border-blue-200 shadow-sm transition-all duration-200 hover:shadow-md flex flex-col items-center",onClick:b=>{b.stopPropagation(),n(!1)},children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(Fs,{className:`h-4 w-4 ${d>0?"text-orange-600":"text-blue-700"}`}),d>0&&e.jsx(X,{className:"bg-red-500 text-white h-4 w-4 p-0 flex items-center justify-center text-xs",children:d})]}),e.jsx("div",{className:"text-blue-700 font-semibold",children:"Cart "})]})}),i?e.jsx("div",{className:"flex-1 border-2 border-gray-400 border-r-0 bg-white hover:bg-blue-50 transform transition-all duration-200 touch-manipulation active:scale-95 flex flex-col items-center justify-center text-xs font-medium relative",onClick:async b=>{a&&b.target===b.currentTarget&&(u?v("D5"):(await x(),setTimeout(()=>v("D5"),100)))},onTouchStart:async b=>{a&&b.target===b.currentTarget&&(u?v("D5"):(await x(),setTimeout(()=>v("D5"),100)))},style:{background:"linear-gradient(to bottom, #dbeafe 0%, #93c5fd 100%)",boxShadow:"0 2px 4px rgba(0,0,0,0.1), inset 0 1px 0 rgba(255,255,255,0.8)"},children:e.jsxs(Lt,{href:"/dashboard",className:"bg-blue-100 hover:bg-blue-200 rounded-lg px-2 py-1 border border-blue-300 shadow-sm transition-all duration-200 hover:shadow-md flex flex-col items-center",onClick:b=>{b.stopPropagation(),n(!1)},children:[e.jsx(cn,{className:"h-4 w-4 text-blue-700"}),e.jsx("div",{className:"text-blue-700 font-semibold",children:"Dashboard "})]})}):e.jsx("div",{className:"flex-1 border-2 border-gray-400 border-r-0 bg-white hover:bg-blue-50 transform transition-all duration-200 touch-manipulation active:scale-95 flex flex-col items-center justify-center text-xs font-medium relative",onClick:async b=>{a&&b.target===b.currentTarget&&(u?v("D5"):(await x(),setTimeout(()=>v("D5"),100)))},onTouchStart:async b=>{a&&b.target===b.currentTarget&&(u?v("D5"):(await x(),setTimeout(()=>v("D5"),100)))},style:{background:"linear-gradient(to bottom, #dbeafe 0%, #93c5fd 100%)",boxShadow:"0 2px 4px rgba(0,0,0,0.1), inset 0 1px 0 rgba(255,255,255,0.8)"},children:e.jsxs(Lt,{href:"/login",className:"bg-blue-100 hover:bg-blue-200 rounded-lg px-2 py-1 border border-blue-300 shadow-sm transition-all duration-200 hover:shadow-md flex flex-col items-center",onClick:b=>{b.stopPropagation(),n(!1)},children:[e.jsx(o4,{className:"h-4 w-4 text-blue-700"}),e.jsx("div",{className:"text-blue-700 font-semibold",children:"Sign In "})]})}),i?e.jsx("div",{className:"flex-1 border-2 border-gray-400 bg-white hover:bg-red-50 transform transition-all duration-200 touch-manipulation active:scale-95 flex flex-col items-center justify-center text-xs font-medium relative",onClick:async b=>{a&&b.target===b.currentTarget&&(u?v("E5"):(await x(),setTimeout(()=>v("E5"),100)))},onTouchStart:async b=>{a&&b.target===b.currentTarget&&(u?v("E5"):(await x(),setTimeout(()=>v("E5"),100)))},style:{background:"linear-gradient(to bottom, #fecaca 0%, #f87171 100%)",boxShadow:"0 2px 4px rgba(0,0,0,0.1), inset 0 1px 0 rgba(255,255,255,0.8)"},children:e.jsxs("button",{onClick:b=>{b.stopPropagation(),c(),n(!1)},className:"bg-red-100 hover:bg-red-200 rounded-lg px-2 py-1 border border-red-300 shadow-sm transition-all duration-200 hover:shadow-md flex flex-col items-center",children:[e.jsx(P6,{className:"h-4 w-4 text-red-700"}),e.jsx("div",{className:"text-red-700 font-semibold",children:"Logout "})]})}):e.jsx("div",{className:"flex-1 border-2 border-gray-400 bg-white hover:bg-purple-50 transform transition-all duration-200 touch-manipulation active:scale-95 flex flex-col items-center justify-center text-xs font-medium relative",onClick:async b=>{a&&b.target===b.currentTarget&&(u?v("E5"):(await x(),setTimeout(()=>v("E5"),100)))},onTouchStart:async b=>{a&&b.target===b.currentTarget&&(u?v("E5"):(await x(),setTimeout(()=>v("E5"),100)))},style:{background:"linear-gradient(to bottom, #e9d5ff 0%, #c084fc 100%)",boxShadow:"0 2px 4px rgba(0,0,0,0.1), inset 0 1px 0 rgba(255,255,255,0.8)"},children:e.jsxs(Lt,{href:"/register",className:"bg-purple-100 hover:bg-purple-200 rounded-lg px-2 py-1 border border-purple-300 shadow-sm transition-all duration-200 hover:shadow-md flex flex-col items-center",onClick:b=>{b.stopPropagation(),n(!1)},children:[e.jsx(hr,{className:"h-4 w-4 text-purple-700"}),e.jsx("div",{className:"text-purple-700 font-semibold",children:"Register "})]})})]})})]})]}),e.jsx("div",{className:"p-4",style:{background:"linear-gradient(135deg, #92400e 0%, #d97706 50%, #92400e 100%)",boxShadow:"inset 0 2px 4px rgba(0,0,0,0.3)"},children:e.jsx("button",{onClick:()=>{a&&v("C4"),n(!1)},onTouchStart:()=>{a&&v("C4")},className:"w-full h-12 rounded-lg border-2 border-amber-600 shadow-lg transform transition-all duration-200 touch-manipulation active:scale-95 hover:shadow-xl text-amber-100 flex items-center justify-center font-medium",style:{background:"linear-gradient(135deg, #d97706 0%, #f59e0b 100%)",boxShadow:"0 4px 12px rgba(245, 158, 11, 0.4), inset 0 1px 0 rgba(255,255,255,0.2)"},children:"Close Piano  "})})]})]})})]})}var zP=["PageUp","PageDown"],VP=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],GP={"from-left":["Home","PageDown","ArrowDown","ArrowLeft"],"from-right":["Home","PageDown","ArrowDown","ArrowRight"],"from-bottom":["Home","PageDown","ArrowDown","ArrowLeft"],"from-top":["Home","PageDown","ArrowUp","ArrowLeft"]},Pd="Slider",[lv,N$,b$]=xm(Pd),[WP,$J]=Yn(Pd,[b$]),[w$,zp]=WP(Pd),HP=N.forwardRef((t,s)=>{const{name:n,min:a=0,max:r=100,step:i=1,orientation:l="horizontal",disabled:c=!1,minStepsBetweenThumbs:o=0,defaultValue:d=[a],value:h,onValueChange:u=()=>{},onValueCommit:m=()=>{},inverted:p=!1,form:g,...x}=t,v=N.useRef(new Set),y=N.useRef(0),b=l==="horizontal"?S$:C$,[j=[],S]=br({prop:h,defaultProp:d,onChange:P=>{var I;(I=[...v.current][y.current])==null||I.focus(),u(P)}}),k=N.useRef(j);function T(P){const M=E$(j,P);w(P,M)}function A(P){w(P,y.current)}function C(){const P=k.current[y.current];j[y.current]!==P&&m(j)}function w(P,M,{commit:I}={commit:!1}){const W=O$(i),_=D$(Math.round((P-a)/i)*i+a,W),B=nm(_,[a,r]);S((O=[])=>{const z=P$(O,B,M);if(R$(z,o*i)){y.current=z.indexOf(B);const F=String(z)!==String(O);return F&&I&&m(z),F?z:O}else return O})}return e.jsx(w$,{scope:t.__scopeSlider,name:n,disabled:c,min:a,max:r,valueIndexToChangeRef:y,thumbs:v.current,values:j,orientation:l,form:g,children:e.jsx(lv.Provider,{scope:t.__scopeSlider,children:e.jsx(lv.Slot,{scope:t.__scopeSlider,children:e.jsx(b,{"aria-disabled":c,"data-disabled":c?"":void 0,...x,ref:s,onPointerDown:tt(x.onPointerDown,()=>{c||(k.current=j)}),min:a,max:r,inverted:p,onSlideStart:c?void 0:T,onSlideMove:c?void 0:A,onSlideEnd:c?void 0:C,onHomeKeyDown:()=>!c&&w(a,0,{commit:!0}),onEndKeyDown:()=>!c&&w(r,j.length-1,{commit:!0}),onStepKeyDown:({event:P,direction:M})=>{if(!c){const _=zP.includes(P.key)||P.shiftKey&&VP.includes(P.key)?10:1,B=y.current,O=j[B],z=i*_*M;w(O+z,B,{commit:!0})}}})})})})});HP.displayName=Pd;var[KP,YP]=WP(Pd,{startEdge:"left",endEdge:"right",size:"width",direction:1}),S$=N.forwardRef((t,s)=>{const{min:n,max:a,dir:r,inverted:i,onSlideStart:l,onSlideMove:c,onSlideEnd:o,onStepKeyDown:d,...h}=t,[u,m]=N.useState(null),p=Ht(s,b=>m(b)),g=N.useRef(void 0),x=kd(r),v=x==="ltr",y=v&&!i||!v&&i;function f(b){const j=g.current||u.getBoundingClientRect(),S=[0,j.width],T=y0(S,y?[n,a]:[a,n]);return g.current=j,T(b-j.left)}return e.jsx(KP,{scope:t.__scopeSlider,startEdge:y?"left":"right",endEdge:y?"right":"left",direction:y?1:-1,size:"width",children:e.jsx(QP,{dir:x,"data-orientation":"horizontal",...h,ref:p,style:{...h.style,"--radix-slider-thumb-transform":"translateX(-50%)"},onSlideStart:b=>{const j=f(b.clientX);l==null||l(j)},onSlideMove:b=>{const j=f(b.clientX);c==null||c(j)},onSlideEnd:()=>{g.current=void 0,o==null||o()},onStepKeyDown:b=>{const S=GP[y?"from-left":"from-right"].includes(b.key);d==null||d({event:b,direction:S?-1:1})}})})}),C$=N.forwardRef((t,s)=>{const{min:n,max:a,inverted:r,onSlideStart:i,onSlideMove:l,onSlideEnd:c,onStepKeyDown:o,...d}=t,h=N.useRef(null),u=Ht(s,h),m=N.useRef(void 0),p=!r;function g(x){const v=m.current||h.current.getBoundingClientRect(),y=[0,v.height],b=y0(y,p?[a,n]:[n,a]);return m.current=v,b(x-v.top)}return e.jsx(KP,{scope:t.__scopeSlider,startEdge:p?"bottom":"top",endEdge:p?"top":"bottom",size:"height",direction:p?1:-1,children:e.jsx(QP,{"data-orientation":"vertical",...d,ref:u,style:{...d.style,"--radix-slider-thumb-transform":"translateY(50%)"},onSlideStart:x=>{const v=g(x.clientY);i==null||i(v)},onSlideMove:x=>{const v=g(x.clientY);l==null||l(v)},onSlideEnd:()=>{m.current=void 0,c==null||c()},onStepKeyDown:x=>{const y=GP[p?"from-bottom":"from-top"].includes(x.key);o==null||o({event:x,direction:y?-1:1})}})})}),QP=N.forwardRef((t,s)=>{const{__scopeSlider:n,onSlideStart:a,onSlideMove:r,onSlideEnd:i,onHomeKeyDown:l,onEndKeyDown:c,onStepKeyDown:o,...d}=t,h=zp(Pd,n);return e.jsx(Dt.span,{...d,ref:s,onKeyDown:tt(t.onKeyDown,u=>{u.key==="Home"?(l(u),u.preventDefault()):u.key==="End"?(c(u),u.preventDefault()):zP.concat(VP).includes(u.key)&&(o(u),u.preventDefault())}),onPointerDown:tt(t.onPointerDown,u=>{const m=u.target;m.setPointerCapture(u.pointerId),u.preventDefault(),h.thumbs.has(m)?m.focus():a(u)}),onPointerMove:tt(t.onPointerMove,u=>{u.target.hasPointerCapture(u.pointerId)&&r(u)}),onPointerUp:tt(t.onPointerUp,u=>{const m=u.target;m.hasPointerCapture(u.pointerId)&&(m.releasePointerCapture(u.pointerId),i(u))})})}),ZP="SliderTrack",XP=N.forwardRef((t,s)=>{const{__scopeSlider:n,...a}=t,r=zp(ZP,n);return e.jsx(Dt.span,{"data-disabled":r.disabled?"":void 0,"data-orientation":r.orientation,...a,ref:s})});XP.displayName=ZP;var ov="SliderRange",JP=N.forwardRef((t,s)=>{const{__scopeSlider:n,...a}=t,r=zp(ov,n),i=YP(ov,n),l=N.useRef(null),c=Ht(s,l),o=r.values.length,d=r.values.map(m=>tT(m,r.min,r.max)),h=o>1?Math.min(...d):0,u=100-Math.max(...d);return e.jsx(Dt.span,{"data-orientation":r.orientation,"data-disabled":r.disabled?"":void 0,...a,ref:c,style:{...t.style,[i.startEdge]:h+"%",[i.endEdge]:u+"%"}})});JP.displayName=ov;var cv="SliderThumb",eT=N.forwardRef((t,s)=>{const n=N$(t.__scopeSlider),[a,r]=N.useState(null),i=Ht(s,c=>r(c)),l=N.useMemo(()=>a?n().findIndex(c=>c.ref.current===a):-1,[n,a]);return e.jsx(k$,{...t,ref:i,index:l})}),k$=N.forwardRef((t,s)=>{const{__scopeSlider:n,index:a,name:r,...i}=t,l=zp(cv,n),c=YP(cv,n),[o,d]=N.useState(null),h=Ht(s,f=>d(f)),u=o?l.form||!!o.closest("form"):!0,m=fp(o),p=l.values[a],g=p===void 0?0:tT(p,l.min,l.max),x=T$(a,l.values.length),v=m==null?void 0:m[c.size],y=v?M$(v,g,c.direction):0;return N.useEffect(()=>{if(o)return l.thumbs.add(o),()=>{l.thumbs.delete(o)}},[o,l.thumbs]),e.jsxs("span",{style:{transform:"var(--radix-slider-thumb-transform)",position:"absolute",[c.startEdge]:`calc(${g}% + ${y}px)`},children:[e.jsx(lv.ItemSlot,{scope:t.__scopeSlider,children:e.jsx(Dt.span,{role:"slider","aria-label":t["aria-label"]||x,"aria-valuemin":l.min,"aria-valuenow":p,"aria-valuemax":l.max,"aria-orientation":l.orientation,"data-orientation":l.orientation,"data-disabled":l.disabled?"":void 0,tabIndex:l.disabled?void 0:0,...i,ref:h,style:p===void 0?{display:"none"}:t.style,onFocus:tt(t.onFocus,()=>{l.valueIndexToChangeRef.current=a})})}),u&&e.jsx(A$,{name:r??(l.name?l.name+(l.values.length>1?"[]":""):void 0),form:l.form,value:p},a)]})});eT.displayName=cv;var A$=t=>{const{value:s,...n}=t,a=N.useRef(null),r=qp(s);return N.useEffect(()=>{const i=a.current,l=window.HTMLInputElement.prototype,o=Object.getOwnPropertyDescriptor(l,"value").set;if(r!==s&&o){const d=new Event("input",{bubbles:!0});o.call(i,s),i.dispatchEvent(d)}},[r,s]),e.jsx("input",{style:{display:"none"},...n,ref:a,defaultValue:s})};function P$(t=[],s,n){const a=[...t];return a[n]=s,a.sort((r,i)=>r-i)}function tT(t,s,n){const i=100/(n-s)*(t-s);return nm(i,[0,100])}function T$(t,s){return s>2?`Value ${t+1} of ${s}`:s===2?["Minimum","Maximum"][t]:void 0}function E$(t,s){if(t.length===1)return 0;const n=t.map(r=>Math.abs(r-s)),a=Math.min(...n);return n.indexOf(a)}function M$(t,s,n){const a=t/2,i=y0([0,50],[0,a]);return(a-i(s)*n)*n}function _$(t){return t.slice(0,-1).map((s,n)=>t[n+1]-s)}function R$(t,s){if(s>0){const n=_$(t);return Math.min(...n)>=s}return!0}function y0(t,s){return n=>{if(t[0]===t[1]||s[0]===s[1])return s[0];const a=(s[1]-s[0])/(t[1]-t[0]);return s[0]+a*(n-t[0])}}function O$(t){return(String(t).split(".")[1]||"").length}function D$(t,s){const n=Math.pow(10,s);return Math.round(t*n)/n}var sT=HP,I$=XP,L$=JP,F$=eT;const Di=N.forwardRef(({className:t,...s},n)=>e.jsxs(sT,{ref:n,className:Je("relative flex w-full touch-none select-none items-center",t),...s,children:[e.jsx(I$,{className:"relative h-2 w-full grow overflow-hidden rounded-full bg-secondary",children:e.jsx(L$,{className:"absolute h-full bg-primary"})}),e.jsx(F$,{className:"block h-5 w-5 rounded-full border-2 border-primary bg-background ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50"})]}));Di.displayName=sT.displayName;function q$(){var be,Ie,ve;const{toast:t}=nt(),s=N.useRef(null),n=N.useRef(null),{currentSong:a,playlist:r,isVisible:i,setCurrentSong:l,showPlayer:c,hidePlayer:o,getMerchandiseForCurrentSong:d}=vL(),h=!1,u=ie=>console.log("Adding to cart:",ie),m=()=>i?o():c(),[p,g]=N.useState(!1),[x,v]=N.useState(0),[y,f]=N.useState(0),[b,j]=N.useState(1),[S,k]=N.useState(!1);N.useState(!1);const[T,A]=N.useState("none"),[C,w]=N.useState("standard"),[P,M]=N.useState(!1),[I,W]=N.useState(!1),[_,B]=N.useState(!1),[O,z]=N.useState(!0),F=!!(a!=null&&a.mp4Url),K=a&&!a.isFree&&!a.isPaid,D=()=>{if(!a)return"";switch(C){case"lossless":return a.flacUrl||a.wavUrl||a.mp3Url||"";case"high":return a.wavUrl||a.mp3Url||"";default:return a.mp3Url||""}},G=()=>{const ie=F?n.current:s.current;ie&&(v(ie.currentTime),K&&ie.currentTime>=a.previewStartSeconds+a.previewDuration&&(ie.pause(),g(!1),a.isFree||W(!0)))},H=()=>{const ie=F?n.current:s.current;ie&&(f(ie.duration),K&&(ie.currentTime=(a==null?void 0:a.previewStartSeconds)||0))},V=()=>{const ie=F?n.current:s.current;!ie||!a||(p?(ie.pause(),g(!1)):(K&&(ie.currentTime=a.previewStartSeconds),ie.play().then(()=>{g(!0)}).catch(de=>{console.error("Playback failed:",de),t({title:"Playback Error",description:"Failed to play media. Please try again.",variant:"destructive"})})))},se=ie=>{const de=F?n.current:s.current;if(de){if(K&&a){const ee=a.previewStartSeconds+a.previewDuration;ie=Math.max(a.previewStartSeconds,Math.min(ie,ee))}de.currentTime=ie,v(ie)}},Z=ie=>{const de=F?n.current:s.current;de&&(de.volume=ie,j(ie),k(ie===0))},le=()=>{const ie=F?n.current:s.current;ie&&(S?(ie.volume=b>0?b:.5,k(!1)):(ie.volume=0,k(!0)))},ne=()=>{!F||!n.current||(P?document.exitFullscreen&&document.exitFullscreen():n.current.requestFullscreen&&n.current.requestFullscreen(),M(!P))},ue=()=>{w(ie=>ie==="standard"?"high":ie==="high"?"lossless":"standard")},te=()=>{a&&(u({id:a.id.toString(),itemType:"song",songId:a.id,price:a.price||.99}),t({title:"Added to Cart",description:`${a.title} added to your cart`}))},Ae=ie=>{const de=Math.floor(ie/60),ee=Math.floor(ie%60);return`${de}:${ee.toString().padStart(2,"0")}`},Ge=()=>{switch(C){case"lossless":return"";case"high":return"";default:return""}};return!i||!a?null:e.jsx(Ky,{children:e.jsxs("div",{className:"fixed bottom-0 left-0 right-0 z-50 bg-white dark:bg-gray-900 border-t border-gray-200 dark:border-gray-700 shadow-lg",children:[e.jsx("audio",{ref:s,src:F?"":D(),onTimeUpdate:G,onLoadedMetadata:H,onEnded:()=>{g(!1),T==="one"&&setTimeout(()=>V(),100)},preload:"metadata"}),F&&e.jsxs("div",{className:"relative",children:[e.jsx("video",{ref:n,src:D(),onTimeUpdate:G,onLoadedMetadata:H,onEnded:()=>{g(!1),T==="one"&&setTimeout(()=>V(),100)},className:"w-full max-h-64 bg-black",poster:a.coverArtUrl,preload:"metadata"}),e.jsx("div",{className:"absolute top-2 right-2 flex gap-2",children:e.jsx(E,{variant:"ghost",size:"sm",onClick:ne,className:"text-white bg-black/50 hover:bg-black/70",children:P?e.jsx(d4,{className:"h-4 w-4"}):e.jsx(c4,{className:"h-4 w-4"})})})]}),e.jsxs("div",{className:"flex items-center gap-2 p-3",children:[e.jsxs("div",{className:"flex items-center gap-3 min-w-0 flex-1",children:[a.coverArtUrl&&!F&&e.jsx("img",{src:a.coverArtUrl,alt:a.title,className:"w-12 h-12 rounded object-cover flex-shrink-0 cursor-pointer hover:opacity-80",onClick:()=>{}}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsxs("div",{className:"font-medium text-sm truncate flex items-center gap-2",children:[F&&e.jsx(xt,{className:"h-3 w-3 text-blue-500"}),a.title,K&&!a.isFree&&e.jsxs("span",{className:"px-1 py-0.5 bg-gradient-to-r from-orange-100 to-yellow-100 text-orange-700 text-xs rounded border border-orange-200",children:[" Preview - $",((be=a.price)==null?void 0:be.toFixed(2))||"0.99"]})]}),e.jsxs("div",{className:"text-xs text-gray-500 truncate flex items-center gap-2",children:[a.artistName,h,e.jsx("span",{className:"flex items-center gap-1",children:e.jsxs("button",{onClick:ue,className:"hover:text-blue-500",children:[Ge()," ",C]})})]})]})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[h,e.jsx(E,{variant:"ghost",size:"sm",onClick:V,className:"w-8 h-8",children:p?e.jsx(Ry,{className:"h-4 w-4"}):e.jsx(Gn,{className:"h-4 w-4"})}),h]}),e.jsx("div",{className:"flex-1 max-w-md",children:e.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-500",children:[e.jsx("span",{className:"w-10 text-right",children:Ae(x)}),e.jsxs("div",{className:"flex-1 relative",children:[e.jsx(Di,{value:[x],onValueChange:([ie])=>se(ie),max:y,step:1,className:"w-full"}),K&&a&&e.jsx("div",{className:"absolute top-1/2 transform -translate-y-1/2 h-1 bg-green-500 rounded opacity-60",style:{left:`${a.previewStartSeconds/y*100}%`,width:`${a.previewDuration/y*100}%`}})]}),e.jsx("span",{className:"w-10",children:Ae(y)})]})}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(E,{variant:"ghost",size:"sm",onClick:le,children:S?e.jsx(mp,{className:"h-4 w-4"}):e.jsx(qa,{className:"h-4 w-4"})}),e.jsx(Di,{value:[S?0:b],onValueChange:([ie])=>Z(ie),max:1,step:.1,className:"w-20"})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[!a.isFree&&!a.isPaid&&e.jsxs(il,{children:[e.jsx(ll,{asChild:!0,children:e.jsx(E,{variant:"ghost",size:"sm",onClick:te,className:"text-green-600 hover:text-green-700",children:e.jsx(Fs,{className:"h-4 w-4"})})}),e.jsxs(Ai,{children:["Add to Cart - $",((Ie=a.price)==null?void 0:Ie.toFixed(2))||"0.99"]})]}),e.jsxs(m0,{children:[e.jsx(h0,{asChild:!0,children:e.jsx(E,{variant:"ghost",size:"sm",children:e.jsx(r4,{className:"h-4 w-4"})})}),e.jsxs(Ip,{align:"end",children:[F&&e.jsxs(ri,{onClick:ne,children:[e.jsx(qr,{className:"mr-2 h-4 w-4"}),P?"Exit Fullscreen":"Enter Fullscreen"]}),e.jsxs(ri,{onClick:()=>B(!_),children:[e.jsx(qa,{className:"mr-2 h-4 w-4"}),"Crossfade: ",_?"On":"Off"]}),e.jsxs(ri,{onClick:()=>z(!O),children:[e.jsx(m4,{className:"mr-2 h-4 w-4"}),"Gapless: ",O?"On":"Off"]}),e.jsxs(ri,{onClick:ue,children:[e.jsx(xt,{className:"mr-2 h-4 w-4"}),"Quality: ",C]})]})]}),e.jsx(E,{variant:"ghost",size:"sm",onClick:m,children:e.jsx(Xt,{className:"h-4 w-4"})})]})]}),I&&e.jsx("div",{className:"absolute bottom-full left-0 right-0 bg-white dark:bg-gray-800 border-t border-gray-200 dark:border-gray-700 p-4 shadow-lg",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium",children:"Complete your purchase"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Get the full song plus exclusive merchandise"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(E,{size:"sm",onClick:te,children:["Buy Song - $",((ve=a.price)==null?void 0:ve.toFixed(2))||"0.99"]}),e.jsx(E,{variant:"ghost",size:"sm",onClick:()=>W(!1),children:e.jsx(Xt,{className:"h-4 w-4"})})]})]})})]})})}function $$({children:t}){const{user:s,isLoading:n}=_s();return n?e.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"})}):e.jsxs("div",{className:"min-h-screen bg-background",children:[e.jsx(y$,{}),e.jsx("main",{className:"pb-20",children:t}),s&&e.jsx(q$,{})]})}const B$={SUPERADMIN:1,ADMIN:2,STAR_TALENT:3,RISING_ARTIST:4,STUDIO_PRO:5,SESSION_PLAYER:6,INDUSTRY_EXPERT:7,MUSIC_PROFESSIONAL:8,MUSIC_LOVER:9},pn={ALL_USERS:[1,2,3,4,5,6,7,8,9],ADMIN_ONLY:[1,2],SUPERADMIN_ONLY:[1],TALENT:[3,4],MUSICIANS:[5,6],PROFESSIONALS:[7,8],MANAGED_TALENT:[3,5,7],MANAGED_AND_ABOVE:[1,2,3,5,7],PERFORMERS:[3,4,5,6],INDUSTRY:[7,8],CONTENT_CREATORS:[3,4,5,6,7],BOOKING_ENABLED:[1,2,3,5,7],NON_FANS:[1,2,3,4,5,6,7,8]},kw={"/users":pn.ADMIN_ONLY,"/admin":pn.ADMIN_ONLY,"/comprehensive-workflow":pn.ADMIN_ONLY,"/system-management":pn.SUPERADMIN_ONLY,"/booking":pn.BOOKING_ENABLED,"/bookings":pn.BOOKING_ENABLED,"/opphub":pn.NON_FANS,"/opphub-strategic":pn.NON_FANS,"/dashboard":pn.ALL_USERS,"/artists":pn.ALL_USERS,"/store":pn.ALL_USERS,"/cart":pn.ALL_USERS,"/fan-dashboard":[B$.MUSIC_LOVER],"/merchandise":pn.CONTENT_CREATORS,"/newsletters":pn.CONTENT_CREATORS,"/splitsheets":pn.PERFORMERS,"/contracts":pn.CONTENT_CREATORS,"/technical-riders":pn.PERFORMERS,"/isrc":pn.CONTENT_CREATORS};function U$(t,s){return s.includes(t)}function z$(t){const s=t.split("?")[0].split("#")[0];return kw[s]?kw[s]:s.startsWith("/artist/")?pn.ALL_USERS:s.startsWith("/booking/")?pn.BOOKING_ENABLED:s.startsWith("/admin/")?pn.ADMIN_ONLY:pn.ALL_USERS}function V$(t,s){const n=z$(s);return U$(t,n)}function qt({children:t,fallback:s}){const{user:n,role:a,isLoading:r}=_s(),[i]=As();if(r)return e.jsx("div",{className:"min-h-screen flex items-center justify-center",children:e.jsx("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-primary"})});if(!n)return s||e.jsx("div",{className:"min-h-screen w-full flex items-center justify-center bg-gray-50",children:e.jsx(R,{className:"w-full max-w-md mx-4",children:e.jsxs(L,{className:"pt-6",children:[e.jsxs("div",{className:"flex mb-4 gap-2",children:[e.jsx(on,{className:"h-8 w-8 text-red-500"}),e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Authentication Required"})]}),e.jsx("p",{className:"mt-4 text-sm text-gray-600",children:"Please log in to access this page."})]})})});const l=n==null?void 0:n.roleId;return a!=null&&a.name,l&&!V$(l,i)?s||e.jsx("div",{className:"min-h-screen w-full flex items-center justify-center bg-gray-50",children:e.jsx(R,{className:"w-full max-w-md mx-4",children:e.jsxs(L,{className:"pt-6",children:[e.jsxs("div",{className:"flex mb-4 gap-2",children:[e.jsx(on,{className:"h-8 w-8 text-orange-500"}),e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Access Denied"})]}),e.jsx("p",{className:"mt-4 text-sm text-gray-600",children:"You don't have permission to access this page."}),!1]})})}):e.jsx(e.Fragment,{children:t})}const dv={name:"Wai'tuMusic",tagline:"Professional Music Industry Management Platform",description:"Comprehensive music label management platform connecting artists, professionals, and fans through role-based access control, booking management, and e-commerce functionality.",domain:"waitumusic.com"},rc={hero:{title:"Caribbean's Premier Music Industry Platform",subtitle:"Connect with artists, book talent, and grow your music career with professional-grade tools and AI-powered opportunities",cta:{primary:"Sign Up Now",secondary:"Book an Artist",tertiary:"Login"}},features:{title:"Platform Features",subtitle:"Everything you need to succeed in the music industry",items:[{title:"Smart Booking Calendar System",description:"Color-coded dual calendar system with role restrictions. Only managed artists, musicians, and professionals can access booking functionalities with automated conflict detection."},{title:"Automated Contracts",description:"Generate booking agreements, technical riders, and performance contracts automatically upon booking initiation."},{title:"Dynamic Pricing",description:"100% base price payout guarantee with transparent add-on pricing and residual income tracking."},{title:"Music Catalog",description:"Comprehensive music library with streaming capabilities, purchase options, and artist management tools."},{title:"Professional Networking",description:"Connect with industry professionals, collaborate on projects, and access exclusive opportunities."},{title:"AI-Powered Opportunities",description:"Intelligent opportunity matching system connecting artists with relevant industry opportunities and collaborations."}]},services:{title:"Popular Services",subtitle:"Professional music industry services",items:[{name:"Live Performance Booking",description:"Professional live performance booking with automated contracts",basePrice:500,currency:"USD",category:"Performance",popular:!0},{name:"Music Production",description:"Full-service music production from recording to mastering",basePrice:300,currency:"USD",category:"Production",popular:!0},{name:"Artist Consultation",description:"One-on-one career consultation with industry professionals",basePrice:150,currency:"USD",category:"Consultation",popular:!0}]},userRoles:{title:"User Roles & Access Levels",subtitle:"Choose your path in the music industry",roles:[{title:"Managed Artist",description:"Full/Admin management tiers, booking calendar access, EPK system",access:"Tier Benefits",color:"green"},{title:"Artist",description:"Independent artists with standard permissions, music catalog, 30-second previews",access:"Standard Access",color:"orange"},{title:"Managed Musician",description:"Session musicians with management benefits, booking assignments",access:"Tier Benefits",color:"blue"},{title:"Musician",description:"Independent session musicians with standard booking capabilities",access:"Standard Access",color:"purple"},{title:"Music Professional",description:"Industry professionals offering specialized services and consultations",access:"Professional Access",color:"indigo"},{title:"Fan",description:"General browsing, purchasing, upgrade requests to higher roles",access:"Public Access",color:"gray"}]},stats:{title:"Platform Statistics",items:[{label:"Active Artists",apiEndpoint:"/api/stats/artists"},{label:"Successful Bookings",apiEndpoint:"/api/stats/bookings"},{label:"Music Tracks",apiEndpoint:"/api/stats/songs"},{label:"Industry Professionals",apiEndpoint:"/api/stats/professionals"}]}},or={title:"Welcome Back",subtitle:"Sign in to your account",description:"Enter your credentials to access your dashboard",form:{email:{label:"Email",placeholder:"Enter your email"},password:{label:"Password",placeholder:"Enter your password"},submit:"Sign In",submitting:"Signing in..."},demoSection:{title:"Or try demo accounts",subtitle:"Explore the platform with pre-configured demo accounts"},footer:{noAccount:"Don't have an account?",signUp:"Sign up"}};dv.name,`${new Date().getFullYear()}${dv.name}`;function G$(){var o,d,h;const{data:t=[]}=ke({queryKey:["/api/artists"]}),{data:s=[]}=ke({queryKey:["/api/songs"]}),{data:n=[]}=ke({queryKey:["/api/bookings"],enabled:!1}),a=(t==null?void 0:t.filter(u=>u.isManaged).slice(0,6))||[],r=rc.services.items.map((u,m)=>({id:m+1,name:u.name,description:u.description,price:`From $${u.basePrice}`,category:u.category,popular:u.popular,icon:m===0?yn:m===1?Ue:Ze})),i=rc.userRoles.roles.map((u,m)=>({icon:[yn,Ue,Po,jn,Ze,gn][m],title:u.title,description:u.description,gradient:`from-${u.color}-600 to-${u.color}-800`,access:u.access})),l=rc.features.items.map((u,m)=>({icon:[dt,xt,It,Ue,Ze,Rt][m],title:u.title,description:u.description})),c=[{number:((o=t==null?void 0:t.length)==null?void 0:o.toString())||"0",label:"Active Artists",change:"+3 this month",icon:Ze,trend:"up"},{number:((d=n==null?void 0:n.length)==null?void 0:d.toString())||"0",label:"Total Bookings",change:"+12% this month",icon:dt,trend:"up"},{number:((h=s==null?void 0:s.length)==null?void 0:h.toString())||"0",label:"Songs Released",change:"+8 this week",icon:Ue,trend:"up"},{number:"4.9/5",label:"User Satisfaction",change:"156 reviews",icon:Rt,trend:"stable"}];return e.jsxs("div",{className:"min-h-screen",children:[e.jsxs("section",{className:"hero-musical relative py-24 overflow-hidden",children:[e.jsx("div",{className:"absolute inset-0 bg-black/20"}),e.jsx("div",{className:"relative max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-fade-in-up",children:e.jsxs("h1",{className:"text-4xl md:text-7xl font-bold mb-6 leading-tight",children:["Music Professional",e.jsx("span",{className:"block gradient-text animate-music-note",children:"Management Platform "})]})}),e.jsx("div",{className:"animate-fade-in-up",style:{animationDelay:"0.2s"},children:e.jsx("p",{className:"text-xl md:text-2xl mb-8 text-blue-100 max-w-3xl mx-auto animate-pulse-slow",children:"Comprehensive artist management, automated booking workflows, contract generation, and revenue optimization for the modern music industry. "})}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center animate-fade-in-up",style:{animationDelay:"0.4s"},children:[e.jsx(Lt,{href:"/artists",children:e.jsxs(E,{size:"lg",className:"btn-musical ripple",children:[e.jsx(Ue,{className:"mr-2 h-5 w-5 animate-bounce-slow"}),"Discover Artists"]})}),e.jsx(Lt,{href:"/booking",children:e.jsxs(E,{size:"lg",className:"btn-secondary-musical ripple",children:[e.jsx(dt,{className:"mr-2 h-5 w-5"}),"Book Now"]})}),e.jsx(Lt,{href:"/services",children:e.jsxs(E,{size:"lg",className:"glass-effect text-white hover:bg-white/20 font-semibold px-8 py-3 ripple",children:[e.jsx(Ze,{className:"mr-2 h-5 w-5"}),"View Services"]})})]})]})})]}),a.length>0&&e.jsx("section",{className:"py-16 bg-gradient-to-br from-blue-50 via-purple-50 to-pink-50 dark:from-blue-950 dark:via-purple-950 dark:to-pink-950",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"text-center mb-12 animate-fade-in-up",children:[e.jsxs(X,{variant:"outline",className:"mb-4 px-4 py-2 bg-gradient-to-r from-blue-500 to-purple-600 text-white border-none animate-shimmer",children:[e.jsx(Rt,{className:"w-4 h-4 mr-2"}),"Featured Artists"]}),e.jsxs("h2",{className:"text-3xl md:text-4xl font-bold mb-4",children:["Discover Our ",e.jsx("span",{className:"gradient-text",children:"Featured Artists"})]}),e.jsx("p",{className:"text-lg text-gray-600 max-w-2xl mx-auto",children:"Professionally managed artists ready for your next event or collaboration "})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:a.map((u,m)=>e.jsx(R,{className:"card-artist group stagger-item transition-all duration-500 hover:scale-105 cursor-pointer",style:{animationDelay:`${m*.1}s`},children:e.jsxs(L,{className:"p-6 relative overflow-hidden",children:[e.jsx("div",{className:"absolute top-0 right-0 w-20 h-20 bg-gradient-to-br from-purple-400/20 to-pink-400/20 rounded-full blur-xl"}),e.jsxs("div",{className:"flex items-center mb-4 relative",children:[e.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-purple-500 via-pink-500 to-orange-500 rounded-full flex items-center justify-center mr-4 group-hover:rotate-12 transition-transform duration-300 animate-pulse-slow",children:e.jsx(Ue,{className:"h-8 w-8 text-white animate-music-note"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-lg group-hover:text-purple-600 transition-colors",children:u.stageName}),e.jsxs("p",{className:"text-gray-600",children:[u.genre||"Multi-Genre"," "]})]})]}),e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs(X,{className:"bg-gradient-to-r from-green-500 to-emerald-500 text-white animate-shimmer",children:[e.jsx(ns,{className:"w-3 h-3 mr-1"}),"Managed"]}),e.jsxs("div",{className:"flex items-center group-hover:scale-110 transition-transform",children:[e.jsx(Rt,{className:"w-4 h-4 fill-yellow-400 text-yellow-400 mr-1 animate-bounce-slow"}),e.jsx("span",{className:"text-sm font-medium",children:"4.9"})]})]}),e.jsx("p",{className:"text-gray-600 text-sm mb-4",children:"Professional artist with management benefits and booking calendar access."}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(Lt,{href:`/artists/${u.userId}`,children:e.jsxs(E,{variant:"outline",size:"sm",className:"flex-1 btn-musical",children:[e.jsx(Ns,{className:"w-4 h-4 mr-1"}),"View Profile"]})}),e.jsx(Lt,{href:"/booking",children:e.jsxs(E,{size:"sm",className:"flex-1 btn-secondary-musical",children:[e.jsx(dt,{className:"w-4 h-4 mr-1"}),"Book Now"]})})]})]})},`featured-artist-${u.userId}-${m}`))}),e.jsx("div",{className:"text-center mt-8",children:e.jsx(Lt,{href:"/artists",children:e.jsxs(E,{variant:"outline",size:"lg",children:["View All Artists",e.jsx(Qa,{className:"ml-2 h-4 w-4"})]})})})]})}),e.jsx("section",{className:"py-16 bg-gradient-to-br from-orange-50 via-yellow-50 to-red-50 dark:from-orange-950 dark:via-yellow-950 dark:to-red-950",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"text-center mb-12 animate-fade-in-up",children:[e.jsxs(X,{variant:"outline",className:"mb-4 px-4 py-2 bg-gradient-to-r from-orange-500 to-red-600 text-white border-none animate-shimmer",children:[e.jsx(In,{className:"w-4 h-4 mr-2"}),"Popular Services"]}),e.jsxs("h2",{className:"text-3xl md:text-4xl font-bold mb-4",children:["Professional ",e.jsx("span",{className:"gradient-text",children:"Music Services"})]}),e.jsx("p",{className:"text-lg text-gray-600 max-w-2xl mx-auto",children:"High-quality professional services to elevate your music career "})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:r.map((u,m)=>e.jsxs(R,{className:"card-booking group stagger-item transition-all duration-500 hover:scale-105 cursor-pointer",style:{animationDelay:`${m*.1}s`},children:[e.jsxs(Y,{className:"relative overflow-hidden",children:[e.jsx("div",{className:"absolute top-0 right-0 w-16 h-16 bg-gradient-to-br from-orange-400/20 to-red-400/20 rounded-full blur-xl"}),e.jsxs("div",{className:"flex items-center justify-between mb-4 relative",children:[e.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-orange-500 to-red-600 rounded-lg flex items-center justify-center group-hover:rotate-12 transition-transform duration-300 animate-pulse-slow",children:e.jsx(u.icon,{className:"h-6 w-6 text-white animate-music-note"})}),e.jsxs(X,{className:"bg-gradient-to-r from-orange-500 to-red-600 text-white animate-shimmer",children:[e.jsx(Is,{className:"w-3 h-3 mr-1"}),"Popular"]})]}),e.jsx(Q,{className:"text-xl group-hover:text-orange-600 transition-colors",children:u.name})]}),e.jsxs(L,{children:[e.jsxs("p",{className:"text-gray-600 mb-4",children:[u.description," "]}),e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("span",{className:"text-2xl font-bold gradient-text group-hover:scale-110 transition-transform",children:u.price}),e.jsx(X,{variant:"outline",className:"bg-gradient-to-r from-green-500 to-emerald-500 text-white border-none",children:u.category})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(Lt,{href:"/services",children:e.jsxs(E,{variant:"outline",size:"sm",className:"flex-1 btn-musical",children:[e.jsx(Ns,{className:"w-4 h-4 mr-1"}),"Learn More"]})}),e.jsx(Lt,{href:"/consultation",children:e.jsxs(E,{size:"sm",className:"flex-1 btn-secondary-musical",children:[e.jsx(Fu,{className:"w-4 h-4 mr-1"}),"Get Started"]})})]})]})]},`popular-service-${u.id}`))}),e.jsx("div",{className:"text-center mt-8",children:e.jsx(Lt,{href:"/services",children:e.jsxs(E,{variant:"outline",size:"lg",children:["View All Services",e.jsx(Qa,{className:"ml-2 h-4 w-4"})]})})})]})}),e.jsx("section",{className:"py-20 bg-gradient-to-br from-green-50 via-emerald-50 to-teal-50 dark:from-green-950 dark:via-emerald-950 dark:to-teal-950",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"text-center mb-16 animate-fade-in-up",children:[e.jsxs(X,{variant:"outline",className:"mb-4 px-4 py-2 bg-gradient-to-r from-green-500 to-emerald-600 text-white border-none animate-shimmer",children:[e.jsx(Ze,{className:"w-4 h-4 mr-2"}),"User Roles"]}),e.jsxs("h2",{className:"text-3xl md:text-4xl font-bold mb-4",children:["Distinct Music Industry ",e.jsx("span",{className:"gradient-text",children:"Membership"})]}),e.jsx("p",{className:"text-xl text-gray-600 max-w-3xl mx-auto",children:"Six distinct user roles with hierarchical permissions and management tier benefits "})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",children:i.map((u,m)=>{const p=u.icon;return e.jsxs(R,{className:`card-musical relative overflow-hidden bg-gradient-to-br ${u.gradient} text-white border-0 group stagger-item transition-all duration-500 hover:scale-105 cursor-pointer`,style:{animationDelay:`${m*.1}s`},children:[e.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 bg-white/10 rounded-full -mr-16 -mt-16 group-hover:scale-110 transition-transform duration-500"}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-white/5 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300"}),e.jsxs(L,{className:"relative z-10 p-6",children:[e.jsx("div",{className:"w-12 h-12 bg-white/20 rounded-lg flex items-center justify-center mb-4 group-hover:rotate-12 transition-transform duration-300 animate-pulse-slow",children:e.jsx(p,{className:"h-6 w-6 text-white animate-music-note"})}),e.jsx("h3",{className:"text-xl font-bold mb-2 group-hover:scale-105 transition-transform",children:u.title}),e.jsxs("p",{className:"text-sm text-gray-200 mb-4",children:[u.description," "]}),e.jsxs(X,{className:"bg-white/20 text-white hover:bg-white/30 animate-shimmer",children:[e.jsx(la,{className:"w-3 h-3 mr-1"}),u.access]})]})]},`user-role-${u.title.replace(/\s+/g,"-").toLowerCase()}-${m}`)})})]})}),e.jsx("section",{className:"py-20 bg-gray-50",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"text-center mb-16",children:[e.jsx("h2",{className:"text-3xl md:text-4xl font-bold text-dark mb-4",children:"Comprehensive Platform Features"}),e.jsx("p",{className:"text-xl text-gray-600 max-w-3xl mx-auto",children:"Everything you need to manage artists, bookings, contracts, and revenue in one platform"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-12 items-center mb-16",children:[e.jsxs("div",{children:[e.jsxs("h3",{className:"text-2xl font-bold text-dark mb-4",children:[e.jsx(dt,{className:"inline text-primary mr-3"}),"Smart Booking Calendar System"]}),e.jsx("p",{className:"text-gray-600 mb-6",children:"Color-coded dual calendar system with role restrictions. Only managed artists, musicians, and professionals can access booking functionalities with automated conflict detection."}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-4 h-4 bg-green-500 rounded mr-3"}),e.jsx("span",{className:"text-sm",children:"Available dates"})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-4 h-4 bg-orange-500 rounded mr-3"}),e.jsx("span",{className:"text-sm",children:"Booked dates"})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-4 h-4 bg-red-500 rounded mr-3"}),e.jsx("span",{className:"text-sm",children:"Unavailable dates"})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-4 h-4 bg-gray-400 rounded mr-3"}),e.jsx("span",{className:"text-sm",children:"Past dates"})]})]})]}),e.jsxs(R,{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h4",{className:"font-semibold text-lg",children:"December 2024"}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx(E,{variant:"ghost",size:"sm",children:e.jsx(qo,{className:"h-4 w-4 rotate-180"})}),e.jsx(E,{variant:"ghost",size:"sm",children:e.jsx(qo,{className:"h-4 w-4"})})]})]}),e.jsxs("div",{className:"grid grid-cols-7 gap-1 text-center text-sm",children:[["S","M","T","W","T","F","S"].map((u,m)=>e.jsx("div",{className:"p-2 font-semibold text-gray-500",children:u},`weekday-${u}-${m}`)),[1,2,3,4].map((u,m)=>e.jsx("div",{className:"p-2 text-gray-400",children:u},`calendar-day-${u}-${m}`)),e.jsx("div",{className:"p-2 bg-green-500 text-white rounded cursor-pointer hover:bg-green-600",children:"5"}),e.jsx("div",{className:"p-2 bg-green-500 text-white rounded cursor-pointer hover:bg-green-600",children:"6"}),e.jsx("div",{className:"p-2 bg-orange-500 text-white rounded",children:"7"})]})]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:l.slice(1).map((u,m)=>{const p=u.icon;return e.jsxs(R,{className:"p-6",children:[e.jsx("div",{className:"w-12 h-12 bg-primary/10 rounded-lg flex items-center justify-center mb-4",children:e.jsx(p,{className:"h-6 w-6 text-primary"})}),e.jsx("h3",{className:"text-xl font-bold mb-3",children:u.title}),e.jsx("p",{className:"text-gray-600",children:u.description})]},`feature-${u.title.replace(/\s+/g,"-").toLowerCase()}-${m}`)})})]})}),e.jsx("section",{className:"py-20 bg-white",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"text-center mb-16",children:[e.jsx("h2",{className:"text-3xl md:text-4xl font-bold text-dark mb-4",children:"Role-Optimized Dashboards"}),e.jsx("p",{className:"text-xl text-gray-600 max-w-3xl mx-auto",children:"Each user role sees a customized dashboard with relevant tools and information"})]}),e.jsx(R,{className:"p-6 bg-gray-50",children:e.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6 mb-6",children:c.map((u,m)=>e.jsxs(R,{className:"p-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:u.label}),e.jsx("p",{className:"text-2xl font-bold text-primary",children:u.number})]}),e.jsxs("div",{className:"text-primary text-xl",children:[m===0&&e.jsx(dt,{}),m===1&&e.jsx(It,{}),m===2&&e.jsx(yn,{}),m===3&&e.jsx(Rt,{})]})]}),e.jsx("p",{className:"text-xs text-green-600 mt-2",children:u.change})]},`stat-${u.label.replace(/\s+/g,"-").toLowerCase()}-${m}`))})})]})}),e.jsx("section",{className:"py-20 bg-gray-50",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"text-center mb-16",children:[e.jsx("h2",{className:"text-3xl md:text-4xl font-bold text-dark mb-4",children:"Professional Music Catalog Management"}),e.jsx("p",{className:"text-xl text-gray-600 max-w-3xl mx-auto",children:"Industry-standard music distribution platform with comprehensive monetization and rights management"})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8 mb-16",children:[e.jsxs(R,{className:"p-6 text-center",children:[e.jsx("div",{className:"w-16 h-16 bg-primary/10 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(Xs,{className:"w-8 h-8 text-primary"})}),e.jsx("h3",{className:"text-xl font-bold mb-3",children:"Smart Upload System"}),e.jsx("p",{className:"text-gray-600 mb-4",children:"ISRC validation, metadata extraction, and automatic quality checks ensure distribution-ready content"}),e.jsx(X,{variant:"secondary",children:"Industry Standard"})]}),e.jsxs(R,{className:"p-6 text-center",children:[e.jsx("div",{className:"w-16 h-16 bg-primary/10 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(It,{className:"w-8 h-8 text-primary"})}),e.jsx("h3",{className:"text-xl font-bold mb-3",children:"Flexible Monetization"}),e.jsx("p",{className:"text-gray-600 mb-4",children:"Free or paid distribution with transparent pricing and 100% base price protection for artists"}),e.jsx(X,{variant:"secondary",children:"Revenue Protection"})]}),e.jsxs(R,{className:"p-6 text-center",children:[e.jsx("div",{className:"w-16 h-16 bg-primary/10 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(Bt,{className:"w-8 h-8 text-primary"})}),e.jsx("h3",{className:"text-xl font-bold mb-3",children:"Rights Management"}),e.jsx("p",{className:"text-gray-600 mb-4",children:"Role-based access controls with preview management and digital rights protection"}),e.jsx(X,{variant:"secondary",children:"Secure Platform"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-12 items-center",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-2xl font-bold mb-6",children:"Technical Requirements & Standards"}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-start space-x-4",children:[e.jsx("div",{className:"w-10 h-10 bg-green-100 rounded-full flex items-center justify-center",children:e.jsx(ir,{className:"w-6 h-6 text-green-600"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold mb-2",children:"ISRC Code Validation"}),e.jsx("p",{className:"text-gray-600",children:"Mandatory ISRC codes for global distribution, royalty tracking, and rights management compliance"}),e.jsxs("div",{className:"mt-2 flex items-center space-x-2",children:[e.jsx(X,{variant:"outline",className:"text-xs",children:"Required"}),e.jsx("span",{className:"text-xs text-gray-500",children:"Format: CC-XXX-YY-NNNNN"})]})]})]}),e.jsxs("div",{className:"flex items-start space-x-4",children:[e.jsx("div",{className:"w-10 h-10 bg-blue-100 rounded-full flex items-center justify-center",children:e.jsx(Vn,{className:"w-6 h-6 text-blue-600"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold mb-2",children:"Professional Cover Art Standards"}),e.jsx("p",{className:"text-gray-600",children:"Minimum 3000x3000px resolution in RGB color space for streaming platform requirements"}),e.jsxs("div",{className:"mt-2 flex items-center space-x-2",children:[e.jsx(X,{variant:"outline",className:"text-xs",children:"3000x3000px+"}),e.jsx(X,{variant:"outline",className:"text-xs",children:"RGB"}),e.jsx(X,{variant:"outline",className:"text-xs",children:"300 DPI"})]})]})]}),e.jsxs("div",{className:"flex items-start space-x-4",children:[e.jsx("div",{className:"w-10 h-10 bg-purple-100 rounded-full flex items-center justify-center",children:e.jsx(Ue,{className:"w-6 h-6 text-purple-600"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold mb-2",children:"Advanced Audio Processing"}),e.jsx("p",{className:"text-gray-600",children:"Automated preview generation, waveform analysis, and quality optimization"}),e.jsxs("div",{className:"mt-2 flex items-center space-x-2",children:[e.jsx(X,{variant:"outline",className:"text-xs",children:"WAV/FLAC"}),e.jsx(X,{variant:"outline",className:"text-xs",children:"24-bit/96kHz"}),e.jsx(X,{variant:"outline",className:"text-xs",children:"Auto Preview"})]})]})]}),e.jsxs("div",{className:"flex items-start space-x-4",children:[e.jsx("div",{className:"w-10 h-10 bg-orange-100 rounded-full flex items-center justify-center",children:e.jsx(Fs,{className:"w-6 h-6 text-orange-600"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold mb-2",children:"E-commerce Integration"}),e.jsx("p",{className:"text-gray-600",children:"Seamless shopping cart integration with digital download capabilities and inventory management"}),e.jsxs("div",{className:"mt-2 flex items-center space-x-2",children:[e.jsx(X,{variant:"outline",className:"text-xs",children:"Digital Downloads"}),e.jsx(X,{variant:"outline",className:"text-xs",children:"Cart System"})]})]})]})]})]}),e.jsxs("div",{className:"space-y-8",children:[e.jsxs(R,{className:"p-6",children:[e.jsx("h4",{className:"text-xl font-bold mb-6",children:"Role-Based Preview System"}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("h5",{className:"font-semibold text-gray-700",children:"Independent Artists"}),e.jsx(X,{variant:"outline",children:"Standard"})]}),e.jsx("p",{className:"text-sm text-gray-600 mb-3",children:"30-second fixed previews from track beginning"}),e.jsxs("div",{className:"bg-gray-100 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[e.jsx(Gn,{className:"w-5 h-5 text-gray-500"}),e.jsx("div",{className:"flex-1 bg-gray-300 rounded-full h-2",children:e.jsx("div",{className:"bg-gray-500 rounded-full h-2 w-1/3"})}),e.jsx("span",{className:"text-xs text-gray-500 font-mono",children:"0:30 / 3:45"})]}),e.jsxs("div",{className:"flex items-center space-x-2 text-xs text-gray-500",children:[e.jsx(Ul,{className:"w-3 h-3"}),e.jsx("span",{children:"Fixed 30s preview"})]})]})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("h5",{className:"font-semibold text-primary",children:"Managed Artists"}),e.jsx(X,{className:"bg-primary",children:"Premium"})]}),e.jsx("p",{className:"text-sm text-gray-600 mb-3",children:"Flexible 15-second to full-track previews with custom controls"}),e.jsxs("div",{className:"bg-primary/5 rounded-lg p-4 border border-primary/20",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-3",children:[e.jsx(Gn,{className:"w-5 h-5 text-primary"}),e.jsx("div",{className:"flex-1 bg-primary/20 rounded-full h-2",children:e.jsx("div",{className:"bg-primary rounded-full h-2 w-3/4"})}),e.jsx("span",{className:"text-xs text-primary font-mono",children:"2:51 / 3:45"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex space-x-2",children:[e.jsx(E,{size:"sm",variant:"outline",className:"text-xs h-6",children:"15s"}),e.jsx(E,{size:"sm",variant:"outline",className:"text-xs h-6",children:"30s"}),e.jsx(E,{size:"sm",className:"text-xs h-6 bg-primary",children:"Full"})]}),e.jsxs("div",{className:"flex items-center space-x-2 text-xs text-primary",children:[e.jsx(l4,{className:"w-3 h-3"}),e.jsx("span",{children:"Custom preview control"})]})]})]})]})]})]}),e.jsxs(R,{className:"p-6 bg-gradient-to-br from-primary/5 to-primary/10 border-primary/20",children:[e.jsx("h4",{className:"text-lg font-bold mb-4 text-primary",children:"Revenue Transparency"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Artist Base Price:"}),e.jsx("span",{className:"font-semibold",children:"100% Protected"})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Platform Fees:"}),e.jsx("span",{className:"font-semibold",children:"Transparent"})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Processing:"}),e.jsx("span",{className:"font-semibold",children:"Itemized"})]}),e.jsx(ss,{className:"my-2"}),e.jsxs("div",{className:"flex justify-between items-center font-bold text-primary",children:[e.jsx("span",{children:"Artist Payout:"}),e.jsx("span",{children:"Guaranteed Base"})]})]})]})]})]}),e.jsxs("div",{className:"mt-16 text-center",children:[e.jsx("h3",{className:"text-2xl font-bold mb-4",children:"Ready to Upload Your Music?"}),e.jsx("p",{className:"text-gray-600 mb-6 max-w-2xl mx-auto",children:"Join thousands of artists using our professional catalog management system with industry-standard requirements and transparent revenue sharing"}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:[e.jsxs(E,{size:"lg",className:"bg-primary hover:bg-primary/90",children:[e.jsx(Xs,{className:"w-5 h-5 mr-2"}),"Start Uploading Music"]}),e.jsxs(E,{size:"lg",variant:"outline",children:[e.jsx(xt,{className:"w-5 h-5 mr-2"}),"View Upload Guidelines"]})]})]})]})}),e.jsx("section",{className:"py-20 bg-white",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"text-center mb-16",children:[e.jsx("h2",{className:"text-3xl md:text-4xl font-bold text-dark mb-4",children:"Financial Transparency"}),e.jsx("p",{className:"text-xl text-gray-600 max-w-3xl mx-auto",children:"Clear revenue breakdown ensuring artists receive 100% of their set base price"})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-12 items-center",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-2xl font-bold mb-6",children:"Revenue Breakdown Example"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center p-4 bg-gray-50 rounded-lg",children:[e.jsx("span",{className:"font-medium",children:"Artist Base Price"}),e.jsx("span",{className:"text-xl font-bold text-green-600",children:"$1,000.00"})]}),e.jsxs("div",{className:"flex justify-between items-center p-4 bg-gray-50 rounded-lg",children:[e.jsx("span",{className:"font-medium",children:"Platform Fee (5%)"}),e.jsx("span",{className:"text-lg font-semibold",children:"$50.00"})]}),e.jsxs("div",{className:"flex justify-between items-center p-4 bg-gray-50 rounded-lg",children:[e.jsx("span",{className:"font-medium",children:"Processing Fee (2.9%)"}),e.jsx("span",{className:"text-lg font-semibold",children:"$30.00"})]}),e.jsxs("div",{className:"flex justify-between items-center p-4 bg-gray-50 rounded-lg",children:[e.jsx("span",{className:"font-medium",children:"Additional Services"}),e.jsx("span",{className:"text-lg font-semibold",children:"$50.00"})]}),e.jsx("div",{className:"border-t-2 border-gray-200 pt-4",children:e.jsxs("div",{className:"flex justify-between items-center p-4 bg-primary/10 rounded-lg",children:[e.jsx("span",{className:"text-xl font-bold",children:"Total Client Investment"}),e.jsx("span",{className:"text-2xl font-bold text-primary",children:"$1,130.00"})]})})]}),e.jsxs("div",{className:"mt-8",children:[e.jsx("h4",{className:"text-lg font-semibold mb-4",children:"Key Benefits"}),e.jsxs("ul",{className:"space-y-2 text-gray-600",children:[e.jsxs("li",{className:"flex items-center",children:[e.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full mr-3"}),"Artist receives full $1,000 base price with no deductions"]}),e.jsxs("li",{className:"flex items-center",children:[e.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full mr-3"}),"Complete pricing transparency for all stakeholders"]}),e.jsxs("li",{className:"flex items-center",children:[e.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full mr-3"}),"Platform and processing fees clearly itemized"]}),e.jsxs("li",{className:"flex items-center",children:[e.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full mr-3"}),"Additional services priced separately and transparently"]})]})]})]}),e.jsxs(R,{className:"p-8",children:[e.jsxs("div",{className:"text-center mb-6",children:[e.jsx("h4",{className:"text-xl font-bold mb-2",children:"Artist Protection Guarantee"}),e.jsx("p",{className:"text-gray-600",children:"100% base price protection policy"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"relative",children:[e.jsxs("div",{className:"flex justify-between mb-2",children:[e.jsx("span",{className:"text-sm font-medium",children:"Artist Payout"}),e.jsx("span",{className:"text-sm font-medium",children:"88.5%"})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-3",children:e.jsx("div",{className:"bg-green-500 h-3 rounded-full",style:{width:"88.5%"}})})]}),e.jsxs("div",{className:"relative",children:[e.jsxs("div",{className:"flex justify-between mb-2",children:[e.jsx("span",{className:"text-sm font-medium",children:"Platform Operations"}),e.jsx("span",{className:"text-sm font-medium",children:"4.4%"})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-3",children:e.jsx("div",{className:"bg-blue-500 h-3 rounded-full",style:{width:"4.4%"}})})]}),e.jsxs("div",{className:"relative",children:[e.jsxs("div",{className:"flex justify-between mb-2",children:[e.jsx("span",{className:"text-sm font-medium",children:"Processing Fees"}),e.jsx("span",{className:"text-sm font-medium",children:"2.7%"})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-3",children:e.jsx("div",{className:"bg-yellow-500 h-3 rounded-full",style:{width:"2.7%"}})})]}),e.jsxs("div",{className:"relative",children:[e.jsxs("div",{className:"flex justify-between mb-2",children:[e.jsx("span",{className:"text-sm font-medium",children:"Additional Services"}),e.jsx("span",{className:"text-sm font-medium",children:"4.4%"})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-3",children:e.jsx("div",{className:"bg-purple-500 h-3 rounded-full",style:{width:"4.4%"}})})]})]}),e.jsxs("div",{className:"mt-6 p-4 bg-green-50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center text-green-700",children:[e.jsx(Rt,{className:"h-5 w-5 mr-2"}),e.jsx("span",{className:"font-semibold",children:"Artist First Policy"})]}),e.jsx("p",{className:"text-sm text-green-600 mt-1",children:"Artists always receive their full base price regardless of additional platform fees"})]})]})]})]})}),e.jsx("section",{className:"py-20 bg-gradient-to-br from-dark to-gray-800 text-white",children:e.jsxs("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 text-center",children:[e.jsx("h2",{className:"text-3xl md:text-4xl font-bold mb-6",children:"Ready to Transform Your Music Career?"}),e.jsx("p",{className:"text-xl text-gray-300 mb-8",children:"Join thousands of artists, musicians, and industry professionals already using Wai'tuMusic to streamline their operations and maximize their revenue."}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-12",children:[{icon:Fu,title:"Quick Setup",desc:"Get started in minutes with our intuitive onboarding process"},{icon:jn,title:"Expert Support",desc:"24/7 support from music industry professionals who understand your needs"},{icon:Rh,title:"Proven Results",desc:"Artists report 40% increase in booking efficiency and revenue optimization"}].map((u,m)=>{const p=u.icon;return e.jsxs(R,{className:"glass-effect text-white border-white/20 p-6",children:[e.jsx("div",{className:"w-12 h-12 bg-primary rounded-lg flex items-center justify-center mx-auto mb-4",children:e.jsx(p,{className:"h-6 w-6 text-white"})}),e.jsx("h3",{className:"font-semibold text-lg mb-2",children:u.title}),e.jsx("p",{className:"text-gray-300 text-sm",children:u.desc})]},`benefit-${u.title.replace(/\s+/g,"-").toLowerCase()}-${m}`)})}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:[e.jsx(Lt,{href:"/register",children:e.jsxs(E,{size:"lg",className:"bg-primary hover:bg-primary/90",children:[e.jsx(Gn,{className:"mr-2 h-5 w-5"}),rc.hero.cta.primary]})}),e.jsx(Lt,{href:"/booking",children:e.jsxs(E,{size:"lg",variant:"outline",className:"bg-primary hover:bg-primary/90 hover:text-dark",children:[e.jsx(dt,{className:"mr-2 h-5 w-5"}),rc.hero.cta.secondary]})}),e.jsx(Lt,{href:"/login",children:e.jsxs(E,{size:"lg",className:"bg-secondary hover:bg-secondary/90",children:[e.jsx(Ze,{className:"mr-2 h-5 w-5"}),rc.hero.cta.tertiary]})})]}),e.jsx("div",{className:"mt-8 text-sm text-gray-400",children:e.jsx("p",{children:"No credit card required  Full feature access  Cancel anytime"})})]})})]})}function W$(t){const s=H$(t),n=N.forwardRef((a,r)=>{const{children:i,...l}=a,c=N.Children.toArray(i),o=c.find(Y$);if(o){const d=o.props.children,h=c.map(u=>u===o?N.Children.count(d)>1?N.Children.only(null):N.isValidElement(d)?d.props.children:null:u);return e.jsx(s,{...l,ref:r,children:N.isValidElement(d)?N.cloneElement(d,void 0,h):null})}return e.jsx(s,{...l,ref:r,children:i})});return n.displayName=`${t}.Slot`,n}function H$(t){const s=N.forwardRef((n,a)=>{const{children:r,...i}=n;if(N.isValidElement(r)){const l=Z$(r),c=Q$(i,r.props);return r.type!==N.Fragment&&(c.ref=a?Yo(a,l):l),N.cloneElement(r,c)}return N.Children.count(r)>1?N.Children.only(null):null});return s.displayName=`${t}.SlotClone`,s}var K$=Symbol("radix.slottable");function Y$(t){return N.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===K$}function Q$(t,s){const n={...s};for(const a in s){const r=t[a],i=s[a];/^on[A-Z]/.test(a)?r&&i?n[a]=(...c)=>{const o=i(...c);return r(...c),o}:r&&(n[a]=r):a==="style"?n[a]={...r,...i}:a==="className"&&(n[a]=[r,i].filter(Boolean).join(" "))}return{...t,...n}}function Z$(t){var a,r;let s=(a=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:a.get,n=s&&"isReactWarning"in s&&s.isReactWarning;return n?t.ref:(s=(r=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:r.get,n=s&&"isReactWarning"in s&&s.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}var X$=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],nT=X$.reduce((t,s)=>{const n=W$(`Primitive.${s}`),a=N.forwardRef((r,i)=>{const{asChild:l,...c}=r,o=l?n:s;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),e.jsx(o,{...c,ref:i})});return a.displayName=`Primitive.${s}`,{...t,[s]:a}},{}),N0="Progress",b0=100,[J$,BJ]=Yn(N0),[eB,tB]=J$(N0),aT=N.forwardRef((t,s)=>{const{__scopeProgress:n,value:a=null,max:r,getValueLabel:i=sB,...l}=t;(r||r===0)&&!Aw(r)&&console.error(nB(`${r}`,"Progress"));const c=Aw(r)?r:b0;a!==null&&!Pw(a,c)&&console.error(aB(`${a}`,"Progress"));const o=Pw(a,c)?a:null,d=Ox(o)?i(o,c):void 0;return e.jsx(eB,{scope:n,value:o,max:c,children:e.jsx(nT.div,{"aria-valuemax":c,"aria-valuemin":0,"aria-valuenow":Ox(o)?o:void 0,"aria-valuetext":d,role:"progressbar","data-state":lT(o,c),"data-value":o??void 0,"data-max":c,...l,ref:s})})});aT.displayName=N0;var rT="ProgressIndicator",iT=N.forwardRef((t,s)=>{const{__scopeProgress:n,...a}=t,r=tB(rT,n);return e.jsx(nT.div,{"data-state":lT(r.value,r.max),"data-value":r.value??void 0,"data-max":r.max,...a,ref:s})});iT.displayName=rT;function sB(t,s){return`${Math.round(t/s*100)}%`}function lT(t,s){return t==null?"indeterminate":t===s?"complete":"loading"}function Ox(t){return typeof t=="number"}function Aw(t){return Ox(t)&&!isNaN(t)&&t>0}function Pw(t,s){return Ox(t)&&!isNaN(t)&&t<=s&&t>=0}function nB(t,s){return`Invalid prop \`max\` of value \`${t}\` supplied to \`${s}\`. Only numbers greater than 0 are valid max values. Defaulting to \`${b0}\`.`}function aB(t,s){return`Invalid prop \`value\` of value \`${t}\` supplied to \`${s}\`. The \`value\` prop must be:
  - a positive number
  - less than the value passed to \`max\` (or ${b0} if no \`max\` prop is set)
  - \`null\` or \`undefined\` if the progress is indeterminate.

Defaulting to \`null\`.`}var oT=aT,rB=iT;const qs=N.forwardRef(({className:t,value:s,...n},a)=>e.jsx(oT,{ref:a,className:Je("relative h-4 w-full overflow-hidden rounded-full bg-secondary",t),...n,children:e.jsx(rB,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:`translateX(-${100-(s||0)}%)`}})}));qs.displayName=oT.displayName;function iB({isOpen:t,onComplete:s,onClose:n,userId:a,currentStep:r=1}){const{toast:i}=nt(),l=Tt(),[c,o]=N.useState(r),[d,h]=N.useState({role:"fan",interests:[],goals:[],experience:"beginner"}),[u,m]=N.useState([]),[p,g]=N.useState(!1),x=[{id:"welcome",title:"Welcome to Wai'tuMusic",description:"Let's personalize your experience",icon:e.jsx(ld,{className:"h-6 w-6"}),completed:c>1,optional:!1},{id:"role",title:"Choose Your Role",description:"Help us understand how you'll use the platform",icon:e.jsx(cn,{className:"h-6 w-6"}),completed:c>2,optional:!1},{id:"preferences",title:"Your Preferences",description:"Tell us about your musical interests and goals",icon:e.jsx(Es,{className:"h-6 w-6"}),completed:c>3,optional:!1},{id:"ai-analysis",title:"AI Personalization",description:"Our AI creates your personalized experience",icon:e.jsx(ad,{className:"h-6 w-6"}),completed:c>4,optional:!1},{id:"recommendations",title:"Your Recommendations",description:"Discover features and opportunities tailored for you",icon:e.jsx(Bl,{className:"h-6 w-6"}),completed:c>5,optional:!1}],v=Xe({mutationFn:async C=>await(await xe("/api/onboarding/progress",{method:"POST",body:{userId:a,step:c,...C}})).json(),onSuccess:()=>{l.invalidateQueries({queryKey:["/api/user/profile"]})}}),y=async()=>{g(!0);try{const w=await(await xe("/api/onboarding/ai-recommendations",{method:"POST",body:{userId:a,profile:d}})).json();m(w.recommendations||f)}catch{m(f)}finally{g(!1)}},f=[{type:"feature",title:"Explore Artist Profiles",description:`Discover ${d.role==="fan"?"amazing artists":"potential collaborators"} in your favorite genres`,priority:"high",actionUrl:"/artists",actionText:"Browse Artists"},{type:"action",title:"Complete Your Profile",description:"Add more details to help others discover and connect with you",priority:"high",actionUrl:"/profile",actionText:"Edit Profile"},{type:"opportunity",title:"Book Your First Event",description:"Ready to experience live music? Browse upcoming events and book tickets",priority:"medium",actionUrl:"/bookings",actionText:"Explore Events"},{type:"connection",title:"Join the Community",description:"Connect with other music lovers and industry professionals",priority:"medium",actionUrl:"/community",actionText:"Join Now"}],b=[{value:"artist",label:"Artist",description:"I create and perform music",icon:e.jsx(Ue,{className:"h-4 w-4"})},{value:"musician",label:"Musician",description:"I play instruments or provide musical services",icon:e.jsx(Ze,{className:"h-4 w-4"})},{value:"professional",label:"Music Professional",description:"I work in the music industry",icon:e.jsx(Os,{className:"h-4 w-4"})},{value:"fan",label:"Music Fan",description:"I love music and want to discover artists",icon:e.jsx(gn,{className:"h-4 w-4"})}],j=["Caribbean Music","Afrobeats","Hip-Hop","R&B","Neo Soul","Dancehall","Reggae","Pop","Jazz","Gospel","Soca","Calypso","Electronic","World Music"],S={artist:["Build fanbase","Book more gigs","Release music","Collaborate","Get discovered"],musician:["Find work opportunities","Network with artists","Showcase skills","Join bands"],professional:["Find clients","Offer services","Network","Build reputation"],fan:["Discover new music","Attend events","Support artists","Connect with community"]},k=()=>{c===4&&y(),c<5&&(o(c+1),v.mutate(d))},T=()=>{v.mutate({...d,completed:!0}),i({title:"Welcome aboard!",description:"Your personalized experience is ready. Enjoy exploring Wai'tuMusic!"}),s()},A=C=>{switch(C){case"feature":return e.jsx(Rt,{className:"h-5 w-5 text-blue-500"});case"action":return e.jsx(In,{className:"h-5 w-5 text-orange-500"});case"opportunity":return e.jsx(dt,{className:"h-5 w-5 text-green-500"});case"connection":return e.jsx(Ze,{className:"h-5 w-5 text-purple-500"});default:return e.jsx(Bl,{className:"h-5 w-5 text-yellow-500"})}};return t?e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:e.jsxs(R,{className:"w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[e.jsxs(Y,{children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs(Q,{className:"flex items-center gap-2",children:[e.jsx(ld,{className:"h-6 w-6 text-purple-600"}),"Intelligent Onboarding"]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(X,{variant:"outline",children:[c," of 5"]}),n&&e.jsx(E,{variant:"ghost",size:"sm",onClick:n,className:"h-8 w-8 p-0",children:e.jsx(Xt,{className:"h-4 w-4"})})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(qs,{value:c/5*100,className:"h-2"}),e.jsxs("div",{className:"flex justify-between text-xs text-muted-foreground",children:[e.jsx("span",{children:"Getting started"}),e.jsxs("span",{children:[Math.round(c/5*100),"% complete"]})]})]}),e.jsx("div",{className:"flex items-center gap-2 mt-4 overflow-x-auto",children:x.map((C,w)=>e.jsxs("div",{className:"flex items-center gap-2 flex-shrink-0",children:[e.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center text-xs ${C.completed?"bg-green-500 text-white":c===w+1?"bg-purple-600 text-white":"bg-gray-200 text-gray-600"}`,children:C.completed?e.jsx(ct,{className:"h-4 w-4"}):w+1}),w<x.length-1&&e.jsx(Qa,{className:"h-3 w-3 text-gray-400"})]},C.id))})]}),e.jsxs(L,{className:"space-y-6",children:[c===1&&e.jsxs("div",{className:"text-center space-y-6",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold mb-2",children:"Welcome to Wai'tuMusic! "}),e.jsx("p",{className:"text-muted-foreground",children:"We're excited to help you discover, connect, and thrive in the Caribbean music scene. Let's create a personalized experience just for you."})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"p-4 border rounded-lg text-center",children:[e.jsx(Ue,{className:"h-8 w-8 mx-auto mb-2 text-blue-500"}),e.jsx("h3",{className:"font-medium",children:"Discover"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Find amazing Caribbean artists"})]}),e.jsxs("div",{className:"p-4 border rounded-lg text-center",children:[e.jsx(Ze,{className:"h-8 w-8 mx-auto mb-2 text-green-500"}),e.jsx("h3",{className:"font-medium",children:"Connect"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Network with music professionals"})]}),e.jsxs("div",{className:"p-4 border rounded-lg text-center",children:[e.jsx(Rt,{className:"h-8 w-8 mx-auto mb-2 text-purple-500"}),e.jsx("h3",{className:"font-medium",children:"Grow"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Build your music career"})]})]}),e.jsxs(E,{onClick:k,className:"w-full",children:["Let's Get Started ",e.jsx(Qa,{className:"h-4 w-4 ml-2"})]})]}),c===2&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("h2",{className:"text-xl font-bold mb-2",children:"What describes you best?"}),e.jsx("p",{className:"text-muted-foreground",children:"Choose the role that best fits how you'll use Wai'tuMusic"})]}),e.jsx("div",{className:"space-y-3",children:b.map(C=>e.jsx("div",{className:`p-4 border rounded-lg cursor-pointer transition-all ${d.role===C.value?"bg-blue-50 border-blue-200":"hover:bg-gray-50"}`,onClick:()=>h({...d,role:C.value}),children:e.jsxs("div",{className:"flex items-center gap-3",children:[C.icon,e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium",children:C.label}),e.jsx("p",{className:"text-sm text-muted-foreground",children:C.description})]}),d.role===C.value&&e.jsx(ct,{className:"h-5 w-5 text-blue-500 ml-auto"})]})},C.value))}),e.jsxs(E,{onClick:k,className:"w-full",disabled:!d.role,children:["Continue ",e.jsx(Qa,{className:"h-4 w-4 ml-2"})]})]}),c===3&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("h2",{className:"text-xl font-bold mb-2",children:"Tell us about your musical interests"}),e.jsx("p",{className:"text-muted-foreground",children:"This helps us recommend the perfect content for you"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Musical Genres (select all that apply)"}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-2",children:j.map(C=>e.jsx(E,{variant:d.interests.includes(C)?"default":"outline",size:"sm",onClick:()=>{const w=d.interests.includes(C)?d.interests.filter(P=>P!==C):[...d.interests,C];h({...d,interests:w})},children:C},C))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Your Goals"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2",children:S[d.role].map(C=>e.jsx(E,{variant:d.goals.includes(C)?"default":"outline",size:"sm",onClick:()=>{const w=d.goals.includes(C)?d.goals.filter(P=>P!==C):[...d.goals,C];h({...d,goals:w})},children:C},C))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Experience Level"}),e.jsxs(Re,{value:d.experience,onValueChange:C=>h({...d,experience:C}),children:[e.jsx(Me,{children:e.jsx(Oe,{placeholder:"Select your experience level"})}),e.jsxs(_e,{children:[e.jsx(U,{value:"beginner",children:"Beginner - Just getting started"}),e.jsx(U,{value:"intermediate",children:"Intermediate - Some experience"}),e.jsx(U,{value:"professional",children:"Professional - Industry experience"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Location (Optional)"}),e.jsx($,{placeholder:"City, Country",value:d.location||"",onChange:C=>h({...d,location:C.target.value})})]})]}),e.jsxs(E,{onClick:k,className:"w-full",disabled:d.interests.length===0||d.goals.length===0,children:["Continue ",e.jsx(Qa,{className:"h-4 w-4 ml-2"})]})]}),c===4&&e.jsxs("div",{className:"text-center space-y-6",children:[e.jsxs("div",{children:[e.jsx(ad,{className:"h-16 w-16 mx-auto mb-4 text-purple-600"}),e.jsx("h2",{className:"text-xl font-bold mb-2",children:"Creating Your Personalized Experience"}),e.jsx("p",{className:"text-muted-foreground",children:"Our AI is analyzing your preferences to create personalized recommendations and features just for you."})]}),p?e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"animate-spin w-8 h-8 border-4 border-purple-600 border-t-transparent rounded-full mx-auto"}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-sm",children:"Analyzing your musical preferences..."}),e.jsx(qs,{value:75,className:"h-2"})]})]}):e.jsxs("div",{className:"space-y-4",children:[e.jsx(ct,{className:"h-16 w-16 mx-auto text-green-500"}),e.jsx("p",{className:"text-green-600 font-medium",children:"Analysis Complete!"}),e.jsxs(E,{onClick:k,className:"w-full",children:["View My Recommendations ",e.jsx(Qa,{className:"h-4 w-4 ml-2"})]})]})]}),c===5&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsx(la,{className:"h-12 w-12 mx-auto mb-4 text-yellow-500"}),e.jsx("h2",{className:"text-xl font-bold mb-2",children:"Your Personalized Recommendations"}),e.jsx("p",{className:"text-muted-foreground",children:"Based on your preferences, here's what we recommend to get you started"})]}),e.jsx("div",{className:"space-y-4",children:u.map((C,w)=>e.jsx("div",{className:"p-4 border rounded-lg",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex items-start gap-3 flex-1",children:[A(C.type),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium",children:C.title}),e.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:C.description}),e.jsxs(X,{variant:C.priority==="high"?"destructive":C.priority==="medium"?"default":"secondary",children:[C.priority," priority"]})]})]}),C.actionUrl&&e.jsx(E,{size:"sm",variant:"outline",children:C.actionText||"Learn More"})]})},w))}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx(E,{variant:"outline",onClick:()=>o(4),children:"Back"}),e.jsxs(E,{onClick:T,className:"flex-1",children:["Complete Setup ",e.jsx(ct,{className:"h-4 w-4 ml-2"})]})]})]})]})]})}):null}const lB={superadmin:"Platform Maestro",admin:"Music Director",managed_artist:"Star Talent",artist:"Rising Artist",managed_musician:"Studio Pro",musician:"Session Player",managed_professional:"Industry Expert",professional:"Music Professional",fan:"Music Lover"},oB=t=>lB[t]||t,cB=pe.object({email:pe.string().email("Please enter a valid email address"),password:pe.string().min(1,"Password is required")});function dB(){const[,t]=As(),[s,n]=N.useState(!1),[a,r]=N.useState(!1),[i,l]=N.useState(null),{login:c,user:o}=_s(),{data:d}=ke({queryKey:["/api/demo-mode"],staleTime:5*60*1e3}),h=Cn({resolver:kn(cB),defaultValues:{email:"",password:""}}),u=async y=>{n(!0);try{await c(y.email,y.password)&&setTimeout(()=>{o!=null&&o.id&&localStorage.getItem(`onboarding_completed_${o.id}`)!=="true"?(l(o.id),r(!0)):t("/dashboard")},100)}finally{n(!1)}},{data:m}=ke({queryKey:["/api/demo-users"],enabled:(d==null?void 0:d.demoMode)===!0,staleTime:5*60*1e3}),p=(d==null?void 0:d.demoMode)??!1,g=async(y,f)=>{h.setValue("email",y),h.setValue("password",f),await u({email:y,password:f})},x=()=>{i&&localStorage.setItem(`onboarding_completed_${i}`,"true"),r(!1),t("/dashboard")},v=()=>{r(!1),t("/dashboard")};return e.jsxs("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-primary to-secondary px-4",children:[e.jsxs("div",{className:"w-full max-w-md space-y-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"mx-auto h-12 w-12 bg-white rounded-full flex items-center justify-center mb-4",children:e.jsx(Ue,{className:"h-6 w-6 text-primary"})}),e.jsx("h1",{className:"text-3xl font-bold text-white",children:dv.name}),e.jsx("p",{className:"text-gray-200",children:or.subtitle})]}),e.jsxs(R,{className:"bg-white/95 backdrop-blur-sm border-0 shadow-2xl",children:[e.jsxs(Y,{children:[e.jsx(Q,{children:or.title}),e.jsx(rt,{children:or.description})]}),e.jsxs(L,{children:[e.jsx(On,{...h,children:e.jsxs("form",{onSubmit:h.handleSubmit(u),className:"space-y-4",children:[e.jsx($e,{control:h.control,name:"email",render:({field:y})=>e.jsxs(Fe,{children:[e.jsx(qe,{children:or.form.email.label}),e.jsx(Le,{children:e.jsx($,{placeholder:or.form.email.placeholder,...y})}),e.jsx(ze,{})]})}),e.jsx($e,{control:h.control,name:"password",render:({field:y})=>e.jsxs(Fe,{children:[e.jsx(qe,{children:or.form.password.label}),e.jsx(Le,{children:e.jsx($,{type:"password",placeholder:or.form.password.placeholder,...y})}),e.jsx(ze,{})]})}),e.jsx(E,{type:"submit",className:"w-full gradient-primary",disabled:s,children:s?e.jsxs(e.Fragment,{children:[e.jsx(oa,{className:"mr-2 h-4 w-4 animate-spin"}),or.form.submitting]}):or.form.submit})]})}),p&&m&&Array.isArray(m)&&m.length>0&&e.jsxs("div",{className:"mt-6",children:[e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-0 flex items-center",children:e.jsx("div",{className:"w-full border-t border-gray-300"})}),e.jsx("div",{className:"relative flex justify-center text-sm",children:e.jsx("span",{className:"px-2 bg-white text-gray-500",children:or.demoSection.title})})]}),e.jsx("div",{className:"mt-4 space-y-2 max-h-48 overflow-y-auto",children:m.map((y,f)=>e.jsx(E,{variant:"outline",className:"w-full text-left justify-start",onClick:()=>g(y.email,"demo123"),disabled:s,children:e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:y.fullName}),e.jsx("div",{className:"text-xs text-blue-600 font-medium",children:oB(y.roleName)}),e.jsx("div",{className:"text-xs text-gray-500",children:y.email})]})},f))})]}),e.jsxs("div",{className:"mt-6 text-center text-sm",children:[e.jsxs("span",{className:"text-gray-600",children:[or.footer.noAccount," "]}),e.jsx(Lt,{href:"/register",className:"text-primary hover:underline font-medium",children:or.footer.signUp})]})]})]})]}),a&&i&&e.jsx(iB,{isOpen:a,userId:i,onComplete:x,onClose:v})]})}const uB=pe.object({fullName:pe.string().min(2,"Full name must be at least 2 characters"),email:pe.string().email("Please enter a valid email address"),password:pe.string().min(8,"Password must be at least 8 characters"),confirmPassword:pe.string().min(8,"Please confirm your password"),roleId:pe.string().min(1,"Please select a role")}).refine(t=>t.password===t.confirmPassword,{message:"Passwords don't match",path:["confirmPassword"]});function mB(){const[,t]=As(),[s,n]=N.useState(!1),{register:a}=_s(),{data:r=[]}=ke({queryKey:["/api/roles"]}),i=Cn({resolver:kn(uB),defaultValues:{fullName:"",email:"",password:"",confirmPassword:"",roleId:""}}),l=async o=>{n(!0);try{await a({fullName:o.fullName,email:o.email,passwordHash:o.password,roleId:parseInt(o.roleId)})&&t("/dashboard")}catch(d){console.error("Registration error:",d)}finally{n(!1)}},c=Array.isArray(r)?r.filter(o=>["fan","artist","musician","professional"].includes(o.name)):[];return e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-primary to-secondary px-4 py-8",children:e.jsxs("div",{className:"w-full max-w-md space-y-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"mx-auto h-12 w-12 bg-white rounded-full flex items-center justify-center mb-4",children:e.jsx(Ue,{className:"h-6 w-6 text-primary"})}),e.jsx("h1",{className:"text-3xl font-bold text-white",children:"Wai'tuMusic"}),e.jsx("p",{className:"text-gray-200",children:"Create your account"})]}),e.jsxs(R,{className:"bg-white/95 backdrop-blur-sm border-0 shadow-2xl",children:[e.jsxs(Y,{children:[e.jsx(Q,{children:"Get Started"}),e.jsx(rt,{children:"Join the professional music management platform"})]}),e.jsxs(L,{children:[e.jsx(On,{...i,children:e.jsxs("form",{onSubmit:i.handleSubmit(l),className:"space-y-4",children:[e.jsx($e,{control:i.control,name:"fullName",render:({field:o})=>e.jsxs(Fe,{children:[e.jsx(qe,{children:"Full Name"}),e.jsx(Le,{children:e.jsx($,{placeholder:"Enter your full name",...o})}),e.jsx(ze,{})]})}),e.jsx($e,{control:i.control,name:"email",render:({field:o})=>e.jsxs(Fe,{children:[e.jsx(qe,{children:"Email"}),e.jsx(Le,{children:e.jsx($,{type:"email",placeholder:"Enter your email",...o})}),e.jsx(ze,{})]})}),e.jsx($e,{control:i.control,name:"roleId",render:({field:o})=>e.jsxs(Fe,{children:[e.jsx(qe,{children:"Role"}),e.jsxs(Re,{onValueChange:o.onChange,defaultValue:o.value,children:[e.jsx(Le,{children:e.jsx(Me,{children:e.jsx(Oe,{placeholder:"Select your role"})})}),e.jsx(_e,{children:c.map(d=>e.jsx(U,{value:d.id.toString(),children:d.name.replace("_"," ").replace(/\b\w/g,h=>h.toUpperCase())},d.id))})]}),e.jsx(ze,{})]})}),e.jsx($e,{control:i.control,name:"password",render:({field:o})=>e.jsxs(Fe,{children:[e.jsx(qe,{children:"Password"}),e.jsx(Le,{children:e.jsx($,{type:"password",placeholder:"Create a password",...o})}),e.jsx(ze,{})]})}),e.jsx($e,{control:i.control,name:"confirmPassword",render:({field:o})=>e.jsxs(Fe,{children:[e.jsx(qe,{children:"Confirm Password"}),e.jsx(Le,{children:e.jsx($,{type:"password",placeholder:"Confirm your password",...o})}),e.jsx(ze,{})]})}),e.jsx(E,{type:"submit",className:"w-full gradient-primary",disabled:s,children:s?e.jsxs(e.Fragment,{children:[e.jsx(oa,{className:"mr-2 h-4 w-4 animate-spin"}),"Creating account..."]}):"Create Account"})]})}),e.jsxs("div",{className:"mt-6 text-center text-sm",children:[e.jsx("span",{className:"text-gray-600",children:"Already have an account? "}),e.jsx(Lt,{href:"/login",className:"text-primary hover:underline font-medium",children:"Sign in"})]})]})]})]})})}const cT=()=>{const[t]=As();N.useEffect(()=>{window.scrollTo(0,0)},[t])},hB=()=>{window.scrollTo(0,0)},xB=({message:t,description:s,duration:n=4e3,onClose:a,type:r="default",autoClose:i=!0})=>{const[l,c]=N.useState(!0),[o,d]=N.useState(!1);N.useEffect(()=>{if(i){const p=setTimeout(()=>{h()},n);return()=>clearTimeout(p)}},[n,i]);const h=()=>{d(!0),setTimeout(()=>{c(!1),a==null||a()},300)},u=()=>{switch(r){case"music":return e.jsx(Ue,{className:"h-5 w-5"});case"booking":return e.jsx(Rt,{className:"h-5 w-5"});case"favorite":return e.jsx(gn,{className:"h-5 w-5"});case"professional":return e.jsx(Os,{className:"h-5 w-5"});default:return e.jsx(ir,{className:"h-5 w-5"})}},m=()=>{switch(r){case"music":return"bg-gradient-to-r from-purple-50 to-pink-50 border-purple-200 text-purple-800";case"booking":return"bg-gradient-to-r from-blue-50 to-indigo-50 border-blue-200 text-blue-800";case"favorite":return"bg-gradient-to-r from-red-50 to-pink-50 border-red-200 text-red-800";case"professional":return"bg-gradient-to-r from-green-50 to-emerald-50 border-green-200 text-green-800";default:return"bg-gradient-to-r from-green-50 to-emerald-50 border-green-200 text-green-800"}};return l?e.jsx("div",{className:Je("fixed top-4 right-4 z-50 max-w-sm w-full mx-auto pointer-events-auto","transform transition-all duration-300 ease-in-out",o?"translate-x-full opacity-0":"translate-x-0 opacity-100"),children:e.jsxs("div",{className:Je("rounded-lg border p-4 shadow-lg backdrop-blur-sm",m()),children:[e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"flex-shrink-0 mt-0.5",children:u()}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"font-medium text-sm",children:t}),s&&e.jsx("p",{className:"mt-1 text-xs opacity-80",children:s})]}),e.jsx("button",{onClick:h,className:"flex-shrink-0 ml-2 opacity-60 hover:opacity-100 transition-opacity",children:e.jsx(Xt,{className:"h-4 w-4"})})]}),i&&e.jsx("div",{className:"mt-2 h-1 bg-black/10 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-current opacity-30 rounded-full transition-all ease-linear",style:{animation:`shrink ${n}ms linear forwards`}})})]})}):null},pB=()=>{const[t,s]=N.useState([]);return{showSuccess:i=>{const l=Math.random().toString(36).substr(2,9);s(c=>[...c,{id:l,props:{...i,onClose:()=>{s(o=>o.filter(d=>d.id!==l))}}}])},clearAll:()=>{s([])},NotificationContainer:()=>e.jsx("div",{className:"fixed top-4 right-4 z-50 space-y-2",children:t.map(({id:i,props:l})=>e.jsx(xB,{...l},i))}),notificationCount:t.length}},dT=document.createElement("style");dT.textContent=`
  @keyframes shrink {
    from { width: 100%; }
    to { width: 0%; }
  }
`;document.head.appendChild(dT);const uT=(t={})=>{const{enableVirtualization:s=!0,chunkSize:n=50,debounceMs:a=300,cacheTimeout:r=3e5}=t,i=Tt(),[l,c]=N.useState(!1),o=N.useCallback((g,x=a)=>{let v;return(...y)=>{clearTimeout(v),v=setTimeout(()=>g(...y),x)}},[a]),d=N.useCallback((g,x)=>new Promise(v=>{c(!0);let y=0;const f=()=>{const b=g.slice(y,y+n);if(b.length===0){c(!1),v();return}x(b),y+=n,requestAnimationFrame(f)};f()}),[n]),h=N.useMemo(()=>(g,x,v,y)=>{if(!s)return{start:0,end:v,visibleItems:v};const f=Math.ceil(g/x),b=Math.floor(y/x),j=Math.min(b+f+2,v);return{start:Math.max(0,b-1),end:j,visibleItems:j-b}},[s]),u=N.useCallback(()=>{const g=i.getQueryCache().getAll(),x=Date.now();g.forEach(v=>{const y=v.state.dataUpdatedAt;x-y>r&&i.removeQueries({queryKey:v.queryKey})})},[i,r]);N.useEffect(()=>{const g=setInterval(u,r);return()=>clearInterval(g)},[u,r]);const m=N.useCallback((g,x)=>{const v=performance.now(),y=g(),f=performance.now();return f-v>100&&console.warn(`Slow operation detected: ${x} took ${f-v}ms`),y},[]),p=N.useCallback(()=>{if("memory"in performance){const g=performance.memory;return{used:Math.round(g.usedJSHeapSize/1048576*100)/100,total:Math.round(g.totalJSHeapSize/1048576*100)/100,limit:Math.round(g.jsHeapSizeLimit/1048576*100)/100}}return null},[]);return{isOptimizing:l,createDebouncedFunction:o,processDataInChunks:d,calculateVirtualItems:h,optimizeCache:u,measurePerformance:m,checkMemoryUsage:p}},fB=(t,s="",n)=>{const{createDebouncedFunction:a,processDataInChunks:r}=uT(),[i,l]=N.useState([]),[c,o]=N.useState(!1),d=N.useMemo(()=>a(h=>{if(o(!0),!h.trim()){l(t),o(!1);return}const u=n||((p,g)=>JSON.stringify(p).toLowerCase().includes(g.toLowerCase())),m=[];r(t,p=>{const g=p.filter(x=>u(x,h));m.push(...g)}).then(()=>{l(m),o(!1)})},300),[t,n,a,r]);return N.useEffect(()=>{d(s)},[s,d]),{filteredData:i,isProcessing:c,totalItems:t.length,filteredCount:i.length}};var w0="Tabs",[gB,UJ]=Yn(w0,[Rp]),mT=Rp(),[jB,S0]=gB(w0),hT=N.forwardRef((t,s)=>{const{__scopeTabs:n,value:a,onValueChange:r,defaultValue:i,orientation:l="horizontal",dir:c,activationMode:o="automatic",...d}=t,h=kd(c),[u,m]=br({prop:a,onChange:r,defaultProp:i});return e.jsx(jB,{scope:n,baseId:jr(),value:u,onValueChange:m,orientation:l,dir:h,activationMode:o,children:e.jsx(Dt.div,{dir:h,"data-orientation":l,...d,ref:s})})});hT.displayName=w0;var xT="TabsList",pT=N.forwardRef((t,s)=>{const{__scopeTabs:n,loop:a=!0,...r}=t,i=S0(xT,n),l=mT(n);return e.jsx(Rk,{asChild:!0,...l,orientation:i.orientation,dir:i.dir,loop:a,children:e.jsx(Dt.div,{role:"tablist","aria-orientation":i.orientation,...r,ref:s})})});pT.displayName=xT;var fT="TabsTrigger",gT=N.forwardRef((t,s)=>{const{__scopeTabs:n,value:a,disabled:r=!1,...i}=t,l=S0(fT,n),c=mT(n),o=yT(l.baseId,a),d=NT(l.baseId,a),h=a===l.value;return e.jsx(Ok,{asChild:!0,...c,focusable:!r,active:h,children:e.jsx(Dt.button,{type:"button",role:"tab","aria-selected":h,"aria-controls":d,"data-state":h?"active":"inactive","data-disabled":r?"":void 0,disabled:r,id:o,...i,ref:s,onMouseDown:tt(t.onMouseDown,u=>{!r&&u.button===0&&u.ctrlKey===!1?l.onValueChange(a):u.preventDefault()}),onKeyDown:tt(t.onKeyDown,u=>{[" ","Enter"].includes(u.key)&&l.onValueChange(a)}),onFocus:tt(t.onFocus,()=>{const u=l.activationMode!=="manual";!h&&!r&&u&&l.onValueChange(a)})})})});gT.displayName=fT;var jT="TabsContent",vT=N.forwardRef((t,s)=>{const{__scopeTabs:n,value:a,forceMount:r,children:i,...l}=t,c=S0(jT,n),o=yT(c.baseId,a),d=NT(c.baseId,a),h=a===c.value,u=N.useRef(h);return N.useEffect(()=>{const m=requestAnimationFrame(()=>u.current=!1);return()=>cancelAnimationFrame(m)},[]),e.jsx(Va,{present:r||h,children:({present:m})=>e.jsx(Dt.div,{"data-state":h?"active":"inactive","data-orientation":c.orientation,role:"tabpanel","aria-labelledby":o,hidden:!m,id:d,tabIndex:0,...l,ref:s,style:{...t.style,animationDuration:u.current?"0s":void 0},children:m&&i})})});vT.displayName=jT;function yT(t,s){return`${t}-trigger-${s}`}function NT(t,s){return`${t}-content-${s}`}var vB=hT,bT=pT,wT=gT,ST=vT;const Ut=vB,jt=N.forwardRef(({className:t,...s},n)=>e.jsx(bT,{ref:n,className:Je("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",t),...s}));jt.displayName=bT.displayName;const Ne=N.forwardRef(({className:t,...s},n)=>e.jsx(wT,{ref:n,className:Je("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",t),...s}));Ne.displayName=wT.displayName;const ge=N.forwardRef(({className:t,...s},n)=>e.jsx(ST,{ref:n,className:Je("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",t),...s}));ge.displayName=ST.displayName;function yB({open:t,onOpenChange:s}){const{toast:n}=nt(),[a,r]=N.useState({title:"",genre:"",isrcCode:"",price:"",isFree:!1,description:"",lyrics:"",duration:"",audioFile:null,coverArt:null}),i=(o,d)=>{r(h=>({...h,[o]:d}))},l=(o,d)=>{r(h=>({...h,[o]:d}))},c=async()=>{if(!a.title||!a.isrcCode||!a.audioFile){n({title:"Missing Required Fields",description:"Please fill in title, ISRC code, and upload an audio file.",variant:"destructive"});return}try{n({title:"Music Uploaded",description:"Your track has been successfully uploaded and is now available."}),s(!1),r({title:"",genre:"",isrcCode:"",price:"",isFree:!1,description:"",lyrics:"",duration:"",audioFile:null,coverArt:null})}catch{n({title:"Upload Failed",description:"Failed to upload music. Please try again.",variant:"destructive"})}};return e.jsx(kt,{open:t,onOpenChange:s,children:e.jsxs(wt,{className:"sm:max-w-[700px] max-h-[80vh] overflow-y-auto",children:[e.jsxs(St,{children:[e.jsxs(Ct,{className:"flex items-center gap-2",children:[e.jsx(Xs,{className:"h-5 w-5"}),"Upload New Music"]}),e.jsx(us,{children:"Upload a new track to your music catalog. Make sure to include all required information."})]}),e.jsxs("div",{className:"space-y-6 py-4",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-medium",children:"Track Information"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(q,{htmlFor:"title",children:"Track Title *"}),e.jsx($,{id:"title",value:a.title,onChange:o=>i("title",o.target.value),placeholder:"Enter track title"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(q,{htmlFor:"genre",children:"Genre"}),e.jsxs(Re,{onValueChange:o=>i("genre",o),children:[e.jsx(Me,{children:e.jsx(Oe,{placeholder:"Select genre"})}),e.jsxs(_e,{children:[e.jsx(U,{value:"pop",children:"Pop"}),e.jsx(U,{value:"rock",children:"Rock"}),e.jsx(U,{value:"hip-hop",children:"Hip-Hop"}),e.jsx(U,{value:"jazz",children:"Jazz"}),e.jsx(U,{value:"classical",children:"Classical"}),e.jsx(U,{value:"electronic",children:"Electronic"}),e.jsx(U,{value:"reggae",children:"Reggae"}),e.jsx(U,{value:"r&b",children:"R&B"}),e.jsx(U,{value:"country",children:"Country"}),e.jsx(U,{value:"folk",children:"Folk"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(q,{htmlFor:"isrcCode",children:"ISRC Code *"}),e.jsx($,{id:"isrcCode",value:a.isrcCode,onChange:o=>i("isrcCode",o.target.value),placeholder:"e.g., USRC17607839"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(q,{htmlFor:"duration",children:"Duration (mm:ss)"}),e.jsx($,{id:"duration",value:a.duration,onChange:o=>i("duration",o.target.value),placeholder:"e.g., 3:45"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(q,{htmlFor:"description",children:"Description"}),e.jsx(mt,{id:"description",value:a.description,onChange:o=>i("description",o.target.value),placeholder:"Describe your track...",rows:3})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(q,{htmlFor:"lyrics",children:"Lyrics (Optional)"}),e.jsx(mt,{id:"lyrics",value:a.lyrics,onChange:o=>i("lyrics",o.target.value),placeholder:"Enter song lyrics...",rows:4})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-medium",children:"Pricing"}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("label",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"radio",name:"pricing",checked:a.isFree,onChange:()=>{i("isFree",!0),i("price","")}}),e.jsx("span",{children:"Free Download"})]}),e.jsxs("label",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"radio",name:"pricing",checked:!a.isFree,onChange:()=>i("isFree",!1)}),e.jsx("span",{children:"Paid Download"})]})]}),!a.isFree&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(q,{htmlFor:"price",children:"Price ($)"}),e.jsx($,{id:"price",type:"number",step:"0.01",value:a.price,onChange:o=>i("price",o.target.value),placeholder:"0.99"})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-medium",children:"Files"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(q,{htmlFor:"audioFile",children:"Audio File * (MP3, WAV)"}),e.jsxs("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-4 text-center",children:[e.jsx(v6,{className:"mx-auto h-8 w-8 text-gray-400 mb-2"}),e.jsx("input",{type:"file",accept:".mp3,.wav",onChange:o=>{var d;return l("audioFile",((d=o.target.files)==null?void 0:d[0])||null)},className:"hidden",id:"audioFile"}),e.jsx("label",{htmlFor:"audioFile",className:"cursor-pointer",children:e.jsx("span",{className:"text-sm text-gray-600",children:a.audioFile?a.audioFile.name:"Click to upload audio file"})})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(q,{htmlFor:"coverArt",children:"Cover Art (3000x3000px minimum)"}),e.jsxs("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-4 text-center",children:[e.jsx(Vn,{className:"mx-auto h-8 w-8 text-gray-400 mb-2"}),e.jsx("input",{type:"file",accept:".jpg,.jpeg,.png",onChange:o=>{var d;return l("coverArt",((d=o.target.files)==null?void 0:d[0])||null)},className:"hidden",id:"coverArt"}),e.jsx("label",{htmlFor:"coverArt",className:"cursor-pointer",children:e.jsx("span",{className:"text-sm text-gray-600",children:a.coverArt?a.coverArt.name:"Click to upload cover art"})})]})]})]})]})]}),e.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t",children:[e.jsxs(E,{variant:"outline",onClick:()=>s(!1),children:[e.jsx(Xt,{className:"h-4 w-4 mr-2"}),"Cancel"]}),e.jsxs(E,{onClick:c,children:[e.jsx(js,{className:"h-4 w-4 mr-2"}),"Upload Track"]})]})]})})}function Jt(t){const s=Object.prototype.toString.call(t);return t instanceof Date||typeof t=="object"&&s==="[object Date]"?new t.constructor(+t):typeof t=="number"||s==="[object Number]"||typeof t=="string"||s==="[object String]"?new Date(t):new Date(NaN)}function za(t,s){return t instanceof Date?new t.constructor(s):new Date(s)}function va(t,s){const n=Jt(t);return isNaN(s)?za(t,NaN):(s&&n.setDate(n.getDate()+s),n)}function Gr(t,s){const n=Jt(t);if(isNaN(s))return za(t,NaN);if(!s)return n;const a=n.getDate(),r=za(t,n.getTime());r.setMonth(n.getMonth()+s+1,0);const i=r.getDate();return a>=i?r:(n.setFullYear(r.getFullYear(),r.getMonth(),a),n)}function CT(t){const s=Jt(t).getDay();return s===0||s===6}const C0=6048e5,NB=864e5,hh=43200,Tw=1440;let bB={};function Td(){return bB}function fi(t,s){var c,o,d,h;const n=Td(),a=(s==null?void 0:s.weekStartsOn)??((o=(c=s==null?void 0:s.locale)==null?void 0:c.options)==null?void 0:o.weekStartsOn)??n.weekStartsOn??((h=(d=n.locale)==null?void 0:d.options)==null?void 0:h.weekStartsOn)??0,r=Jt(t),i=r.getDay(),l=(i<a?7:0)+i-a;return r.setDate(r.getDate()-l),r.setHours(0,0,0,0),r}function Wo(t){return fi(t,{weekStartsOn:1})}function kT(t){const s=Jt(t),n=s.getFullYear(),a=za(t,0);a.setFullYear(n+1,0,4),a.setHours(0,0,0,0);const r=Wo(a),i=za(t,0);i.setFullYear(n,0,4),i.setHours(0,0,0,0);const l=Wo(i);return s.getTime()>=r.getTime()?n+1:s.getTime()>=l.getTime()?n:n-1}function Wr(t){const s=Jt(t);return s.setHours(0,0,0,0),s}function hd(t){const s=Jt(t),n=new Date(Date.UTC(s.getFullYear(),s.getMonth(),s.getDate(),s.getHours(),s.getMinutes(),s.getSeconds(),s.getMilliseconds()));return n.setUTCFullYear(s.getFullYear()),+t-+n}function li(t,s){const n=Wr(t),a=Wr(s),r=+n-hd(n),i=+a-hd(a);return Math.round((r-i)/NB)}function wB(t){const s=kT(t),n=za(t,0);return n.setFullYear(s,0,4),n.setHours(0,0,0,0),Wo(n)}function uv(t,s){const n=s*7;return va(t,n)}function SB(t,s){return Gr(t,s*12)}function CB(t){let s;return t.forEach(function(n){const a=Jt(n);(s===void 0||s<a||isNaN(Number(a)))&&(s=a)}),s||new Date(NaN)}function kB(t){let s;return t.forEach(n=>{const a=Jt(n);(!s||s>a||isNaN(+a))&&(s=a)}),s||new Date(NaN)}function Fh(t,s){const n=Jt(t),a=Jt(s),r=n.getTime()-a.getTime();return r<0?-1:r>0?1:r}function AB(t){return za(t,Date.now())}function Zn(t,s){const n=Wr(t),a=Wr(s);return+n==+a}function k0(t){return t instanceof Date||typeof t=="object"&&Object.prototype.toString.call(t)==="[object Date]"}function PB(t){if(!k0(t)&&typeof t!="number")return!1;const s=Jt(t);return!isNaN(Number(s))}function xd(t,s){const n=Jt(t),a=Jt(s),r=n.getFullYear()-a.getFullYear(),i=n.getMonth()-a.getMonth();return r*12+i}function TB(t,s,n){const a=fi(t,n),r=fi(s,n),i=+a-hd(a),l=+r-hd(r);return Math.round((i-l)/C0)}function EB(t){return s=>{const a=(t?Math[t]:Math.trunc)(s);return a===0?0:a}}function MB(t,s){return+Jt(t)-+Jt(s)}function _B(t){const s=Jt(t);return s.setHours(23,59,59,999),s}function Vp(t){const s=Jt(t),n=s.getMonth();return s.setFullYear(s.getFullYear(),n+1,0),s.setHours(23,59,59,999),s}function RB(t){const s=Jt(t);return+_B(s)==+Vp(s)}function OB(t,s){const n=Jt(t),a=Jt(s),r=Fh(n,a),i=Math.abs(xd(n,a));let l;if(i<1)l=0;else{n.getMonth()===1&&n.getDate()>27&&n.setDate(30),n.setMonth(n.getMonth()-r*i);let c=Fh(n,a)===-r;RB(Jt(t))&&i===1&&Fh(t,a)===1&&(c=!1),l=r*(i-Number(c))}return l===0?0:l}function DB(t,s,n){const a=MB(t,s)/1e3;return EB(n==null?void 0:n.roundingMethod)(a)}function Ba(t){const s=Jt(t);return s.setDate(1),s.setHours(0,0,0,0),s}function AT(t){const s=Jt(t),n=za(t,0);return n.setFullYear(s.getFullYear(),0,1),n.setHours(0,0,0,0),n}function A0(t,s){var c,o,d,h;const n=Td(),a=(s==null?void 0:s.weekStartsOn)??((o=(c=s==null?void 0:s.locale)==null?void 0:c.options)==null?void 0:o.weekStartsOn)??n.weekStartsOn??((h=(d=n.locale)==null?void 0:d.options)==null?void 0:h.weekStartsOn)??0,r=Jt(t),i=r.getDay(),l=(i<a?-7:0)+6-(i-a);return r.setDate(r.getDate()+l),r.setHours(23,59,59,999),r}function PT(t){return A0(t,{weekStartsOn:1})}const IB={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},LB=(t,s,n)=>{let a;const r=IB[t];return typeof r=="string"?a=r:s===1?a=r.one:a=r.other.replace("{{count}}",s.toString()),n!=null&&n.addSuffix?n.comparison&&n.comparison>0?"in "+a:a+" ago":a};function ug(t){return(s={})=>{const n=s.width?String(s.width):t.defaultWidth;return t.formats[n]||t.formats[t.defaultWidth]}}const FB={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},qB={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},$B={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},BB={date:ug({formats:FB,defaultWidth:"full"}),time:ug({formats:qB,defaultWidth:"full"}),dateTime:ug({formats:$B,defaultWidth:"full"})},UB={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},zB=(t,s,n,a)=>UB[t];function Kd(t){return(s,n)=>{const a=n!=null&&n.context?String(n.context):"standalone";let r;if(a==="formatting"&&t.formattingValues){const l=t.defaultFormattingWidth||t.defaultWidth,c=n!=null&&n.width?String(n.width):l;r=t.formattingValues[c]||t.formattingValues[l]}else{const l=t.defaultWidth,c=n!=null&&n.width?String(n.width):t.defaultWidth;r=t.values[c]||t.values[l]}const i=t.argumentCallback?t.argumentCallback(s):s;return r[i]}}const VB={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},GB={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},WB={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},HB={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},KB={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},YB={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},QB=(t,s)=>{const n=Number(t),a=n%100;if(a>20||a<10)switch(a%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},ZB={ordinalNumber:QB,era:Kd({values:VB,defaultWidth:"wide"}),quarter:Kd({values:GB,defaultWidth:"wide",argumentCallback:t=>t-1}),month:Kd({values:WB,defaultWidth:"wide"}),day:Kd({values:HB,defaultWidth:"wide"}),dayPeriod:Kd({values:KB,defaultWidth:"wide",formattingValues:YB,defaultFormattingWidth:"wide"})};function Yd(t){return(s,n={})=>{const a=n.width,r=a&&t.matchPatterns[a]||t.matchPatterns[t.defaultMatchWidth],i=s.match(r);if(!i)return null;const l=i[0],c=a&&t.parsePatterns[a]||t.parsePatterns[t.defaultParseWidth],o=Array.isArray(c)?JB(c,u=>u.test(l)):XB(c,u=>u.test(l));let d;d=t.valueCallback?t.valueCallback(o):o,d=n.valueCallback?n.valueCallback(d):d;const h=s.slice(l.length);return{value:d,rest:h}}}function XB(t,s){for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)&&s(t[n]))return n}function JB(t,s){for(let n=0;n<t.length;n++)if(s(t[n]))return n}function eU(t){return(s,n={})=>{const a=s.match(t.matchPattern);if(!a)return null;const r=a[0],i=s.match(t.parsePattern);if(!i)return null;let l=t.valueCallback?t.valueCallback(i[0]):i[0];l=n.valueCallback?n.valueCallback(l):l;const c=s.slice(r.length);return{value:l,rest:c}}}const tU=/^(\d+)(th|st|nd|rd)?/i,sU=/\d+/i,nU={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},aU={any:[/^b/i,/^(a|c)/i]},rU={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},iU={any:[/1/i,/2/i,/3/i,/4/i]},lU={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},oU={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},cU={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},dU={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},uU={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},mU={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},hU={ordinalNumber:eU({matchPattern:tU,parsePattern:sU,valueCallback:t=>parseInt(t,10)}),era:Yd({matchPatterns:nU,defaultMatchWidth:"wide",parsePatterns:aU,defaultParseWidth:"any"}),quarter:Yd({matchPatterns:rU,defaultMatchWidth:"wide",parsePatterns:iU,defaultParseWidth:"any",valueCallback:t=>t+1}),month:Yd({matchPatterns:lU,defaultMatchWidth:"wide",parsePatterns:oU,defaultParseWidth:"any"}),day:Yd({matchPatterns:cU,defaultMatchWidth:"wide",parsePatterns:dU,defaultParseWidth:"any"}),dayPeriod:Yd({matchPatterns:uU,defaultMatchWidth:"any",parsePatterns:mU,defaultParseWidth:"any"})},P0={code:"en-US",formatDistance:LB,formatLong:BB,formatRelative:zB,localize:ZB,match:hU,options:{weekStartsOn:0,firstWeekContainsDate:1}};function xU(t){const s=Jt(t);return li(s,AT(s))+1}function TT(t){const s=Jt(t),n=+Wo(s)-+wB(s);return Math.round(n/C0)+1}function ET(t,s){var h,u,m,p;const n=Jt(t),a=n.getFullYear(),r=Td(),i=(s==null?void 0:s.firstWeekContainsDate)??((u=(h=s==null?void 0:s.locale)==null?void 0:h.options)==null?void 0:u.firstWeekContainsDate)??r.firstWeekContainsDate??((p=(m=r.locale)==null?void 0:m.options)==null?void 0:p.firstWeekContainsDate)??1,l=za(t,0);l.setFullYear(a+1,0,i),l.setHours(0,0,0,0);const c=fi(l,s),o=za(t,0);o.setFullYear(a,0,i),o.setHours(0,0,0,0);const d=fi(o,s);return n.getTime()>=c.getTime()?a+1:n.getTime()>=d.getTime()?a:a-1}function pU(t,s){var c,o,d,h;const n=Td(),a=(s==null?void 0:s.firstWeekContainsDate)??((o=(c=s==null?void 0:s.locale)==null?void 0:c.options)==null?void 0:o.firstWeekContainsDate)??n.firstWeekContainsDate??((h=(d=n.locale)==null?void 0:d.options)==null?void 0:h.firstWeekContainsDate)??1,r=ET(t,s),i=za(t,0);return i.setFullYear(r,0,a),i.setHours(0,0,0,0),fi(i,s)}function MT(t,s){const n=Jt(t),a=+fi(n,s)-+pU(n,s);return Math.round(a/C0)+1}function Rs(t,s){const n=t<0?"-":"",a=Math.abs(t).toString().padStart(s,"0");return n+a}const sl={y(t,s){const n=t.getFullYear(),a=n>0?n:1-n;return Rs(s==="yy"?a%100:a,s.length)},M(t,s){const n=t.getMonth();return s==="M"?String(n+1):Rs(n+1,2)},d(t,s){return Rs(t.getDate(),s.length)},a(t,s){const n=t.getHours()/12>=1?"pm":"am";switch(s){case"a":case"aa":return n.toUpperCase();case"aaa":return n;case"aaaaa":return n[0];case"aaaa":default:return n==="am"?"a.m.":"p.m."}},h(t,s){return Rs(t.getHours()%12||12,s.length)},H(t,s){return Rs(t.getHours(),s.length)},m(t,s){return Rs(t.getMinutes(),s.length)},s(t,s){return Rs(t.getSeconds(),s.length)},S(t,s){const n=s.length,a=t.getMilliseconds(),r=Math.trunc(a*Math.pow(10,n-3));return Rs(r,s.length)}},ic={am:"am",pm:"pm",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},Ew={G:function(t,s,n){const a=t.getFullYear()>0?1:0;switch(s){case"G":case"GG":case"GGG":return n.era(a,{width:"abbreviated"});case"GGGGG":return n.era(a,{width:"narrow"});case"GGGG":default:return n.era(a,{width:"wide"})}},y:function(t,s,n){if(s==="yo"){const a=t.getFullYear(),r=a>0?a:1-a;return n.ordinalNumber(r,{unit:"year"})}return sl.y(t,s)},Y:function(t,s,n,a){const r=ET(t,a),i=r>0?r:1-r;if(s==="YY"){const l=i%100;return Rs(l,2)}return s==="Yo"?n.ordinalNumber(i,{unit:"year"}):Rs(i,s.length)},R:function(t,s){const n=kT(t);return Rs(n,s.length)},u:function(t,s){const n=t.getFullYear();return Rs(n,s.length)},Q:function(t,s,n){const a=Math.ceil((t.getMonth()+1)/3);switch(s){case"Q":return String(a);case"QQ":return Rs(a,2);case"Qo":return n.ordinalNumber(a,{unit:"quarter"});case"QQQ":return n.quarter(a,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(a,{width:"narrow",context:"formatting"});case"QQQQ":default:return n.quarter(a,{width:"wide",context:"formatting"})}},q:function(t,s,n){const a=Math.ceil((t.getMonth()+1)/3);switch(s){case"q":return String(a);case"qq":return Rs(a,2);case"qo":return n.ordinalNumber(a,{unit:"quarter"});case"qqq":return n.quarter(a,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(a,{width:"narrow",context:"standalone"});case"qqqq":default:return n.quarter(a,{width:"wide",context:"standalone"})}},M:function(t,s,n){const a=t.getMonth();switch(s){case"M":case"MM":return sl.M(t,s);case"Mo":return n.ordinalNumber(a+1,{unit:"month"});case"MMM":return n.month(a,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(a,{width:"narrow",context:"formatting"});case"MMMM":default:return n.month(a,{width:"wide",context:"formatting"})}},L:function(t,s,n){const a=t.getMonth();switch(s){case"L":return String(a+1);case"LL":return Rs(a+1,2);case"Lo":return n.ordinalNumber(a+1,{unit:"month"});case"LLL":return n.month(a,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(a,{width:"narrow",context:"standalone"});case"LLLL":default:return n.month(a,{width:"wide",context:"standalone"})}},w:function(t,s,n,a){const r=MT(t,a);return s==="wo"?n.ordinalNumber(r,{unit:"week"}):Rs(r,s.length)},I:function(t,s,n){const a=TT(t);return s==="Io"?n.ordinalNumber(a,{unit:"week"}):Rs(a,s.length)},d:function(t,s,n){return s==="do"?n.ordinalNumber(t.getDate(),{unit:"date"}):sl.d(t,s)},D:function(t,s,n){const a=xU(t);return s==="Do"?n.ordinalNumber(a,{unit:"dayOfYear"}):Rs(a,s.length)},E:function(t,s,n){const a=t.getDay();switch(s){case"E":case"EE":case"EEE":return n.day(a,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(a,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(a,{width:"short",context:"formatting"});case"EEEE":default:return n.day(a,{width:"wide",context:"formatting"})}},e:function(t,s,n,a){const r=t.getDay(),i=(r-a.weekStartsOn+8)%7||7;switch(s){case"e":return String(i);case"ee":return Rs(i,2);case"eo":return n.ordinalNumber(i,{unit:"day"});case"eee":return n.day(r,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(r,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(r,{width:"short",context:"formatting"});case"eeee":default:return n.day(r,{width:"wide",context:"formatting"})}},c:function(t,s,n,a){const r=t.getDay(),i=(r-a.weekStartsOn+8)%7||7;switch(s){case"c":return String(i);case"cc":return Rs(i,s.length);case"co":return n.ordinalNumber(i,{unit:"day"});case"ccc":return n.day(r,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(r,{width:"narrow",context:"standalone"});case"cccccc":return n.day(r,{width:"short",context:"standalone"});case"cccc":default:return n.day(r,{width:"wide",context:"standalone"})}},i:function(t,s,n){const a=t.getDay(),r=a===0?7:a;switch(s){case"i":return String(r);case"ii":return Rs(r,s.length);case"io":return n.ordinalNumber(r,{unit:"day"});case"iii":return n.day(a,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(a,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(a,{width:"short",context:"formatting"});case"iiii":default:return n.day(a,{width:"wide",context:"formatting"})}},a:function(t,s,n){const r=t.getHours()/12>=1?"pm":"am";switch(s){case"a":case"aa":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"});case"aaa":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return n.dayPeriod(r,{width:"narrow",context:"formatting"});case"aaaa":default:return n.dayPeriod(r,{width:"wide",context:"formatting"})}},b:function(t,s,n){const a=t.getHours();let r;switch(a===12?r=ic.noon:a===0?r=ic.midnight:r=a/12>=1?"pm":"am",s){case"b":case"bb":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"});case"bbb":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return n.dayPeriod(r,{width:"narrow",context:"formatting"});case"bbbb":default:return n.dayPeriod(r,{width:"wide",context:"formatting"})}},B:function(t,s,n){const a=t.getHours();let r;switch(a>=17?r=ic.evening:a>=12?r=ic.afternoon:a>=4?r=ic.morning:r=ic.night,s){case"B":case"BB":case"BBB":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(r,{width:"narrow",context:"formatting"});case"BBBB":default:return n.dayPeriod(r,{width:"wide",context:"formatting"})}},h:function(t,s,n){if(s==="ho"){let a=t.getHours()%12;return a===0&&(a=12),n.ordinalNumber(a,{unit:"hour"})}return sl.h(t,s)},H:function(t,s,n){return s==="Ho"?n.ordinalNumber(t.getHours(),{unit:"hour"}):sl.H(t,s)},K:function(t,s,n){const a=t.getHours()%12;return s==="Ko"?n.ordinalNumber(a,{unit:"hour"}):Rs(a,s.length)},k:function(t,s,n){let a=t.getHours();return a===0&&(a=24),s==="ko"?n.ordinalNumber(a,{unit:"hour"}):Rs(a,s.length)},m:function(t,s,n){return s==="mo"?n.ordinalNumber(t.getMinutes(),{unit:"minute"}):sl.m(t,s)},s:function(t,s,n){return s==="so"?n.ordinalNumber(t.getSeconds(),{unit:"second"}):sl.s(t,s)},S:function(t,s){return sl.S(t,s)},X:function(t,s,n){const a=t.getTimezoneOffset();if(a===0)return"Z";switch(s){case"X":return _w(a);case"XXXX":case"XX":return uo(a);case"XXXXX":case"XXX":default:return uo(a,":")}},x:function(t,s,n){const a=t.getTimezoneOffset();switch(s){case"x":return _w(a);case"xxxx":case"xx":return uo(a);case"xxxxx":case"xxx":default:return uo(a,":")}},O:function(t,s,n){const a=t.getTimezoneOffset();switch(s){case"O":case"OO":case"OOO":return"GMT"+Mw(a,":");case"OOOO":default:return"GMT"+uo(a,":")}},z:function(t,s,n){const a=t.getTimezoneOffset();switch(s){case"z":case"zz":case"zzz":return"GMT"+Mw(a,":");case"zzzz":default:return"GMT"+uo(a,":")}},t:function(t,s,n){const a=Math.trunc(t.getTime()/1e3);return Rs(a,s.length)},T:function(t,s,n){const a=t.getTime();return Rs(a,s.length)}};function Mw(t,s=""){const n=t>0?"-":"+",a=Math.abs(t),r=Math.trunc(a/60),i=a%60;return i===0?n+String(r):n+String(r)+s+Rs(i,2)}function _w(t,s){return t%60===0?(t>0?"-":"+")+Rs(Math.abs(t)/60,2):uo(t,s)}function uo(t,s=""){const n=t>0?"-":"+",a=Math.abs(t),r=Rs(Math.trunc(a/60),2),i=Rs(a%60,2);return n+r+s+i}const Rw=(t,s)=>{switch(t){case"P":return s.date({width:"short"});case"PP":return s.date({width:"medium"});case"PPP":return s.date({width:"long"});case"PPPP":default:return s.date({width:"full"})}},_T=(t,s)=>{switch(t){case"p":return s.time({width:"short"});case"pp":return s.time({width:"medium"});case"ppp":return s.time({width:"long"});case"pppp":default:return s.time({width:"full"})}},fU=(t,s)=>{const n=t.match(/(P+)(p+)?/)||[],a=n[1],r=n[2];if(!r)return Rw(t,s);let i;switch(a){case"P":i=s.dateTime({width:"short"});break;case"PP":i=s.dateTime({width:"medium"});break;case"PPP":i=s.dateTime({width:"long"});break;case"PPPP":default:i=s.dateTime({width:"full"});break}return i.replace("{{date}}",Rw(a,s)).replace("{{time}}",_T(r,s))},gU={p:_T,P:fU},jU=/^D+$/,vU=/^Y+$/,yU=["D","DD","YY","YYYY"];function NU(t){return jU.test(t)}function bU(t){return vU.test(t)}function wU(t,s,n){const a=SU(t,s,n);if(console.warn(a),yU.includes(t))throw new RangeError(a)}function SU(t,s,n){const a=t[0]==="Y"?"years":"days of the month";return`Use \`${t.toLowerCase()}\` instead of \`${t}\` (in \`${s}\`) for formatting ${a} to the input \`${n}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const CU=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,kU=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,AU=/^'([^]*?)'?$/,PU=/''/g,TU=/[a-zA-Z]/;function Mn(t,s,n){var h,u,m,p,g,x,v,y;const a=Td(),r=(n==null?void 0:n.locale)??a.locale??P0,i=(n==null?void 0:n.firstWeekContainsDate)??((u=(h=n==null?void 0:n.locale)==null?void 0:h.options)==null?void 0:u.firstWeekContainsDate)??a.firstWeekContainsDate??((p=(m=a.locale)==null?void 0:m.options)==null?void 0:p.firstWeekContainsDate)??1,l=(n==null?void 0:n.weekStartsOn)??((x=(g=n==null?void 0:n.locale)==null?void 0:g.options)==null?void 0:x.weekStartsOn)??a.weekStartsOn??((y=(v=a.locale)==null?void 0:v.options)==null?void 0:y.weekStartsOn)??0,c=Jt(t);if(!PB(c))throw new RangeError("Invalid time value");let o=s.match(kU).map(f=>{const b=f[0];if(b==="p"||b==="P"){const j=gU[b];return j(f,r.formatLong)}return f}).join("").match(CU).map(f=>{if(f==="''")return{isToken:!1,value:"'"};const b=f[0];if(b==="'")return{isToken:!1,value:EU(f)};if(Ew[b])return{isToken:!0,value:f};if(b.match(TU))throw new RangeError("Format string contains an unescaped latin alphabet character `"+b+"`");return{isToken:!1,value:f}});r.localize.preprocessor&&(o=r.localize.preprocessor(c,o));const d={firstWeekContainsDate:i,weekStartsOn:l,locale:r};return o.map(f=>{if(!f.isToken)return f.value;const b=f.value;(!(n!=null&&n.useAdditionalWeekYearTokens)&&bU(b)||!(n!=null&&n.useAdditionalDayOfYearTokens)&&NU(b))&&wU(b,s,String(t));const j=Ew[b[0]];return j(c,b,r.localize,d)}).join("")}function EU(t){const s=t.match(AU);return s?s[1].replace(PU,"'"):t}function MU(t,s,n){const a=Td(),r=(n==null?void 0:n.locale)??a.locale??P0,i=2520,l=Fh(t,s);if(isNaN(l))throw new RangeError("Invalid time value");const c=Object.assign({},n,{addSuffix:n==null?void 0:n.addSuffix,comparison:l});let o,d;l>0?(o=Jt(s),d=Jt(t)):(o=Jt(t),d=Jt(s));const h=DB(d,o),u=(hd(d)-hd(o))/1e3,m=Math.round((h-u)/60);let p;if(m<2)return n!=null&&n.includeSeconds?h<5?r.formatDistance("lessThanXSeconds",5,c):h<10?r.formatDistance("lessThanXSeconds",10,c):h<20?r.formatDistance("lessThanXSeconds",20,c):h<40?r.formatDistance("halfAMinute",0,c):h<60?r.formatDistance("lessThanXMinutes",1,c):r.formatDistance("xMinutes",1,c):m===0?r.formatDistance("lessThanXMinutes",1,c):r.formatDistance("xMinutes",m,c);if(m<45)return r.formatDistance("xMinutes",m,c);if(m<90)return r.formatDistance("aboutXHours",1,c);if(m<Tw){const g=Math.round(m/60);return r.formatDistance("aboutXHours",g,c)}else{if(m<i)return r.formatDistance("xDays",1,c);if(m<hh){const g=Math.round(m/Tw);return r.formatDistance("xDays",g,c)}else if(m<hh*2)return p=Math.round(m/hh),r.formatDistance("aboutXMonths",p,c)}if(p=OB(d,o),p<12){const g=Math.round(m/hh);return r.formatDistance("xMonths",g,c)}else{const g=p%12,x=Math.trunc(p/12);return g<3?r.formatDistance("aboutXYears",x,c):g<9?r.formatDistance("overXYears",x,c):r.formatDistance("almostXYears",x+1,c)}}function Ow(t,s){return MU(t,AB(t),s)}function _U(t){const s=Jt(t),n=s.getFullYear(),a=s.getMonth(),r=za(t,0);return r.setFullYear(n,a+1,0),r.setHours(0,0,0,0),r.getDate()}function RU(t){return Math.trunc(+Jt(t)/1e3)}function OU(t){const s=Jt(t),n=s.getMonth();return s.setFullYear(s.getFullYear(),n+1,0),s.setHours(0,0,0,0),s}function DU(t,s){return TB(OU(t),Ba(t),s)+1}function mv(t,s){const n=Jt(t),a=Jt(s);return n.getTime()>a.getTime()}function Tm(t,s){const n=Jt(t),a=Jt(s);return+n<+a}function T0(t,s){const n=Jt(t),a=Jt(s);return n.getFullYear()===a.getFullYear()&&n.getMonth()===a.getMonth()}function IU(t,s){const n=Jt(t),a=Jt(s);return n.getFullYear()===a.getFullYear()}function mg(t,s){return va(t,-s)}function hg(t,s){const n=Jt(t),a=n.getFullYear(),r=n.getDate(),i=za(t,0);i.setFullYear(a,s,15),i.setHours(0,0,0,0);const l=_U(i);return n.setMonth(s,Math.min(r,l)),n}function Dw(t,s){const n=Jt(t);return isNaN(+n)?za(t,NaN):(n.setFullYear(s),n)}var Kt=function(){return Kt=Object.assign||function(s){for(var n,a=1,r=arguments.length;a<r;a++){n=arguments[a];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(s[i]=n[i])}return s},Kt.apply(this,arguments)};function LU(t,s){var n={};for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&s.indexOf(a)<0&&(n[a]=t[a]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,a=Object.getOwnPropertySymbols(t);r<a.length;r++)s.indexOf(a[r])<0&&Object.prototype.propertyIsEnumerable.call(t,a[r])&&(n[a[r]]=t[a[r]]);return n}function RT(t,s,n){for(var a=0,r=s.length,i;a<r;a++)(i||!(a in s))&&(i||(i=Array.prototype.slice.call(s,0,a)),i[a]=s[a]);return t.concat(i||Array.prototype.slice.call(s))}function Em(t){return t.mode==="multiple"}function Mm(t){return t.mode==="range"}function Gp(t){return t.mode==="single"}var FU={root:"rdp",multiple_months:"rdp-multiple_months",with_weeknumber:"rdp-with_weeknumber",vhidden:"rdp-vhidden",button_reset:"rdp-button_reset",button:"rdp-button",caption:"rdp-caption",caption_start:"rdp-caption_start",caption_end:"rdp-caption_end",caption_between:"rdp-caption_between",caption_label:"rdp-caption_label",caption_dropdowns:"rdp-caption_dropdowns",dropdown:"rdp-dropdown",dropdown_month:"rdp-dropdown_month",dropdown_year:"rdp-dropdown_year",dropdown_icon:"rdp-dropdown_icon",months:"rdp-months",month:"rdp-month",table:"rdp-table",tbody:"rdp-tbody",tfoot:"rdp-tfoot",head:"rdp-head",head_row:"rdp-head_row",head_cell:"rdp-head_cell",nav:"rdp-nav",nav_button:"rdp-nav_button",nav_button_previous:"rdp-nav_button_previous",nav_button_next:"rdp-nav_button_next",nav_icon:"rdp-nav_icon",row:"rdp-row",weeknumber:"rdp-weeknumber",cell:"rdp-cell",day:"rdp-day",day_today:"rdp-day_today",day_outside:"rdp-day_outside",day_selected:"rdp-day_selected",day_disabled:"rdp-day_disabled",day_hidden:"rdp-day_hidden",day_range_start:"rdp-day_range_start",day_range_end:"rdp-day_range_end",day_range_middle:"rdp-day_range_middle"};function qU(t,s){return Mn(t,"LLLL y",s)}function $U(t,s){return Mn(t,"d",s)}function BU(t,s){return Mn(t,"LLLL",s)}function UU(t){return"".concat(t)}function zU(t,s){return Mn(t,"cccccc",s)}function VU(t,s){return Mn(t,"yyyy",s)}var GU=Object.freeze({__proto__:null,formatCaption:qU,formatDay:$U,formatMonthCaption:BU,formatWeekNumber:UU,formatWeekdayName:zU,formatYearCaption:VU}),WU=function(t,s,n){return Mn(t,"do MMMM (EEEE)",n)},HU=function(){return"Month: "},KU=function(){return"Go to next month"},YU=function(){return"Go to previous month"},QU=function(t,s){return Mn(t,"cccc",s)},ZU=function(t){return"Week n. ".concat(t)},XU=function(){return"Year: "},JU=Object.freeze({__proto__:null,labelDay:WU,labelMonthDropdown:HU,labelNext:KU,labelPrevious:YU,labelWeekNumber:ZU,labelWeekday:QU,labelYearDropdown:XU});function ez(){var t="buttons",s=FU,n=P0,a={},r={},i=1,l={},c=new Date;return{captionLayout:t,classNames:s,formatters:GU,labels:JU,locale:n,modifiersClassNames:a,modifiers:r,numberOfMonths:i,styles:l,today:c,mode:"default"}}function tz(t){var s=t.fromYear,n=t.toYear,a=t.fromMonth,r=t.toMonth,i=t.fromDate,l=t.toDate;return a?i=Ba(a):s&&(i=new Date(s,0,1)),r?l=Vp(r):n&&(l=new Date(n,11,31)),{fromDate:i?Wr(i):void 0,toDate:l?Wr(l):void 0}}var OT=N.createContext(void 0);function sz(t){var s,n=t.initialProps,a=ez(),r=tz(n),i=r.fromDate,l=r.toDate,c=(s=n.captionLayout)!==null&&s!==void 0?s:a.captionLayout;c!=="buttons"&&(!i||!l)&&(c="buttons");var o;(Gp(n)||Em(n)||Mm(n))&&(o=n.onSelect);var d=Kt(Kt(Kt({},a),n),{captionLayout:c,classNames:Kt(Kt({},a.classNames),n.classNames),components:Kt({},n.components),formatters:Kt(Kt({},a.formatters),n.formatters),fromDate:i,labels:Kt(Kt({},a.labels),n.labels),mode:n.mode||a.mode,modifiers:Kt(Kt({},a.modifiers),n.modifiers),modifiersClassNames:Kt(Kt({},a.modifiersClassNames),n.modifiersClassNames),onSelect:o,styles:Kt(Kt({},a.styles),n.styles),toDate:l});return e.jsx(OT.Provider,{value:d,children:t.children})}function Gs(){var t=N.useContext(OT);if(!t)throw new Error("useDayPicker must be used within a DayPickerProvider.");return t}function DT(t){var s=Gs(),n=s.locale,a=s.classNames,r=s.styles,i=s.formatters.formatCaption;return e.jsx("div",{className:a.caption_label,style:r.caption_label,"aria-live":"polite",role:"presentation",id:t.id,children:i(t.displayMonth,{locale:n})})}function nz(t){return e.jsx("svg",Kt({width:"8px",height:"8px",viewBox:"0 0 120 120","data-testid":"iconDropdown"},t,{children:e.jsx("path",{d:"M4.22182541,48.2218254 C8.44222828,44.0014225 15.2388494,43.9273804 19.5496459,47.9996989 L19.7781746,48.2218254 L60,88.443 L100.221825,48.2218254 C104.442228,44.0014225 111.238849,43.9273804 115.549646,47.9996989 L115.778175,48.2218254 C119.998577,52.4422283 120.07262,59.2388494 116.000301,63.5496459 L115.778175,63.7781746 L67.7781746,111.778175 C63.5577717,115.998577 56.7611506,116.07262 52.4503541,112.000301 L52.2218254,111.778175 L4.22182541,63.7781746 C-0.0739418023,59.4824074 -0.0739418023,52.5175926 4.22182541,48.2218254 Z",fill:"currentColor",fillRule:"nonzero"})}))}function IT(t){var s,n,a=t.onChange,r=t.value,i=t.children,l=t.caption,c=t.className,o=t.style,d=Gs(),h=(n=(s=d.components)===null||s===void 0?void 0:s.IconDropdown)!==null&&n!==void 0?n:nz;return e.jsxs("div",{className:c,style:o,children:[e.jsx("span",{className:d.classNames.vhidden,children:t["aria-label"]}),e.jsx("select",{name:t.name,"aria-label":t["aria-label"],className:d.classNames.dropdown,style:d.styles.dropdown,value:r,onChange:a,children:i}),e.jsxs("div",{className:d.classNames.caption_label,style:d.styles.caption_label,"aria-hidden":"true",children:[l,e.jsx(h,{className:d.classNames.dropdown_icon,style:d.styles.dropdown_icon})]})]})}function az(t){var s,n=Gs(),a=n.fromDate,r=n.toDate,i=n.styles,l=n.locale,c=n.formatters.formatMonthCaption,o=n.classNames,d=n.components,h=n.labels.labelMonthDropdown;if(!a)return e.jsx(e.Fragment,{});if(!r)return e.jsx(e.Fragment,{});var u=[];if(IU(a,r))for(var m=Ba(a),p=a.getMonth();p<=r.getMonth();p++)u.push(hg(m,p));else for(var m=Ba(new Date),p=0;p<=11;p++)u.push(hg(m,p));var g=function(v){var y=Number(v.target.value),f=hg(Ba(t.displayMonth),y);t.onChange(f)},x=(s=d==null?void 0:d.Dropdown)!==null&&s!==void 0?s:IT;return e.jsx(x,{name:"months","aria-label":h(),className:o.dropdown_month,style:i.dropdown_month,onChange:g,value:t.displayMonth.getMonth(),caption:c(t.displayMonth,{locale:l}),children:u.map(function(v){return e.jsx("option",{value:v.getMonth(),children:c(v,{locale:l})},v.getMonth())})})}function rz(t){var s,n=t.displayMonth,a=Gs(),r=a.fromDate,i=a.toDate,l=a.locale,c=a.styles,o=a.classNames,d=a.components,h=a.formatters.formatYearCaption,u=a.labels.labelYearDropdown,m=[];if(!r)return e.jsx(e.Fragment,{});if(!i)return e.jsx(e.Fragment,{});for(var p=r.getFullYear(),g=i.getFullYear(),x=p;x<=g;x++)m.push(Dw(AT(new Date),x));var v=function(f){var b=Dw(Ba(n),Number(f.target.value));t.onChange(b)},y=(s=d==null?void 0:d.Dropdown)!==null&&s!==void 0?s:IT;return e.jsx(y,{name:"years","aria-label":u(),className:o.dropdown_year,style:c.dropdown_year,onChange:v,value:n.getFullYear(),caption:h(n,{locale:l}),children:m.map(function(f){return e.jsx("option",{value:f.getFullYear(),children:h(f,{locale:l})},f.getFullYear())})})}function iz(t,s){var n=N.useState(t),a=n[0],r=n[1],i=s===void 0?a:s;return[i,r]}function lz(t){var s=t.month,n=t.defaultMonth,a=t.today,r=s||n||a||new Date,i=t.toDate,l=t.fromDate,c=t.numberOfMonths,o=c===void 0?1:c;if(i&&xd(i,r)<0){var d=-1*(o-1);r=Gr(i,d)}return l&&xd(r,l)<0&&(r=l),Ba(r)}function oz(){var t=Gs(),s=lz(t),n=iz(s,t.month),a=n[0],r=n[1],i=function(l){var c;if(!t.disableNavigation){var o=Ba(l);r(o),(c=t.onMonthChange)===null||c===void 0||c.call(t,o)}};return[a,i]}function cz(t,s){for(var n=s.reverseMonths,a=s.numberOfMonths,r=Ba(t),i=Ba(Gr(r,a)),l=xd(i,r),c=[],o=0;o<l;o++){var d=Gr(r,o);c.push(d)}return n&&(c=c.reverse()),c}function dz(t,s){if(!s.disableNavigation){var n=s.toDate,a=s.pagedNavigation,r=s.numberOfMonths,i=r===void 0?1:r,l=a?i:1,c=Ba(t);if(!n)return Gr(c,l);var o=xd(n,t);if(!(o<i))return Gr(c,l)}}function uz(t,s){if(!s.disableNavigation){var n=s.fromDate,a=s.pagedNavigation,r=s.numberOfMonths,i=r===void 0?1:r,l=a?i:1,c=Ba(t);if(!n)return Gr(c,-l);var o=xd(c,n);if(!(o<=0))return Gr(c,-l)}}var LT=N.createContext(void 0);function mz(t){var s=Gs(),n=oz(),a=n[0],r=n[1],i=cz(a,s),l=dz(a,s),c=uz(a,s),o=function(u){return i.some(function(m){return T0(u,m)})},d=function(u,m){o(u)||(m&&Tm(u,m)?r(Gr(u,1+s.numberOfMonths*-1)):r(u))},h={currentMonth:a,displayMonths:i,goToMonth:r,goToDate:d,previousMonth:c,nextMonth:l,isDateDisplayed:o};return e.jsx(LT.Provider,{value:h,children:t.children})}function _m(){var t=N.useContext(LT);if(!t)throw new Error("useNavigation must be used within a NavigationProvider");return t}function Iw(t){var s,n=Gs(),a=n.classNames,r=n.styles,i=n.components,l=_m().goToMonth,c=function(h){l(Gr(h,t.displayIndex?-t.displayIndex:0))},o=(s=i==null?void 0:i.CaptionLabel)!==null&&s!==void 0?s:DT,d=e.jsx(o,{id:t.id,displayMonth:t.displayMonth});return e.jsxs("div",{className:a.caption_dropdowns,style:r.caption_dropdowns,children:[e.jsx("div",{className:a.vhidden,children:d}),e.jsx(az,{onChange:c,displayMonth:t.displayMonth}),e.jsx(rz,{onChange:c,displayMonth:t.displayMonth})]})}function hz(t){return e.jsx("svg",Kt({width:"16px",height:"16px",viewBox:"0 0 120 120"},t,{children:e.jsx("path",{d:"M69.490332,3.34314575 C72.6145263,0.218951416 77.6798462,0.218951416 80.8040405,3.34314575 C83.8617626,6.40086786 83.9268205,11.3179931 80.9992143,14.4548388 L80.8040405,14.6568542 L35.461,60 L80.8040405,105.343146 C83.8617626,108.400868 83.9268205,113.317993 80.9992143,116.454839 L80.8040405,116.656854 C77.7463184,119.714576 72.8291931,119.779634 69.6923475,116.852028 L69.490332,116.656854 L18.490332,65.6568542 C15.4326099,62.5991321 15.367552,57.6820069 18.2951583,54.5451612 L18.490332,54.3431458 L69.490332,3.34314575 Z",fill:"currentColor",fillRule:"nonzero"})}))}function xz(t){return e.jsx("svg",Kt({width:"16px",height:"16px",viewBox:"0 0 120 120"},t,{children:e.jsx("path",{d:"M49.8040405,3.34314575 C46.6798462,0.218951416 41.6145263,0.218951416 38.490332,3.34314575 C35.4326099,6.40086786 35.367552,11.3179931 38.2951583,14.4548388 L38.490332,14.6568542 L83.8333725,60 L38.490332,105.343146 C35.4326099,108.400868 35.367552,113.317993 38.2951583,116.454839 L38.490332,116.656854 C41.5480541,119.714576 46.4651794,119.779634 49.602025,116.852028 L49.8040405,116.656854 L100.804041,65.6568542 C103.861763,62.5991321 103.926821,57.6820069 100.999214,54.5451612 L100.804041,54.3431458 L49.8040405,3.34314575 Z",fill:"currentColor"})}))}var Dx=N.forwardRef(function(t,s){var n=Gs(),a=n.classNames,r=n.styles,i=[a.button_reset,a.button];t.className&&i.push(t.className);var l=i.join(" "),c=Kt(Kt({},r.button_reset),r.button);return t.style&&Object.assign(c,t.style),e.jsx("button",Kt({},t,{ref:s,type:"button",className:l,style:c}))});function pz(t){var s,n,a=Gs(),r=a.dir,i=a.locale,l=a.classNames,c=a.styles,o=a.labels,d=o.labelPrevious,h=o.labelNext,u=a.components;if(!t.nextMonth&&!t.previousMonth)return e.jsx(e.Fragment,{});var m=d(t.previousMonth,{locale:i}),p=[l.nav_button,l.nav_button_previous].join(" "),g=h(t.nextMonth,{locale:i}),x=[l.nav_button,l.nav_button_next].join(" "),v=(s=u==null?void 0:u.IconRight)!==null&&s!==void 0?s:xz,y=(n=u==null?void 0:u.IconLeft)!==null&&n!==void 0?n:hz;return e.jsxs("div",{className:l.nav,style:c.nav,children:[!t.hidePrevious&&e.jsx(Dx,{name:"previous-month","aria-label":m,className:p,style:c.nav_button_previous,disabled:!t.previousMonth,onClick:t.onPreviousClick,children:r==="rtl"?e.jsx(v,{className:l.nav_icon,style:c.nav_icon}):e.jsx(y,{className:l.nav_icon,style:c.nav_icon})}),!t.hideNext&&e.jsx(Dx,{name:"next-month","aria-label":g,className:x,style:c.nav_button_next,disabled:!t.nextMonth,onClick:t.onNextClick,children:r==="rtl"?e.jsx(y,{className:l.nav_icon,style:c.nav_icon}):e.jsx(v,{className:l.nav_icon,style:c.nav_icon})})]})}function Lw(t){var s=Gs().numberOfMonths,n=_m(),a=n.previousMonth,r=n.nextMonth,i=n.goToMonth,l=n.displayMonths,c=l.findIndex(function(g){return T0(t.displayMonth,g)}),o=c===0,d=c===l.length-1,h=s>1&&(o||!d),u=s>1&&(d||!o),m=function(){a&&i(a)},p=function(){r&&i(r)};return e.jsx(pz,{displayMonth:t.displayMonth,hideNext:h,hidePrevious:u,nextMonth:r,previousMonth:a,onPreviousClick:m,onNextClick:p})}function fz(t){var s,n=Gs(),a=n.classNames,r=n.disableNavigation,i=n.styles,l=n.captionLayout,c=n.components,o=(s=c==null?void 0:c.CaptionLabel)!==null&&s!==void 0?s:DT,d;return r?d=e.jsx(o,{id:t.id,displayMonth:t.displayMonth}):l==="dropdown"?d=e.jsx(Iw,{displayMonth:t.displayMonth,id:t.id}):l==="dropdown-buttons"?d=e.jsxs(e.Fragment,{children:[e.jsx(Iw,{displayMonth:t.displayMonth,displayIndex:t.displayIndex,id:t.id}),e.jsx(Lw,{displayMonth:t.displayMonth,displayIndex:t.displayIndex,id:t.id})]}):d=e.jsxs(e.Fragment,{children:[e.jsx(o,{id:t.id,displayMonth:t.displayMonth,displayIndex:t.displayIndex}),e.jsx(Lw,{displayMonth:t.displayMonth,id:t.id})]}),e.jsx("div",{className:a.caption,style:i.caption,children:d})}function gz(t){var s=Gs(),n=s.footer,a=s.styles,r=s.classNames.tfoot;return n?e.jsx("tfoot",{className:r,style:a.tfoot,children:e.jsx("tr",{children:e.jsx("td",{colSpan:8,children:n})})}):e.jsx(e.Fragment,{})}function jz(t,s,n){for(var a=n?Wo(new Date):fi(new Date,{locale:t,weekStartsOn:s}),r=[],i=0;i<7;i++){var l=va(a,i);r.push(l)}return r}function vz(){var t=Gs(),s=t.classNames,n=t.styles,a=t.showWeekNumber,r=t.locale,i=t.weekStartsOn,l=t.ISOWeek,c=t.formatters.formatWeekdayName,o=t.labels.labelWeekday,d=jz(r,i,l);return e.jsxs("tr",{style:n.head_row,className:s.head_row,children:[a&&e.jsx("td",{style:n.head_cell,className:s.head_cell}),d.map(function(h,u){return e.jsx("th",{scope:"col",className:s.head_cell,style:n.head_cell,"aria-label":o(h,{locale:r}),children:c(h,{locale:r})},u)})]})}function yz(){var t,s=Gs(),n=s.classNames,a=s.styles,r=s.components,i=(t=r==null?void 0:r.HeadRow)!==null&&t!==void 0?t:vz;return e.jsx("thead",{style:a.head,className:n.head,children:e.jsx(i,{})})}function Nz(t){var s=Gs(),n=s.locale,a=s.formatters.formatDay;return e.jsx(e.Fragment,{children:a(t.date,{locale:n})})}var E0=N.createContext(void 0);function bz(t){if(!Em(t.initialProps)){var s={selected:void 0,modifiers:{disabled:[]}};return e.jsx(E0.Provider,{value:s,children:t.children})}return e.jsx(wz,{initialProps:t.initialProps,children:t.children})}function wz(t){var s=t.initialProps,n=t.children,a=s.selected,r=s.min,i=s.max,l=function(d,h,u){var m,p;(m=s.onDayClick)===null||m===void 0||m.call(s,d,h,u);var g=!!(h.selected&&r&&(a==null?void 0:a.length)===r);if(!g){var x=!!(!h.selected&&i&&(a==null?void 0:a.length)===i);if(!x){var v=a?RT([],a):[];if(h.selected){var y=v.findIndex(function(f){return Zn(d,f)});v.splice(y,1)}else v.push(d);(p=s.onSelect)===null||p===void 0||p.call(s,v,d,h,u)}}},c={disabled:[]};a&&c.disabled.push(function(d){var h=i&&a.length>i-1,u=a.some(function(m){return Zn(m,d)});return!!(h&&!u)});var o={selected:a,onDayClick:l,modifiers:c};return e.jsx(E0.Provider,{value:o,children:n})}function M0(){var t=N.useContext(E0);if(!t)throw new Error("useSelectMultiple must be used within a SelectMultipleProvider");return t}function Sz(t,s){var n=s||{},a=n.from,r=n.to;return a&&r?Zn(r,t)&&Zn(a,t)?void 0:Zn(r,t)?{from:r,to:void 0}:Zn(a,t)?void 0:mv(a,t)?{from:t,to:r}:{from:a,to:t}:r?mv(t,r)?{from:r,to:t}:{from:t,to:r}:a?Tm(t,a)?{from:t,to:a}:{from:a,to:t}:{from:t,to:void 0}}var _0=N.createContext(void 0);function Cz(t){if(!Mm(t.initialProps)){var s={selected:void 0,modifiers:{range_start:[],range_end:[],range_middle:[],disabled:[]}};return e.jsx(_0.Provider,{value:s,children:t.children})}return e.jsx(kz,{initialProps:t.initialProps,children:t.children})}function kz(t){var s=t.initialProps,n=t.children,a=s.selected,r=a||{},i=r.from,l=r.to,c=s.min,o=s.max,d=function(p,g,x){var v,y;(v=s.onDayClick)===null||v===void 0||v.call(s,p,g,x);var f=Sz(p,a);(y=s.onSelect)===null||y===void 0||y.call(s,f,p,g,x)},h={range_start:[],range_end:[],range_middle:[],disabled:[]};if(i?(h.range_start=[i],l?(h.range_end=[l],Zn(i,l)||(h.range_middle=[{after:i,before:l}])):h.range_end=[i]):l&&(h.range_start=[l],h.range_end=[l]),c&&(i&&!l&&h.disabled.push({after:mg(i,c-1),before:va(i,c-1)}),i&&l&&h.disabled.push({after:i,before:va(i,c-1)}),!i&&l&&h.disabled.push({after:mg(l,c-1),before:va(l,c-1)})),o){if(i&&!l&&(h.disabled.push({before:va(i,-o+1)}),h.disabled.push({after:va(i,o-1)})),i&&l){var u=li(l,i)+1,m=o-u;h.disabled.push({before:mg(i,m)}),h.disabled.push({after:va(l,m)})}!i&&l&&(h.disabled.push({before:va(l,-o+1)}),h.disabled.push({after:va(l,o-1)}))}return e.jsx(_0.Provider,{value:{selected:a,onDayClick:d,modifiers:h},children:n})}function R0(){var t=N.useContext(_0);if(!t)throw new Error("useSelectRange must be used within a SelectRangeProvider");return t}function qh(t){return Array.isArray(t)?RT([],t):t!==void 0?[t]:[]}function Az(t){var s={};return Object.entries(t).forEach(function(n){var a=n[0],r=n[1];s[a]=qh(r)}),s}var Hr;(function(t){t.Outside="outside",t.Disabled="disabled",t.Selected="selected",t.Hidden="hidden",t.Today="today",t.RangeStart="range_start",t.RangeEnd="range_end",t.RangeMiddle="range_middle"})(Hr||(Hr={}));var Pz=Hr.Selected,bi=Hr.Disabled,Tz=Hr.Hidden,Ez=Hr.Today,xg=Hr.RangeEnd,pg=Hr.RangeMiddle,fg=Hr.RangeStart,Mz=Hr.Outside;function _z(t,s,n){var a,r=(a={},a[Pz]=qh(t.selected),a[bi]=qh(t.disabled),a[Tz]=qh(t.hidden),a[Ez]=[t.today],a[xg]=[],a[pg]=[],a[fg]=[],a[Mz]=[],a);return t.fromDate&&r[bi].push({before:t.fromDate}),t.toDate&&r[bi].push({after:t.toDate}),Em(t)?r[bi]=r[bi].concat(s.modifiers[bi]):Mm(t)&&(r[bi]=r[bi].concat(n.modifiers[bi]),r[fg]=n.modifiers[fg],r[pg]=n.modifiers[pg],r[xg]=n.modifiers[xg]),r}var FT=N.createContext(void 0);function Rz(t){var s=Gs(),n=M0(),a=R0(),r=_z(s,n,a),i=Az(s.modifiers),l=Kt(Kt({},r),i);return e.jsx(FT.Provider,{value:l,children:t.children})}function qT(){var t=N.useContext(FT);if(!t)throw new Error("useModifiers must be used within a ModifiersProvider");return t}function Oz(t){return!!(t&&typeof t=="object"&&"before"in t&&"after"in t)}function Dz(t){return!!(t&&typeof t=="object"&&"from"in t)}function Iz(t){return!!(t&&typeof t=="object"&&"after"in t)}function Lz(t){return!!(t&&typeof t=="object"&&"before"in t)}function Fz(t){return!!(t&&typeof t=="object"&&"dayOfWeek"in t)}function qz(t,s){var n,a=s.from,r=s.to;if(a&&r){var i=li(r,a)<0;i&&(n=[r,a],a=n[0],r=n[1]);var l=li(t,a)>=0&&li(r,t)>=0;return l}return r?Zn(r,t):a?Zn(a,t):!1}function $z(t){return k0(t)}function Bz(t){return Array.isArray(t)&&t.every(k0)}function Uz(t,s){return s.some(function(n){if(typeof n=="boolean")return n;if($z(n))return Zn(t,n);if(Bz(n))return n.includes(t);if(Dz(n))return qz(t,n);if(Fz(n))return n.dayOfWeek.includes(t.getDay());if(Oz(n)){var a=li(n.before,t),r=li(n.after,t),i=a>0,l=r<0,c=mv(n.before,n.after);return c?l&&i:i||l}return Iz(n)?li(t,n.after)>0:Lz(n)?li(n.before,t)>0:typeof n=="function"?n(t):!1})}function O0(t,s,n){var a=Object.keys(s).reduce(function(i,l){var c=s[l];return Uz(t,c)&&i.push(l),i},[]),r={};return a.forEach(function(i){return r[i]=!0}),n&&!T0(t,n)&&(r.outside=!0),r}function zz(t,s){for(var n=Ba(t[0]),a=Vp(t[t.length-1]),r,i,l=n;l<=a;){var c=O0(l,s),o=!c.disabled&&!c.hidden;if(!o){l=va(l,1);continue}if(c.selected)return l;c.today&&!i&&(i=l),r||(r=l),l=va(l,1)}return i||r}var Vz=365;function $T(t,s){var n=s.moveBy,a=s.direction,r=s.context,i=s.modifiers,l=s.retry,c=l===void 0?{count:0,lastFocused:t}:l,o=r.weekStartsOn,d=r.fromDate,h=r.toDate,u=r.locale,m={day:va,week:uv,month:Gr,year:SB,startOfWeek:function(v){return r.ISOWeek?Wo(v):fi(v,{locale:u,weekStartsOn:o})},endOfWeek:function(v){return r.ISOWeek?PT(v):A0(v,{locale:u,weekStartsOn:o})}},p=m[n](t,a==="after"?1:-1);a==="before"&&d?p=CB([d,p]):a==="after"&&h&&(p=kB([h,p]));var g=!0;if(i){var x=O0(p,i);g=!x.disabled&&!x.hidden}return g?p:c.count>Vz?c.lastFocused:$T(p,{moveBy:n,direction:a,context:r,modifiers:i,retry:Kt(Kt({},c),{count:c.count+1})})}var BT=N.createContext(void 0);function Gz(t){var s=_m(),n=qT(),a=N.useState(),r=a[0],i=a[1],l=N.useState(),c=l[0],o=l[1],d=zz(s.displayMonths,n),h=r??(c&&s.isDateDisplayed(c))?c:d,u=function(){o(r),i(void 0)},m=function(v){i(v)},p=Gs(),g=function(v,y){if(r){var f=$T(r,{moveBy:v,direction:y,context:p,modifiers:n});Zn(r,f)||(s.goToDate(f,r),m(f))}},x={focusedDay:r,focusTarget:h,blur:u,focus:m,focusDayAfter:function(){return g("day","after")},focusDayBefore:function(){return g("day","before")},focusWeekAfter:function(){return g("week","after")},focusWeekBefore:function(){return g("week","before")},focusMonthBefore:function(){return g("month","before")},focusMonthAfter:function(){return g("month","after")},focusYearBefore:function(){return g("year","before")},focusYearAfter:function(){return g("year","after")},focusStartOfWeek:function(){return g("startOfWeek","before")},focusEndOfWeek:function(){return g("endOfWeek","after")}};return e.jsx(BT.Provider,{value:x,children:t.children})}function D0(){var t=N.useContext(BT);if(!t)throw new Error("useFocusContext must be used within a FocusProvider");return t}function Wz(t,s){var n=qT(),a=O0(t,n,s);return a}var I0=N.createContext(void 0);function Hz(t){if(!Gp(t.initialProps)){var s={selected:void 0};return e.jsx(I0.Provider,{value:s,children:t.children})}return e.jsx(Kz,{initialProps:t.initialProps,children:t.children})}function Kz(t){var s=t.initialProps,n=t.children,a=function(i,l,c){var o,d,h;if((o=s.onDayClick)===null||o===void 0||o.call(s,i,l,c),l.selected&&!s.required){(d=s.onSelect)===null||d===void 0||d.call(s,void 0,i,l,c);return}(h=s.onSelect)===null||h===void 0||h.call(s,i,i,l,c)},r={selected:s.selected,onDayClick:a};return e.jsx(I0.Provider,{value:r,children:n})}function UT(){var t=N.useContext(I0);if(!t)throw new Error("useSelectSingle must be used within a SelectSingleProvider");return t}function Yz(t,s){var n=Gs(),a=UT(),r=M0(),i=R0(),l=D0(),c=l.focusDayAfter,o=l.focusDayBefore,d=l.focusWeekAfter,h=l.focusWeekBefore,u=l.blur,m=l.focus,p=l.focusMonthBefore,g=l.focusMonthAfter,x=l.focusYearBefore,v=l.focusYearAfter,y=l.focusStartOfWeek,f=l.focusEndOfWeek,b=function(O){var z,F,K,D;Gp(n)?(z=a.onDayClick)===null||z===void 0||z.call(a,t,s,O):Em(n)?(F=r.onDayClick)===null||F===void 0||F.call(r,t,s,O):Mm(n)?(K=i.onDayClick)===null||K===void 0||K.call(i,t,s,O):(D=n.onDayClick)===null||D===void 0||D.call(n,t,s,O)},j=function(O){var z;m(t),(z=n.onDayFocus)===null||z===void 0||z.call(n,t,s,O)},S=function(O){var z;u(),(z=n.onDayBlur)===null||z===void 0||z.call(n,t,s,O)},k=function(O){var z;(z=n.onDayMouseEnter)===null||z===void 0||z.call(n,t,s,O)},T=function(O){var z;(z=n.onDayMouseLeave)===null||z===void 0||z.call(n,t,s,O)},A=function(O){var z;(z=n.onDayPointerEnter)===null||z===void 0||z.call(n,t,s,O)},C=function(O){var z;(z=n.onDayPointerLeave)===null||z===void 0||z.call(n,t,s,O)},w=function(O){var z;(z=n.onDayTouchCancel)===null||z===void 0||z.call(n,t,s,O)},P=function(O){var z;(z=n.onDayTouchEnd)===null||z===void 0||z.call(n,t,s,O)},M=function(O){var z;(z=n.onDayTouchMove)===null||z===void 0||z.call(n,t,s,O)},I=function(O){var z;(z=n.onDayTouchStart)===null||z===void 0||z.call(n,t,s,O)},W=function(O){var z;(z=n.onDayKeyUp)===null||z===void 0||z.call(n,t,s,O)},_=function(O){var z;switch(O.key){case"ArrowLeft":O.preventDefault(),O.stopPropagation(),n.dir==="rtl"?c():o();break;case"ArrowRight":O.preventDefault(),O.stopPropagation(),n.dir==="rtl"?o():c();break;case"ArrowDown":O.preventDefault(),O.stopPropagation(),d();break;case"ArrowUp":O.preventDefault(),O.stopPropagation(),h();break;case"PageUp":O.preventDefault(),O.stopPropagation(),O.shiftKey?x():p();break;case"PageDown":O.preventDefault(),O.stopPropagation(),O.shiftKey?v():g();break;case"Home":O.preventDefault(),O.stopPropagation(),y();break;case"End":O.preventDefault(),O.stopPropagation(),f();break}(z=n.onDayKeyDown)===null||z===void 0||z.call(n,t,s,O)},B={onClick:b,onFocus:j,onBlur:S,onKeyDown:_,onKeyUp:W,onMouseEnter:k,onMouseLeave:T,onPointerEnter:A,onPointerLeave:C,onTouchCancel:w,onTouchEnd:P,onTouchMove:M,onTouchStart:I};return B}function Qz(){var t=Gs(),s=UT(),n=M0(),a=R0(),r=Gp(t)?s.selected:Em(t)?n.selected:Mm(t)?a.selected:void 0;return r}function Zz(t){return Object.values(Hr).includes(t)}function Xz(t,s){var n=[t.classNames.day];return Object.keys(s).forEach(function(a){var r=t.modifiersClassNames[a];if(r)n.push(r);else if(Zz(a)){var i=t.classNames["day_".concat(a)];i&&n.push(i)}}),n}function Jz(t,s){var n=Kt({},t.styles.day);return Object.keys(s).forEach(function(a){var r;n=Kt(Kt({},n),(r=t.modifiersStyles)===null||r===void 0?void 0:r[a])}),n}function e9(t,s,n){var a,r,i,l=Gs(),c=D0(),o=Wz(t,s),d=Yz(t,o),h=Qz(),u=!!(l.onDayClick||l.mode!=="default");N.useEffect(function(){var k;o.outside||c.focusedDay&&u&&Zn(c.focusedDay,t)&&((k=n.current)===null||k===void 0||k.focus())},[c.focusedDay,t,n,u,o.outside]);var m=Xz(l,o).join(" "),p=Jz(l,o),g=!!(o.outside&&!l.showOutsideDays||o.hidden),x=(i=(r=l.components)===null||r===void 0?void 0:r.DayContent)!==null&&i!==void 0?i:Nz,v=e.jsx(x,{date:t,displayMonth:s,activeModifiers:o}),y={style:p,className:m,children:v,role:"gridcell"},f=c.focusTarget&&Zn(c.focusTarget,t)&&!o.outside,b=c.focusedDay&&Zn(c.focusedDay,t),j=Kt(Kt(Kt({},y),(a={disabled:o.disabled,role:"gridcell"},a["aria-selected"]=o.selected,a.tabIndex=b||f?0:-1,a)),d),S={isButton:u,isHidden:g,activeModifiers:o,selectedDays:h,buttonProps:j,divProps:y};return S}function t9(t){var s=N.useRef(null),n=e9(t.date,t.displayMonth,s);return n.isHidden?e.jsx("div",{role:"gridcell"}):n.isButton?e.jsx(Dx,Kt({name:"day",ref:s},n.buttonProps)):e.jsx("div",Kt({},n.divProps))}function s9(t){var s=t.number,n=t.dates,a=Gs(),r=a.onWeekNumberClick,i=a.styles,l=a.classNames,c=a.locale,o=a.labels.labelWeekNumber,d=a.formatters.formatWeekNumber,h=d(Number(s),{locale:c});if(!r)return e.jsx("span",{className:l.weeknumber,style:i.weeknumber,children:h});var u=o(Number(s),{locale:c}),m=function(p){r(s,n,p)};return e.jsx(Dx,{name:"week-number","aria-label":u,className:l.weeknumber,style:i.weeknumber,onClick:m,children:h})}function n9(t){var s,n,a=Gs(),r=a.styles,i=a.classNames,l=a.showWeekNumber,c=a.components,o=(s=c==null?void 0:c.Day)!==null&&s!==void 0?s:t9,d=(n=c==null?void 0:c.WeekNumber)!==null&&n!==void 0?n:s9,h;return l&&(h=e.jsx("td",{className:i.cell,style:r.cell,children:e.jsx(d,{number:t.weekNumber,dates:t.dates})})),e.jsxs("tr",{className:i.row,style:r.row,children:[h,t.dates.map(function(u){return e.jsx("td",{className:i.cell,style:r.cell,role:"presentation",children:e.jsx(o,{displayMonth:t.displayMonth,date:u})},RU(u))})]})}function Fw(t,s,n){for(var a=n!=null&&n.ISOWeek?PT(s):A0(s,n),r=n!=null&&n.ISOWeek?Wo(t):fi(t,n),i=li(a,r),l=[],c=0;c<=i;c++)l.push(va(r,c));var o=l.reduce(function(d,h){var u=n!=null&&n.ISOWeek?TT(h):MT(h,n),m=d.find(function(p){return p.weekNumber===u});return m?(m.dates.push(h),d):(d.push({weekNumber:u,dates:[h]}),d)},[]);return o}function a9(t,s){var n=Fw(Ba(t),Vp(t),s);if(s!=null&&s.useFixedWeeks){var a=DU(t,s);if(a<6){var r=n[n.length-1],i=r.dates[r.dates.length-1],l=uv(i,6-a),c=Fw(uv(i,1),l,s);n.push.apply(n,c)}}return n}function r9(t){var s,n,a,r=Gs(),i=r.locale,l=r.classNames,c=r.styles,o=r.hideHead,d=r.fixedWeeks,h=r.components,u=r.weekStartsOn,m=r.firstWeekContainsDate,p=r.ISOWeek,g=a9(t.displayMonth,{useFixedWeeks:!!d,ISOWeek:p,locale:i,weekStartsOn:u,firstWeekContainsDate:m}),x=(s=h==null?void 0:h.Head)!==null&&s!==void 0?s:yz,v=(n=h==null?void 0:h.Row)!==null&&n!==void 0?n:n9,y=(a=h==null?void 0:h.Footer)!==null&&a!==void 0?a:gz;return e.jsxs("table",{id:t.id,className:l.table,style:c.table,role:"grid","aria-labelledby":t["aria-labelledby"],children:[!o&&e.jsx(x,{}),e.jsx("tbody",{className:l.tbody,style:c.tbody,children:g.map(function(f){return e.jsx(v,{displayMonth:t.displayMonth,dates:f.dates,weekNumber:f.weekNumber},f.weekNumber)})}),e.jsx(y,{displayMonth:t.displayMonth})]})}function i9(){return!!(typeof window<"u"&&window.document&&window.document.createElement)}var l9=i9()?N.useLayoutEffect:N.useEffect,gg=!1,o9=0;function qw(){return"react-day-picker-".concat(++o9)}function c9(t){var s,n=t??(gg?qw():null),a=N.useState(n),r=a[0],i=a[1];return l9(function(){r===null&&i(qw())},[]),N.useEffect(function(){gg===!1&&(gg=!0)},[]),(s=t??r)!==null&&s!==void 0?s:void 0}function d9(t){var s,n,a=Gs(),r=a.dir,i=a.classNames,l=a.styles,c=a.components,o=_m().displayMonths,d=c9(a.id?"".concat(a.id,"-").concat(t.displayIndex):void 0),h=a.id?"".concat(a.id,"-grid-").concat(t.displayIndex):void 0,u=[i.month],m=l.month,p=t.displayIndex===0,g=t.displayIndex===o.length-1,x=!p&&!g;r==="rtl"&&(s=[p,g],g=s[0],p=s[1]),p&&(u.push(i.caption_start),m=Kt(Kt({},m),l.caption_start)),g&&(u.push(i.caption_end),m=Kt(Kt({},m),l.caption_end)),x&&(u.push(i.caption_between),m=Kt(Kt({},m),l.caption_between));var v=(n=c==null?void 0:c.Caption)!==null&&n!==void 0?n:fz;return e.jsxs("div",{className:u.join(" "),style:m,children:[e.jsx(v,{id:d,displayMonth:t.displayMonth,displayIndex:t.displayIndex}),e.jsx(r9,{id:h,"aria-labelledby":d,displayMonth:t.displayMonth})]},t.displayIndex)}function u9(t){var s=Gs(),n=s.classNames,a=s.styles;return e.jsx("div",{className:n.months,style:a.months,children:t.children})}function m9(t){var s,n,a=t.initialProps,r=Gs(),i=D0(),l=_m(),c=N.useState(!1),o=c[0],d=c[1];N.useEffect(function(){r.initialFocus&&i.focusTarget&&(o||(i.focus(i.focusTarget),d(!0)))},[r.initialFocus,o,i.focus,i.focusTarget,i]);var h=[r.classNames.root,r.className];r.numberOfMonths>1&&h.push(r.classNames.multiple_months),r.showWeekNumber&&h.push(r.classNames.with_weeknumber);var u=Kt(Kt({},r.styles.root),r.style),m=Object.keys(a).filter(function(g){return g.startsWith("data-")}).reduce(function(g,x){var v;return Kt(Kt({},g),(v={},v[x]=a[x],v))},{}),p=(n=(s=a.components)===null||s===void 0?void 0:s.Months)!==null&&n!==void 0?n:u9;return e.jsx("div",Kt({className:h.join(" "),style:u,dir:r.dir,id:r.id,nonce:a.nonce,title:a.title,lang:a.lang},m,{children:e.jsx(p,{children:l.displayMonths.map(function(g,x){return e.jsx(d9,{displayIndex:x,displayMonth:g},x)})})}))}function h9(t){var s=t.children,n=LU(t,["children"]);return e.jsx(sz,{initialProps:n,children:e.jsx(mz,{children:e.jsx(Hz,{initialProps:n,children:e.jsx(bz,{initialProps:n,children:e.jsx(Cz,{initialProps:n,children:e.jsx(Rz,{children:e.jsx(Gz,{children:s})})})})})})})}function x9(t){return e.jsx(h9,Kt({},t,{children:e.jsx(m9,{initialProps:t})}))}function Ql({className:t,classNames:s,showOutsideDays:n=!0,...a}){return e.jsx(x9,{showOutsideDays:n,className:Je("p-3",t),classNames:{months:"flex flex-col sm:flex-row space-y-4 sm:space-x-4 sm:space-y-0",month:"space-y-4",caption:"flex justify-center pt-1 relative items-center",caption_label:"text-sm font-medium",nav:"space-x-1 flex items-center",nav_button:Je(Bu({variant:"outline"}),"h-7 w-7 bg-transparent p-0 opacity-50 hover:opacity-100"),nav_button_previous:"absolute left-1",nav_button_next:"absolute right-1",table:"w-full border-collapse space-y-1",head_row:"flex",head_cell:"text-muted-foreground rounded-md w-9 font-normal text-[0.8rem]",row:"flex w-full mt-2",cell:"h-9 w-9 text-center text-sm p-0 relative [&:has([aria-selected].day-range-end)]:rounded-r-md [&:has([aria-selected].day-outside)]:bg-accent/50 [&:has([aria-selected])]:bg-accent first:[&:has([aria-selected])]:rounded-l-md last:[&:has([aria-selected])]:rounded-r-md focus-within:relative focus-within:z-20",day:Je(Bu({variant:"ghost"}),"h-9 w-9 p-0 font-normal aria-selected:opacity-100"),day_range_end:"day-range-end",day_selected:"bg-primary text-primary-foreground hover:bg-primary hover:text-primary-foreground focus:bg-primary focus:text-primary-foreground",day_today:"bg-accent text-accent-foreground",day_outside:"day-outside text-muted-foreground aria-selected:bg-accent/50 aria-selected:text-muted-foreground",day_disabled:"text-muted-foreground opacity-50",day_range_middle:"aria-selected:bg-accent aria-selected:text-accent-foreground",day_hidden:"invisible",...s},components:{IconLeft:({className:r,...i})=>e.jsx(ju,{className:Je("h-4 w-4",r),...i}),IconRight:({className:r,...i})=>e.jsx(qo,{className:Je("h-4 w-4",r),...i})},...a})}Ql.displayName="Calendar";function p9({open:t,onOpenChange:s,mode:n="block",title:a}){const{toast:r}=nt(),[i,l]=N.useState([]),[c,o]=N.useState({title:"",description:"",startTime:"",endTime:"",location:"",notes:""}),d=g=>{g&&l(x=>x.some(y=>y.toDateString()===g.toDateString())?x.filter(y=>y.toDateString()!==g.toDateString()):[...x,g])},h=(g,x)=>{o(v=>({...v,[g]:x}))},u=async()=>{if(i.length===0){r({title:"No Dates Selected",description:"Please select at least one date.",variant:"destructive"});return}try{const g=n==="block"?"blocked":n==="schedule"?"scheduled":"updated";r({title:`Calendar ${g.charAt(0).toUpperCase()+g.slice(1)}`,description:`${i.length} date(s) have been ${g}.`}),s(!1),l([]),o({title:"",description:"",startTime:"",endTime:"",location:"",notes:""})}catch{r({title:"Error",description:"Failed to update calendar. Please try again.",variant:"destructive"})}},m=()=>{if(a)return a;switch(n){case"block":return"Block Calendar Dates";case"schedule":return"Schedule Event";case"availability":return"Update Availability";default:return"Calendar Management"}},p=()=>{switch(n){case"block":return"Select dates you want to block from bookings.";case"schedule":return"Schedule a new event or appointment.";case"availability":return"Update your availability for bookings.";default:return"Manage your calendar settings."}};return e.jsx(kt,{open:t,onOpenChange:s,children:e.jsxs(wt,{className:"sm:max-w-[600px] max-h-[80vh] overflow-y-auto",children:[e.jsxs(St,{children:[e.jsxs(Ct,{className:"flex items-center gap-2",children:[e.jsx(dt,{className:"h-5 w-5"}),m()]}),e.jsx(us,{children:p()})]}),e.jsxs("div",{className:"space-y-6 py-4",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"text-lg font-medium",children:"Select Dates"}),i.length>0&&e.jsxs("span",{className:"text-sm text-muted-foreground",children:[i.length," date(s) selected"]})]}),e.jsx("div",{className:"flex justify-center",children:e.jsx(Ql,{mode:"single",onSelect:d,className:"rounded-md border",disabled:g=>g<new Date})}),i.length>0&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(q,{children:"Selected Dates:"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:i.map((g,x)=>e.jsx("span",{className:"px-2 py-1 bg-blue-100 text-blue-800 text-xs rounded-full",children:g.toLocaleDateString()},x))})]})]}),n==="schedule"&&e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-medium",children:"Event Details"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(q,{htmlFor:"title",children:"Event Title"}),e.jsx($,{id:"title",value:c.title,onChange:g=>h("title",g.target.value),placeholder:"Enter event title"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(q,{htmlFor:"location",children:"Location"}),e.jsx($,{id:"location",value:c.location,onChange:g=>h("location",g.target.value),placeholder:"Event location"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(q,{htmlFor:"startTime",children:"Start Time"}),e.jsx($,{id:"startTime",type:"time",value:c.startTime,onChange:g=>h("startTime",g.target.value)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(q,{htmlFor:"endTime",children:"End Time"}),e.jsx($,{id:"endTime",type:"time",value:c.endTime,onChange:g=>h("endTime",g.target.value)})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(q,{htmlFor:"description",children:"Description"}),e.jsx(mt,{id:"description",value:c.description,onChange:g=>h("description",g.target.value),placeholder:"Event description...",rows:3})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(q,{htmlFor:"notes",children:"Notes"}),e.jsx(mt,{id:"notes",value:c.notes,onChange:g=>h("notes",g.target.value),placeholder:"Additional notes...",rows:2})]})]}),n==="block"&&e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-medium",children:"Block Details"}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(q,{htmlFor:"reason",children:"Reason for Blocking"}),e.jsx(mt,{id:"reason",value:c.notes,onChange:g=>h("notes",g.target.value),placeholder:"Optional: Reason for blocking these dates...",rows:2})]}),e.jsxs("div",{className:"flex items-start space-x-2 p-3 bg-yellow-50 border border-yellow-200 rounded-lg",children:[e.jsx(ys,{className:"h-4 w-4 text-yellow-600 mt-0.5"}),e.jsxs("div",{className:"text-sm text-yellow-800",children:[e.jsx("p",{className:"font-medium",children:"Important:"}),e.jsx("p",{children:"Blocked dates will not be available for new bookings. Existing bookings will not be affected."})]})]})]})]}),e.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t",children:[e.jsxs(E,{variant:"outline",onClick:()=>s(!1),children:[e.jsx(Xt,{className:"h-4 w-4 mr-2"}),"Cancel"]}),e.jsxs(E,{onClick:u,children:[e.jsx(js,{className:"h-4 w-4 mr-2"}),n==="block"?"Block Dates":n==="schedule"?"Schedule Event":"Update Availability"]})]})]})})}function f9({open:t,onOpenChange:s}){const{toast:n}=nt(),[a,r]=N.useState([]),[i,l]=N.useState({name:"",type:"",condition:"good",maintenanceDate:"",notes:""}),[c,o]=N.useState(!1),d=(x,v)=>{l(y=>({...y,[x]:v}))},h=()=>{if(!i.name||!i.type){n({title:"Missing Information",description:"Please fill in equipment name and type.",variant:"destructive"});return}const x={id:Date.now().toString(),...i};r(v=>[...v,x]),l({name:"",type:"",condition:"good",maintenanceDate:"",notes:""}),o(!1),n({title:"Equipment Added",description:`${i.name} has been added to your equipment list.`})},u=x=>{r(v=>v.filter(y=>y.id!==x)),n({title:"Equipment Removed",description:"Equipment has been removed from your list."})},m=async()=>{try{n({title:"Equipment Updated",description:"Your equipment inventory has been saved."}),s(!1)}catch{n({title:"Error",description:"Failed to update equipment. Please try again.",variant:"destructive"})}},p=x=>{switch(x){case"excellent":return"bg-green-100 text-green-800";case"good":return"bg-blue-100 text-blue-800";case"fair":return"bg-yellow-100 text-yellow-800";case"needs_repair":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},g=x=>{if(!x)return!1;const v=new Date(x),y=new Date;return y.setMonth(y.getMonth()-6),v<y};return e.jsx(kt,{open:t,onOpenChange:s,children:e.jsxs(wt,{className:"sm:max-w-[800px] max-h-[80vh] overflow-y-auto",children:[e.jsxs(St,{children:[e.jsxs(Ct,{className:"flex items-center gap-2",children:[e.jsx(ya,{className:"h-5 w-5"}),"Equipment Management"]}),e.jsx(us,{children:"Manage your music equipment inventory and maintenance schedule."})]}),e.jsx("div",{className:"space-y-6 py-4",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"text-lg font-medium",children:"Your Equipment"}),e.jsxs(E,{onClick:()=>o(!c),size:"sm",children:[e.jsx(st,{className:"h-4 w-4 mr-2"}),"Add Equipment"]})]}),c&&e.jsxs("div",{className:"border rounded-lg p-4 space-y-4 bg-gray-50",children:[e.jsx("h4",{className:"font-medium",children:"Add New Equipment"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(q,{htmlFor:"name",children:"Equipment Name"}),e.jsx($,{id:"name",value:i.name,onChange:x=>d("name",x.target.value),placeholder:"e.g., Fender Bass Guitar"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(q,{htmlFor:"type",children:"Type"}),e.jsxs(Re,{onValueChange:x=>d("type",x),children:[e.jsx(Me,{children:e.jsx(Oe,{placeholder:"Select equipment type"})}),e.jsxs(_e,{children:[e.jsx(U,{value:"Bass Guitar",children:"Bass Guitar"}),e.jsx(U,{value:"Electric Guitar",children:"Electric Guitar"}),e.jsx(U,{value:"Acoustic Guitar",children:"Acoustic Guitar"}),e.jsx(U,{value:"Drums",children:"Drums"}),e.jsx(U,{value:"Keyboard",children:"Keyboard"}),e.jsx(U,{value:"Microphone",children:"Microphone"}),e.jsx(U,{value:"Amplifier",children:"Amplifier"}),e.jsx(U,{value:"Audio Interface",children:"Audio Interface"}),e.jsx(U,{value:"Mixer",children:"Mixer"}),e.jsx(U,{value:"Speakers",children:"Speakers"}),e.jsx(U,{value:"Other",children:"Other"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(q,{htmlFor:"condition",children:"Condition"}),e.jsxs(Re,{value:i.condition,onValueChange:x=>d("condition",x),children:[e.jsx(Me,{children:e.jsx(Oe,{})}),e.jsxs(_e,{children:[e.jsx(U,{value:"excellent",children:"Excellent"}),e.jsx(U,{value:"good",children:"Good"}),e.jsx(U,{value:"fair",children:"Fair"}),e.jsx(U,{value:"needs_repair",children:"Needs Repair"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(q,{htmlFor:"maintenanceDate",children:"Last Maintenance"}),e.jsx($,{id:"maintenanceDate",type:"date",value:i.maintenanceDate,onChange:x=>d("maintenanceDate",x.target.value)})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(q,{htmlFor:"notes",children:"Notes"}),e.jsx(mt,{id:"notes",value:i.notes,onChange:x=>d("notes",x.target.value),placeholder:"Additional notes about this equipment...",rows:2})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(E,{onClick:h,size:"sm",children:[e.jsx(js,{className:"h-4 w-4 mr-2"}),"Add Equipment"]}),e.jsx(E,{variant:"outline",onClick:()=>o(!1),size:"sm",children:"Cancel"})]})]}),e.jsxs("div",{className:"space-y-3",children:[a.map(x=>e.jsx("div",{className:"border rounded-lg p-4",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("h4",{className:"font-medium",children:x.name}),e.jsx(X,{variant:"outline",children:x.type}),e.jsx(X,{className:p(x.condition),children:x.condition.replace("_"," ")}),x.maintenanceDate&&g(x.maintenanceDate)&&e.jsxs(X,{className:"bg-orange-100 text-orange-800",children:[e.jsx(on,{className:"h-3 w-3 mr-1"}),"Maintenance Due"]})]}),e.jsxs("div",{className:"text-sm text-muted-foreground space-y-1",children:[x.maintenanceDate&&e.jsxs("p",{children:["Last maintenance: ",new Date(x.maintenanceDate).toLocaleDateString()]}),x.notes&&e.jsx("p",{children:x.notes})]})]}),e.jsx(E,{variant:"outline",size:"sm",onClick:()=>u(x.id),className:"text-red-600 hover:text-red-700",children:e.jsx(Vt,{className:"h-4 w-4"})})]})},x.id)),a.length===0&&e.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[e.jsx(ya,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),e.jsx("p",{children:"No equipment added yet."}),e.jsx("p",{className:"text-sm",children:'Click "Add Equipment" to get started.'})]})]})]})}),e.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t",children:[e.jsxs(E,{variant:"outline",onClick:()=>s(!1),children:[e.jsx(Xt,{className:"h-4 w-4 mr-2"}),"Close"]}),e.jsxs(E,{onClick:m,children:[e.jsx(js,{className:"h-4 w-4 mr-2"}),"Save Changes"]})]})]})})}function g9({open:t,onOpenChange:s,booking:n,onResponse:a}){const{toast:r}=nt(),[i,l]=N.useState(""),[c,o]=N.useState(!1),d=async h=>{if(n){o(!0);try{await a(n.id,h,i),r({title:`Booking ${h==="accept"?"Accepted":"Declined"}`,description:`You have ${h}ed the booking for ${n.eventName}.`}),s(!1),l("")}catch{r({title:"Error",description:"Failed to respond to booking. Please try again.",variant:"destructive"})}finally{o(!1)}}};return n?e.jsx(kt,{open:t,onOpenChange:s,children:e.jsxs(wt,{className:"sm:max-w-[600px] max-h-[80vh] overflow-y-auto",children:[e.jsxs(St,{children:[e.jsxs(Ct,{className:"flex items-center gap-2",children:[e.jsx(dt,{className:"h-5 w-5"}),"Booking Request Response"]}),e.jsx(us,{children:"Review and respond to this booking request."})]}),e.jsxs("div",{className:"space-y-6 py-4",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"text-lg font-medium",children:n.eventName}),e.jsx(X,{variant:"outline",className:"capitalize",children:n.status})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(dt,{className:"h-4 w-4 text-muted-foreground"}),e.jsx("span",{className:"text-sm",children:new Date(n.eventDate).toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"})})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Dn,{className:"h-4 w-4 text-muted-foreground"}),e.jsxs("div",{className:"text-sm",children:[e.jsx("p",{className:"font-medium",children:n.venueName}),e.jsx("p",{className:"text-muted-foreground",children:n.venueAddress})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(cn,{className:"h-4 w-4 text-muted-foreground"}),e.jsxs("div",{className:"text-sm",children:[e.jsx("p",{className:"font-medium",children:n.clientName}),e.jsx("p",{className:"text-muted-foreground",children:n.clientEmail})]})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Qt,{className:"h-4 w-4 text-muted-foreground"}),e.jsx("span",{className:"text-sm capitalize",children:n.eventType})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(It,{className:"h-4 w-4 text-muted-foreground"}),e.jsxs("span",{className:"text-sm",children:["$",n.totalBudget," budget"]})]})]})]}),n.requirements&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(q,{className:"text-sm font-medium",children:"Special Requirements:"}),e.jsx("div",{className:"p-3 bg-gray-50 rounded-lg text-sm",children:n.requirements})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(q,{htmlFor:"response",children:"Response Message (Optional)"}),e.jsx(mt,{id:"response",value:i,onChange:h=>l(h.target.value),placeholder:"Add a personal message to the client...",rows:4}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"This message will be sent to the client along with your response."})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 pt-4 border-t",children:[e.jsxs(E,{onClick:()=>d("accept"),disabled:c,className:"flex-1 bg-green-600 hover:bg-green-700",children:[e.jsx(ct,{className:"h-4 w-4 mr-2"}),"Accept Booking"]}),e.jsxs(E,{variant:"outline",onClick:()=>d("decline"),disabled:c,className:"flex-1 border-red-300 text-red-600 hover:bg-red-50",children:[e.jsx(Fa,{className:"h-4 w-4 mr-2"}),"Decline Booking"]}),e.jsx(E,{variant:"outline",onClick:()=>s(!1),disabled:c,className:"flex-1",children:"Close"})]}),e.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3",children:e.jsxs("div",{className:"text-sm text-blue-800",children:[e.jsx("p",{className:"font-medium mb-1",children:"Next Steps:"}),e.jsxs("ul",{className:"list-disc list-inside space-y-1 text-xs",children:[e.jsx("li",{children:"If accepted, a contract will be automatically generated"}),e.jsx("li",{children:"You'll receive a calendar invite for the event"}),e.jsx("li",{children:"Payment details will be coordinated through the platform"}),e.jsx("li",{children:"Technical rider requirements will be sent to the venue"})]})]})})]})]})}):null}function j9({open:t,onOpenChange:s}){const{toast:n}=nt(),[a,r]=N.useState([]),[i,l]=N.useState(null),[c,o]=N.useState(!1),[d,h]=N.useState({name:"",category:"",price:"",stock:"",description:"",sizes:[],colors:[]}),u=(j,S)=>{h(k=>({...k,[j]:S}))},m=(j,S)=>{const k=S.split(",").map(T=>T.trim()).filter(Boolean);h(T=>({...T,[j]:k}))},p=()=>{if(!d.name||!d.category||!d.price){n({title:"Missing Information",description:"Please fill in name, category, and price.",variant:"destructive"});return}const j={id:Date.now().toString(),name:d.name,category:d.category,price:d.price,stock:parseInt(d.stock)||0,description:d.description,sizes:d.sizes.length>0?d.sizes:void 0,colors:d.colors.length>0?d.colors:void 0};r(S=>[...S,j]),y(),n({title:"Item Added",description:`${d.name} has been added to your merchandise.`})},g=j=>{l(j),h({name:j.name,category:j.category,price:j.price,stock:j.stock.toString(),description:j.description,sizes:j.sizes||[],colors:j.colors||[]}),o(!0)},x=()=>{if(!i)return;const j={...i,name:d.name,category:d.category,price:d.price,stock:parseInt(d.stock)||0,description:d.description,sizes:d.sizes.length>0?d.sizes:void 0,colors:d.colors.length>0?d.colors:void 0};r(S=>S.map(k=>k.id===i.id?j:k)),y(),l(null),n({title:"Item Updated",description:`${d.name} has been updated.`})},v=j=>{r(S=>S.filter(k=>k.id!==j)),n({title:"Item Removed",description:"Merchandise item has been removed."})},y=()=>{h({name:"",category:"",price:"",stock:"",description:"",sizes:[],colors:[]}),o(!1),l(null)},f=async()=>{try{n({title:"Merchandise Updated",description:"Your merchandise inventory has been saved."}),s(!1)}catch{n({title:"Error",description:"Failed to update merchandise. Please try again.",variant:"destructive"})}},b=j=>j===0?{color:"bg-red-100 text-red-800",text:"Out of Stock"}:j<=5?{color:"bg-yellow-100 text-yellow-800",text:"Low Stock"}:{color:"bg-green-100 text-green-800",text:"In Stock"};return e.jsx(kt,{open:t,onOpenChange:s,children:e.jsxs(wt,{className:"sm:max-w-[900px] max-h-[80vh] overflow-y-auto",children:[e.jsxs(St,{children:[e.jsxs(Ct,{className:"flex items-center gap-2",children:[e.jsx(Na,{className:"h-5 w-5"}),"Merchandise Management"]}),e.jsx(us,{children:"Manage your merchandise inventory, pricing, and stock levels."})]}),e.jsx("div",{className:"space-y-6 py-4",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"text-lg font-medium",children:"Your Merchandise"}),e.jsxs(E,{onClick:()=>o(!c),size:"sm",children:[e.jsx(st,{className:"h-4 w-4 mr-2"}),"Add Item"]})]}),c&&e.jsxs("div",{className:"border rounded-lg p-4 space-y-4 bg-gray-50",children:[e.jsx("h4",{className:"font-medium",children:i?"Edit Item":"Add New Item"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(q,{htmlFor:"name",children:"Item Name"}),e.jsx($,{id:"name",value:d.name,onChange:j=>u("name",j.target.value),placeholder:"e.g., Concert T-Shirt"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(q,{htmlFor:"category",children:"Category"}),e.jsxs(Re,{value:d.category,onValueChange:j=>u("category",j),children:[e.jsx(Me,{children:e.jsx(Oe,{placeholder:"Select category"})}),e.jsxs(_e,{children:[e.jsx(U,{value:"Apparel",children:"Apparel"}),e.jsx(U,{value:"Music",children:"Music"}),e.jsx(U,{value:"Accessories",children:"Accessories"}),e.jsx(U,{value:"Collectibles",children:"Collectibles"}),e.jsx(U,{value:"Digital",children:"Digital"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(q,{htmlFor:"price",children:"Price ($)"}),e.jsx($,{id:"price",type:"number",step:"0.01",value:d.price,onChange:j=>u("price",j.target.value),placeholder:"0.00"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(q,{htmlFor:"stock",children:"Stock Quantity"}),e.jsx($,{id:"stock",type:"number",value:d.stock,onChange:j=>u("stock",j.target.value),placeholder:"0"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(q,{htmlFor:"sizes",children:"Sizes (comma separated)"}),e.jsx($,{id:"sizes",value:d.sizes.join(", "),onChange:j=>m("sizes",j.target.value),placeholder:"S, M, L, XL"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(q,{htmlFor:"colors",children:"Colors (comma separated)"}),e.jsx($,{id:"colors",value:d.colors.join(", "),onChange:j=>m("colors",j.target.value),placeholder:"Black, White, Navy"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(q,{htmlFor:"description",children:"Description"}),e.jsx(mt,{id:"description",value:d.description,onChange:j=>u("description",j.target.value),placeholder:"Describe the merchandise item...",rows:2})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(E,{onClick:i?x:p,size:"sm",children:[e.jsx(js,{className:"h-4 w-4 mr-2"}),i?"Update Item":"Add Item"]}),e.jsx(E,{variant:"outline",onClick:y,size:"sm",children:"Cancel"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.map(j=>{const S=b(j.stock);return e.jsxs("div",{className:"border rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"font-medium",children:j.name}),e.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[e.jsx(X,{variant:"outline",children:j.category}),e.jsx(X,{className:S.color,children:S.text})]})]}),e.jsxs("div",{className:"flex gap-1",children:[e.jsx(E,{variant:"outline",size:"sm",onClick:()=>g(j),children:e.jsx($s,{className:"h-3 w-3"})}),e.jsx(E,{variant:"outline",size:"sm",onClick:()=>v(j.id),className:"text-red-600 hover:text-red-700",children:e.jsx(Vt,{className:"h-3 w-3"})})]})]}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Price:"}),e.jsxs("span",{className:"font-medium",children:["$",j.price]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Stock:"}),e.jsxs("span",{children:[j.stock," units"]})]}),j.sizes&&e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Sizes:"}),e.jsx("span",{children:j.sizes.join(", ")})]}),j.colors&&e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Colors:"}),e.jsx("span",{children:j.colors.join(", ")})]}),j.description&&e.jsx("p",{className:"text-muted-foreground text-xs pt-2",children:j.description})]}),j.stock<=5&&j.stock>0&&e.jsxs("div",{className:"flex items-center mt-2 p-2 bg-yellow-50 border border-yellow-200 rounded text-xs text-yellow-800",children:[e.jsx(on,{className:"h-3 w-3 mr-1"}),"Low stock - consider restocking soon"]})]},j.id)}),a.length===0&&e.jsxs("div",{className:"col-span-2 text-center py-8 text-muted-foreground",children:[e.jsx(Na,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),e.jsx("p",{children:"No merchandise added yet."}),e.jsx("p",{className:"text-sm",children:'Click "Add Item" to get started.'})]})]})]})}),e.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t",children:[e.jsxs(E,{variant:"outline",onClick:()=>s(!1),children:[e.jsx(Xt,{className:"h-4 w-4 mr-2"}),"Close"]}),e.jsxs(E,{onClick:f,children:[e.jsx(js,{className:"h-4 w-4 mr-2"}),"Save Changes"]})]})]})})}function v9({open:t,onOpenChange:s}){const{toast:n}=nt(),[a,r]=N.useState([]),[i,l]=N.useState(null),[c,o]=N.useState(!1),[d,h]=N.useState({name:"",description:"",price:"",duration:"",unit:"session",category:"",isActive:!0}),u=(b,j)=>{h(S=>({...S,[b]:j}))},m=()=>{if(!d.name||!d.description||!d.price){n({title:"Missing Information",description:"Please fill in name, description, and price.",variant:"destructive"});return}const b={id:Date.now().toString(),name:d.name,description:d.description,price:d.price,duration:d.duration,unit:d.unit,category:d.category,isActive:d.isActive};r(j=>[...j,b]),y(),n({title:"Service Added",description:`${d.name} has been added to your services.`})},p=b=>{l(b),h({name:b.name,description:b.description,price:b.price,duration:b.duration,unit:b.unit,category:b.category,isActive:b.isActive}),o(!0)},g=()=>{if(!i)return;const b={...i,name:d.name,description:d.description,price:d.price,duration:d.duration,unit:d.unit,category:d.category,isActive:d.isActive};r(j=>j.map(S=>S.id===i.id?b:S)),y(),l(null),n({title:"Service Updated",description:`${d.name} has been updated.`})},x=b=>{r(j=>j.map(S=>S.id===b?{...S,isActive:!S.isActive}:S))},v=b=>{r(j=>j.filter(S=>S.id!==b)),n({title:"Service Removed",description:"Service has been removed from your offerings."})},y=()=>{h({name:"",description:"",price:"",duration:"",unit:"session",category:"",isActive:!0}),o(!1),l(null)},f=async()=>{try{n({title:"Services Updated",description:"Your service offerings have been saved."}),s(!1)}catch{n({title:"Error",description:"Failed to update services. Please try again.",variant:"destructive"})}};return e.jsx(kt,{open:t,onOpenChange:s,children:e.jsxs(wt,{className:"sm:max-w-[800px] max-h-[80vh] overflow-y-auto",children:[e.jsxs(St,{children:[e.jsxs(Ct,{className:"flex items-center gap-2",children:[e.jsx(Os,{className:"h-5 w-5"}),"Service Management"]}),e.jsx(us,{children:"Manage your professional services, pricing, and availability."})]}),e.jsx("div",{className:"space-y-6 py-4",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"text-lg font-medium",children:"Your Services"}),e.jsxs(E,{onClick:()=>o(!c),size:"sm",children:[e.jsx(st,{className:"h-4 w-4 mr-2"}),"Add Service"]})]}),c&&e.jsxs("div",{className:"border rounded-lg p-4 space-y-4 bg-gray-50",children:[e.jsx("h4",{className:"font-medium",children:i?"Edit Service":"Add New Service"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(q,{htmlFor:"name",children:"Service Name"}),e.jsx($,{id:"name",value:d.name,onChange:b=>u("name",b.target.value),placeholder:"e.g., Career Strategy Consultation"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(q,{htmlFor:"category",children:"Category"}),e.jsxs(Re,{value:d.category,onValueChange:b=>u("category",b),children:[e.jsx(Me,{children:e.jsx(Oe,{placeholder:"Select category"})}),e.jsxs(_e,{children:[e.jsx(U,{value:"Consulting",children:"Consulting"}),e.jsx(U,{value:"Legal",children:"Legal"}),e.jsx(U,{value:"Marketing",children:"Marketing"}),e.jsx(U,{value:"Production",children:"Production"}),e.jsx(U,{value:"Education",children:"Education"}),e.jsx(U,{value:"Mentoring",children:"Mentoring"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(q,{htmlFor:"price",children:"Price ($)"}),e.jsx($,{id:"price",type:"number",step:"0.01",value:d.price,onChange:b=>u("price",b.target.value),placeholder:"0.00"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(q,{htmlFor:"duration",children:"Duration"}),e.jsx($,{id:"duration",type:"number",value:d.duration,onChange:b=>u("duration",b.target.value),placeholder:"60"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(q,{htmlFor:"unit",children:"Unit"}),e.jsxs(Re,{value:d.unit,onValueChange:b=>u("unit",b),children:[e.jsx(Me,{children:e.jsx(Oe,{})}),e.jsxs(_e,{children:[e.jsx(U,{value:"session",children:"Session"}),e.jsx(U,{value:"hour",children:"Hour"}),e.jsx(U,{value:"day",children:"Day"}),e.jsx(U,{value:"project",children:"Project"})]})]})]}),e.jsx("div",{className:"space-y-2",children:e.jsxs(q,{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",checked:d.isActive,onChange:b=>u("isActive",b.target.checked)}),e.jsx("span",{children:"Active (available for booking)"})]})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(q,{htmlFor:"description",children:"Description"}),e.jsx(mt,{id:"description",value:d.description,onChange:b=>u("description",b.target.value),placeholder:"Describe what this service includes...",rows:3})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(E,{onClick:i?g:m,size:"sm",children:[e.jsx(js,{className:"h-4 w-4 mr-2"}),i?"Update Service":"Add Service"]}),e.jsx(E,{variant:"outline",onClick:y,size:"sm",children:"Cancel"})]})]}),e.jsxs("div",{className:"space-y-3",children:[a.map(b=>e.jsx("div",{className:"border rounded-lg p-4",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("h4",{className:"font-medium",children:b.name}),e.jsx(X,{variant:"outline",children:b.category}),e.jsx(X,{className:b.isActive?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800",children:b.isActive?"Active":"Inactive"})]}),e.jsx("p",{className:"text-sm text-muted-foreground mb-3",children:b.description}),e.jsxs("div",{className:"flex items-center gap-4 text-sm",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(It,{className:"h-3 w-3 text-muted-foreground"}),e.jsxs("span",{children:["$",b.price]})]}),b.duration&&e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(Qt,{className:"h-3 w-3 text-muted-foreground"}),e.jsxs("span",{children:[b.duration," minutes"]})]}),e.jsxs("span",{className:"text-muted-foreground",children:["per ",b.unit]})]})]}),e.jsxs("div",{className:"flex gap-1",children:[e.jsx(E,{variant:"outline",size:"sm",onClick:()=>x(b.id),className:b.isActive?"text-orange-600":"text-green-600",children:b.isActive?"Deactivate":"Activate"}),e.jsx(E,{variant:"outline",size:"sm",onClick:()=>p(b),children:e.jsx($s,{className:"h-3 w-3"})}),e.jsx(E,{variant:"outline",size:"sm",onClick:()=>v(b.id),className:"text-red-600 hover:text-red-700",children:e.jsx(Vt,{className:"h-3 w-3"})})]})]})},b.id)),a.length===0&&e.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[e.jsx(Os,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),e.jsx("p",{children:"No services added yet."}),e.jsx("p",{className:"text-sm",children:'Click "Add Service" to get started.'})]})]})]})}),e.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t",children:[e.jsxs(E,{variant:"outline",onClick:()=>s(!1),children:[e.jsx(Xt,{className:"h-4 w-4 mr-2"}),"Close"]}),e.jsxs(E,{onClick:f,children:[e.jsx(js,{className:"h-4 w-4 mr-2"}),"Save Changes"]})]})]})})}function Wp({open:t,onOpenChange:s,userId:n,mode:a="edit"}){const{toast:r}=nt(),i=Tt(),[l,c]=N.useState({fullName:"",email:"",role:"fan",status:"active",password:"",confirmPassword:""}),[o,d]=N.useState(!1),{data:h,isLoading:u}=ke({queryKey:["/api/users",n],enabled:!!n&&a!=="create",select:j=>j.find(S=>S.id.toString()===n)});ke({queryKey:["/api/roles"]}),N.useEffect(()=>{h&&a!=="create"?c({fullName:h.fullName||"",email:h.email||"",role:h.role||"fan",status:h.status||"active",password:"",confirmPassword:""}):a==="create"&&c({fullName:"",email:"",role:"fan",status:"active",password:"",confirmPassword:""})},[h,a]);const m=Xe({mutationFn:j=>xe("/api/auth/register",{method:"POST",body:JSON.stringify(j)}),onSuccess:()=>{r({title:"User Created",description:"New user account has been created successfully."}),i.invalidateQueries({queryKey:["/api/users"]}),s(!1)},onError:j=>{r({title:"Creation Failed",description:`Failed to create user: ${j}`,variant:"destructive"})}}),p=Xe({mutationFn:j=>xe(`/api/users/${n}`,{method:"PATCH",body:JSON.stringify(j)}),onSuccess:()=>{r({title:"User Updated",description:"User information has been updated successfully."}),i.invalidateQueries({queryKey:["/api/users"]}),s(!1)},onError:j=>{r({title:"Update Failed",description:`Failed to update user: ${j}`,variant:"destructive"})}}),g=(j,S)=>{c(k=>({...k,[j]:S}))},x=async()=>{if(!l.fullName||!l.email||!l.role){r({title:"Missing Required Fields",description:"Please fill in all required fields.",variant:"destructive"});return}if(a==="create"&&(!l.password||l.password!==l.confirmPassword)){r({title:"Password Error",description:"Password is required and must match confirmation.",variant:"destructive"});return}d(!0);try{a==="create"?await m.mutateAsync({fullName:l.fullName,email:l.email,password:l.password,roleId:parseInt(l.role)}):await p.mutateAsync({fullName:l.fullName,email:l.email,roleId:parseInt(l.role),status:l.status})}catch{}finally{d(!1)}if(a==="create"&&(!l.password||l.password!==l.confirmPassword)){r({title:"Password Error",description:"Password is required and passwords must match.",variant:"destructive"});return}d(!0);try{const j=a==="create"?"created":"updated";r({title:`User ${j.charAt(0).toUpperCase()+j.slice(1)}`,description:`${l.fullName} has been successfully ${j}.`}),s(!1)}catch{r({title:"Error",description:`Failed to ${a} user. Please try again.`,variant:"destructive"})}finally{d(!1)}},v=j=>{switch(j){case"superadmin":case"admin":return e.jsx(Bt,{className:"h-4 w-4"});case"managed_artist":case"artist":return e.jsx(Ue,{className:"h-4 w-4"});case"managed_musician":case"musician":return e.jsx(Ze,{className:"h-4 w-4"});default:return e.jsx(cn,{className:"h-4 w-4"})}},y=j=>{switch(j){case"superadmin":return"bg-red-100 text-red-800";case"admin":return"bg-blue-100 text-blue-800";case"managed_artist":case"artist":return"bg-purple-100 text-purple-800";case"managed_musician":case"musician":return"bg-green-100 text-green-800";case"managed_professional":case"professional":return"bg-orange-100 text-orange-800";case"fan":return"bg-pink-100 text-pink-800";default:return"bg-gray-100 text-gray-800"}},f=j=>{switch(j){case"active":return"bg-green-100 text-green-800";case"inactive":return"bg-gray-100 text-gray-800";case"suspended":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},b=()=>{switch(a){case"create":return"Create New User";case"view":return"View User Details";case"edit":default:return"Edit User"}};return e.jsx(kt,{open:t,onOpenChange:s,children:e.jsxs(wt,{className:"sm:max-w-[500px]",children:[e.jsxs(St,{children:[e.jsxs(Ct,{className:"flex items-center gap-2",children:[e.jsx($s,{className:"h-5 w-5"}),b()]}),e.jsxs(us,{children:[a==="create"&&"Create a new user account with appropriate role and permissions.",a==="edit"&&"Update user information, role, and account status.",a==="view"&&"View user account details and current status."]})]}),e.jsx("div",{className:"space-y-6 py-4",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(q,{htmlFor:"fullName",children:"Full Name *"}),e.jsx($,{id:"fullName",value:l.fullName,onChange:j=>g("fullName",j.target.value),placeholder:"Enter full name",disabled:a==="view"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(q,{htmlFor:"email",children:"Email Address *"}),e.jsx($,{id:"email",type:"email",value:l.email,onChange:j=>g("email",j.target.value),placeholder:"Enter email address",disabled:a==="view"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(q,{htmlFor:"role",children:"Role *"}),e.jsxs(Re,{value:l.role,onValueChange:j=>g("role",j),disabled:a==="view",children:[e.jsx(Me,{children:e.jsx(Oe,{})}),e.jsxs(_e,{children:[e.jsx(U,{value:"fan",children:"Fan"}),e.jsx(U,{value:"artist",children:"Artist"}),e.jsx(U,{value:"managed_artist",children:"Managed Artist"}),e.jsx(U,{value:"musician",children:"Musician"}),e.jsx(U,{value:"managed_musician",children:"Managed Musician"}),e.jsx(U,{value:"professional",children:"Professional"}),e.jsx(U,{value:"managed_professional",children:"Managed Professional"}),e.jsx(U,{value:"admin",children:"Admin"}),e.jsx(U,{value:"superadmin",children:"Superadmin"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(q,{htmlFor:"status",children:"Account Status"}),e.jsxs(Re,{value:l.status,onValueChange:j=>g("status",j),disabled:a==="view",children:[e.jsx(Me,{children:e.jsx(Oe,{})}),e.jsxs(_e,{children:[e.jsx(U,{value:"active",children:"Active"}),e.jsx(U,{value:"inactive",children:"Inactive"}),e.jsx(U,{value:"suspended",children:"Suspended"})]})]})]})]}),a==="create"&&e.jsxs("div",{className:"space-y-4 pt-4 border-t",children:[e.jsx("h4",{className:"font-medium",children:"Password Setup"}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(q,{htmlFor:"password",children:"Password *"}),e.jsx($,{id:"password",type:"password",value:l.password,onChange:j=>g("password",j.target.value),placeholder:"Enter password"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(q,{htmlFor:"confirmPassword",children:"Confirm Password *"}),e.jsx($,{id:"confirmPassword",type:"password",value:l.confirmPassword,onChange:j=>g("confirmPassword",j.target.value),placeholder:"Confirm password"})]})]}),a!=="create"&&h&&e.jsxs("div",{className:"space-y-4 pt-4 border-t",children:[e.jsx("h4",{className:"font-medium",children:"Account Information"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx(q,{className:"text-xs text-muted-foreground",children:"Current Role"}),e.jsx("div",{className:"flex items-center gap-2 mt-1",children:e.jsxs(X,{className:y(h.role),children:[v(h.role),e.jsx("span",{className:"ml-1 capitalize",children:h.role.replace("_"," ")})]})})]}),e.jsxs("div",{children:[e.jsx(q,{className:"text-xs text-muted-foreground",children:"Status"}),e.jsx("div",{className:"flex items-center gap-2 mt-1",children:e.jsx(X,{className:f(h.status),children:e.jsx("span",{className:"capitalize",children:h.status})})})]}),e.jsxs("div",{children:[e.jsx(q,{className:"text-xs text-muted-foreground",children:"Member Since"}),e.jsx("p",{className:"text-xs mt-1",children:new Date(h.createdAt).toLocaleDateString()})]}),h.lastLogin&&e.jsxs("div",{children:[e.jsx(q,{className:"text-xs text-muted-foreground",children:"Last Login"}),e.jsx("p",{className:"text-xs mt-1",children:new Date(h.lastLogin).toLocaleDateString()})]})]})]})]})}),a!=="view"&&e.jsxs("div",{className:"flex flex-col sm:flex-row justify-end gap-3 pt-4 border-t",children:[e.jsxs(E,{variant:"outline",onClick:()=>s(!1),disabled:o,className:"w-full sm:w-auto",children:[e.jsx(Xt,{className:"h-4 w-4 mr-2"}),"Cancel"]}),e.jsxs(E,{onClick:x,disabled:o,className:"w-full sm:w-auto",children:[e.jsx(js,{className:"h-4 w-4 mr-2"}),a==="create"?"Create User":"Save Changes"]})]}),a==="view"&&e.jsx("div",{className:"flex flex-col sm:flex-row justify-end gap-3 pt-4 border-t",children:e.jsxs(E,{onClick:()=>s(!1),className:"w-full sm:w-auto",children:[e.jsx(Xt,{className:"h-4 w-4 mr-2"}),"Close"]})})]})})}function y9({open:t,onOpenChange:s}){const{toast:n}=nt(),[a,r]=N.useState([]),[i,l]=N.useState(null),[c,o]=N.useState(!1),[d,h]=N.useState(""),[u,m]=N.useState("all"),[p,g]=N.useState({title:"",category:"",content:"",type:"article",url:"",tags:[]}),x=["Industry Knowledge","Performance Tips","Recording Techniques","Business Development","Marketing & Promotion","Legal & Contracts","Equipment & Gear","Software & Tools"],v=(A,C)=>{g(w=>({...w,[A]:C}))},y=A=>{const C=A.split(",").map(w=>w.trim()).filter(Boolean);g(w=>({...w,tags:C}))},f=()=>{if(!p.title||!p.category){n({title:"Missing Information",description:"Please fill in title and category.",variant:"destructive"});return}const A={id:Date.now().toString(),title:p.title,category:p.category,content:p.content,type:p.type,url:p.url,tags:p.tags,lastUpdated:new Date().toISOString()};r(C=>[...C,A]),g({title:"",category:"",content:"",type:"article",url:"",tags:[]}),o(!1),n({title:"Resource Added",description:"Knowledge base resource has been added successfully."})},b=A=>{l(A),g({title:A.title,category:A.category,content:A.content,type:A.type,url:A.url||"",tags:A.tags}),o(!0)},j=()=>{if(!i)return;const A={...i,title:p.title,category:p.category,content:p.content,type:p.type,url:p.url,tags:p.tags,lastUpdated:new Date().toISOString()};r(C=>C.map(w=>w.id===i.id?A:w)),l(null),g({title:"",category:"",content:"",type:"article",url:"",tags:[]}),o(!1),n({title:"Resource Updated",description:"Knowledge base resource has been updated successfully."})},S=A=>{confirm("Are you sure you want to delete this resource?")&&(r(C=>C.filter(w=>w.id!==A)),n({title:"Resource Deleted",description:"Knowledge base resource has been deleted."}))},k=a.filter(A=>{const C=A.title.toLowerCase().includes(d.toLowerCase())||A.content.toLowerCase().includes(d.toLowerCase())||A.tags.some(P=>P.toLowerCase().includes(d.toLowerCase())),w=u==="all"||A.category===u;return C&&w}),T=A=>{switch(A){case"article":return e.jsx(xt,{className:"h-4 w-4"});case"guide":return e.jsx(_a,{className:"h-4 w-4"});case"faq":return e.jsx(_a,{className:"h-4 w-4"});case"link":return e.jsx(zn,{className:"h-4 w-4"});default:return e.jsx(xt,{className:"h-4 w-4"})}};return e.jsx(kt,{open:t,onOpenChange:s,children:e.jsxs(wt,{className:"max-w-4xl max-h-[80vh] overflow-hidden",children:[e.jsxs(St,{children:[e.jsxs(Ct,{className:"flex items-center gap-2",children:[e.jsx(_a,{className:"h-5 w-5"}),"Knowledge Base Management"]}),e.jsx(us,{children:"Manage your professional knowledge base and resource library"})]}),e.jsxs("div",{className:"flex flex-col h-full max-h-[60vh]",children:[e.jsxs("div",{className:"flex gap-4 mb-4",children:[e.jsx("div",{className:"flex-1",children:e.jsxs("div",{className:"relative",children:[e.jsx(Bs,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),e.jsx($,{placeholder:"Search resources...",value:d,onChange:A=>h(A.target.value),className:"pl-10"})]})}),e.jsxs(Re,{value:u,onValueChange:m,children:[e.jsx(Me,{className:"w-48",children:e.jsx(Oe,{placeholder:"Filter by category"})}),e.jsxs(_e,{children:[e.jsx(U,{value:"all",children:"All Categories"}),x.map(A=>e.jsx(U,{value:A,children:A},A))]})]}),e.jsxs(E,{onClick:()=>o(!0),children:[e.jsx(st,{className:"h-4 w-4 mr-2"}),"Add Resource"]})]}),c&&e.jsxs("div",{className:"bg-muted p-4 rounded-lg mb-4",children:[e.jsx("h3",{className:"text-lg font-medium mb-3",children:i?"Edit Resource":"Add New Resource"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(q,{htmlFor:"title",children:"Title"}),e.jsx($,{id:"title",value:p.title,onChange:A=>v("title",A.target.value),placeholder:"Resource title"})]}),e.jsxs("div",{children:[e.jsx(q,{htmlFor:"category",children:"Category"}),e.jsxs(Re,{value:p.category,onValueChange:A=>v("category",A),children:[e.jsx(Me,{children:e.jsx(Oe,{placeholder:"Select category"})}),e.jsx(_e,{children:x.map(A=>e.jsx(U,{value:A,children:A},A))})]})]}),e.jsxs("div",{children:[e.jsx(q,{htmlFor:"type",children:"Type"}),e.jsxs(Re,{value:p.type,onValueChange:A=>v("type",A),children:[e.jsx(Me,{children:e.jsx(Oe,{})}),e.jsxs(_e,{children:[e.jsx(U,{value:"article",children:"Article"}),e.jsx(U,{value:"guide",children:"Guide"}),e.jsx(U,{value:"faq",children:"FAQ"}),e.jsx(U,{value:"link",children:"External Link"})]})]})]}),e.jsxs("div",{children:[e.jsx(q,{htmlFor:"tags",children:"Tags (comma-separated)"}),e.jsx($,{id:"tags",value:p.tags.join(", "),onChange:A=>y(A.target.value),placeholder:"performance, tips, advanced"})]})]}),p.type==="link"&&e.jsxs("div",{className:"mt-4",children:[e.jsx(q,{htmlFor:"url",children:"URL"}),e.jsx($,{id:"url",value:p.url,onChange:A=>v("url",A.target.value),placeholder:"https://..."})]}),e.jsxs("div",{className:"mt-4",children:[e.jsx(q,{htmlFor:"content",children:"Content"}),e.jsx(mt,{id:"content",value:p.content,onChange:A=>v("content",A.target.value),placeholder:"Resource content or description...",rows:4})]}),e.jsxs("div",{className:"flex gap-2 mt-4",children:[e.jsxs(E,{onClick:i?j:f,children:[e.jsx(js,{className:"h-4 w-4 mr-2"}),i?"Update":"Add"," Resource"]}),e.jsxs(E,{variant:"outline",onClick:()=>{o(!1),l(null),g({title:"",category:"",content:"",type:"article",url:"",tags:[]})},children:[e.jsx(Xt,{className:"h-4 w-4 mr-2"}),"Cancel"]})]})]}),e.jsx("div",{className:"flex-1 overflow-y-auto",children:k.length===0?e.jsx("div",{className:"text-center py-8 text-muted-foreground",children:a.length===0?e.jsxs(e.Fragment,{children:[e.jsx(_a,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),e.jsx("h3",{className:"text-lg font-medium mb-2",children:"No Resources Yet"}),e.jsx("p",{children:"Start building your knowledge base by adding resources"})]}):e.jsxs(e.Fragment,{children:[e.jsx(Bs,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),e.jsx("h3",{className:"text-lg font-medium mb-2",children:"No Matching Resources"}),e.jsx("p",{children:"Try adjusting your search or filter criteria"})]})}):e.jsx("div",{className:"space-y-3",children:k.map(A=>e.jsx("div",{className:"border rounded-lg p-4",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[T(A.type),e.jsx("h4",{className:"font-medium",children:A.title}),e.jsx(X,{variant:"secondary",children:A.category})]}),e.jsxs("p",{className:"text-sm text-muted-foreground mb-2",children:[A.content.substring(0,150),"..."]}),e.jsx("div",{className:"flex items-center gap-2 mb-2",children:A.tags.map(C=>e.jsx(X,{variant:"outline",className:"text-xs",children:C},C))}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:["Last updated: ",new Date(A.lastUpdated).toLocaleDateString()]})]}),e.jsxs("div",{className:"flex gap-2 ml-4",children:[A.type==="link"&&A.url&&e.jsx(E,{size:"sm",variant:"outline",onClick:()=>window.open(A.url,"_blank"),children:e.jsx(zn,{className:"h-4 w-4"})}),e.jsx(E,{size:"sm",variant:"outline",onClick:()=>b(A),children:"Edit"}),e.jsx(E,{size:"sm",variant:"outline",onClick:()=>S(A.id),children:e.jsx(Vt,{className:"h-4 w-4"})})]})]})},A.id))})})]})]})})}function N9({isOpen:t,onClose:s,user:n}){const{toast:a}=nt(),[r,i]=N.useState(""),[l,c]=N.useState("all"),[o,d]=N.useState("all"),[h,u]=N.useState([]),{data:m,isLoading:p}=ke({queryKey:["/api/merchandise"],queryFn:async()=>await(await xe("/api/merchandise")).json(),enabled:t});ke({queryKey:["/api/artists"],queryFn:async()=>await(await xe("/api/artists")).json(),enabled:t});const g=[{id:1,name:"L-L Octave - Caribbean Waves T-Shirt",artist:"L-L Octave",category:"apparel",price:25,description:"Premium cotton tee featuring Caribbean-inspired artwork",image:"",stock:15,featured:!0},{id:2,name:"JCro - Afrobeats Vinyl Collection",artist:"JCro",category:"music",price:35,description:"Limited edition vinyl featuring latest Afrobeats hits",image:"",stock:8,featured:!0},{id:3,name:"Princess Trinidad - Dancehall Hoodie",artist:"Princess Trinidad",category:"apparel",price:45,description:"Comfortable hoodie with signature dancehall graphics",image:"",stock:12,featured:!1},{id:4,name:"Janet Azzouz - Pop Dreams Poster Set",artist:"Janet Azzouz",category:"accessories",price:15,description:"Set of 3 high-quality concert posters",image:"",stock:25,featured:!1},{id:5,name:"Wai'tuMusic - Studio Headphones",artist:"Wai'tuMusic",category:"accessories",price:120,description:"Professional-grade studio monitoring headphones",image:"",stock:5,featured:!0}],x=m!=null&&m.length?m:g,v=x.filter(A=>{const C=A.name.toLowerCase().includes(r.toLowerCase())||A.artist.toLowerCase().includes(r.toLowerCase()),w=l==="all"||A.category===l,P=o==="all"||A.artist===o;return C&&w&&P}),y=Array.from(new Set(x.map(A=>A.category))),f=Array.from(new Set(x.map(A=>A.artist))),b=A=>{const C=h.find(w=>w.id===A.id);u(C?h.map(w=>w.id===A.id?{...w,quantity:w.quantity+1}:w):[...h,{...A,quantity:1}]),a({title:"Added to Cart",description:`${A.name} added to your cart`})},j=A=>{u(h.filter(C=>C.id!==A))},S=(A,C)=>{if(C===0){j(A);return}u(h.map(w=>w.id===A?{...w,quantity:C}:w))},k=()=>h.reduce((A,C)=>A+C.price*C.quantity,0),T=()=>{if(h.length===0){a({title:"Cart Empty",description:"Add items to your cart before checking out",variant:"destructive"});return}a({title:"Checkout Initiated",description:`Processing ${h.length} items worth $${k().toFixed(2)}`}),u([])};return e.jsx(kt,{open:t,onOpenChange:s,children:e.jsxs(wt,{className:"max-w-6xl max-h-[90vh] overflow-hidden",children:[e.jsx(St,{children:e.jsxs(Ct,{className:"flex items-center gap-2",children:[e.jsx(Fs,{className:"h-5 w-5"}),"Wai'tuMusic Store"]})}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6 h-[70vh]",children:[e.jsxs("div",{className:"lg:col-span-3 space-y-4 overflow-y-auto",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 p-4 bg-muted/50 rounded-lg",children:[e.jsxs("div",{className:"relative",children:[e.jsx(Bs,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),e.jsx($,{placeholder:"Search merchandise...",value:r,onChange:A=>i(A.target.value),className:"pl-10"})]}),e.jsxs(Re,{value:l,onValueChange:c,children:[e.jsx(Me,{children:e.jsx(Oe,{placeholder:"Category"})}),e.jsxs(_e,{children:[e.jsx(U,{value:"all",children:"All Categories"}),y.map(A=>e.jsx(U,{value:A,children:A.charAt(0).toUpperCase()+A.slice(1)},A))]})]}),e.jsxs(Re,{value:o,onValueChange:d,children:[e.jsx(Me,{children:e.jsx(Oe,{placeholder:"Artist"})}),e.jsxs(_e,{children:[e.jsx(U,{value:"all",children:"All Artists"}),f.map(A=>e.jsx(U,{value:A,children:A},A))]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("h3",{className:"text-lg font-semibold flex items-center gap-2",children:[e.jsx(Rt,{className:"h-5 w-5 text-yellow-500"}),"Featured Items"]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:v.filter(A=>A.featured).map(A=>e.jsx(R,{className:"hover:shadow-lg transition-shadow",children:e.jsx(L,{className:"p-4",children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"text-4xl",children:A.image}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"font-semibold text-sm",children:A.name}),e.jsx("p",{className:"text-xs text-muted-foreground",children:A.artist}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:A.description}),e.jsxs("div",{className:"flex items-center justify-between mt-2",children:[e.jsxs("span",{className:"font-bold text-green-600",children:["$",A.price.toFixed(2)]}),e.jsxs(X,{variant:"outline",children:[A.stock," left"]})]})]}),e.jsx(E,{size:"sm",onClick:()=>b(A),disabled:A.stock===0,children:e.jsx(st,{className:"h-3 w-3"})})]})})},A.id))})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"All Merchandise"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:v.map(A=>e.jsx(R,{className:"hover:shadow-lg transition-shadow",children:e.jsx(L,{className:"p-4",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-3xl mb-2",children:A.image}),e.jsx("h4",{className:"font-semibold text-sm mb-1",children:A.name}),e.jsx("p",{className:"text-xs text-muted-foreground mb-1",children:A.artist}),e.jsx("p",{className:"text-xs text-muted-foreground mb-2",children:A.description}),e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("span",{className:"font-bold text-green-600",children:["$",A.price.toFixed(2)]}),e.jsxs(X,{variant:"outline",children:[A.stock," left"]})]}),e.jsx(E,{size:"sm",onClick:()=>b(A),disabled:A.stock===0,className:"w-full",children:"Add to Cart"})]})})},A.id))})]})]}),e.jsx("div",{className:"lg:col-span-1 border-l lg:border-l lg:pl-6",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("h3",{className:"text-lg font-semibold flex items-center gap-2",children:[e.jsx(Fs,{className:"h-5 w-5"}),"Shopping Cart (",h.length,")"]}),h.length===0?e.jsxs("div",{className:"text-center text-muted-foreground py-8",children:[e.jsx(Fs,{className:"h-12 w-12 mx-auto mb-2 opacity-50"}),e.jsx("p",{children:"Your cart is empty"})]}):e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"space-y-2 max-h-96 overflow-y-auto",children:h.map(A=>e.jsx(R,{children:e.jsx(L,{className:"p-3",children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx("div",{className:"text-lg",children:A.image}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h5",{className:"font-medium text-xs truncate",children:A.name}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:["$",A.price.toFixed(2)]}),e.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[e.jsx(E,{size:"sm",variant:"outline",onClick:()=>S(A.id,A.quantity-1),className:"h-6 w-6 p-0",children:e.jsx(lp,{className:"h-3 w-3"})}),e.jsx("span",{className:"text-xs",children:A.quantity}),e.jsx(E,{size:"sm",variant:"outline",onClick:()=>S(A.id,A.quantity+1),className:"h-6 w-6 p-0",children:e.jsx(st,{className:"h-3 w-3"})}),e.jsx(E,{size:"sm",variant:"destructive",onClick:()=>j(A.id),className:"h-6 w-6 p-0 ml-auto",children:e.jsx(Xt,{className:"h-3 w-3"})})]})]})]})})},A.id))}),e.jsxs("div",{className:"border-t pt-4",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("span",{className:"font-semibold",children:"Total:"}),e.jsxs("span",{className:"font-bold text-lg text-green-600",children:["$",k().toFixed(2)]})]}),e.jsx(E,{onClick:T,className:"w-full",children:"Checkout"})]})]})]})})]})]})})}var L0="Switch",[b9,zJ]=Yn(L0),[w9,S9]=b9(L0),zT=N.forwardRef((t,s)=>{const{__scopeSwitch:n,name:a,checked:r,defaultChecked:i,required:l,disabled:c,value:o="on",onCheckedChange:d,form:h,...u}=t,[m,p]=N.useState(null),g=Ht(s,b=>p(b)),x=N.useRef(!1),v=m?h||!!m.closest("form"):!0,[y=!1,f]=br({prop:r,defaultProp:i,onChange:d});return e.jsxs(w9,{scope:n,checked:y,disabled:c,children:[e.jsx(Dt.button,{type:"button",role:"switch","aria-checked":y,"aria-required":l,"data-state":WT(y),"data-disabled":c?"":void 0,disabled:c,value:o,...u,ref:g,onClick:tt(t.onClick,b=>{f(j=>!j),v&&(x.current=b.isPropagationStopped(),x.current||b.stopPropagation())})}),v&&e.jsx(C9,{control:m,bubbles:!x.current,name:a,value:o,checked:y,required:l,disabled:c,form:h,style:{transform:"translateX(-100%)"}})]})});zT.displayName=L0;var VT="SwitchThumb",GT=N.forwardRef((t,s)=>{const{__scopeSwitch:n,...a}=t,r=S9(VT,n);return e.jsx(Dt.span,{"data-state":WT(r.checked),"data-disabled":r.disabled?"":void 0,...a,ref:s})});GT.displayName=VT;var C9=t=>{const{control:s,checked:n,bubbles:a=!0,...r}=t,i=N.useRef(null),l=qp(n),c=fp(s);return N.useEffect(()=>{const o=i.current,d=window.HTMLInputElement.prototype,u=Object.getOwnPropertyDescriptor(d,"checked").set;if(l!==n&&u){const m=new Event("click",{bubbles:a});u.call(o,n),o.dispatchEvent(m)}},[l,n,a]),e.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:n,...r,tabIndex:-1,ref:i,style:{...t.style,...c,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})};function WT(t){return t?"checked":"unchecked"}var HT=zT,k9=GT;const gt=N.forwardRef(({className:t,...s},n)=>e.jsx(HT,{className:Je("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",t),...s,ref:n,children:e.jsx(k9,{className:Je("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})}));gt.displayName=HT.displayName;function A9({isOpen:t,onOpenChange:s,userId:n}){const{toast:a}=nt(),r=Tt(),[i,l]=N.useState({title:"",description:"",videoUrl:"",playlistId:"",isPublic:!0,duration:0}),{data:c=[]}=ke({queryKey:["videos",n],queryFn:()=>xe(`/api/videos?userId=${n}`),enabled:t}),o=Xe({mutationFn:g=>xe("/api/videos",{method:"POST",body:g}),onSuccess:()=>{a({title:"Success",description:"YouTube video added successfully! It will appear in your profile area."}),r.invalidateQueries({queryKey:["videos"]}),s(!1),h()},onError:g=>{a({title:"Error",description:g.message||"Failed to add video. Please check the YouTube URL."})}}),d=Xe({mutationFn:g=>xe(`/api/videos/${g}`,{method:"DELETE"}),onSuccess:()=>{a({title:"Success",description:"Video removed successfully"}),r.invalidateQueries({queryKey:["videos"]})}}),h=()=>{l({title:"",description:"",videoUrl:"",playlistId:"",isPublic:!0,duration:0})},u=g=>{if(g.preventDefault(),!i.title||!i.videoUrl){a({title:"Error",description:"Title and YouTube URL are required"});return}if(!/(?:https?:\/\/)?(?:www\.)?(?:youtube\.com|youtu\.be)\/.+/.test(i.videoUrl)){a({title:"Error",description:"Please enter a valid YouTube URL"});return}o.mutate(i)},m=g=>{const x=/^.*((youtu.be\/)|(v\/)|(\/u\/\w\/)|(embed\/)|(watch\?))\??v?=?([^#&?]*).*/,v=g.match(x);return v&&v[7].length===11?v[7]:null},p=g=>{const x=m(g);return x?`https://img.youtube.com/vi/${x}/mqdefault.jpg`:null};return e.jsx(kt,{open:t,onOpenChange:s,children:e.jsxs(wt,{className:"max-w-2xl",children:[e.jsx(St,{children:e.jsxs(Ct,{className:"flex items-center gap-2",children:[e.jsx(ca,{className:"w-5 h-5 text-red-600"}),"YouTube Video Integration"]})}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("form",{onSubmit:u,className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(q,{htmlFor:"title",children:"Video Title *"}),e.jsx($,{id:"title",value:i.title,onChange:g=>l(x=>({...x,title:g.target.value})),placeholder:"Enter video title",required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(q,{htmlFor:"videoUrl",children:"YouTube URL *"}),e.jsx($,{id:"videoUrl",value:i.videoUrl,onChange:g=>l(x=>({...x,videoUrl:g.target.value})),placeholder:"https://youtube.com/watch?v=...",required:!0})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(q,{htmlFor:"description",children:"Description"}),e.jsx(mt,{id:"description",value:i.description,onChange:g=>l(x=>({...x,description:g.target.value})),placeholder:"Video description (optional)",rows:3})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(q,{htmlFor:"playlistId",children:"Playlist ID (Optional)"}),e.jsx($,{id:"playlistId",value:i.playlistId,onChange:g=>l(x=>({...x,playlistId:g.target.value})),placeholder:"YouTube playlist ID"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:" Playlists are encouraged for better organization"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(q,{htmlFor:"duration",children:"Duration (seconds)"}),e.jsx($,{id:"duration",type:"number",value:i.duration,onChange:g=>l(x=>({...x,duration:parseInt(g.target.value)||0})),placeholder:"0"})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(gt,{id:"isPublic",checked:i.isPublic,onCheckedChange:g=>l(x=>({...x,isPublic:g}))}),e.jsx(q,{htmlFor:"isPublic",children:"Make video public on profile"})]}),e.jsxs("div",{className:"flex justify-end space-x-2",children:[e.jsx(E,{type:"button",variant:"outline",onClick:()=>s(!1),children:"Cancel"}),e.jsx(E,{type:"submit",disabled:o.isPending,className:"bg-red-600 hover:bg-red-700",children:o.isPending?"Adding...":e.jsxs(e.Fragment,{children:[e.jsx(Xs,{className:"w-4 h-4 mr-2"}),"Add Video"]})})]})]}),Array.isArray(c)&&c.length>0&&e.jsxs("div",{className:"border-t pt-4",children:[e.jsx("h4",{className:"font-medium mb-3",children:"Your YouTube Videos"}),e.jsx("div",{className:"space-y-3 max-h-60 overflow-y-auto",children:c.map(g=>e.jsxs("div",{className:"flex items-center space-x-3 p-3 border rounded-lg",children:[p(g.videoUrl)&&e.jsx("img",{src:p(g.videoUrl),alt:g.title,className:"w-16 h-12 object-cover rounded"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"font-medium text-sm truncate",children:g.title}),e.jsx("p",{className:"text-xs text-muted-foreground truncate",children:g.description||"No description"}),e.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[e.jsx("span",{className:`inline-block w-2 h-2 rounded-full ${g.isPublic?"bg-green-500":"bg-gray-400"}`}),e.jsx("span",{className:"text-xs text-muted-foreground",children:g.isPublic?"Public":"Private"})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(E,{size:"sm",variant:"outline",onClick:()=>window.open(g.videoUrl,"_blank"),children:e.jsx(zn,{className:"w-3 h-3"})}),e.jsx(E,{size:"sm",variant:"destructive",onClick:()=>d.mutate(g.id),disabled:d.isPending,children:"Remove"})]})]},g.id))})]}),e.jsx("div",{className:"bg-emerald-50 dark:bg-emerald-950 p-4 rounded-lg",children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx(Gn,{className:"w-5 h-5 text-emerald-600 mt-0.5"}),e.jsxs("div",{className:"text-sm",children:[e.jsx("p",{className:"font-medium text-emerald-700 dark:text-emerald-300",children:"YouTube Integration Benefits"}),e.jsxs("ul",{className:"text-emerald-600 dark:text-emerald-400 mt-1 space-y-1",children:[e.jsx("li",{children:" Videos appear in your profile area for fans to discover"}),e.jsx("li",{children:" Automatic embedding on your all-links page"}),e.jsx("li",{children:" Playlists encouraged for better content organization"}),e.jsx("li",{children:" Managed users get enhanced video features"})]})]})]})})]})]})})}const P9=pe.object({title:pe.string().min(1,"Album title is required"),description:pe.string().optional(),genre:pe.string().min(1,"Genre is required"),releaseDate:pe.string().min(1,"Release date is required"),albumPrice:pe.string().min(1,"Album price is required"),perSongPrice:pe.string().optional(),coverArt:pe.any().optional(),tracks:pe.array(pe.object({title:pe.string().min(1,"Track title is required"),trackNumber:pe.number(),isrcCode:pe.string().min(1,"ISRC code is required"),audioFile:pe.any().optional(),lyrics:pe.string().optional(),credits:pe.string().optional(),customPrice:pe.string().optional()})).min(1,"At least one track is required"),assignedMerchandise:pe.array(pe.number()).optional()});function T9({open:t,onOpenChange:s,onSuccess:n}){const{user:a,role:r}=_s(),{toast:i}=nt(),[l,c]=N.useState(!1),[o,d]=N.useState([]),h=Cn({resolver:kn(P9),defaultValues:{title:"",description:"",genre:"",releaseDate:"",albumPrice:"",perSongPrice:"",tracks:[{title:"",trackNumber:1,isrcCode:"",lyrics:"",credits:"",customPrice:""}],assignedMerchandise:[]}}),{fields:u,append:m,remove:p}=cl({control:h.control,name:"tracks"});N.useEffect(()=>{t&&a&&g()},[t,a]);const g=async()=>{try{const A=(await(await $n("/api/merchandise")).json()).filter(C=>C.artistUserId===(a==null?void 0:a.id)||r==="admin"||r==="superadmin");d(A)}catch(k){console.error("Failed to load merchandise:",k)}},x=()=>{m({title:"",trackNumber:u.length+1,isrcCode:"",lyrics:"",credits:"",customPrice:""})},v=k=>{u.length>1&&(p(k),u.forEach((T,A)=>{A>k&&h.setValue(`tracks.${A-1}.trackNumber`,A)}))},y=async k=>{if(!a)return;c(!0);let T=null,A=[];try{const C={title:k.title,description:k.description,genre:k.genre,releaseDate:k.releaseDate,albumPrice:parseFloat(k.albumPrice),perSongPrice:k.perSongPrice?parseFloat(k.perSongPrice):null,artistUserId:a.id,trackCount:k.tracks.length},P=await(await $n("/api/albums",{method:"POST",body:JSON.stringify(C)})).json();T=P.id;for(let M=0;M<k.tracks.length;M++){const I=k.tracks[M],W={albumId:P.id,artistUserId:a.id,title:I.title,trackNumber:I.trackNumber,isrcCode:I.isrcCode,lyrics:I.lyrics||null,credits:I.credits||null,price:I.customPrice?parseFloat(I.customPrice):k.perSongPrice?parseFloat(k.perSongPrice):parseFloat(k.albumPrice)/k.tracks.length,genre:k.genre,releaseDate:k.releaseDate},B=await(await $n("/api/songs",{method:"POST",body:JSON.stringify(W)})).json();A.push(B.id)}if(k.assignedMerchandise&&k.assignedMerchandise.length>0)for(const M of k.assignedMerchandise){await $n("/api/cross-upsell-relationships",{method:"POST",body:JSON.stringify({sourceType:"album",sourceId:P.id,targetType:"merchandise",targetId:M,relationshipType:"bundle",priority:1})});for(const I of A)await $n("/api/cross-upsell-relationships",{method:"POST",body:JSON.stringify({sourceType:"song",sourceId:I,targetType:"merchandise",targetId:M,relationshipType:"complement",priority:2})})}i({title:"Album Uploaded Successfully",description:`"${k.title}" with ${k.tracks.length} tracks has been uploaded.`}),h.reset(),s(!1),n==null||n()}catch(C){(T||A.length>0)&&(i({title:"Upload Failed - Cleaning Up",description:"Rolling back partial upload...",variant:"destructive"}),console.error("Album upload failed, manual cleanup may be required:",{albumId:T,songIds:A})),i({title:"Upload Failed",description:C.message||"Failed to upload album",variant:"destructive"})}finally{c(!1)}},f=parseFloat(h.watch("albumPrice")||"0"),b=h.watch("perSongPrice"),j=u.length,S=b?parseFloat(b):j>0?f/j:0;return e.jsx(kt,{open:t,onOpenChange:s,children:e.jsxs(wt,{className:"max-w-4xl max-h-[90vh] overflow-y-auto",children:[e.jsx(St,{children:e.jsx(Ct,{className:"text-2xl font-bold bg-gradient-to-r from-purple-600 to-pink-600 bg-clip-text text-transparent",children:"Upload Album"})}),e.jsx(On,{...h,children:e.jsxs("form",{onSubmit:h.handleSubmit(y),className:"space-y-6",children:[e.jsxs(R,{children:[e.jsx(Y,{children:e.jsxs(Q,{className:"flex items-center gap-2",children:[e.jsx(Ue,{className:"w-5 h-5"}),"Album Information"]})}),e.jsxs(L,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx($e,{control:h.control,name:"title",render:({field:k})=>e.jsxs(Fe,{children:[e.jsx(qe,{children:"Album Title"}),e.jsx(Le,{children:e.jsx($,{placeholder:"Enter album title",...k})}),e.jsx(ze,{})]})}),e.jsx($e,{control:h.control,name:"genre",render:({field:k})=>e.jsxs(Fe,{children:[e.jsx(qe,{children:"Genre"}),e.jsx(Le,{children:e.jsx($,{placeholder:"e.g., Pop, Rock, Hip-Hop",...k})}),e.jsx(ze,{})]})}),e.jsx($e,{control:h.control,name:"releaseDate",render:({field:k})=>e.jsxs(Fe,{children:[e.jsx(qe,{children:"Release Date"}),e.jsx(Le,{children:e.jsx($,{type:"date",...k})}),e.jsx(ze,{})]})}),e.jsx("div",{className:"space-y-2",children:e.jsx($e,{control:h.control,name:"albumPrice",render:({field:k})=>e.jsxs(Fe,{children:[e.jsx(qe,{children:"Album Price ($)"}),e.jsx(Le,{children:e.jsx($,{type:"number",step:"0.01",placeholder:"19.99",...k})}),e.jsx(ze,{})]})})})]}),e.jsx($e,{control:h.control,name:"description",render:({field:k})=>e.jsxs(Fe,{children:[e.jsx(qe,{children:"Description"}),e.jsx(Le,{children:e.jsx(mt,{placeholder:"Describe your album...",className:"min-h-[80px]",...k})}),e.jsx(ze,{})]})})]})]}),e.jsxs(R,{children:[e.jsx(Y,{children:e.jsxs(Q,{className:"flex items-center gap-2",children:[e.jsx(It,{className:"w-5 h-5"}),"Pricing Strategy"]})}),e.jsxs(L,{className:"space-y-4",children:[e.jsx($e,{control:h.control,name:"perSongPrice",render:({field:k})=>e.jsxs(Fe,{children:[e.jsx(qe,{children:"Per Song Price Override (Optional)"}),e.jsx(Le,{children:e.jsx($,{type:"number",step:"0.01",placeholder:"Leave empty to divide album price by track count",...k})}),e.jsxs("div",{className:"text-sm text-muted-foreground",children:["If set, each individual song will be priced at this amount regardless of album price. If empty, individual songs will be priced at $",S.toFixed(2)," each."]}),e.jsx(ze,{})]})}),e.jsxs("div",{className:"p-4 bg-muted rounded-lg",children:[e.jsx("h4",{className:"font-medium mb-2",children:"Pricing Summary"}),e.jsxs("div",{className:"space-y-1 text-sm",children:[e.jsxs("p",{children:["Album Price: $",f.toFixed(2)]}),e.jsxs("p",{children:["Tracks: ",j]}),e.jsxs("p",{children:["Individual Song Price: $",S.toFixed(2)]}),b&&e.jsxs("p",{className:"text-orange-600",children:[e.jsx(on,{className:"w-4 h-4 inline mr-1"}),"Using per-song price override"]})]})]})]})]}),e.jsxs(R,{children:[e.jsx(Y,{children:e.jsxs(Q,{className:"flex items-center gap-2",children:[e.jsx(Ue,{className:"w-5 h-5"}),"Track Listing"]})}),e.jsxs(L,{className:"space-y-4",children:[u.map((k,T)=>e.jsxs("div",{className:"border rounded-lg p-4 space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("h4",{className:"font-medium",children:["Track ",T+1]}),u.length>1&&e.jsx(E,{type:"button",variant:"outline",size:"sm",onClick:()=>v(T),children:e.jsx(Xt,{className:"w-4 h-4"})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx($e,{control:h.control,name:`tracks.${T}.title`,render:({field:A})=>e.jsxs(Fe,{children:[e.jsx(qe,{children:"Track Title"}),e.jsx(Le,{children:e.jsx($,{placeholder:"Enter track title",...A})}),e.jsx(ze,{})]})}),e.jsx($e,{control:h.control,name:`tracks.${T}.isrcCode`,render:({field:A})=>e.jsxs(Fe,{children:[e.jsx(qe,{children:"ISRC Code"}),e.jsx(Le,{children:e.jsx($,{placeholder:"US-XXX-XX-XXXXX",...A})}),e.jsx(ze,{})]})}),e.jsx($e,{control:h.control,name:`tracks.${T}.customPrice`,render:({field:A})=>e.jsxs(Fe,{children:[e.jsx(qe,{children:"Custom Price (Optional)"}),e.jsx(Le,{children:e.jsx($,{type:"number",step:"0.01",placeholder:"Override default pricing",...A})}),e.jsx(ze,{})]})}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Xs,{className:"w-4 h-4"}),e.jsx("span",{className:"text-sm text-muted-foreground",children:"Audio file upload coming soon"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx($e,{control:h.control,name:`tracks.${T}.lyrics`,render:({field:A})=>e.jsxs(Fe,{children:[e.jsx(qe,{children:"Lyrics (Optional)"}),e.jsx(Le,{children:e.jsx(mt,{placeholder:"Enter lyrics...",className:"min-h-[60px]",...A})}),e.jsx(ze,{})]})}),e.jsx($e,{control:h.control,name:`tracks.${T}.credits`,render:({field:A})=>e.jsxs(Fe,{children:[e.jsx(qe,{children:"Credits (Optional)"}),e.jsx(Le,{children:e.jsx(mt,{placeholder:"Producer, songwriter, etc...",className:"min-h-[60px]",...A})}),e.jsx(ze,{})]})})]})]},k.id)),e.jsxs(E,{type:"button",onClick:x,variant:"outline",className:"w-full",children:[e.jsx(st,{className:"w-4 h-4 mr-2"}),"Add Track"]})]})]}),o.length>0&&e.jsxs(R,{children:[e.jsx(Y,{children:e.jsxs(Q,{className:"flex items-center gap-2",children:[e.jsx(dp,{className:"w-5 h-5"}),"Merchandise Assignment"]})}),e.jsx(L,{children:e.jsx($e,{control:h.control,name:"assignedMerchandise",render:({field:k})=>e.jsxs(Fe,{children:[e.jsx(qe,{children:"Select merchandise to bundle with this album"}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-2 mt-2",children:o.map(T=>{var A;return e.jsxs("label",{className:"flex items-center space-x-2 p-2 border rounded-lg cursor-pointer hover:bg-muted",children:[e.jsx("input",{type:"checkbox",checked:((A=k.value)==null?void 0:A.includes(T.id))||!1,onChange:C=>{const w=C.target.checked?[...k.value||[],T.id]:(k.value||[]).filter(P=>P!==T.id);k.onChange(w)}}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-sm",children:T.name}),e.jsxs("div",{className:"text-xs text-muted-foreground",children:["$",T.price]})]})]},T.id)})}),e.jsx(ze,{})]})})})]}),e.jsxs("div",{className:"flex justify-end gap-4",children:[e.jsx(E,{type:"button",variant:"outline",onClick:()=>s(!1),disabled:l,children:"Cancel"}),e.jsx(E,{type:"submit",disabled:l,children:l?"Uploading...":"Upload Album"})]})]})})]})})}function E9({onSuccess:t,variant:s="default",size:n="default",className:a}){const[r,i]=N.useState(!1);return e.jsxs(e.Fragment,{children:[e.jsxs(E,{onClick:()=>i(!0),variant:s,size:n,className:a,children:[e.jsx(Ue,{className:"w-4 h-4 mr-2"}),"Upload Album"]}),e.jsx(T9,{open:r,onOpenChange:i,onSuccess:()=>{i(!1),t==null||t()}})]})}function KT({children:t,artistId:s,artistName:n}){var be,Ie,ve;const{toast:a}=nt(),r=Tt(),[i,l]=N.useState("create"),[c,o]=N.useState("content"),[d,h]=N.useState(!1),[u,m]=N.useState(null),[p,g]=N.useState({checking:!1,available:null,message:""}),[x,v]=N.useState({slug:"",isActive:!0,accessLevel:"public",socialLinks:[],musicLinks:[],bookingLinks:[],storeLinks:[],customLinks:[]}),{user:y,role:f}=_s(),b=(y==null?void 0:y.roleId)||9,j=[1,2].includes(b),S=j,k=[3,4,5,6,7,8].includes(b),{data:T,isLoading:A,error:C}=ke({queryKey:s?["/api/website-integrations","artist",s]:["/api/website-integrations"],queryFn:async()=>{try{let ie;return s&&j?ie=`/api/website-integrations/user/${s}`:ie="/api/website-integrations",await $n(ie)}catch(ie){throw console.error("Error fetching website integrations:",ie),ie}},enabled:d&&!!y,staleTime:0,cacheTime:0}),w=T&&T.length>0,P=k||j,[M,I]=N.useState(!1),[W,_]=N.useState(null),[B,O]=N.useState(!1),z=S||!w;N.useEffect(()=>{if(A)return;T&&T.length>0&&i==="create"&&d&&(j&&s||!s||Number(s)===(y==null?void 0:y.id))&&l("manage")},[T,A,j,i,s,d,y==null?void 0:y.id]),N.useEffect(()=>{d&&y&&!P&&F()},[d,y,P]);const F=async()=>{try{O(!0);const ie=await fetch("/api/all-links-subscription/status",{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});if(ie.ok){const de=await ie.json();_(de)}}catch(ie){console.error("Error fetching subscription status:",ie)}finally{O(!1)}},K=async ie=>{try{O(!0);const de=await $n("/api/all-links-subscription",{method:"POST",body:{tierLevel:ie}});if(de.ok){const ee=await de.json();_({hasSubscription:!0,subscription:ee.subscription,isActive:!0,tierLevel:ee.subscription.tierLevel}),I(!1),a({title:"Subscription Created",description:`You now have access to Tier ${ie} All-Links features!`})}}catch(de){console.error("Error creating subscription:",de),a({title:"Subscription Error",description:"Failed to create subscription. Please try again.",variant:"destructive"})}finally{O(!1)}},D=Xe({mutationFn:ie=>$n("/api/website-integrations",{method:"POST",body:ie}),onSuccess:()=>{r.invalidateQueries({queryKey:["/api/website-integrations"]}),s&&r.invalidateQueries({queryKey:["/api/website-integrations","artist",s]}),a({title:"All-links page created successfully"}),v({slug:"",isActive:!0,accessLevel:"public",socialLinks:[],musicLinks:[],bookingLinks:[],storeLinks:[],customLinks:[]}),l("existing")},onError:ie=>{a({title:"Failed to create all-links page",description:ie.message,variant:"destructive"})}});Xe({mutationFn:({id:ie,data:de})=>$n(`/api/website-integrations/${ie}`,{method:"PUT",body:de}),onSuccess:()=>{r.invalidateQueries({queryKey:["/api/website-integrations"]}),s&&r.invalidateQueries({queryKey:["/api/website-integrations","artist",s]}),a({title:"Page updated successfully"})},onError:ie=>{a({title:"Failed to update page",description:ie.message,variant:"destructive"})}});const G=Xe({mutationFn:ie=>$n(`/api/website-integrations/${ie}`,{method:"DELETE"}),onSuccess:()=>{r.invalidateQueries({queryKey:["/api/website-integrations"]}),s&&r.invalidateQueries({queryKey:["/api/website-integrations","artist",s]}),a({title:"Page deleted successfully"}),m(null)},onError:ie=>{a({title:"Failed to delete page",description:ie.message,variant:"destructive"})}}),[H,V]=N.useState(null),[se,Z]=N.useState(null);N.useState({});const[le,ne]=N.useState({transparent:!1,color:"#000000",backgroundColor:"#FFFFFF",includeProfilePicture:!1,profilePictureUrl:"",customImageUrl:""}),ue=Xe({mutationFn:async({integrationId:ie,options:de})=>{const ee=new URLSearchParams;return de!=null&&de.transparent&&ee.append("transparent","true"),de!=null&&de.color&&ee.append("color",de.color),de!=null&&de.backgroundColor&&ee.append("backgroundColor",de.backgroundColor),de!=null&&de.includeProfilePicture&&(de!=null&&de.profilePictureUrl)&&(ee.append("includeProfilePicture","true"),ee.append("profilePictureUrl",de.profilePictureUrl)),de!=null&&de.customImageUrl&&ee.append("customImageUrl",de.customImageUrl),$n(`/api/website-integrations/${ie}/qr-code?${ee.toString()}`,{method:"GET"})},onSuccess:ie=>{V(ie),a({title:"QR code generated successfully"})},onError:ie=>{a({title:"Failed to generate QR code",description:ie.message,variant:"destructive"})}}),te=()=>{if(!(H!=null&&H.qrCode))return;const ie=document.createElement("a");ie.href=H.qrCode,ie.download=`${H.slug}-qr-code.png`,ie.click(),a({title:"QR code downloaded successfully"})};N.useEffect(()=>{if(x.slug&&x.slug.length>2){const ie=setTimeout(async()=>{g({checking:!0,available:null,message:"Checking availability..."});try{await $n(`/api/website-integrations/check-slug/${x.slug}`),g({checking:!1,available:!0,message:"Slug available!"})}catch(de){g({checking:!1,available:!1,message:de.message})}},500);return()=>clearTimeout(ie)}else g({checking:!1,available:null,message:""})},[x.slug]);const Ae=async()=>{if(!s||!x.slug){a({title:"Please fill in required fields",variant:"destructive"});return}D.mutate({...x,userId:s,slug:x.slug})},Ge=(ie,de)=>{confirm(`Are you sure you want to delete the page "/${de}"? This action cannot be undone.`)&&G.mutate(ie)};return e.jsxs(e.Fragment,{children:[e.jsxs(kt,{open:d,onOpenChange:h,children:[e.jsx(ma,{asChild:!0,children:P?t:e.jsxs("div",{className:"relative group",onClick:()=>I(!0),children:[t,e.jsx("div",{className:"absolute inset-0 bg-gray-500/50 rounded cursor-pointer flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity duration-200",children:e.jsx("span",{className:"text-white font-medium text-sm bg-black/70 px-3 py-1 rounded",children:"Premium Feature"})})]})}),e.jsxs(wt,{className:"max-w-4xl max-h-[90vh] overflow-y-auto",children:[e.jsxs(St,{children:[e.jsxs(Ct,{className:"flex items-center space-x-2",children:[e.jsx(vu,{className:"h-5 w-5 text-blue-500"}),e.jsx("span",{children:"All-Links Pages"})]}),e.jsx(us,{children:"Create beautiful landing pages that showcase all your important links in one place"})]}),e.jsxs(Ut,{value:"manage",className:"w-full",children:[e.jsx(jt,{className:"grid w-full grid-cols-1",children:e.jsxs(Ne,{value:"manage",className:"flex items-center space-x-2",children:[e.jsx(is,{className:"h-4 w-4"}),e.jsx("span",{children:"Manage All-Link Page"})]})}),e.jsx(ge,{value:"manage",className:"space-y-6",children:T&&T.length>0?e.jsxs(R,{children:[e.jsxs(Y,{children:[e.jsxs(Q,{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(is,{className:"h-5 w-5 text-blue-500"}),e.jsx("span",{children:"Your All-Links Page"})]}),e.jsx(E,{variant:"outline",size:"sm",onClick:()=>{r.invalidateQueries({queryKey:["/api/website-integrations"]}),s&&r.invalidateQueries({queryKey:["/api/website-integrations","artist",s]})},children:"Refresh"})]}),e.jsx(rt,{children:"Manage your all-links page, get embed codes, and download QR codes."})]}),e.jsx(L,{children:e.jsx("div",{className:"space-y-4",children:T.map(ie=>e.jsxs("div",{className:"border rounded-lg p-4 space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(vu,{className:"h-5 w-5 text-blue-500"}),e.jsxs("div",{children:[e.jsxs("h4",{className:"font-medium",children:["/",ie.slug]}),e.jsxs("p",{className:"text-sm text-gray-500",children:["waitumusic.com/",ie.slug]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(X,{variant:ie.isActive?"default":"secondary",children:ie.isActive?"Active":"Inactive"}),e.jsx(X,{variant:"outline",children:ie.accessLevel||"Public"})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(E,{variant:"outline",size:"sm",onClick:()=>{navigator.clipboard.writeText(`https://waitumusic.com/${ie.slug}`),a({title:"Link copied to clipboard"})},children:e.jsx(co,{className:"h-4 w-4"})}),e.jsx(E,{variant:"outline",size:"sm",onClick:()=>window.open(`https://waitumusic.com/${ie.slug}`,"_blank"),children:e.jsx(zn,{className:"h-4 w-4"})}),e.jsx(E,{variant:"outline",size:"sm",onClick:()=>m(ie),children:e.jsx($s,{className:"h-4 w-4"})}),e.jsx(E,{variant:"outline",size:"sm",onClick:()=>Ge(ie.id,ie.slug),className:"text-red-600 hover:text-red-700",children:e.jsx(Vt,{className:"h-4 w-4"})})]})]}),e.jsxs("div",{className:"flex items-center space-x-4 pt-3 border-t",children:[e.jsxs(E,{variant:"outline",size:"sm",onClick:()=>{m(ie),o("qr")},disabled:ue.isPending,children:[e.jsx(lh,{className:"h-4 w-4 mr-2"}),"Manage QR Code"]}),e.jsxs(E,{variant:"outline",size:"sm",onClick:()=>{const de=`<iframe src="https://waitumusic.com/${ie.slug}" width="100%" height="600" frameborder="0"></iframe>`;navigator.clipboard.writeText(de),a({title:"Embed code copied to clipboard"})},children:[e.jsx(rh,{className:"h-4 w-4 mr-2"}),"Copy Embed Code"]})]})]},ie.id))})})]}):e.jsxs(R,{children:[e.jsxs(Y,{children:[e.jsxs(Q,{className:"flex items-center space-x-2",children:[e.jsx(vu,{className:"h-5 w-5 text-blue-500"}),e.jsx("span",{children:"Create Your All-Links Page"})]}),e.jsx(rt,{children:"Design your professional all-links page with custom themes, social media integration, and embeddable widgets."})]}),e.jsxs(L,{className:"space-y-6",children:[k&&w&&e.jsx("div",{className:"p-4 bg-yellow-50 border border-yellow-200 rounded-lg",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Fa,{className:"h-5 w-5 text-yellow-600"}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-yellow-800",children:"One Page Limit"}),e.jsxs("p",{className:"text-sm text-yellow-700",children:["As a fully managed user (Role ID: ",b,"), you can only have one All-Links page. Please use the existing page or delete it to create a new one."]})]})]})}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Basic Settings"}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(q,{htmlFor:"slug",children:"Page Slug"}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:"text-sm text-gray-500",children:"www.waitumusic.com/"}),e.jsx($,{id:"slug",placeholder:"your-name",value:x.slug||"",onChange:ie=>v(de=>({...de,slug:ie.target.value.toLowerCase().replace(/[^a-z0-9-]/g,"")})),className:"flex-1"}),p.checking&&e.jsx("div",{className:"text-yellow-600 text-sm",children:"Checking..."}),p.available===!0&&e.jsx(ct,{className:"h-4 w-4 text-green-600"}),p.available===!1&&e.jsx(Fa,{className:"h-4 w-4 text-red-600"})]}),e.jsx("div",{className:"text-sm",children:p.message&&e.jsx("span",{className:p.available===!0?"text-green-600":p.available===!1?"text-red-600":"text-gray-500",children:p.message})})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(gt,{checked:!!x.isActive,onCheckedChange:ie=>v(de=>({...de,isActive:ie}))}),e.jsx(q,{children:"Active"})]})]})]}),e.jsx(ss,{}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("h3",{className:"text-lg font-semibold flex items-center space-x-2",children:[e.jsx($b,{className:"h-5 w-5 text-pink-500"}),e.jsx("span",{children:"Social Media Links"})]}),e.jsxs("div",{className:"space-y-3",children:[(Array.isArray(x.socialLinks)?x.socialLinks:[]).map((ie,de)=>e.jsxs("div",{className:"flex items-center space-x-2 p-3 border rounded-lg",children:[e.jsxs(Re,{value:ie.platform,onValueChange:ee=>{const Se=[...Array.isArray(x.socialLinks)?x.socialLinks:[]];Se[de]={...ie,platform:ee},v(We=>({...We,socialLinks:Se}))},children:[e.jsx(Me,{className:"w-32",children:e.jsx(Oe,{placeholder:"Platform"})}),e.jsxs(_e,{children:[e.jsx(U,{value:"instagram",children:"Instagram"}),e.jsx(U,{value:"youtube",children:"YouTube"}),e.jsx(U,{value:"spotify",children:"Spotify"}),e.jsx(U,{value:"tiktok",children:"TikTok"}),e.jsx(U,{value:"twitter",children:"Twitter"}),e.jsx(U,{value:"facebook",children:"Facebook"}),e.jsx(U,{value:"website",children:"Website"})]})]}),e.jsx($,{placeholder:"URL",value:ie.url,onChange:ee=>{const Se=[...Array.isArray(x.socialLinks)?x.socialLinks:[]];Se[de]={...ie,url:ee.target.value},v(We=>({...We,socialLinks:Se}))},className:"flex-1"}),e.jsx(E,{variant:"outline",size:"sm",onClick:()=>{const ae=(Array.isArray(x.socialLinks)?x.socialLinks:[]).filter((Se,We)=>We!==de);v(Se=>({...Se,socialLinks:ae}))},children:e.jsx(Vt,{className:"h-4 w-4"})})]},de)),e.jsxs(E,{variant:"outline",onClick:()=>{const ie={platform:"",url:"",title:""},de=Array.isArray(x.socialLinks)?x.socialLinks:[];v(ee=>({...ee,socialLinks:[...de,ie]}))},className:"w-full",children:[e.jsx(st,{className:"h-4 w-4 mr-2"}),"Add Social Link"]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("h3",{className:"text-lg font-semibold flex items-center space-x-2",children:[e.jsx(Ue,{className:"h-5 w-5 text-green-500"}),e.jsx("span",{children:"Music & Streaming"})]}),e.jsxs("div",{className:"space-y-3",children:[(Array.isArray(x.musicLinks)?x.musicLinks:[]).map((ie,de)=>e.jsxs("div",{className:"flex items-center space-x-2 p-3 border rounded-lg",children:[e.jsxs(Re,{value:ie.platform,onValueChange:ee=>{const Se=[...Array.isArray(x.musicLinks)?x.musicLinks:[]];Se[de]={...ie,platform:ee},v(We=>({...We,musicLinks:Se}))},children:[e.jsx(Me,{className:"w-32",children:e.jsx(Oe,{placeholder:"Platform"})}),e.jsxs(_e,{children:[e.jsx(U,{value:"spotify",children:"Spotify"}),e.jsx(U,{value:"apple",children:"Apple Music"}),e.jsx(U,{value:"youtube",children:"YouTube Music"}),e.jsx(U,{value:"soundcloud",children:"SoundCloud"}),e.jsx(U,{value:"bandcamp",children:"Bandcamp"}),e.jsx(U,{value:"deezer",children:"Deezer"})]})]}),e.jsx($,{placeholder:"Song/Album URL",value:ie.url,onChange:ee=>{const Se=[...Array.isArray(x.musicLinks)?x.musicLinks:[]];Se[de]={...ie,url:ee.target.value},v(We=>({...We,musicLinks:Se}))},className:"flex-1"}),e.jsx(E,{variant:"outline",size:"sm",onClick:()=>{const ae=(Array.isArray(x.musicLinks)?x.musicLinks:[]).filter((Se,We)=>We!==de);v(Se=>({...Se,musicLinks:ae}))},children:e.jsx(Vt,{className:"h-4 w-4"})})]},de)),e.jsxs(E,{variant:"outline",onClick:()=>{const ie={platform:"",url:"",title:""},de=Array.isArray(x.musicLinks)?x.musicLinks:[];v(ee=>({...ee,musicLinks:[...de,ie]}))},className:"w-full",children:[e.jsx(st,{className:"h-4 w-4 mr-2"}),"Add Music Link"]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("h3",{className:"text-lg font-semibold flex items-center space-x-2",children:[e.jsx(zn,{className:"h-5 w-5 text-blue-500"}),e.jsx("span",{children:"Custom Links"})]}),e.jsxs("div",{className:"space-y-3",children:[(Array.isArray(x.customLinks)?x.customLinks:[]).map((ie,de)=>e.jsxs("div",{className:"space-y-2 p-3 border rounded-lg",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx($,{placeholder:"Link Title",value:ie.title,onChange:ee=>{const Se=[...Array.isArray(x.customLinks)?x.customLinks:[]];Se[de]={...ie,title:ee.target.value},v(We=>({...We,customLinks:Se}))},className:"flex-1"}),e.jsx(E,{variant:"outline",size:"sm",onClick:()=>{const ae=(Array.isArray(x.customLinks)?x.customLinks:[]).filter((Se,We)=>We!==de);v(Se=>({...Se,customLinks:ae}))},children:e.jsx(Vt,{className:"h-4 w-4"})})]}),e.jsx($,{placeholder:"URL",value:ie.url,onChange:ee=>{const Se=[...Array.isArray(x.customLinks)?x.customLinks:[]];Se[de]={...ie,url:ee.target.value},v(We=>({...We,customLinks:Se}))}}),e.jsx(mt,{placeholder:"Description (optional)",value:ie.description||"",onChange:ee=>{const Se=[...Array.isArray(x.customLinks)?x.customLinks:[]];Se[de]={...ie,description:ee.target.value},v(We=>({...We,customLinks:Se}))},rows:2})]},de)),e.jsxs(E,{variant:"outline",onClick:()=>{const ie={title:"",url:"",description:""},de=Array.isArray(x.customLinks)?x.customLinks:[];v(ee=>({...ee,customLinks:[...de,ie]}))},className:"w-full",children:[e.jsx(st,{className:"h-4 w-4 mr-2"}),"Add Custom Link"]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("h3",{className:"text-lg font-semibold flex items-center space-x-2",children:[e.jsx(rh,{className:"h-5 w-5 text-purple-500"}),e.jsx("span",{children:"Embeddable Widgets"})]}),e.jsxs("p",{className:"text-sm text-gray-600",children:["Configure widgets that you can embed on your personal website.",e.jsx("strong",{children:" If widgets are embedded, QR codes will redirect to your personal website instead of the WaituMusic page."})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[{key:"musicPlayer",label:"Music Player Widget",icon:Ue,color:"text-green-500",description:"Latest releases and music catalog"},{key:"bookingWidget",label:"Performance Booking",icon:lh,color:"text-blue-500",description:"Live performance bookings"},{key:"consultationWidget",label:"Consultation Booking",icon:Gt,color:"text-teal-500",description:"Professional consultation sessions"},{key:"socialFeed",label:"Social Media Feed",icon:$b,color:"text-pink-500",description:"Aggregated social content"},{key:"tourDates",label:"Tour Dates Widget",icon:zn,color:"text-orange-500",description:"Upcoming events and shows"},{key:"merchandise",label:"Merch Showcase",icon:is,color:"text-purple-500",description:"Featured merchandise store"},{key:"serviceListing",label:"Professional Services",icon:rh,color:"text-indigo-500",description:"Music production, mixing, etc."},{key:"testimonials",label:"Client Testimonials",icon:ct,color:"text-emerald-500",description:"Reviews and testimonials"}].map(ie=>{var de,ee,ae;return e.jsxs("div",{className:"p-3 border rounded-lg space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ie.icon,{className:`h-4 w-4 ${ie.color}`}),e.jsx("span",{className:"font-medium text-sm",children:ie.label})]}),e.jsx("p",{className:"text-xs text-gray-500",children:ie.description})]}),e.jsx(gt,{checked:((de=x.enabledWidgets)==null?void 0:de.includes(ie.key))||!1,onCheckedChange:Se=>{if(y!=null&&y.roleId&&[1,2,3,5,7].includes(y.roleId)){const We=x.enabledWidgets||[];v(Se?re=>({...re,enabledWidgets:[...We,ie.key]}):re=>({...re,enabledWidgets:We.filter(je=>je!==ie.key)}))}else a({title:"Pro Feature",description:"Embeddable widgets are available for fully managed talent and Pro subscription users."})}})]}),((ee=x.enabledWidgets)==null?void 0:ee.includes(ie.key))&&e.jsx($,{placeholder:"Your website URL where this will be embedded",value:((ae=x.widgetUrls)==null?void 0:ae[ie.key])||"",onChange:Se=>{v(We=>({...We,widgetUrls:{...We.widgetUrls||{},[ie.key]:Se.target.value}}))},className:"text-xs"})]},ie.key)})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("h3",{className:"text-lg font-semibold flex items-center space-x-2",children:[e.jsx(Gt,{className:"h-5 w-5 text-gray-500"}),e.jsx("span",{children:"Page Appearance"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"Theme Color"}),e.jsxs(Re,{value:((be=x.customTheme)==null?void 0:be.primaryColor)||"blue",onValueChange:ie=>{v(de=>({...de,customTheme:{...de.customTheme||{},primaryColor:ie}}))},children:[e.jsx(Me,{children:e.jsx(Oe,{placeholder:"Select theme color"})}),e.jsxs(_e,{children:[e.jsx(U,{value:"blue",children:"Blue"}),e.jsx(U,{value:"purple",children:"Purple"}),e.jsx(U,{value:"pink",children:"Pink"}),e.jsx(U,{value:"green",children:"Green"}),e.jsx(U,{value:"orange",children:"Orange"}),e.jsx(U,{value:"red",children:"Red"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"Layout Style"}),e.jsxs(Re,{value:((Ie=x.customTheme)==null?void 0:Ie.layout)||"grid",onValueChange:ie=>{v(de=>({...de,customTheme:{...de.customTheme||{},layout:ie}}))},children:[e.jsx(Me,{children:e.jsx(Oe,{placeholder:"Select layout"})}),e.jsxs(_e,{children:[e.jsx(U,{value:"grid",children:"Grid Layout"}),e.jsx(U,{value:"list",children:"List Layout"}),e.jsx(U,{value:"cards",children:"Card Layout"})]})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"Background Style"}),e.jsxs(Re,{value:((ve=x.customTheme)==null?void 0:ve.background)||"gradient",onValueChange:ie=>{v(de=>({...de,customTheme:{...de.customTheme||{},background:ie}}))},children:[e.jsx(Me,{children:e.jsx(Oe,{placeholder:"Select background"})}),e.jsxs(_e,{children:[e.jsx(U,{value:"gradient",children:"Gradient"}),e.jsx(U,{value:"solid",children:"Solid Color"}),e.jsx(U,{value:"pattern",children:"Pattern"}),e.jsx(U,{value:"image",children:"Custom Image"})]})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("h3",{className:"text-lg font-semibold flex items-center space-x-2",children:[e.jsx(Gt,{className:"h-5 w-5 text-red-500"}),e.jsx("span",{children:"Privacy & Access"})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("label",{className:"font-medium",children:"Access Level"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Control who can access your page"})]}),e.jsxs(Re,{value:x.accessLevel||"public",onValueChange:ie=>{v(de=>({...de,accessLevel:ie}))},children:[e.jsx(Me,{className:"w-32",children:e.jsx(Oe,{})}),e.jsxs(_e,{children:[e.jsx(U,{value:"public",children:"Public"}),e.jsx(U,{value:"unlisted",children:"Unlisted"}),e.jsx(U,{value:"private",children:"Private"})]})]})]}),x.accessLevel==="private"&&e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"Access Password"}),e.jsx($,{type:"password",placeholder:"Password protection coming soon",value:"",onChange:()=>{},disabled:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"SEO Meta Description"}),e.jsx(mt,{placeholder:"Enter a description for search engines and social media...",value:x.description||"",onChange:ie=>{v(de=>({...de,description:ie.target.value}))},rows:3})]})]})]})]}),e.jsx(ss,{}),e.jsx(E,{onClick:Ae,disabled:D.isPending||p.available===!1||!z,className:"w-full",children:D.isPending?"Creating...":z?"Create All-Links Page":"Cannot Create - Limit Reached"})]})]})})]})]})]}),e.jsx(kt,{open:M,onOpenChange:I,children:e.jsxs(wt,{className:"max-w-4xl max-h-[90vh] overflow-y-auto",children:[e.jsxs(St,{children:[e.jsxs(Ct,{className:"flex items-center space-x-2",children:[e.jsx(is,{className:"h-5 w-5 text-purple-600"}),e.jsx("span",{children:"All-Links Subscription Plans"})]}),e.jsx(us,{children:"Choose the perfect plan for your digital presence needs"})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs(R,{className:"border-blue-200 hover:border-blue-300 transition-colors",children:[e.jsxs(Y,{children:[e.jsxs(Q,{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-blue-600",children:"Basic"}),e.jsx(X,{variant:"outline",className:"text-blue-600 border-blue-600",children:"$4.99/month"})]}),e.jsx(rt,{children:"Perfect for getting started"})]}),e.jsxs(L,{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ct,{className:"h-4 w-4 text-green-500"}),e.jsx("span",{className:"text-sm",children:"All social media platforms"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ct,{className:"h-4 w-4 text-green-500"}),e.jsx("span",{className:"text-sm",children:"Single website integration"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ct,{className:"h-4 w-4 text-green-500"}),e.jsx("span",{className:"text-sm",children:"Basic QR code generation"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ct,{className:"h-4 w-4 text-green-500"}),e.jsx("span",{className:"text-sm",children:"Simple analytics"})]})]}),e.jsx(E,{className:"w-full",onClick:()=>K(1),disabled:B,children:B?"Processing...":"Choose Basic"})]})]}),e.jsxs(R,{className:"border-purple-200 hover:border-purple-300 transition-colors relative",children:[e.jsx("div",{className:"absolute -top-3 left-1/2 transform -translate-x-1/2",children:e.jsx(X,{className:"bg-purple-600 text-white",children:"Most Popular"})}),e.jsxs(Y,{children:[e.jsxs(Q,{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-purple-600",children:"Pro"}),e.jsx(X,{variant:"outline",className:"text-purple-600 border-purple-600",children:"$9.99/month"})]}),e.jsx(rt,{children:"Complete all-links solution"})]}),e.jsxs(L,{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ct,{className:"h-4 w-4 text-green-500"}),e.jsx("span",{className:"text-sm",children:"All social media platforms"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ct,{className:"h-4 w-4 text-green-500"}),e.jsx("span",{className:"text-sm",children:"Streaming platform links"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ct,{className:"h-4 w-4 text-green-500"}),e.jsx("span",{className:"text-sm",children:"Multiple website integrations"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ct,{className:"h-4 w-4 text-green-500"}),e.jsx("span",{className:"text-sm",children:"Advanced QR customization"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ct,{className:"h-4 w-4 text-green-500"}),e.jsx("span",{className:"text-sm",children:"Detailed analytics"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ct,{className:"h-4 w-4 text-green-500"}),e.jsx("span",{className:"text-sm",children:"Malware protection & monitoring"})]})]}),e.jsx(E,{className:"w-full bg-purple-600 hover:bg-purple-700",onClick:()=>K(2),disabled:B,children:B?"Processing...":"Choose Pro"})]})]})]}),e.jsxs(R,{className:"border-orange-200 bg-orange-50",children:[e.jsx(Y,{children:e.jsxs(Q,{className:"text-orange-800 flex items-center space-x-2",children:[e.jsx(Gt,{className:"h-5 w-5"}),e.jsx("span",{children:"Important Terms & Conditions"})]})}),e.jsx(L,{className:"space-y-3 text-sm text-orange-800",children:e.jsxs("div",{className:"space-y-2",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Malware Protection:"})," We actively monitor all linked websites for malware, phishing, and malicious content."]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Penalty System:"})," If a linked website is found on our blocklist or provides malware, you will be charged an additional ",e.jsx("strong",{children:"$9.99/month penalty"})," for each month the link remains active."]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Payment Information:"})," Valid payment information (card or PayPal) must be on file before proceeding."]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Link Monitoring:"})," Remove flagged links immediately to avoid ongoing penalties."]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Service Continuity:"})," Subscriptions auto-renew monthly. Cancel anytime from your dashboard."]})]})})]})]})]})}),u&&e.jsx(kt,{open:!!u,onOpenChange:()=>m(null),children:e.jsxs(wt,{className:"max-w-4xl max-h-[90vh] overflow-y-auto",children:[e.jsxs(St,{children:[e.jsxs(Ct,{className:"flex items-center space-x-2",children:[e.jsx($s,{className:"h-5 w-5"}),e.jsxs("span",{children:["Manage All-Links Page: /",u.slug]})]}),e.jsx(us,{children:"Edit content, get embed codes, customize QR codes, and view analytics for your page."})]}),e.jsxs(Ut,{value:c,onValueChange:ie=>o(ie),className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center space-x-1 border-b",children:[e.jsx(E,{variant:c==="content"?"default":"ghost",size:"sm",onClick:()=>o("content"),children:"Content"}),e.jsx(E,{variant:c==="widgets"?"default":"ghost",size:"sm",onClick:()=>o("widgets"),children:"Embed Codes"}),e.jsx(E,{variant:c==="qr"?"default":"ghost",size:"sm",onClick:()=>o("qr"),children:"QR Codes"}),e.jsx(E,{variant:c==="analytics"?"default":"ghost",size:"sm",onClick:()=>o("analytics"),children:"Analytics"}),e.jsx(E,{variant:c==="settings"?"default":"ghost",size:"sm",onClick:()=>o("settings"),children:"Settings"})]}),c==="content"&&e.jsx(ge,{value:"content",className:"space-y-6",children:e.jsxs(R,{children:[e.jsxs(Y,{children:[e.jsxs(Q,{className:"flex items-center space-x-2",children:[e.jsx($s,{className:"h-5 w-5 text-blue-600"}),e.jsx("span",{children:"Edit Page Content"})]}),e.jsx(rt,{children:"Update your page title, description, and link organization."})]}),e.jsx(L,{className:"space-y-6",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(q,{htmlFor:"pageTitle",children:"Page Title"}),e.jsx($,{id:"pageTitle",value:(se==null?void 0:se.title)||u.title||u.slug,onChange:ie=>Z(de=>({...de,title:ie.target.value})),placeholder:"Your Page Title"})]}),e.jsxs("div",{children:[e.jsx(q,{htmlFor:"pageDescription",children:"Page Description"}),e.jsx(mt,{id:"pageDescription",value:(se==null?void 0:se.description)||u.description||"",onChange:ie=>Z(de=>({...de,description:ie.target.value})),placeholder:"Describe your page for visitors...",rows:3})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("h3",{className:"font-medium",children:"Link Management"}),e.jsxs("div",{className:"grid gap-4",children:[e.jsxs("div",{className:"p-4 border rounded-lg",children:[e.jsx("h4",{className:"font-medium mb-2",children:"Social Media Links"}),e.jsx("p",{className:"text-sm text-gray-500 mb-3",children:"Connect your social media profiles"}),e.jsxs("div",{className:"space-y-2",children:[((se==null?void 0:se.socialLinks)||u.socialLinks||[]).map((ie,de)=>e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs(Re,{value:ie.platform,onValueChange:ee=>{const ae=[...(se==null?void 0:se.socialLinks)||u.socialLinks||[]];ae[de]={...ae[de],platform:ee},Z(Se=>({...Se,socialLinks:ae}))},children:[e.jsx(Me,{className:"w-[140px]",children:e.jsx(Oe,{})}),e.jsxs(_e,{children:[e.jsx(U,{value:"instagram",children:"Instagram"}),e.jsx(U,{value:"twitter",children:"Twitter"}),e.jsx(U,{value:"facebook",children:"Facebook"}),e.jsx(U,{value:"tiktok",children:"TikTok"}),e.jsx(U,{value:"youtube",children:"YouTube"}),e.jsx(U,{value:"linkedin",children:"LinkedIn"}),e.jsx(U,{value:"snapchat",children:"Snapchat"}),e.jsx(U,{value:"website",children:"Website"})]})]}),e.jsx($,{value:ie.url,onChange:ee=>{const ae=[...(se==null?void 0:se.socialLinks)||u.socialLinks||[]];ae[de]={...ae[de],url:ee.target.value},Z(Se=>({...Se,socialLinks:ae}))},placeholder:"Enter URL",className:"flex-1"}),e.jsx(E,{variant:"outline",size:"sm",onClick:()=>{const ee=((se==null?void 0:se.socialLinks)||u.socialLinks||[]).filter((ae,Se)=>Se!==de);Z(ae=>({...ae,socialLinks:ee}))},children:e.jsx(Vt,{className:"h-4 w-4"})})]},de)),e.jsxs(E,{variant:"outline",size:"sm",onClick:()=>{const ie=(se==null?void 0:se.socialLinks)||u.socialLinks||[];Z(de=>({...de,socialLinks:[...ie,{platform:"instagram",url:"",title:""}]}))},className:"w-full",children:[e.jsx(st,{className:"h-4 w-4 mr-2"}),"Add Social Media Link"]})]})]}),e.jsxs("div",{className:"p-4 border rounded-lg",children:[e.jsx("h4",{className:"font-medium mb-2",children:"Music Platform Links"}),e.jsx("p",{className:"text-sm text-gray-500 mb-3",children:"Link to your music on streaming platforms"}),e.jsxs("div",{className:"space-y-2",children:[((se==null?void 0:se.musicLinks)||u.musicLinks||[]).map((ie,de)=>e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs(Re,{value:ie.platform,onValueChange:ee=>{const ae=[...(se==null?void 0:se.musicLinks)||u.musicLinks||[]];ae[de]={...ae[de],platform:ee},Z(Se=>({...Se,musicLinks:ae}))},children:[e.jsx(Me,{className:"w-[140px]",children:e.jsx(Oe,{})}),e.jsxs(_e,{children:[e.jsx(U,{value:"spotify",children:"Spotify"}),e.jsx(U,{value:"apple-music",children:"Apple Music"}),e.jsx(U,{value:"youtube-music",children:"YouTube Music"}),e.jsx(U,{value:"amazon-music",children:"Amazon Music"}),e.jsx(U,{value:"deezer",children:"Deezer"}),e.jsx(U,{value:"tidal",children:"Tidal"}),e.jsx(U,{value:"soundcloud",children:"SoundCloud"}),e.jsx(U,{value:"bandcamp",children:"Bandcamp"})]})]}),e.jsx($,{value:ie.url,onChange:ee=>{const ae=[...(se==null?void 0:se.musicLinks)||u.musicLinks||[]];ae[de]={...ae[de],url:ee.target.value},Z(Se=>({...Se,musicLinks:ae}))},placeholder:"Enter URL",className:"flex-1"}),e.jsx(E,{variant:"outline",size:"sm",onClick:()=>{const ee=((se==null?void 0:se.musicLinks)||u.musicLinks||[]).filter((ae,Se)=>Se!==de);Z(ae=>({...ae,musicLinks:ee}))},children:e.jsx(Vt,{className:"h-4 w-4"})})]},de)),e.jsxs(E,{variant:"outline",size:"sm",onClick:()=>{const ie=(se==null?void 0:se.musicLinks)||u.musicLinks||[];Z(de=>({...de,musicLinks:[...ie,{platform:"spotify",url:"",title:""}]}))},className:"w-full",children:[e.jsx(st,{className:"h-4 w-4 mr-2"}),"Add Music Platform Link"]})]})]}),e.jsxs("div",{className:"p-4 border rounded-lg",children:[e.jsx("h4",{className:"font-medium mb-2",children:"Custom Links"}),e.jsx("p",{className:"text-sm text-gray-500 mb-3",children:"Add any other links or custom content"}),e.jsxs("div",{className:"space-y-2",children:[((se==null?void 0:se.customLinks)||u.customLinks||[]).map((ie,de)=>e.jsxs("div",{className:"space-y-2 p-3 border rounded",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs(Re,{value:ie.type,onValueChange:ee=>{const ae=[...(se==null?void 0:se.customLinks)||u.customLinks||[]];ae[de]={...ae[de],type:ee},Z(Se=>({...Se,customLinks:ae}))},children:[e.jsx(Me,{className:"w-[140px]",children:e.jsx(Oe,{})}),e.jsxs(_e,{children:[e.jsx(U,{value:"custom",children:"Custom Link"}),e.jsx(U,{value:"music-player",children:"Music Player"}),e.jsx(U,{value:"store",children:"Store"}),e.jsx(U,{value:"services",children:"Services"}),e.jsx(U,{value:"booking",children:"Booking"}),e.jsx(U,{value:"newsletter",children:"Newsletter"}),e.jsx(U,{value:"contact",children:"Contact"})]})]}),e.jsx($,{value:ie.title,onChange:ee=>{const ae=[...(se==null?void 0:se.customLinks)||u.customLinks||[]];ae[de]={...ae[de],title:ee.target.value},Z(Se=>({...Se,customLinks:ae}))},placeholder:"Link Title",className:"flex-1"}),e.jsx(E,{variant:"outline",size:"sm",onClick:()=>{const ee=((se==null?void 0:se.customLinks)||u.customLinks||[]).filter((ae,Se)=>Se!==de);Z(ae=>({...ae,customLinks:ee}))},children:e.jsx(Vt,{className:"h-4 w-4"})})]}),e.jsx($,{value:ie.url,onChange:ee=>{const ae=[...(se==null?void 0:se.customLinks)||u.customLinks||[]];ae[de]={...ae[de],url:ee.target.value},Z(Se=>({...Se,customLinks:ae}))},placeholder:"Enter URL",className:"w-full"}),e.jsx($,{value:ie.description||"",onChange:ee=>{const ae=[...(se==null?void 0:se.customLinks)||u.customLinks||[]];ae[de]={...ae[de],description:ee.target.value},Z(Se=>({...Se,customLinks:ae}))},placeholder:"Description (optional)",className:"w-full"})]},de)),e.jsxs(E,{variant:"outline",size:"sm",onClick:()=>{const ie=(se==null?void 0:se.customLinks)||u.customLinks||[];Z(de=>({...de,customLinks:[...ie,{type:"custom",title:"",url:"",description:""}]}))},className:"w-full",children:[e.jsx(st,{className:"h-4 w-4 mr-2"}),"Add Custom Link"]})]})]}),e.jsxs("div",{className:"p-4 border rounded-lg",children:[e.jsx("h4",{className:"font-medium mb-2",children:"Page Widgets"}),e.jsx("p",{className:"text-sm text-gray-500 mb-3",children:"Enable interactive widgets to display on your All-Links page"}),e.jsx("div",{className:"space-y-3",children:[{key:"musicPlayer",label:"Music Player",description:"Display your latest tracks with playback",icon:""},{key:"bookingWidget",label:"Booking Widget",description:"Allow visitors to book you directly",icon:""},{key:"merchandiseStore",label:"Merchandise Store",description:"Showcase and sell your merch",icon:""},{key:"servicesWidget",label:"Professional Services",description:"Display your professional services",icon:""},{key:"contactForm",label:"Contact Form",description:"Let visitors send you messages",icon:""},{key:"newsletterSignup",label:"Newsletter Signup",description:"Build your email subscriber list",icon:""},{key:"tourDates",label:"Tour Dates",description:"Show upcoming performances",icon:""},{key:"pressKit",label:"Press Kit",description:"Media resources for press and venues",icon:""}].map(ie=>{var de,ee;return e.jsxs("div",{className:"flex items-center justify-between p-3 border rounded",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("span",{className:"text-lg",children:ie.icon}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-sm",children:ie.label}),e.jsx("p",{className:"text-xs text-gray-500",children:ie.description})]})]}),e.jsx(gt,{checked:((de=se==null?void 0:se.enabledWidgets)==null?void 0:de[ie.key])||((ee=u.enabledWidgets)==null?void 0:ee[ie.key])||!1,onCheckedChange:ae=>{Z(Se=>({...Se,enabledWidgets:{...(Se==null?void 0:Se.enabledWidgets)||u.enabledWidgets||{},[ie.key]:ae}}))}})]},ie.key)})})]})]})]}),e.jsx(ss,{}),e.jsxs(E,{onClick:async()=>{try{const ie={title:(se==null?void 0:se.title)||u.title,description:(se==null?void 0:se.description)||u.description,socialLinks:(se==null?void 0:se.socialLinks)||u.socialLinks||[],musicLinks:(se==null?void 0:se.musicLinks)||u.musicLinks||[],customLinks:(se==null?void 0:se.customLinks)||u.customLinks||[],enabledWidgets:(se==null?void 0:se.enabledWidgets)||u.enabledWidgets||{}};(await $n(`/api/website-integrations/${u.id}`,{method:"PUT",body:ie})).ok&&(r.invalidateQueries({queryKey:["/api/website-integrations"]}),s&&r.invalidateQueries({queryKey:["/api/website-integrations","artist",s]}),r.invalidateQueries({queryKey:[`/api/website-integrations/${u.id}`]}),Z(null),a({title:"Page Updated",description:"Your all-links page has been updated successfully."}))}catch{a({title:"Update Failed",description:"Failed to update your page. Please try again.",variant:"destructive"})}},className:"w-full",children:[e.jsx(js,{className:"h-4 w-4 mr-2"}),"Save Changes"]})]})})]})}),c==="widgets"&&e.jsx(ge,{value:"widgets",className:"space-y-6",children:e.jsxs(R,{children:[e.jsxs(Y,{children:[e.jsxs(Q,{className:"flex items-center space-x-2",children:[e.jsx(rh,{className:"h-5 w-5 text-green-600"}),e.jsx("span",{children:"Embed Codes"})]}),e.jsx(rt,{children:"Get embed codes to add your all-links page or individual widgets to other websites."})]}),e.jsx(L,{className:"space-y-6",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium mb-2",children:"Full Page Embed"}),e.jsx("p",{className:"text-sm text-gray-500 mb-3",children:"Embed the complete all-links page in an iframe"}),e.jsx("div",{className:"p-3 bg-gray-50 rounded border font-mono text-sm",children:`<iframe src="https://waitumusic.com/${u.slug}" width="100%" height="600" frameborder="0"></iframe>`}),e.jsxs(E,{variant:"outline",size:"sm",className:"mt-2",onClick:()=>{const ie=`<iframe src="https://waitumusic.com/${u.slug}" width="100%" height="600" frameborder="0"></iframe>`;navigator.clipboard.writeText(ie),a({title:"Embed code copied to clipboard"})},children:[e.jsx(co,{className:"h-4 w-4 mr-2"}),"Copy Code"]})]}),e.jsx(ss,{}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium mb-2",children:"Individual Widget Embeds"}),e.jsx("p",{className:"text-sm text-gray-500 mb-3",children:"Embed specific widgets independently on your website"}),e.jsx("div",{className:"space-y-4",children:(()=>{const ie=[{key:"musicPlayer",label:"Music Player Widget",description:"Embed your latest music player"},{key:"bookingWidget",label:"Booking Widget",description:"Embed booking form directly"},{key:"merchandiseStore",label:"Store Widget",description:"Embed merchandise store"},{key:"servicesWidget",label:"Services Widget",description:"Embed professional services"},{key:"contactForm",label:"Contact Widget",description:"Embed contact form"},{key:"newsletterSignup",label:"Newsletter Widget",description:"Embed newsletter signup"},{key:"tourDates",label:"Tour Dates Widget",description:"Embed upcoming performances"},{key:"pressKit",label:"Press Kit Widget",description:"Embed media resources"}],de=u.enabledWidgets||{},ee=ie.filter(ae=>de[ae.key]===!0);return ee.length===0?e.jsxs("div",{className:"text-center py-8 text-gray-500",children:[e.jsx(Gt,{className:"h-12 w-12 mx-auto mb-4 text-gray-400"}),e.jsx("p",{className:"text-lg font-medium",children:"No Widgets Enabled"}),e.jsx("p",{className:"text-sm",children:"Go to the Content tab to enable widgets for your All-Links page."}),e.jsx(E,{variant:"outline",onClick:()=>o("content"),className:"mt-4",children:"Enable Widgets"})]}):ee.map(ae=>e.jsxs("div",{className:"p-4 border rounded-lg space-y-3",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium",children:ae.label}),e.jsx("p",{className:"text-sm text-gray-500",children:ae.description})]}),e.jsxs("div",{children:[e.jsx(q,{className:"text-sm",children:"Embed Code"}),e.jsx("div",{className:"p-3 bg-gray-50 rounded border font-mono text-xs mt-1",children:`<iframe src="https://waitumusic.com/widget/${u.slug}/${ae.key}" width="100%" height="400" frameborder="0"></iframe>`}),e.jsxs(E,{variant:"outline",size:"sm",className:"mt-2",onClick:()=>{const Se=`<iframe src="https://waitumusic.com/widget/${u.slug}/${ae.key}" width="100%" height="400" frameborder="0"></iframe>`;navigator.clipboard.writeText(Se),a({title:`${ae.label} embed code copied`})},children:[e.jsx(co,{className:"h-4 w-4 mr-2"}),"Copy Widget Code"]})]})]},ae.key))})()})]}),e.jsx(ss,{}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium mb-2",children:"Button Link"}),e.jsx("p",{className:"text-sm text-gray-500 mb-3",children:"Simple link button for your website"}),e.jsx("div",{className:"p-3 bg-gray-50 rounded border font-mono text-sm",children:`<a href="https://waitumusic.com/${u.slug}" target="_blank" style="display: inline-block; background: #3b82f6; color: white; padding: 12px 24px; text-decoration: none; border-radius: 6px;">View My Links</a>`}),e.jsxs(E,{variant:"outline",size:"sm",className:"mt-2",onClick:()=>{const ie=`<a href="https://waitumusic.com/${u.slug}" target="_blank" style="display: inline-block; background: #3b82f6; color: white; padding: 12px 24px; text-decoration: none; border-radius: 6px;">View My Links</a>`;navigator.clipboard.writeText(ie),a({title:"Button code copied to clipboard"})},children:[e.jsx(co,{className:"h-4 w-4 mr-2"}),"Copy Code"]})]}),e.jsx(ss,{}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium mb-2",children:"Direct URL"}),e.jsx("p",{className:"text-sm text-gray-500 mb-3",children:"Share the direct link to your page"}),e.jsxs("div",{className:"p-3 bg-gray-50 rounded border font-mono text-sm",children:["https://waitumusic.com/",u.slug]}),e.jsxs(E,{variant:"outline",size:"sm",className:"mt-2",onClick:()=>{navigator.clipboard.writeText(`https://waitumusic.com/${u.slug}`),a({title:"URL copied to clipboard"})},children:[e.jsx(co,{className:"h-4 w-4 mr-2"}),"Copy URL"]})]})]})})]})}),c==="qr"&&e.jsx(ge,{value:"qr",className:"space-y-6",children:e.jsxs(R,{children:[e.jsxs(Y,{children:[e.jsxs(Q,{className:"flex items-center space-x-2",children:[e.jsx(lh,{className:"h-5 w-5 text-purple-600"}),e.jsx("span",{children:"QR Code Manager"})]}),e.jsx(rt,{children:"Customize and download QR codes for your all-links page with transparent backgrounds and custom colors."})]}),e.jsx(L,{className:"space-y-6",children:e.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"font-medium",children:"Preview"}),e.jsx("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-8 flex flex-col items-center justify-center min-h-[300px] bg-gray-50",children:H?e.jsxs("div",{className:"text-center space-y-4",children:[e.jsx("img",{src:H.qrCode,alt:"QR Code Preview",className:"w-48 h-48 mx-auto",style:{backgroundColor:le.transparent?"transparent":le.backgroundColor}}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"text-sm font-medium",children:H.title}),e.jsx("p",{className:"text-xs text-gray-500",children:H.url})]}),e.jsxs(E,{onClick:te,className:"flex items-center space-x-2",children:[e.jsx(Cs,{className:"h-4 w-4"}),e.jsx("span",{children:"Download PNG"})]})]}):e.jsxs("div",{className:"text-center space-y-4",children:[e.jsx(lh,{className:"h-16 w-16 text-gray-400 mx-auto"}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-gray-900",children:"Generate QR Code"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Customize your settings below and generate a QR code for your page."})]})]})})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsx("h3",{className:"font-medium",children:"Customization Options"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(q,{htmlFor:"transparent",className:"text-sm font-medium",children:"Transparent Background"}),e.jsx(gt,{id:"transparent",checked:le.transparent,onCheckedChange:ie=>ne(de=>({...de,transparent:ie}))})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(q,{htmlFor:"color",className:"text-sm font-medium",children:"QR Code Color"}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx($,{id:"color",type:"color",value:le.color,onChange:ie=>ne(de=>({...de,color:ie.target.value})),className:"w-16 h-10 p-1 border rounded"}),e.jsx($,{type:"text",value:le.color,onChange:ie=>ne(de=>({...de,color:ie.target.value})),placeholder:"#000000",className:"flex-1"})]})]}),!le.transparent&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(q,{htmlFor:"backgroundColor",className:"text-sm font-medium",children:"Background Color"}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx($,{id:"backgroundColor",type:"color",value:le.backgroundColor,onChange:ie=>ne(de=>({...de,backgroundColor:ie.target.value})),className:"w-16 h-10 p-1 border rounded"}),e.jsx($,{type:"text",value:le.backgroundColor,onChange:ie=>ne(de=>({...de,backgroundColor:ie.target.value})),placeholder:"#FFFFFF",className:"flex-1"})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(q,{htmlFor:"includeProfilePicture",className:"text-sm font-medium",children:"Include Profile Picture"}),e.jsx(gt,{id:"includeProfilePicture",checked:le.includeProfilePicture,onCheckedChange:ie=>ne(de=>({...de,includeProfilePicture:ie,customImageUrl:ie?"":de.customImageUrl}))})]}),le.includeProfilePicture&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(q,{htmlFor:"profilePictureUrl",className:"text-sm font-medium",children:"Profile Picture URL"}),e.jsx($,{id:"profilePictureUrl",type:"url",value:le.profilePictureUrl,onChange:ie=>ne(de=>({...de,profilePictureUrl:ie.target.value})),placeholder:"https://example.com/profile.jpg",className:"w-full"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Profile picture takes priority over custom image when enabled"})]}),!le.includeProfilePicture&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(q,{htmlFor:"customImageUrl",className:"text-sm font-medium",children:"Custom Center Image URL"}),e.jsx($,{id:"customImageUrl",type:"url",value:le.customImageUrl,onChange:ie=>ne(de=>({...de,customImageUrl:ie.target.value})),placeholder:"https://example.com/logo.png",className:"w-full"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Add any custom graphic or logo to the center of the QR code"})]})]})]}),e.jsx(ss,{}),e.jsxs("div",{className:"space-y-4",children:[e.jsx(E,{onClick:()=>ue.mutate({integrationId:u.id,options:le}),disabled:ue.isPending,className:"w-full",children:ue.isPending?"Generating...":"Generate QR Code"}),H&&e.jsxs("div",{className:"text-center space-y-2",children:[e.jsxs("p",{className:"text-sm text-gray-600",children:["QR code links to: ",e.jsx("span",{className:"font-mono text-blue-600",children:H.url})]}),e.jsxs("div",{className:"flex items-center justify-center space-x-4 text-xs text-gray-500",children:[e.jsx("span",{children:"Format: PNG"}),e.jsx("span",{children:"Size: 512x512"}),e.jsx("span",{children:"Error Correction: Medium"})]})]})]})]})]})})]})}),c==="analytics"&&e.jsx(ge,{value:"analytics",className:"space-y-6",children:e.jsxs(R,{children:[e.jsxs(Y,{children:[e.jsxs(Q,{className:"flex items-center space-x-2",children:[e.jsx(Ns,{className:"h-5 w-5 text-orange-600"}),e.jsx("span",{children:"Page Analytics"})]}),e.jsx(rt,{children:"View visitor statistics and engagement metrics for your all-links page."})]}),e.jsxs(L,{className:"space-y-6",children:[e.jsxs("div",{className:"grid md:grid-cols-3 gap-4",children:[e.jsx(R,{children:e.jsx(L,{className:"p-6",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-blue-600",children:u.clicks||0}),e.jsx("p",{className:"text-sm text-gray-500",children:"Total Clicks"})]})})}),e.jsx(R,{children:e.jsx(L,{className:"p-6",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-green-600",children:"0"}),e.jsx("p",{className:"text-sm text-gray-500",children:"This Week"})]})})}),e.jsx(R,{children:e.jsx(L,{className:"p-6",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-purple-600",children:"0"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Today"})]})})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"font-medium",children:"Recent Activity"}),e.jsx("div",{className:"p-4 border rounded-lg",children:e.jsx("p",{className:"text-sm text-gray-500 text-center py-8",children:"Analytics data will appear here once visitors start interacting with your page."})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"font-medium",children:"Quick Actions"}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsxs(E,{variant:"outline",size:"sm",onClick:()=>window.open(`https://waitumusic.com/${u.slug}`,"_blank"),children:[e.jsx(zn,{className:"h-4 w-4 mr-2"}),"View Live Page"]}),e.jsxs(E,{variant:"outline",size:"sm",onClick:()=>{navigator.clipboard.writeText(`https://waitumusic.com/${u.slug}`),a({title:"Page URL copied to clipboard"})},children:[e.jsx(co,{className:"h-4 w-4 mr-2"}),"Copy Link"]})]})]})]})]})}),c==="settings"&&e.jsx(ge,{value:"settings",className:"space-y-6",children:e.jsxs(R,{children:[e.jsxs(Y,{children:[e.jsxs(Q,{className:"flex items-center space-x-2",children:[e.jsx(Gt,{className:"h-5 w-5 text-gray-600"}),e.jsx("span",{children:"Page Settings"})]}),e.jsx(rt,{children:"Configure privacy, access control, and advanced options for your page."})]}),e.jsx(L,{className:"space-y-6",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium",children:"Page Status"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Enable or disable your all-links page"})]}),e.jsx(gt,{checked:u.isActive,onCheckedChange:()=>{a({title:"Settings Update",description:"Page status modification coming soon in full release."})}})]}),e.jsx(ss,{}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium mb-2",children:"Access Level"}),e.jsx("p",{className:"text-sm text-gray-500 mb-3",children:"Control who can view your page"}),e.jsxs(Re,{value:u.accessLevel,onValueChange:()=>{},children:[e.jsx(Me,{children:e.jsx(Oe,{})}),e.jsxs(_e,{children:[e.jsx(U,{value:"public",children:"Public - Anyone can view"}),e.jsx(U,{value:"unlisted",children:"Unlisted - Only with direct link"}),e.jsx(U,{value:"private",children:"Private - Password protected"})]})]})]}),e.jsx(ss,{}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium mb-2",children:"Page Information"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-500",children:"Page URL:"}),e.jsxs("span",{className:"font-mono",children:["waitumusic.com/",u.slug]})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-500",children:"Created:"}),e.jsx("span",{children:new Date(u.createdAt).toLocaleDateString()})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-500",children:"Last Updated:"}),e.jsx("span",{children:new Date(u.updatedAt).toLocaleDateString()})]})]})]}),e.jsx(ss,{}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium mb-2 text-red-600",children:"Danger Zone"}),e.jsx("p",{className:"text-sm text-gray-500 mb-3",children:"Irreversible actions for your page"}),e.jsxs(E,{variant:"destructive",size:"sm",onClick:()=>{confirm(`Are you sure you want to delete your all-links page "/${u.slug}"? This action cannot be undone.`)&&a({title:"Delete Confirmation",description:"Page deletion will be implemented in the full release."})},children:[e.jsx(Vt,{className:"h-4 w-4 mr-2"}),"Delete Page"]})]})]})})]})})]})]})})]})}function M9({user:t,isManaged:s,isArtist:n,isMusicianProfile:a,isProfessional:r,isFan:i,hasActiveSubscription:l=!1}){const{toast:c}=nt(),o=Tt(),[d,h]=N.useState({fullName:(t==null?void 0:t.fullName)||"",email:(t==null?void 0:t.email)||"",phoneNumber:(t==null?void 0:t.phoneNumber)||"",stageName:"",bio:"",primaryGenre:"",basePrice:"",idealPerformanceRate:"",minimumAcceptableRate:"",epkUrl:"",websiteUrl:"",bookingFormPictureUrl:"",profilePictureUrl:(t==null?void 0:t.avatarUrl)||"",profileBannerUrl:(t==null?void 0:t.coverImageUrl)||"",privacySetting:(t==null?void 0:t.privacySetting)||"public",primaryTalentId:null}),[u,m]=N.useState({epk:!1,bookingPhoto:!1,profilePicture:!1,profileBanner:!1}),{data:p=[]}=ke({queryKey:["/api/instruments"],enabled:n||a||r});N.useEffect(()=>{const f=async()=>{try{if(n){const b=await xe(`/api/artists/${t.id}`);b&&h(j=>({...j,stageName:b.stageName||"",bio:b.bio||"",primaryGenre:b.primaryGenre||"",basePrice:b.basePrice||"",idealPerformanceRate:b.idealPerformanceRate||"",minimumAcceptableRate:b.minimumAcceptableRate||"",epkUrl:b.epkUrl||"",bookingFormPictureUrl:b.bookingFormPictureUrl||"",primaryTalentId:b.primaryTalentId||null}))}else if(a){const b=await xe(`/api/musicians/${t.id}`);b&&h(j=>({...j,stageName:b.stageName||"",bio:b.bio||"",basePrice:b.basePrice||"",idealPerformanceRate:b.idealPerformanceRate||"",minimumAcceptableRate:b.minimumAcceptableRate||"",primaryTalentId:b.primaryTalentId||null}))}else if(r){const b=await xe(`/api/professionals/${t.id}`);b&&h(j=>({...j,bio:b.bio||"",websiteUrl:b.websiteUrl||"",primaryTalentId:b.primaryTalentId||null}))}}catch(b){console.error("Error loading profile data:",b)}};t!=null&&t.id&&f()},[t==null?void 0:t.id,n,a,r]);const g=Xe({mutationFn:async f=>(await xe(`/api/users/${t.id}`,{method:"PATCH",body:JSON.stringify({fullName:f.fullName,phoneNumber:f.phoneNumber,privacySetting:f.privacySetting,avatarUrl:f.profilePictureUrl,coverImageUrl:f.profileBannerUrl})}),n?await xe(`/api/artists/${t.id}`,{method:"PATCH",body:JSON.stringify({stageName:f.stageName,bio:f.bio,primaryGenre:f.primaryGenre,basePrice:f.basePrice?parseFloat(f.basePrice):null,idealPerformanceRate:f.idealPerformanceRate?parseFloat(f.idealPerformanceRate):null,minimumAcceptableRate:f.minimumAcceptableRate?parseFloat(f.minimumAcceptableRate):null,epkUrl:f.epkUrl,bookingFormPictureUrl:f.bookingFormPictureUrl,primaryTalentId:f.primaryTalentId})}):a?await xe(`/api/musicians/${t.id}`,{method:"PATCH",body:JSON.stringify({stageName:f.stageName,bio:f.bio,basePrice:f.basePrice?parseFloat(f.basePrice):null,idealPerformanceRate:f.idealPerformanceRate?parseFloat(f.idealPerformanceRate):null,minimumAcceptableRate:f.minimumAcceptableRate?parseFloat(f.minimumAcceptableRate):null,primaryTalentId:f.primaryTalentId})}):r&&await xe(`/api/professionals/${t.id}`,{method:"PATCH",body:JSON.stringify({bio:f.bio,websiteUrl:f.websiteUrl,primaryTalentId:f.primaryTalentId})}),f),onSuccess:()=>{c({title:"Profile Updated",description:"Your profile has been updated successfully"}),o.invalidateQueries({queryKey:["/api/user/profile"]}),o.invalidateQueries({queryKey:[`/api/artists/${t.id}`]}),o.invalidateQueries({queryKey:[`/api/musicians/${t.id}`]}),o.invalidateQueries({queryKey:[`/api/professionals/${t.id}`]})},onError:f=>{c({title:"Update Failed",description:f.message||"Failed to update profile",variant:"destructive"})}}),x=f=>{f.preventDefault(),g.mutate(d)},v=(f,b)=>{h(j=>({...j,[f]:b}))},y=async(f,b)=>{var j;if(f){m(S=>({...S,[b]:!0}));try{const S=new FormData;S.append("files",f);let k="profile-images";b==="epk"?k="epk":b==="bookingPhoto"?k="booking-photos":b==="profilePicture"?k="profile-pictures":b==="profileBanner"&&(k="profile-banners"),S.append("category",k),S.append("isPublic","false");const T=await fetch("/api/media/upload",{method:"POST",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`},body:S});if(!T.ok)throw new Error("Upload failed");const C=(j=(await T.json()).files)==null?void 0:j[0],w=(C==null?void 0:C.url)||`/uploads/${C==null?void 0:C.fileName}`;b==="epk"?v("epkUrl",w):b==="bookingPhoto"?v("bookingFormPictureUrl",w):b==="profilePicture"?v("profilePictureUrl",w):b==="profileBanner"&&v("profileBannerUrl",w),c({title:"File Uploaded",description:`${{epk:"EPK",bookingPhoto:"Booking photo",profilePicture:"Profile picture",profileBanner:"Profile banner"}[b]} uploaded successfully`})}catch(S){c({title:"Upload Failed",description:S.message||"Failed to upload file",variant:"destructive"})}finally{m(S=>({...S,[b]:!1}))}}};return e.jsxs(R,{children:[e.jsx(Y,{children:e.jsxs(Q,{className:"text-lg sm:text-xl flex items-center gap-2",children:[e.jsx(cn,{className:"h-5 w-5"}),"Edit Profile"]})}),e.jsx(L,{children:e.jsxs("form",{onSubmit:x,className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(q,{htmlFor:"fullName",children:"Full Name"}),e.jsx($,{id:"fullName",value:d.fullName,onChange:f=>v("fullName",f.target.value),required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(q,{htmlFor:"email",children:"Email"}),e.jsx($,{id:"email",type:"email",value:d.email,disabled:!0,className:"bg-muted"})]})]}),!i&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(q,{htmlFor:"profilePictureUrl",children:"Profile Picture"}),e.jsx("div",{className:"flex gap-2",children:e.jsx($,{id:"profilePictureUrl",type:"url",value:d.profilePictureUrl,onChange:f=>v("profilePictureUrl",f.target.value),placeholder:"https://your-profile-picture.com/image.jpg or upload below",className:"flex-1"})}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:"Or upload image:"}),e.jsxs("label",{className:"cursor-pointer",children:[e.jsx("input",{type:"file",accept:"image/*",onChange:f=>{var j;const b=(j=f.target.files)==null?void 0:j[0];b&&y(b,"profilePicture")},className:"hidden"}),e.jsx(E,{type:"button",variant:"outline",size:"sm",disabled:u.profilePicture,asChild:!0,children:e.jsxs("span",{children:[u.profilePicture?e.jsx(En,{className:"h-4 w-4 mr-1 animate-spin"}):e.jsx(Vn,{className:"h-4 w-4 mr-1"}),u.profilePicture?"Uploading...":"Upload Picture"]})})]})]}),d.profilePictureUrl&&e.jsxs("div",{className:"text-sm text-muted-foreground",children:[e.jsx("span",{className:"font-medium",children:"Current profile picture:"})," ",e.jsx("a",{href:d.profilePictureUrl,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:underline",children:d.profilePictureUrl.includes("/uploads/")?"Uploaded image":"External URL"})]})]}),!i&&(s||l)&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(q,{htmlFor:"profileBannerUrl",children:"Profile Banner"}),e.jsx("div",{className:"flex gap-2",children:e.jsx($,{id:"profileBannerUrl",type:"url",value:d.profileBannerUrl,onChange:f=>v("profileBannerUrl",f.target.value),placeholder:"https://your-profile-banner.com/banner.jpg or upload below",className:"flex-1"})}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:"Or upload banner:"}),e.jsxs("label",{className:"cursor-pointer",children:[e.jsx("input",{type:"file",accept:"image/*",onChange:f=>{var j;const b=(j=f.target.files)==null?void 0:j[0];b&&y(b,"profileBanner")},className:"hidden"}),e.jsx(E,{type:"button",variant:"outline",size:"sm",disabled:u.profileBanner,asChild:!0,children:e.jsxs("span",{children:[u.profileBanner?e.jsx(En,{className:"h-4 w-4 mr-1 animate-spin"}):e.jsx(Vn,{className:"h-4 w-4 mr-1"}),u.profileBanner?"Uploading...":"Upload Banner"]})})]})]}),d.profileBannerUrl&&e.jsxs("div",{className:"text-sm text-muted-foreground",children:[e.jsx("span",{className:"font-medium",children:"Current profile banner:"})," ",e.jsx("a",{href:d.profileBannerUrl,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:underline",children:d.profileBannerUrl.includes("/uploads/")?"Uploaded image":"External URL"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(q,{htmlFor:"phoneNumber",children:"Phone Number"}),e.jsx($,{id:"phoneNumber",value:d.phoneNumber,onChange:f=>v("phoneNumber",f.target.value)})]}),(n||a)&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(q,{htmlFor:"stageName",children:"Stage Name"}),e.jsx($,{id:"stageName",value:d.stageName,onChange:f=>v("stageName",f.target.value),placeholder:"Your stage/performance name"})]})]}),(n||a||r)&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(q,{htmlFor:"bio",children:"Bio"}),e.jsx(mt,{id:"bio",value:d.bio,onChange:f=>v("bio",f.target.value),placeholder:"Tell us about yourself...",rows:4})]}),(n||a||r)&&e.jsxs("div",{className:"space-y-2",children:[e.jsxs(q,{htmlFor:"primaryTalent",children:[e.jsx(Ue,{className:"h-4 w-4 inline mr-1"}),"Primary Talent/Skill"]}),e.jsxs(Re,{value:String(d.primaryTalentId||""),onValueChange:f=>v("primaryTalentId",f?parseInt(f):null),children:[e.jsx(Me,{id:"primaryTalent",children:e.jsx(Oe,{placeholder:"Select your primary talent or skill"})}),e.jsx(_e,{children:p.sort((f,b)=>n&&f.mixer_group==="vocals"?-1:n&&b.mixer_group==="vocals"?1:f.name.localeCompare(b.name)).map(f=>e.jsxs(U,{value:String(f.id),children:[f.name," - ",f.category]},f.id))})]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:n?"Select your primary performance skill (e.g., Lead Vocals, Guitar, etc.)":"This helps identify your main expertise for bookings and assignments"})]}),n&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(q,{htmlFor:"primaryGenre",children:"Primary Genre"}),e.jsx($,{id:"primaryGenre",value:d.primaryGenre,onChange:f=>v("primaryGenre",f.target.value),placeholder:"e.g., Jazz, Rock, Pop"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(q,{htmlFor:"basePrice",children:"Base Price ($)"}),e.jsx($,{id:"basePrice",type:"number",value:d.basePrice,onChange:f=>v("basePrice",f.target.value),placeholder:"0.00",step:"0.01"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(q,{htmlFor:"idealPerformanceRate",children:"Ideal Rate ($)"}),e.jsx($,{id:"idealPerformanceRate",type:"number",value:d.idealPerformanceRate,onChange:f=>v("idealPerformanceRate",f.target.value),placeholder:"0.00",step:"0.01"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(q,{htmlFor:"minimumAcceptableRate",children:"Minimum Rate ($)"}),e.jsx($,{id:"minimumAcceptableRate",type:"number",value:d.minimumAcceptableRate,onChange:f=>v("minimumAcceptableRate",f.target.value),placeholder:"0.00",step:"0.01"})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(q,{htmlFor:"epkUrl",children:"EPK (Electronic Press Kit)"}),e.jsx("div",{className:"flex gap-2",children:e.jsx($,{id:"epkUrl",type:"url",value:d.epkUrl,onChange:f=>v("epkUrl",f.target.value),placeholder:"https://your-epk-url.com or upload file below",className:"flex-1"})}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:"Or upload EPK file:"}),e.jsxs("label",{className:"cursor-pointer",children:[e.jsx("input",{type:"file",accept:".pdf,.doc,.docx,.txt",onChange:f=>{var j;const b=(j=f.target.files)==null?void 0:j[0];b&&y(b,"epk")},className:"hidden"}),e.jsx(E,{type:"button",variant:"outline",size:"sm",disabled:u.epk,asChild:!0,children:e.jsxs("span",{children:[u.epk?e.jsx(En,{className:"h-4 w-4 mr-1 animate-spin"}):e.jsx(xt,{className:"h-4 w-4 mr-1"}),u.epk?"Uploading...":"Upload EPK"]})})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(q,{htmlFor:"bookingFormPictureUrl",children:"Booking Form Picture"}),e.jsx("div",{className:"flex gap-2",children:e.jsx($,{id:"bookingFormPictureUrl",type:"url",value:d.bookingFormPictureUrl,onChange:f=>v("bookingFormPictureUrl",f.target.value),placeholder:"https://your-picture-url.com/image.jpg or upload file below",className:"flex-1"})}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:"Or upload image:"}),e.jsxs("label",{className:"cursor-pointer",children:[e.jsx("input",{type:"file",accept:"image/*",onChange:f=>{var j;const b=(j=f.target.files)==null?void 0:j[0];b&&y(b,"bookingPhoto")},className:"hidden"}),e.jsx(E,{type:"button",variant:"outline",size:"sm",disabled:u.bookingPhoto,asChild:!0,children:e.jsxs("span",{children:[u.bookingPhoto?e.jsx(En,{className:"h-4 w-4 mr-1 animate-spin"}):e.jsx(Vn,{className:"h-4 w-4 mr-1"}),u.bookingPhoto?"Uploading...":"Upload Photo"]})})]})]})]}),d.epkUrl&&e.jsxs("div",{className:"text-sm text-muted-foreground",children:[e.jsx("span",{className:"font-medium",children:"Current EPK:"})," ",e.jsx("a",{href:d.epkUrl,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:underline",children:d.epkUrl.includes("/uploads/")?"Uploaded file":"External URL"})]}),d.bookingFormPictureUrl&&e.jsxs("div",{className:"text-sm text-muted-foreground",children:[e.jsx("span",{className:"font-medium",children:"Current booking photo:"})," ",e.jsx("a",{href:d.bookingFormPictureUrl,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:underline",children:d.bookingFormPictureUrl.includes("/uploads/")?"Uploaded image":"External URL"})]})]})]}),a&&!n&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(q,{htmlFor:"basePrice",children:"Base Price ($)"}),e.jsx($,{id:"basePrice",type:"number",value:d.basePrice,onChange:f=>v("basePrice",f.target.value),placeholder:"0.00",step:"0.01"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(q,{htmlFor:"idealPerformanceRate",children:"Ideal Rate ($)"}),e.jsx($,{id:"idealPerformanceRate",type:"number",value:d.idealPerformanceRate,onChange:f=>v("idealPerformanceRate",f.target.value),placeholder:"0.00",step:"0.01"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(q,{htmlFor:"minimumAcceptableRate",children:"Minimum Rate ($)"}),e.jsx($,{id:"minimumAcceptableRate",type:"number",value:d.minimumAcceptableRate,onChange:f=>v("minimumAcceptableRate",f.target.value),placeholder:"0.00",step:"0.01"})]})]}),r&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(q,{htmlFor:"websiteUrl",children:"Website URL"}),e.jsx($,{id:"websiteUrl",type:"url",value:d.websiteUrl,onChange:f=>v("websiteUrl",f.target.value),placeholder:"https://your-website.com"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(gt,{id:"privacy",checked:d.privacySetting==="public",onCheckedChange:f=>v("privacySetting",f?"public":"private")}),e.jsx(q,{htmlFor:"privacy",children:"Public Profile"})]}),e.jsx(E,{type:"submit",className:"w-full",disabled:g.isPending,children:g.isPending?e.jsxs(e.Fragment,{children:[e.jsx(En,{className:"h-4 w-4 mr-2 animate-spin"}),"Updating..."]}):e.jsxs(e.Fragment,{children:[e.jsx(js,{className:"h-4 w-4 mr-2"}),"Save Changes"]})})]})})]})}function _9(){const{toast:t}=nt(),s=Tt(),[n,a]=N.useState(""),[r,i]=N.useState(""),[l,c]=N.useState("booking"),{data:o}=ke({queryKey:["/api/users/admins"]}),{data:d}=ke({queryKey:["/api/bookings/all"],enabled:l==="booking"}),{data:h}=ke({queryKey:["/api/users/managed"],enabled:l==="managed_talent"}),{data:u,isLoading:m}=ke({queryKey:["/api/assignments/admin"]}),p=Xe({mutationFn:async v=>xe("POST","/api/assignments/admin"),onSuccess:()=>{t({title:"Success",description:"Admin assignment created successfully"}),s.invalidateQueries({queryKey:["/api/assignments/admin"]}),a(""),i("")},onError:v=>{t({title:"Error",description:v.message||"Failed to create admin assignment",variant:"destructive"})}}),g=Xe({mutationFn:async v=>xe("DELETE",`/api/assignments/admin/${v}`),onSuccess:()=>{t({title:"Success",description:"Admin assignment removed successfully"}),s.invalidateQueries({queryKey:["/api/assignments/admin"]})},onError:v=>{t({title:"Error",description:v.message||"Failed to remove admin assignment",variant:"destructive"})}}),x=()=>{if(!n||!r){t({title:"Missing Information",description:"Please select both an admin and a target",variant:"destructive"});return}p.mutate({adminUserId:parseInt(n),targetType:l,targetId:parseInt(r)})};return m?e.jsx("div",{className:"text-center py-8",children:"Loading admin assignments..."}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs(R,{children:[e.jsx(Y,{children:e.jsxs(Q,{className:"flex items-center",children:[e.jsx(st,{className:"w-4 h-4 mr-2"}),"Assign Admin"]})}),e.jsx(L,{className:"space-y-4",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium",children:"Assignment Type"}),e.jsxs(Re,{value:l,onValueChange:v=>c(v),children:[e.jsx(Me,{children:e.jsx(Oe,{})}),e.jsxs(_e,{children:[e.jsx(U,{value:"booking",children:"Booking Oversight"}),e.jsx(U,{value:"managed_talent",children:"Managed Talent"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium",children:"Select Admin"}),e.jsxs(Re,{value:n,onValueChange:a,children:[e.jsx(Me,{children:e.jsx(Oe,{placeholder:"Choose admin"})}),e.jsx(_e,{children:o==null?void 0:o.map(v=>e.jsx(U,{value:v.id.toString(),children:v.fullName},v.id))})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium",children:l==="booking"?"Select Booking":"Select Managed Talent"}),e.jsxs(Re,{value:r,onValueChange:i,children:[e.jsx(Me,{children:e.jsx(Oe,{placeholder:`Choose ${l==="booking"?"booking":"talent"}`})}),e.jsx(_e,{children:l==="booking"?d==null?void 0:d.map(v=>e.jsxs(U,{value:v.id.toString(),children:[v.eventName," - ",v.clientName]},v.id)):h==null?void 0:h.map(v=>e.jsxs(U,{value:v.id.toString(),children:[v.fullName," (",v.role,")"]},v.id))})]})]}),e.jsx("div",{className:"flex items-end",children:e.jsxs(E,{onClick:x,disabled:p.isPending,className:"w-full",children:[e.jsx(ta,{className:"w-4 h-4 mr-2"}),"Assign"]})})]})})]}),e.jsxs(R,{children:[e.jsx(Y,{children:e.jsxs(Q,{className:"flex items-center",children:[e.jsx(Ze,{className:"w-4 h-4 mr-2"}),"Current Admin Assignments (",(u==null?void 0:u.length)||0,")"]})}),e.jsx(L,{children:(u==null?void 0:u.length)>0?e.jsx("div",{className:"space-y-3",children:u.map(v=>e.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"w-2 h-2 bg-primary rounded-full"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:v.adminName}),e.jsx("div",{className:"flex items-center space-x-2 text-sm text-muted-foreground",children:v.targetType==="booking"?e.jsxs(e.Fragment,{children:[e.jsx(dt,{className:"w-3 h-3"}),e.jsxs("span",{children:["Booking: ",v.targetName]})]}):e.jsxs(e.Fragment,{children:[e.jsx(Ze,{className:"w-3 h-3"}),e.jsxs("span",{children:["Talent: ",v.targetName]})]})})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(X,{variant:"outline",className:"capitalize",children:v.targetType.replace("_"," ")}),e.jsx(E,{onClick:()=>g.mutate(v.id),disabled:g.isPending,variant:"ghost",size:"sm",children:e.jsx(Vt,{className:"w-4 h-4 text-red-500"})})]})]},v.id))}):e.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[e.jsx(Ze,{className:"w-12 h-12 mx-auto mb-4 opacity-50"}),e.jsx("p",{children:"No admin assignments found"}),e.jsx("p",{className:"text-sm",children:"Create assignments to manage admin oversight"})]})})]})]})}function R9(){const{toast:t}=nt(),s=Tt(),[n,a]=N.useState(""),[r,i]=N.useState([]),[l,c]=N.useState(""),{data:o}=ke({queryKey:["/api/bookings/all"]}),{data:d}=ke({queryKey:["/api/users/managed-artists"]}),{data:h}=ke({queryKey:["/api/users/managed-musicians"]}),{data:u}=ke({queryKey:["/api/users"]}),{data:m,isLoading:p}=ke({queryKey:["/api/assignments/booking"]}),g=[...(Array.isArray(d)?d:[]).map(f=>({...f,type:"artist"})),...(Array.isArray(h)?h:[]).map(f=>({...f,type:"musician"}))],x=new Map;Array.isArray(u)&&u.forEach(f=>{x.set(f.id.toString(),f)});const v=Xe({mutationFn:async f=>xe(`/api/assignments/booking/${f}`,{method:"DELETE"}),onSuccess:()=>{t({title:"Success",description:"Booking assignment removed successfully"}),s.invalidateQueries({queryKey:["/api/assignments/booking"]})},onError:f=>{t({title:"Error",description:f.message||"Failed to remove booking assignment",variant:"destructive"})}}),y=async()=>{if(!n||r.length===0){t({title:"Missing Information",description:"Please select a booking and at least one talent",variant:"destructive"});return}try{await xe("/api/assignments/booking/deactivate-all",{method:"POST",body:{bookingId:parseInt(n)}})}catch(k){console.warn("Failed to deactivate existing assignments:",k)}const b=await xe(`/api/bookings/${n}`),j=new Map;b!=null&&b.primaryArtistUserId&&!r.includes(b.primaryArtistUserId.toString())&&x.get(b.primaryArtistUserId.toString())&&j.set(b.primaryArtistUserId.toString(),{userId:b.primaryArtistUserId,assignmentType:"artist",roles:["Main Booked Talent"]}),r.forEach(k=>{const T=x.get(k);if(T){const A=T.roleId;let C="talent",w="supporting_musician";A===3?(C="artist",w="main_performer"):A===4?(C="musician",w="supporting_musician"):A===5?(C="professional",w="sound_engineer"):A===6?(C="musician",w="supporting_musician"):A===7&&(C="professional",w="sound_engineer"),j.has(k)?j.get(k).roles.push(l||w):j.set(k,{userId:parseInt(k),assignmentType:C,roles:[l||w]})}else console.warn(`User not found for ID: ${k}`)}),console.log(" Creating assignments for users:",Array.from(j.keys()));const S=Array.from(j.entries()).map(async([k,T])=>{const A=T.roles[0];try{console.log(` Creating assignment for user ${T.userId} with role: ${A}`);const C=await xe("/api/assignments/booking",{method:"POST",body:{bookingId:parseInt(n),assignedUserId:T.userId,assignmentRole:A}});return console.log(` Successfully created assignment for user ${T.userId}:`,C),C}catch(C){throw console.error(` Failed to create assignment for user ${T.userId}:`,C),C}});try{const k=await Promise.all(S);t({title:"Success",description:`Created ${k.length} assignments successfully with user consolidation`}),s.invalidateQueries({queryKey:["/api/assignments/booking"]}),s.invalidateQueries({queryKey:["/api/bookings"]}),i([]),c("")}catch(k){t({title:"Error",description:k.message||"Failed to create some assignments",variant:"destructive"})}};return p?e.jsx("div",{className:"text-center py-8",children:"Loading booking assignments..."}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs(R,{children:[e.jsxs(Y,{children:[e.jsxs(Q,{className:"flex items-center",children:[e.jsx(st,{className:"w-4 h-4 mr-2"}),"Assign Talent to Booking"]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Support for multiple managed artists and musicians per booking"})]}),e.jsxs(L,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium",children:"Select Booking"}),e.jsxs(Re,{value:n,onValueChange:a,children:[e.jsx(Me,{children:e.jsx(Oe,{placeholder:"Choose booking"})}),e.jsx(_e,{children:(Array.isArray(o)?o:[]).map(f=>e.jsxs(U,{value:f.id.toString(),children:[f.eventName," - ",new Date(f.eventDate).toLocaleDateString()]},f.id))})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium",children:"Assignment Role"}),e.jsxs(Re,{value:l,onValueChange:c,children:[e.jsx(Me,{children:e.jsx(Oe,{placeholder:"Select role"})}),e.jsxs(_e,{children:[e.jsx(U,{value:"main_performer",children:"Main Performer"}),e.jsx(U,{value:"supporting_artist",children:"Supporting Artist"}),e.jsx(U,{value:"session_musician",children:"Session Musician"}),e.jsx(U,{value:"backup_vocalist",children:"Backup Vocalist"}),e.jsx(U,{value:"band_member",children:"Band Member"})]})]})]}),e.jsx("div",{className:"flex items-end",children:e.jsxs(E,{onClick:y,disabled:r.length===0,className:"w-full",children:[e.jsx(ta,{className:"w-4 h-4 mr-2"}),"Assign Selected (",r.length,")"]})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Select Managed Talent"}),e.jsxs(Re,{value:r[0]||"",onValueChange:f=>i([f]),children:[e.jsx(Me,{children:e.jsx(Oe,{placeholder:"Choose managed talent"})}),e.jsx(_e,{children:g.map(f=>e.jsx(U,{value:f.id.toString(),children:e.jsxs("div",{className:"flex items-center space-x-2",children:[f.type==="artist"?e.jsx(Ue,{className:"w-3 h-3"}):e.jsx(Ze,{className:"w-3 h-3"}),e.jsx("span",{children:f.fullName})]})},f.id))})]})]})]})]}),e.jsxs(R,{children:[e.jsx(Y,{children:e.jsxs(Q,{className:"flex items-center",children:[e.jsx(dt,{className:"w-4 h-4 mr-2"}),"Current Booking Assignments (",Array.isArray(m)?m.length:0,")"]})}),e.jsx(L,{children:Array.isArray(m)&&m.length>0?e.jsx("div",{className:"space-y-3",children:m.map(f=>{var b;return e.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"w-2 h-2 bg-primary rounded-full"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:f.bookingName}),e.jsxs("div",{className:"flex items-center space-x-2 text-sm text-muted-foreground",children:[e.jsx(Ze,{className:"w-3 h-3"}),e.jsx("span",{children:f.assignedUserName}),e.jsx("span",{children:""}),e.jsx("span",{className:"capitalize",children:(b=f.assignmentRole)==null?void 0:b.replace("_"," ")})]})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(X,{variant:"outline",className:"capitalize",children:f.assignmentType}),e.jsx(E,{onClick:()=>v.mutate(f.id),disabled:v.isPending,variant:"ghost",size:"sm",children:e.jsx(Vt,{className:"w-4 h-4 text-red-500"})})]})]},f.id)})}):e.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[e.jsx(dt,{className:"w-12 h-12 mx-auto mb-4 opacity-50"}),e.jsx("p",{children:"No booking assignments found"}),e.jsx("p",{className:"text-sm",children:"Assign talent to bookings to manage performances"})]})})]})]})}function O9(){const{toast:t}=nt(),s=Tt(),[n,a]=N.useState(""),[r,i]=N.useState(""),[l,c]=N.useState("musician"),[o,d]=N.useState("general"),[h,u]=N.useState(""),{data:m}=ke({queryKey:["/api/users/managed-artists"]}),{data:p}=ke({queryKey:["/api/users/managed-musicians"]}),{data:g}=ke({queryKey:["/api/users/musicians"],enabled:l==="musician"}),{data:x}=ke({queryKey:["/api/users/unmanaged-professionals"],enabled:l==="professional"}),{data:v}=ke({queryKey:["/api/bookings/all"],enabled:o==="booking"}),{data:y,isLoading:f}=ke({queryKey:["/api/assignments/artist-musician"]}),b=[...(m||[]).map(A=>({...A,type:"artist"})),...(p||[]).map(A=>({...A,type:"musician"}))],j=l==="musician"?g:x,S=Xe({mutationFn:async A=>xe("POST","/api/assignments/artist-musician"),onSuccess:()=>{t({title:"Success",description:"Artist-Musician assignment created successfully"}),s.invalidateQueries({queryKey:["/api/assignments/artist-musician"]}),a(""),i(""),u("")},onError:A=>{t({title:"Error",description:A.message||"Failed to create assignment",variant:"destructive"})}}),k=Xe({mutationFn:async A=>xe("DELETE",`/api/assignments/artist-musician/${A}`),onSuccess:()=>{t({title:"Success",description:"Assignment removed successfully"}),s.invalidateQueries({queryKey:["/api/assignments/artist-musician"]})},onError:A=>{t({title:"Error",description:A.message||"Failed to remove assignment",variant:"destructive"})}}),T=()=>{if(!n||!r){t({title:"Missing Information",description:"Please select both managed talent and assignee",variant:"destructive"});return}if(o==="booking"&&!h){t({title:"Missing Information",description:"Please select a booking for booking-specific assignments",variant:"destructive"});return}S.mutate({managedTalentId:parseInt(n),assigneeId:parseInt(r),assignmentType:l,assignmentContext:o,bookingId:o==="booking"?parseInt(h):null})};return f?e.jsx("div",{className:"text-center py-8",children:"Loading artist-musician assignments..."}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs(R,{children:[e.jsxs(Y,{children:[e.jsxs(Q,{className:"flex items-center",children:[e.jsx(st,{className:"w-4 h-4 mr-2"}),"Assign Musicians & Professionals"]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Managed Artists/Musicians can assign musicians and unmanaged professionals to themselves or bookings"})]}),e.jsxs(L,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium",children:"Assignment Type"}),e.jsxs(Re,{value:l,onValueChange:A=>c(A),children:[e.jsx(Me,{children:e.jsx(Oe,{})}),e.jsxs(_e,{children:[e.jsx(U,{value:"musician",children:"Musician (Any)"}),e.jsx(U,{value:"professional",children:"Professional (Unmanaged)"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium",children:"Assignment Context"}),e.jsxs(Re,{value:o,onValueChange:A=>d(A),children:[e.jsx(Me,{children:e.jsx(Oe,{})}),e.jsxs(_e,{children:[e.jsx(U,{value:"general",children:"General Assignment"}),e.jsx(U,{value:"booking",children:"Specific Booking"})]})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium",children:"Managed Talent (Main)"}),e.jsxs(Re,{value:n,onValueChange:a,children:[e.jsx(Me,{children:e.jsx(Oe,{placeholder:"Select talent"})}),e.jsx(_e,{children:b.map(A=>e.jsxs(U,{value:A.id.toString(),children:[A.fullName," (",A.type,")"]},A.id))})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"text-sm font-medium",children:["Assign ",l==="musician"?"Musician":"Professional"]}),e.jsxs(Re,{value:r,onValueChange:i,children:[e.jsx(Me,{children:e.jsx(Oe,{placeholder:`Choose ${l}`})}),e.jsx(_e,{children:j==null?void 0:j.map(A=>e.jsx(U,{value:A.id.toString(),children:A.fullName},A.id))})]})]}),o==="booking"&&e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium",children:"Select Booking"}),e.jsxs(Re,{value:h,onValueChange:u,children:[e.jsx(Me,{children:e.jsx(Oe,{placeholder:"Choose booking"})}),e.jsx(_e,{children:v==null?void 0:v.map(A=>e.jsxs(U,{value:A.id.toString(),children:[A.eventName," - ",new Date(A.eventDate).toLocaleDateString()]},A.id))})]})]})]}),e.jsx("div",{className:"flex justify-end",children:e.jsxs(E,{onClick:T,disabled:S.isPending,className:"w-full md:w-auto",children:[e.jsx(ta,{className:"w-4 h-4 mr-2"}),"Create Assignment"]})})]})]}),e.jsxs(R,{children:[e.jsx(Y,{children:e.jsxs(Q,{className:"flex items-center",children:[e.jsx(Ue,{className:"w-4 h-4 mr-2"}),"Current Artist-Musician Assignments (",(y==null?void 0:y.length)||0,")"]})}),e.jsx(L,{children:(y==null?void 0:y.length)>0?e.jsx("div",{className:"space-y-3",children:y.map(A=>e.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"w-2 h-2 bg-primary rounded-full"}),e.jsxs("div",{children:[e.jsxs("p",{className:"font-medium",children:[A.managedTalentName,"  ",A.assigneeName]}),e.jsxs("div",{className:"flex items-center space-x-2 text-sm text-muted-foreground",children:[A.assignmentType==="musician"?e.jsx(Ue,{className:"w-3 h-3"}):e.jsx(Os,{className:"w-3 h-3"}),e.jsx("span",{className:"capitalize",children:A.assignmentType}),A.bookingName&&e.jsxs(e.Fragment,{children:[e.jsx("span",{children:""}),e.jsxs("span",{children:["Booking: ",A.bookingName]})]})]})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(X,{variant:"outline",className:"capitalize",children:A.assignmentContext}),e.jsx(E,{onClick:()=>k.mutate(A.id),disabled:k.isPending,variant:"ghost",size:"sm",children:e.jsx(Vt,{className:"w-4 h-4 text-red-500"})})]})]},A.id))}):e.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[e.jsx(Ue,{className:"w-12 h-12 mx-auto mb-4 opacity-50"}),e.jsx("p",{children:"No artist-musician assignments found"}),e.jsx("p",{className:"text-sm",children:"Create assignments to manage talent collaborations"})]})})]})]})}function D9({open:t,onOpenChange:s}){const{toast:n}=nt(),a=Tt(),[r,i]=N.useState("category"),[l,c]=N.useState(""),[o,d]=N.useState({name:"",description:"",basePrice:"",duration:"",unit:"session"}),{data:h,isLoading:u}=ke({queryKey:["/api/service-categories"],queryFn:async()=>{const y=await fetch("/api/service-categories");if(!y.ok)throw new Error("Failed to fetch categories");return(await y.json()).data||[]}}),m=Xe({mutationFn:async y=>{const f=await fetch("/api/services",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(y),credentials:"include"});if(!f.ok)throw new Error("Failed to create service");return f.json()},onSuccess:()=>{n({title:"Success",description:"New Wai'tuMusic service created successfully"}),a.invalidateQueries({queryKey:["/api/services/all"]}),p(),s(!1)},onError:y=>{n({title:"Error",description:y.message||"Failed to create service",variant:"destructive"})}}),p=()=>{i("category"),c(""),d({name:"",description:"",basePrice:"",duration:"",unit:"session"})},g=y=>{c(y),i("details")},x=()=>{if(!o.name||!o.description){n({title:"Missing Information",description:"Please fill in service name and description",variant:"destructive"});return}const y={name:o.name,description:o.description,categoryId:parseInt(l),basePrice:o.basePrice?parseFloat(o.basePrice):null,duration:o.duration?parseInt(o.duration):null,unit:o.unit};m.mutate(y)},v=h==null?void 0:h.find(y=>y.id.toString()===l);return e.jsx(kt,{open:t,onOpenChange:s,children:e.jsxs(wt,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[e.jsxs(St,{children:[e.jsxs(Ct,{className:"flex items-center gap-2",children:[e.jsx(st,{className:"w-5 h-5"}),"Create New Wai'tuMusic Service"]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Create a service that will be managed directly by Wai'tuMusic without user assignment"})]}),r==="category"&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(up,{className:"w-4 h-4"}),e.jsx("h3",{className:"font-medium",children:"Select Service Category"})]}),u?e.jsx("div",{className:"text-center py-8",children:"Loading categories..."}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:h==null?void 0:h.map(y=>e.jsx(R,{className:"cursor-pointer hover:bg-accent transition-colors",onClick:()=>g(y.id.toString()),children:e.jsx(L,{className:"p-4",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-lg flex items-center justify-center text-white",style:{backgroundColor:y.color||"#3B82F6"},children:e.jsx(Os,{className:"w-5 h-5"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"font-medium",children:y.name}),y.description&&e.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:y.description})]})]})})},y.id))}),e.jsx("div",{className:"flex justify-end pt-4",children:e.jsx(E,{variant:"outline",onClick:()=>s(!1),children:"Cancel"})})]}),r==="details"&&e.jsxs("div",{className:"space-y-6",children:[v&&e.jsx(R,{className:"bg-muted/50",children:e.jsx(L,{className:"p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-8 h-8 rounded-lg flex items-center justify-center text-white",style:{backgroundColor:v.color||"#3B82F6"},children:e.jsx(Os,{className:"w-4 h-4"})}),e.jsxs("div",{children:[e.jsx(X,{variant:"secondary",children:v.name}),e.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:v.description})]}),e.jsx(E,{variant:"ghost",size:"sm",onClick:()=>i("category"),className:"ml-auto",children:"Change Category"})]})})}),e.jsx(ss,{}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(q,{htmlFor:"service-name",children:"Service Name *"}),e.jsx($,{id:"service-name",value:o.name,onChange:y=>d(f=>({...f,name:y.target.value})),placeholder:"Enter service name"})]}),e.jsxs("div",{children:[e.jsx(q,{htmlFor:"service-description",children:"Service Description *"}),e.jsx(mt,{id:"service-description",value:o.description,onChange:y=>d(f=>({...f,description:y.target.value})),placeholder:"Describe what this service includes",rows:3})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsxs(q,{htmlFor:"service-price",className:"flex items-center gap-2",children:[e.jsx(It,{className:"w-4 h-4"}),"Base Price (USD)"]}),e.jsx($,{id:"service-price",type:"number",step:"0.01",value:o.basePrice,onChange:y=>d(f=>({...f,basePrice:y.target.value})),placeholder:"0.00"})]}),e.jsxs("div",{children:[e.jsxs(q,{htmlFor:"service-duration",className:"flex items-center gap-2",children:[e.jsx(Qt,{className:"w-4 h-4"}),"Duration"]}),e.jsx($,{id:"service-duration",type:"number",value:o.duration,onChange:y=>d(f=>({...f,duration:y.target.value})),placeholder:"60"})]}),e.jsxs("div",{children:[e.jsx(q,{htmlFor:"service-unit",children:"Unit"}),e.jsxs(Re,{value:o.unit,onValueChange:y=>d(f=>({...f,unit:y})),children:[e.jsx(Me,{children:e.jsx(Oe,{})}),e.jsxs(_e,{children:[e.jsx(U,{value:"session",children:"Per Session"}),e.jsx(U,{value:"hour",children:"Per Hour"}),e.jsx(U,{value:"day",children:"Per Day"}),e.jsx(U,{value:"week",children:"Per Week"}),e.jsx(U,{value:"month",children:"Per Month"}),e.jsx(U,{value:"project",children:"Per Project"})]})]})]})]})]}),e.jsx(ss,{}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx(E,{variant:"outline",onClick:()=>i("category"),children:"Back to Categories"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(E,{variant:"outline",onClick:()=>s(!1),children:"Cancel"}),e.jsx(E,{onClick:x,disabled:m.isPending,children:m.isPending?"Creating...":"Create Service"})]})]})]})]})})}function I9(){const{toast:t}=nt(),s=Tt(),[n,a]=N.useState(""),[r,i]=N.useState(""),[l,c]=N.useState(""),[o,d]=N.useState(!1),[h,u]=N.useState(!1),{data:m}=ke({queryKey:["/api/services/all"]}),{data:p}=ke({queryKey:["/api/users/managed"],enabled:!o}),{data:g,isLoading:x}=ke({queryKey:["/api/assignments/service"]}),v=Xe({mutationFn:async j=>xe("POST","/api/assignments/service"),onSuccess:()=>{t({title:"Success",description:"Service assignment created successfully"}),s.invalidateQueries({queryKey:["/api/assignments/service"]}),a(""),i(""),c(""),d(!1)},onError:j=>{t({title:"Error",description:j.message||"Failed to create service assignment",variant:"destructive"})}}),y=Xe({mutationFn:async j=>xe("DELETE",`/api/assignments/service/${j}`),onSuccess:()=>{t({title:"Success",description:"Service assignment removed successfully"}),s.invalidateQueries({queryKey:["/api/assignments/service"]})},onError:j=>{t({title:"Error",description:j.message||"Failed to remove service assignment",variant:"destructive"})}}),f=Xe({mutationFn:async j=>xe("POST","/api/services/waitumusic"),onSuccess:()=>{t({title:"Success",description:"Wai'tuMusic service created successfully"}),s.invalidateQueries({queryKey:["/api/services/all"]}),s.invalidateQueries({queryKey:["/api/assignments/service"]}),a("")},onError:j=>{t({title:"Error",description:j.message||"Failed to create Wai'tuMusic service",variant:"destructive"})}}),b=()=>{if(!n){t({title:"Missing Information",description:"Please select a service",variant:"destructive"});return}if(o){const j=m==null?void 0:m.find(S=>S.id.toString()===n);j&&f.mutate({serviceId:parseInt(n),serviceName:j.name,isWaituService:!0})}else{if(!r||!l){t({title:"Missing Information",description:"Please select talent and set their price",variant:"destructive"});return}v.mutate({serviceId:parseInt(n),assignedTalentId:parseInt(r),talentPrice:parseFloat(l),isWaituService:!1})}};return x?e.jsx("div",{className:"text-center py-8",children:"Loading service assignments..."}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs(R,{children:[e.jsxs(Y,{children:[e.jsxs(Q,{className:"flex items-center",children:[e.jsx(st,{className:"w-4 h-4 mr-2"}),"Assign Service or Create Wai'tuMusic Service"]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Assign managed talent to services with custom pricing, or create Wai'tuMusic services"})]}),e.jsxs(L,{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(gt,{id:"waitu-service",checked:o,onCheckedChange:d}),e.jsx("label",{htmlFor:"waitu-service",className:"text-sm font-medium",children:"Create Wai'tuMusic Service (no user assigned)"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium",children:"Select Service"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(Re,{value:n,onValueChange:a,children:[e.jsx(Me,{className:"flex-1",children:e.jsx(Oe,{placeholder:"Choose service"})}),e.jsx(_e,{children:m==null?void 0:m.map(j=>e.jsxs(U,{value:j.id.toString(),children:[j.name," - $",j.basePrice]},j.id))})]}),e.jsx(E,{variant:"outline",size:"sm",onClick:()=>u(!0),className:"whitespace-nowrap",children:"Create New"})]})]}),!o&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium",children:"Assign Managed Talent"}),e.jsxs(Re,{value:r,onValueChange:i,children:[e.jsx(Me,{children:e.jsx(Oe,{placeholder:"Choose talent"})}),e.jsx(_e,{children:p==null?void 0:p.map(j=>e.jsxs(U,{value:j.id.toString(),children:[j.fullName," (",j.role,")"]},j.id))})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium",children:"Talent Price ($)"}),e.jsx($,{type:"number",placeholder:"0.00",value:l,onChange:j=>c(j.target.value),min:"0",step:"0.01"}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"This will be added to the total service price"})]})]})]}),e.jsx("div",{className:"flex justify-end",children:e.jsx(E,{onClick:b,disabled:v.isPending||f.isPending,className:"w-full md:w-auto",children:o?e.jsxs(e.Fragment,{children:[e.jsx(Gt,{className:"w-4 h-4 mr-2"}),"Create Wai'tuMusic Service"]}):e.jsxs(e.Fragment,{children:[e.jsx(ta,{className:"w-4 h-4 mr-2"}),"Assign Talent to Service"]})})})]})]}),e.jsxs(R,{children:[e.jsx(Y,{children:e.jsxs(Q,{className:"flex items-center",children:[e.jsx(Os,{className:"w-4 h-4 mr-2"}),"Current Service Assignments (",(g==null?void 0:g.length)||0,")"]})}),e.jsx(L,{children:(g==null?void 0:g.length)>0?e.jsx("div",{className:"space-y-3",children:g.map(j=>e.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"w-2 h-2 bg-primary rounded-full"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:j.serviceName}),e.jsx("div",{className:"flex items-center space-x-2 text-sm text-muted-foreground",children:j.isWaituService?e.jsxs(e.Fragment,{children:[e.jsx(Gt,{className:"w-3 h-3"}),e.jsx("span",{children:"Wai'tuMusic Service"})]}):e.jsxs(e.Fragment,{children:[e.jsx(ta,{className:"w-3 h-3"}),e.jsx("span",{children:j.assignedTalentName}),e.jsx("span",{children:""}),e.jsx(It,{className:"w-3 h-3"}),e.jsxs("span",{children:["$",j.talentPrice]})]})})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(X,{variant:j.isWaituService?"default":"outline",children:j.isWaituService?"Wai'tuMusic":"Talent Assigned"}),e.jsx(E,{onClick:()=>y.mutate(j.id),disabled:y.isPending,variant:"ghost",size:"sm",children:e.jsx(Vt,{className:"w-4 h-4 text-red-500"})})]})]},j.id))}):e.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[e.jsx(Os,{className:"w-12 h-12 mx-auto mb-4 opacity-50"}),e.jsx("p",{children:"No service assignments found"}),e.jsx("p",{className:"text-sm",children:"Assign talent to services or create Wai'tuMusic services"})]})})]}),e.jsx(D9,{open:h,onOpenChange:u})]})}const L9=()=>{const{toast:t}=nt(),s=Tt(),[n,a]=N.useState(null),[r,i]=N.useState({assignedUserId:"",assignmentRole:""}),{data:l,isLoading:c}=ke({queryKey:["/api/bookings"],queryFn:async()=>await xe("/api/bookings")}),{data:o,isLoading:d}=ke({queryKey:["/api/users"],queryFn:async()=>await xe("/api/users")}),{data:h,isLoading:u}=ke({queryKey:["/api/booking-assignments",n],queryFn:async()=>n?await xe(`/api/booking-assignments?bookingId=${n}`):[],enabled:!!n}),{data:m}=ke({queryKey:["/api/assignment-stats"],queryFn:async()=>await xe("/api/assignment-stats")}),{data:p}=ke({queryKey:["/api/admin-assignments"],queryFn:async()=>await xe("/api/admin-assignments")}),{data:g}=ke({queryKey:["/api/artist-musician-assignments"],queryFn:async()=>await xe("/api/artist-musician-assignments")}),x=Xe({mutationFn:async j=>xe("/api/booking-assignments",{method:"POST",body:JSON.stringify(j)}),onSuccess:()=>{t({title:"Assignment Created",description:"Successfully assigned talent to booking"}),s.invalidateQueries({queryKey:["/api/booking-assignments"]}),s.invalidateQueries({queryKey:["/api/assignment-stats"]}),i({assignedUserId:"",assignmentRole:""})},onError:j=>{t({title:"Assignment Failed",description:j.message||"Failed to create assignment",variant:"destructive"})}}),v=Xe({mutationFn:async j=>xe(`/api/booking-assignments/${j}`,{method:"DELETE"}),onSuccess:()=>{t({title:"Assignment Removed",description:"Successfully removed assignment"}),s.invalidateQueries({queryKey:["/api/booking-assignments"]}),s.invalidateQueries({queryKey:["/api/assignment-stats"]})},onError:j=>{t({title:"Remove Failed",description:j.message||"Failed to remove assignment",variant:"destructive"})}}),y=()=>{if(!n||!r.assignedUserId||!r.assignmentRole){t({title:"Missing Information",description:"Please select booking, user, and role",variant:"destructive"});return}x.mutate({bookingId:n,assignedUserId:parseInt(r.assignedUserId),assignmentRole:r.assignmentRole})},f=j=>{switch(j.toLowerCase()){case"primary_artist":return"bg-blue-500";case"supporting_artist":return"bg-green-500";case"musician":return"bg-purple-500";case"backup_vocalist":return"bg-orange-500";default:return"bg-gray-500"}};if(c||d)return e.jsx("div",{className:"p-4",children:"Loading assignment management system..."});const b=Array.isArray(o)?o.filter(j=>[3,5,7].includes(j.roleId)):[];return e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ze,{className:"h-6 w-6"}),e.jsx("h1",{className:"text-2xl font-bold",children:"Multi-Booking Assignment Management"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4",children:[e.jsxs(R,{children:[e.jsx(Y,{className:"pb-2",children:e.jsx(Q,{className:"text-sm",children:"Total Assignments"})}),e.jsx(L,{children:e.jsx("div",{className:"text-2xl font-bold",children:(m==null?void 0:m.totalAssignments)||0})})]}),e.jsxs(R,{children:[e.jsx(Y,{className:"pb-2",children:e.jsx(Q,{className:"text-sm",children:"Admin Assignments"})}),e.jsx(L,{children:e.jsx("div",{className:"text-2xl font-bold text-blue-600",children:(m==null?void 0:m.adminAssignments)||0})})]}),e.jsxs(R,{children:[e.jsx(Y,{className:"pb-2",children:e.jsx(Q,{className:"text-sm",children:"Booking Assignments"})}),e.jsx(L,{children:e.jsx("div",{className:"text-2xl font-bold text-green-600",children:(m==null?void 0:m.bookingAssignments)||0})})]}),e.jsxs(R,{children:[e.jsx(Y,{className:"pb-2",children:e.jsx(Q,{className:"text-sm",children:"Talent Assignments"})}),e.jsx(L,{children:e.jsx("div",{className:"text-2xl font-bold text-purple-600",children:(m==null?void 0:m.artistMusicianAssignments)||0})})]}),e.jsxs(R,{children:[e.jsx(Y,{className:"pb-2",children:e.jsx(Q,{className:"text-sm",children:"Service Assignments"})}),e.jsx(L,{children:e.jsx("div",{className:"text-2xl font-bold text-orange-600",children:(m==null?void 0:m.serviceAssignments)||0})})]})]}),e.jsxs(R,{children:[e.jsxs(Y,{children:[e.jsx(Q,{children:"Multi-Booking Capabilities"}),e.jsx(rt,{children:"Assign multiple managed artists and musicians to single bookings"})]}),e.jsxs(L,{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(q,{htmlFor:"booking-select",children:"Select Booking"}),e.jsxs(Re,{value:(n==null?void 0:n.toString())||"",onValueChange:j=>a(parseInt(j)),children:[e.jsx(Me,{children:e.jsx(Oe,{placeholder:"Choose a booking..."})}),e.jsx(_e,{children:Array.isArray(l)?l.map(j=>e.jsxs(U,{value:j.id.toString(),children:[j.eventType," - ",new Date(j.eventDate).toLocaleDateString()," - ",j.venueLocation]},j.id)):[]})]})]}),n&&e.jsxs("div",{className:"space-y-2",children:[e.jsx("h3",{className:"font-semibold",children:"Current Assignments"}),u?e.jsx("p",{children:"Loading assignments..."}):h!=null&&h.length?e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2",children:h.map(j=>e.jsxs("div",{className:"flex items-center justify-between p-2 border rounded",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(X,{className:f(j.assignmentRole),children:j.assignmentRole.replace("_"," ")}),e.jsx("span",{className:"font-medium",children:j.assignedUserName})]}),e.jsx(E,{variant:"outline",size:"sm",onClick:()=>v.mutate(j.id),disabled:v.isPending,children:e.jsx(Vt,{className:"h-4 w-4"})})]},j.id))}):e.jsx("p",{className:"text-gray-500",children:"No assignments yet"})]}),n&&e.jsxs("div",{className:"space-y-2",children:[e.jsx("h3",{className:"font-semibold",children:"Add New Assignment"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-2",children:[e.jsxs("div",{children:[e.jsx(q,{children:"Select Managed Talent"}),e.jsxs(Re,{value:r.assignedUserId,onValueChange:j=>i(S=>({...S,assignedUserId:j})),children:[e.jsx(Me,{children:e.jsx(Oe,{placeholder:"Choose talent..."})}),e.jsx(_e,{children:b.map(j=>e.jsxs(U,{value:j.id.toString(),children:[j.fullName," (",j.role,")"]},j.id))})]})]}),e.jsxs("div",{children:[e.jsx(q,{children:"Assignment Role"}),e.jsxs(Re,{value:r.assignmentRole,onValueChange:j=>i(S=>({...S,assignmentRole:j})),children:[e.jsx(Me,{children:e.jsx(Oe,{placeholder:"Choose role..."})}),e.jsxs(_e,{children:[e.jsx(U,{value:"primary_artist",children:"Primary Artist"}),e.jsx(U,{value:"supporting_artist",children:"Supporting Artist"}),e.jsx(U,{value:"musician",children:"Musician"}),e.jsx(U,{value:"backup_vocalist",children:"Backup Vocalist"}),e.jsx(U,{value:"session_musician",children:"Session Musician"})]})]})]}),e.jsx("div",{className:"flex items-end",children:e.jsxs(E,{onClick:y,disabled:x.isPending,className:"w-full",children:[e.jsx(st,{className:"h-4 w-4 mr-2"}),"Add Assignment"]})})]})]})]})]}),e.jsxs(R,{children:[e.jsx(Y,{children:e.jsxs(Q,{className:"flex items-center gap-2",children:[e.jsx(ta,{className:"h-5 w-5"}),"Admin Assignments Overview"]})}),e.jsx(L,{children:p!=null&&p.length?e.jsxs("div",{className:"space-y-2",children:[p.slice(0,5).map(j=>e.jsxs("div",{className:"flex items-center justify-between p-2 bg-gray-50 rounded",children:[e.jsxs("span",{children:[e.jsx("strong",{children:j.adminName}),"  ",j.managedUserName]}),e.jsx(X,{variant:"outline",children:j.assignmentType})]},j.id)),p.length>5&&e.jsxs("p",{className:"text-sm text-gray-500",children:["...and ",p.length-5," more"]})]}):e.jsx("p",{className:"text-gray-500",children:"No admin assignments"})})]}),e.jsxs(R,{children:[e.jsx(Y,{children:e.jsxs(Q,{className:"flex items-center gap-2",children:[e.jsx(Ue,{className:"h-5 w-5"}),"Talent Collaboration Network"]})}),e.jsx(L,{children:g!=null&&g.length?e.jsxs("div",{className:"space-y-2",children:[g.slice(0,5).map(j=>e.jsxs("div",{className:"flex items-center justify-between p-2 bg-gray-50 rounded",children:[e.jsxs("span",{children:[e.jsx("strong",{children:j.talentName}),"  ",j.assigneeName]}),e.jsx(X,{variant:"outline",children:j.assignmentType})]},j.id)),g.length>5&&e.jsxs("p",{className:"text-sm text-gray-500",children:["...and ",g.length-5," more"]})]}):e.jsx("p",{className:"text-gray-500",children:"No talent assignments"})})]})]})},F9=fm("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),Ua=N.forwardRef(({className:t,variant:s,...n},a)=>e.jsx("div",{ref:a,role:"alert",className:Je(F9({variant:s}),t),...n}));Ua.displayName="Alert";const YT=N.forwardRef(({className:t,...s},n)=>e.jsx("h5",{ref:n,className:Je("mb-1 font-medium leading-none tracking-tight",t),...s}));YT.displayName="AlertTitle";const sr=N.forwardRef(({className:t,...s},n)=>e.jsx("div",{ref:n,className:Je("text-sm [&_p]:leading-relaxed",t),...s}));sr.displayName="AlertDescription";const q9=()=>{const{toast:t}=nt(),s=Tt(),[n,a]=N.useState(!1),[r,i]=N.useState(0);N.useState("scanner"),N.useState({categories:[],regions:[],compensationTypes:[],credibilityThreshold:80,managedTalentOnly:!1});const[l,c]=N.useState({targetMarkets:["United States","Canada","United Kingdom","Europe"],budget:5e4,strategy:"Multi-channel approach focusing on value proposition of consolidated opportunity discovery"}),{data:o,isLoading:d}=ke({queryKey:["/api/opphub/scan-status"],refetchInterval:n?5e3:3e4});ke({queryKey:["/api/opphub/sources"],refetchInterval:6e4}),ke({queryKey:["/api/opphub/statistics"],refetchInterval:3e4}),ke({queryKey:["/api/opphub/personalized-report"],refetchInterval:3e5});const h=Xe({mutationFn:()=>xe("/api/opphub/scan",{method:"POST"}),onSuccess:x=>{t({title:"AI Scanner Started",description:x.message,variant:"default"}),a(!0),i(0);const v=setInterval(()=>{i(y=>y>=95?(clearInterval(v),95):y+Math.random()*10)},2e3);setTimeout(()=>{a(!1),i(100),clearInterval(v),s.invalidateQueries({queryKey:["/api/opphub/scan-status"]}),s.invalidateQueries({queryKey:["/api/opportunities"]}),t({title:"Scan Complete",description:"OppHub has been populated with new opportunities!",variant:"default"})},12e4)},onError:x=>{t({title:"Scanner Error",description:x.message||"Failed to start AI scanner",variant:"destructive"}),a(!1),i(0)}}),u=Xe({mutationFn:x=>xe("/api/opphub/promote",{method:"POST",body:JSON.stringify(x)}),onSuccess:x=>{var v;t({title:"Promotion Campaign Started",description:`Self-promotion campaign initiated with projected reach of ${(v=x.projectedReach)==null?void 0:v.toLocaleString()} users`,variant:"default"})},onError:x=>{t({title:"Promotion Error",description:x.message||"Failed to start promotion campaign",variant:"destructive"})}}),m=()=>{h.mutate()},p=()=>{u.mutate(l)},g=x=>{const y={festivals:Ue,grants:la,sync_licensing:Es,competitions:la,showcases:Ze,collaborations:is}[x]||Es;return e.jsx(y,{className:"w-5 h-5"})};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("h2",{className:"text-3xl font-bold flex items-center gap-3",children:[e.jsx(ad,{className:"w-8 h-8 text-emerald-600"}),"OppHub AI Scanner"]}),e.jsx("p",{className:"text-gray-600",children:"Autonomous opportunity discovery and self-promotion system"})]}),e.jsx("div",{className:"flex gap-2",children:e.jsxs(E,{onClick:()=>s.invalidateQueries({queryKey:["/api/opphub/scan-status"]}),variant:"outline",size:"sm",children:[e.jsx(En,{className:"w-4 h-4 mr-2"}),"Refresh"]})})]}),e.jsxs(Ut,{defaultValue:"scanner",className:"space-y-6",children:[e.jsxs(jt,{className:"grid w-full grid-cols-3",children:[e.jsx(Ne,{value:"scanner",children:"AI Scanner"}),e.jsx(Ne,{value:"analytics",children:"Analytics"}),e.jsx(Ne,{value:"promotion",children:"Self-Promotion"})]}),e.jsxs(ge,{value:"scanner",className:"space-y-6",children:[e.jsxs(R,{children:[e.jsxs(Y,{children:[e.jsxs(Q,{className:"flex items-center gap-2",children:[e.jsx(Fu,{className:"w-5 h-5 text-emerald-600"}),"Web Scanning Control"]}),e.jsx(rt,{children:"AI-powered scanning of international music industry websites for opportunities"})]}),e.jsxs(L,{className:"space-y-4",children:[n&&e.jsxs(Ua,{className:"border-emerald-200 bg-emerald-50",children:[e.jsx(ad,{className:"h-4 w-4 text-emerald-600"}),e.jsxs(sr,{className:"text-emerald-800",children:["AI Scanner is currently running... Discovering new opportunities from ",(o==null?void 0:o.totalOpportunities)||0," sources worldwide."]})]}),n&&e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{children:"Scan Progress"}),e.jsxs("span",{children:[Math.round(r),"%"]})]}),e.jsx(qs,{value:r,className:"w-full"})]}),e.jsxs("div",{className:"flex gap-4",children:[e.jsxs(E,{onClick:m,disabled:n||h.isPending,className:"bg-gradient-to-r from-emerald-600 to-cyan-600",children:[e.jsx(Bs,{className:"w-4 h-4 mr-2"}),n?"Scanning...":"Start AI Scan"]}),e.jsxs("div",{className:"text-sm text-gray-600 flex items-center",children:[e.jsx(Qt,{className:"w-4 h-4 mr-1"}),"Last scan: ",o!=null&&o.lastScanTime?new Date(o.lastScanTime).toLocaleString():"Never"]})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 pt-4 border-t",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-emerald-600",children:(o==null?void 0:o.totalOpportunities)||0}),e.jsx("div",{className:"text-sm text-gray-600",children:"Total Opportunities"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-blue-600",children:(o==null?void 0:o.recentlyAdded)||0}),e.jsx("div",{className:"text-sm text-gray-600",children:"Recently Added"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-purple-600",children:Object.values((o==null?void 0:o.regionCounts)||{}).reduce((x,v)=>x+v,0)}),e.jsx("div",{className:"text-sm text-gray-600",children:"Global Regions"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-orange-600",children:Object.values((o==null?void 0:o.categoryCounts)||{}).reduce((x,v)=>x+v,0)}),e.jsx("div",{className:"text-sm text-gray-600",children:"Categories"})]})]})]})]}),e.jsxs(R,{children:[e.jsxs(Y,{children:[e.jsx(Q,{children:"Scanning Sources"}),e.jsx(rt,{children:"AI monitors these platforms for new opportunities"})]}),e.jsx(L,{children:e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[{name:"Sonicbids",category:"Festivals",region:"Global",status:"active"},{name:"Music Xray",category:"Sync Licensing",region:"Global",status:"active"},{name:"ASCAP Foundation",category:"Grants",region:"USA",status:"active"},{name:"BMI Foundation",category:"Grants",region:"USA",status:"active"},{name:"Arts Council England",category:"Grants",region:"UK",status:"active"},{name:"SubmitHub",category:"Showcases",region:"Global",status:"active"}].map((x,v)=>e.jsxs("div",{className:"border rounded-lg p-3 space-y-2",children:[e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsx("h4",{className:"font-medium",children:x.name}),e.jsx(X,{variant:x.status==="active"?"default":"secondary",children:x.status})]}),e.jsxs("div",{className:"text-sm text-gray-600",children:[e.jsxs("div",{className:"flex items-center gap-1 mb-1",children:[e.jsx(Es,{className:"w-3 h-3"}),x.category]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(Dn,{className:"w-3 h-3"}),x.region]})]})]},v))})})]})]}),e.jsx(ge,{value:"analytics",className:"space-y-6",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs(R,{children:[e.jsx(Y,{children:e.jsxs(Q,{className:"flex items-center gap-2",children:[e.jsx(wn,{className:"w-5 h-5"}),"Category Breakdown"]})}),e.jsx(L,{className:"space-y-4",children:o&&Object.entries(o.categoryCounts).map(([x,v])=>e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[g(x),e.jsx("span",{className:"capitalize",children:x.replace("_"," ")})]}),e.jsx(X,{variant:"outline",children:v})]},x))})]}),e.jsxs(R,{children:[e.jsx(Y,{children:e.jsxs(Q,{className:"flex items-center gap-2",children:[e.jsx(is,{className:"w-5 h-5"}),"Regional Distribution"]})}),e.jsx(L,{className:"space-y-4",children:o&&Object.entries(o.regionCounts).map(([x,v])=>e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Dn,{className:"w-4 h-4"}),x]}),e.jsx(X,{variant:"outline",children:v})]},x))})]})]})}),e.jsx(ge,{value:"promotion",className:"space-y-6",children:e.jsxs(R,{children:[e.jsxs(Y,{children:[e.jsxs(Q,{className:"flex items-center gap-2",children:[e.jsx(Is,{className:"w-5 h-5 text-emerald-600"}),"Self-Promotion Campaign"]}),e.jsx(rt,{children:"Autonomous marketing system to promote OppHub to target audiences"})]}),e.jsxs(L,{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Target Markets"}),e.jsx("div",{className:"space-y-2",children:l.targetMarkets.map((x,v)=>e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ct,{className:"w-4 h-4 text-green-600"}),e.jsx("span",{children:x})]},v))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Campaign Budget"}),e.jsx($,{type:"number",value:l.budget,onChange:x=>c(v=>({...v,budget:parseInt(x.target.value)})),className:"w-full"})]})]}),e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Strategy"}),e.jsx(mt,{value:l.strategy,onChange:x=>c(v=>({...v,strategy:x.target.value})),className:"min-h-32"})]})})]}),e.jsx("div",{className:"border-t pt-4",children:e.jsxs(E,{onClick:p,disabled:u.isPending,className:"bg-gradient-to-r from-emerald-600 to-cyan-600 w-full",children:[e.jsx(Fu,{className:"w-4 h-4 mr-2"}),u.isPending?"Launching Campaign...":"Launch Self-Promotion Campaign"]})}),e.jsxs(Ua,{className:"border-emerald-200 bg-emerald-50",children:[e.jsx(Is,{className:"h-4 w-4 text-emerald-600"}),e.jsxs(sr,{className:"text-emerald-800",children:[e.jsx("strong",{children:"Projected Impact:"})," 500,000+ potential users reached, 400% ROI, 6 months to market penetration"]})]})]})]})})]})]})};function $9({userRole:t,userId:s}){nt(),Tt();const[n,a]=N.useState("overview"),[r,i]=N.useState("all"),[l,c]=N.useState(""),[o,d]=N.useState(!1),[h,u]=N.useState(!1),m=["artist","musician","professional","managed_artist","managed_musician","managed_professional"].includes(t),p=t==="professional",g=["managed_artist","managed_musician","managed_professional","superadmin","admin"].includes(t),x=["superadmin","admin"].includes(t),{data:v=[],refetch:y}=ke({queryKey:["/api/opportunities",r],queryFn:async()=>{try{const S=new URLSearchParams;r!=="all"&&S.append("categoryId",r),S.append("status","published"),S.append("isVerified","true");const k=await fetch(`/api/opportunities?${S}`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});return k.ok?await k.json()||[]:[]}catch(S){return console.error("Failed to fetch opportunities:",S),[]}}}),{data:f=[]}=ke({queryKey:["/api/opportunity-categories"],queryFn:async()=>{try{const S=await fetch("/api/opportunity-categories",{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});return S.ok?await S.json()||[]:[]}catch(S){return console.error("Failed to fetch categories:",S),[]}}}),{data:b}=ke({queryKey:["/api/marketplace/subscription",s],queryFn:async()=>{try{const S=await fetch(`/api/marketplace/subscription/${s}`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});return S.ok?await S.json():null}catch(S){return console.error("Failed to fetch subscription:",S),null}},enabled:m}),j=S=>({Music:Ue,Acting:Vi,Film:qb,Television:qb,Modeling:Vi,"Voice-over":Ue,Dance:Rh,Theater:Rh,Writing:Os,"Digital Content":is,Collaborations:Ze,Competitions:Rh,"Grants & Funding":It,"Music Festivals":Ue,"PRO Services":Fo,Showcases:Rt,"Sync Licensing":is})[S]||Es;return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"text-center space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-center space-x-3",children:[e.jsxs("div",{className:"relative",children:[e.jsx(is,{className:"w-8 h-8 text-blue-600"}),e.jsx("div",{className:"absolute -top-1 -right-1 w-3 h-3 bg-green-400 rounded-full animate-pulse"})]}),e.jsx("h2",{className:"text-3xl font-bold bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent",children:"OppHub Marketplace"}),e.jsx(Rt,{className:"w-6 h-6 text-yellow-500"})]}),e.jsx("p",{className:"text-gray-600 max-w-2xl mx-auto",children:"Comprehensive opportunities marketplace connecting talent users with professional agents across all creative industries"})]}),e.jsxs(Ut,{value:n,onValueChange:a,className:"space-y-6",children:[e.jsxs(jt,{className:"grid w-full grid-cols-2 md:grid-cols-3",children:[e.jsxs(Ne,{value:"overview",className:"flex items-center space-x-2",children:[e.jsx(is,{className:"w-4 h-4"}),e.jsx("span",{className:"hidden sm:inline",children:"Overview"})]}),e.jsxs(Ne,{value:"opportunities",className:"flex items-center space-x-2",children:[e.jsx(Es,{className:"w-4 h-4"}),e.jsx("span",{className:"hidden sm:inline",children:"Opportunities"})]}),p&&e.jsxs(Ne,{value:"agent",className:"flex items-center space-x-2",children:[e.jsx(ta,{className:"w-4 h-4"}),e.jsx("span",{className:"hidden sm:inline",children:"Agent Panel"})]}),x&&e.jsxs(Ne,{value:"admin",className:"flex items-center space-x-2",children:[e.jsx(Bt,{className:"w-4 h-4"}),e.jsx("span",{className:"hidden sm:inline",children:"Admin"})]})]}),e.jsxs(ge,{value:"overview",className:"space-y-6",children:[m&&e.jsx(R,{className:"border-blue-200 bg-blue-50",children:e.jsx(L,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(Il,{className:"w-6 h-6 text-blue-600"}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-blue-900",children:"Marketplace Access"}),e.jsx("p",{className:"text-sm text-blue-700",children:b?`Active subscription - ${b.subscriptionTier} tier`:"No active subscription - Subscribe to access opportunities"})]})]}),!b&&e.jsx(E,{onClick:()=>u(!0),className:"bg-blue-600 hover:bg-blue-700",children:"Subscribe Now"})]})})}),e.jsxs(R,{children:[e.jsx(Y,{children:e.jsxs(Q,{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ns,{className:"w-5 h-5 text-gray-600"}),e.jsx("span",{children:"Recent Opportunities"})]}),e.jsxs(E,{onClick:()=>y(),variant:"outline",size:"sm",children:[e.jsx(En,{className:"w-4 h-4 mr-2"}),"Refresh"]})]})}),e.jsx(L,{children:e.jsxs("div",{className:"space-y-3",children:[v.slice(0,5).map(S=>{const k=f.find(A=>A.id===S.categoryId),T=j((k==null?void 0:k.name)||"");return e.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(T,{className:"w-5 h-5 text-blue-600"}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium",children:S.title}),e.jsx("p",{className:"text-sm text-gray-600",children:(k==null?void 0:k.name)||"General"})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[S.isVerified&&e.jsx(ct,{className:"w-4 h-4 text-green-500"}),e.jsx(X,{variant:"outline",children:S.compensationType||"TBD"}),g&&S.sourceUrl&&e.jsx(E,{size:"sm",variant:"outline",asChild:!0,children:e.jsxs("a",{href:S.sourceUrl,target:"_blank",rel:"noopener noreferrer",children:[e.jsx(zn,{className:"w-3 h-3 mr-1"}),"View Page"]})})]})]},S.id)}),v.length===0&&e.jsxs("div",{className:"text-center py-6 text-gray-500",children:[e.jsx(Es,{className:"w-8 h-8 mx-auto mb-2"}),e.jsx("p",{children:"No opportunities available"})]})]})})]})]}),e.jsxs(ge,{value:"opportunities",className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-wrap items-center gap-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Bs,{className:"w-4 h-4 text-gray-500"}),e.jsx($,{placeholder:"Search opportunities...",value:l,onChange:S=>c(S.target.value),className:"w-64"})]}),e.jsxs(Re,{value:r,onValueChange:i,children:[e.jsx(Me,{className:"w-48",children:e.jsx(Oe,{placeholder:"All categories"})}),e.jsxs(_e,{children:[e.jsx(U,{value:"all",children:"All Categories"}),f.map(S=>e.jsx(U,{value:S.id.toString(),children:S.name},S.id))]})]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:v.filter(S=>{var k;return l===""||S.title.toLowerCase().includes(l.toLowerCase())||((k=S.description)==null?void 0:k.toLowerCase().includes(l.toLowerCase()))}).map(S=>{const k=f.find(A=>A.id===S.categoryId),T=j((k==null?void 0:k.name)||"");return e.jsx(R,{className:"border-2 hover:border-blue-200 transition-colors",children:e.jsxs(L,{className:"p-4",children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(T,{className:"w-5 h-5 text-blue-600"}),e.jsx(X,{variant:"outline",children:(k==null?void 0:k.name)||"General"})]}),S.isVerified&&e.jsx(ct,{className:"w-4 h-4 text-green-500"})]}),e.jsx("h4",{className:"font-semibold mb-2",children:S.title}),e.jsx("p",{className:"text-sm text-gray-600 mb-3 line-clamp-2",children:S.description}),e.jsxs("div",{className:"space-y-2 text-xs text-gray-500",children:[S.location&&e.jsxs("div",{className:"flex items-center",children:[e.jsx(Dn,{className:"w-3 h-3 mr-1"}),S.location,S.isRemote&&e.jsx(X,{variant:"secondary",className:"ml-2 text-xs",children:"Remote OK"})]}),S.applicationDeadline&&e.jsxs("div",{className:"flex items-center",children:[e.jsx(dt,{className:"w-3 h-3 mr-1"}),"Deadline: ",new Date(S.applicationDeadline).toLocaleDateString()]}),S.compensationType&&e.jsxs("div",{className:"flex items-center",children:[e.jsx(It,{className:"w-3 h-3 mr-1"}),S.compensationType.replace("_"," "),S.compensation&&`: ${S.compensation}`]})]}),e.jsxs("div",{className:"flex items-center justify-between mt-4",children:[e.jsxs("div",{className:"flex items-center space-x-1 text-xs text-gray-500",children:[e.jsx(Ns,{className:"w-3 h-3"}),e.jsx("span",{children:S.viewCount||0}),e.jsx(Ze,{className:"w-3 h-3 ml-2"}),e.jsx("span",{children:S.applicationCount||0})]}),e.jsxs("div",{className:"flex space-x-2",children:[g&&S.sourceUrl&&e.jsx(E,{size:"sm",variant:"outline",asChild:!0,children:e.jsxs("a",{href:S.sourceUrl,target:"_blank",rel:"noopener noreferrer",children:[e.jsx(zn,{className:"w-3 h-3 mr-1"}),"View"]})}),e.jsx(E,{size:"sm",children:"Apply"})]})]})]})},S.id)})}),v.length===0&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx(Es,{className:"w-16 h-16 mx-auto mb-4 text-gray-400"}),e.jsx("h3",{className:"text-lg font-medium mb-2",children:"No opportunities found"}),e.jsx("p",{className:"text-gray-600 mb-4",children:"Try adjusting your search criteria or check back later"}),e.jsxs(E,{onClick:()=>y(),children:[e.jsx(En,{className:"w-4 h-4 mr-2"}),"Refresh Opportunities"]})]})]}),p&&e.jsxs(ge,{value:"agent",className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-2xl font-bold",children:"Agent Dashboard"}),e.jsx("p",{className:"text-gray-600",children:"Manage your opportunities and commissions"})]}),e.jsxs(E,{onClick:()=>d(!0),children:[e.jsx(st,{className:"w-4 h-4 mr-2"}),"Post Opportunity"]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsx(R,{children:e.jsxs(L,{className:"p-6 text-center",children:[e.jsx(Es,{className:"w-8 h-8 mx-auto mb-2 text-blue-600"}),e.jsx("div",{className:"text-2xl font-bold",children:"0"}),e.jsx("div",{className:"text-sm text-gray-600",children:"Opportunities Posted"})]})}),e.jsx(R,{children:e.jsxs(L,{className:"p-6 text-center",children:[e.jsx(Is,{className:"w-8 h-8 mx-auto mb-2 text-green-600"}),e.jsx("div",{className:"text-2xl font-bold",children:"0%"}),e.jsx("div",{className:"text-sm text-gray-600",children:"Success Rate"})]})}),e.jsx(R,{children:e.jsxs(L,{className:"p-6 text-center",children:[e.jsx(It,{className:"w-8 h-8 mx-auto mb-2 text-purple-600"}),e.jsx("div",{className:"text-2xl font-bold",children:"0%"}),e.jsx("div",{className:"text-sm text-gray-600",children:"Commission Rate"})]})}),e.jsx(R,{children:e.jsxs(L,{className:"p-6 text-center",children:[e.jsx(ns,{className:"w-8 h-8 mx-auto mb-2 text-yellow-600"}),e.jsx("div",{className:"text-2xl font-bold",children:"Standard"}),e.jsx("div",{className:"text-sm text-gray-600",children:"Agent Status"})]})})]}),e.jsxs(R,{children:[e.jsx(Y,{children:e.jsx(Q,{children:"Your Posted Opportunities"})}),e.jsx(L,{children:e.jsxs("div",{className:"text-center py-8 text-gray-500",children:[e.jsx(Es,{className:"w-12 h-12 mx-auto mb-4"}),e.jsx("p",{children:"No opportunities posted yet"}),e.jsx(E,{className:"mt-4",onClick:()=>d(!0),children:"Post Your First Opportunity"})]})})]})]}),x&&e.jsx(ge,{value:"admin",className:"space-y-6",children:e.jsxs("div",{className:"space-y-6",children:[e.jsx("h3",{className:"text-2xl font-bold",children:"Marketplace Administration"}),e.jsxs("div",{className:"text-center py-8 text-gray-500",children:[e.jsx(Fo,{className:"w-12 h-12 mx-auto mb-4"}),e.jsx("p",{children:"Admin controls coming soon"})]})]})})]}),e.jsx(kt,{open:h,onOpenChange:u,children:e.jsxs(wt,{children:[e.jsxs(St,{children:[e.jsx(Ct,{children:"Marketplace Subscription"}),e.jsx(us,{children:"Choose your subscription tier to access opportunities"})]}),e.jsx("div",{className:"space-y-4",children:e.jsx(R,{className:"border-2 border-blue-200",children:e.jsxs(L,{className:"p-4",children:[e.jsx("h4",{className:"font-semibold",children:"Standard Access"}),e.jsx("p",{className:"text-2xl font-bold",children:"$49.99/month"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Full marketplace access"}),g&&e.jsx(X,{className:"mt-2",children:"Management Tier Discount Applied"})]})})}),e.jsxs(hi,{children:[e.jsx(E,{variant:"outline",onClick:()=>u(!1),children:"Cancel"}),e.jsx(E,{children:"Subscribe Now"})]})]})}),e.jsx(kt,{open:o,onOpenChange:d,children:e.jsxs(wt,{className:"max-w-2xl",children:[e.jsxs(St,{children:[e.jsx(Ct,{children:"Post New Opportunity"}),e.jsx(us,{children:"Create a new opportunity for talent users to apply to"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Opportunity Title"}),e.jsx($,{placeholder:"Enter opportunity title..."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Description"}),e.jsx(mt,{placeholder:"Describe the opportunity...",rows:4})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Category"}),e.jsxs(Re,{children:[e.jsx(Me,{children:e.jsx(Oe,{placeholder:"Select category"})}),e.jsx(_e,{children:f.map(S=>e.jsx(U,{value:S.id.toString(),children:S.name},S.id))})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Compensation Type"}),e.jsxs(Re,{children:[e.jsx(Me,{children:e.jsx(Oe,{placeholder:"Select type"})}),e.jsxs(_e,{children:[e.jsx(U,{value:"paid",children:"Paid"}),e.jsx(U,{value:"unpaid",children:"Unpaid"}),e.jsx(U,{value:"revenue_share",children:"Revenue Share"}),e.jsx(U,{value:"exposure",children:"Exposure"})]})]})]})]})]}),e.jsxs(hi,{children:[e.jsx(E,{variant:"outline",onClick:()=>d(!1),children:"Cancel"}),e.jsx(E,{children:"Post Opportunity"})]})]})})]})}function B9(){const[t,s]=N.useState(null),[n,a]=N.useState(!1),[r,i]=N.useState(""),[l,c]=N.useState("all"),[o,d]=N.useState("all"),h=Tt(),{data:u=[],isLoading:m}=ke({queryKey:["/api/opportunities"],queryFn:()=>xe("/api/opportunities")}),p=Array.isArray(u)?u:[],{data:g=[]}=ke({queryKey:["/api/opportunity-categories"],queryFn:()=>xe("/api/opportunity-categories")}),x=Xe({mutationFn:A=>xe(`/api/opportunities/${A.id}`,{method:"PATCH",body:A.updates}),onSuccess:()=>{h.invalidateQueries({queryKey:["/api/opportunities"]}),a(!1)}}),v=Xe({mutationFn:A=>xe(`/api/opportunities/${A}`,{method:"DELETE"}),onSuccess:()=>{h.invalidateQueries({queryKey:["/api/opportunities"]})}}),y=p.filter(A=>{const C=A.title.toLowerCase().includes(r.toLowerCase())||A.description.toLowerCase().includes(r.toLowerCase())||(A.organizer_name||A.source).toLowerCase().includes(r.toLowerCase()),w=l==="all"||A.verification_status===l,P=o==="all"||o==="high"&&(A.credibility_score||0)>=80||o==="medium"&&(A.credibility_score||0)>=60&&(A.credibility_score||0)<80||o==="low"&&(A.credibility_score||0)<60;return C&&w&&P}),f=(A=0)=>A>=80?e.jsxs(X,{className:"bg-green-100 text-green-800",children:["High (",A,")"]}):A>=60?e.jsxs(X,{className:"bg-yellow-100 text-yellow-800",children:["Medium (",A,")"]}):e.jsxs(X,{className:"bg-red-100 text-red-800",children:["Low (",A,")"]}),b=(A="pending")=>{const C={ai_verified:e.jsxs(X,{className:"bg-blue-100 text-blue-800",children:[e.jsx(Bt,{className:"w-3 h-3 mr-1"}),"AI Verified"]}),manually_verified:e.jsxs(X,{className:"bg-green-100 text-green-800",children:[e.jsx(ct,{className:"w-3 h-3 mr-1"}),"Verified"]}),pending:e.jsxs(X,{className:"bg-gray-100 text-gray-800",children:[e.jsx(ys,{className:"w-3 h-3 mr-1"}),"Pending"]}),flagged:e.jsx(X,{className:"bg-red-100 text-red-800",children:"Flagged"})};return C[A]||C.pending},j=(A=1)=>{const C=g.find(w=>w.id===A);return(C==null?void 0:C.name)||"General"},S=A=>{s(A),a(!0)},k=(A,C)=>{x.mutate({id:A,updates:{credibility_score:C}})},T=(A,C)=>{x.mutate({id:A,updates:{verification_status:C}})};return m?e.jsx("div",{className:"flex justify-center items-center h-64",children:"Loading opportunities..."}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold",children:"Opportunity Management"}),e.jsx("p",{className:"text-gray-600",children:"Review, verify, and manage discovered opportunities"})]}),e.jsxs("div",{className:"text-sm text-gray-500",children:[y.length," of ",p.length," opportunities"]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs("div",{children:[e.jsx(q,{htmlFor:"search",children:"Search"}),e.jsxs("div",{className:"relative",children:[e.jsx(Bs,{className:"absolute left-3 top-3 h-4 w-4 text-gray-400"}),e.jsx($,{id:"search",placeholder:"Search opportunities...",value:r,onChange:A=>i(A.target.value),className:"pl-10"})]})]}),e.jsxs("div",{children:[e.jsx(q,{children:"Verification Status"}),e.jsxs(Re,{value:l,onValueChange:c,children:[e.jsx(Me,{children:e.jsx(Oe,{})}),e.jsxs(_e,{children:[e.jsx(U,{value:"all",children:"All Statuses"}),e.jsx(U,{value:"ai_verified",children:"AI Verified"}),e.jsx(U,{value:"manually_verified",children:"Manually Verified"}),e.jsx(U,{value:"pending",children:"Pending"}),e.jsx(U,{value:"flagged",children:"Flagged"})]})]})]}),e.jsxs("div",{children:[e.jsx(q,{children:"Credibility Score"}),e.jsxs(Re,{value:o,onValueChange:d,children:[e.jsx(Me,{children:e.jsx(Oe,{})}),e.jsxs(_e,{children:[e.jsx(U,{value:"all",children:"All Scores"}),e.jsx(U,{value:"high",children:"High (80+)"}),e.jsx(U,{value:"medium",children:"Medium (60-79)"}),e.jsx(U,{value:"low",children:"Low (<60)"})]})]})]}),e.jsx("div",{className:"flex items-end",children:e.jsxs(E,{variant:"outline",className:"w-full",children:[e.jsx(Ns,{className:"w-4 h-4 mr-2"}),"Scan Status"]})})]}),e.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 xl:grid-cols-3 gap-6",children:y.map(A=>e.jsxs(R,{className:"hover:shadow-md transition-shadow",children:[e.jsxs(Y,{className:"pb-3",children:[e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsx(Q,{className:"text-lg line-clamp-2",children:A.title}),e.jsx("div",{className:"flex gap-1",children:f(A.credibility_score)})]}),e.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[e.jsx("span",{children:A.organizer_name||A.source}),b(A.verification_status)]})]}),e.jsxs(L,{className:"space-y-3",children:[e.jsx("p",{className:"text-sm text-gray-700 line-clamp-3",children:A.description}),e.jsxs("div",{className:"grid grid-cols-2 gap-2 text-xs",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(Dn,{className:"w-3 h-3"}),e.jsx("span",{className:"truncate",children:A.location||"Various"})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(It,{className:"w-3 h-3"}),e.jsx("span",{children:A.amount||"0"})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(dt,{className:"w-3 h-3"}),e.jsx("span",{children:new Date(A.deadline).toLocaleDateString()})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(Rt,{className:"w-3 h-3"}),e.jsx("span",{children:j(A.category_id)})]})]}),A.tags&&e.jsx("div",{className:"flex flex-wrap gap-1",children:A.tags.split(",").slice(0,3).map((C,w)=>e.jsx(X,{variant:"secondary",className:"text-xs",children:C.trim()},w))}),e.jsxs("div",{className:"flex gap-2 pt-2",children:[e.jsxs(E,{size:"sm",variant:"outline",onClick:()=>S(A),children:[e.jsx(Ns,{className:"w-3 h-3 mr-1"}),"Details"]}),e.jsx(E,{size:"sm",variant:"outline",asChild:!0,children:e.jsxs("a",{href:A.url,target:"_blank",rel:"noopener noreferrer",children:[e.jsx(zn,{className:"w-3 h-3 mr-1"}),"Source"]})}),e.jsx(E,{size:"sm",variant:"outline",className:"text-red-600 hover:text-red-700",onClick:()=>v.mutate(A.id),children:e.jsx(Vt,{className:"w-3 h-3"})})]})]})]},A.id))}),e.jsx(kt,{open:n,onOpenChange:a,children:e.jsx(wt,{className:"max-w-4xl max-h-[90vh] overflow-y-auto",children:t&&e.jsxs(e.Fragment,{children:[e.jsxs(St,{children:[e.jsx(Ct,{className:"text-xl",children:t.title}),e.jsxs("div",{className:"flex gap-2",children:[f(t.credibility_score),b(t.verification_status)]})]}),e.jsxs(Ut,{defaultValue:"details",className:"w-full",children:[e.jsxs(jt,{className:"grid w-full grid-cols-4",children:[e.jsx(Ne,{value:"details",children:"Details"}),e.jsx(Ne,{value:"contact",children:"Contact"}),e.jsx(Ne,{value:"application",children:"Application"}),e.jsx(Ne,{value:"admin",children:"Admin"})]}),e.jsxs(ge,{value:"details",className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(q,{children:"Description"}),e.jsx("p",{className:"mt-1 p-3 bg-gray-50 rounded-md",children:t.description})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(q,{children:"Source"}),e.jsx("p",{className:"mt-1",children:t.source})]}),e.jsxs("div",{children:[e.jsx(q,{children:"Organizer"}),e.jsx("p",{className:"mt-1",children:t.organizer_name||"Not specified"})]}),e.jsxs("div",{children:[e.jsx(q,{children:"Location"}),e.jsx("p",{className:"mt-1",children:t.location||"Various locations"})]}),e.jsxs("div",{children:[e.jsx(q,{children:"Compensation"}),e.jsxs("p",{className:"mt-1",children:[t.compensation_type," - ",t.amount]})]})]}),e.jsxs("div",{children:[e.jsx(q,{children:"Requirements"}),e.jsx("p",{className:"mt-1 p-3 bg-gray-50 rounded-md",children:t.requirements})]})]}),e.jsx(ge,{value:"contact",className:"space-y-4",children:e.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(vn,{className:"w-5 h-5 text-gray-400"}),e.jsxs("div",{children:[e.jsx(q,{children:"Email"}),e.jsx("p",{className:"text-sm",children:t.contact_email||"Not provided"})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(op,{className:"w-5 h-5 text-gray-400"}),e.jsxs("div",{children:[e.jsx(q,{children:"Phone"}),e.jsx("p",{className:"text-sm",children:t.contact_phone||"Not provided"})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(zn,{className:"w-5 h-5 text-gray-400"}),e.jsxs("div",{children:[e.jsx(q,{children:"Source URL"}),e.jsx("a",{href:t.url,target:"_blank",rel:"noopener noreferrer",className:"text-sm text-blue-600 hover:underline",children:t.url})]})]})]})}),e.jsxs(ge,{value:"application",className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(q,{children:"Application Process"}),e.jsx("div",{className:"mt-1 p-3 bg-gray-50 rounded-md whitespace-pre-line",children:t.application_process||"No specific process provided"})]}),e.jsxs("div",{children:[e.jsx(q,{children:"Deadline"}),e.jsx("p",{className:"mt-1",children:new Date(t.deadline).toLocaleDateString()})]}),t.tags&&e.jsxs("div",{children:[e.jsx(q,{children:"Tags"}),e.jsx("div",{className:"mt-1 flex flex-wrap gap-1",children:t.tags.split(",").map((A,C)=>e.jsx(X,{variant:"secondary",children:A.trim()},C))})]})]}),e.jsxs(ge,{value:"admin",className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(q,{children:"Credibility Score"}),e.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[e.jsxs("span",{className:"text-lg font-semibold",children:[t.credibility_score,"/100"]}),e.jsx(E,{size:"sm",variant:"outline",onClick:()=>k(t.id,Math.min((t.credibility_score||0)+10,100)),children:"+10"}),e.jsx(E,{size:"sm",variant:"outline",onClick:()=>k(t.id,Math.max((t.credibility_score||0)-10,0)),children:"-10"})]})]}),e.jsxs("div",{children:[e.jsx(q,{children:"Verification Status"}),e.jsxs(Re,{value:t.verification_status||"pending",onValueChange:A=>T(t.id,A),children:[e.jsx(Me,{className:"mt-1",children:e.jsx(Oe,{})}),e.jsxs(_e,{children:[e.jsx(U,{value:"pending",children:"Pending"}),e.jsx(U,{value:"ai_verified",children:"AI Verified"}),e.jsx(U,{value:"manually_verified",children:"Manually Verified"}),e.jsx(U,{value:"flagged",children:"Flagged"})]})]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm text-gray-600",children:[e.jsxs("div",{children:[e.jsx(q,{children:"Discovery Method"}),e.jsx("p",{className:"mt-1",children:t.discovery_method})]}),e.jsxs("div",{children:[e.jsx(q,{children:"Relevance Score"}),e.jsx("p",{className:"mt-1",children:t.relevance_score})]}),e.jsxs("div",{children:[e.jsx(q,{children:"Created"}),e.jsx("p",{className:"mt-1",children:new Date(t.created_at).toLocaleString()})]}),e.jsxs("div",{children:[e.jsx(q,{children:"Updated"}),e.jsx("p",{className:"mt-1",children:new Date(t.updated_at).toLocaleString()})]})]})]})]})]})})})]})}function QT(){const[t,s]=N.useState("matches"),n=Tt(),{data:a,isLoading:r,refetch:i}=ke({queryKey:["/api/opportunity-matching/recommendations"],queryFn:async()=>{const g=await xe("/api/opportunity-matching/recommendations",{method:"POST"});return g&&g.success?{matches:g.matches||[],insights:g.insights||[],next_actions:g.next_actions||[],profile_tips:g.profile_tips||[],user_id:g.user_id||0,generated_at:g.generated_at||new Date().toISOString()}:{matches:[],insights:[],next_actions:[],profile_tips:[],user_id:0,generated_at:new Date().toISOString()}},refetchInterval:3e5}),{data:l,isLoading:c}=ke({queryKey:["/api/opportunity-matching/profile-score"],queryFn:async()=>{try{const g=await xe("/api/opportunity-matching/profile-score/me");return g&&g.success?{success:g.success,profile_completeness:g.profile_completeness||0,user_profile:g.user_profile||{},managed_status:g.managed_status||!1,experience_level:g.experience_level||"beginner"}:{success:!1,profile_completeness:0,user_profile:{},managed_status:!1,experience_level:"beginner"}}catch{return{success:!1,profile_completeness:0,user_profile:{},managed_status:!1,experience_level:"beginner"}}}}),o=a&&a.matches?a:{matches:[],insights:[],next_actions:[],profile_tips:[],user_id:0,generated_at:new Date().toISOString()},d=l&&typeof l.profile_completeness=="number"?l:{success:!1,profile_completeness:0,user_profile:{},managed_status:!1,experience_level:"beginner"};console.log("OpportunityMatcher Fixed API Response Data:",{recommendations:a,profileScore:l,safeRecommendations:o,safeProfileScore:d,recommendationsLoading:r,profileLoading:c,bothLoading:r&&c});const h=g=>g>=90?"text-green-600 bg-green-100":g>=75?"text-blue-600 bg-blue-100":g>=60?"text-yellow-600 bg-yellow-100":"text-gray-600 bg-gray-100",u=g=>g>=90?e.jsx(X,{className:"bg-green-100 text-green-800",children:"High Trust"}):g>=80?e.jsx(X,{className:"bg-blue-100 text-blue-800",children:"Verified"}):g>=70?e.jsx(X,{className:"bg-yellow-100 text-yellow-800",children:"Good"}):e.jsx(X,{className:"bg-gray-100 text-gray-800",children:"Standard"}),m=g=>{const x=new Date(g),v=new Date,y=Math.ceil((x.getTime()-v.getTime())/(1e3*60*60*24));return y<0?"Expired":y===0?"Today":y===1?"Tomorrow":y<=7?`${y} days`:x.toLocaleDateString()},p=()=>{i(),n.invalidateQueries({queryKey:["/api/opportunity-matching"]})};return r&&c?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin w-8 h-8 border-4 border-primary border-t-transparent rounded-full mx-auto mb-4"}),e.jsx("p",{children:"Finding your perfect opportunities..."})]})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsx(R,{children:e.jsxs(L,{className:"p-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Profile Completeness"}),e.jsxs("p",{className:"text-2xl font-bold",children:[d.profile_completeness||0,"%"]})]}),e.jsx(cn,{className:"h-8 w-8 text-blue-500"})]}),e.jsx(qs,{value:d.profile_completeness||0,className:"mt-2"})]})}),e.jsx(R,{children:e.jsxs(L,{className:"p-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Quality Matches"}),e.jsx("p",{className:"text-2xl font-bold",children:o.matches.length})]}),e.jsx(Es,{className:"h-8 w-8 text-green-500"})]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"60%+ compatibility"})]})}),e.jsx(R,{children:e.jsxs(L,{className:"p-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Status"}),e.jsx("p",{className:"text-lg font-semibold text-green-600",children:d.managed_status?"Managed":"Independent"})]}),e.jsx(la,{className:"h-8 w-8 text-purple-500"})]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:d.experience_level||"Getting started"})]})})]}),e.jsxs(Ut,{value:t,onValueChange:s,children:[e.jsxs(jt,{className:"grid w-full grid-cols-4",children:[e.jsxs(Ne,{value:"matches",children:["Matches (",o.matches.length,")"]}),e.jsx(Ne,{value:"insights",children:"Insights"}),e.jsx(Ne,{value:"actions",children:"Actions"}),e.jsx(Ne,{value:"profile",children:"Profile Tips"})]}),e.jsxs(ge,{value:"matches",className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Your Opportunity Matches"}),e.jsxs(E,{variant:"outline",onClick:p,children:[e.jsx(Is,{className:"w-4 h-4 mr-2"}),"Refresh"]})]}),o.matches.length===0?e.jsx(R,{children:e.jsxs(L,{className:"p-6 text-center",children:[e.jsx(on,{className:"h-12 w-12 mx-auto mb-4 text-yellow-500"}),e.jsx("h3",{className:"text-lg font-medium mb-2",children:"No High-Quality Matches Found"}),e.jsx("p",{className:"text-gray-600 mb-4",children:"Complete your profile or check back later for new opportunities"})]})}):e.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:o.matches.map(g=>e.jsxs(R,{className:"hover:shadow-md transition-shadow",children:[e.jsxs(Y,{className:"pb-3",children:[e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsx(Q,{className:"text-lg line-clamp-2",children:g.opportunity_title}),e.jsxs(X,{className:`ml-2 ${h(g.match_score)}`,children:[g.match_score,"% Match"]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-sm text-gray-600",children:g.organizer_name}),u(g.credibility_score)]})]}),e.jsxs(L,{className:"space-y-4",children:[e.jsx("p",{className:"text-sm text-gray-700 line-clamp-3",children:g.opportunity_description}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-medium text-gray-600 mb-1",children:"Why this matches:"}),e.jsx("div",{className:"space-y-1",children:(g.match_reasons||[]).slice(0,3).map((x,v)=>e.jsxs("div",{className:"flex items-center text-xs text-gray-600",children:[e.jsx(ct,{className:"w-3 h-3 mr-1 text-green-500"}),x]},v))})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2 text-xs",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(Dn,{className:"w-3 h-3"}),e.jsx("span",{className:"truncate",children:g.location})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(It,{className:"w-3 h-3"}),e.jsxs("span",{children:[g.compensation_type," - ",g.amount]})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(Qt,{className:"w-3 h-3"}),e.jsx("span",{children:m(g.deadline)})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(Rt,{className:"w-3 h-3"}),e.jsx("span",{children:g.category})]})]}),e.jsxs("div",{className:"flex gap-2 pt-2",children:[e.jsxs(E,{size:"sm",className:"flex-1",children:[e.jsx(vn,{className:"w-3 h-3 mr-1"}),"Contact"]}),e.jsx(E,{size:"sm",variant:"outline",asChild:!0,children:e.jsxs("a",{href:g.url,target:"_blank",rel:"noopener noreferrer",children:[e.jsx(zn,{className:"w-3 h-3 mr-1"}),"Source"]})})]})]})]},g.opportunity_id))})]}),e.jsx(ge,{value:"insights",className:"space-y-4",children:e.jsxs(R,{children:[e.jsx(Y,{children:e.jsxs(Q,{className:"flex items-center",children:[e.jsx(Bl,{className:"h-5 w-5 mr-2"}),"Your Opportunity Insights"]})}),e.jsx(L,{children:e.jsx("div",{className:"space-y-3",children:(o.insights||[]).map((g,x)=>e.jsxs("div",{className:"flex items-start gap-3 p-3 bg-blue-50 rounded-lg",children:[e.jsx(Is,{className:"h-5 w-5 text-blue-600 mt-0.5"}),e.jsx("p",{className:"text-sm",children:g})]},x))})})]})}),e.jsx(ge,{value:"actions",className:"space-y-4",children:e.jsxs(R,{children:[e.jsx(Y,{children:e.jsxs(Q,{className:"flex items-center",children:[e.jsx(Qa,{className:"h-5 w-5 mr-2"}),"Recommended Actions"]})}),e.jsx(L,{children:e.jsx("div",{className:"space-y-3",children:(o.next_actions||[]).map((g,x)=>e.jsxs("div",{className:"flex items-start gap-3 p-3 bg-green-50 rounded-lg",children:[e.jsx(ct,{className:"h-5 w-5 text-green-600 mt-0.5"}),e.jsx("p",{className:"text-sm",children:g})]},x))})})]})}),e.jsx(ge,{value:"profile",className:"space-y-4",children:e.jsxs(R,{children:[e.jsx(Y,{children:e.jsxs(Q,{className:"flex items-center",children:[e.jsx(cn,{className:"h-5 w-5 mr-2"}),"Profile Improvement Tips"]})}),e.jsx(L,{children:e.jsx("div",{className:"space-y-3",children:(o.profile_tips||[]).map((g,x)=>e.jsxs("div",{className:"flex items-start gap-3 p-3 bg-yellow-50 rounded-lg",children:[e.jsx(Rt,{className:"h-5 w-5 text-yellow-600 mt-0.5"}),e.jsx("p",{className:"text-sm",children:g})]},x))})})]})})]}),e.jsxs("div",{className:"text-center text-xs text-gray-500",children:["Last updated: ",new Date(o.generated_at).toLocaleString()]})]})}const U9=()=>{const{data:t}=ke({queryKey:["/api/admin/config"],staleTime:6e4});return t},z9=t=>{var s,n;return(n=(s=t==null?void 0:t.ui)==null?void 0:s.toast)!=null&&n.duration?t.ui.toast.duration:2e3},V9=()=>{const{toast:t}=nt(),s=U9();return{toast:a=>{const r=z9(s);return t({...a,duration:a.duration??r})}}};function $w(){const{toast:t}=V9(),s=Tt(),{data:n,isLoading:a,error:r}=ke({queryKey:["/api/demo-mode"],refetchInterval:3e4}),i=Xe({mutationFn:()=>xe("POST","/api/demo-mode/toggle"),onSuccess:c=>{s.invalidateQueries({queryKey:["/api/demo-mode"]}),s.invalidateQueries({queryKey:["/api/artists"]}),s.invalidateQueries({queryKey:["/api/songs"]}),s.invalidateQueries({queryKey:["/api/dashboard/stats"]}),t({title:"Demo Mode Updated",description:c.message})},onError:c=>{t({title:"Error",description:c.message||"Failed to toggle demo mode",variant:"destructive"})}}),l=Xe({mutationFn:()=>xe("POST","/api/seed-live-data"),onSuccess:c=>{s.invalidateQueries({queryKey:["/api/demo-mode"]}),s.invalidateQueries({queryKey:["/api/artists"]}),s.invalidateQueries({queryKey:["/api/songs"]}),t({title:"Live Data Seeded",description:`Successfully seeded authentic data for ${c.artists.join(", ")}`})},onError:c=>{t({title:"Seeding Error",description:c.message||"Failed to seed live artist data",variant:"destructive"})}});return a?e.jsx(R,{children:e.jsx(L,{className:"p-6",children:e.jsx("div",{className:"animate-pulse",children:"Loading demo mode status..."})})}):r?e.jsx(R,{children:e.jsx(L,{className:"p-6",children:e.jsx("div",{className:"text-red-600",children:"Error loading demo mode status"})})}):e.jsxs(R,{children:[e.jsxs(Y,{children:[e.jsxs(Q,{className:"flex items-center gap-2",children:[n!=null&&n.demoMode?e.jsx(Ns,{className:"h-5 w-5 text-blue-600"}):e.jsx(j6,{className:"h-5 w-5 text-green-600"}),"Demo Mode Control"]}),e.jsx(rt,{children:"Control visibility between authentic managed artist data and demo accounts"})]}),e.jsxs(L,{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(X,{variant:n!=null&&n.demoMode?"secondary":"default",children:n!=null&&n.demoMode?"Demo Mode":"Live Mode"}),e.jsx("span",{className:"text-sm text-gray-600",children:n==null?void 0:n.message})]}),e.jsx(gt,{checked:(n==null?void 0:n.demoMode)||!1,onCheckedChange:()=>i.mutate(),disabled:i.isPending})]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"p-4 border rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(Ze,{className:"h-4 w-4 text-blue-600"}),e.jsx("h4",{className:"font-medium",children:"Demo Data"})]}),e.jsx("p",{className:"text-sm text-gray-600 mb-2",children:"Sample accounts for platform demonstration"}),e.jsx(X,{variant:"secondary",children:"Multiple demo accounts"})]}),e.jsxs("div",{className:"p-4 border rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(Ue,{className:"h-4 w-4 text-green-600"}),e.jsx("h4",{className:"font-medium",children:"Live Data"})]}),e.jsx("p",{className:"text-sm text-gray-600 mb-2",children:"Authentic managed artist profiles"}),e.jsxs("div",{className:"space-y-1",children:[e.jsx(X,{variant:"outline",className:"mr-1",children:"L-L Octave"}),e.jsx(X,{variant:"outline",className:"mr-1",children:"JCro"}),e.jsx(X,{variant:"outline",className:"mr-1",children:"Janet Azzouz"}),e.jsx(X,{variant:"outline",children:"Princess Trinidad"})]})]})]}),e.jsxs("div",{className:"p-4 bg-blue-50 border border-blue-200 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(Jn,{className:"h-4 w-4 text-blue-600"}),e.jsx("h4",{className:"font-medium",children:"Currently Showing:"})]}),e.jsx("p",{className:"text-sm text-blue-800",children:n==null?void 0:n.availableArtists})]}),e.jsxs("div",{className:"space-y-3 pt-4 border-t",children:[e.jsx("h4",{className:"font-medium",children:"Management Actions"}),e.jsx(E,{onClick:()=>l.mutate(),disabled:l.isPending,variant:"outline",className:"w-full",children:l.isPending?"Seeding Live Data...":"Seed Live Artist Data"}),e.jsx("p",{className:"text-xs text-gray-500",children:"This will populate the database with authentic data for the four managed artists: L-L Octave, JCro, Janet Azzouz, and Princess Trinidad."})]}),e.jsxs("div",{className:"text-xs text-gray-500 pt-2 border-t",children:[e.jsx("h5",{className:"font-medium mb-1",children:"Demo Mode Features:"}),e.jsxs("ul",{className:"space-y-1",children:[e.jsx("li",{children:" Switch between authentic managed artist data and demo accounts"}),e.jsx("li",{children:" Impressive live demonstrations with real artist achievements"}),e.jsx("li",{children:" Complete artist profiles with authentic discographies"}),e.jsx("li",{children:" Perfect for showcasing platform capabilities to industry professionals"})]})]})]})]})}function G9(){this.__data__=[],this.size=0}var W9=G9;function H9(t,s){return t===s||t!==t&&s!==s}var ZT=H9,K9=ZT;function Y9(t,s){for(var n=t.length;n--;)if(K9(t[n][0],s))return n;return-1}var Hp=Y9,Q9=Hp,Z9=Array.prototype,X9=Z9.splice;function J9(t){var s=this.__data__,n=Q9(s,t);if(n<0)return!1;var a=s.length-1;return n==a?s.pop():X9.call(s,n,1),--this.size,!0}var e7=J9,t7=Hp;function s7(t){var s=this.__data__,n=t7(s,t);return n<0?void 0:s[n][1]}var n7=s7,a7=Hp;function r7(t){return a7(this.__data__,t)>-1}var i7=r7,l7=Hp;function o7(t,s){var n=this.__data__,a=l7(n,t);return a<0?(++this.size,n.push([t,s])):n[a][1]=s,this}var c7=o7,d7=W9,u7=e7,m7=n7,h7=i7,x7=c7;function Ed(t){var s=-1,n=t==null?0:t.length;for(this.clear();++s<n;){var a=t[s];this.set(a[0],a[1])}}Ed.prototype.clear=d7;Ed.prototype.delete=u7;Ed.prototype.get=m7;Ed.prototype.has=h7;Ed.prototype.set=x7;var Kp=Ed,p7=Kp;function f7(){this.__data__=new p7,this.size=0}var g7=f7;function j7(t){var s=this.__data__,n=s.delete(t);return this.size=s.size,n}var v7=j7;function y7(t){return this.__data__.get(t)}var N7=y7;function b7(t){return this.__data__.has(t)}var w7=b7,S7=typeof Za=="object"&&Za&&Za.Object===Object&&Za,XT=S7,C7=XT,k7=typeof self=="object"&&self&&self.Object===Object&&self,A7=C7||k7||Function("return this")(),Yi=A7,P7=Yi,T7=P7.Symbol,F0=T7,Bw=F0,JT=Object.prototype,E7=JT.hasOwnProperty,M7=JT.toString,Qd=Bw?Bw.toStringTag:void 0;function _7(t){var s=E7.call(t,Qd),n=t[Qd];try{t[Qd]=void 0;var a=!0}catch{}var r=M7.call(t);return a&&(s?t[Qd]=n:delete t[Qd]),r}var R7=_7,O7=Object.prototype,D7=O7.toString;function I7(t){return D7.call(t)}var L7=I7,Uw=F0,F7=R7,q7=L7,$7="[object Null]",B7="[object Undefined]",zw=Uw?Uw.toStringTag:void 0;function U7(t){return t==null?t===void 0?B7:$7:zw&&zw in Object(t)?F7(t):q7(t)}var Yp=U7;function z7(t){var s=typeof t;return t!=null&&(s=="object"||s=="function")}var eE=z7,V7=Yp,G7=eE,W7="[object AsyncFunction]",H7="[object Function]",K7="[object GeneratorFunction]",Y7="[object Proxy]";function Q7(t){if(!G7(t))return!1;var s=V7(t);return s==H7||s==K7||s==W7||s==Y7}var tE=Q7,Z7=Yi,X7=Z7["__core-js_shared__"],J7=X7,jg=J7,Vw=function(){var t=/[^.]+$/.exec(jg&&jg.keys&&jg.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}();function eV(t){return!!Vw&&Vw in t}var tV=eV,sV=Function.prototype,nV=sV.toString;function aV(t){if(t!=null){try{return nV.call(t)}catch{}try{return t+""}catch{}}return""}var sE=aV,rV=tE,iV=tV,lV=eE,oV=sE,cV=/[\\^$.*+?()[\]{}|]/g,dV=/^\[object .+?Constructor\]$/,uV=Function.prototype,mV=Object.prototype,hV=uV.toString,xV=mV.hasOwnProperty,pV=RegExp("^"+hV.call(xV).replace(cV,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function fV(t){if(!lV(t)||iV(t))return!1;var s=rV(t)?pV:dV;return s.test(oV(t))}var gV=fV;function jV(t,s){return t==null?void 0:t[s]}var vV=jV,yV=gV,NV=vV;function bV(t,s){var n=NV(t,s);return yV(n)?n:void 0}var Md=bV,wV=Md,SV=Yi,CV=wV(SV,"Map"),q0=CV,kV=Md,AV=kV(Object,"create"),Qp=AV,Gw=Qp;function PV(){this.__data__=Gw?Gw(null):{},this.size=0}var TV=PV;function EV(t){var s=this.has(t)&&delete this.__data__[t];return this.size-=s?1:0,s}var MV=EV,_V=Qp,RV="__lodash_hash_undefined__",OV=Object.prototype,DV=OV.hasOwnProperty;function IV(t){var s=this.__data__;if(_V){var n=s[t];return n===RV?void 0:n}return DV.call(s,t)?s[t]:void 0}var LV=IV,FV=Qp,qV=Object.prototype,$V=qV.hasOwnProperty;function BV(t){var s=this.__data__;return FV?s[t]!==void 0:$V.call(s,t)}var UV=BV,zV=Qp,VV="__lodash_hash_undefined__";function GV(t,s){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=zV&&s===void 0?VV:s,this}var WV=GV,HV=TV,KV=MV,YV=LV,QV=UV,ZV=WV;function _d(t){var s=-1,n=t==null?0:t.length;for(this.clear();++s<n;){var a=t[s];this.set(a[0],a[1])}}_d.prototype.clear=HV;_d.prototype.delete=KV;_d.prototype.get=YV;_d.prototype.has=QV;_d.prototype.set=ZV;var XV=_d,Ww=XV,JV=Kp,eG=q0;function tG(){this.size=0,this.__data__={hash:new Ww,map:new(eG||JV),string:new Ww}}var sG=tG;function nG(t){var s=typeof t;return s=="string"||s=="number"||s=="symbol"||s=="boolean"?t!=="__proto__":t===null}var aG=nG,rG=aG;function iG(t,s){var n=t.__data__;return rG(s)?n[typeof s=="string"?"string":"hash"]:n.map}var Zp=iG,lG=Zp;function oG(t){var s=lG(this,t).delete(t);return this.size-=s?1:0,s}var cG=oG,dG=Zp;function uG(t){return dG(this,t).get(t)}var mG=uG,hG=Zp;function xG(t){return hG(this,t).has(t)}var pG=xG,fG=Zp;function gG(t,s){var n=fG(this,t),a=n.size;return n.set(t,s),this.size+=n.size==a?0:1,this}var jG=gG,vG=sG,yG=cG,NG=mG,bG=pG,wG=jG;function Rd(t){var s=-1,n=t==null?0:t.length;for(this.clear();++s<n;){var a=t[s];this.set(a[0],a[1])}}Rd.prototype.clear=vG;Rd.prototype.delete=yG;Rd.prototype.get=NG;Rd.prototype.has=bG;Rd.prototype.set=wG;var nE=Rd,SG=Kp,CG=q0,kG=nE,AG=200;function PG(t,s){var n=this.__data__;if(n instanceof SG){var a=n.__data__;if(!CG||a.length<AG-1)return a.push([t,s]),this.size=++n.size,this;n=this.__data__=new kG(a)}return n.set(t,s),this.size=n.size,this}var TG=PG,EG=Kp,MG=g7,_G=v7,RG=N7,OG=w7,DG=TG;function Od(t){var s=this.__data__=new EG(t);this.size=s.size}Od.prototype.clear=MG;Od.prototype.delete=_G;Od.prototype.get=RG;Od.prototype.has=OG;Od.prototype.set=DG;var IG=Od,LG="__lodash_hash_undefined__";function FG(t){return this.__data__.set(t,LG),this}var qG=FG;function $G(t){return this.__data__.has(t)}var BG=$G,UG=nE,zG=qG,VG=BG;function Ix(t){var s=-1,n=t==null?0:t.length;for(this.__data__=new UG;++s<n;)this.add(t[s])}Ix.prototype.add=Ix.prototype.push=zG;Ix.prototype.has=VG;var GG=Ix;function WG(t,s){for(var n=-1,a=t==null?0:t.length;++n<a;)if(s(t[n],n,t))return!0;return!1}var HG=WG;function KG(t,s){return t.has(s)}var YG=KG,QG=GG,ZG=HG,XG=YG,JG=1,eW=2;function tW(t,s,n,a,r,i){var l=n&JG,c=t.length,o=s.length;if(c!=o&&!(l&&o>c))return!1;var d=i.get(t),h=i.get(s);if(d&&h)return d==s&&h==t;var u=-1,m=!0,p=n&eW?new QG:void 0;for(i.set(t,s),i.set(s,t);++u<c;){var g=t[u],x=s[u];if(a)var v=l?a(x,g,u,s,t,i):a(g,x,u,t,s,i);if(v!==void 0){if(v)continue;m=!1;break}if(p){if(!ZG(s,function(y,f){if(!XG(p,f)&&(g===y||r(g,y,n,a,i)))return p.push(f)})){m=!1;break}}else if(!(g===x||r(g,x,n,a,i))){m=!1;break}}return i.delete(t),i.delete(s),m}var aE=tW,sW=Yi,nW=sW.Uint8Array,aW=nW;function rW(t){var s=-1,n=Array(t.size);return t.forEach(function(a,r){n[++s]=[r,a]}),n}var iW=rW;function lW(t){var s=-1,n=Array(t.size);return t.forEach(function(a){n[++s]=a}),n}var oW=lW,Hw=F0,Kw=aW,cW=ZT,dW=aE,uW=iW,mW=oW,hW=1,xW=2,pW="[object Boolean]",fW="[object Date]",gW="[object Error]",jW="[object Map]",vW="[object Number]",yW="[object RegExp]",NW="[object Set]",bW="[object String]",wW="[object Symbol]",SW="[object ArrayBuffer]",CW="[object DataView]",Yw=Hw?Hw.prototype:void 0,vg=Yw?Yw.valueOf:void 0;function kW(t,s,n,a,r,i,l){switch(n){case CW:if(t.byteLength!=s.byteLength||t.byteOffset!=s.byteOffset)return!1;t=t.buffer,s=s.buffer;case SW:return!(t.byteLength!=s.byteLength||!i(new Kw(t),new Kw(s)));case pW:case fW:case vW:return cW(+t,+s);case gW:return t.name==s.name&&t.message==s.message;case yW:case bW:return t==s+"";case jW:var c=uW;case NW:var o=a&hW;if(c||(c=mW),t.size!=s.size&&!o)return!1;var d=l.get(t);if(d)return d==s;a|=xW,l.set(t,s);var h=dW(c(t),c(s),a,r,i,l);return l.delete(t),h;case wW:if(vg)return vg.call(t)==vg.call(s)}return!1}var AW=kW;function PW(t,s){for(var n=-1,a=s.length,r=t.length;++n<a;)t[r+n]=s[n];return t}var TW=PW,EW=Array.isArray,$0=EW,MW=TW,_W=$0;function RW(t,s,n){var a=s(t);return _W(t)?a:MW(a,n(t))}var OW=RW;function DW(t,s){for(var n=-1,a=t==null?0:t.length,r=0,i=[];++n<a;){var l=t[n];s(l,n,t)&&(i[r++]=l)}return i}var IW=DW;function LW(){return[]}var FW=LW,qW=IW,$W=FW,BW=Object.prototype,UW=BW.propertyIsEnumerable,Qw=Object.getOwnPropertySymbols,zW=Qw?function(t){return t==null?[]:(t=Object(t),qW(Qw(t),function(s){return UW.call(t,s)}))}:$W,VW=zW;function GW(t,s){for(var n=-1,a=Array(t);++n<t;)a[n]=s(n);return a}var WW=GW;function HW(t){return t!=null&&typeof t=="object"}var Xp=HW,KW=Yp,YW=Xp,QW="[object Arguments]";function ZW(t){return YW(t)&&KW(t)==QW}var XW=ZW,Zw=XW,JW=Xp,rE=Object.prototype,eH=rE.hasOwnProperty,tH=rE.propertyIsEnumerable,sH=Zw(function(){return arguments}())?Zw:function(t){return JW(t)&&eH.call(t,"callee")&&!tH.call(t,"callee")},nH=sH,Lx={exports:{}};function aH(){return!1}var rH=aH;Lx.exports;(function(t,s){var n=Yi,a=rH,r=s&&!s.nodeType&&s,i=r&&!0&&t&&!t.nodeType&&t,l=i&&i.exports===r,c=l?n.Buffer:void 0,o=c?c.isBuffer:void 0,d=o||a;t.exports=d})(Lx,Lx.exports);var iE=Lx.exports,iH=9007199254740991,lH=/^(?:0|[1-9]\d*)$/;function oH(t,s){var n=typeof t;return s=s??iH,!!s&&(n=="number"||n!="symbol"&&lH.test(t))&&t>-1&&t%1==0&&t<s}var cH=oH,dH=9007199254740991;function uH(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=dH}var lE=uH,mH=Yp,hH=lE,xH=Xp,pH="[object Arguments]",fH="[object Array]",gH="[object Boolean]",jH="[object Date]",vH="[object Error]",yH="[object Function]",NH="[object Map]",bH="[object Number]",wH="[object Object]",SH="[object RegExp]",CH="[object Set]",kH="[object String]",AH="[object WeakMap]",PH="[object ArrayBuffer]",TH="[object DataView]",EH="[object Float32Array]",MH="[object Float64Array]",_H="[object Int8Array]",RH="[object Int16Array]",OH="[object Int32Array]",DH="[object Uint8Array]",IH="[object Uint8ClampedArray]",LH="[object Uint16Array]",FH="[object Uint32Array]",Ys={};Ys[EH]=Ys[MH]=Ys[_H]=Ys[RH]=Ys[OH]=Ys[DH]=Ys[IH]=Ys[LH]=Ys[FH]=!0;Ys[pH]=Ys[fH]=Ys[PH]=Ys[gH]=Ys[TH]=Ys[jH]=Ys[vH]=Ys[yH]=Ys[NH]=Ys[bH]=Ys[wH]=Ys[SH]=Ys[CH]=Ys[kH]=Ys[AH]=!1;function qH(t){return xH(t)&&hH(t.length)&&!!Ys[mH(t)]}var $H=qH;function BH(t){return function(s){return t(s)}}var UH=BH,Fx={exports:{}};Fx.exports;(function(t,s){var n=XT,a=s&&!s.nodeType&&s,r=a&&!0&&t&&!t.nodeType&&t,i=r&&r.exports===a,l=i&&n.process,c=function(){try{var o=r&&r.require&&r.require("util").types;return o||l&&l.binding&&l.binding("util")}catch{}}();t.exports=c})(Fx,Fx.exports);var zH=Fx.exports,VH=$H,GH=UH,Xw=zH,Jw=Xw&&Xw.isTypedArray,WH=Jw?GH(Jw):VH,oE=WH,HH=WW,KH=nH,YH=$0,QH=iE,ZH=cH,XH=oE,JH=Object.prototype,eK=JH.hasOwnProperty;function tK(t,s){var n=YH(t),a=!n&&KH(t),r=!n&&!a&&QH(t),i=!n&&!a&&!r&&XH(t),l=n||a||r||i,c=l?HH(t.length,String):[],o=c.length;for(var d in t)(s||eK.call(t,d))&&!(l&&(d=="length"||r&&(d=="offset"||d=="parent")||i&&(d=="buffer"||d=="byteLength"||d=="byteOffset")||ZH(d,o)))&&c.push(d);return c}var sK=tK,nK=Object.prototype;function aK(t){var s=t&&t.constructor,n=typeof s=="function"&&s.prototype||nK;return t===n}var rK=aK;function iK(t,s){return function(n){return t(s(n))}}var lK=iK,oK=lK,cK=oK(Object.keys,Object),dK=cK,uK=rK,mK=dK,hK=Object.prototype,xK=hK.hasOwnProperty;function pK(t){if(!uK(t))return mK(t);var s=[];for(var n in Object(t))xK.call(t,n)&&n!="constructor"&&s.push(n);return s}var fK=pK,gK=tE,jK=lE;function vK(t){return t!=null&&jK(t.length)&&!gK(t)}var yK=vK,NK=sK,bK=fK,wK=yK;function SK(t){return wK(t)?NK(t):bK(t)}var CK=SK,kK=OW,AK=VW,PK=CK;function TK(t){return kK(t,PK,AK)}var EK=TK,e1=EK,MK=1,_K=Object.prototype,RK=_K.hasOwnProperty;function OK(t,s,n,a,r,i){var l=n&MK,c=e1(t),o=c.length,d=e1(s),h=d.length;if(o!=h&&!l)return!1;for(var u=o;u--;){var m=c[u];if(!(l?m in s:RK.call(s,m)))return!1}var p=i.get(t),g=i.get(s);if(p&&g)return p==s&&g==t;var x=!0;i.set(t,s),i.set(s,t);for(var v=l;++u<o;){m=c[u];var y=t[m],f=s[m];if(a)var b=l?a(f,y,m,s,t,i):a(y,f,m,t,s,i);if(!(b===void 0?y===f||r(y,f,n,a,i):b)){x=!1;break}v||(v=m=="constructor")}if(x&&!v){var j=t.constructor,S=s.constructor;j!=S&&"constructor"in t&&"constructor"in s&&!(typeof j=="function"&&j instanceof j&&typeof S=="function"&&S instanceof S)&&(x=!1)}return i.delete(t),i.delete(s),x}var DK=OK,IK=Md,LK=Yi,FK=IK(LK,"DataView"),qK=FK,$K=Md,BK=Yi,UK=$K(BK,"Promise"),zK=UK,VK=Md,GK=Yi,WK=VK(GK,"Set"),HK=WK,KK=Md,YK=Yi,QK=KK(YK,"WeakMap"),ZK=QK,hv=qK,xv=q0,pv=zK,fv=HK,gv=ZK,cE=Yp,Dd=sE,t1="[object Map]",XK="[object Object]",s1="[object Promise]",n1="[object Set]",a1="[object WeakMap]",r1="[object DataView]",JK=Dd(hv),eY=Dd(xv),tY=Dd(pv),sY=Dd(fv),nY=Dd(gv),mo=cE;(hv&&mo(new hv(new ArrayBuffer(1)))!=r1||xv&&mo(new xv)!=t1||pv&&mo(pv.resolve())!=s1||fv&&mo(new fv)!=n1||gv&&mo(new gv)!=a1)&&(mo=function(t){var s=cE(t),n=s==XK?t.constructor:void 0,a=n?Dd(n):"";if(a)switch(a){case JK:return r1;case eY:return t1;case tY:return s1;case sY:return n1;case nY:return a1}return s});var aY=mo,yg=IG,rY=aE,iY=AW,lY=DK,i1=aY,l1=$0,o1=iE,oY=oE,cY=1,c1="[object Arguments]",d1="[object Array]",xh="[object Object]",dY=Object.prototype,u1=dY.hasOwnProperty;function uY(t,s,n,a,r,i){var l=l1(t),c=l1(s),o=l?d1:i1(t),d=c?d1:i1(s);o=o==c1?xh:o,d=d==c1?xh:d;var h=o==xh,u=d==xh,m=o==d;if(m&&o1(t)){if(!o1(s))return!1;l=!0,h=!1}if(m&&!h)return i||(i=new yg),l||oY(t)?rY(t,s,n,a,r,i):iY(t,s,o,n,a,r,i);if(!(n&cY)){var p=h&&u1.call(t,"__wrapped__"),g=u&&u1.call(s,"__wrapped__");if(p||g){var x=p?t.value():t,v=g?s.value():s;return i||(i=new yg),r(x,v,n,a,i)}}return m?(i||(i=new yg),lY(t,s,n,a,r,i)):!1}var mY=uY,hY=mY,m1=Xp;function dE(t,s,n,a,r){return t===s?!0:t==null||s==null||!m1(t)&&!m1(s)?t!==t&&s!==s:hY(t,s,n,a,dE,r)}var xY=dE,pY=xY;function fY(t,s){return pY(t,s)}var gY=fY,uE={exports:{}};/*!
 * Quill Editor v1.3.7
 * https://quilljs.com/
 * Copyright (c) 2014, Jason Chen
 * Copyright (c) 2013, salesforce.com
 */(function(t,s){(function(a,r){t.exports=r()})(typeof self<"u"?self:Za,function(){return function(n){var a={};function r(i){if(a[i])return a[i].exports;var l=a[i]={i,l:!1,exports:{}};return n[i].call(l.exports,l,l.exports,r),l.l=!0,l.exports}return r.m=n,r.c=a,r.d=function(i,l,c){r.o(i,l)||Object.defineProperty(i,l,{configurable:!1,enumerable:!0,get:c})},r.n=function(i){var l=i&&i.__esModule?function(){return i.default}:function(){return i};return r.d(l,"a",l),l},r.o=function(i,l){return Object.prototype.hasOwnProperty.call(i,l)},r.p="",r(r.s=109)}([function(n,a,r){Object.defineProperty(a,"__esModule",{value:!0});var i=r(17),l=r(18),c=r(19),o=r(45),d=r(46),h=r(47),u=r(48),m=r(49),p=r(12),g=r(32),x=r(33),v=r(31),y=r(1),f={Scope:y.Scope,create:y.create,find:y.find,query:y.query,register:y.register,Container:i.default,Format:l.default,Leaf:c.default,Embed:u.default,Scroll:o.default,Block:h.default,Inline:d.default,Text:m.default,Attributor:{Attribute:p.default,Class:g.default,Style:x.default,Store:v.default}};a.default=f},function(n,a,r){var i=this&&this.__extends||function(){var v=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(y,f){y.__proto__=f}||function(y,f){for(var b in f)f.hasOwnProperty(b)&&(y[b]=f[b])};return function(y,f){v(y,f);function b(){this.constructor=y}y.prototype=f===null?Object.create(f):(b.prototype=f.prototype,new b)}}();Object.defineProperty(a,"__esModule",{value:!0});var l=function(v){i(y,v);function y(f){var b=this;return f="[Parchment] "+f,b=v.call(this,f)||this,b.message=f,b.name=b.constructor.name,b}return y}(Error);a.ParchmentError=l;var c={},o={},d={},h={};a.DATA_KEY="__blot";var u;(function(v){v[v.TYPE=3]="TYPE",v[v.LEVEL=12]="LEVEL",v[v.ATTRIBUTE=13]="ATTRIBUTE",v[v.BLOT=14]="BLOT",v[v.INLINE=7]="INLINE",v[v.BLOCK=11]="BLOCK",v[v.BLOCK_BLOT=10]="BLOCK_BLOT",v[v.INLINE_BLOT=6]="INLINE_BLOT",v[v.BLOCK_ATTRIBUTE=9]="BLOCK_ATTRIBUTE",v[v.INLINE_ATTRIBUTE=5]="INLINE_ATTRIBUTE",v[v.ANY=15]="ANY"})(u=a.Scope||(a.Scope={}));function m(v,y){var f=g(v);if(f==null)throw new l("Unable to create "+v+" blot");var b=f,j=v instanceof Node||v.nodeType===Node.TEXT_NODE?v:b.create(y);return new b(j,y)}a.create=m;function p(v,y){return y===void 0&&(y=!1),v==null?null:v[a.DATA_KEY]!=null?v[a.DATA_KEY].blot:y?p(v.parentNode,y):null}a.find=p;function g(v,y){y===void 0&&(y=u.ANY);var f;if(typeof v=="string")f=h[v]||c[v];else if(v instanceof Text||v.nodeType===Node.TEXT_NODE)f=h.text;else if(typeof v=="number")v&u.LEVEL&u.BLOCK?f=h.block:v&u.LEVEL&u.INLINE&&(f=h.inline);else if(v instanceof HTMLElement){var b=(v.getAttribute("class")||"").split(/\s+/);for(var j in b)if(f=o[b[j]],f)break;f=f||d[v.tagName]}return f==null?null:y&u.LEVEL&f.scope&&y&u.TYPE&f.scope?f:null}a.query=g;function x(){for(var v=[],y=0;y<arguments.length;y++)v[y]=arguments[y];if(v.length>1)return v.map(function(j){return x(j)});var f=v[0];if(typeof f.blotName!="string"&&typeof f.attrName!="string")throw new l("Invalid definition");if(f.blotName==="abstract")throw new l("Cannot register abstract class");if(h[f.blotName||f.attrName]=f,typeof f.keyName=="string")c[f.keyName]=f;else if(f.className!=null&&(o[f.className]=f),f.tagName!=null){Array.isArray(f.tagName)?f.tagName=f.tagName.map(function(j){return j.toUpperCase()}):f.tagName=f.tagName.toUpperCase();var b=Array.isArray(f.tagName)?f.tagName:[f.tagName];b.forEach(function(j){(d[j]==null||f.className==null)&&(d[j]=f)})}return f}a.register=x},function(n,a,r){var i=r(51),l=r(11),c=r(3),o=r(20),d="\0",h=function(u){Array.isArray(u)?this.ops=u:u!=null&&Array.isArray(u.ops)?this.ops=u.ops:this.ops=[]};h.prototype.insert=function(u,m){var p={};return u.length===0?this:(p.insert=u,m!=null&&typeof m=="object"&&Object.keys(m).length>0&&(p.attributes=m),this.push(p))},h.prototype.delete=function(u){return u<=0?this:this.push({delete:u})},h.prototype.retain=function(u,m){if(u<=0)return this;var p={retain:u};return m!=null&&typeof m=="object"&&Object.keys(m).length>0&&(p.attributes=m),this.push(p)},h.prototype.push=function(u){var m=this.ops.length,p=this.ops[m-1];if(u=c(!0,{},u),typeof p=="object"){if(typeof u.delete=="number"&&typeof p.delete=="number")return this.ops[m-1]={delete:p.delete+u.delete},this;if(typeof p.delete=="number"&&u.insert!=null&&(m-=1,p=this.ops[m-1],typeof p!="object"))return this.ops.unshift(u),this;if(l(u.attributes,p.attributes)){if(typeof u.insert=="string"&&typeof p.insert=="string")return this.ops[m-1]={insert:p.insert+u.insert},typeof u.attributes=="object"&&(this.ops[m-1].attributes=u.attributes),this;if(typeof u.retain=="number"&&typeof p.retain=="number")return this.ops[m-1]={retain:p.retain+u.retain},typeof u.attributes=="object"&&(this.ops[m-1].attributes=u.attributes),this}}return m===this.ops.length?this.ops.push(u):this.ops.splice(m,0,u),this},h.prototype.chop=function(){var u=this.ops[this.ops.length-1];return u&&u.retain&&!u.attributes&&this.ops.pop(),this},h.prototype.filter=function(u){return this.ops.filter(u)},h.prototype.forEach=function(u){this.ops.forEach(u)},h.prototype.map=function(u){return this.ops.map(u)},h.prototype.partition=function(u){var m=[],p=[];return this.forEach(function(g){var x=u(g)?m:p;x.push(g)}),[m,p]},h.prototype.reduce=function(u,m){return this.ops.reduce(u,m)},h.prototype.changeLength=function(){return this.reduce(function(u,m){return m.insert?u+o.length(m):m.delete?u-m.delete:u},0)},h.prototype.length=function(){return this.reduce(function(u,m){return u+o.length(m)},0)},h.prototype.slice=function(u,m){u=u||0,typeof m!="number"&&(m=1/0);for(var p=[],g=o.iterator(this.ops),x=0;x<m&&g.hasNext();){var v;x<u?v=g.next(u-x):(v=g.next(m-x),p.push(v)),x+=o.length(v)}return new h(p)},h.prototype.compose=function(u){var m=o.iterator(this.ops),p=o.iterator(u.ops),g=[],x=p.peek();if(x!=null&&typeof x.retain=="number"&&x.attributes==null){for(var v=x.retain;m.peekType()==="insert"&&m.peekLength()<=v;)v-=m.peekLength(),g.push(m.next());x.retain-v>0&&p.next(x.retain-v)}for(var y=new h(g);m.hasNext()||p.hasNext();)if(p.peekType()==="insert")y.push(p.next());else if(m.peekType()==="delete")y.push(m.next());else{var f=Math.min(m.peekLength(),p.peekLength()),b=m.next(f),j=p.next(f);if(typeof j.retain=="number"){var S={};typeof b.retain=="number"?S.retain=f:S.insert=b.insert;var k=o.attributes.compose(b.attributes,j.attributes,typeof b.retain=="number");if(k&&(S.attributes=k),y.push(S),!p.hasNext()&&l(y.ops[y.ops.length-1],S)){var T=new h(m.rest());return y.concat(T).chop()}}else typeof j.delete=="number"&&typeof b.retain=="number"&&y.push(j)}return y.chop()},h.prototype.concat=function(u){var m=new h(this.ops.slice());return u.ops.length>0&&(m.push(u.ops[0]),m.ops=m.ops.concat(u.ops.slice(1))),m},h.prototype.diff=function(u,m){if(this.ops===u.ops)return new h;var p=[this,u].map(function(f){return f.map(function(b){if(b.insert!=null)return typeof b.insert=="string"?b.insert:d;var j=f===u?"on":"with";throw new Error("diff() called "+j+" non-document")}).join("")}),g=new h,x=i(p[0],p[1],m),v=o.iterator(this.ops),y=o.iterator(u.ops);return x.forEach(function(f){for(var b=f[1].length;b>0;){var j=0;switch(f[0]){case i.INSERT:j=Math.min(y.peekLength(),b),g.push(y.next(j));break;case i.DELETE:j=Math.min(b,v.peekLength()),v.next(j),g.delete(j);break;case i.EQUAL:j=Math.min(v.peekLength(),y.peekLength(),b);var S=v.next(j),k=y.next(j);l(S.insert,k.insert)?g.retain(j,o.attributes.diff(S.attributes,k.attributes)):g.push(k).delete(j);break}b-=j}}),g.chop()},h.prototype.eachLine=function(u,m){m=m||`
`;for(var p=o.iterator(this.ops),g=new h,x=0;p.hasNext();){if(p.peekType()!=="insert")return;var v=p.peek(),y=o.length(v)-p.peekLength(),f=typeof v.insert=="string"?v.insert.indexOf(m,y)-y:-1;if(f<0)g.push(p.next());else if(f>0)g.push(p.next(f));else{if(u(g,p.next(1).attributes||{},x)===!1)return;x+=1,g=new h}}g.length()>0&&u(g,{},x)},h.prototype.transform=function(u,m){if(m=!!m,typeof u=="number")return this.transformPosition(u,m);for(var p=o.iterator(this.ops),g=o.iterator(u.ops),x=new h;p.hasNext()||g.hasNext();)if(p.peekType()==="insert"&&(m||g.peekType()!=="insert"))x.retain(o.length(p.next()));else if(g.peekType()==="insert")x.push(g.next());else{var v=Math.min(p.peekLength(),g.peekLength()),y=p.next(v),f=g.next(v);if(y.delete)continue;f.delete?x.push(f):x.retain(v,o.attributes.transform(y.attributes,f.attributes,m))}return x.chop()},h.prototype.transformPosition=function(u,m){m=!!m;for(var p=o.iterator(this.ops),g=0;p.hasNext()&&g<=u;){var x=p.peekLength(),v=p.peekType();if(p.next(),v==="delete"){u-=Math.min(x,u-g);continue}else v==="insert"&&(g<u||!m)&&(u+=x);g+=x}return u},n.exports=h},function(n,a){var r=Object.prototype.hasOwnProperty,i=Object.prototype.toString,l=Object.defineProperty,c=Object.getOwnPropertyDescriptor,o=function(p){return typeof Array.isArray=="function"?Array.isArray(p):i.call(p)==="[object Array]"},d=function(p){if(!p||i.call(p)!=="[object Object]")return!1;var g=r.call(p,"constructor"),x=p.constructor&&p.constructor.prototype&&r.call(p.constructor.prototype,"isPrototypeOf");if(p.constructor&&!g&&!x)return!1;var v;for(v in p);return typeof v>"u"||r.call(p,v)},h=function(p,g){l&&g.name==="__proto__"?l(p,g.name,{enumerable:!0,configurable:!0,value:g.newValue,writable:!0}):p[g.name]=g.newValue},u=function(p,g){if(g==="__proto__")if(r.call(p,g)){if(c)return c(p,g).value}else return;return p[g]};n.exports=function m(){var p,g,x,v,y,f,b=arguments[0],j=1,S=arguments.length,k=!1;for(typeof b=="boolean"&&(k=b,b=arguments[1]||{},j=2),(b==null||typeof b!="object"&&typeof b!="function")&&(b={});j<S;++j)if(p=arguments[j],p!=null)for(g in p)x=u(b,g),v=u(p,g),b!==v&&(k&&v&&(d(v)||(y=o(v)))?(y?(y=!1,f=x&&o(x)?x:[]):f=x&&d(x)?x:{},h(b,{name:g,newValue:m(k,f,v)})):typeof v<"u"&&h(b,{name:g,newValue:v}));return b}},function(n,a,r){Object.defineProperty(a,"__esModule",{value:!0}),a.default=a.BlockEmbed=a.bubbleFormats=void 0;var i=function(){function P(M,I){for(var W=0;W<I.length;W++){var _=I[W];_.enumerable=_.enumerable||!1,_.configurable=!0,"value"in _&&(_.writable=!0),Object.defineProperty(M,_.key,_)}}return function(M,I,W){return I&&P(M.prototype,I),W&&P(M,W),M}}(),l=function P(M,I,W){M===null&&(M=Function.prototype);var _=Object.getOwnPropertyDescriptor(M,I);if(_===void 0){var B=Object.getPrototypeOf(M);return B===null?void 0:P(B,I,W)}else{if("value"in _)return _.value;var O=_.get;return O===void 0?void 0:O.call(W)}},c=r(3),o=b(c),d=r(2),h=b(d),u=r(0),m=b(u),p=r(16),g=b(p),x=r(6),v=b(x),y=r(7),f=b(y);function b(P){return P&&P.__esModule?P:{default:P}}function j(P,M){if(!(P instanceof M))throw new TypeError("Cannot call a class as a function")}function S(P,M){if(!P)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return M&&(typeof M=="object"||typeof M=="function")?M:P}function k(P,M){if(typeof M!="function"&&M!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof M);P.prototype=Object.create(M&&M.prototype,{constructor:{value:P,enumerable:!1,writable:!0,configurable:!0}}),M&&(Object.setPrototypeOf?Object.setPrototypeOf(P,M):P.__proto__=M)}var T=1,A=function(P){k(M,P);function M(){return j(this,M),S(this,(M.__proto__||Object.getPrototypeOf(M)).apply(this,arguments))}return i(M,[{key:"attach",value:function(){l(M.prototype.__proto__||Object.getPrototypeOf(M.prototype),"attach",this).call(this),this.attributes=new m.default.Attributor.Store(this.domNode)}},{key:"delta",value:function(){return new h.default().insert(this.value(),(0,o.default)(this.formats(),this.attributes.values()))}},{key:"format",value:function(W,_){var B=m.default.query(W,m.default.Scope.BLOCK_ATTRIBUTE);B!=null&&this.attributes.attribute(B,_)}},{key:"formatAt",value:function(W,_,B,O){this.format(B,O)}},{key:"insertAt",value:function(W,_,B){if(typeof _=="string"&&_.endsWith(`
`)){var O=m.default.create(C.blotName);this.parent.insertBefore(O,W===0?this:this.next),O.insertAt(0,_.slice(0,-1))}else l(M.prototype.__proto__||Object.getPrototypeOf(M.prototype),"insertAt",this).call(this,W,_,B)}}]),M}(m.default.Embed);A.scope=m.default.Scope.BLOCK_BLOT;var C=function(P){k(M,P);function M(I){j(this,M);var W=S(this,(M.__proto__||Object.getPrototypeOf(M)).call(this,I));return W.cache={},W}return i(M,[{key:"delta",value:function(){return this.cache.delta==null&&(this.cache.delta=this.descendants(m.default.Leaf).reduce(function(W,_){return _.length()===0?W:W.insert(_.value(),w(_))},new h.default).insert(`
`,w(this))),this.cache.delta}},{key:"deleteAt",value:function(W,_){l(M.prototype.__proto__||Object.getPrototypeOf(M.prototype),"deleteAt",this).call(this,W,_),this.cache={}}},{key:"formatAt",value:function(W,_,B,O){_<=0||(m.default.query(B,m.default.Scope.BLOCK)?W+_===this.length()&&this.format(B,O):l(M.prototype.__proto__||Object.getPrototypeOf(M.prototype),"formatAt",this).call(this,W,Math.min(_,this.length()-W-1),B,O),this.cache={})}},{key:"insertAt",value:function(W,_,B){if(B!=null)return l(M.prototype.__proto__||Object.getPrototypeOf(M.prototype),"insertAt",this).call(this,W,_,B);if(_.length!==0){var O=_.split(`
`),z=O.shift();z.length>0&&(W<this.length()-1||this.children.tail==null?l(M.prototype.__proto__||Object.getPrototypeOf(M.prototype),"insertAt",this).call(this,Math.min(W,this.length()-1),z):this.children.tail.insertAt(this.children.tail.length(),z),this.cache={});var F=this;O.reduce(function(K,D){return F=F.split(K,!0),F.insertAt(0,D),D.length},W+z.length)}}},{key:"insertBefore",value:function(W,_){var B=this.children.head;l(M.prototype.__proto__||Object.getPrototypeOf(M.prototype),"insertBefore",this).call(this,W,_),B instanceof g.default&&B.remove(),this.cache={}}},{key:"length",value:function(){return this.cache.length==null&&(this.cache.length=l(M.prototype.__proto__||Object.getPrototypeOf(M.prototype),"length",this).call(this)+T),this.cache.length}},{key:"moveChildren",value:function(W,_){l(M.prototype.__proto__||Object.getPrototypeOf(M.prototype),"moveChildren",this).call(this,W,_),this.cache={}}},{key:"optimize",value:function(W){l(M.prototype.__proto__||Object.getPrototypeOf(M.prototype),"optimize",this).call(this,W),this.cache={}}},{key:"path",value:function(W){return l(M.prototype.__proto__||Object.getPrototypeOf(M.prototype),"path",this).call(this,W,!0)}},{key:"removeChild",value:function(W){l(M.prototype.__proto__||Object.getPrototypeOf(M.prototype),"removeChild",this).call(this,W),this.cache={}}},{key:"split",value:function(W){var _=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(_&&(W===0||W>=this.length()-T)){var B=this.clone();return W===0?(this.parent.insertBefore(B,this),this):(this.parent.insertBefore(B,this.next),B)}else{var O=l(M.prototype.__proto__||Object.getPrototypeOf(M.prototype),"split",this).call(this,W,_);return this.cache={},O}}}]),M}(m.default.Block);C.blotName="block",C.tagName="P",C.defaultChild="break",C.allowedChildren=[v.default,m.default.Embed,f.default];function w(P){var M=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return P==null||(typeof P.formats=="function"&&(M=(0,o.default)(M,P.formats())),P.parent==null||P.parent.blotName=="scroll"||P.parent.statics.scope!==P.statics.scope)?M:w(P.parent,M)}a.bubbleFormats=w,a.BlockEmbed=A,a.default=C},function(n,a,r){Object.defineProperty(a,"__esModule",{value:!0}),a.default=a.overload=a.expandConfig=void 0;var i=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(F){return typeof F}:function(F){return F&&typeof Symbol=="function"&&F.constructor===Symbol&&F!==Symbol.prototype?"symbol":typeof F},l=function(){function F(K,D){var G=[],H=!0,V=!1,se=void 0;try{for(var Z=K[Symbol.iterator](),le;!(H=(le=Z.next()).done)&&(G.push(le.value),!(D&&G.length===D));H=!0);}catch(ne){V=!0,se=ne}finally{try{!H&&Z.return&&Z.return()}finally{if(V)throw se}}return G}return function(K,D){if(Array.isArray(K))return K;if(Symbol.iterator in Object(K))return F(K,D);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),c=function(){function F(K,D){for(var G=0;G<D.length;G++){var H=D[G];H.enumerable=H.enumerable||!1,H.configurable=!0,"value"in H&&(H.writable=!0),Object.defineProperty(K,H.key,H)}}return function(K,D,G){return D&&F(K.prototype,D),G&&F(K,G),K}}();r(50);var o=r(2),d=w(o),h=r(14),u=w(h),m=r(8),p=w(m),g=r(9),x=w(g),v=r(0),y=w(v),f=r(15),b=w(f),j=r(3),S=w(j),k=r(10),T=w(k),A=r(34),C=w(A);function w(F){return F&&F.__esModule?F:{default:F}}function P(F,K,D){return K in F?Object.defineProperty(F,K,{value:D,enumerable:!0,configurable:!0,writable:!0}):F[K]=D,F}function M(F,K){if(!(F instanceof K))throw new TypeError("Cannot call a class as a function")}var I=(0,T.default)("quill"),W=function(){c(F,null,[{key:"debug",value:function(D){D===!0&&(D="log"),T.default.level(D)}},{key:"find",value:function(D){return D.__quill||y.default.find(D)}},{key:"import",value:function(D){return this.imports[D]==null&&I.error("Cannot import "+D+". Are you sure it was registered?"),this.imports[D]}},{key:"register",value:function(D,G){var H=this,V=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;if(typeof D!="string"){var se=D.attrName||D.blotName;typeof se=="string"?this.register("formats/"+se,D,G):Object.keys(D).forEach(function(Z){H.register(Z,D[Z],G)})}else this.imports[D]!=null&&!V&&I.warn("Overwriting "+D+" with",G),this.imports[D]=G,(D.startsWith("blots/")||D.startsWith("formats/"))&&G.blotName!=="abstract"?y.default.register(G):D.startsWith("modules")&&typeof G.register=="function"&&G.register()}}]);function F(K){var D=this,G=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(M(this,F),this.options=_(K,G),this.container=this.options.container,this.container==null)return I.error("Invalid Quill container",K);this.options.debug&&F.debug(this.options.debug);var H=this.container.innerHTML.trim();this.container.classList.add("ql-container"),this.container.innerHTML="",this.container.__quill=this,this.root=this.addContainer("ql-editor"),this.root.classList.add("ql-blank"),this.root.setAttribute("data-gramm",!1),this.scrollingContainer=this.options.scrollingContainer||this.root,this.emitter=new p.default,this.scroll=y.default.create(this.root,{emitter:this.emitter,whitelist:this.options.formats}),this.editor=new u.default(this.scroll),this.selection=new b.default(this.scroll,this.emitter),this.theme=new this.options.theme(this,this.options),this.keyboard=this.theme.addModule("keyboard"),this.clipboard=this.theme.addModule("clipboard"),this.history=this.theme.addModule("history"),this.theme.init(),this.emitter.on(p.default.events.EDITOR_CHANGE,function(se){se===p.default.events.TEXT_CHANGE&&D.root.classList.toggle("ql-blank",D.editor.isBlank())}),this.emitter.on(p.default.events.SCROLL_UPDATE,function(se,Z){var le=D.selection.lastRange,ne=le&&le.length===0?le.index:void 0;B.call(D,function(){return D.editor.update(null,Z,ne)},se)});var V=this.clipboard.convert(`<div class='ql-editor' style="white-space: normal;">`+H+"<p><br></p></div>");this.setContents(V),this.history.clear(),this.options.placeholder&&this.root.setAttribute("data-placeholder",this.options.placeholder),this.options.readOnly&&this.disable()}return c(F,[{key:"addContainer",value:function(D){var G=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(typeof D=="string"){var H=D;D=document.createElement("div"),D.classList.add(H)}return this.container.insertBefore(D,G),D}},{key:"blur",value:function(){this.selection.setRange(null)}},{key:"deleteText",value:function(D,G,H){var V=this,se=O(D,G,H),Z=l(se,4);return D=Z[0],G=Z[1],H=Z[3],B.call(this,function(){return V.editor.deleteText(D,G)},H,D,-1*G)}},{key:"disable",value:function(){this.enable(!1)}},{key:"enable",value:function(){var D=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;this.scroll.enable(D),this.container.classList.toggle("ql-disabled",!D)}},{key:"focus",value:function(){var D=this.scrollingContainer.scrollTop;this.selection.focus(),this.scrollingContainer.scrollTop=D,this.scrollIntoView()}},{key:"format",value:function(D,G){var H=this,V=arguments.length>2&&arguments[2]!==void 0?arguments[2]:p.default.sources.API;return B.call(this,function(){var se=H.getSelection(!0),Z=new d.default;if(se==null)return Z;if(y.default.query(D,y.default.Scope.BLOCK))Z=H.editor.formatLine(se.index,se.length,P({},D,G));else{if(se.length===0)return H.selection.format(D,G),Z;Z=H.editor.formatText(se.index,se.length,P({},D,G))}return H.setSelection(se,p.default.sources.SILENT),Z},V)}},{key:"formatLine",value:function(D,G,H,V,se){var Z=this,le=void 0,ne=O(D,G,H,V,se),ue=l(ne,4);return D=ue[0],G=ue[1],le=ue[2],se=ue[3],B.call(this,function(){return Z.editor.formatLine(D,G,le)},se,D,0)}},{key:"formatText",value:function(D,G,H,V,se){var Z=this,le=void 0,ne=O(D,G,H,V,se),ue=l(ne,4);return D=ue[0],G=ue[1],le=ue[2],se=ue[3],B.call(this,function(){return Z.editor.formatText(D,G,le)},se,D,0)}},{key:"getBounds",value:function(D){var G=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,H=void 0;typeof D=="number"?H=this.selection.getBounds(D,G):H=this.selection.getBounds(D.index,D.length);var V=this.container.getBoundingClientRect();return{bottom:H.bottom-V.top,height:H.height,left:H.left-V.left,right:H.right-V.left,top:H.top-V.top,width:H.width}}},{key:"getContents",value:function(){var D=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,G=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.getLength()-D,H=O(D,G),V=l(H,2);return D=V[0],G=V[1],this.editor.getContents(D,G)}},{key:"getFormat",value:function(){var D=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.getSelection(!0),G=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return typeof D=="number"?this.editor.getFormat(D,G):this.editor.getFormat(D.index,D.length)}},{key:"getIndex",value:function(D){return D.offset(this.scroll)}},{key:"getLength",value:function(){return this.scroll.length()}},{key:"getLeaf",value:function(D){return this.scroll.leaf(D)}},{key:"getLine",value:function(D){return this.scroll.line(D)}},{key:"getLines",value:function(){var D=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,G=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Number.MAX_VALUE;return typeof D!="number"?this.scroll.lines(D.index,D.length):this.scroll.lines(D,G)}},{key:"getModule",value:function(D){return this.theme.modules[D]}},{key:"getSelection",value:function(){var D=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;return D&&this.focus(),this.update(),this.selection.getRange()[0]}},{key:"getText",value:function(){var D=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,G=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.getLength()-D,H=O(D,G),V=l(H,2);return D=V[0],G=V[1],this.editor.getText(D,G)}},{key:"hasFocus",value:function(){return this.selection.hasFocus()}},{key:"insertEmbed",value:function(D,G,H){var V=this,se=arguments.length>3&&arguments[3]!==void 0?arguments[3]:F.sources.API;return B.call(this,function(){return V.editor.insertEmbed(D,G,H)},se,D)}},{key:"insertText",value:function(D,G,H,V,se){var Z=this,le=void 0,ne=O(D,0,H,V,se),ue=l(ne,4);return D=ue[0],le=ue[2],se=ue[3],B.call(this,function(){return Z.editor.insertText(D,G,le)},se,D,G.length)}},{key:"isEnabled",value:function(){return!this.container.classList.contains("ql-disabled")}},{key:"off",value:function(){return this.emitter.off.apply(this.emitter,arguments)}},{key:"on",value:function(){return this.emitter.on.apply(this.emitter,arguments)}},{key:"once",value:function(){return this.emitter.once.apply(this.emitter,arguments)}},{key:"pasteHTML",value:function(D,G,H){this.clipboard.dangerouslyPasteHTML(D,G,H)}},{key:"removeFormat",value:function(D,G,H){var V=this,se=O(D,G,H),Z=l(se,4);return D=Z[0],G=Z[1],H=Z[3],B.call(this,function(){return V.editor.removeFormat(D,G)},H,D)}},{key:"scrollIntoView",value:function(){this.selection.scrollIntoView(this.scrollingContainer)}},{key:"setContents",value:function(D){var G=this,H=arguments.length>1&&arguments[1]!==void 0?arguments[1]:p.default.sources.API;return B.call(this,function(){D=new d.default(D);var V=G.getLength(),se=G.editor.deleteText(0,V),Z=G.editor.applyDelta(D),le=Z.ops[Z.ops.length-1];le!=null&&typeof le.insert=="string"&&le.insert[le.insert.length-1]===`
`&&(G.editor.deleteText(G.getLength()-1,1),Z.delete(1));var ne=se.compose(Z);return ne},H)}},{key:"setSelection",value:function(D,G,H){if(D==null)this.selection.setRange(null,G||F.sources.API);else{var V=O(D,G,H),se=l(V,4);D=se[0],G=se[1],H=se[3],this.selection.setRange(new f.Range(D,G),H),H!==p.default.sources.SILENT&&this.selection.scrollIntoView(this.scrollingContainer)}}},{key:"setText",value:function(D){var G=arguments.length>1&&arguments[1]!==void 0?arguments[1]:p.default.sources.API,H=new d.default().insert(D);return this.setContents(H,G)}},{key:"update",value:function(){var D=arguments.length>0&&arguments[0]!==void 0?arguments[0]:p.default.sources.USER,G=this.scroll.update(D);return this.selection.update(D),G}},{key:"updateContents",value:function(D){var G=this,H=arguments.length>1&&arguments[1]!==void 0?arguments[1]:p.default.sources.API;return B.call(this,function(){return D=new d.default(D),G.editor.applyDelta(D,H)},H,!0)}}]),F}();W.DEFAULTS={bounds:null,formats:null,modules:{},placeholder:"",readOnly:!1,scrollingContainer:null,strict:!0,theme:"default"},W.events=p.default.events,W.sources=p.default.sources,W.version="1.3.7",W.imports={delta:d.default,parchment:y.default,"core/module":x.default,"core/theme":C.default};function _(F,K){if(K=(0,S.default)(!0,{container:F,modules:{clipboard:!0,keyboard:!0,history:!0}},K),!K.theme||K.theme===W.DEFAULTS.theme)K.theme=C.default;else if(K.theme=W.import("themes/"+K.theme),K.theme==null)throw new Error("Invalid theme "+K.theme+". Did you register it?");var D=(0,S.default)(!0,{},K.theme.DEFAULTS);[D,K].forEach(function(V){V.modules=V.modules||{},Object.keys(V.modules).forEach(function(se){V.modules[se]===!0&&(V.modules[se]={})})});var G=Object.keys(D.modules).concat(Object.keys(K.modules)),H=G.reduce(function(V,se){var Z=W.import("modules/"+se);return Z==null?I.error("Cannot load "+se+" module. Are you sure you registered it?"):V[se]=Z.DEFAULTS||{},V},{});return K.modules!=null&&K.modules.toolbar&&K.modules.toolbar.constructor!==Object&&(K.modules.toolbar={container:K.modules.toolbar}),K=(0,S.default)(!0,{},W.DEFAULTS,{modules:H},D,K),["bounds","container","scrollingContainer"].forEach(function(V){typeof K[V]=="string"&&(K[V]=document.querySelector(K[V]))}),K.modules=Object.keys(K.modules).reduce(function(V,se){return K.modules[se]&&(V[se]=K.modules[se]),V},{}),K}function B(F,K,D,G){if(this.options.strict&&!this.isEnabled()&&K===p.default.sources.USER)return new d.default;var H=D==null?null:this.getSelection(),V=this.editor.delta,se=F();if(H!=null&&(D===!0&&(D=H.index),G==null?H=z(H,se,K):G!==0&&(H=z(H,D,G,K)),this.setSelection(H,p.default.sources.SILENT)),se.length()>0){var Z,le=[p.default.events.TEXT_CHANGE,se,V,K];if((Z=this.emitter).emit.apply(Z,[p.default.events.EDITOR_CHANGE].concat(le)),K!==p.default.sources.SILENT){var ne;(ne=this.emitter).emit.apply(ne,le)}}return se}function O(F,K,D,G,H){var V={};return typeof F.index=="number"&&typeof F.length=="number"?typeof K!="number"?(H=G,G=D,D=K,K=F.length,F=F.index):(K=F.length,F=F.index):typeof K!="number"&&(H=G,G=D,D=K,K=0),(typeof D>"u"?"undefined":i(D))==="object"?(V=D,H=G):typeof D=="string"&&(G!=null?V[D]=G:H=D),H=H||p.default.sources.API,[F,K,V,H]}function z(F,K,D,G){if(F==null)return null;var H=void 0,V=void 0;if(K instanceof d.default){var se=[F.index,F.index+F.length].map(function(ue){return K.transformPosition(ue,G!==p.default.sources.USER)}),Z=l(se,2);H=Z[0],V=Z[1]}else{var le=[F.index,F.index+F.length].map(function(ue){return ue<K||ue===K&&G===p.default.sources.USER?ue:D>=0?ue+D:Math.max(K,ue+D)}),ne=l(le,2);H=ne[0],V=ne[1]}return new f.Range(H,V-H)}a.expandConfig=_,a.overload=O,a.default=W},function(n,a,r){Object.defineProperty(a,"__esModule",{value:!0});var i=function(){function v(y,f){for(var b=0;b<f.length;b++){var j=f[b];j.enumerable=j.enumerable||!1,j.configurable=!0,"value"in j&&(j.writable=!0),Object.defineProperty(y,j.key,j)}}return function(y,f,b){return f&&v(y.prototype,f),b&&v(y,b),y}}(),l=function v(y,f,b){y===null&&(y=Function.prototype);var j=Object.getOwnPropertyDescriptor(y,f);if(j===void 0){var S=Object.getPrototypeOf(y);return S===null?void 0:v(S,f,b)}else{if("value"in j)return j.value;var k=j.get;return k===void 0?void 0:k.call(b)}},c=r(7),o=u(c),d=r(0),h=u(d);function u(v){return v&&v.__esModule?v:{default:v}}function m(v,y){if(!(v instanceof y))throw new TypeError("Cannot call a class as a function")}function p(v,y){if(!v)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return y&&(typeof y=="object"||typeof y=="function")?y:v}function g(v,y){if(typeof y!="function"&&y!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof y);v.prototype=Object.create(y&&y.prototype,{constructor:{value:v,enumerable:!1,writable:!0,configurable:!0}}),y&&(Object.setPrototypeOf?Object.setPrototypeOf(v,y):v.__proto__=y)}var x=function(v){g(y,v);function y(){return m(this,y),p(this,(y.__proto__||Object.getPrototypeOf(y)).apply(this,arguments))}return i(y,[{key:"formatAt",value:function(b,j,S,k){if(y.compare(this.statics.blotName,S)<0&&h.default.query(S,h.default.Scope.BLOT)){var T=this.isolate(b,j);k&&T.wrap(S,k)}else l(y.prototype.__proto__||Object.getPrototypeOf(y.prototype),"formatAt",this).call(this,b,j,S,k)}},{key:"optimize",value:function(b){if(l(y.prototype.__proto__||Object.getPrototypeOf(y.prototype),"optimize",this).call(this,b),this.parent instanceof y&&y.compare(this.statics.blotName,this.parent.statics.blotName)>0){var j=this.parent.isolate(this.offset(),this.length());this.moveChildren(j),j.wrap(this)}}}],[{key:"compare",value:function(b,j){var S=y.order.indexOf(b),k=y.order.indexOf(j);return S>=0||k>=0?S-k:b===j?0:b<j?-1:1}}]),y}(h.default.Inline);x.allowedChildren=[x,h.default.Embed,o.default],x.order=["cursor","inline","underline","strike","italic","bold","script","link","code"],a.default=x},function(n,a,r){Object.defineProperty(a,"__esModule",{value:!0});var i=r(0),l=c(i);function c(m){return m&&m.__esModule?m:{default:m}}function o(m,p){if(!(m instanceof p))throw new TypeError("Cannot call a class as a function")}function d(m,p){if(!m)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return p&&(typeof p=="object"||typeof p=="function")?p:m}function h(m,p){if(typeof p!="function"&&p!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof p);m.prototype=Object.create(p&&p.prototype,{constructor:{value:m,enumerable:!1,writable:!0,configurable:!0}}),p&&(Object.setPrototypeOf?Object.setPrototypeOf(m,p):m.__proto__=p)}var u=function(m){h(p,m);function p(){return o(this,p),d(this,(p.__proto__||Object.getPrototypeOf(p)).apply(this,arguments))}return p}(l.default.Text);a.default=u},function(n,a,r){Object.defineProperty(a,"__esModule",{value:!0});var i=function(){function f(b,j){for(var S=0;S<j.length;S++){var k=j[S];k.enumerable=k.enumerable||!1,k.configurable=!0,"value"in k&&(k.writable=!0),Object.defineProperty(b,k.key,k)}}return function(b,j,S){return j&&f(b.prototype,j),S&&f(b,S),b}}(),l=function f(b,j,S){b===null&&(b=Function.prototype);var k=Object.getOwnPropertyDescriptor(b,j);if(k===void 0){var T=Object.getPrototypeOf(b);return T===null?void 0:f(T,j,S)}else{if("value"in k)return k.value;var A=k.get;return A===void 0?void 0:A.call(S)}},c=r(54),o=u(c),d=r(10),h=u(d);function u(f){return f&&f.__esModule?f:{default:f}}function m(f,b){if(!(f instanceof b))throw new TypeError("Cannot call a class as a function")}function p(f,b){if(!f)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return b&&(typeof b=="object"||typeof b=="function")?b:f}function g(f,b){if(typeof b!="function"&&b!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof b);f.prototype=Object.create(b&&b.prototype,{constructor:{value:f,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(f,b):f.__proto__=b)}var x=(0,h.default)("quill:events"),v=["selectionchange","mousedown","mouseup","click"];v.forEach(function(f){document.addEventListener(f,function(){for(var b=arguments.length,j=Array(b),S=0;S<b;S++)j[S]=arguments[S];[].slice.call(document.querySelectorAll(".ql-container")).forEach(function(k){if(k.__quill&&k.__quill.emitter){var T;(T=k.__quill.emitter).handleDOM.apply(T,j)}})})});var y=function(f){g(b,f);function b(){m(this,b);var j=p(this,(b.__proto__||Object.getPrototypeOf(b)).call(this));return j.listeners={},j.on("error",x.error),j}return i(b,[{key:"emit",value:function(){x.log.apply(x,arguments),l(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),"emit",this).apply(this,arguments)}},{key:"handleDOM",value:function(S){for(var k=arguments.length,T=Array(k>1?k-1:0),A=1;A<k;A++)T[A-1]=arguments[A];(this.listeners[S.type]||[]).forEach(function(C){var w=C.node,P=C.handler;(S.target===w||w.contains(S.target))&&P.apply(void 0,[S].concat(T))})}},{key:"listenDOM",value:function(S,k,T){this.listeners[S]||(this.listeners[S]=[]),this.listeners[S].push({node:k,handler:T})}}]),b}(o.default);y.events={EDITOR_CHANGE:"editor-change",SCROLL_BEFORE_UPDATE:"scroll-before-update",SCROLL_OPTIMIZE:"scroll-optimize",SCROLL_UPDATE:"scroll-update",SELECTION_CHANGE:"selection-change",TEXT_CHANGE:"text-change"},y.sources={API:"api",SILENT:"silent",USER:"user"},a.default=y},function(n,a,r){Object.defineProperty(a,"__esModule",{value:!0});function i(c,o){if(!(c instanceof o))throw new TypeError("Cannot call a class as a function")}var l=function c(o){var d=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};i(this,c),this.quill=o,this.options=d};l.DEFAULTS={},a.default=l},function(n,a,r){Object.defineProperty(a,"__esModule",{value:!0});var i=["error","warn","log","info"],l="warn";function c(d){if(i.indexOf(d)<=i.indexOf(l)){for(var h,u=arguments.length,m=Array(u>1?u-1:0),p=1;p<u;p++)m[p-1]=arguments[p];(h=console)[d].apply(h,m)}}function o(d){return i.reduce(function(h,u){return h[u]=c.bind(console,u,d),h},{})}c.level=o.level=function(d){l=d},a.default=o},function(n,a,r){var i=Array.prototype.slice,l=r(52),c=r(53),o=n.exports=function(m,p,g){return g||(g={}),m===p?!0:m instanceof Date&&p instanceof Date?m.getTime()===p.getTime():!m||!p||typeof m!="object"&&typeof p!="object"?g.strict?m===p:m==p:u(m,p,g)};function d(m){return m==null}function h(m){return!(!m||typeof m!="object"||typeof m.length!="number"||typeof m.copy!="function"||typeof m.slice!="function"||m.length>0&&typeof m[0]!="number")}function u(m,p,g){var x,v;if(d(m)||d(p)||m.prototype!==p.prototype)return!1;if(c(m))return c(p)?(m=i.call(m),p=i.call(p),o(m,p,g)):!1;if(h(m)){if(!h(p)||m.length!==p.length)return!1;for(x=0;x<m.length;x++)if(m[x]!==p[x])return!1;return!0}try{var y=l(m),f=l(p)}catch{return!1}if(y.length!=f.length)return!1;for(y.sort(),f.sort(),x=y.length-1;x>=0;x--)if(y[x]!=f[x])return!1;for(x=y.length-1;x>=0;x--)if(v=y[x],!o(m[v],p[v],g))return!1;return typeof m==typeof p}},function(n,a,r){Object.defineProperty(a,"__esModule",{value:!0});var i=r(1),l=function(){function c(o,d,h){h===void 0&&(h={}),this.attrName=o,this.keyName=d;var u=i.Scope.TYPE&i.Scope.ATTRIBUTE;h.scope!=null?this.scope=h.scope&i.Scope.LEVEL|u:this.scope=i.Scope.ATTRIBUTE,h.whitelist!=null&&(this.whitelist=h.whitelist)}return c.keys=function(o){return[].map.call(o.attributes,function(d){return d.name})},c.prototype.add=function(o,d){return this.canAdd(o,d)?(o.setAttribute(this.keyName,d),!0):!1},c.prototype.canAdd=function(o,d){var h=i.query(o,i.Scope.BLOT&(this.scope|i.Scope.TYPE));return h==null?!1:this.whitelist==null?!0:typeof d=="string"?this.whitelist.indexOf(d.replace(/["']/g,""))>-1:this.whitelist.indexOf(d)>-1},c.prototype.remove=function(o){o.removeAttribute(this.keyName)},c.prototype.value=function(o){var d=o.getAttribute(this.keyName);return this.canAdd(o,d)&&d?d:""},c}();a.default=l},function(n,a,r){Object.defineProperty(a,"__esModule",{value:!0}),a.default=a.Code=void 0;var i=function(){function A(C,w){var P=[],M=!0,I=!1,W=void 0;try{for(var _=C[Symbol.iterator](),B;!(M=(B=_.next()).done)&&(P.push(B.value),!(w&&P.length===w));M=!0);}catch(O){I=!0,W=O}finally{try{!M&&_.return&&_.return()}finally{if(I)throw W}}return P}return function(C,w){if(Array.isArray(C))return C;if(Symbol.iterator in Object(C))return A(C,w);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),l=function(){function A(C,w){for(var P=0;P<w.length;P++){var M=w[P];M.enumerable=M.enumerable||!1,M.configurable=!0,"value"in M&&(M.writable=!0),Object.defineProperty(C,M.key,M)}}return function(C,w,P){return w&&A(C.prototype,w),P&&A(C,P),C}}(),c=function A(C,w,P){C===null&&(C=Function.prototype);var M=Object.getOwnPropertyDescriptor(C,w);if(M===void 0){var I=Object.getPrototypeOf(C);return I===null?void 0:A(I,w,P)}else{if("value"in M)return M.value;var W=M.get;return W===void 0?void 0:W.call(P)}},o=r(2),d=f(o),h=r(0),u=f(h),m=r(4),p=f(m),g=r(6),x=f(g),v=r(7),y=f(v);function f(A){return A&&A.__esModule?A:{default:A}}function b(A,C){if(!(A instanceof C))throw new TypeError("Cannot call a class as a function")}function j(A,C){if(!A)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return C&&(typeof C=="object"||typeof C=="function")?C:A}function S(A,C){if(typeof C!="function"&&C!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof C);A.prototype=Object.create(C&&C.prototype,{constructor:{value:A,enumerable:!1,writable:!0,configurable:!0}}),C&&(Object.setPrototypeOf?Object.setPrototypeOf(A,C):A.__proto__=C)}var k=function(A){S(C,A);function C(){return b(this,C),j(this,(C.__proto__||Object.getPrototypeOf(C)).apply(this,arguments))}return C}(x.default);k.blotName="code",k.tagName="CODE";var T=function(A){S(C,A);function C(){return b(this,C),j(this,(C.__proto__||Object.getPrototypeOf(C)).apply(this,arguments))}return l(C,[{key:"delta",value:function(){var P=this,M=this.domNode.textContent;return M.endsWith(`
`)&&(M=M.slice(0,-1)),M.split(`
`).reduce(function(I,W){return I.insert(W).insert(`
`,P.formats())},new d.default)}},{key:"format",value:function(P,M){if(!(P===this.statics.blotName&&M)){var I=this.descendant(y.default,this.length()-1),W=i(I,1),_=W[0];_!=null&&_.deleteAt(_.length()-1,1),c(C.prototype.__proto__||Object.getPrototypeOf(C.prototype),"format",this).call(this,P,M)}}},{key:"formatAt",value:function(P,M,I,W){if(M!==0&&!(u.default.query(I,u.default.Scope.BLOCK)==null||I===this.statics.blotName&&W===this.statics.formats(this.domNode))){var _=this.newlineIndex(P);if(!(_<0||_>=P+M)){var B=this.newlineIndex(P,!0)+1,O=_-B+1,z=this.isolate(B,O),F=z.next;z.format(I,W),F instanceof C&&F.formatAt(0,P-B+M-O,I,W)}}}},{key:"insertAt",value:function(P,M,I){if(I==null){var W=this.descendant(y.default,P),_=i(W,2),B=_[0],O=_[1];B.insertAt(O,M)}}},{key:"length",value:function(){var P=this.domNode.textContent.length;return this.domNode.textContent.endsWith(`
`)?P:P+1}},{key:"newlineIndex",value:function(P){var M=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(M)return this.domNode.textContent.slice(0,P).lastIndexOf(`
`);var I=this.domNode.textContent.slice(P).indexOf(`
`);return I>-1?P+I:-1}},{key:"optimize",value:function(P){this.domNode.textContent.endsWith(`
`)||this.appendChild(u.default.create("text",`
`)),c(C.prototype.__proto__||Object.getPrototypeOf(C.prototype),"optimize",this).call(this,P);var M=this.next;M!=null&&M.prev===this&&M.statics.blotName===this.statics.blotName&&this.statics.formats(this.domNode)===M.statics.formats(M.domNode)&&(M.optimize(P),M.moveChildren(this),M.remove())}},{key:"replace",value:function(P){c(C.prototype.__proto__||Object.getPrototypeOf(C.prototype),"replace",this).call(this,P),[].slice.call(this.domNode.querySelectorAll("*")).forEach(function(M){var I=u.default.find(M);I==null?M.parentNode.removeChild(M):I instanceof u.default.Embed?I.remove():I.unwrap()})}}],[{key:"create",value:function(P){var M=c(C.__proto__||Object.getPrototypeOf(C),"create",this).call(this,P);return M.setAttribute("spellcheck",!1),M}},{key:"formats",value:function(){return!0}}]),C}(p.default);T.blotName="code-block",T.tagName="PRE",T.TAB="  ",a.Code=k,a.default=T},function(n,a,r){Object.defineProperty(a,"__esModule",{value:!0});var i=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(F){return typeof F}:function(F){return F&&typeof Symbol=="function"&&F.constructor===Symbol&&F!==Symbol.prototype?"symbol":typeof F},l=function(){function F(K,D){var G=[],H=!0,V=!1,se=void 0;try{for(var Z=K[Symbol.iterator](),le;!(H=(le=Z.next()).done)&&(G.push(le.value),!(D&&G.length===D));H=!0);}catch(ne){V=!0,se=ne}finally{try{!H&&Z.return&&Z.return()}finally{if(V)throw se}}return G}return function(K,D){if(Array.isArray(K))return K;if(Symbol.iterator in Object(K))return F(K,D);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),c=function(){function F(K,D){for(var G=0;G<D.length;G++){var H=D[G];H.enumerable=H.enumerable||!1,H.configurable=!0,"value"in H&&(H.writable=!0),Object.defineProperty(K,H.key,H)}}return function(K,D,G){return D&&F(K.prototype,D),G&&F(K,G),K}}(),o=r(2),d=M(o),h=r(20),u=M(h),m=r(0),p=M(m),g=r(13),x=M(g),v=r(24),y=M(v),f=r(4),b=M(f),j=r(16),S=M(j),k=r(21),T=M(k),A=r(11),C=M(A),w=r(3),P=M(w);function M(F){return F&&F.__esModule?F:{default:F}}function I(F,K,D){return K in F?Object.defineProperty(F,K,{value:D,enumerable:!0,configurable:!0,writable:!0}):F[K]=D,F}function W(F,K){if(!(F instanceof K))throw new TypeError("Cannot call a class as a function")}var _=/^[ -~]*$/,B=function(){function F(K){W(this,F),this.scroll=K,this.delta=this.getDelta()}return c(F,[{key:"applyDelta",value:function(D){var G=this,H=!1;this.scroll.update();var V=this.scroll.length();return this.scroll.batchStart(),D=z(D),D.reduce(function(se,Z){var le=Z.retain||Z.delete||Z.insert.length||1,ne=Z.attributes||{};if(Z.insert!=null){if(typeof Z.insert=="string"){var ue=Z.insert;ue.endsWith(`
`)&&H&&(H=!1,ue=ue.slice(0,-1)),se>=V&&!ue.endsWith(`
`)&&(H=!0),G.scroll.insertAt(se,ue);var te=G.scroll.line(se),Ae=l(te,2),Ge=Ae[0],be=Ae[1],Ie=(0,P.default)({},(0,f.bubbleFormats)(Ge));if(Ge instanceof b.default){var ve=Ge.descendant(p.default.Leaf,be),ie=l(ve,1),de=ie[0];Ie=(0,P.default)(Ie,(0,f.bubbleFormats)(de))}ne=u.default.attributes.diff(Ie,ne)||{}}else if(i(Z.insert)==="object"){var ee=Object.keys(Z.insert)[0];if(ee==null)return se;G.scroll.insertAt(se,ee,Z.insert[ee])}V+=le}return Object.keys(ne).forEach(function(ae){G.scroll.formatAt(se,le,ae,ne[ae])}),se+le},0),D.reduce(function(se,Z){return typeof Z.delete=="number"?(G.scroll.deleteAt(se,Z.delete),se):se+(Z.retain||Z.insert.length||1)},0),this.scroll.batchEnd(),this.update(D)}},{key:"deleteText",value:function(D,G){return this.scroll.deleteAt(D,G),this.update(new d.default().retain(D).delete(G))}},{key:"formatLine",value:function(D,G){var H=this,V=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return this.scroll.update(),Object.keys(V).forEach(function(se){if(!(H.scroll.whitelist!=null&&!H.scroll.whitelist[se])){var Z=H.scroll.lines(D,Math.max(G,1)),le=G;Z.forEach(function(ne){var ue=ne.length();if(!(ne instanceof x.default))ne.format(se,V[se]);else{var te=D-ne.offset(H.scroll),Ae=ne.newlineIndex(te+le)-te+1;ne.formatAt(te,Ae,se,V[se])}le-=ue})}}),this.scroll.optimize(),this.update(new d.default().retain(D).retain(G,(0,T.default)(V)))}},{key:"formatText",value:function(D,G){var H=this,V=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return Object.keys(V).forEach(function(se){H.scroll.formatAt(D,G,se,V[se])}),this.update(new d.default().retain(D).retain(G,(0,T.default)(V)))}},{key:"getContents",value:function(D,G){return this.delta.slice(D,D+G)}},{key:"getDelta",value:function(){return this.scroll.lines().reduce(function(D,G){return D.concat(G.delta())},new d.default)}},{key:"getFormat",value:function(D){var G=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,H=[],V=[];G===0?this.scroll.path(D).forEach(function(Z){var le=l(Z,1),ne=le[0];ne instanceof b.default?H.push(ne):ne instanceof p.default.Leaf&&V.push(ne)}):(H=this.scroll.lines(D,G),V=this.scroll.descendants(p.default.Leaf,D,G));var se=[H,V].map(function(Z){if(Z.length===0)return{};for(var le=(0,f.bubbleFormats)(Z.shift());Object.keys(le).length>0;){var ne=Z.shift();if(ne==null)return le;le=O((0,f.bubbleFormats)(ne),le)}return le});return P.default.apply(P.default,se)}},{key:"getText",value:function(D,G){return this.getContents(D,G).filter(function(H){return typeof H.insert=="string"}).map(function(H){return H.insert}).join("")}},{key:"insertEmbed",value:function(D,G,H){return this.scroll.insertAt(D,G,H),this.update(new d.default().retain(D).insert(I({},G,H)))}},{key:"insertText",value:function(D,G){var H=this,V=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return G=G.replace(/\r\n/g,`
`).replace(/\r/g,`
`),this.scroll.insertAt(D,G),Object.keys(V).forEach(function(se){H.scroll.formatAt(D,G.length,se,V[se])}),this.update(new d.default().retain(D).insert(G,(0,T.default)(V)))}},{key:"isBlank",value:function(){if(this.scroll.children.length==0)return!0;if(this.scroll.children.length>1)return!1;var D=this.scroll.children.head;return D.statics.blotName!==b.default.blotName||D.children.length>1?!1:D.children.head instanceof S.default}},{key:"removeFormat",value:function(D,G){var H=this.getText(D,G),V=this.scroll.line(D+G),se=l(V,2),Z=se[0],le=se[1],ne=0,ue=new d.default;Z!=null&&(Z instanceof x.default?ne=Z.newlineIndex(le)-le+1:ne=Z.length()-le,ue=Z.delta().slice(le,le+ne-1).insert(`
`));var te=this.getContents(D,G+ne),Ae=te.diff(new d.default().insert(H).concat(ue)),Ge=new d.default().retain(D).concat(Ae);return this.applyDelta(Ge)}},{key:"update",value:function(D){var G=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],H=arguments.length>2&&arguments[2]!==void 0?arguments[2]:void 0,V=this.delta;if(G.length===1&&G[0].type==="characterData"&&G[0].target.data.match(_)&&p.default.find(G[0].target)){var se=p.default.find(G[0].target),Z=(0,f.bubbleFormats)(se),le=se.offset(this.scroll),ne=G[0].oldValue.replace(y.default.CONTENTS,""),ue=new d.default().insert(ne),te=new d.default().insert(se.value()),Ae=new d.default().retain(le).concat(ue.diff(te,H));D=Ae.reduce(function(Ge,be){return be.insert?Ge.insert(be.insert,Z):Ge.push(be)},new d.default),this.delta=V.compose(D)}else this.delta=this.getDelta(),(!D||!(0,C.default)(V.compose(D),this.delta))&&(D=V.diff(this.delta,H));return D}}]),F}();function O(F,K){return Object.keys(K).reduce(function(D,G){return F[G]==null||(K[G]===F[G]?D[G]=K[G]:Array.isArray(K[G])?K[G].indexOf(F[G])<0&&(D[G]=K[G].concat([F[G]])):D[G]=[K[G],F[G]]),D},{})}function z(F){return F.reduce(function(K,D){if(D.insert===1){var G=(0,T.default)(D.attributes);return delete G.image,K.insert({image:D.attributes.image},G)}if(D.attributes!=null&&(D.attributes.list===!0||D.attributes.bullet===!0)&&(D=(0,T.default)(D),D.attributes.list?D.attributes.list="ordered":(D.attributes.list="bullet",delete D.attributes.bullet)),typeof D.insert=="string"){var H=D.insert.replace(/\r\n/g,`
`).replace(/\r/g,`
`);return K.insert(H,D.attributes)}return K.push(D)},new d.default)}a.default=B},function(n,a,r){Object.defineProperty(a,"__esModule",{value:!0}),a.default=a.Range=void 0;var i=function(){function A(C,w){var P=[],M=!0,I=!1,W=void 0;try{for(var _=C[Symbol.iterator](),B;!(M=(B=_.next()).done)&&(P.push(B.value),!(w&&P.length===w));M=!0);}catch(O){I=!0,W=O}finally{try{!M&&_.return&&_.return()}finally{if(I)throw W}}return P}return function(C,w){if(Array.isArray(C))return C;if(Symbol.iterator in Object(C))return A(C,w);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),l=function(){function A(C,w){for(var P=0;P<w.length;P++){var M=w[P];M.enumerable=M.enumerable||!1,M.configurable=!0,"value"in M&&(M.writable=!0),Object.defineProperty(C,M.key,M)}}return function(C,w,P){return w&&A(C.prototype,w),P&&A(C,P),C}}(),c=r(0),o=y(c),d=r(21),h=y(d),u=r(11),m=y(u),p=r(8),g=y(p),x=r(10),v=y(x);function y(A){return A&&A.__esModule?A:{default:A}}function f(A){if(Array.isArray(A)){for(var C=0,w=Array(A.length);C<A.length;C++)w[C]=A[C];return w}else return Array.from(A)}function b(A,C){if(!(A instanceof C))throw new TypeError("Cannot call a class as a function")}var j=(0,v.default)("quill:selection"),S=function A(C){var w=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;b(this,A),this.index=C,this.length=w},k=function(){function A(C,w){var P=this;b(this,A),this.emitter=w,this.scroll=C,this.composing=!1,this.mouseDown=!1,this.root=this.scroll.domNode,this.cursor=o.default.create("cursor",this),this.lastRange=this.savedRange=new S(0,0),this.handleComposition(),this.handleDragging(),this.emitter.listenDOM("selectionchange",document,function(){P.mouseDown||setTimeout(P.update.bind(P,g.default.sources.USER),1)}),this.emitter.on(g.default.events.EDITOR_CHANGE,function(M,I){M===g.default.events.TEXT_CHANGE&&I.length()>0&&P.update(g.default.sources.SILENT)}),this.emitter.on(g.default.events.SCROLL_BEFORE_UPDATE,function(){if(P.hasFocus()){var M=P.getNativeRange();M!=null&&M.start.node!==P.cursor.textNode&&P.emitter.once(g.default.events.SCROLL_UPDATE,function(){try{P.setNativeRange(M.start.node,M.start.offset,M.end.node,M.end.offset)}catch{}})}}),this.emitter.on(g.default.events.SCROLL_OPTIMIZE,function(M,I){if(I.range){var W=I.range,_=W.startNode,B=W.startOffset,O=W.endNode,z=W.endOffset;P.setNativeRange(_,B,O,z)}}),this.update(g.default.sources.SILENT)}return l(A,[{key:"handleComposition",value:function(){var w=this;this.root.addEventListener("compositionstart",function(){w.composing=!0}),this.root.addEventListener("compositionend",function(){if(w.composing=!1,w.cursor.parent){var P=w.cursor.restore();if(!P)return;setTimeout(function(){w.setNativeRange(P.startNode,P.startOffset,P.endNode,P.endOffset)},1)}})}},{key:"handleDragging",value:function(){var w=this;this.emitter.listenDOM("mousedown",document.body,function(){w.mouseDown=!0}),this.emitter.listenDOM("mouseup",document.body,function(){w.mouseDown=!1,w.update(g.default.sources.USER)})}},{key:"focus",value:function(){this.hasFocus()||(this.root.focus(),this.setRange(this.savedRange))}},{key:"format",value:function(w,P){if(!(this.scroll.whitelist!=null&&!this.scroll.whitelist[w])){this.scroll.update();var M=this.getNativeRange();if(!(M==null||!M.native.collapsed||o.default.query(w,o.default.Scope.BLOCK))){if(M.start.node!==this.cursor.textNode){var I=o.default.find(M.start.node,!1);if(I==null)return;if(I instanceof o.default.Leaf){var W=I.split(M.start.offset);I.parent.insertBefore(this.cursor,W)}else I.insertBefore(this.cursor,M.start.node);this.cursor.attach()}this.cursor.format(w,P),this.scroll.optimize(),this.setNativeRange(this.cursor.textNode,this.cursor.textNode.data.length),this.update()}}}},{key:"getBounds",value:function(w){var P=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,M=this.scroll.length();w=Math.min(w,M-1),P=Math.min(w+P,M-1)-w;var I=void 0,W=this.scroll.leaf(w),_=i(W,2),B=_[0],O=_[1];if(B==null)return null;var z=B.position(O,!0),F=i(z,2);I=F[0],O=F[1];var K=document.createRange();if(P>0){K.setStart(I,O);var D=this.scroll.leaf(w+P),G=i(D,2);if(B=G[0],O=G[1],B==null)return null;var H=B.position(O,!0),V=i(H,2);return I=V[0],O=V[1],K.setEnd(I,O),K.getBoundingClientRect()}else{var se="left",Z=void 0;return I instanceof Text?(O<I.data.length?(K.setStart(I,O),K.setEnd(I,O+1)):(K.setStart(I,O-1),K.setEnd(I,O),se="right"),Z=K.getBoundingClientRect()):(Z=B.domNode.getBoundingClientRect(),O>0&&(se="right")),{bottom:Z.top+Z.height,height:Z.height,left:Z[se],right:Z[se],top:Z.top,width:0}}}},{key:"getNativeRange",value:function(){var w=document.getSelection();if(w==null||w.rangeCount<=0)return null;var P=w.getRangeAt(0);if(P==null)return null;var M=this.normalizeNative(P);return j.info("getNativeRange",M),M}},{key:"getRange",value:function(){var w=this.getNativeRange();if(w==null)return[null,null];var P=this.normalizedToRange(w);return[P,w]}},{key:"hasFocus",value:function(){return document.activeElement===this.root}},{key:"normalizedToRange",value:function(w){var P=this,M=[[w.start.node,w.start.offset]];w.native.collapsed||M.push([w.end.node,w.end.offset]);var I=M.map(function(B){var O=i(B,2),z=O[0],F=O[1],K=o.default.find(z,!0),D=K.offset(P.scroll);return F===0?D:K instanceof o.default.Container?D+K.length():D+K.index(z,F)}),W=Math.min(Math.max.apply(Math,f(I)),this.scroll.length()-1),_=Math.min.apply(Math,[W].concat(f(I)));return new S(_,W-_)}},{key:"normalizeNative",value:function(w){if(!T(this.root,w.startContainer)||!w.collapsed&&!T(this.root,w.endContainer))return null;var P={start:{node:w.startContainer,offset:w.startOffset},end:{node:w.endContainer,offset:w.endOffset},native:w};return[P.start,P.end].forEach(function(M){for(var I=M.node,W=M.offset;!(I instanceof Text)&&I.childNodes.length>0;)if(I.childNodes.length>W)I=I.childNodes[W],W=0;else if(I.childNodes.length===W)I=I.lastChild,W=I instanceof Text?I.data.length:I.childNodes.length+1;else break;M.node=I,M.offset=W}),P}},{key:"rangeToNative",value:function(w){var P=this,M=w.collapsed?[w.index]:[w.index,w.index+w.length],I=[],W=this.scroll.length();return M.forEach(function(_,B){_=Math.min(W-1,_);var O=void 0,z=P.scroll.leaf(_),F=i(z,2),K=F[0],D=F[1],G=K.position(D,B!==0),H=i(G,2);O=H[0],D=H[1],I.push(O,D)}),I.length<2&&(I=I.concat(I)),I}},{key:"scrollIntoView",value:function(w){var P=this.lastRange;if(P!=null){var M=this.getBounds(P.index,P.length);if(M!=null){var I=this.scroll.length()-1,W=this.scroll.line(Math.min(P.index,I)),_=i(W,1),B=_[0],O=B;if(P.length>0){var z=this.scroll.line(Math.min(P.index+P.length,I)),F=i(z,1);O=F[0]}if(!(B==null||O==null)){var K=w.getBoundingClientRect();M.top<K.top?w.scrollTop-=K.top-M.top:M.bottom>K.bottom&&(w.scrollTop+=M.bottom-K.bottom)}}}}},{key:"setNativeRange",value:function(w,P){var M=arguments.length>2&&arguments[2]!==void 0?arguments[2]:w,I=arguments.length>3&&arguments[3]!==void 0?arguments[3]:P,W=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!1;if(j.info("setNativeRange",w,P,M,I),!(w!=null&&(this.root.parentNode==null||w.parentNode==null||M.parentNode==null))){var _=document.getSelection();if(_!=null)if(w!=null){this.hasFocus()||this.root.focus();var B=(this.getNativeRange()||{}).native;if(B==null||W||w!==B.startContainer||P!==B.startOffset||M!==B.endContainer||I!==B.endOffset){w.tagName=="BR"&&(P=[].indexOf.call(w.parentNode.childNodes,w),w=w.parentNode),M.tagName=="BR"&&(I=[].indexOf.call(M.parentNode.childNodes,M),M=M.parentNode);var O=document.createRange();O.setStart(w,P),O.setEnd(M,I),_.removeAllRanges(),_.addRange(O)}}else _.removeAllRanges(),this.root.blur(),document.body.focus()}}},{key:"setRange",value:function(w){var P=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,M=arguments.length>2&&arguments[2]!==void 0?arguments[2]:g.default.sources.API;if(typeof P=="string"&&(M=P,P=!1),j.info("setRange",w),w!=null){var I=this.rangeToNative(w);this.setNativeRange.apply(this,f(I).concat([P]))}else this.setNativeRange(null);this.update(M)}},{key:"update",value:function(){var w=arguments.length>0&&arguments[0]!==void 0?arguments[0]:g.default.sources.USER,P=this.lastRange,M=this.getRange(),I=i(M,2),W=I[0],_=I[1];if(this.lastRange=W,this.lastRange!=null&&(this.savedRange=this.lastRange),!(0,m.default)(P,this.lastRange)){var B;!this.composing&&_!=null&&_.native.collapsed&&_.start.node!==this.cursor.textNode&&this.cursor.restore();var O=[g.default.events.SELECTION_CHANGE,(0,h.default)(this.lastRange),(0,h.default)(P),w];if((B=this.emitter).emit.apply(B,[g.default.events.EDITOR_CHANGE].concat(O)),w!==g.default.sources.SILENT){var z;(z=this.emitter).emit.apply(z,O)}}}}]),A}();function T(A,C){try{C.parentNode}catch{return!1}return C instanceof Text&&(C=C.parentNode),A.contains(C)}a.Range=S,a.default=k},function(n,a,r){Object.defineProperty(a,"__esModule",{value:!0});var i=function(){function g(x,v){for(var y=0;y<v.length;y++){var f=v[y];f.enumerable=f.enumerable||!1,f.configurable=!0,"value"in f&&(f.writable=!0),Object.defineProperty(x,f.key,f)}}return function(x,v,y){return v&&g(x.prototype,v),y&&g(x,y),x}}(),l=function g(x,v,y){x===null&&(x=Function.prototype);var f=Object.getOwnPropertyDescriptor(x,v);if(f===void 0){var b=Object.getPrototypeOf(x);return b===null?void 0:g(b,v,y)}else{if("value"in f)return f.value;var j=f.get;return j===void 0?void 0:j.call(y)}},c=r(0),o=d(c);function d(g){return g&&g.__esModule?g:{default:g}}function h(g,x){if(!(g instanceof x))throw new TypeError("Cannot call a class as a function")}function u(g,x){if(!g)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return x&&(typeof x=="object"||typeof x=="function")?x:g}function m(g,x){if(typeof x!="function"&&x!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof x);g.prototype=Object.create(x&&x.prototype,{constructor:{value:g,enumerable:!1,writable:!0,configurable:!0}}),x&&(Object.setPrototypeOf?Object.setPrototypeOf(g,x):g.__proto__=x)}var p=function(g){m(x,g);function x(){return h(this,x),u(this,(x.__proto__||Object.getPrototypeOf(x)).apply(this,arguments))}return i(x,[{key:"insertInto",value:function(y,f){y.children.length===0?l(x.prototype.__proto__||Object.getPrototypeOf(x.prototype),"insertInto",this).call(this,y,f):this.remove()}},{key:"length",value:function(){return 0}},{key:"value",value:function(){return""}}],[{key:"value",value:function(){}}]),x}(o.default.Embed);p.blotName="break",p.tagName="BR",a.default=p},function(n,a,r){var i=this&&this.__extends||function(){var u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(m,p){m.__proto__=p}||function(m,p){for(var g in p)p.hasOwnProperty(g)&&(m[g]=p[g])};return function(m,p){u(m,p);function g(){this.constructor=m}m.prototype=p===null?Object.create(p):(g.prototype=p.prototype,new g)}}();Object.defineProperty(a,"__esModule",{value:!0});var l=r(44),c=r(30),o=r(1),d=function(u){i(m,u);function m(p){var g=u.call(this,p)||this;return g.build(),g}return m.prototype.appendChild=function(p){this.insertBefore(p)},m.prototype.attach=function(){u.prototype.attach.call(this),this.children.forEach(function(p){p.attach()})},m.prototype.build=function(){var p=this;this.children=new l.default,[].slice.call(this.domNode.childNodes).reverse().forEach(function(g){try{var x=h(g);p.insertBefore(x,p.children.head||void 0)}catch(v){if(v instanceof o.ParchmentError)return;throw v}})},m.prototype.deleteAt=function(p,g){if(p===0&&g===this.length())return this.remove();this.children.forEachAt(p,g,function(x,v,y){x.deleteAt(v,y)})},m.prototype.descendant=function(p,g){var x=this.children.find(g),v=x[0],y=x[1];return p.blotName==null&&p(v)||p.blotName!=null&&v instanceof p?[v,y]:v instanceof m?v.descendant(p,y):[null,-1]},m.prototype.descendants=function(p,g,x){g===void 0&&(g=0),x===void 0&&(x=Number.MAX_VALUE);var v=[],y=x;return this.children.forEachAt(g,x,function(f,b,j){(p.blotName==null&&p(f)||p.blotName!=null&&f instanceof p)&&v.push(f),f instanceof m&&(v=v.concat(f.descendants(p,b,y))),y-=j}),v},m.prototype.detach=function(){this.children.forEach(function(p){p.detach()}),u.prototype.detach.call(this)},m.prototype.formatAt=function(p,g,x,v){this.children.forEachAt(p,g,function(y,f,b){y.formatAt(f,b,x,v)})},m.prototype.insertAt=function(p,g,x){var v=this.children.find(p),y=v[0],f=v[1];if(y)y.insertAt(f,g,x);else{var b=x==null?o.create("text",g):o.create(g,x);this.appendChild(b)}},m.prototype.insertBefore=function(p,g){if(this.statics.allowedChildren!=null&&!this.statics.allowedChildren.some(function(x){return p instanceof x}))throw new o.ParchmentError("Cannot insert "+p.statics.blotName+" into "+this.statics.blotName);p.insertInto(this,g)},m.prototype.length=function(){return this.children.reduce(function(p,g){return p+g.length()},0)},m.prototype.moveChildren=function(p,g){this.children.forEach(function(x){p.insertBefore(x,g)})},m.prototype.optimize=function(p){if(u.prototype.optimize.call(this,p),this.children.length===0)if(this.statics.defaultChild!=null){var g=o.create(this.statics.defaultChild);this.appendChild(g),g.optimize(p)}else this.remove()},m.prototype.path=function(p,g){g===void 0&&(g=!1);var x=this.children.find(p,g),v=x[0],y=x[1],f=[[this,p]];return v instanceof m?f.concat(v.path(y,g)):(v!=null&&f.push([v,y]),f)},m.prototype.removeChild=function(p){this.children.remove(p)},m.prototype.replace=function(p){p instanceof m&&p.moveChildren(this),u.prototype.replace.call(this,p)},m.prototype.split=function(p,g){if(g===void 0&&(g=!1),!g){if(p===0)return this;if(p===this.length())return this.next}var x=this.clone();return this.parent.insertBefore(x,this.next),this.children.forEachAt(p,this.length(),function(v,y,f){v=v.split(y,g),x.appendChild(v)}),x},m.prototype.unwrap=function(){this.moveChildren(this.parent,this.next),this.remove()},m.prototype.update=function(p,g){var x=this,v=[],y=[];p.forEach(function(f){f.target===x.domNode&&f.type==="childList"&&(v.push.apply(v,f.addedNodes),y.push.apply(y,f.removedNodes))}),y.forEach(function(f){if(!(f.parentNode!=null&&f.tagName!=="IFRAME"&&document.body.compareDocumentPosition(f)&Node.DOCUMENT_POSITION_CONTAINED_BY)){var b=o.find(f);b!=null&&(b.domNode.parentNode==null||b.domNode.parentNode===x.domNode)&&b.detach()}}),v.filter(function(f){return f.parentNode==x.domNode}).sort(function(f,b){return f===b?0:f.compareDocumentPosition(b)&Node.DOCUMENT_POSITION_FOLLOWING?1:-1}).forEach(function(f){var b=null;f.nextSibling!=null&&(b=o.find(f.nextSibling));var j=h(f);(j.next!=b||j.next==null)&&(j.parent!=null&&j.parent.removeChild(x),x.insertBefore(j,b||void 0))})},m}(c.default);function h(u){var m=o.find(u);if(m==null)try{m=o.create(u)}catch{m=o.create(o.Scope.INLINE),[].slice.call(u.childNodes).forEach(function(g){m.domNode.appendChild(g)}),u.parentNode&&u.parentNode.replaceChild(m.domNode,u),m.attach()}return m}a.default=d},function(n,a,r){var i=this&&this.__extends||function(){var u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(m,p){m.__proto__=p}||function(m,p){for(var g in p)p.hasOwnProperty(g)&&(m[g]=p[g])};return function(m,p){u(m,p);function g(){this.constructor=m}m.prototype=p===null?Object.create(p):(g.prototype=p.prototype,new g)}}();Object.defineProperty(a,"__esModule",{value:!0});var l=r(12),c=r(31),o=r(17),d=r(1),h=function(u){i(m,u);function m(p){var g=u.call(this,p)||this;return g.attributes=new c.default(g.domNode),g}return m.formats=function(p){if(typeof this.tagName=="string")return!0;if(Array.isArray(this.tagName))return p.tagName.toLowerCase()},m.prototype.format=function(p,g){var x=d.query(p);x instanceof l.default?this.attributes.attribute(x,g):g&&x!=null&&(p!==this.statics.blotName||this.formats()[p]!==g)&&this.replaceWith(p,g)},m.prototype.formats=function(){var p=this.attributes.values(),g=this.statics.formats(this.domNode);return g!=null&&(p[this.statics.blotName]=g),p},m.prototype.replaceWith=function(p,g){var x=u.prototype.replaceWith.call(this,p,g);return this.attributes.copy(x),x},m.prototype.update=function(p,g){var x=this;u.prototype.update.call(this,p,g),p.some(function(v){return v.target===x.domNode&&v.type==="attributes"})&&this.attributes.build()},m.prototype.wrap=function(p,g){var x=u.prototype.wrap.call(this,p,g);return x instanceof m&&x.statics.scope===this.statics.scope&&this.attributes.move(x),x},m}(o.default);a.default=h},function(n,a,r){var i=this&&this.__extends||function(){var d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(h,u){h.__proto__=u}||function(h,u){for(var m in u)u.hasOwnProperty(m)&&(h[m]=u[m])};return function(h,u){d(h,u);function m(){this.constructor=h}h.prototype=u===null?Object.create(u):(m.prototype=u.prototype,new m)}}();Object.defineProperty(a,"__esModule",{value:!0});var l=r(30),c=r(1),o=function(d){i(h,d);function h(){return d!==null&&d.apply(this,arguments)||this}return h.value=function(u){return!0},h.prototype.index=function(u,m){return this.domNode===u||this.domNode.compareDocumentPosition(u)&Node.DOCUMENT_POSITION_CONTAINED_BY?Math.min(m,1):-1},h.prototype.position=function(u,m){var p=[].indexOf.call(this.parent.domNode.childNodes,this.domNode);return u>0&&(p+=1),[this.parent.domNode,p]},h.prototype.value=function(){var u;return u={},u[this.statics.blotName]=this.statics.value(this.domNode)||!0,u},h.scope=c.Scope.INLINE_BLOT,h}(l.default);a.default=o},function(n,a,r){var i=r(11),l=r(3),c={attributes:{compose:function(d,h,u){typeof d!="object"&&(d={}),typeof h!="object"&&(h={});var m=l(!0,{},h);u||(m=Object.keys(m).reduce(function(g,x){return m[x]!=null&&(g[x]=m[x]),g},{}));for(var p in d)d[p]!==void 0&&h[p]===void 0&&(m[p]=d[p]);return Object.keys(m).length>0?m:void 0},diff:function(d,h){typeof d!="object"&&(d={}),typeof h!="object"&&(h={});var u=Object.keys(d).concat(Object.keys(h)).reduce(function(m,p){return i(d[p],h[p])||(m[p]=h[p]===void 0?null:h[p]),m},{});return Object.keys(u).length>0?u:void 0},transform:function(d,h,u){if(typeof d!="object")return h;if(typeof h=="object"){if(!u)return h;var m=Object.keys(h).reduce(function(p,g){return d[g]===void 0&&(p[g]=h[g]),p},{});return Object.keys(m).length>0?m:void 0}}},iterator:function(d){return new o(d)},length:function(d){return typeof d.delete=="number"?d.delete:typeof d.retain=="number"?d.retain:typeof d.insert=="string"?d.insert.length:1}};function o(d){this.ops=d,this.index=0,this.offset=0}o.prototype.hasNext=function(){return this.peekLength()<1/0},o.prototype.next=function(d){d||(d=1/0);var h=this.ops[this.index];if(h){var u=this.offset,m=c.length(h);if(d>=m-u?(d=m-u,this.index+=1,this.offset=0):this.offset+=d,typeof h.delete=="number")return{delete:d};var p={};return h.attributes&&(p.attributes=h.attributes),typeof h.retain=="number"?p.retain=d:typeof h.insert=="string"?p.insert=h.insert.substr(u,d):p.insert=h.insert,p}else return{retain:1/0}},o.prototype.peek=function(){return this.ops[this.index]},o.prototype.peekLength=function(){return this.ops[this.index]?c.length(this.ops[this.index])-this.offset:1/0},o.prototype.peekType=function(){return this.ops[this.index]?typeof this.ops[this.index].delete=="number"?"delete":typeof this.ops[this.index].retain=="number"?"retain":"insert":"retain"},o.prototype.rest=function(){if(this.hasNext()){if(this.offset===0)return this.ops.slice(this.index);var d=this.offset,h=this.index,u=this.next(),m=this.ops.slice(this.index);return this.offset=d,this.index=h,[u].concat(m)}else return[]},n.exports=c},function(n,a){var r=function(){function i(x,v){return v!=null&&x instanceof v}var l;try{l=Map}catch{l=function(){}}var c;try{c=Set}catch{c=function(){}}var o;try{o=Promise}catch{o=function(){}}function d(x,v,y,f,b){typeof v=="object"&&(y=v.depth,f=v.prototype,b=v.includeNonEnumerable,v=v.circular);var j=[],S=[],k=typeof Buffer<"u";typeof v>"u"&&(v=!0),typeof y>"u"&&(y=1/0);function T(A,C){if(A===null)return null;if(C===0)return A;var w,P;if(typeof A!="object")return A;if(i(A,l))w=new l;else if(i(A,c))w=new c;else if(i(A,o))w=new o(function(K,D){A.then(function(G){K(T(G,C-1))},function(G){D(T(G,C-1))})});else if(d.__isArray(A))w=[];else if(d.__isRegExp(A))w=new RegExp(A.source,g(A)),A.lastIndex&&(w.lastIndex=A.lastIndex);else if(d.__isDate(A))w=new Date(A.getTime());else{if(k&&Buffer.isBuffer(A))return Buffer.allocUnsafe?w=Buffer.allocUnsafe(A.length):w=new Buffer(A.length),A.copy(w),w;i(A,Error)?w=Object.create(A):typeof f>"u"?(P=Object.getPrototypeOf(A),w=Object.create(P)):(w=Object.create(f),P=f)}if(v){var M=j.indexOf(A);if(M!=-1)return S[M];j.push(A),S.push(w)}i(A,l)&&A.forEach(function(K,D){var G=T(D,C-1),H=T(K,C-1);w.set(G,H)}),i(A,c)&&A.forEach(function(K){var D=T(K,C-1);w.add(D)});for(var I in A){var W;P&&(W=Object.getOwnPropertyDescriptor(P,I)),!(W&&W.set==null)&&(w[I]=T(A[I],C-1))}if(Object.getOwnPropertySymbols)for(var _=Object.getOwnPropertySymbols(A),I=0;I<_.length;I++){var B=_[I],O=Object.getOwnPropertyDescriptor(A,B);O&&!O.enumerable&&!b||(w[B]=T(A[B],C-1),O.enumerable||Object.defineProperty(w,B,{enumerable:!1}))}if(b)for(var z=Object.getOwnPropertyNames(A),I=0;I<z.length;I++){var F=z[I],O=Object.getOwnPropertyDescriptor(A,F);O&&O.enumerable||(w[F]=T(A[F],C-1),Object.defineProperty(w,F,{enumerable:!1}))}return w}return T(x,y)}d.clonePrototype=function(v){if(v===null)return null;var y=function(){};return y.prototype=v,new y};function h(x){return Object.prototype.toString.call(x)}d.__objToStr=h;function u(x){return typeof x=="object"&&h(x)==="[object Date]"}d.__isDate=u;function m(x){return typeof x=="object"&&h(x)==="[object Array]"}d.__isArray=m;function p(x){return typeof x=="object"&&h(x)==="[object RegExp]"}d.__isRegExp=p;function g(x){var v="";return x.global&&(v+="g"),x.ignoreCase&&(v+="i"),x.multiline&&(v+="m"),v}return d.__getRegExpFlags=g,d}();typeof n=="object"&&n.exports&&(n.exports=r)},function(n,a,r){Object.defineProperty(a,"__esModule",{value:!0});var i=function(){function w(P,M){var I=[],W=!0,_=!1,B=void 0;try{for(var O=P[Symbol.iterator](),z;!(W=(z=O.next()).done)&&(I.push(z.value),!(M&&I.length===M));W=!0);}catch(F){_=!0,B=F}finally{try{!W&&O.return&&O.return()}finally{if(_)throw B}}return I}return function(P,M){if(Array.isArray(P))return P;if(Symbol.iterator in Object(P))return w(P,M);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),l=function(){function w(P,M){for(var I=0;I<M.length;I++){var W=M[I];W.enumerable=W.enumerable||!1,W.configurable=!0,"value"in W&&(W.writable=!0),Object.defineProperty(P,W.key,W)}}return function(P,M,I){return M&&w(P.prototype,M),I&&w(P,I),P}}(),c=function w(P,M,I){P===null&&(P=Function.prototype);var W=Object.getOwnPropertyDescriptor(P,M);if(W===void 0){var _=Object.getPrototypeOf(P);return _===null?void 0:w(_,M,I)}else{if("value"in W)return W.value;var B=W.get;return B===void 0?void 0:B.call(I)}},o=r(0),d=j(o),h=r(8),u=j(h),m=r(4),p=j(m),g=r(16),x=j(g),v=r(13),y=j(v),f=r(25),b=j(f);function j(w){return w&&w.__esModule?w:{default:w}}function S(w,P){if(!(w instanceof P))throw new TypeError("Cannot call a class as a function")}function k(w,P){if(!w)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return P&&(typeof P=="object"||typeof P=="function")?P:w}function T(w,P){if(typeof P!="function"&&P!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof P);w.prototype=Object.create(P&&P.prototype,{constructor:{value:w,enumerable:!1,writable:!0,configurable:!0}}),P&&(Object.setPrototypeOf?Object.setPrototypeOf(w,P):w.__proto__=P)}function A(w){return w instanceof p.default||w instanceof m.BlockEmbed}var C=function(w){T(P,w);function P(M,I){S(this,P);var W=k(this,(P.__proto__||Object.getPrototypeOf(P)).call(this,M));return W.emitter=I.emitter,Array.isArray(I.whitelist)&&(W.whitelist=I.whitelist.reduce(function(_,B){return _[B]=!0,_},{})),W.domNode.addEventListener("DOMNodeInserted",function(){}),W.optimize(),W.enable(),W}return l(P,[{key:"batchStart",value:function(){this.batch=!0}},{key:"batchEnd",value:function(){this.batch=!1,this.optimize()}},{key:"deleteAt",value:function(I,W){var _=this.line(I),B=i(_,2),O=B[0],z=B[1],F=this.line(I+W),K=i(F,1),D=K[0];if(c(P.prototype.__proto__||Object.getPrototypeOf(P.prototype),"deleteAt",this).call(this,I,W),D!=null&&O!==D&&z>0){if(O instanceof m.BlockEmbed||D instanceof m.BlockEmbed){this.optimize();return}if(O instanceof y.default){var G=O.newlineIndex(O.length(),!0);if(G>-1&&(O=O.split(G+1),O===D)){this.optimize();return}}else if(D instanceof y.default){var H=D.newlineIndex(0);H>-1&&D.split(H+1)}var V=D.children.head instanceof x.default?null:D.children.head;O.moveChildren(D,V),O.remove()}this.optimize()}},{key:"enable",value:function(){var I=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;this.domNode.setAttribute("contenteditable",I)}},{key:"formatAt",value:function(I,W,_,B){this.whitelist!=null&&!this.whitelist[_]||(c(P.prototype.__proto__||Object.getPrototypeOf(P.prototype),"formatAt",this).call(this,I,W,_,B),this.optimize())}},{key:"insertAt",value:function(I,W,_){if(!(_!=null&&this.whitelist!=null&&!this.whitelist[W])){if(I>=this.length())if(_==null||d.default.query(W,d.default.Scope.BLOCK)==null){var B=d.default.create(this.statics.defaultChild);this.appendChild(B),_==null&&W.endsWith(`
`)&&(W=W.slice(0,-1)),B.insertAt(0,W,_)}else{var O=d.default.create(W,_);this.appendChild(O)}else c(P.prototype.__proto__||Object.getPrototypeOf(P.prototype),"insertAt",this).call(this,I,W,_);this.optimize()}}},{key:"insertBefore",value:function(I,W){if(I.statics.scope===d.default.Scope.INLINE_BLOT){var _=d.default.create(this.statics.defaultChild);_.appendChild(I),I=_}c(P.prototype.__proto__||Object.getPrototypeOf(P.prototype),"insertBefore",this).call(this,I,W)}},{key:"leaf",value:function(I){return this.path(I).pop()||[null,-1]}},{key:"line",value:function(I){return I===this.length()?this.line(I-1):this.descendant(A,I)}},{key:"lines",value:function(){var I=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,W=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Number.MAX_VALUE,_=function B(O,z,F){var K=[],D=F;return O.children.forEachAt(z,F,function(G,H,V){A(G)?K.push(G):G instanceof d.default.Container&&(K=K.concat(B(G,H,D))),D-=V}),K};return _(this,I,W)}},{key:"optimize",value:function(){var I=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],W=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.batch!==!0&&(c(P.prototype.__proto__||Object.getPrototypeOf(P.prototype),"optimize",this).call(this,I,W),I.length>0&&this.emitter.emit(u.default.events.SCROLL_OPTIMIZE,I,W))}},{key:"path",value:function(I){return c(P.prototype.__proto__||Object.getPrototypeOf(P.prototype),"path",this).call(this,I).slice(1)}},{key:"update",value:function(I){if(this.batch!==!0){var W=u.default.sources.USER;typeof I=="string"&&(W=I),Array.isArray(I)||(I=this.observer.takeRecords()),I.length>0&&this.emitter.emit(u.default.events.SCROLL_BEFORE_UPDATE,W,I),c(P.prototype.__proto__||Object.getPrototypeOf(P.prototype),"update",this).call(this,I.concat([])),I.length>0&&this.emitter.emit(u.default.events.SCROLL_UPDATE,W,I)}}}]),P}(d.default.Scroll);C.blotName="scroll",C.className="ql-editor",C.tagName="DIV",C.defaultChild="block",C.allowedChildren=[p.default,m.BlockEmbed,b.default],a.default=C},function(n,a,r){Object.defineProperty(a,"__esModule",{value:!0}),a.SHORTKEY=a.default=void 0;var i=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(Z){return typeof Z}:function(Z){return Z&&typeof Symbol=="function"&&Z.constructor===Symbol&&Z!==Symbol.prototype?"symbol":typeof Z},l=function(){function Z(le,ne){var ue=[],te=!0,Ae=!1,Ge=void 0;try{for(var be=le[Symbol.iterator](),Ie;!(te=(Ie=be.next()).done)&&(ue.push(Ie.value),!(ne&&ue.length===ne));te=!0);}catch(ve){Ae=!0,Ge=ve}finally{try{!te&&be.return&&be.return()}finally{if(Ae)throw Ge}}return ue}return function(le,ne){if(Array.isArray(le))return le;if(Symbol.iterator in Object(le))return Z(le,ne);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),c=function(){function Z(le,ne){for(var ue=0;ue<ne.length;ue++){var te=ne[ue];te.enumerable=te.enumerable||!1,te.configurable=!0,"value"in te&&(te.writable=!0),Object.defineProperty(le,te.key,te)}}return function(le,ne,ue){return ne&&Z(le.prototype,ne),ue&&Z(le,ue),le}}(),o=r(21),d=w(o),h=r(11),u=w(h),m=r(3),p=w(m),g=r(2),x=w(g),v=r(20),y=w(v),f=r(0),b=w(f),j=r(5),S=w(j),k=r(10),T=w(k),A=r(9),C=w(A);function w(Z){return Z&&Z.__esModule?Z:{default:Z}}function P(Z,le,ne){return le in Z?Object.defineProperty(Z,le,{value:ne,enumerable:!0,configurable:!0,writable:!0}):Z[le]=ne,Z}function M(Z,le){if(!(Z instanceof le))throw new TypeError("Cannot call a class as a function")}function I(Z,le){if(!Z)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return le&&(typeof le=="object"||typeof le=="function")?le:Z}function W(Z,le){if(typeof le!="function"&&le!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof le);Z.prototype=Object.create(le&&le.prototype,{constructor:{value:Z,enumerable:!1,writable:!0,configurable:!0}}),le&&(Object.setPrototypeOf?Object.setPrototypeOf(Z,le):Z.__proto__=le)}var _=(0,T.default)("quill:keyboard"),B=/Mac/i.test(navigator.platform)?"metaKey":"ctrlKey",O=function(Z){W(le,Z),c(le,null,[{key:"match",value:function(ue,te){return te=se(te),["altKey","ctrlKey","metaKey","shiftKey"].some(function(Ae){return!!te[Ae]!==ue[Ae]&&te[Ae]!==null})?!1:te.key===(ue.which||ue.keyCode)}}]);function le(ne,ue){M(this,le);var te=I(this,(le.__proto__||Object.getPrototypeOf(le)).call(this,ne,ue));return te.bindings={},Object.keys(te.options.bindings).forEach(function(Ae){Ae==="list autofill"&&ne.scroll.whitelist!=null&&!ne.scroll.whitelist.list||te.options.bindings[Ae]&&te.addBinding(te.options.bindings[Ae])}),te.addBinding({key:le.keys.ENTER,shiftKey:null},G),te.addBinding({key:le.keys.ENTER,metaKey:null,ctrlKey:null,altKey:null},function(){}),/Firefox/i.test(navigator.userAgent)?(te.addBinding({key:le.keys.BACKSPACE},{collapsed:!0},F),te.addBinding({key:le.keys.DELETE},{collapsed:!0},K)):(te.addBinding({key:le.keys.BACKSPACE},{collapsed:!0,prefix:/^.?$/},F),te.addBinding({key:le.keys.DELETE},{collapsed:!0,suffix:/^.?$/},K)),te.addBinding({key:le.keys.BACKSPACE},{collapsed:!1},D),te.addBinding({key:le.keys.DELETE},{collapsed:!1},D),te.addBinding({key:le.keys.BACKSPACE,altKey:null,ctrlKey:null,metaKey:null,shiftKey:null},{collapsed:!0,offset:0},F),te.listen(),te}return c(le,[{key:"addBinding",value:function(ue){var te=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},Ae=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},Ge=se(ue);if(Ge==null||Ge.key==null)return _.warn("Attempted to add invalid keyboard binding",Ge);typeof te=="function"&&(te={handler:te}),typeof Ae=="function"&&(Ae={handler:Ae}),Ge=(0,p.default)(Ge,te,Ae),this.bindings[Ge.key]=this.bindings[Ge.key]||[],this.bindings[Ge.key].push(Ge)}},{key:"listen",value:function(){var ue=this;this.quill.root.addEventListener("keydown",function(te){if(!te.defaultPrevented){var Ae=te.which||te.keyCode,Ge=(ue.bindings[Ae]||[]).filter(function(Te){return le.match(te,Te)});if(Ge.length!==0){var be=ue.quill.getSelection();if(!(be==null||!ue.quill.hasFocus())){var Ie=ue.quill.getLine(be.index),ve=l(Ie,2),ie=ve[0],de=ve[1],ee=ue.quill.getLeaf(be.index),ae=l(ee,2),Se=ae[0],We=ae[1],re=be.length===0?[Se,We]:ue.quill.getLeaf(be.index+be.length),je=l(re,2),Pe=je[0],He=je[1],Ye=Se instanceof b.default.Text?Se.value().slice(0,We):"",Ke=Pe instanceof b.default.Text?Pe.value().slice(He):"",oe={collapsed:be.length===0,empty:be.length===0&&ie.length()<=1,format:ue.quill.getFormat(be),offset:de,prefix:Ye,suffix:Ke},ye=Ge.some(function(Te){if(Te.collapsed!=null&&Te.collapsed!==oe.collapsed||Te.empty!=null&&Te.empty!==oe.empty||Te.offset!=null&&Te.offset!==oe.offset)return!1;if(Array.isArray(Te.format)){if(Te.format.every(function(et){return oe.format[et]==null}))return!1}else if(i(Te.format)==="object"&&!Object.keys(Te.format).every(function(et){return Te.format[et]===!0?oe.format[et]!=null:Te.format[et]===!1?oe.format[et]==null:(0,u.default)(Te.format[et],oe.format[et])}))return!1;return Te.prefix!=null&&!Te.prefix.test(oe.prefix)||Te.suffix!=null&&!Te.suffix.test(oe.suffix)?!1:Te.handler.call(ue,be,oe)!==!0});ye&&te.preventDefault()}}}})}}]),le}(C.default);O.keys={BACKSPACE:8,TAB:9,ENTER:13,ESCAPE:27,LEFT:37,UP:38,RIGHT:39,DOWN:40,DELETE:46},O.DEFAULTS={bindings:{bold:V("bold"),italic:V("italic"),underline:V("underline"),indent:{key:O.keys.TAB,format:["blockquote","indent","list"],handler:function(le,ne){if(ne.collapsed&&ne.offset!==0)return!0;this.quill.format("indent","+1",S.default.sources.USER)}},outdent:{key:O.keys.TAB,shiftKey:!0,format:["blockquote","indent","list"],handler:function(le,ne){if(ne.collapsed&&ne.offset!==0)return!0;this.quill.format("indent","-1",S.default.sources.USER)}},"outdent backspace":{key:O.keys.BACKSPACE,collapsed:!0,shiftKey:null,metaKey:null,ctrlKey:null,altKey:null,format:["indent","list"],offset:0,handler:function(le,ne){ne.format.indent!=null?this.quill.format("indent","-1",S.default.sources.USER):ne.format.list!=null&&this.quill.format("list",!1,S.default.sources.USER)}},"indent code-block":H(!0),"outdent code-block":H(!1),"remove tab":{key:O.keys.TAB,shiftKey:!0,collapsed:!0,prefix:/\t$/,handler:function(le){this.quill.deleteText(le.index-1,1,S.default.sources.USER)}},tab:{key:O.keys.TAB,handler:function(le){this.quill.history.cutoff();var ne=new x.default().retain(le.index).delete(le.length).insert("	");this.quill.updateContents(ne,S.default.sources.USER),this.quill.history.cutoff(),this.quill.setSelection(le.index+1,S.default.sources.SILENT)}},"list empty enter":{key:O.keys.ENTER,collapsed:!0,format:["list"],empty:!0,handler:function(le,ne){this.quill.format("list",!1,S.default.sources.USER),ne.format.indent&&this.quill.format("indent",!1,S.default.sources.USER)}},"checklist enter":{key:O.keys.ENTER,collapsed:!0,format:{list:"checked"},handler:function(le){var ne=this.quill.getLine(le.index),ue=l(ne,2),te=ue[0],Ae=ue[1],Ge=(0,p.default)({},te.formats(),{list:"checked"}),be=new x.default().retain(le.index).insert(`
`,Ge).retain(te.length()-Ae-1).retain(1,{list:"unchecked"});this.quill.updateContents(be,S.default.sources.USER),this.quill.setSelection(le.index+1,S.default.sources.SILENT),this.quill.scrollIntoView()}},"header enter":{key:O.keys.ENTER,collapsed:!0,format:["header"],suffix:/^$/,handler:function(le,ne){var ue=this.quill.getLine(le.index),te=l(ue,2),Ae=te[0],Ge=te[1],be=new x.default().retain(le.index).insert(`
`,ne.format).retain(Ae.length()-Ge-1).retain(1,{header:null});this.quill.updateContents(be,S.default.sources.USER),this.quill.setSelection(le.index+1,S.default.sources.SILENT),this.quill.scrollIntoView()}},"list autofill":{key:" ",collapsed:!0,format:{list:!1},prefix:/^\s*?(\d+\.|-|\*|\[ ?\]|\[x\])$/,handler:function(le,ne){var ue=ne.prefix.length,te=this.quill.getLine(le.index),Ae=l(te,2),Ge=Ae[0],be=Ae[1];if(be>ue)return!0;var Ie=void 0;switch(ne.prefix.trim()){case"[]":case"[ ]":Ie="unchecked";break;case"[x]":Ie="checked";break;case"-":case"*":Ie="bullet";break;default:Ie="ordered"}this.quill.insertText(le.index," ",S.default.sources.USER),this.quill.history.cutoff();var ve=new x.default().retain(le.index-be).delete(ue+1).retain(Ge.length()-2-be).retain(1,{list:Ie});this.quill.updateContents(ve,S.default.sources.USER),this.quill.history.cutoff(),this.quill.setSelection(le.index-ue,S.default.sources.SILENT)}},"code exit":{key:O.keys.ENTER,collapsed:!0,format:["code-block"],prefix:/\n\n$/,suffix:/^\s+$/,handler:function(le){var ne=this.quill.getLine(le.index),ue=l(ne,2),te=ue[0],Ae=ue[1],Ge=new x.default().retain(le.index+te.length()-Ae-2).retain(1,{"code-block":null}).delete(1);this.quill.updateContents(Ge,S.default.sources.USER)}},"embed left":z(O.keys.LEFT,!1),"embed left shift":z(O.keys.LEFT,!0),"embed right":z(O.keys.RIGHT,!1),"embed right shift":z(O.keys.RIGHT,!0)}};function z(Z,le){var ne,ue=Z===O.keys.LEFT?"prefix":"suffix";return ne={key:Z,shiftKey:le,altKey:null},P(ne,ue,/^$/),P(ne,"handler",function(Ae){var Ge=Ae.index;Z===O.keys.RIGHT&&(Ge+=Ae.length+1);var be=this.quill.getLeaf(Ge),Ie=l(be,1),ve=Ie[0];return ve instanceof b.default.Embed?(Z===O.keys.LEFT?le?this.quill.setSelection(Ae.index-1,Ae.length+1,S.default.sources.USER):this.quill.setSelection(Ae.index-1,S.default.sources.USER):le?this.quill.setSelection(Ae.index,Ae.length+1,S.default.sources.USER):this.quill.setSelection(Ae.index+Ae.length+1,S.default.sources.USER),!1):!0}),ne}function F(Z,le){if(!(Z.index===0||this.quill.getLength()<=1)){var ne=this.quill.getLine(Z.index),ue=l(ne,1),te=ue[0],Ae={};if(le.offset===0){var Ge=this.quill.getLine(Z.index-1),be=l(Ge,1),Ie=be[0];if(Ie!=null&&Ie.length()>1){var ve=te.formats(),ie=this.quill.getFormat(Z.index-1,1);Ae=y.default.attributes.diff(ve,ie)||{}}}var de=/[\uD800-\uDBFF][\uDC00-\uDFFF]$/.test(le.prefix)?2:1;this.quill.deleteText(Z.index-de,de,S.default.sources.USER),Object.keys(Ae).length>0&&this.quill.formatLine(Z.index-de,de,Ae,S.default.sources.USER),this.quill.focus()}}function K(Z,le){var ne=/^[\uD800-\uDBFF][\uDC00-\uDFFF]/.test(le.suffix)?2:1;if(!(Z.index>=this.quill.getLength()-ne)){var ue={},te=0,Ae=this.quill.getLine(Z.index),Ge=l(Ae,1),be=Ge[0];if(le.offset>=be.length()-1){var Ie=this.quill.getLine(Z.index+1),ve=l(Ie,1),ie=ve[0];if(ie){var de=be.formats(),ee=this.quill.getFormat(Z.index,1);ue=y.default.attributes.diff(de,ee)||{},te=ie.length()}}this.quill.deleteText(Z.index,ne,S.default.sources.USER),Object.keys(ue).length>0&&this.quill.formatLine(Z.index+te-1,ne,ue,S.default.sources.USER)}}function D(Z){var le=this.quill.getLines(Z),ne={};if(le.length>1){var ue=le[0].formats(),te=le[le.length-1].formats();ne=y.default.attributes.diff(te,ue)||{}}this.quill.deleteText(Z,S.default.sources.USER),Object.keys(ne).length>0&&this.quill.formatLine(Z.index,1,ne,S.default.sources.USER),this.quill.setSelection(Z.index,S.default.sources.SILENT),this.quill.focus()}function G(Z,le){var ne=this;Z.length>0&&this.quill.scroll.deleteAt(Z.index,Z.length);var ue=Object.keys(le.format).reduce(function(te,Ae){return b.default.query(Ae,b.default.Scope.BLOCK)&&!Array.isArray(le.format[Ae])&&(te[Ae]=le.format[Ae]),te},{});this.quill.insertText(Z.index,`
`,ue,S.default.sources.USER),this.quill.setSelection(Z.index+1,S.default.sources.SILENT),this.quill.focus(),Object.keys(le.format).forEach(function(te){ue[te]==null&&(Array.isArray(le.format[te])||te!=="link"&&ne.quill.format(te,le.format[te],S.default.sources.USER))})}function H(Z){return{key:O.keys.TAB,shiftKey:!Z,format:{"code-block":!0},handler:function(ne){var ue=b.default.query("code-block"),te=ne.index,Ae=ne.length,Ge=this.quill.scroll.descendant(ue,te),be=l(Ge,2),Ie=be[0],ve=be[1];if(Ie!=null){var ie=this.quill.getIndex(Ie),de=Ie.newlineIndex(ve,!0)+1,ee=Ie.newlineIndex(ie+ve+Ae),ae=Ie.domNode.textContent.slice(de,ee).split(`
`);ve=0,ae.forEach(function(Se,We){Z?(Ie.insertAt(de+ve,ue.TAB),ve+=ue.TAB.length,We===0?te+=ue.TAB.length:Ae+=ue.TAB.length):Se.startsWith(ue.TAB)&&(Ie.deleteAt(de+ve,ue.TAB.length),ve-=ue.TAB.length,We===0?te-=ue.TAB.length:Ae-=ue.TAB.length),ve+=Se.length+1}),this.quill.update(S.default.sources.USER),this.quill.setSelection(te,Ae,S.default.sources.SILENT)}}}}function V(Z){return{key:Z[0].toUpperCase(),shortKey:!0,handler:function(ne,ue){this.quill.format(Z,!ue.format[Z],S.default.sources.USER)}}}function se(Z){if(typeof Z=="string"||typeof Z=="number")return se({key:Z});if((typeof Z>"u"?"undefined":i(Z))==="object"&&(Z=(0,d.default)(Z,!1)),typeof Z.key=="string")if(O.keys[Z.key.toUpperCase()]!=null)Z.key=O.keys[Z.key.toUpperCase()];else if(Z.key.length===1)Z.key=Z.key.toUpperCase().charCodeAt(0);else return null;return Z.shortKey&&(Z[B]=Z.shortKey,delete Z.shortKey),Z}a.default=O,a.SHORTKEY=B},function(n,a,r){Object.defineProperty(a,"__esModule",{value:!0});var i=function(){function y(f,b){var j=[],S=!0,k=!1,T=void 0;try{for(var A=f[Symbol.iterator](),C;!(S=(C=A.next()).done)&&(j.push(C.value),!(b&&j.length===b));S=!0);}catch(w){k=!0,T=w}finally{try{!S&&A.return&&A.return()}finally{if(k)throw T}}return j}return function(f,b){if(Array.isArray(f))return f;if(Symbol.iterator in Object(f))return y(f,b);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),l=function y(f,b,j){f===null&&(f=Function.prototype);var S=Object.getOwnPropertyDescriptor(f,b);if(S===void 0){var k=Object.getPrototypeOf(f);return k===null?void 0:y(k,b,j)}else{if("value"in S)return S.value;var T=S.get;return T===void 0?void 0:T.call(j)}},c=function(){function y(f,b){for(var j=0;j<b.length;j++){var S=b[j];S.enumerable=S.enumerable||!1,S.configurable=!0,"value"in S&&(S.writable=!0),Object.defineProperty(f,S.key,S)}}return function(f,b,j){return b&&y(f.prototype,b),j&&y(f,j),f}}(),o=r(0),d=m(o),h=r(7),u=m(h);function m(y){return y&&y.__esModule?y:{default:y}}function p(y,f){if(!(y instanceof f))throw new TypeError("Cannot call a class as a function")}function g(y,f){if(!y)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return f&&(typeof f=="object"||typeof f=="function")?f:y}function x(y,f){if(typeof f!="function"&&f!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof f);y.prototype=Object.create(f&&f.prototype,{constructor:{value:y,enumerable:!1,writable:!0,configurable:!0}}),f&&(Object.setPrototypeOf?Object.setPrototypeOf(y,f):y.__proto__=f)}var v=function(y){x(f,y),c(f,null,[{key:"value",value:function(){}}]);function f(b,j){p(this,f);var S=g(this,(f.__proto__||Object.getPrototypeOf(f)).call(this,b));return S.selection=j,S.textNode=document.createTextNode(f.CONTENTS),S.domNode.appendChild(S.textNode),S._length=0,S}return c(f,[{key:"detach",value:function(){this.parent!=null&&this.parent.removeChild(this)}},{key:"format",value:function(j,S){if(this._length!==0)return l(f.prototype.__proto__||Object.getPrototypeOf(f.prototype),"format",this).call(this,j,S);for(var k=this,T=0;k!=null&&k.statics.scope!==d.default.Scope.BLOCK_BLOT;)T+=k.offset(k.parent),k=k.parent;k!=null&&(this._length=f.CONTENTS.length,k.optimize(),k.formatAt(T,f.CONTENTS.length,j,S),this._length=0)}},{key:"index",value:function(j,S){return j===this.textNode?0:l(f.prototype.__proto__||Object.getPrototypeOf(f.prototype),"index",this).call(this,j,S)}},{key:"length",value:function(){return this._length}},{key:"position",value:function(){return[this.textNode,this.textNode.data.length]}},{key:"remove",value:function(){l(f.prototype.__proto__||Object.getPrototypeOf(f.prototype),"remove",this).call(this),this.parent=null}},{key:"restore",value:function(){if(!(this.selection.composing||this.parent==null)){var j=this.textNode,S=this.selection.getNativeRange(),k=void 0,T=void 0,A=void 0;if(S!=null&&S.start.node===j&&S.end.node===j){var C=[j,S.start.offset,S.end.offset];k=C[0],T=C[1],A=C[2]}for(;this.domNode.lastChild!=null&&this.domNode.lastChild!==this.textNode;)this.domNode.parentNode.insertBefore(this.domNode.lastChild,this.domNode);if(this.textNode.data!==f.CONTENTS){var w=this.textNode.data.split(f.CONTENTS).join("");this.next instanceof u.default?(k=this.next.domNode,this.next.insertAt(0,w),this.textNode.data=f.CONTENTS):(this.textNode.data=w,this.parent.insertBefore(d.default.create(this.textNode),this),this.textNode=document.createTextNode(f.CONTENTS),this.domNode.appendChild(this.textNode))}if(this.remove(),T!=null){var P=[T,A].map(function(I){return Math.max(0,Math.min(k.data.length,I-1))}),M=i(P,2);return T=M[0],A=M[1],{startNode:k,startOffset:T,endNode:k,endOffset:A}}}}},{key:"update",value:function(j,S){var k=this;if(j.some(function(A){return A.type==="characterData"&&A.target===k.textNode})){var T=this.restore();T&&(S.range=T)}}},{key:"value",value:function(){return""}}]),f}(d.default.Embed);v.blotName="cursor",v.className="ql-cursor",v.tagName="span",v.CONTENTS="\uFEFF",a.default=v},function(n,a,r){Object.defineProperty(a,"__esModule",{value:!0});var i=r(0),l=d(i),c=r(4),o=d(c);function d(g){return g&&g.__esModule?g:{default:g}}function h(g,x){if(!(g instanceof x))throw new TypeError("Cannot call a class as a function")}function u(g,x){if(!g)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return x&&(typeof x=="object"||typeof x=="function")?x:g}function m(g,x){if(typeof x!="function"&&x!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof x);g.prototype=Object.create(x&&x.prototype,{constructor:{value:g,enumerable:!1,writable:!0,configurable:!0}}),x&&(Object.setPrototypeOf?Object.setPrototypeOf(g,x):g.__proto__=x)}var p=function(g){m(x,g);function x(){return h(this,x),u(this,(x.__proto__||Object.getPrototypeOf(x)).apply(this,arguments))}return x}(l.default.Container);p.allowedChildren=[o.default,c.BlockEmbed,p],a.default=p},function(n,a,r){Object.defineProperty(a,"__esModule",{value:!0}),a.ColorStyle=a.ColorClass=a.ColorAttributor=void 0;var i=function(){function v(y,f){for(var b=0;b<f.length;b++){var j=f[b];j.enumerable=j.enumerable||!1,j.configurable=!0,"value"in j&&(j.writable=!0),Object.defineProperty(y,j.key,j)}}return function(y,f,b){return f&&v(y.prototype,f),b&&v(y,b),y}}(),l=function v(y,f,b){y===null&&(y=Function.prototype);var j=Object.getOwnPropertyDescriptor(y,f);if(j===void 0){var S=Object.getPrototypeOf(y);return S===null?void 0:v(S,f,b)}else{if("value"in j)return j.value;var k=j.get;return k===void 0?void 0:k.call(b)}},c=r(0),o=d(c);function d(v){return v&&v.__esModule?v:{default:v}}function h(v,y){if(!(v instanceof y))throw new TypeError("Cannot call a class as a function")}function u(v,y){if(!v)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return y&&(typeof y=="object"||typeof y=="function")?y:v}function m(v,y){if(typeof y!="function"&&y!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof y);v.prototype=Object.create(y&&y.prototype,{constructor:{value:v,enumerable:!1,writable:!0,configurable:!0}}),y&&(Object.setPrototypeOf?Object.setPrototypeOf(v,y):v.__proto__=y)}var p=function(v){m(y,v);function y(){return h(this,y),u(this,(y.__proto__||Object.getPrototypeOf(y)).apply(this,arguments))}return i(y,[{key:"value",value:function(b){var j=l(y.prototype.__proto__||Object.getPrototypeOf(y.prototype),"value",this).call(this,b);return j.startsWith("rgb(")?(j=j.replace(/^[^\d]+/,"").replace(/[^\d]+$/,""),"#"+j.split(",").map(function(S){return("00"+parseInt(S).toString(16)).slice(-2)}).join("")):j}}]),y}(o.default.Attributor.Style),g=new o.default.Attributor.Class("color","ql-color",{scope:o.default.Scope.INLINE}),x=new p("color","color",{scope:o.default.Scope.INLINE});a.ColorAttributor=p,a.ColorClass=g,a.ColorStyle=x},function(n,a,r){Object.defineProperty(a,"__esModule",{value:!0}),a.sanitize=a.default=void 0;var i=function(){function x(v,y){for(var f=0;f<y.length;f++){var b=y[f];b.enumerable=b.enumerable||!1,b.configurable=!0,"value"in b&&(b.writable=!0),Object.defineProperty(v,b.key,b)}}return function(v,y,f){return y&&x(v.prototype,y),f&&x(v,f),v}}(),l=function x(v,y,f){v===null&&(v=Function.prototype);var b=Object.getOwnPropertyDescriptor(v,y);if(b===void 0){var j=Object.getPrototypeOf(v);return j===null?void 0:x(j,y,f)}else{if("value"in b)return b.value;var S=b.get;return S===void 0?void 0:S.call(f)}},c=r(6),o=d(c);function d(x){return x&&x.__esModule?x:{default:x}}function h(x,v){if(!(x instanceof v))throw new TypeError("Cannot call a class as a function")}function u(x,v){if(!x)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return v&&(typeof v=="object"||typeof v=="function")?v:x}function m(x,v){if(typeof v!="function"&&v!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof v);x.prototype=Object.create(v&&v.prototype,{constructor:{value:x,enumerable:!1,writable:!0,configurable:!0}}),v&&(Object.setPrototypeOf?Object.setPrototypeOf(x,v):x.__proto__=v)}var p=function(x){m(v,x);function v(){return h(this,v),u(this,(v.__proto__||Object.getPrototypeOf(v)).apply(this,arguments))}return i(v,[{key:"format",value:function(f,b){if(f!==this.statics.blotName||!b)return l(v.prototype.__proto__||Object.getPrototypeOf(v.prototype),"format",this).call(this,f,b);b=this.constructor.sanitize(b),this.domNode.setAttribute("href",b)}}],[{key:"create",value:function(f){var b=l(v.__proto__||Object.getPrototypeOf(v),"create",this).call(this,f);return f=this.sanitize(f),b.setAttribute("href",f),b.setAttribute("rel","noopener noreferrer"),b.setAttribute("target","_blank"),b}},{key:"formats",value:function(f){return f.getAttribute("href")}},{key:"sanitize",value:function(f){return g(f,this.PROTOCOL_WHITELIST)?f:this.SANITIZED_URL}}]),v}(o.default);p.blotName="link",p.tagName="A",p.SANITIZED_URL="about:blank",p.PROTOCOL_WHITELIST=["http","https","mailto","tel"];function g(x,v){var y=document.createElement("a");y.href=x;var f=y.href.slice(0,y.href.indexOf(":"));return v.indexOf(f)>-1}a.default=p,a.sanitize=g},function(n,a,r){Object.defineProperty(a,"__esModule",{value:!0});var i=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(v){return typeof v}:function(v){return v&&typeof Symbol=="function"&&v.constructor===Symbol&&v!==Symbol.prototype?"symbol":typeof v},l=function(){function v(y,f){for(var b=0;b<f.length;b++){var j=f[b];j.enumerable=j.enumerable||!1,j.configurable=!0,"value"in j&&(j.writable=!0),Object.defineProperty(y,j.key,j)}}return function(y,f,b){return f&&v(y.prototype,f),b&&v(y,b),y}}(),c=r(23),o=u(c),d=r(107),h=u(d);function u(v){return v&&v.__esModule?v:{default:v}}function m(v,y){if(!(v instanceof y))throw new TypeError("Cannot call a class as a function")}var p=0;function g(v,y){v.setAttribute(y,v.getAttribute(y)!=="true")}var x=function(){function v(y){var f=this;m(this,v),this.select=y,this.container=document.createElement("span"),this.buildPicker(),this.select.style.display="none",this.select.parentNode.insertBefore(this.container,this.select),this.label.addEventListener("mousedown",function(){f.togglePicker()}),this.label.addEventListener("keydown",function(b){switch(b.keyCode){case o.default.keys.ENTER:f.togglePicker();break;case o.default.keys.ESCAPE:f.escape(),b.preventDefault();break}}),this.select.addEventListener("change",this.update.bind(this))}return l(v,[{key:"togglePicker",value:function(){this.container.classList.toggle("ql-expanded"),g(this.label,"aria-expanded"),g(this.options,"aria-hidden")}},{key:"buildItem",value:function(f){var b=this,j=document.createElement("span");return j.tabIndex="0",j.setAttribute("role","button"),j.classList.add("ql-picker-item"),f.hasAttribute("value")&&j.setAttribute("data-value",f.getAttribute("value")),f.textContent&&j.setAttribute("data-label",f.textContent),j.addEventListener("click",function(){b.selectItem(j,!0)}),j.addEventListener("keydown",function(S){switch(S.keyCode){case o.default.keys.ENTER:b.selectItem(j,!0),S.preventDefault();break;case o.default.keys.ESCAPE:b.escape(),S.preventDefault();break}}),j}},{key:"buildLabel",value:function(){var f=document.createElement("span");return f.classList.add("ql-picker-label"),f.innerHTML=h.default,f.tabIndex="0",f.setAttribute("role","button"),f.setAttribute("aria-expanded","false"),this.container.appendChild(f),f}},{key:"buildOptions",value:function(){var f=this,b=document.createElement("span");b.classList.add("ql-picker-options"),b.setAttribute("aria-hidden","true"),b.tabIndex="-1",b.id="ql-picker-options-"+p,p+=1,this.label.setAttribute("aria-controls",b.id),this.options=b,[].slice.call(this.select.options).forEach(function(j){var S=f.buildItem(j);b.appendChild(S),j.selected===!0&&f.selectItem(S)}),this.container.appendChild(b)}},{key:"buildPicker",value:function(){var f=this;[].slice.call(this.select.attributes).forEach(function(b){f.container.setAttribute(b.name,b.value)}),this.container.classList.add("ql-picker"),this.label=this.buildLabel(),this.buildOptions()}},{key:"escape",value:function(){var f=this;this.close(),setTimeout(function(){return f.label.focus()},1)}},{key:"close",value:function(){this.container.classList.remove("ql-expanded"),this.label.setAttribute("aria-expanded","false"),this.options.setAttribute("aria-hidden","true")}},{key:"selectItem",value:function(f){var b=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,j=this.container.querySelector(".ql-selected");if(f!==j&&(j!=null&&j.classList.remove("ql-selected"),f!=null&&(f.classList.add("ql-selected"),this.select.selectedIndex=[].indexOf.call(f.parentNode.children,f),f.hasAttribute("data-value")?this.label.setAttribute("data-value",f.getAttribute("data-value")):this.label.removeAttribute("data-value"),f.hasAttribute("data-label")?this.label.setAttribute("data-label",f.getAttribute("data-label")):this.label.removeAttribute("data-label"),b))){if(typeof Event=="function")this.select.dispatchEvent(new Event("change"));else if((typeof Event>"u"?"undefined":i(Event))==="object"){var S=document.createEvent("Event");S.initEvent("change",!0,!0),this.select.dispatchEvent(S)}this.close()}}},{key:"update",value:function(){var f=void 0;if(this.select.selectedIndex>-1){var b=this.container.querySelector(".ql-picker-options").children[this.select.selectedIndex];f=this.select.options[this.select.selectedIndex],this.selectItem(b)}else this.selectItem(null);var j=f!=null&&f!==this.select.querySelector("option[selected]");this.label.classList.toggle("ql-active",j)}}]),v}();a.default=x},function(n,a,r){Object.defineProperty(a,"__esModule",{value:!0});var i=r(0),l=_(i),c=r(5),o=_(c),d=r(4),h=_(d),u=r(16),m=_(u),p=r(25),g=_(p),x=r(24),v=_(x),y=r(35),f=_(y),b=r(6),j=_(b),S=r(22),k=_(S),T=r(7),A=_(T),C=r(55),w=_(C),P=r(42),M=_(P),I=r(23),W=_(I);function _(B){return B&&B.__esModule?B:{default:B}}o.default.register({"blots/block":h.default,"blots/block/embed":d.BlockEmbed,"blots/break":m.default,"blots/container":g.default,"blots/cursor":v.default,"blots/embed":f.default,"blots/inline":j.default,"blots/scroll":k.default,"blots/text":A.default,"modules/clipboard":w.default,"modules/history":M.default,"modules/keyboard":W.default}),l.default.register(h.default,m.default,v.default,j.default,k.default,A.default),a.default=o.default},function(n,a,r){Object.defineProperty(a,"__esModule",{value:!0});var i=r(1),l=function(){function c(o){this.domNode=o,this.domNode[i.DATA_KEY]={blot:this}}return Object.defineProperty(c.prototype,"statics",{get:function(){return this.constructor},enumerable:!0,configurable:!0}),c.create=function(o){if(this.tagName==null)throw new i.ParchmentError("Blot definition missing tagName");var d;return Array.isArray(this.tagName)?(typeof o=="string"&&(o=o.toUpperCase(),parseInt(o).toString()===o&&(o=parseInt(o))),typeof o=="number"?d=document.createElement(this.tagName[o-1]):this.tagName.indexOf(o)>-1?d=document.createElement(o):d=document.createElement(this.tagName[0])):d=document.createElement(this.tagName),this.className&&d.classList.add(this.className),d},c.prototype.attach=function(){this.parent!=null&&(this.scroll=this.parent.scroll)},c.prototype.clone=function(){var o=this.domNode.cloneNode(!1);return i.create(o)},c.prototype.detach=function(){this.parent!=null&&this.parent.removeChild(this),delete this.domNode[i.DATA_KEY]},c.prototype.deleteAt=function(o,d){var h=this.isolate(o,d);h.remove()},c.prototype.formatAt=function(o,d,h,u){var m=this.isolate(o,d);if(i.query(h,i.Scope.BLOT)!=null&&u)m.wrap(h,u);else if(i.query(h,i.Scope.ATTRIBUTE)!=null){var p=i.create(this.statics.scope);m.wrap(p),p.format(h,u)}},c.prototype.insertAt=function(o,d,h){var u=h==null?i.create("text",d):i.create(d,h),m=this.split(o);this.parent.insertBefore(u,m)},c.prototype.insertInto=function(o,d){d===void 0&&(d=null),this.parent!=null&&this.parent.children.remove(this);var h=null;o.children.insertBefore(this,d),d!=null&&(h=d.domNode),(this.domNode.parentNode!=o.domNode||this.domNode.nextSibling!=h)&&o.domNode.insertBefore(this.domNode,h),this.parent=o,this.attach()},c.prototype.isolate=function(o,d){var h=this.split(o);return h.split(d),h},c.prototype.length=function(){return 1},c.prototype.offset=function(o){return o===void 0&&(o=this.parent),this.parent==null||this==o?0:this.parent.children.offset(this)+this.parent.offset(o)},c.prototype.optimize=function(o){this.domNode[i.DATA_KEY]!=null&&delete this.domNode[i.DATA_KEY].mutations},c.prototype.remove=function(){this.domNode.parentNode!=null&&this.domNode.parentNode.removeChild(this.domNode),this.detach()},c.prototype.replace=function(o){o.parent!=null&&(o.parent.insertBefore(this,o.next),o.remove())},c.prototype.replaceWith=function(o,d){var h=typeof o=="string"?i.create(o,d):o;return h.replace(this),h},c.prototype.split=function(o,d){return o===0?this:this.next},c.prototype.update=function(o,d){},c.prototype.wrap=function(o,d){var h=typeof o=="string"?i.create(o,d):o;return this.parent!=null&&this.parent.insertBefore(h,this.next),h.appendChild(this),h},c.blotName="abstract",c}();a.default=l},function(n,a,r){Object.defineProperty(a,"__esModule",{value:!0});var i=r(12),l=r(32),c=r(33),o=r(1),d=function(){function h(u){this.attributes={},this.domNode=u,this.build()}return h.prototype.attribute=function(u,m){m?u.add(this.domNode,m)&&(u.value(this.domNode)!=null?this.attributes[u.attrName]=u:delete this.attributes[u.attrName]):(u.remove(this.domNode),delete this.attributes[u.attrName])},h.prototype.build=function(){var u=this;this.attributes={};var m=i.default.keys(this.domNode),p=l.default.keys(this.domNode),g=c.default.keys(this.domNode);m.concat(p).concat(g).forEach(function(x){var v=o.query(x,o.Scope.ATTRIBUTE);v instanceof i.default&&(u.attributes[v.attrName]=v)})},h.prototype.copy=function(u){var m=this;Object.keys(this.attributes).forEach(function(p){var g=m.attributes[p].value(m.domNode);u.format(p,g)})},h.prototype.move=function(u){var m=this;this.copy(u),Object.keys(this.attributes).forEach(function(p){m.attributes[p].remove(m.domNode)}),this.attributes={}},h.prototype.values=function(){var u=this;return Object.keys(this.attributes).reduce(function(m,p){return m[p]=u.attributes[p].value(u.domNode),m},{})},h}();a.default=d},function(n,a,r){var i=this&&this.__extends||function(){var d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(h,u){h.__proto__=u}||function(h,u){for(var m in u)u.hasOwnProperty(m)&&(h[m]=u[m])};return function(h,u){d(h,u);function m(){this.constructor=h}h.prototype=u===null?Object.create(u):(m.prototype=u.prototype,new m)}}();Object.defineProperty(a,"__esModule",{value:!0});var l=r(12);function c(d,h){var u=d.getAttribute("class")||"";return u.split(/\s+/).filter(function(m){return m.indexOf(h+"-")===0})}var o=function(d){i(h,d);function h(){return d!==null&&d.apply(this,arguments)||this}return h.keys=function(u){return(u.getAttribute("class")||"").split(/\s+/).map(function(m){return m.split("-").slice(0,-1).join("-")})},h.prototype.add=function(u,m){return this.canAdd(u,m)?(this.remove(u),u.classList.add(this.keyName+"-"+m),!0):!1},h.prototype.remove=function(u){var m=c(u,this.keyName);m.forEach(function(p){u.classList.remove(p)}),u.classList.length===0&&u.removeAttribute("class")},h.prototype.value=function(u){var m=c(u,this.keyName)[0]||"",p=m.slice(this.keyName.length+1);return this.canAdd(u,p)?p:""},h}(l.default);a.default=o},function(n,a,r){var i=this&&this.__extends||function(){var d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(h,u){h.__proto__=u}||function(h,u){for(var m in u)u.hasOwnProperty(m)&&(h[m]=u[m])};return function(h,u){d(h,u);function m(){this.constructor=h}h.prototype=u===null?Object.create(u):(m.prototype=u.prototype,new m)}}();Object.defineProperty(a,"__esModule",{value:!0});var l=r(12);function c(d){var h=d.split("-"),u=h.slice(1).map(function(m){return m[0].toUpperCase()+m.slice(1)}).join("");return h[0]+u}var o=function(d){i(h,d);function h(){return d!==null&&d.apply(this,arguments)||this}return h.keys=function(u){return(u.getAttribute("style")||"").split(";").map(function(m){var p=m.split(":");return p[0].trim()})},h.prototype.add=function(u,m){return this.canAdd(u,m)?(u.style[c(this.keyName)]=m,!0):!1},h.prototype.remove=function(u){u.style[c(this.keyName)]="",u.getAttribute("style")||u.removeAttribute("style")},h.prototype.value=function(u){var m=u.style[c(this.keyName)];return this.canAdd(u,m)?m:""},h}(l.default);a.default=o},function(n,a,r){Object.defineProperty(a,"__esModule",{value:!0});var i=function(){function o(d,h){for(var u=0;u<h.length;u++){var m=h[u];m.enumerable=m.enumerable||!1,m.configurable=!0,"value"in m&&(m.writable=!0),Object.defineProperty(d,m.key,m)}}return function(d,h,u){return h&&o(d.prototype,h),u&&o(d,u),d}}();function l(o,d){if(!(o instanceof d))throw new TypeError("Cannot call a class as a function")}var c=function(){function o(d,h){l(this,o),this.quill=d,this.options=h,this.modules={}}return i(o,[{key:"init",value:function(){var h=this;Object.keys(this.options.modules).forEach(function(u){h.modules[u]==null&&h.addModule(u)})}},{key:"addModule",value:function(h){var u=this.quill.constructor.import("modules/"+h);return this.modules[h]=new u(this.quill,this.options.modules[h]||{}),this.modules[h]}}]),o}();c.DEFAULTS={modules:{}},c.themes={default:c},a.default=c},function(n,a,r){Object.defineProperty(a,"__esModule",{value:!0});var i=function(){function y(f,b){for(var j=0;j<b.length;j++){var S=b[j];S.enumerable=S.enumerable||!1,S.configurable=!0,"value"in S&&(S.writable=!0),Object.defineProperty(f,S.key,S)}}return function(f,b,j){return b&&y(f.prototype,b),j&&y(f,j),f}}(),l=function y(f,b,j){f===null&&(f=Function.prototype);var S=Object.getOwnPropertyDescriptor(f,b);if(S===void 0){var k=Object.getPrototypeOf(f);return k===null?void 0:y(k,b,j)}else{if("value"in S)return S.value;var T=S.get;return T===void 0?void 0:T.call(j)}},c=r(0),o=u(c),d=r(7),h=u(d);function u(y){return y&&y.__esModule?y:{default:y}}function m(y,f){if(!(y instanceof f))throw new TypeError("Cannot call a class as a function")}function p(y,f){if(!y)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return f&&(typeof f=="object"||typeof f=="function")?f:y}function g(y,f){if(typeof f!="function"&&f!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof f);y.prototype=Object.create(f&&f.prototype,{constructor:{value:y,enumerable:!1,writable:!0,configurable:!0}}),f&&(Object.setPrototypeOf?Object.setPrototypeOf(y,f):y.__proto__=f)}var x="\uFEFF",v=function(y){g(f,y);function f(b){m(this,f);var j=p(this,(f.__proto__||Object.getPrototypeOf(f)).call(this,b));return j.contentNode=document.createElement("span"),j.contentNode.setAttribute("contenteditable",!1),[].slice.call(j.domNode.childNodes).forEach(function(S){j.contentNode.appendChild(S)}),j.leftGuard=document.createTextNode(x),j.rightGuard=document.createTextNode(x),j.domNode.appendChild(j.leftGuard),j.domNode.appendChild(j.contentNode),j.domNode.appendChild(j.rightGuard),j}return i(f,[{key:"index",value:function(j,S){return j===this.leftGuard?0:j===this.rightGuard?1:l(f.prototype.__proto__||Object.getPrototypeOf(f.prototype),"index",this).call(this,j,S)}},{key:"restore",value:function(j){var S=void 0,k=void 0,T=j.data.split(x).join("");if(j===this.leftGuard)if(this.prev instanceof h.default){var A=this.prev.length();this.prev.insertAt(A,T),S={startNode:this.prev.domNode,startOffset:A+T.length}}else k=document.createTextNode(T),this.parent.insertBefore(o.default.create(k),this),S={startNode:k,startOffset:T.length};else j===this.rightGuard&&(this.next instanceof h.default?(this.next.insertAt(0,T),S={startNode:this.next.domNode,startOffset:T.length}):(k=document.createTextNode(T),this.parent.insertBefore(o.default.create(k),this.next),S={startNode:k,startOffset:T.length}));return j.data=x,S}},{key:"update",value:function(j,S){var k=this;j.forEach(function(T){if(T.type==="characterData"&&(T.target===k.leftGuard||T.target===k.rightGuard)){var A=k.restore(T.target);A&&(S.range=A)}})}}]),f}(o.default.Embed);a.default=v},function(n,a,r){Object.defineProperty(a,"__esModule",{value:!0}),a.AlignStyle=a.AlignClass=a.AlignAttribute=void 0;var i=r(0),l=c(i);function c(m){return m&&m.__esModule?m:{default:m}}var o={scope:l.default.Scope.BLOCK,whitelist:["right","center","justify"]},d=new l.default.Attributor.Attribute("align","align",o),h=new l.default.Attributor.Class("align","ql-align",o),u=new l.default.Attributor.Style("align","text-align",o);a.AlignAttribute=d,a.AlignClass=h,a.AlignStyle=u},function(n,a,r){Object.defineProperty(a,"__esModule",{value:!0}),a.BackgroundStyle=a.BackgroundClass=void 0;var i=r(0),l=o(i),c=r(26);function o(u){return u&&u.__esModule?u:{default:u}}var d=new l.default.Attributor.Class("background","ql-bg",{scope:l.default.Scope.INLINE}),h=new c.ColorAttributor("background","background-color",{scope:l.default.Scope.INLINE});a.BackgroundClass=d,a.BackgroundStyle=h},function(n,a,r){Object.defineProperty(a,"__esModule",{value:!0}),a.DirectionStyle=a.DirectionClass=a.DirectionAttribute=void 0;var i=r(0),l=c(i);function c(m){return m&&m.__esModule?m:{default:m}}var o={scope:l.default.Scope.BLOCK,whitelist:["rtl"]},d=new l.default.Attributor.Attribute("direction","dir",o),h=new l.default.Attributor.Class("direction","ql-direction",o),u=new l.default.Attributor.Style("direction","direction",o);a.DirectionAttribute=d,a.DirectionClass=h,a.DirectionStyle=u},function(n,a,r){Object.defineProperty(a,"__esModule",{value:!0}),a.FontClass=a.FontStyle=void 0;var i=function(){function y(f,b){for(var j=0;j<b.length;j++){var S=b[j];S.enumerable=S.enumerable||!1,S.configurable=!0,"value"in S&&(S.writable=!0),Object.defineProperty(f,S.key,S)}}return function(f,b,j){return b&&y(f.prototype,b),j&&y(f,j),f}}(),l=function y(f,b,j){f===null&&(f=Function.prototype);var S=Object.getOwnPropertyDescriptor(f,b);if(S===void 0){var k=Object.getPrototypeOf(f);return k===null?void 0:y(k,b,j)}else{if("value"in S)return S.value;var T=S.get;return T===void 0?void 0:T.call(j)}},c=r(0),o=d(c);function d(y){return y&&y.__esModule?y:{default:y}}function h(y,f){if(!(y instanceof f))throw new TypeError("Cannot call a class as a function")}function u(y,f){if(!y)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return f&&(typeof f=="object"||typeof f=="function")?f:y}function m(y,f){if(typeof f!="function"&&f!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof f);y.prototype=Object.create(f&&f.prototype,{constructor:{value:y,enumerable:!1,writable:!0,configurable:!0}}),f&&(Object.setPrototypeOf?Object.setPrototypeOf(y,f):y.__proto__=f)}var p={scope:o.default.Scope.INLINE,whitelist:["serif","monospace"]},g=new o.default.Attributor.Class("font","ql-font",p),x=function(y){m(f,y);function f(){return h(this,f),u(this,(f.__proto__||Object.getPrototypeOf(f)).apply(this,arguments))}return i(f,[{key:"value",value:function(j){return l(f.prototype.__proto__||Object.getPrototypeOf(f.prototype),"value",this).call(this,j).replace(/["']/g,"")}}]),f}(o.default.Attributor.Style),v=new x("font","font-family",p);a.FontStyle=v,a.FontClass=g},function(n,a,r){Object.defineProperty(a,"__esModule",{value:!0}),a.SizeStyle=a.SizeClass=void 0;var i=r(0),l=c(i);function c(h){return h&&h.__esModule?h:{default:h}}var o=new l.default.Attributor.Class("size","ql-size",{scope:l.default.Scope.INLINE,whitelist:["small","large","huge"]}),d=new l.default.Attributor.Style("size","font-size",{scope:l.default.Scope.INLINE,whitelist:["10px","18px","32px"]});a.SizeClass=o,a.SizeStyle=d},function(n,a,r){n.exports={align:{"":r(76),center:r(77),right:r(78),justify:r(79)},background:r(80),blockquote:r(81),bold:r(82),clean:r(83),code:r(58),"code-block":r(58),color:r(84),direction:{"":r(85),rtl:r(86)},float:{center:r(87),full:r(88),left:r(89),right:r(90)},formula:r(91),header:{1:r(92),2:r(93)},italic:r(94),image:r(95),indent:{"+1":r(96),"-1":r(97)},link:r(98),list:{ordered:r(99),bullet:r(100),check:r(101)},script:{sub:r(102),super:r(103)},strike:r(104),underline:r(105),video:r(106)}},function(n,a,r){Object.defineProperty(a,"__esModule",{value:!0}),a.getLastChangeIndex=a.default=void 0;var i=function(){function b(j,S){for(var k=0;k<S.length;k++){var T=S[k];T.enumerable=T.enumerable||!1,T.configurable=!0,"value"in T&&(T.writable=!0),Object.defineProperty(j,T.key,T)}}return function(j,S,k){return S&&b(j.prototype,S),k&&b(j,k),j}}(),l=r(0),c=m(l),o=r(5),d=m(o),h=r(9),u=m(h);function m(b){return b&&b.__esModule?b:{default:b}}function p(b,j){if(!(b instanceof j))throw new TypeError("Cannot call a class as a function")}function g(b,j){if(!b)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return j&&(typeof j=="object"||typeof j=="function")?j:b}function x(b,j){if(typeof j!="function"&&j!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof j);b.prototype=Object.create(j&&j.prototype,{constructor:{value:b,enumerable:!1,writable:!0,configurable:!0}}),j&&(Object.setPrototypeOf?Object.setPrototypeOf(b,j):b.__proto__=j)}var v=function(b){x(j,b);function j(S,k){p(this,j);var T=g(this,(j.__proto__||Object.getPrototypeOf(j)).call(this,S,k));return T.lastRecorded=0,T.ignoreChange=!1,T.clear(),T.quill.on(d.default.events.EDITOR_CHANGE,function(A,C,w,P){A!==d.default.events.TEXT_CHANGE||T.ignoreChange||(!T.options.userOnly||P===d.default.sources.USER?T.record(C,w):T.transform(C))}),T.quill.keyboard.addBinding({key:"Z",shortKey:!0},T.undo.bind(T)),T.quill.keyboard.addBinding({key:"Z",shortKey:!0,shiftKey:!0},T.redo.bind(T)),/Win/i.test(navigator.platform)&&T.quill.keyboard.addBinding({key:"Y",shortKey:!0},T.redo.bind(T)),T}return i(j,[{key:"change",value:function(k,T){if(this.stack[k].length!==0){var A=this.stack[k].pop();this.stack[T].push(A),this.lastRecorded=0,this.ignoreChange=!0,this.quill.updateContents(A[k],d.default.sources.USER),this.ignoreChange=!1;var C=f(A[k]);this.quill.setSelection(C)}}},{key:"clear",value:function(){this.stack={undo:[],redo:[]}}},{key:"cutoff",value:function(){this.lastRecorded=0}},{key:"record",value:function(k,T){if(k.ops.length!==0){this.stack.redo=[];var A=this.quill.getContents().diff(T),C=Date.now();if(this.lastRecorded+this.options.delay>C&&this.stack.undo.length>0){var w=this.stack.undo.pop();A=A.compose(w.undo),k=w.redo.compose(k)}else this.lastRecorded=C;this.stack.undo.push({redo:k,undo:A}),this.stack.undo.length>this.options.maxStack&&this.stack.undo.shift()}}},{key:"redo",value:function(){this.change("redo","undo")}},{key:"transform",value:function(k){this.stack.undo.forEach(function(T){T.undo=k.transform(T.undo,!0),T.redo=k.transform(T.redo,!0)}),this.stack.redo.forEach(function(T){T.undo=k.transform(T.undo,!0),T.redo=k.transform(T.redo,!0)})}},{key:"undo",value:function(){this.change("undo","redo")}}]),j}(u.default);v.DEFAULTS={delay:1e3,maxStack:100,userOnly:!1};function y(b){var j=b.ops[b.ops.length-1];return j==null?!1:j.insert!=null?typeof j.insert=="string"&&j.insert.endsWith(`
`):j.attributes!=null?Object.keys(j.attributes).some(function(S){return c.default.query(S,c.default.Scope.BLOCK)!=null}):!1}function f(b){var j=b.reduce(function(k,T){return k+=T.delete||0,k},0),S=b.length()-j;return y(b)&&(S-=1),S}a.default=v,a.getLastChangeIndex=f},function(n,a,r){Object.defineProperty(a,"__esModule",{value:!0}),a.default=a.BaseTooltip=void 0;var i=function(){function G(H,V){for(var se=0;se<V.length;se++){var Z=V[se];Z.enumerable=Z.enumerable||!1,Z.configurable=!0,"value"in Z&&(Z.writable=!0),Object.defineProperty(H,Z.key,Z)}}return function(H,V,se){return V&&G(H.prototype,V),se&&G(H,se),H}}(),l=function G(H,V,se){H===null&&(H=Function.prototype);var Z=Object.getOwnPropertyDescriptor(H,V);if(Z===void 0){var le=Object.getPrototypeOf(H);return le===null?void 0:G(le,V,se)}else{if("value"in Z)return Z.value;var ne=Z.get;return ne===void 0?void 0:ne.call(se)}},c=r(3),o=C(c),d=r(2),h=C(d),u=r(8),m=C(u),p=r(23),g=C(p),x=r(34),v=C(x),y=r(59),f=C(y),b=r(60),j=C(b),S=r(28),k=C(S),T=r(61),A=C(T);function C(G){return G&&G.__esModule?G:{default:G}}function w(G,H){if(!(G instanceof H))throw new TypeError("Cannot call a class as a function")}function P(G,H){if(!G)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return H&&(typeof H=="object"||typeof H=="function")?H:G}function M(G,H){if(typeof H!="function"&&H!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof H);G.prototype=Object.create(H&&H.prototype,{constructor:{value:G,enumerable:!1,writable:!0,configurable:!0}}),H&&(Object.setPrototypeOf?Object.setPrototypeOf(G,H):G.__proto__=H)}var I=[!1,"center","right","justify"],W=["#000000","#e60000","#ff9900","#ffff00","#008a00","#0066cc","#9933ff","#ffffff","#facccc","#ffebcc","#ffffcc","#cce8cc","#cce0f5","#ebd6ff","#bbbbbb","#f06666","#ffc266","#ffff66","#66b966","#66a3e0","#c285ff","#888888","#a10000","#b26b00","#b2b200","#006100","#0047b2","#6b24b2","#444444","#5c0000","#663d00","#666600","#003700","#002966","#3d1466"],_=[!1,"serif","monospace"],B=["1","2","3",!1],O=["small",!1,"large","huge"],z=function(G){M(H,G);function H(V,se){w(this,H);var Z=P(this,(H.__proto__||Object.getPrototypeOf(H)).call(this,V,se)),le=function ne(ue){if(!document.body.contains(V.root))return document.body.removeEventListener("click",ne);Z.tooltip!=null&&!Z.tooltip.root.contains(ue.target)&&document.activeElement!==Z.tooltip.textbox&&!Z.quill.hasFocus()&&Z.tooltip.hide(),Z.pickers!=null&&Z.pickers.forEach(function(te){te.container.contains(ue.target)||te.close()})};return V.emitter.listenDOM("click",document.body,le),Z}return i(H,[{key:"addModule",value:function(se){var Z=l(H.prototype.__proto__||Object.getPrototypeOf(H.prototype),"addModule",this).call(this,se);return se==="toolbar"&&this.extendToolbar(Z),Z}},{key:"buildButtons",value:function(se,Z){se.forEach(function(le){var ne=le.getAttribute("class")||"";ne.split(/\s+/).forEach(function(ue){if(ue.startsWith("ql-")&&(ue=ue.slice(3),Z[ue]!=null))if(ue==="direction")le.innerHTML=Z[ue][""]+Z[ue].rtl;else if(typeof Z[ue]=="string")le.innerHTML=Z[ue];else{var te=le.value||"";te!=null&&Z[ue][te]&&(le.innerHTML=Z[ue][te])}})})}},{key:"buildPickers",value:function(se,Z){var le=this;this.pickers=se.map(function(ue){if(ue.classList.contains("ql-align"))return ue.querySelector("option")==null&&D(ue,I),new j.default(ue,Z.align);if(ue.classList.contains("ql-background")||ue.classList.contains("ql-color")){var te=ue.classList.contains("ql-background")?"background":"color";return ue.querySelector("option")==null&&D(ue,W,te==="background"?"#ffffff":"#000000"),new f.default(ue,Z[te])}else return ue.querySelector("option")==null&&(ue.classList.contains("ql-font")?D(ue,_):ue.classList.contains("ql-header")?D(ue,B):ue.classList.contains("ql-size")&&D(ue,O)),new k.default(ue)});var ne=function(){le.pickers.forEach(function(te){te.update()})};this.quill.on(m.default.events.EDITOR_CHANGE,ne)}}]),H}(v.default);z.DEFAULTS=(0,o.default)(!0,{},v.default.DEFAULTS,{modules:{toolbar:{handlers:{formula:function(){this.quill.theme.tooltip.edit("formula")},image:function(){var H=this,V=this.container.querySelector("input.ql-image[type=file]");V==null&&(V=document.createElement("input"),V.setAttribute("type","file"),V.setAttribute("accept","image/png, image/gif, image/jpeg, image/bmp, image/x-icon"),V.classList.add("ql-image"),V.addEventListener("change",function(){if(V.files!=null&&V.files[0]!=null){var se=new FileReader;se.onload=function(Z){var le=H.quill.getSelection(!0);H.quill.updateContents(new h.default().retain(le.index).delete(le.length).insert({image:Z.target.result}),m.default.sources.USER),H.quill.setSelection(le.index+1,m.default.sources.SILENT),V.value=""},se.readAsDataURL(V.files[0])}}),this.container.appendChild(V)),V.click()},video:function(){this.quill.theme.tooltip.edit("video")}}}}});var F=function(G){M(H,G);function H(V,se){w(this,H);var Z=P(this,(H.__proto__||Object.getPrototypeOf(H)).call(this,V,se));return Z.textbox=Z.root.querySelector('input[type="text"]'),Z.listen(),Z}return i(H,[{key:"listen",value:function(){var se=this;this.textbox.addEventListener("keydown",function(Z){g.default.match(Z,"enter")?(se.save(),Z.preventDefault()):g.default.match(Z,"escape")&&(se.cancel(),Z.preventDefault())})}},{key:"cancel",value:function(){this.hide()}},{key:"edit",value:function(){var se=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"link",Z=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;this.root.classList.remove("ql-hidden"),this.root.classList.add("ql-editing"),Z!=null?this.textbox.value=Z:se!==this.root.getAttribute("data-mode")&&(this.textbox.value=""),this.position(this.quill.getBounds(this.quill.selection.savedRange)),this.textbox.select(),this.textbox.setAttribute("placeholder",this.textbox.getAttribute("data-"+se)||""),this.root.setAttribute("data-mode",se)}},{key:"restoreFocus",value:function(){var se=this.quill.scrollingContainer.scrollTop;this.quill.focus(),this.quill.scrollingContainer.scrollTop=se}},{key:"save",value:function(){var se=this.textbox.value;switch(this.root.getAttribute("data-mode")){case"link":{var Z=this.quill.root.scrollTop;this.linkRange?(this.quill.formatText(this.linkRange,"link",se,m.default.sources.USER),delete this.linkRange):(this.restoreFocus(),this.quill.format("link",se,m.default.sources.USER)),this.quill.root.scrollTop=Z;break}case"video":se=K(se);case"formula":{if(!se)break;var le=this.quill.getSelection(!0);if(le!=null){var ne=le.index+le.length;this.quill.insertEmbed(ne,this.root.getAttribute("data-mode"),se,m.default.sources.USER),this.root.getAttribute("data-mode")==="formula"&&this.quill.insertText(ne+1," ",m.default.sources.USER),this.quill.setSelection(ne+2,m.default.sources.USER)}break}}this.textbox.value="",this.hide()}}]),H}(A.default);function K(G){var H=G.match(/^(?:(https?):\/\/)?(?:(?:www|m)\.)?youtube\.com\/watch.*v=([a-zA-Z0-9_-]+)/)||G.match(/^(?:(https?):\/\/)?(?:(?:www|m)\.)?youtu\.be\/([a-zA-Z0-9_-]+)/);return H?(H[1]||"https")+"://www.youtube.com/embed/"+H[2]+"?showinfo=0":(H=G.match(/^(?:(https?):\/\/)?(?:www\.)?vimeo\.com\/(\d+)/))?(H[1]||"https")+"://player.vimeo.com/video/"+H[2]+"/":G}function D(G,H){var V=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;H.forEach(function(se){var Z=document.createElement("option");se===V?Z.setAttribute("selected","selected"):Z.setAttribute("value",se),G.appendChild(Z)})}a.BaseTooltip=F,a.default=z},function(n,a,r){Object.defineProperty(a,"__esModule",{value:!0});var i=function(){function l(){this.head=this.tail=null,this.length=0}return l.prototype.append=function(){for(var c=[],o=0;o<arguments.length;o++)c[o]=arguments[o];this.insertBefore(c[0],null),c.length>1&&this.append.apply(this,c.slice(1))},l.prototype.contains=function(c){for(var o,d=this.iterator();o=d();)if(o===c)return!0;return!1},l.prototype.insertBefore=function(c,o){c&&(c.next=o,o!=null?(c.prev=o.prev,o.prev!=null&&(o.prev.next=c),o.prev=c,o===this.head&&(this.head=c)):this.tail!=null?(this.tail.next=c,c.prev=this.tail,this.tail=c):(c.prev=null,this.head=this.tail=c),this.length+=1)},l.prototype.offset=function(c){for(var o=0,d=this.head;d!=null;){if(d===c)return o;o+=d.length(),d=d.next}return-1},l.prototype.remove=function(c){this.contains(c)&&(c.prev!=null&&(c.prev.next=c.next),c.next!=null&&(c.next.prev=c.prev),c===this.head&&(this.head=c.next),c===this.tail&&(this.tail=c.prev),this.length-=1)},l.prototype.iterator=function(c){return c===void 0&&(c=this.head),function(){var o=c;return c!=null&&(c=c.next),o}},l.prototype.find=function(c,o){o===void 0&&(o=!1);for(var d,h=this.iterator();d=h();){var u=d.length();if(c<u||o&&c===u&&(d.next==null||d.next.length()!==0))return[d,c];c-=u}return[null,0]},l.prototype.forEach=function(c){for(var o,d=this.iterator();o=d();)c(o)},l.prototype.forEachAt=function(c,o,d){if(!(o<=0))for(var h=this.find(c),u=h[0],m=h[1],p,g=c-m,x=this.iterator(u);(p=x())&&g<c+o;){var v=p.length();c>g?d(p,c-g,Math.min(o,g+v-c)):d(p,0,Math.min(v,c+o-g)),g+=v}},l.prototype.map=function(c){return this.reduce(function(o,d){return o.push(c(d)),o},[])},l.prototype.reduce=function(c,o){for(var d,h=this.iterator();d=h();)o=c(o,d);return o},l}();a.default=i},function(n,a,r){var i=this&&this.__extends||function(){var u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(m,p){m.__proto__=p}||function(m,p){for(var g in p)p.hasOwnProperty(g)&&(m[g]=p[g])};return function(m,p){u(m,p);function g(){this.constructor=m}m.prototype=p===null?Object.create(p):(g.prototype=p.prototype,new g)}}();Object.defineProperty(a,"__esModule",{value:!0});var l=r(17),c=r(1),o={attributes:!0,characterData:!0,characterDataOldValue:!0,childList:!0,subtree:!0},d=100,h=function(u){i(m,u);function m(p){var g=u.call(this,p)||this;return g.scroll=g,g.observer=new MutationObserver(function(x){g.update(x)}),g.observer.observe(g.domNode,o),g.attach(),g}return m.prototype.detach=function(){u.prototype.detach.call(this),this.observer.disconnect()},m.prototype.deleteAt=function(p,g){this.update(),p===0&&g===this.length()?this.children.forEach(function(x){x.remove()}):u.prototype.deleteAt.call(this,p,g)},m.prototype.formatAt=function(p,g,x,v){this.update(),u.prototype.formatAt.call(this,p,g,x,v)},m.prototype.insertAt=function(p,g,x){this.update(),u.prototype.insertAt.call(this,p,g,x)},m.prototype.optimize=function(p,g){var x=this;p===void 0&&(p=[]),g===void 0&&(g={}),u.prototype.optimize.call(this,g);for(var v=[].slice.call(this.observer.takeRecords());v.length>0;)p.push(v.pop());for(var y=function(S,k){k===void 0&&(k=!0),!(S==null||S===x)&&S.domNode.parentNode!=null&&(S.domNode[c.DATA_KEY].mutations==null&&(S.domNode[c.DATA_KEY].mutations=[]),k&&y(S.parent))},f=function(S){S.domNode[c.DATA_KEY]==null||S.domNode[c.DATA_KEY].mutations==null||(S instanceof l.default&&S.children.forEach(f),S.optimize(g))},b=p,j=0;b.length>0;j+=1){if(j>=d)throw new Error("[Parchment] Maximum optimize iterations reached");for(b.forEach(function(S){var k=c.find(S.target,!0);k!=null&&(k.domNode===S.target&&(S.type==="childList"?(y(c.find(S.previousSibling,!1)),[].forEach.call(S.addedNodes,function(T){var A=c.find(T,!1);y(A,!1),A instanceof l.default&&A.children.forEach(function(C){y(C,!1)})})):S.type==="attributes"&&y(k.prev)),y(k))}),this.children.forEach(f),b=[].slice.call(this.observer.takeRecords()),v=b.slice();v.length>0;)p.push(v.pop())}},m.prototype.update=function(p,g){var x=this;g===void 0&&(g={}),p=p||this.observer.takeRecords(),p.map(function(v){var y=c.find(v.target,!0);return y==null?null:y.domNode[c.DATA_KEY].mutations==null?(y.domNode[c.DATA_KEY].mutations=[v],y):(y.domNode[c.DATA_KEY].mutations.push(v),null)}).forEach(function(v){v==null||v===x||v.domNode[c.DATA_KEY]==null||v.update(v.domNode[c.DATA_KEY].mutations||[],g)}),this.domNode[c.DATA_KEY].mutations!=null&&u.prototype.update.call(this,this.domNode[c.DATA_KEY].mutations,g),this.optimize(p,g)},m.blotName="scroll",m.defaultChild="block",m.scope=c.Scope.BLOCK_BLOT,m.tagName="DIV",m}(l.default);a.default=h},function(n,a,r){var i=this&&this.__extends||function(){var h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,m){u.__proto__=m}||function(u,m){for(var p in m)m.hasOwnProperty(p)&&(u[p]=m[p])};return function(u,m){h(u,m);function p(){this.constructor=u}u.prototype=m===null?Object.create(m):(p.prototype=m.prototype,new p)}}();Object.defineProperty(a,"__esModule",{value:!0});var l=r(18),c=r(1);function o(h,u){if(Object.keys(h).length!==Object.keys(u).length)return!1;for(var m in h)if(h[m]!==u[m])return!1;return!0}var d=function(h){i(u,h);function u(){return h!==null&&h.apply(this,arguments)||this}return u.formats=function(m){if(m.tagName!==u.tagName)return h.formats.call(this,m)},u.prototype.format=function(m,p){var g=this;m===this.statics.blotName&&!p?(this.children.forEach(function(x){x instanceof l.default||(x=x.wrap(u.blotName,!0)),g.attributes.copy(x)}),this.unwrap()):h.prototype.format.call(this,m,p)},u.prototype.formatAt=function(m,p,g,x){if(this.formats()[g]!=null||c.query(g,c.Scope.ATTRIBUTE)){var v=this.isolate(m,p);v.format(g,x)}else h.prototype.formatAt.call(this,m,p,g,x)},u.prototype.optimize=function(m){h.prototype.optimize.call(this,m);var p=this.formats();if(Object.keys(p).length===0)return this.unwrap();var g=this.next;g instanceof u&&g.prev===this&&o(p,g.formats())&&(g.moveChildren(this),g.remove())},u.blotName="inline",u.scope=c.Scope.INLINE_BLOT,u.tagName="SPAN",u}(l.default);a.default=d},function(n,a,r){var i=this&&this.__extends||function(){var d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(h,u){h.__proto__=u}||function(h,u){for(var m in u)u.hasOwnProperty(m)&&(h[m]=u[m])};return function(h,u){d(h,u);function m(){this.constructor=h}h.prototype=u===null?Object.create(u):(m.prototype=u.prototype,new m)}}();Object.defineProperty(a,"__esModule",{value:!0});var l=r(18),c=r(1),o=function(d){i(h,d);function h(){return d!==null&&d.apply(this,arguments)||this}return h.formats=function(u){var m=c.query(h.blotName).tagName;if(u.tagName!==m)return d.formats.call(this,u)},h.prototype.format=function(u,m){c.query(u,c.Scope.BLOCK)!=null&&(u===this.statics.blotName&&!m?this.replaceWith(h.blotName):d.prototype.format.call(this,u,m))},h.prototype.formatAt=function(u,m,p,g){c.query(p,c.Scope.BLOCK)!=null?this.format(p,g):d.prototype.formatAt.call(this,u,m,p,g)},h.prototype.insertAt=function(u,m,p){if(p==null||c.query(m,c.Scope.INLINE)!=null)d.prototype.insertAt.call(this,u,m,p);else{var g=this.split(u),x=c.create(m,p);g.parent.insertBefore(x,g)}},h.prototype.update=function(u,m){navigator.userAgent.match(/Trident/)?this.build():d.prototype.update.call(this,u,m)},h.blotName="block",h.scope=c.Scope.BLOCK_BLOT,h.tagName="P",h}(l.default);a.default=o},function(n,a,r){var i=this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,h){d.__proto__=h}||function(d,h){for(var u in h)h.hasOwnProperty(u)&&(d[u]=h[u])};return function(d,h){o(d,h);function u(){this.constructor=d}d.prototype=h===null?Object.create(h):(u.prototype=h.prototype,new u)}}();Object.defineProperty(a,"__esModule",{value:!0});var l=r(19),c=function(o){i(d,o);function d(){return o!==null&&o.apply(this,arguments)||this}return d.formats=function(h){},d.prototype.format=function(h,u){o.prototype.formatAt.call(this,0,this.length(),h,u)},d.prototype.formatAt=function(h,u,m,p){h===0&&u===this.length()?this.format(m,p):o.prototype.formatAt.call(this,h,u,m,p)},d.prototype.formats=function(){return this.statics.formats(this.domNode)},d}(l.default);a.default=c},function(n,a,r){var i=this&&this.__extends||function(){var d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(h,u){h.__proto__=u}||function(h,u){for(var m in u)u.hasOwnProperty(m)&&(h[m]=u[m])};return function(h,u){d(h,u);function m(){this.constructor=h}h.prototype=u===null?Object.create(u):(m.prototype=u.prototype,new m)}}();Object.defineProperty(a,"__esModule",{value:!0});var l=r(19),c=r(1),o=function(d){i(h,d);function h(u){var m=d.call(this,u)||this;return m.text=m.statics.value(m.domNode),m}return h.create=function(u){return document.createTextNode(u)},h.value=function(u){var m=u.data;return m.normalize&&(m=m.normalize()),m},h.prototype.deleteAt=function(u,m){this.domNode.data=this.text=this.text.slice(0,u)+this.text.slice(u+m)},h.prototype.index=function(u,m){return this.domNode===u?m:-1},h.prototype.insertAt=function(u,m,p){p==null?(this.text=this.text.slice(0,u)+m+this.text.slice(u),this.domNode.data=this.text):d.prototype.insertAt.call(this,u,m,p)},h.prototype.length=function(){return this.text.length},h.prototype.optimize=function(u){d.prototype.optimize.call(this,u),this.text=this.statics.value(this.domNode),this.text.length===0?this.remove():this.next instanceof h&&this.next.prev===this&&(this.insertAt(this.length(),this.next.value()),this.next.remove())},h.prototype.position=function(u,m){return[this.domNode,u]},h.prototype.split=function(u,m){if(m===void 0&&(m=!1),!m){if(u===0)return this;if(u===this.length())return this.next}var p=c.create(this.domNode.splitText(u));return this.parent.insertBefore(p,this.next),this.text=this.statics.value(this.domNode),p},h.prototype.update=function(u,m){var p=this;u.some(function(g){return g.type==="characterData"&&g.target===p.domNode})&&(this.text=this.statics.value(this.domNode))},h.prototype.value=function(){return this.text},h.blotName="text",h.scope=c.Scope.INLINE_BLOT,h}(l.default);a.default=o},function(n,a,r){var i=document.createElement("div");if(i.classList.toggle("test-class",!1),i.classList.contains("test-class")){var l=DOMTokenList.prototype.toggle;DOMTokenList.prototype.toggle=function(c,o){return arguments.length>1&&!this.contains(c)==!o?o:l.call(this,c)}}String.prototype.startsWith||(String.prototype.startsWith=function(c,o){return o=o||0,this.substr(o,c.length)===c}),String.prototype.endsWith||(String.prototype.endsWith=function(c,o){var d=this.toString();(typeof o!="number"||!isFinite(o)||Math.floor(o)!==o||o>d.length)&&(o=d.length),o-=c.length;var h=d.indexOf(c,o);return h!==-1&&h===o}),Array.prototype.find||Object.defineProperty(Array.prototype,"find",{value:function(o){if(this===null)throw new TypeError("Array.prototype.find called on null or undefined");if(typeof o!="function")throw new TypeError("predicate must be a function");for(var d=Object(this),h=d.length>>>0,u=arguments[1],m,p=0;p<h;p++)if(m=d[p],o.call(u,m,p,d))return m}}),document.addEventListener("DOMContentLoaded",function(){document.execCommand("enableObjectResizing",!1,!1),document.execCommand("autoUrlDetect",!1,!1)})},function(n,a){var r=-1,i=1,l=0;function c(j,S,k){if(j==S)return j?[[l,j]]:[];(k<0||j.length<k)&&(k=null);var T=u(j,S),A=j.substring(0,T);j=j.substring(T),S=S.substring(T),T=m(j,S);var C=j.substring(j.length-T);j=j.substring(0,j.length-T),S=S.substring(0,S.length-T);var w=o(j,S);return A&&w.unshift([l,A]),C&&w.push([l,C]),g(w),k!=null&&(w=y(w,k)),w=f(w),w}function o(j,S){var k;if(!j)return[[i,S]];if(!S)return[[r,j]];var T=j.length>S.length?j:S,A=j.length>S.length?S:j,C=T.indexOf(A);if(C!=-1)return k=[[i,T.substring(0,C)],[l,A],[i,T.substring(C+A.length)]],j.length>S.length&&(k[0][0]=k[2][0]=r),k;if(A.length==1)return[[r,j],[i,S]];var w=p(j,S);if(w){var P=w[0],M=w[1],I=w[2],W=w[3],_=w[4],B=c(P,I),O=c(M,W);return B.concat([[l,_]],O)}return d(j,S)}function d(j,S){for(var k=j.length,T=S.length,A=Math.ceil((k+T)/2),C=A,w=2*A,P=new Array(w),M=new Array(w),I=0;I<w;I++)P[I]=-1,M[I]=-1;P[C+1]=0,M[C+1]=0;for(var W=k-T,_=W%2!=0,B=0,O=0,z=0,F=0,K=0;K<A;K++){for(var D=-K+B;D<=K-O;D+=2){var G=C+D,H;D==-K||D!=K&&P[G-1]<P[G+1]?H=P[G+1]:H=P[G-1]+1;for(var V=H-D;H<k&&V<T&&j.charAt(H)==S.charAt(V);)H++,V++;if(P[G]=H,H>k)O+=2;else if(V>T)B+=2;else if(_){var se=C+W-D;if(se>=0&&se<w&&M[se]!=-1){var Z=k-M[se];if(H>=Z)return h(j,S,H,V)}}}for(var le=-K+z;le<=K-F;le+=2){var se=C+le,Z;le==-K||le!=K&&M[se-1]<M[se+1]?Z=M[se+1]:Z=M[se-1]+1;for(var ne=Z-le;Z<k&&ne<T&&j.charAt(k-Z-1)==S.charAt(T-ne-1);)Z++,ne++;if(M[se]=Z,Z>k)F+=2;else if(ne>T)z+=2;else if(!_){var G=C+W-le;if(G>=0&&G<w&&P[G]!=-1){var H=P[G],V=C+H-G;if(Z=k-Z,H>=Z)return h(j,S,H,V)}}}}return[[r,j],[i,S]]}function h(j,S,k,T){var A=j.substring(0,k),C=S.substring(0,T),w=j.substring(k),P=S.substring(T),M=c(A,C),I=c(w,P);return M.concat(I)}function u(j,S){if(!j||!S||j.charAt(0)!=S.charAt(0))return 0;for(var k=0,T=Math.min(j.length,S.length),A=T,C=0;k<A;)j.substring(C,A)==S.substring(C,A)?(k=A,C=k):T=A,A=Math.floor((T-k)/2+k);return A}function m(j,S){if(!j||!S||j.charAt(j.length-1)!=S.charAt(S.length-1))return 0;for(var k=0,T=Math.min(j.length,S.length),A=T,C=0;k<A;)j.substring(j.length-A,j.length-C)==S.substring(S.length-A,S.length-C)?(k=A,C=k):T=A,A=Math.floor((T-k)/2+k);return A}function p(j,S){var k=j.length>S.length?j:S,T=j.length>S.length?S:j;if(k.length<4||T.length*2<k.length)return null;function A(O,z,F){for(var K=O.substring(F,F+Math.floor(O.length/4)),D=-1,G="",H,V,se,Z;(D=z.indexOf(K,D+1))!=-1;){var le=u(O.substring(F),z.substring(D)),ne=m(O.substring(0,F),z.substring(0,D));G.length<ne+le&&(G=z.substring(D-ne,D)+z.substring(D,D+le),H=O.substring(0,F-ne),V=O.substring(F+le),se=z.substring(0,D-ne),Z=z.substring(D+le))}return G.length*2>=O.length?[H,V,se,Z,G]:null}var C=A(k,T,Math.ceil(k.length/4)),w=A(k,T,Math.ceil(k.length/2)),P;if(!C&&!w)return null;w?C?P=C[4].length>w[4].length?C:w:P=w:P=C;var M,I,W,_;j.length>S.length?(M=P[0],I=P[1],W=P[2],_=P[3]):(W=P[0],_=P[1],M=P[2],I=P[3]);var B=P[4];return[M,I,W,_,B]}function g(j){j.push([l,""]);for(var S=0,k=0,T=0,A="",C="",w;S<j.length;)switch(j[S][0]){case i:T++,C+=j[S][1],S++;break;case r:k++,A+=j[S][1],S++;break;case l:k+T>1?(k!==0&&T!==0&&(w=u(C,A),w!==0&&(S-k-T>0&&j[S-k-T-1][0]==l?j[S-k-T-1][1]+=C.substring(0,w):(j.splice(0,0,[l,C.substring(0,w)]),S++),C=C.substring(w),A=A.substring(w)),w=m(C,A),w!==0&&(j[S][1]=C.substring(C.length-w)+j[S][1],C=C.substring(0,C.length-w),A=A.substring(0,A.length-w))),k===0?j.splice(S-T,k+T,[i,C]):T===0?j.splice(S-k,k+T,[r,A]):j.splice(S-k-T,k+T,[r,A],[i,C]),S=S-k-T+(k?1:0)+(T?1:0)+1):S!==0&&j[S-1][0]==l?(j[S-1][1]+=j[S][1],j.splice(S,1)):S++,T=0,k=0,A="",C="";break}j[j.length-1][1]===""&&j.pop();var P=!1;for(S=1;S<j.length-1;)j[S-1][0]==l&&j[S+1][0]==l&&(j[S][1].substring(j[S][1].length-j[S-1][1].length)==j[S-1][1]?(j[S][1]=j[S-1][1]+j[S][1].substring(0,j[S][1].length-j[S-1][1].length),j[S+1][1]=j[S-1][1]+j[S+1][1],j.splice(S-1,1),P=!0):j[S][1].substring(0,j[S+1][1].length)==j[S+1][1]&&(j[S-1][1]+=j[S+1][1],j[S][1]=j[S][1].substring(j[S+1][1].length)+j[S+1][1],j.splice(S+1,1),P=!0)),S++;P&&g(j)}var x=c;x.INSERT=i,x.DELETE=r,x.EQUAL=l,n.exports=x;function v(j,S){if(S===0)return[l,j];for(var k=0,T=0;T<j.length;T++){var A=j[T];if(A[0]===r||A[0]===l){var C=k+A[1].length;if(S===C)return[T+1,j];if(S<C){j=j.slice();var w=S-k,P=[A[0],A[1].slice(0,w)],M=[A[0],A[1].slice(w)];return j.splice(T,1,P,M),[T+1,j]}else k=C}}throw new Error("cursor_pos is out of bounds!")}function y(j,S){var k=v(j,S),T=k[1],A=k[0],C=T[A],w=T[A+1];if(C==null)return j;if(C[0]!==l)return j;if(w!=null&&C[1]+w[1]===w[1]+C[1])return T.splice(A,2,w,C),b(T,A,2);if(w!=null&&w[1].indexOf(C[1])===0){T.splice(A,2,[w[0],C[1]],[0,C[1]]);var P=w[1].slice(C[1].length);return P.length>0&&T.splice(A+2,0,[w[0],P]),b(T,A,3)}else return j}function f(j){for(var S=!1,k=function(w){return w.charCodeAt(0)>=56320&&w.charCodeAt(0)<=57343},T=function(w){return w.charCodeAt(w.length-1)>=55296&&w.charCodeAt(w.length-1)<=56319},A=2;A<j.length;A+=1)j[A-2][0]===l&&T(j[A-2][1])&&j[A-1][0]===r&&k(j[A-1][1])&&j[A][0]===i&&k(j[A][1])&&(S=!0,j[A-1][1]=j[A-2][1].slice(-1)+j[A-1][1],j[A][1]=j[A-2][1].slice(-1)+j[A][1],j[A-2][1]=j[A-2][1].slice(0,-1));if(!S)return j;for(var C=[],A=0;A<j.length;A+=1)j[A][1].length>0&&C.push(j[A]);return C}function b(j,S,k){for(var T=S+k-1;T>=0&&T>=S-1;T--)if(T+1<j.length){var A=j[T],C=j[T+1];A[0]===C[1]&&j.splice(T,2,[A[0],A[1]+C[1]])}return j}},function(n,a){a=n.exports=typeof Object.keys=="function"?Object.keys:r,a.shim=r;function r(i){var l=[];for(var c in i)l.push(c);return l}},function(n,a){var r=function(){return Object.prototype.toString.call(arguments)}()=="[object Arguments]";a=n.exports=r?i:l,a.supported=i;function i(c){return Object.prototype.toString.call(c)=="[object Arguments]"}a.unsupported=l;function l(c){return c&&typeof c=="object"&&typeof c.length=="number"&&Object.prototype.hasOwnProperty.call(c,"callee")&&!Object.prototype.propertyIsEnumerable.call(c,"callee")||!1}},function(n,a){var r=Object.prototype.hasOwnProperty,i="~";function l(){}Object.create&&(l.prototype=Object.create(null),new l().__proto__||(i=!1));function c(d,h,u){this.fn=d,this.context=h,this.once=u||!1}function o(){this._events=new l,this._eventsCount=0}o.prototype.eventNames=function(){var h=[],u,m;if(this._eventsCount===0)return h;for(m in u=this._events)r.call(u,m)&&h.push(i?m.slice(1):m);return Object.getOwnPropertySymbols?h.concat(Object.getOwnPropertySymbols(u)):h},o.prototype.listeners=function(h,u){var m=i?i+h:h,p=this._events[m];if(u)return!!p;if(!p)return[];if(p.fn)return[p.fn];for(var g=0,x=p.length,v=new Array(x);g<x;g++)v[g]=p[g].fn;return v},o.prototype.emit=function(h,u,m,p,g,x){var v=i?i+h:h;if(!this._events[v])return!1;var y=this._events[v],f=arguments.length,b,j;if(y.fn){switch(y.once&&this.removeListener(h,y.fn,void 0,!0),f){case 1:return y.fn.call(y.context),!0;case 2:return y.fn.call(y.context,u),!0;case 3:return y.fn.call(y.context,u,m),!0;case 4:return y.fn.call(y.context,u,m,p),!0;case 5:return y.fn.call(y.context,u,m,p,g),!0;case 6:return y.fn.call(y.context,u,m,p,g,x),!0}for(j=1,b=new Array(f-1);j<f;j++)b[j-1]=arguments[j];y.fn.apply(y.context,b)}else{var S=y.length,k;for(j=0;j<S;j++)switch(y[j].once&&this.removeListener(h,y[j].fn,void 0,!0),f){case 1:y[j].fn.call(y[j].context);break;case 2:y[j].fn.call(y[j].context,u);break;case 3:y[j].fn.call(y[j].context,u,m);break;case 4:y[j].fn.call(y[j].context,u,m,p);break;default:if(!b)for(k=1,b=new Array(f-1);k<f;k++)b[k-1]=arguments[k];y[j].fn.apply(y[j].context,b)}}return!0},o.prototype.on=function(h,u,m){var p=new c(u,m||this),g=i?i+h:h;return this._events[g]?this._events[g].fn?this._events[g]=[this._events[g],p]:this._events[g].push(p):(this._events[g]=p,this._eventsCount++),this},o.prototype.once=function(h,u,m){var p=new c(u,m||this,!0),g=i?i+h:h;return this._events[g]?this._events[g].fn?this._events[g]=[this._events[g],p]:this._events[g].push(p):(this._events[g]=p,this._eventsCount++),this},o.prototype.removeListener=function(h,u,m,p){var g=i?i+h:h;if(!this._events[g])return this;if(!u)return--this._eventsCount===0?this._events=new l:delete this._events[g],this;var x=this._events[g];if(x.fn)x.fn===u&&(!p||x.once)&&(!m||x.context===m)&&(--this._eventsCount===0?this._events=new l:delete this._events[g]);else{for(var v=0,y=[],f=x.length;v<f;v++)(x[v].fn!==u||p&&!x[v].once||m&&x[v].context!==m)&&y.push(x[v]);y.length?this._events[g]=y.length===1?y[0]:y:--this._eventsCount===0?this._events=new l:delete this._events[g]}return this},o.prototype.removeAllListeners=function(h){var u;return h?(u=i?i+h:h,this._events[u]&&(--this._eventsCount===0?this._events=new l:delete this._events[u])):(this._events=new l,this._eventsCount=0),this},o.prototype.off=o.prototype.removeListener,o.prototype.addListener=o.prototype.on,o.prototype.setMaxListeners=function(){return this},o.prefixed=i,o.EventEmitter=o,typeof n<"u"&&(n.exports=o)},function(n,a,r){Object.defineProperty(a,"__esModule",{value:!0}),a.matchText=a.matchSpacing=a.matchNewline=a.matchBlot=a.matchAttributor=a.default=void 0;var i=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(ee){return typeof ee}:function(ee){return ee&&typeof Symbol=="function"&&ee.constructor===Symbol&&ee!==Symbol.prototype?"symbol":typeof ee},l=function(){function ee(ae,Se){var We=[],re=!0,je=!1,Pe=void 0;try{for(var He=ae[Symbol.iterator](),Ye;!(re=(Ye=He.next()).done)&&(We.push(Ye.value),!(Se&&We.length===Se));re=!0);}catch(Ke){je=!0,Pe=Ke}finally{try{!re&&He.return&&He.return()}finally{if(je)throw Pe}}return We}return function(ae,Se){if(Array.isArray(ae))return ae;if(Symbol.iterator in Object(ae))return ee(ae,Se);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),c=function(){function ee(ae,Se){for(var We=0;We<Se.length;We++){var re=Se[We];re.enumerable=re.enumerable||!1,re.configurable=!0,"value"in re&&(re.writable=!0),Object.defineProperty(ae,re.key,re)}}return function(ae,Se,We){return Se&&ee(ae.prototype,Se),We&&ee(ae,We),ae}}(),o=r(3),d=M(o),h=r(2),u=M(h),m=r(0),p=M(m),g=r(5),x=M(g),v=r(10),y=M(v),f=r(9),b=M(f),j=r(36),S=r(37),k=r(13),T=M(k),A=r(26),C=r(38),w=r(39),P=r(40);function M(ee){return ee&&ee.__esModule?ee:{default:ee}}function I(ee,ae,Se){return ae in ee?Object.defineProperty(ee,ae,{value:Se,enumerable:!0,configurable:!0,writable:!0}):ee[ae]=Se,ee}function W(ee,ae){if(!(ee instanceof ae))throw new TypeError("Cannot call a class as a function")}function _(ee,ae){if(!ee)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return ae&&(typeof ae=="object"||typeof ae=="function")?ae:ee}function B(ee,ae){if(typeof ae!="function"&&ae!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof ae);ee.prototype=Object.create(ae&&ae.prototype,{constructor:{value:ee,enumerable:!1,writable:!0,configurable:!0}}),ae&&(Object.setPrototypeOf?Object.setPrototypeOf(ee,ae):ee.__proto__=ae)}var O=(0,y.default)("quill:clipboard"),z="__ql-matcher",F=[[Node.TEXT_NODE,de],[Node.TEXT_NODE,Ie],["br",Ae],[Node.ELEMENT_NODE,Ie],[Node.ELEMENT_NODE,te],[Node.ELEMENT_NODE,ve],[Node.ELEMENT_NODE,ue],[Node.ELEMENT_NODE,ie],["li",be],["b",ne.bind(ne,"bold")],["i",ne.bind(ne,"italic")],["style",Ge]],K=[j.AlignAttribute,C.DirectionAttribute].reduce(function(ee,ae){return ee[ae.keyName]=ae,ee},{}),D=[j.AlignStyle,S.BackgroundStyle,A.ColorStyle,C.DirectionStyle,w.FontStyle,P.SizeStyle].reduce(function(ee,ae){return ee[ae.keyName]=ae,ee},{}),G=function(ee){B(ae,ee);function ae(Se,We){W(this,ae);var re=_(this,(ae.__proto__||Object.getPrototypeOf(ae)).call(this,Se,We));return re.quill.root.addEventListener("paste",re.onPaste.bind(re)),re.container=re.quill.addContainer("ql-clipboard"),re.container.setAttribute("contenteditable",!0),re.container.setAttribute("tabindex",-1),re.matchers=[],F.concat(re.options.matchers).forEach(function(je){var Pe=l(je,2),He=Pe[0],Ye=Pe[1];!We.matchVisual&&Ye===ve||re.addMatcher(He,Ye)}),re}return c(ae,[{key:"addMatcher",value:function(We,re){this.matchers.push([We,re])}},{key:"convert",value:function(We){if(typeof We=="string")return this.container.innerHTML=We.replace(/\>\r?\n +\</g,"><"),this.convert();var re=this.quill.getFormat(this.quill.selection.savedRange.index);if(re[T.default.blotName]){var je=this.container.innerText;return this.container.innerHTML="",new u.default().insert(je,I({},T.default.blotName,re[T.default.blotName]))}var Pe=this.prepareMatching(),He=l(Pe,2),Ye=He[0],Ke=He[1],oe=le(this.container,Ye,Ke);return se(oe,`
`)&&oe.ops[oe.ops.length-1].attributes==null&&(oe=oe.compose(new u.default().retain(oe.length()-1).delete(1))),O.log("convert",this.container.innerHTML,oe),this.container.innerHTML="",oe}},{key:"dangerouslyPasteHTML",value:function(We,re){var je=arguments.length>2&&arguments[2]!==void 0?arguments[2]:x.default.sources.API;if(typeof We=="string")this.quill.setContents(this.convert(We),re),this.quill.setSelection(0,x.default.sources.SILENT);else{var Pe=this.convert(re);this.quill.updateContents(new u.default().retain(We).concat(Pe),je),this.quill.setSelection(We+Pe.length(),x.default.sources.SILENT)}}},{key:"onPaste",value:function(We){var re=this;if(!(We.defaultPrevented||!this.quill.isEnabled())){var je=this.quill.getSelection(),Pe=new u.default().retain(je.index),He=this.quill.scrollingContainer.scrollTop;this.container.focus(),this.quill.selection.update(x.default.sources.SILENT),setTimeout(function(){Pe=Pe.concat(re.convert()).delete(je.length),re.quill.updateContents(Pe,x.default.sources.USER),re.quill.setSelection(Pe.length()-je.length,x.default.sources.SILENT),re.quill.scrollingContainer.scrollTop=He,re.quill.focus()},1)}}},{key:"prepareMatching",value:function(){var We=this,re=[],je=[];return this.matchers.forEach(function(Pe){var He=l(Pe,2),Ye=He[0],Ke=He[1];switch(Ye){case Node.TEXT_NODE:je.push(Ke);break;case Node.ELEMENT_NODE:re.push(Ke);break;default:[].forEach.call(We.container.querySelectorAll(Ye),function(oe){oe[z]=oe[z]||[],oe[z].push(Ke)});break}}),[re,je]}}]),ae}(b.default);G.DEFAULTS={matchers:[],matchVisual:!0};function H(ee,ae,Se){return(typeof ae>"u"?"undefined":i(ae))==="object"?Object.keys(ae).reduce(function(We,re){return H(We,re,ae[re])},ee):ee.reduce(function(We,re){return re.attributes&&re.attributes[ae]?We.push(re):We.insert(re.insert,(0,d.default)({},I({},ae,Se),re.attributes))},new u.default)}function V(ee){if(ee.nodeType!==Node.ELEMENT_NODE)return{};var ae="__ql-computed-style";return ee[ae]||(ee[ae]=window.getComputedStyle(ee))}function se(ee,ae){for(var Se="",We=ee.ops.length-1;We>=0&&Se.length<ae.length;--We){var re=ee.ops[We];if(typeof re.insert!="string")break;Se=re.insert+Se}return Se.slice(-1*ae.length)===ae}function Z(ee){if(ee.childNodes.length===0)return!1;var ae=V(ee);return["block","list-item"].indexOf(ae.display)>-1}function le(ee,ae,Se){return ee.nodeType===ee.TEXT_NODE?Se.reduce(function(We,re){return re(ee,We)},new u.default):ee.nodeType===ee.ELEMENT_NODE?[].reduce.call(ee.childNodes||[],function(We,re){var je=le(re,ae,Se);return re.nodeType===ee.ELEMENT_NODE&&(je=ae.reduce(function(Pe,He){return He(re,Pe)},je),je=(re[z]||[]).reduce(function(Pe,He){return He(re,Pe)},je)),We.concat(je)},new u.default):new u.default}function ne(ee,ae,Se){return H(Se,ee,!0)}function ue(ee,ae){var Se=p.default.Attributor.Attribute.keys(ee),We=p.default.Attributor.Class.keys(ee),re=p.default.Attributor.Style.keys(ee),je={};return Se.concat(We).concat(re).forEach(function(Pe){var He=p.default.query(Pe,p.default.Scope.ATTRIBUTE);He!=null&&(je[He.attrName]=He.value(ee),je[He.attrName])||(He=K[Pe],He!=null&&(He.attrName===Pe||He.keyName===Pe)&&(je[He.attrName]=He.value(ee)||void 0),He=D[Pe],He!=null&&(He.attrName===Pe||He.keyName===Pe)&&(He=D[Pe],je[He.attrName]=He.value(ee)||void 0))}),Object.keys(je).length>0&&(ae=H(ae,je)),ae}function te(ee,ae){var Se=p.default.query(ee);if(Se==null)return ae;if(Se.prototype instanceof p.default.Embed){var We={},re=Se.value(ee);re!=null&&(We[Se.blotName]=re,ae=new u.default().insert(We,Se.formats(ee)))}else typeof Se.formats=="function"&&(ae=H(ae,Se.blotName,Se.formats(ee)));return ae}function Ae(ee,ae){return se(ae,`
`)||ae.insert(`
`),ae}function Ge(){return new u.default}function be(ee,ae){var Se=p.default.query(ee);if(Se==null||Se.blotName!=="list-item"||!se(ae,`
`))return ae;for(var We=-1,re=ee.parentNode;!re.classList.contains("ql-clipboard");)(p.default.query(re)||{}).blotName==="list"&&(We+=1),re=re.parentNode;return We<=0?ae:ae.compose(new u.default().retain(ae.length()-1).retain(1,{indent:We}))}function Ie(ee,ae){return se(ae,`
`)||(Z(ee)||ae.length()>0&&ee.nextSibling&&Z(ee.nextSibling))&&ae.insert(`
`),ae}function ve(ee,ae){if(Z(ee)&&ee.nextElementSibling!=null&&!se(ae,`

`)){var Se=ee.offsetHeight+parseFloat(V(ee).marginTop)+parseFloat(V(ee).marginBottom);ee.nextElementSibling.offsetTop>ee.offsetTop+Se*1.5&&ae.insert(`
`)}return ae}function ie(ee,ae){var Se={},We=ee.style||{};return We.fontStyle&&V(ee).fontStyle==="italic"&&(Se.italic=!0),We.fontWeight&&(V(ee).fontWeight.startsWith("bold")||parseInt(V(ee).fontWeight)>=700)&&(Se.bold=!0),Object.keys(Se).length>0&&(ae=H(ae,Se)),parseFloat(We.textIndent||0)>0&&(ae=new u.default().insert("	").concat(ae)),ae}function de(ee,ae){var Se=ee.data;if(ee.parentNode.tagName==="O:P")return ae.insert(Se.trim());if(Se.trim().length===0&&ee.parentNode.classList.contains("ql-clipboard"))return ae;if(!V(ee.parentNode).whiteSpace.startsWith("pre")){var We=function(je,Pe){return Pe=Pe.replace(/[^\u00a0]/g,""),Pe.length<1&&je?" ":Pe};Se=Se.replace(/\r\n/g," ").replace(/\n/g," "),Se=Se.replace(/\s\s+/g,We.bind(We,!0)),(ee.previousSibling==null&&Z(ee.parentNode)||ee.previousSibling!=null&&Z(ee.previousSibling))&&(Se=Se.replace(/^\s+/,We.bind(We,!1))),(ee.nextSibling==null&&Z(ee.parentNode)||ee.nextSibling!=null&&Z(ee.nextSibling))&&(Se=Se.replace(/\s+$/,We.bind(We,!1)))}return ae.insert(Se)}a.default=G,a.matchAttributor=ue,a.matchBlot=te,a.matchNewline=Ie,a.matchSpacing=ve,a.matchText=de},function(n,a,r){Object.defineProperty(a,"__esModule",{value:!0});var i=function(){function g(x,v){for(var y=0;y<v.length;y++){var f=v[y];f.enumerable=f.enumerable||!1,f.configurable=!0,"value"in f&&(f.writable=!0),Object.defineProperty(x,f.key,f)}}return function(x,v,y){return v&&g(x.prototype,v),y&&g(x,y),x}}(),l=function g(x,v,y){x===null&&(x=Function.prototype);var f=Object.getOwnPropertyDescriptor(x,v);if(f===void 0){var b=Object.getPrototypeOf(x);return b===null?void 0:g(b,v,y)}else{if("value"in f)return f.value;var j=f.get;return j===void 0?void 0:j.call(y)}},c=r(6),o=d(c);function d(g){return g&&g.__esModule?g:{default:g}}function h(g,x){if(!(g instanceof x))throw new TypeError("Cannot call a class as a function")}function u(g,x){if(!g)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return x&&(typeof x=="object"||typeof x=="function")?x:g}function m(g,x){if(typeof x!="function"&&x!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof x);g.prototype=Object.create(x&&x.prototype,{constructor:{value:g,enumerable:!1,writable:!0,configurable:!0}}),x&&(Object.setPrototypeOf?Object.setPrototypeOf(g,x):g.__proto__=x)}var p=function(g){m(x,g);function x(){return h(this,x),u(this,(x.__proto__||Object.getPrototypeOf(x)).apply(this,arguments))}return i(x,[{key:"optimize",value:function(y){l(x.prototype.__proto__||Object.getPrototypeOf(x.prototype),"optimize",this).call(this,y),this.domNode.tagName!==this.statics.tagName[0]&&this.replaceWith(this.statics.blotName)}}],[{key:"create",value:function(){return l(x.__proto__||Object.getPrototypeOf(x),"create",this).call(this)}},{key:"formats",value:function(){return!0}}]),x}(o.default);p.blotName="bold",p.tagName=["STRONG","B"],a.default=p},function(n,a,r){Object.defineProperty(a,"__esModule",{value:!0}),a.addControls=a.default=void 0;var i=function(){function P(M,I){var W=[],_=!0,B=!1,O=void 0;try{for(var z=M[Symbol.iterator](),F;!(_=(F=z.next()).done)&&(W.push(F.value),!(I&&W.length===I));_=!0);}catch(K){B=!0,O=K}finally{try{!_&&z.return&&z.return()}finally{if(B)throw O}}return W}return function(M,I){if(Array.isArray(M))return M;if(Symbol.iterator in Object(M))return P(M,I);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),l=function(){function P(M,I){for(var W=0;W<I.length;W++){var _=I[W];_.enumerable=_.enumerable||!1,_.configurable=!0,"value"in _&&(_.writable=!0),Object.defineProperty(M,_.key,_)}}return function(M,I,W){return I&&P(M.prototype,I),W&&P(M,W),M}}(),c=r(2),o=y(c),d=r(0),h=y(d),u=r(5),m=y(u),p=r(10),g=y(p),x=r(9),v=y(x);function y(P){return P&&P.__esModule?P:{default:P}}function f(P,M,I){return M in P?Object.defineProperty(P,M,{value:I,enumerable:!0,configurable:!0,writable:!0}):P[M]=I,P}function b(P,M){if(!(P instanceof M))throw new TypeError("Cannot call a class as a function")}function j(P,M){if(!P)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return M&&(typeof M=="object"||typeof M=="function")?M:P}function S(P,M){if(typeof M!="function"&&M!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof M);P.prototype=Object.create(M&&M.prototype,{constructor:{value:P,enumerable:!1,writable:!0,configurable:!0}}),M&&(Object.setPrototypeOf?Object.setPrototypeOf(P,M):P.__proto__=M)}var k=(0,g.default)("quill:toolbar"),T=function(P){S(M,P);function M(I,W){b(this,M);var _=j(this,(M.__proto__||Object.getPrototypeOf(M)).call(this,I,W));if(Array.isArray(_.options.container)){var B=document.createElement("div");C(B,_.options.container),I.container.parentNode.insertBefore(B,I.container),_.container=B}else typeof _.options.container=="string"?_.container=document.querySelector(_.options.container):_.container=_.options.container;if(!(_.container instanceof HTMLElement)){var O;return O=k.error("Container required for toolbar",_.options),j(_,O)}return _.container.classList.add("ql-toolbar"),_.controls=[],_.handlers={},Object.keys(_.options.handlers).forEach(function(z){_.addHandler(z,_.options.handlers[z])}),[].forEach.call(_.container.querySelectorAll("button, select"),function(z){_.attach(z)}),_.quill.on(m.default.events.EDITOR_CHANGE,function(z,F){z===m.default.events.SELECTION_CHANGE&&_.update(F)}),_.quill.on(m.default.events.SCROLL_OPTIMIZE,function(){var z=_.quill.selection.getRange(),F=i(z,1),K=F[0];_.update(K)}),_}return l(M,[{key:"addHandler",value:function(W,_){this.handlers[W]=_}},{key:"attach",value:function(W){var _=this,B=[].find.call(W.classList,function(z){return z.indexOf("ql-")===0});if(B){if(B=B.slice(3),W.tagName==="BUTTON"&&W.setAttribute("type","button"),this.handlers[B]==null){if(this.quill.scroll.whitelist!=null&&this.quill.scroll.whitelist[B]==null){k.warn("ignoring attaching to disabled format",B,W);return}if(h.default.query(B)==null){k.warn("ignoring attaching to nonexistent format",B,W);return}}var O=W.tagName==="SELECT"?"change":"click";W.addEventListener(O,function(z){var F=void 0;if(W.tagName==="SELECT"){if(W.selectedIndex<0)return;var K=W.options[W.selectedIndex];K.hasAttribute("selected")?F=!1:F=K.value||!1}else W.classList.contains("ql-active")?F=!1:F=W.value||!W.hasAttribute("value"),z.preventDefault();_.quill.focus();var D=_.quill.selection.getRange(),G=i(D,1),H=G[0];if(_.handlers[B]!=null)_.handlers[B].call(_,F);else if(h.default.query(B).prototype instanceof h.default.Embed){if(F=prompt("Enter "+B),!F)return;_.quill.updateContents(new o.default().retain(H.index).delete(H.length).insert(f({},B,F)),m.default.sources.USER)}else _.quill.format(B,F,m.default.sources.USER);_.update(H)}),this.controls.push([B,W])}}},{key:"update",value:function(W){var _=W==null?{}:this.quill.getFormat(W);this.controls.forEach(function(B){var O=i(B,2),z=O[0],F=O[1];if(F.tagName==="SELECT"){var K=void 0;if(W==null)K=null;else if(_[z]==null)K=F.querySelector("option[selected]");else if(!Array.isArray(_[z])){var D=_[z];typeof D=="string"&&(D=D.replace(/\"/g,'\\"')),K=F.querySelector('option[value="'+D+'"]')}K==null?(F.value="",F.selectedIndex=-1):K.selected=!0}else if(W==null)F.classList.remove("ql-active");else if(F.hasAttribute("value")){var G=_[z]===F.getAttribute("value")||_[z]!=null&&_[z].toString()===F.getAttribute("value")||_[z]==null&&!F.getAttribute("value");F.classList.toggle("ql-active",G)}else F.classList.toggle("ql-active",_[z]!=null)})}}]),M}(v.default);T.DEFAULTS={};function A(P,M,I){var W=document.createElement("button");W.setAttribute("type","button"),W.classList.add("ql-"+M),I!=null&&(W.value=I),P.appendChild(W)}function C(P,M){Array.isArray(M[0])||(M=[M]),M.forEach(function(I){var W=document.createElement("span");W.classList.add("ql-formats"),I.forEach(function(_){if(typeof _=="string")A(W,_);else{var B=Object.keys(_)[0],O=_[B];Array.isArray(O)?w(W,B,O):A(W,B,O)}}),P.appendChild(W)})}function w(P,M,I){var W=document.createElement("select");W.classList.add("ql-"+M),I.forEach(function(_){var B=document.createElement("option");_!==!1?B.setAttribute("value",_):B.setAttribute("selected","selected"),W.appendChild(B)}),P.appendChild(W)}T.DEFAULTS={container:null,handlers:{clean:function(){var M=this,I=this.quill.getSelection();if(I!=null)if(I.length==0){var W=this.quill.getFormat();Object.keys(W).forEach(function(_){h.default.query(_,h.default.Scope.INLINE)!=null&&M.quill.format(_,!1)})}else this.quill.removeFormat(I,m.default.sources.USER)},direction:function(M){var I=this.quill.getFormat().align;M==="rtl"&&I==null?this.quill.format("align","right",m.default.sources.USER):!M&&I==="right"&&this.quill.format("align",!1,m.default.sources.USER),this.quill.format("direction",M,m.default.sources.USER)},indent:function(M){var I=this.quill.getSelection(),W=this.quill.getFormat(I),_=parseInt(W.indent||0);if(M==="+1"||M==="-1"){var B=M==="+1"?1:-1;W.direction==="rtl"&&(B*=-1),this.quill.format("indent",_+B,m.default.sources.USER)}},link:function(M){M===!0&&(M=prompt("Enter link URL:")),this.quill.format("link",M,m.default.sources.USER)},list:function(M){var I=this.quill.getSelection(),W=this.quill.getFormat(I);M==="check"?W.list==="checked"||W.list==="unchecked"?this.quill.format("list",!1,m.default.sources.USER):this.quill.format("list","unchecked",m.default.sources.USER):this.quill.format("list",M,m.default.sources.USER)}}},a.default=T,a.addControls=C},function(n,a){n.exports='<svg viewbox="0 0 18 18"> <polyline class="ql-even ql-stroke" points="5 7 3 9 5 11"></polyline> <polyline class="ql-even ql-stroke" points="13 7 15 9 13 11"></polyline> <line class=ql-stroke x1=10 x2=8 y1=5 y2=13></line> </svg>'},function(n,a,r){Object.defineProperty(a,"__esModule",{value:!0});var i=function(){function g(x,v){for(var y=0;y<v.length;y++){var f=v[y];f.enumerable=f.enumerable||!1,f.configurable=!0,"value"in f&&(f.writable=!0),Object.defineProperty(x,f.key,f)}}return function(x,v,y){return v&&g(x.prototype,v),y&&g(x,y),x}}(),l=function g(x,v,y){x===null&&(x=Function.prototype);var f=Object.getOwnPropertyDescriptor(x,v);if(f===void 0){var b=Object.getPrototypeOf(x);return b===null?void 0:g(b,v,y)}else{if("value"in f)return f.value;var j=f.get;return j===void 0?void 0:j.call(y)}},c=r(28),o=d(c);function d(g){return g&&g.__esModule?g:{default:g}}function h(g,x){if(!(g instanceof x))throw new TypeError("Cannot call a class as a function")}function u(g,x){if(!g)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return x&&(typeof x=="object"||typeof x=="function")?x:g}function m(g,x){if(typeof x!="function"&&x!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof x);g.prototype=Object.create(x&&x.prototype,{constructor:{value:g,enumerable:!1,writable:!0,configurable:!0}}),x&&(Object.setPrototypeOf?Object.setPrototypeOf(g,x):g.__proto__=x)}var p=function(g){m(x,g);function x(v,y){h(this,x);var f=u(this,(x.__proto__||Object.getPrototypeOf(x)).call(this,v));return f.label.innerHTML=y,f.container.classList.add("ql-color-picker"),[].slice.call(f.container.querySelectorAll(".ql-picker-item"),0,7).forEach(function(b){b.classList.add("ql-primary")}),f}return i(x,[{key:"buildItem",value:function(y){var f=l(x.prototype.__proto__||Object.getPrototypeOf(x.prototype),"buildItem",this).call(this,y);return f.style.backgroundColor=y.getAttribute("value")||"",f}},{key:"selectItem",value:function(y,f){l(x.prototype.__proto__||Object.getPrototypeOf(x.prototype),"selectItem",this).call(this,y,f);var b=this.label.querySelector(".ql-color-label"),j=y&&y.getAttribute("data-value")||"";b&&(b.tagName==="line"?b.style.stroke=j:b.style.fill=j)}}]),x}(o.default);a.default=p},function(n,a,r){Object.defineProperty(a,"__esModule",{value:!0});var i=function(){function g(x,v){for(var y=0;y<v.length;y++){var f=v[y];f.enumerable=f.enumerable||!1,f.configurable=!0,"value"in f&&(f.writable=!0),Object.defineProperty(x,f.key,f)}}return function(x,v,y){return v&&g(x.prototype,v),y&&g(x,y),x}}(),l=function g(x,v,y){x===null&&(x=Function.prototype);var f=Object.getOwnPropertyDescriptor(x,v);if(f===void 0){var b=Object.getPrototypeOf(x);return b===null?void 0:g(b,v,y)}else{if("value"in f)return f.value;var j=f.get;return j===void 0?void 0:j.call(y)}},c=r(28),o=d(c);function d(g){return g&&g.__esModule?g:{default:g}}function h(g,x){if(!(g instanceof x))throw new TypeError("Cannot call a class as a function")}function u(g,x){if(!g)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return x&&(typeof x=="object"||typeof x=="function")?x:g}function m(g,x){if(typeof x!="function"&&x!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof x);g.prototype=Object.create(x&&x.prototype,{constructor:{value:g,enumerable:!1,writable:!0,configurable:!0}}),x&&(Object.setPrototypeOf?Object.setPrototypeOf(g,x):g.__proto__=x)}var p=function(g){m(x,g);function x(v,y){h(this,x);var f=u(this,(x.__proto__||Object.getPrototypeOf(x)).call(this,v));return f.container.classList.add("ql-icon-picker"),[].forEach.call(f.container.querySelectorAll(".ql-picker-item"),function(b){b.innerHTML=y[b.getAttribute("data-value")||""]}),f.defaultItem=f.container.querySelector(".ql-selected"),f.selectItem(f.defaultItem),f}return i(x,[{key:"selectItem",value:function(y,f){l(x.prototype.__proto__||Object.getPrototypeOf(x.prototype),"selectItem",this).call(this,y,f),y=y||this.defaultItem,this.label.innerHTML=y.innerHTML}}]),x}(o.default);a.default=p},function(n,a,r){Object.defineProperty(a,"__esModule",{value:!0});var i=function(){function o(d,h){for(var u=0;u<h.length;u++){var m=h[u];m.enumerable=m.enumerable||!1,m.configurable=!0,"value"in m&&(m.writable=!0),Object.defineProperty(d,m.key,m)}}return function(d,h,u){return h&&o(d.prototype,h),u&&o(d,u),d}}();function l(o,d){if(!(o instanceof d))throw new TypeError("Cannot call a class as a function")}var c=function(){function o(d,h){var u=this;l(this,o),this.quill=d,this.boundsContainer=h||document.body,this.root=d.addContainer("ql-tooltip"),this.root.innerHTML=this.constructor.TEMPLATE,this.quill.root===this.quill.scrollingContainer&&this.quill.root.addEventListener("scroll",function(){u.root.style.marginTop=-1*u.quill.root.scrollTop+"px"}),this.hide()}return i(o,[{key:"hide",value:function(){this.root.classList.add("ql-hidden")}},{key:"position",value:function(h){var u=h.left+h.width/2-this.root.offsetWidth/2,m=h.bottom+this.quill.root.scrollTop;this.root.style.left=u+"px",this.root.style.top=m+"px",this.root.classList.remove("ql-flip");var p=this.boundsContainer.getBoundingClientRect(),g=this.root.getBoundingClientRect(),x=0;if(g.right>p.right&&(x=p.right-g.right,this.root.style.left=u+x+"px"),g.left<p.left&&(x=p.left-g.left,this.root.style.left=u+x+"px"),g.bottom>p.bottom){var v=g.bottom-g.top,y=h.bottom-h.top+v;this.root.style.top=m-y+"px",this.root.classList.add("ql-flip")}return x}},{key:"show",value:function(){this.root.classList.remove("ql-editing"),this.root.classList.remove("ql-hidden")}}]),o}();a.default=c},function(n,a,r){Object.defineProperty(a,"__esModule",{value:!0});var i=function(){function w(P,M){var I=[],W=!0,_=!1,B=void 0;try{for(var O=P[Symbol.iterator](),z;!(W=(z=O.next()).done)&&(I.push(z.value),!(M&&I.length===M));W=!0);}catch(F){_=!0,B=F}finally{try{!W&&O.return&&O.return()}finally{if(_)throw B}}return I}return function(P,M){if(Array.isArray(P))return P;if(Symbol.iterator in Object(P))return w(P,M);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),l=function w(P,M,I){P===null&&(P=Function.prototype);var W=Object.getOwnPropertyDescriptor(P,M);if(W===void 0){var _=Object.getPrototypeOf(P);return _===null?void 0:w(_,M,I)}else{if("value"in W)return W.value;var B=W.get;return B===void 0?void 0:B.call(I)}},c=function(){function w(P,M){for(var I=0;I<M.length;I++){var W=M[I];W.enumerable=W.enumerable||!1,W.configurable=!0,"value"in W&&(W.writable=!0),Object.defineProperty(P,W.key,W)}}return function(P,M,I){return M&&w(P.prototype,M),I&&w(P,I),P}}(),o=r(3),d=b(o),h=r(8),u=b(h),m=r(43),p=b(m),g=r(27),x=b(g),v=r(15),y=r(41),f=b(y);function b(w){return w&&w.__esModule?w:{default:w}}function j(w,P){if(!(w instanceof P))throw new TypeError("Cannot call a class as a function")}function S(w,P){if(!w)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return P&&(typeof P=="object"||typeof P=="function")?P:w}function k(w,P){if(typeof P!="function"&&P!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof P);w.prototype=Object.create(P&&P.prototype,{constructor:{value:w,enumerable:!1,writable:!0,configurable:!0}}),P&&(Object.setPrototypeOf?Object.setPrototypeOf(w,P):w.__proto__=P)}var T=[[{header:["1","2","3",!1]}],["bold","italic","underline","link"],[{list:"ordered"},{list:"bullet"}],["clean"]],A=function(w){k(P,w);function P(M,I){j(this,P),I.modules.toolbar!=null&&I.modules.toolbar.container==null&&(I.modules.toolbar.container=T);var W=S(this,(P.__proto__||Object.getPrototypeOf(P)).call(this,M,I));return W.quill.container.classList.add("ql-snow"),W}return c(P,[{key:"extendToolbar",value:function(I){I.container.classList.add("ql-snow"),this.buildButtons([].slice.call(I.container.querySelectorAll("button")),f.default),this.buildPickers([].slice.call(I.container.querySelectorAll("select")),f.default),this.tooltip=new C(this.quill,this.options.bounds),I.container.querySelector(".ql-link")&&this.quill.keyboard.addBinding({key:"K",shortKey:!0},function(W,_){I.handlers.link.call(I,!_.format.link)})}}]),P}(p.default);A.DEFAULTS=(0,d.default)(!0,{},p.default.DEFAULTS,{modules:{toolbar:{handlers:{link:function(P){if(P){var M=this.quill.getSelection();if(M==null||M.length==0)return;var I=this.quill.getText(M);/^\S+@\S+\.\S+$/.test(I)&&I.indexOf("mailto:")!==0&&(I="mailto:"+I);var W=this.quill.theme.tooltip;W.edit("link",I)}else this.quill.format("link",!1)}}}}});var C=function(w){k(P,w);function P(M,I){j(this,P);var W=S(this,(P.__proto__||Object.getPrototypeOf(P)).call(this,M,I));return W.preview=W.root.querySelector("a.ql-preview"),W}return c(P,[{key:"listen",value:function(){var I=this;l(P.prototype.__proto__||Object.getPrototypeOf(P.prototype),"listen",this).call(this),this.root.querySelector("a.ql-action").addEventListener("click",function(W){I.root.classList.contains("ql-editing")?I.save():I.edit("link",I.preview.textContent),W.preventDefault()}),this.root.querySelector("a.ql-remove").addEventListener("click",function(W){if(I.linkRange!=null){var _=I.linkRange;I.restoreFocus(),I.quill.formatText(_,"link",!1,u.default.sources.USER),delete I.linkRange}W.preventDefault(),I.hide()}),this.quill.on(u.default.events.SELECTION_CHANGE,function(W,_,B){if(W!=null){if(W.length===0&&B===u.default.sources.USER){var O=I.quill.scroll.descendant(x.default,W.index),z=i(O,2),F=z[0],K=z[1];if(F!=null){I.linkRange=new v.Range(W.index-K,F.length());var D=x.default.formats(F.domNode);I.preview.textContent=D,I.preview.setAttribute("href",D),I.show(),I.position(I.quill.getBounds(I.linkRange));return}}else delete I.linkRange;I.hide()}})}},{key:"show",value:function(){l(P.prototype.__proto__||Object.getPrototypeOf(P.prototype),"show",this).call(this),this.root.removeAttribute("data-mode")}}]),P}(m.BaseTooltip);C.TEMPLATE=['<a class="ql-preview" rel="noopener noreferrer" target="_blank" href="about:blank"></a>','<input type="text" data-formula="e=mc^2" data-link="https://quilljs.com" data-video="Embed URL">','<a class="ql-action"></a>','<a class="ql-remove"></a>'].join(""),a.default=A},function(n,a,r){Object.defineProperty(a,"__esModule",{value:!0});var i=r(29),l=re(i),c=r(36),o=r(38),d=r(64),h=r(65),u=re(h),m=r(66),p=re(m),g=r(67),x=re(g),v=r(37),y=r(26),f=r(39),b=r(40),j=r(56),S=re(j),k=r(68),T=re(k),A=r(27),C=re(A),w=r(69),P=re(w),M=r(70),I=re(M),W=r(71),_=re(W),B=r(72),O=re(B),z=r(73),F=re(z),K=r(13),D=re(K),G=r(74),H=re(G),V=r(75),se=re(V),Z=r(57),le=re(Z),ne=r(41),ue=re(ne),te=r(28),Ae=re(te),Ge=r(59),be=re(Ge),Ie=r(60),ve=re(Ie),ie=r(61),de=re(ie),ee=r(108),ae=re(ee),Se=r(62),We=re(Se);function re(je){return je&&je.__esModule?je:{default:je}}l.default.register({"attributors/attribute/direction":o.DirectionAttribute,"attributors/class/align":c.AlignClass,"attributors/class/background":v.BackgroundClass,"attributors/class/color":y.ColorClass,"attributors/class/direction":o.DirectionClass,"attributors/class/font":f.FontClass,"attributors/class/size":b.SizeClass,"attributors/style/align":c.AlignStyle,"attributors/style/background":v.BackgroundStyle,"attributors/style/color":y.ColorStyle,"attributors/style/direction":o.DirectionStyle,"attributors/style/font":f.FontStyle,"attributors/style/size":b.SizeStyle},!0),l.default.register({"formats/align":c.AlignClass,"formats/direction":o.DirectionClass,"formats/indent":d.IndentClass,"formats/background":v.BackgroundStyle,"formats/color":y.ColorStyle,"formats/font":f.FontClass,"formats/size":b.SizeClass,"formats/blockquote":u.default,"formats/code-block":D.default,"formats/header":p.default,"formats/list":x.default,"formats/bold":S.default,"formats/code":K.Code,"formats/italic":T.default,"formats/link":C.default,"formats/script":P.default,"formats/strike":I.default,"formats/underline":_.default,"formats/image":O.default,"formats/video":F.default,"formats/list/item":g.ListItem,"modules/formula":H.default,"modules/syntax":se.default,"modules/toolbar":le.default,"themes/bubble":ae.default,"themes/snow":We.default,"ui/icons":ue.default,"ui/picker":Ae.default,"ui/icon-picker":ve.default,"ui/color-picker":be.default,"ui/tooltip":de.default},!0),a.default=l.default},function(n,a,r){Object.defineProperty(a,"__esModule",{value:!0}),a.IndentClass=void 0;var i=function(){function x(v,y){for(var f=0;f<y.length;f++){var b=y[f];b.enumerable=b.enumerable||!1,b.configurable=!0,"value"in b&&(b.writable=!0),Object.defineProperty(v,b.key,b)}}return function(v,y,f){return y&&x(v.prototype,y),f&&x(v,f),v}}(),l=function x(v,y,f){v===null&&(v=Function.prototype);var b=Object.getOwnPropertyDescriptor(v,y);if(b===void 0){var j=Object.getPrototypeOf(v);return j===null?void 0:x(j,y,f)}else{if("value"in b)return b.value;var S=b.get;return S===void 0?void 0:S.call(f)}},c=r(0),o=d(c);function d(x){return x&&x.__esModule?x:{default:x}}function h(x,v){if(!(x instanceof v))throw new TypeError("Cannot call a class as a function")}function u(x,v){if(!x)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return v&&(typeof v=="object"||typeof v=="function")?v:x}function m(x,v){if(typeof v!="function"&&v!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof v);x.prototype=Object.create(v&&v.prototype,{constructor:{value:x,enumerable:!1,writable:!0,configurable:!0}}),v&&(Object.setPrototypeOf?Object.setPrototypeOf(x,v):x.__proto__=v)}var p=function(x){m(v,x);function v(){return h(this,v),u(this,(v.__proto__||Object.getPrototypeOf(v)).apply(this,arguments))}return i(v,[{key:"add",value:function(f,b){if(b==="+1"||b==="-1"){var j=this.value(f)||0;b=b==="+1"?j+1:j-1}return b===0?(this.remove(f),!0):l(v.prototype.__proto__||Object.getPrototypeOf(v.prototype),"add",this).call(this,f,b)}},{key:"canAdd",value:function(f,b){return l(v.prototype.__proto__||Object.getPrototypeOf(v.prototype),"canAdd",this).call(this,f,b)||l(v.prototype.__proto__||Object.getPrototypeOf(v.prototype),"canAdd",this).call(this,f,parseInt(b))}},{key:"value",value:function(f){return parseInt(l(v.prototype.__proto__||Object.getPrototypeOf(v.prototype),"value",this).call(this,f))||void 0}}]),v}(o.default.Attributor.Class),g=new p("indent","ql-indent",{scope:o.default.Scope.BLOCK,whitelist:[1,2,3,4,5,6,7,8]});a.IndentClass=g},function(n,a,r){Object.defineProperty(a,"__esModule",{value:!0});var i=r(4),l=c(i);function c(m){return m&&m.__esModule?m:{default:m}}function o(m,p){if(!(m instanceof p))throw new TypeError("Cannot call a class as a function")}function d(m,p){if(!m)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return p&&(typeof p=="object"||typeof p=="function")?p:m}function h(m,p){if(typeof p!="function"&&p!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof p);m.prototype=Object.create(p&&p.prototype,{constructor:{value:m,enumerable:!1,writable:!0,configurable:!0}}),p&&(Object.setPrototypeOf?Object.setPrototypeOf(m,p):m.__proto__=p)}var u=function(m){h(p,m);function p(){return o(this,p),d(this,(p.__proto__||Object.getPrototypeOf(p)).apply(this,arguments))}return p}(l.default);u.blotName="blockquote",u.tagName="blockquote",a.default=u},function(n,a,r){Object.defineProperty(a,"__esModule",{value:!0});var i=function(){function p(g,x){for(var v=0;v<x.length;v++){var y=x[v];y.enumerable=y.enumerable||!1,y.configurable=!0,"value"in y&&(y.writable=!0),Object.defineProperty(g,y.key,y)}}return function(g,x,v){return x&&p(g.prototype,x),v&&p(g,v),g}}(),l=r(4),c=o(l);function o(p){return p&&p.__esModule?p:{default:p}}function d(p,g){if(!(p instanceof g))throw new TypeError("Cannot call a class as a function")}function h(p,g){if(!p)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return g&&(typeof g=="object"||typeof g=="function")?g:p}function u(p,g){if(typeof g!="function"&&g!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof g);p.prototype=Object.create(g&&g.prototype,{constructor:{value:p,enumerable:!1,writable:!0,configurable:!0}}),g&&(Object.setPrototypeOf?Object.setPrototypeOf(p,g):p.__proto__=g)}var m=function(p){u(g,p);function g(){return d(this,g),h(this,(g.__proto__||Object.getPrototypeOf(g)).apply(this,arguments))}return i(g,null,[{key:"formats",value:function(v){return this.tagName.indexOf(v.tagName)+1}}]),g}(c.default);m.blotName="header",m.tagName=["H1","H2","H3","H4","H5","H6"],a.default=m},function(n,a,r){Object.defineProperty(a,"__esModule",{value:!0}),a.default=a.ListItem=void 0;var i=function(){function j(S,k){for(var T=0;T<k.length;T++){var A=k[T];A.enumerable=A.enumerable||!1,A.configurable=!0,"value"in A&&(A.writable=!0),Object.defineProperty(S,A.key,A)}}return function(S,k,T){return k&&j(S.prototype,k),T&&j(S,T),S}}(),l=function j(S,k,T){S===null&&(S=Function.prototype);var A=Object.getOwnPropertyDescriptor(S,k);if(A===void 0){var C=Object.getPrototypeOf(S);return C===null?void 0:j(C,k,T)}else{if("value"in A)return A.value;var w=A.get;return w===void 0?void 0:w.call(T)}},c=r(0),o=p(c),d=r(4),h=p(d),u=r(25),m=p(u);function p(j){return j&&j.__esModule?j:{default:j}}function g(j,S,k){return S in j?Object.defineProperty(j,S,{value:k,enumerable:!0,configurable:!0,writable:!0}):j[S]=k,j}function x(j,S){if(!(j instanceof S))throw new TypeError("Cannot call a class as a function")}function v(j,S){if(!j)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return S&&(typeof S=="object"||typeof S=="function")?S:j}function y(j,S){if(typeof S!="function"&&S!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof S);j.prototype=Object.create(S&&S.prototype,{constructor:{value:j,enumerable:!1,writable:!0,configurable:!0}}),S&&(Object.setPrototypeOf?Object.setPrototypeOf(j,S):j.__proto__=S)}var f=function(j){y(S,j);function S(){return x(this,S),v(this,(S.__proto__||Object.getPrototypeOf(S)).apply(this,arguments))}return i(S,[{key:"format",value:function(T,A){T===b.blotName&&!A?this.replaceWith(o.default.create(this.statics.scope)):l(S.prototype.__proto__||Object.getPrototypeOf(S.prototype),"format",this).call(this,T,A)}},{key:"remove",value:function(){this.prev==null&&this.next==null?this.parent.remove():l(S.prototype.__proto__||Object.getPrototypeOf(S.prototype),"remove",this).call(this)}},{key:"replaceWith",value:function(T,A){return this.parent.isolate(this.offset(this.parent),this.length()),T===this.parent.statics.blotName?(this.parent.replaceWith(T,A),this):(this.parent.unwrap(),l(S.prototype.__proto__||Object.getPrototypeOf(S.prototype),"replaceWith",this).call(this,T,A))}}],[{key:"formats",value:function(T){return T.tagName===this.tagName?void 0:l(S.__proto__||Object.getPrototypeOf(S),"formats",this).call(this,T)}}]),S}(h.default);f.blotName="list-item",f.tagName="LI";var b=function(j){y(S,j),i(S,null,[{key:"create",value:function(T){var A=T==="ordered"?"OL":"UL",C=l(S.__proto__||Object.getPrototypeOf(S),"create",this).call(this,A);return(T==="checked"||T==="unchecked")&&C.setAttribute("data-checked",T==="checked"),C}},{key:"formats",value:function(T){if(T.tagName==="OL")return"ordered";if(T.tagName==="UL")return T.hasAttribute("data-checked")?T.getAttribute("data-checked")==="true"?"checked":"unchecked":"bullet"}}]);function S(k){x(this,S);var T=v(this,(S.__proto__||Object.getPrototypeOf(S)).call(this,k)),A=function(w){if(w.target.parentNode===k){var P=T.statics.formats(k),M=o.default.find(w.target);P==="checked"?M.format("list","unchecked"):P==="unchecked"&&M.format("list","checked")}};return k.addEventListener("touchstart",A),k.addEventListener("mousedown",A),T}return i(S,[{key:"format",value:function(T,A){this.children.length>0&&this.children.tail.format(T,A)}},{key:"formats",value:function(){return g({},this.statics.blotName,this.statics.formats(this.domNode))}},{key:"insertBefore",value:function(T,A){if(T instanceof f)l(S.prototype.__proto__||Object.getPrototypeOf(S.prototype),"insertBefore",this).call(this,T,A);else{var C=A==null?this.length():A.offset(this),w=this.split(C);w.parent.insertBefore(T,w)}}},{key:"optimize",value:function(T){l(S.prototype.__proto__||Object.getPrototypeOf(S.prototype),"optimize",this).call(this,T);var A=this.next;A!=null&&A.prev===this&&A.statics.blotName===this.statics.blotName&&A.domNode.tagName===this.domNode.tagName&&A.domNode.getAttribute("data-checked")===this.domNode.getAttribute("data-checked")&&(A.moveChildren(this),A.remove())}},{key:"replace",value:function(T){if(T.statics.blotName!==this.statics.blotName){var A=o.default.create(this.statics.defaultChild);T.moveChildren(A),this.appendChild(A)}l(S.prototype.__proto__||Object.getPrototypeOf(S.prototype),"replace",this).call(this,T)}}]),S}(m.default);b.blotName="list",b.scope=o.default.Scope.BLOCK_BLOT,b.tagName=["OL","UL"],b.defaultChild="list-item",b.allowedChildren=[f],a.ListItem=f,a.default=b},function(n,a,r){Object.defineProperty(a,"__esModule",{value:!0});var i=r(56),l=c(i);function c(m){return m&&m.__esModule?m:{default:m}}function o(m,p){if(!(m instanceof p))throw new TypeError("Cannot call a class as a function")}function d(m,p){if(!m)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return p&&(typeof p=="object"||typeof p=="function")?p:m}function h(m,p){if(typeof p!="function"&&p!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof p);m.prototype=Object.create(p&&p.prototype,{constructor:{value:m,enumerable:!1,writable:!0,configurable:!0}}),p&&(Object.setPrototypeOf?Object.setPrototypeOf(m,p):m.__proto__=p)}var u=function(m){h(p,m);function p(){return o(this,p),d(this,(p.__proto__||Object.getPrototypeOf(p)).apply(this,arguments))}return p}(l.default);u.blotName="italic",u.tagName=["EM","I"],a.default=u},function(n,a,r){Object.defineProperty(a,"__esModule",{value:!0});var i=function(){function g(x,v){for(var y=0;y<v.length;y++){var f=v[y];f.enumerable=f.enumerable||!1,f.configurable=!0,"value"in f&&(f.writable=!0),Object.defineProperty(x,f.key,f)}}return function(x,v,y){return v&&g(x.prototype,v),y&&g(x,y),x}}(),l=function g(x,v,y){x===null&&(x=Function.prototype);var f=Object.getOwnPropertyDescriptor(x,v);if(f===void 0){var b=Object.getPrototypeOf(x);return b===null?void 0:g(b,v,y)}else{if("value"in f)return f.value;var j=f.get;return j===void 0?void 0:j.call(y)}},c=r(6),o=d(c);function d(g){return g&&g.__esModule?g:{default:g}}function h(g,x){if(!(g instanceof x))throw new TypeError("Cannot call a class as a function")}function u(g,x){if(!g)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return x&&(typeof x=="object"||typeof x=="function")?x:g}function m(g,x){if(typeof x!="function"&&x!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof x);g.prototype=Object.create(x&&x.prototype,{constructor:{value:g,enumerable:!1,writable:!0,configurable:!0}}),x&&(Object.setPrototypeOf?Object.setPrototypeOf(g,x):g.__proto__=x)}var p=function(g){m(x,g);function x(){return h(this,x),u(this,(x.__proto__||Object.getPrototypeOf(x)).apply(this,arguments))}return i(x,null,[{key:"create",value:function(y){return y==="super"?document.createElement("sup"):y==="sub"?document.createElement("sub"):l(x.__proto__||Object.getPrototypeOf(x),"create",this).call(this,y)}},{key:"formats",value:function(y){if(y.tagName==="SUB")return"sub";if(y.tagName==="SUP")return"super"}}]),x}(o.default);p.blotName="script",p.tagName=["SUB","SUP"],a.default=p},function(n,a,r){Object.defineProperty(a,"__esModule",{value:!0});var i=r(6),l=c(i);function c(m){return m&&m.__esModule?m:{default:m}}function o(m,p){if(!(m instanceof p))throw new TypeError("Cannot call a class as a function")}function d(m,p){if(!m)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return p&&(typeof p=="object"||typeof p=="function")?p:m}function h(m,p){if(typeof p!="function"&&p!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof p);m.prototype=Object.create(p&&p.prototype,{constructor:{value:m,enumerable:!1,writable:!0,configurable:!0}}),p&&(Object.setPrototypeOf?Object.setPrototypeOf(m,p):m.__proto__=p)}var u=function(m){h(p,m);function p(){return o(this,p),d(this,(p.__proto__||Object.getPrototypeOf(p)).apply(this,arguments))}return p}(l.default);u.blotName="strike",u.tagName="S",a.default=u},function(n,a,r){Object.defineProperty(a,"__esModule",{value:!0});var i=r(6),l=c(i);function c(m){return m&&m.__esModule?m:{default:m}}function o(m,p){if(!(m instanceof p))throw new TypeError("Cannot call a class as a function")}function d(m,p){if(!m)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return p&&(typeof p=="object"||typeof p=="function")?p:m}function h(m,p){if(typeof p!="function"&&p!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof p);m.prototype=Object.create(p&&p.prototype,{constructor:{value:m,enumerable:!1,writable:!0,configurable:!0}}),p&&(Object.setPrototypeOf?Object.setPrototypeOf(m,p):m.__proto__=p)}var u=function(m){h(p,m);function p(){return o(this,p),d(this,(p.__proto__||Object.getPrototypeOf(p)).apply(this,arguments))}return p}(l.default);u.blotName="underline",u.tagName="U",a.default=u},function(n,a,r){Object.defineProperty(a,"__esModule",{value:!0});var i=function(){function v(y,f){for(var b=0;b<f.length;b++){var j=f[b];j.enumerable=j.enumerable||!1,j.configurable=!0,"value"in j&&(j.writable=!0),Object.defineProperty(y,j.key,j)}}return function(y,f,b){return f&&v(y.prototype,f),b&&v(y,b),y}}(),l=function v(y,f,b){y===null&&(y=Function.prototype);var j=Object.getOwnPropertyDescriptor(y,f);if(j===void 0){var S=Object.getPrototypeOf(y);return S===null?void 0:v(S,f,b)}else{if("value"in j)return j.value;var k=j.get;return k===void 0?void 0:k.call(b)}},c=r(0),o=h(c),d=r(27);function h(v){return v&&v.__esModule?v:{default:v}}function u(v,y){if(!(v instanceof y))throw new TypeError("Cannot call a class as a function")}function m(v,y){if(!v)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return y&&(typeof y=="object"||typeof y=="function")?y:v}function p(v,y){if(typeof y!="function"&&y!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof y);v.prototype=Object.create(y&&y.prototype,{constructor:{value:v,enumerable:!1,writable:!0,configurable:!0}}),y&&(Object.setPrototypeOf?Object.setPrototypeOf(v,y):v.__proto__=y)}var g=["alt","height","width"],x=function(v){p(y,v);function y(){return u(this,y),m(this,(y.__proto__||Object.getPrototypeOf(y)).apply(this,arguments))}return i(y,[{key:"format",value:function(b,j){g.indexOf(b)>-1?j?this.domNode.setAttribute(b,j):this.domNode.removeAttribute(b):l(y.prototype.__proto__||Object.getPrototypeOf(y.prototype),"format",this).call(this,b,j)}}],[{key:"create",value:function(b){var j=l(y.__proto__||Object.getPrototypeOf(y),"create",this).call(this,b);return typeof b=="string"&&j.setAttribute("src",this.sanitize(b)),j}},{key:"formats",value:function(b){return g.reduce(function(j,S){return b.hasAttribute(S)&&(j[S]=b.getAttribute(S)),j},{})}},{key:"match",value:function(b){return/\.(jpe?g|gif|png)$/.test(b)||/^data:image\/.+;base64/.test(b)}},{key:"sanitize",value:function(b){return(0,d.sanitize)(b,["http","https","data"])?b:"//:0"}},{key:"value",value:function(b){return b.getAttribute("src")}}]),y}(o.default.Embed);x.blotName="image",x.tagName="IMG",a.default=x},function(n,a,r){Object.defineProperty(a,"__esModule",{value:!0});var i=function(){function v(y,f){for(var b=0;b<f.length;b++){var j=f[b];j.enumerable=j.enumerable||!1,j.configurable=!0,"value"in j&&(j.writable=!0),Object.defineProperty(y,j.key,j)}}return function(y,f,b){return f&&v(y.prototype,f),b&&v(y,b),y}}(),l=function v(y,f,b){y===null&&(y=Function.prototype);var j=Object.getOwnPropertyDescriptor(y,f);if(j===void 0){var S=Object.getPrototypeOf(y);return S===null?void 0:v(S,f,b)}else{if("value"in j)return j.value;var k=j.get;return k===void 0?void 0:k.call(b)}},c=r(4),o=r(27),d=h(o);function h(v){return v&&v.__esModule?v:{default:v}}function u(v,y){if(!(v instanceof y))throw new TypeError("Cannot call a class as a function")}function m(v,y){if(!v)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return y&&(typeof y=="object"||typeof y=="function")?y:v}function p(v,y){if(typeof y!="function"&&y!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof y);v.prototype=Object.create(y&&y.prototype,{constructor:{value:v,enumerable:!1,writable:!0,configurable:!0}}),y&&(Object.setPrototypeOf?Object.setPrototypeOf(v,y):v.__proto__=y)}var g=["height","width"],x=function(v){p(y,v);function y(){return u(this,y),m(this,(y.__proto__||Object.getPrototypeOf(y)).apply(this,arguments))}return i(y,[{key:"format",value:function(b,j){g.indexOf(b)>-1?j?this.domNode.setAttribute(b,j):this.domNode.removeAttribute(b):l(y.prototype.__proto__||Object.getPrototypeOf(y.prototype),"format",this).call(this,b,j)}}],[{key:"create",value:function(b){var j=l(y.__proto__||Object.getPrototypeOf(y),"create",this).call(this,b);return j.setAttribute("frameborder","0"),j.setAttribute("allowfullscreen",!0),j.setAttribute("src",this.sanitize(b)),j}},{key:"formats",value:function(b){return g.reduce(function(j,S){return b.hasAttribute(S)&&(j[S]=b.getAttribute(S)),j},{})}},{key:"sanitize",value:function(b){return d.default.sanitize(b)}},{key:"value",value:function(b){return b.getAttribute("src")}}]),y}(c.BlockEmbed);x.blotName="video",x.className="ql-video",x.tagName="IFRAME",a.default=x},function(n,a,r){Object.defineProperty(a,"__esModule",{value:!0}),a.default=a.FormulaBlot=void 0;var i=function(){function b(j,S){for(var k=0;k<S.length;k++){var T=S[k];T.enumerable=T.enumerable||!1,T.configurable=!0,"value"in T&&(T.writable=!0),Object.defineProperty(j,T.key,T)}}return function(j,S,k){return S&&b(j.prototype,S),k&&b(j,k),j}}(),l=function b(j,S,k){j===null&&(j=Function.prototype);var T=Object.getOwnPropertyDescriptor(j,S);if(T===void 0){var A=Object.getPrototypeOf(j);return A===null?void 0:b(A,S,k)}else{if("value"in T)return T.value;var C=T.get;return C===void 0?void 0:C.call(k)}},c=r(35),o=p(c),d=r(5),h=p(d),u=r(9),m=p(u);function p(b){return b&&b.__esModule?b:{default:b}}function g(b,j){if(!(b instanceof j))throw new TypeError("Cannot call a class as a function")}function x(b,j){if(!b)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return j&&(typeof j=="object"||typeof j=="function")?j:b}function v(b,j){if(typeof j!="function"&&j!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof j);b.prototype=Object.create(j&&j.prototype,{constructor:{value:b,enumerable:!1,writable:!0,configurable:!0}}),j&&(Object.setPrototypeOf?Object.setPrototypeOf(b,j):b.__proto__=j)}var y=function(b){v(j,b);function j(){return g(this,j),x(this,(j.__proto__||Object.getPrototypeOf(j)).apply(this,arguments))}return i(j,null,[{key:"create",value:function(k){var T=l(j.__proto__||Object.getPrototypeOf(j),"create",this).call(this,k);return typeof k=="string"&&(window.katex.render(k,T,{throwOnError:!1,errorColor:"#f00"}),T.setAttribute("data-value",k)),T}},{key:"value",value:function(k){return k.getAttribute("data-value")}}]),j}(o.default);y.blotName="formula",y.className="ql-formula",y.tagName="SPAN";var f=function(b){v(j,b),i(j,null,[{key:"register",value:function(){h.default.register(y,!0)}}]);function j(){g(this,j);var S=x(this,(j.__proto__||Object.getPrototypeOf(j)).call(this));if(window.katex==null)throw new Error("Formula module requires KaTeX.");return S}return j}(m.default);a.FormulaBlot=y,a.default=f},function(n,a,r){Object.defineProperty(a,"__esModule",{value:!0}),a.default=a.CodeToken=a.CodeBlock=void 0;var i=function(){function k(T,A){for(var C=0;C<A.length;C++){var w=A[C];w.enumerable=w.enumerable||!1,w.configurable=!0,"value"in w&&(w.writable=!0),Object.defineProperty(T,w.key,w)}}return function(T,A,C){return A&&k(T.prototype,A),C&&k(T,C),T}}(),l=function k(T,A,C){T===null&&(T=Function.prototype);var w=Object.getOwnPropertyDescriptor(T,A);if(w===void 0){var P=Object.getPrototypeOf(T);return P===null?void 0:k(P,A,C)}else{if("value"in w)return w.value;var M=w.get;return M===void 0?void 0:M.call(C)}},c=r(0),o=x(c),d=r(5),h=x(d),u=r(9),m=x(u),p=r(13),g=x(p);function x(k){return k&&k.__esModule?k:{default:k}}function v(k,T){if(!(k instanceof T))throw new TypeError("Cannot call a class as a function")}function y(k,T){if(!k)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return T&&(typeof T=="object"||typeof T=="function")?T:k}function f(k,T){if(typeof T!="function"&&T!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof T);k.prototype=Object.create(T&&T.prototype,{constructor:{value:k,enumerable:!1,writable:!0,configurable:!0}}),T&&(Object.setPrototypeOf?Object.setPrototypeOf(k,T):k.__proto__=T)}var b=function(k){f(T,k);function T(){return v(this,T),y(this,(T.__proto__||Object.getPrototypeOf(T)).apply(this,arguments))}return i(T,[{key:"replaceWith",value:function(C){this.domNode.textContent=this.domNode.textContent,this.attach(),l(T.prototype.__proto__||Object.getPrototypeOf(T.prototype),"replaceWith",this).call(this,C)}},{key:"highlight",value:function(C){var w=this.domNode.textContent;this.cachedText!==w&&((w.trim().length>0||this.cachedText==null)&&(this.domNode.innerHTML=C(w),this.domNode.normalize(),this.attach()),this.cachedText=w)}}]),T}(g.default);b.className="ql-syntax";var j=new o.default.Attributor.Class("token","hljs",{scope:o.default.Scope.INLINE}),S=function(k){f(T,k),i(T,null,[{key:"register",value:function(){h.default.register(j,!0),h.default.register(b,!0)}}]);function T(A,C){v(this,T);var w=y(this,(T.__proto__||Object.getPrototypeOf(T)).call(this,A,C));if(typeof w.options.highlight!="function")throw new Error("Syntax module requires highlight.js. Please include the library on the page before Quill.");var P=null;return w.quill.on(h.default.events.SCROLL_OPTIMIZE,function(){clearTimeout(P),P=setTimeout(function(){w.highlight(),P=null},w.options.interval)}),w.highlight(),w}return i(T,[{key:"highlight",value:function(){var C=this;if(!this.quill.selection.composing){this.quill.update(h.default.sources.USER);var w=this.quill.getSelection();this.quill.scroll.descendants(b).forEach(function(P){P.highlight(C.options.highlight)}),this.quill.update(h.default.sources.SILENT),w!=null&&this.quill.setSelection(w,h.default.sources.SILENT)}}}]),T}(m.default);S.DEFAULTS={highlight:function(){return window.hljs==null?null:function(k){var T=window.hljs.highlightAuto(k);return T.value}}(),interval:1e3},a.CodeBlock=b,a.CodeToken=j,a.default=S},function(n,a){n.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=3 x2=15 y1=9 y2=9></line> <line class=ql-stroke x1=3 x2=13 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=9 y1=4 y2=4></line> </svg>'},function(n,a){n.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=15 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=14 x2=4 y1=14 y2=14></line> <line class=ql-stroke x1=12 x2=6 y1=4 y2=4></line> </svg>'},function(n,a){n.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=15 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=15 x2=5 y1=14 y2=14></line> <line class=ql-stroke x1=15 x2=9 y1=4 y2=4></line> </svg>'},function(n,a){n.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=15 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=15 x2=3 y1=14 y2=14></line> <line class=ql-stroke x1=15 x2=3 y1=4 y2=4></line> </svg>'},function(n,a){n.exports='<svg viewbox="0 0 18 18"> <g class="ql-fill ql-color-label"> <polygon points="6 6.868 6 6 5 6 5 7 5.942 7 6 6.868"></polygon> <rect height=1 width=1 x=4 y=4></rect> <polygon points="6.817 5 6 5 6 6 6.38 6 6.817 5"></polygon> <rect height=1 width=1 x=2 y=6></rect> <rect height=1 width=1 x=3 y=5></rect> <rect height=1 width=1 x=4 y=7></rect> <polygon points="4 11.439 4 11 3 11 3 12 3.755 12 4 11.439"></polygon> <rect height=1 width=1 x=2 y=12></rect> <rect height=1 width=1 x=2 y=9></rect> <rect height=1 width=1 x=2 y=15></rect> <polygon points="4.63 10 4 10 4 11 4.192 11 4.63 10"></polygon> <rect height=1 width=1 x=3 y=8></rect> <path d=M10.832,4.2L11,4.582V4H10.708A1.948,1.948,0,0,1,10.832,4.2Z></path> <path d=M7,4.582L7.168,4.2A1.929,1.929,0,0,1,7.292,4H7V4.582Z></path> <path d=M8,13H7.683l-0.351.8a1.933,1.933,0,0,1-.124.2H8V13Z></path> <rect height=1 width=1 x=12 y=2></rect> <rect height=1 width=1 x=11 y=3></rect> <path d=M9,3H8V3.282A1.985,1.985,0,0,1,9,3Z></path> <rect height=1 width=1 x=2 y=3></rect> <rect height=1 width=1 x=6 y=2></rect> <rect height=1 width=1 x=3 y=2></rect> <rect height=1 width=1 x=5 y=3></rect> <rect height=1 width=1 x=9 y=2></rect> <rect height=1 width=1 x=15 y=14></rect> <polygon points="13.447 10.174 13.469 10.225 13.472 10.232 13.808 11 14 11 14 10 13.37 10 13.447 10.174"></polygon> <rect height=1 width=1 x=13 y=7></rect> <rect height=1 width=1 x=15 y=5></rect> <rect height=1 width=1 x=14 y=6></rect> <rect height=1 width=1 x=15 y=8></rect> <rect height=1 width=1 x=14 y=9></rect> <path d=M3.775,14H3v1H4V14.314A1.97,1.97,0,0,1,3.775,14Z></path> <rect height=1 width=1 x=14 y=3></rect> <polygon points="12 6.868 12 6 11.62 6 12 6.868"></polygon> <rect height=1 width=1 x=15 y=2></rect> <rect height=1 width=1 x=12 y=5></rect> <rect height=1 width=1 x=13 y=4></rect> <polygon points="12.933 9 13 9 13 8 12.495 8 12.933 9"></polygon> <rect height=1 width=1 x=9 y=14></rect> <rect height=1 width=1 x=8 y=15></rect> <path d=M6,14.926V15H7V14.316A1.993,1.993,0,0,1,6,14.926Z></path> <rect height=1 width=1 x=5 y=15></rect> <path d=M10.668,13.8L10.317,13H10v1h0.792A1.947,1.947,0,0,1,10.668,13.8Z></path> <rect height=1 width=1 x=11 y=15></rect> <path d=M14.332,12.2a1.99,1.99,0,0,1,.166.8H15V12H14.245Z></path> <rect height=1 width=1 x=14 y=15></rect> <rect height=1 width=1 x=15 y=11></rect> </g> <polyline class=ql-stroke points="5.5 13 9 5 12.5 13"></polyline> <line class=ql-stroke x1=11.63 x2=6.38 y1=11 y2=11></line> </svg>'},function(n,a){n.exports='<svg viewbox="0 0 18 18"> <rect class="ql-fill ql-stroke" height=3 width=3 x=4 y=5></rect> <rect class="ql-fill ql-stroke" height=3 width=3 x=11 y=5></rect> <path class="ql-even ql-fill ql-stroke" d=M7,8c0,4.031-3,5-3,5></path> <path class="ql-even ql-fill ql-stroke" d=M14,8c0,4.031-3,5-3,5></path> </svg>'},function(n,a){n.exports='<svg viewbox="0 0 18 18"> <path class=ql-stroke d=M5,4H9.5A2.5,2.5,0,0,1,12,6.5v0A2.5,2.5,0,0,1,9.5,9H5A0,0,0,0,1,5,9V4A0,0,0,0,1,5,4Z></path> <path class=ql-stroke d=M5,9h5.5A2.5,2.5,0,0,1,13,11.5v0A2.5,2.5,0,0,1,10.5,14H5a0,0,0,0,1,0,0V9A0,0,0,0,1,5,9Z></path> </svg>'},function(n,a){n.exports='<svg class="" viewbox="0 0 18 18"> <line class=ql-stroke x1=5 x2=13 y1=3 y2=3></line> <line class=ql-stroke x1=6 x2=9.35 y1=12 y2=3></line> <line class=ql-stroke x1=11 x2=15 y1=11 y2=15></line> <line class=ql-stroke x1=15 x2=11 y1=11 y2=15></line> <rect class=ql-fill height=1 rx=0.5 ry=0.5 width=7 x=2 y=14></rect> </svg>'},function(n,a){n.exports='<svg viewbox="0 0 18 18"> <line class="ql-color-label ql-stroke ql-transparent" x1=3 x2=15 y1=15 y2=15></line> <polyline class=ql-stroke points="5.5 11 9 3 12.5 11"></polyline> <line class=ql-stroke x1=11.63 x2=6.38 y1=9 y2=9></line> </svg>'},function(n,a){n.exports='<svg viewbox="0 0 18 18"> <polygon class="ql-stroke ql-fill" points="3 11 5 9 3 7 3 11"></polygon> <line class="ql-stroke ql-fill" x1=15 x2=11 y1=4 y2=4></line> <path class=ql-fill d=M11,3a3,3,0,0,0,0,6h1V3H11Z></path> <rect class=ql-fill height=11 width=1 x=11 y=4></rect> <rect class=ql-fill height=11 width=1 x=13 y=4></rect> </svg>'},function(n,a){n.exports='<svg viewbox="0 0 18 18"> <polygon class="ql-stroke ql-fill" points="15 12 13 10 15 8 15 12"></polygon> <line class="ql-stroke ql-fill" x1=9 x2=5 y1=4 y2=4></line> <path class=ql-fill d=M5,3A3,3,0,0,0,5,9H6V3H5Z></path> <rect class=ql-fill height=11 width=1 x=5 y=4></rect> <rect class=ql-fill height=11 width=1 x=7 y=4></rect> </svg>'},function(n,a){n.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M14,16H4a1,1,0,0,1,0-2H14A1,1,0,0,1,14,16Z /> <path class=ql-fill d=M14,4H4A1,1,0,0,1,4,2H14A1,1,0,0,1,14,4Z /> <rect class=ql-fill x=3 y=6 width=12 height=6 rx=1 ry=1 /> </svg>'},function(n,a){n.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M13,16H5a1,1,0,0,1,0-2h8A1,1,0,0,1,13,16Z /> <path class=ql-fill d=M13,4H5A1,1,0,0,1,5,2h8A1,1,0,0,1,13,4Z /> <rect class=ql-fill x=2 y=6 width=14 height=6 rx=1 ry=1 /> </svg>'},function(n,a){n.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M15,8H13a1,1,0,0,1,0-2h2A1,1,0,0,1,15,8Z /> <path class=ql-fill d=M15,12H13a1,1,0,0,1,0-2h2A1,1,0,0,1,15,12Z /> <path class=ql-fill d=M15,16H5a1,1,0,0,1,0-2H15A1,1,0,0,1,15,16Z /> <path class=ql-fill d=M15,4H5A1,1,0,0,1,5,2H15A1,1,0,0,1,15,4Z /> <rect class=ql-fill x=2 y=6 width=8 height=6 rx=1 ry=1 /> </svg>'},function(n,a){n.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M5,8H3A1,1,0,0,1,3,6H5A1,1,0,0,1,5,8Z /> <path class=ql-fill d=M5,12H3a1,1,0,0,1,0-2H5A1,1,0,0,1,5,12Z /> <path class=ql-fill d=M13,16H3a1,1,0,0,1,0-2H13A1,1,0,0,1,13,16Z /> <path class=ql-fill d=M13,4H3A1,1,0,0,1,3,2H13A1,1,0,0,1,13,4Z /> <rect class=ql-fill x=8 y=6 width=8 height=6 rx=1 ry=1 transform="translate(24 18) rotate(-180)"/> </svg>'},function(n,a){n.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M11.759,2.482a2.561,2.561,0,0,0-3.53.607A7.656,7.656,0,0,0,6.8,6.2C6.109,9.188,5.275,14.677,4.15,14.927a1.545,1.545,0,0,0-1.3-.933A0.922,0.922,0,0,0,2,15.036S1.954,16,4.119,16s3.091-2.691,3.7-5.553c0.177-.826.36-1.726,0.554-2.6L8.775,6.2c0.381-1.421.807-2.521,1.306-2.676a1.014,1.014,0,0,0,1.02.56A0.966,0.966,0,0,0,11.759,2.482Z></path> <rect class=ql-fill height=1.6 rx=0.8 ry=0.8 width=5 x=5.15 y=6.2></rect> <path class=ql-fill d=M13.663,12.027a1.662,1.662,0,0,1,.266-0.276q0.193,0.069.456,0.138a2.1,2.1,0,0,0,.535.069,1.075,1.075,0,0,0,.767-0.3,1.044,1.044,0,0,0,.314-0.8,0.84,0.84,0,0,0-.238-0.619,0.8,0.8,0,0,0-.594-0.239,1.154,1.154,0,0,0-.781.3,4.607,4.607,0,0,0-.781,1q-0.091.15-.218,0.346l-0.246.38c-0.068-.288-0.137-0.582-0.212-0.885-0.459-1.847-2.494-.984-2.941-0.8-0.482.2-.353,0.647-0.094,0.529a0.869,0.869,0,0,1,1.281.585c0.217,0.751.377,1.436,0.527,2.038a5.688,5.688,0,0,1-.362.467,2.69,2.69,0,0,1-.264.271q-0.221-.08-0.471-0.147a2.029,2.029,0,0,0-.522-0.066,1.079,1.079,0,0,0-.768.3A1.058,1.058,0,0,0,9,15.131a0.82,0.82,0,0,0,.832.852,1.134,1.134,0,0,0,.787-0.3,5.11,5.11,0,0,0,.776-0.993q0.141-.219.215-0.34c0.046-.076.122-0.194,0.223-0.346a2.786,2.786,0,0,0,.918,1.726,2.582,2.582,0,0,0,2.376-.185c0.317-.181.212-0.565,0-0.494A0.807,0.807,0,0,1,14.176,15a5.159,5.159,0,0,1-.913-2.446l0,0Q13.487,12.24,13.663,12.027Z></path> </svg>'},function(n,a){n.exports='<svg viewBox="0 0 18 18"> <path class=ql-fill d=M10,4V14a1,1,0,0,1-2,0V10H3v4a1,1,0,0,1-2,0V4A1,1,0,0,1,3,4V8H8V4a1,1,0,0,1,2,0Zm6.06787,9.209H14.98975V7.59863a.54085.54085,0,0,0-.605-.60547h-.62744a1.01119,1.01119,0,0,0-.748.29688L11.645,8.56641a.5435.5435,0,0,0-.022.8584l.28613.30762a.53861.53861,0,0,0,.84717.0332l.09912-.08789a1.2137,1.2137,0,0,0,.2417-.35254h.02246s-.01123.30859-.01123.60547V13.209H12.041a.54085.54085,0,0,0-.605.60547v.43945a.54085.54085,0,0,0,.605.60547h4.02686a.54085.54085,0,0,0,.605-.60547v-.43945A.54085.54085,0,0,0,16.06787,13.209Z /> </svg>'},function(n,a){n.exports='<svg viewBox="0 0 18 18"> <path class=ql-fill d=M16.73975,13.81445v.43945a.54085.54085,0,0,1-.605.60547H11.855a.58392.58392,0,0,1-.64893-.60547V14.0127c0-2.90527,3.39941-3.42187,3.39941-4.55469a.77675.77675,0,0,0-.84717-.78125,1.17684,1.17684,0,0,0-.83594.38477c-.2749.26367-.561.374-.85791.13184l-.4292-.34082c-.30811-.24219-.38525-.51758-.1543-.81445a2.97155,2.97155,0,0,1,2.45361-1.17676,2.45393,2.45393,0,0,1,2.68408,2.40918c0,2.45312-3.1792,2.92676-3.27832,3.93848h2.79443A.54085.54085,0,0,1,16.73975,13.81445ZM9,3A.99974.99974,0,0,0,8,4V8H3V4A1,1,0,0,0,1,4V14a1,1,0,0,0,2,0V10H8v4a1,1,0,0,0,2,0V4A.99974.99974,0,0,0,9,3Z /> </svg>'},function(n,a){n.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=7 x2=13 y1=4 y2=4></line> <line class=ql-stroke x1=5 x2=11 y1=14 y2=14></line> <line class=ql-stroke x1=8 x2=10 y1=14 y2=4></line> </svg>'},function(n,a){n.exports='<svg viewbox="0 0 18 18"> <rect class=ql-stroke height=10 width=12 x=3 y=4></rect> <circle class=ql-fill cx=6 cy=7 r=1></circle> <polyline class="ql-even ql-fill" points="5 12 5 11 7 9 8 10 11 7 13 9 13 12 5 12"></polyline> </svg>'},function(n,a){n.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=3 x2=15 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=9 x2=15 y1=9 y2=9></line> <polyline class="ql-fill ql-stroke" points="3 7 3 11 5 9 3 7"></polyline> </svg>'},function(n,a){n.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=3 x2=15 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=9 x2=15 y1=9 y2=9></line> <polyline class=ql-stroke points="5 7 5 11 3 9 5 7"></polyline> </svg>'},function(n,a){n.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=7 x2=11 y1=7 y2=11></line> <path class="ql-even ql-stroke" d=M8.9,4.577a3.476,3.476,0,0,1,.36,4.679A3.476,3.476,0,0,1,4.577,8.9C3.185,7.5,2.035,6.4,4.217,4.217S7.5,3.185,8.9,4.577Z></path> <path class="ql-even ql-stroke" d=M13.423,9.1a3.476,3.476,0,0,0-4.679-.36,3.476,3.476,0,0,0,.36,4.679c1.392,1.392,2.5,2.542,4.679.36S14.815,10.5,13.423,9.1Z></path> </svg>'},function(n,a){n.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=7 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=7 x2=15 y1=9 y2=9></line> <line class=ql-stroke x1=7 x2=15 y1=14 y2=14></line> <line class="ql-stroke ql-thin" x1=2.5 x2=4.5 y1=5.5 y2=5.5></line> <path class=ql-fill d=M3.5,6A0.5,0.5,0,0,1,3,5.5V3.085l-0.276.138A0.5,0.5,0,0,1,2.053,3c-0.124-.247-0.023-0.324.224-0.447l1-.5A0.5,0.5,0,0,1,4,2.5v3A0.5,0.5,0,0,1,3.5,6Z></path> <path class="ql-stroke ql-thin" d=M4.5,10.5h-2c0-.234,1.85-1.076,1.85-2.234A0.959,0.959,0,0,0,2.5,8.156></path> <path class="ql-stroke ql-thin" d=M2.5,14.846a0.959,0.959,0,0,0,1.85-.109A0.7,0.7,0,0,0,3.75,14a0.688,0.688,0,0,0,.6-0.736,0.959,0.959,0,0,0-1.85-.109></path> </svg>'},function(n,a){n.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=6 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=6 x2=15 y1=9 y2=9></line> <line class=ql-stroke x1=6 x2=15 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=3 y1=4 y2=4></line> <line class=ql-stroke x1=3 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=3 x2=3 y1=14 y2=14></line> </svg>'},function(n,a){n.exports='<svg class="" viewbox="0 0 18 18"> <line class=ql-stroke x1=9 x2=15 y1=4 y2=4></line> <polyline class=ql-stroke points="3 4 4 5 6 3"></polyline> <line class=ql-stroke x1=9 x2=15 y1=14 y2=14></line> <polyline class=ql-stroke points="3 14 4 15 6 13"></polyline> <line class=ql-stroke x1=9 x2=15 y1=9 y2=9></line> <polyline class=ql-stroke points="3 9 4 10 6 8"></polyline> </svg>'},function(n,a){n.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M15.5,15H13.861a3.858,3.858,0,0,0,1.914-2.975,1.8,1.8,0,0,0-1.6-1.751A1.921,1.921,0,0,0,12.021,11.7a0.50013,0.50013,0,1,0,.957.291h0a0.914,0.914,0,0,1,1.053-.725,0.81,0.81,0,0,1,.744.762c0,1.076-1.16971,1.86982-1.93971,2.43082A1.45639,1.45639,0,0,0,12,15.5a0.5,0.5,0,0,0,.5.5h3A0.5,0.5,0,0,0,15.5,15Z /> <path class=ql-fill d=M9.65,5.241a1,1,0,0,0-1.409.108L6,7.964,3.759,5.349A1,1,0,0,0,2.192,6.59178Q2.21541,6.6213,2.241,6.649L4.684,9.5,2.241,12.35A1,1,0,0,0,3.71,13.70722q0.02557-.02768.049-0.05722L6,11.036,8.241,13.65a1,1,0,1,0,1.567-1.24277Q9.78459,12.3777,9.759,12.35L7.316,9.5,9.759,6.651A1,1,0,0,0,9.65,5.241Z /> </svg>'},function(n,a){n.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M15.5,7H13.861a4.015,4.015,0,0,0,1.914-2.975,1.8,1.8,0,0,0-1.6-1.751A1.922,1.922,0,0,0,12.021,3.7a0.5,0.5,0,1,0,.957.291,0.917,0.917,0,0,1,1.053-.725,0.81,0.81,0,0,1,.744.762c0,1.077-1.164,1.925-1.934,2.486A1.423,1.423,0,0,0,12,7.5a0.5,0.5,0,0,0,.5.5h3A0.5,0.5,0,0,0,15.5,7Z /> <path class=ql-fill d=M9.651,5.241a1,1,0,0,0-1.41.108L6,7.964,3.759,5.349a1,1,0,1,0-1.519,1.3L4.683,9.5,2.241,12.35a1,1,0,1,0,1.519,1.3L6,11.036,8.241,13.65a1,1,0,0,0,1.519-1.3L7.317,9.5,9.759,6.651A1,1,0,0,0,9.651,5.241Z /> </svg>'},function(n,a){n.exports='<svg viewbox="0 0 18 18"> <line class="ql-stroke ql-thin" x1=15.5 x2=2.5 y1=8.5 y2=9.5></line> <path class=ql-fill d=M9.007,8C6.542,7.791,6,7.519,6,6.5,6,5.792,7.283,5,9,5c1.571,0,2.765.679,2.969,1.309a1,1,0,0,0,1.9-.617C13.356,4.106,11.354,3,9,3,6.2,3,4,4.538,4,6.5a3.2,3.2,0,0,0,.5,1.843Z></path> <path class=ql-fill d=M8.984,10C11.457,10.208,12,10.479,12,11.5c0,0.708-1.283,1.5-3,1.5-1.571,0-2.765-.679-2.969-1.309a1,1,0,1,0-1.9.617C4.644,13.894,6.646,15,9,15c2.8,0,5-1.538,5-3.5a3.2,3.2,0,0,0-.5-1.843Z></path> </svg>'},function(n,a){n.exports='<svg viewbox="0 0 18 18"> <path class=ql-stroke d=M5,3V9a4.012,4.012,0,0,0,4,4H9a4.012,4.012,0,0,0,4-4V3></path> <rect class=ql-fill height=1 rx=0.5 ry=0.5 width=12 x=3 y=15></rect> </svg>'},function(n,a){n.exports='<svg viewbox="0 0 18 18"> <rect class=ql-stroke height=12 width=12 x=3 y=3></rect> <rect class=ql-fill height=12 width=1 x=5 y=3></rect> <rect class=ql-fill height=12 width=1 x=12 y=3></rect> <rect class=ql-fill height=2 width=8 x=5 y=8></rect> <rect class=ql-fill height=1 width=3 x=3 y=5></rect> <rect class=ql-fill height=1 width=3 x=3 y=7></rect> <rect class=ql-fill height=1 width=3 x=3 y=10></rect> <rect class=ql-fill height=1 width=3 x=3 y=12></rect> <rect class=ql-fill height=1 width=3 x=12 y=5></rect> <rect class=ql-fill height=1 width=3 x=12 y=7></rect> <rect class=ql-fill height=1 width=3 x=12 y=10></rect> <rect class=ql-fill height=1 width=3 x=12 y=12></rect> </svg>'},function(n,a){n.exports='<svg viewbox="0 0 18 18"> <polygon class=ql-stroke points="7 11 9 13 11 11 7 11"></polygon> <polygon class=ql-stroke points="7 7 9 5 11 7 7 7"></polygon> </svg>'},function(n,a,r){Object.defineProperty(a,"__esModule",{value:!0}),a.default=a.BubbleTooltip=void 0;var i=function T(A,C,w){A===null&&(A=Function.prototype);var P=Object.getOwnPropertyDescriptor(A,C);if(P===void 0){var M=Object.getPrototypeOf(A);return M===null?void 0:T(M,C,w)}else{if("value"in P)return P.value;var I=P.get;return I===void 0?void 0:I.call(w)}},l=function(){function T(A,C){for(var w=0;w<C.length;w++){var P=C[w];P.enumerable=P.enumerable||!1,P.configurable=!0,"value"in P&&(P.writable=!0),Object.defineProperty(A,P.key,P)}}return function(A,C,w){return C&&T(A.prototype,C),w&&T(A,w),A}}(),c=r(3),o=v(c),d=r(8),h=v(d),u=r(43),m=v(u),p=r(15),g=r(41),x=v(g);function v(T){return T&&T.__esModule?T:{default:T}}function y(T,A){if(!(T instanceof A))throw new TypeError("Cannot call a class as a function")}function f(T,A){if(!T)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return A&&(typeof A=="object"||typeof A=="function")?A:T}function b(T,A){if(typeof A!="function"&&A!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof A);T.prototype=Object.create(A&&A.prototype,{constructor:{value:T,enumerable:!1,writable:!0,configurable:!0}}),A&&(Object.setPrototypeOf?Object.setPrototypeOf(T,A):T.__proto__=A)}var j=[["bold","italic","link"],[{header:1},{header:2},"blockquote"]],S=function(T){b(A,T);function A(C,w){y(this,A),w.modules.toolbar!=null&&w.modules.toolbar.container==null&&(w.modules.toolbar.container=j);var P=f(this,(A.__proto__||Object.getPrototypeOf(A)).call(this,C,w));return P.quill.container.classList.add("ql-bubble"),P}return l(A,[{key:"extendToolbar",value:function(w){this.tooltip=new k(this.quill,this.options.bounds),this.tooltip.root.appendChild(w.container),this.buildButtons([].slice.call(w.container.querySelectorAll("button")),x.default),this.buildPickers([].slice.call(w.container.querySelectorAll("select")),x.default)}}]),A}(m.default);S.DEFAULTS=(0,o.default)(!0,{},m.default.DEFAULTS,{modules:{toolbar:{handlers:{link:function(A){A?this.quill.theme.tooltip.edit():this.quill.format("link",!1)}}}}});var k=function(T){b(A,T);function A(C,w){y(this,A);var P=f(this,(A.__proto__||Object.getPrototypeOf(A)).call(this,C,w));return P.quill.on(h.default.events.EDITOR_CHANGE,function(M,I,W,_){if(M===h.default.events.SELECTION_CHANGE)if(I!=null&&I.length>0&&_===h.default.sources.USER){P.show(),P.root.style.left="0px",P.root.style.width="",P.root.style.width=P.root.offsetWidth+"px";var B=P.quill.getLines(I.index,I.length);if(B.length===1)P.position(P.quill.getBounds(I));else{var O=B[B.length-1],z=P.quill.getIndex(O),F=Math.min(O.length()-1,I.index+I.length-z),K=P.quill.getBounds(new p.Range(z,F));P.position(K)}}else document.activeElement!==P.textbox&&P.quill.hasFocus()&&P.hide()}),P}return l(A,[{key:"listen",value:function(){var w=this;i(A.prototype.__proto__||Object.getPrototypeOf(A.prototype),"listen",this).call(this),this.root.querySelector(".ql-close").addEventListener("click",function(){w.root.classList.remove("ql-editing")}),this.quill.on(h.default.events.SCROLL_OPTIMIZE,function(){setTimeout(function(){if(!w.root.classList.contains("ql-hidden")){var P=w.quill.getSelection();P!=null&&w.position(w.quill.getBounds(P))}},1)})}},{key:"cancel",value:function(){this.show()}},{key:"position",value:function(w){var P=i(A.prototype.__proto__||Object.getPrototypeOf(A.prototype),"position",this).call(this,w),M=this.root.querySelector(".ql-tooltip-arrow");if(M.style.marginLeft="",P===0)return P;M.style.marginLeft=-1*P-M.offsetWidth/2+"px"}}]),A}(u.BaseTooltip);k.TEMPLATE=['<span class="ql-tooltip-arrow"></span>','<div class="ql-tooltip-editor">','<input type="text" data-formula="e=mc^2" data-link="https://quilljs.com" data-video="Embed URL">','<a class="ql-close"></a>',"</div>"].join(""),a.BubbleTooltip=k,a.default=S},function(n,a,r){n.exports=r(63)}]).default})})(uE);var jY=uE.exports,vY=Za&&Za.__extends||function(){var t=function(s,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,r){a.__proto__=r}||function(a,r){for(var i in r)r.hasOwnProperty(i)&&(a[i]=r[i])},t(s,n)};return function(s,n){t(s,n);function a(){this.constructor=s}s.prototype=n===null?Object.create(n):(a.prototype=n.prototype,new a)}}(),qx=Za&&Za.__assign||function(){return qx=Object.assign||function(t){for(var s,n=1,a=arguments.length;n<a;n++){s=arguments[n];for(var r in s)Object.prototype.hasOwnProperty.call(s,r)&&(t[r]=s[r])}return t},qx.apply(this,arguments)},yY=Za&&Za.__spreadArrays||function(){for(var t=0,s=0,n=arguments.length;s<n;s++)t+=arguments[s].length;for(var a=Array(t),r=0,s=0;s<n;s++)for(var i=arguments[s],l=0,c=i.length;l<c;l++,r++)a[r]=i[l];return a},Jp=Za&&Za.__importDefault||function(t){return t&&t.__esModule?t:{default:t}},Qr=Jp(N),NY=Jp(eo),Zd=Jp(gY),h1=Jp(jY),bY=function(t){vY(s,t);function s(n){var a=t.call(this,n)||this;a.dirtyProps=["modules","formats","bounds","theme","children"],a.cleanProps=["id","className","style","placeholder","tabIndex","onChange","onChangeSelection","onFocus","onBlur","onKeyPress","onKeyDown","onKeyUp"],a.state={generation:0},a.selection=null,a.onEditorChange=function(i,l,c,o){var d,h,u,m;i==="text-change"?(h=(d=a).onEditorChangeText)===null||h===void 0||h.call(d,a.editor.root.innerHTML,l,o,a.unprivilegedEditor):i==="selection-change"&&((m=(u=a).onEditorChangeSelection)===null||m===void 0||m.call(u,l,o,a.unprivilegedEditor))};var r=a.isControlled()?n.value:n.defaultValue;return a.value=r??"",a}return s.prototype.validateProps=function(n){var a;if(Qr.default.Children.count(n.children)>1)throw new Error("The Quill editing area can only be composed of a single React element.");if(Qr.default.Children.count(n.children)){var r=Qr.default.Children.only(n.children);if(((a=r)===null||a===void 0?void 0:a.type)==="textarea")throw new Error("Quill does not support editing on a <textarea>. Use a <div> instead.")}if(this.lastDeltaChangeSet&&n.value===this.lastDeltaChangeSet)throw new Error("You are passing the `delta` object from the `onChange` event back as `value`. You most probably want `editor.getContents()` instead. See: https://github.com/zenoamaro/react-quill#using-deltas")},s.prototype.shouldComponentUpdate=function(n,a){var r=this,i;if(this.validateProps(n),!this.editor||this.state.generation!==a.generation)return!0;if("value"in n){var l=this.getEditorContents(),c=(i=n.value,i??"");this.isEqualValue(c,l)||this.setEditorContents(this.editor,c)}return n.readOnly!==this.props.readOnly&&this.setEditorReadOnly(this.editor,n.readOnly),yY(this.cleanProps,this.dirtyProps).some(function(o){return!Zd.default(n[o],r.props[o])})},s.prototype.shouldComponentRegenerate=function(n){var a=this;return this.dirtyProps.some(function(r){return!Zd.default(n[r],a.props[r])})},s.prototype.componentDidMount=function(){this.instantiateEditor(),this.setEditorContents(this.editor,this.getEditorContents())},s.prototype.componentWillUnmount=function(){this.destroyEditor()},s.prototype.componentDidUpdate=function(n,a){var r=this;if(this.editor&&this.shouldComponentRegenerate(n)){var i=this.editor.getContents(),l=this.editor.getSelection();this.regenerationSnapshot={delta:i,selection:l},this.setState({generation:this.state.generation+1}),this.destroyEditor()}if(this.state.generation!==a.generation){var c=this.regenerationSnapshot,i=c.delta,o=c.selection;delete this.regenerationSnapshot,this.instantiateEditor();var d=this.editor;d.setContents(i),x1(function(){return r.setEditorSelection(d,o)})}},s.prototype.instantiateEditor=function(){this.editor?this.hookEditor(this.editor):this.editor=this.createEditor(this.getEditingArea(),this.getEditorConfig())},s.prototype.destroyEditor=function(){this.editor&&this.unhookEditor(this.editor)},s.prototype.isControlled=function(){return"value"in this.props},s.prototype.getEditorConfig=function(){return{bounds:this.props.bounds,formats:this.props.formats,modules:this.props.modules,placeholder:this.props.placeholder,readOnly:this.props.readOnly,scrollingContainer:this.props.scrollingContainer,tabIndex:this.props.tabIndex,theme:this.props.theme}},s.prototype.getEditor=function(){if(!this.editor)throw new Error("Accessing non-instantiated editor");return this.editor},s.prototype.createEditor=function(n,a){var r=new h1.default(n,a);return a.tabIndex!=null&&this.setEditorTabIndex(r,a.tabIndex),this.hookEditor(r),r},s.prototype.hookEditor=function(n){this.unprivilegedEditor=this.makeUnprivilegedEditor(n),n.on("editor-change",this.onEditorChange)},s.prototype.unhookEditor=function(n){n.off("editor-change",this.onEditorChange)},s.prototype.getEditorContents=function(){return this.value},s.prototype.getEditorSelection=function(){return this.selection},s.prototype.isDelta=function(n){return n&&n.ops},s.prototype.isEqualValue=function(n,a){return this.isDelta(n)&&this.isDelta(a)?Zd.default(n.ops,a.ops):Zd.default(n,a)},s.prototype.setEditorContents=function(n,a){var r=this;this.value=a;var i=this.getEditorSelection();typeof a=="string"?n.setContents(n.clipboard.convert(a)):n.setContents(a),x1(function(){return r.setEditorSelection(n,i)})},s.prototype.setEditorSelection=function(n,a){if(this.selection=a,a){var r=n.getLength();a.index=Math.max(0,Math.min(a.index,r-1)),a.length=Math.max(0,Math.min(a.length,r-1-a.index)),n.setSelection(a)}},s.prototype.setEditorTabIndex=function(n,a){var r,i;!((i=(r=n)===null||r===void 0?void 0:r.scroll)===null||i===void 0)&&i.domNode&&(n.scroll.domNode.tabIndex=a)},s.prototype.setEditorReadOnly=function(n,a){a?n.disable():n.enable()},s.prototype.makeUnprivilegedEditor=function(n){var a=n;return{getHTML:function(){return a.root.innerHTML},getLength:a.getLength.bind(a),getText:a.getText.bind(a),getContents:a.getContents.bind(a),getSelection:a.getSelection.bind(a),getBounds:a.getBounds.bind(a)}},s.prototype.getEditingArea=function(){if(!this.editingArea)throw new Error("Instantiating on missing editing area");var n=NY.default.findDOMNode(this.editingArea);if(!n)throw new Error("Cannot find element for editing area");if(n.nodeType===3)throw new Error("Editing area cannot be a text node");return n},s.prototype.renderEditingArea=function(){var n=this,a=this.props,r=a.children,i=a.preserveWhitespace,l=this.state.generation,c={key:l,ref:function(o){n.editingArea=o}};return Qr.default.Children.count(r)?Qr.default.cloneElement(Qr.default.Children.only(r),c):i?Qr.default.createElement("pre",qx({},c)):Qr.default.createElement("div",qx({},c))},s.prototype.render=function(){var n;return Qr.default.createElement("div",{id:this.props.id,style:this.props.style,key:this.state.generation,className:"quill "+(n=this.props.className,n??""),onKeyPress:this.props.onKeyPress,onKeyDown:this.props.onKeyDown,onKeyUp:this.props.onKeyUp},this.renderEditingArea())},s.prototype.onEditorChangeText=function(n,a,r,i){var l,c;if(this.editor){var o=this.isDelta(this.value)?i.getContents():i.getHTML();o!==this.getEditorContents()&&(this.lastDeltaChangeSet=a,this.value=o,(c=(l=this.props).onChange)===null||c===void 0||c.call(l,n,a,r,i))}},s.prototype.onEditorChangeSelection=function(n,a,r){var i,l,c,o,d,h;if(this.editor){var u=this.getEditorSelection(),m=!u&&n,p=u&&!n;Zd.default(n,u)||(this.selection=n,(l=(i=this.props).onChangeSelection)===null||l===void 0||l.call(i,n,a,r),m?(o=(c=this.props).onFocus)===null||o===void 0||o.call(c,n,a,r):p&&((h=(d=this.props).onBlur)===null||h===void 0||h.call(d,u,a,r)))}},s.prototype.focus=function(){this.editor&&this.editor.focus()},s.prototype.blur=function(){this.editor&&(this.selection=null,this.editor.blur())},s.displayName="React Quill",s.Quill=h1.default,s.defaultProps={theme:"snow",modules:{},readOnly:!1},s}(Qr.default.Component);function x1(t){Promise.resolve().then(t)}var wY=bY;const Pa=yv(wY);var B0="Checkbox",[SY,VJ]=Yn(B0),[CY,kY]=SY(B0),mE=N.forwardRef((t,s)=>{const{__scopeCheckbox:n,name:a,checked:r,defaultChecked:i,required:l,disabled:c,value:o="on",onCheckedChange:d,form:h,...u}=t,[m,p]=N.useState(null),g=Ht(s,j=>p(j)),x=N.useRef(!1),v=m?h||!!m.closest("form"):!0,[y=!1,f]=br({prop:r,defaultProp:i,onChange:d}),b=N.useRef(y);return N.useEffect(()=>{const j=m==null?void 0:m.form;if(j){const S=()=>f(b.current);return j.addEventListener("reset",S),()=>j.removeEventListener("reset",S)}},[m,f]),e.jsxs(CY,{scope:n,state:y,disabled:c,children:[e.jsx(Dt.button,{type:"button",role:"checkbox","aria-checked":Ll(y)?"mixed":y,"aria-required":l,"data-state":pE(y),"data-disabled":c?"":void 0,disabled:c,value:o,...u,ref:g,onKeyDown:tt(t.onKeyDown,j=>{j.key==="Enter"&&j.preventDefault()}),onClick:tt(t.onClick,j=>{f(S=>Ll(S)?!0:!S),v&&(x.current=j.isPropagationStopped(),x.current||j.stopPropagation())})}),v&&e.jsx(AY,{control:m,bubbles:!x.current,name:a,value:o,checked:y,required:l,disabled:c,form:h,style:{transform:"translateX(-100%)"},defaultChecked:Ll(i)?!1:i})]})});mE.displayName=B0;var hE="CheckboxIndicator",xE=N.forwardRef((t,s)=>{const{__scopeCheckbox:n,forceMount:a,...r}=t,i=kY(hE,n);return e.jsx(Va,{present:a||Ll(i.state)||i.state===!0,children:e.jsx(Dt.span,{"data-state":pE(i.state),"data-disabled":i.disabled?"":void 0,...r,ref:s,style:{pointerEvents:"none",...t.style}})})});xE.displayName=hE;var AY=t=>{const{control:s,checked:n,bubbles:a=!0,defaultChecked:r,...i}=t,l=N.useRef(null),c=qp(n),o=fp(s);N.useEffect(()=>{const h=l.current,u=window.HTMLInputElement.prototype,p=Object.getOwnPropertyDescriptor(u,"checked").set;if(c!==n&&p){const g=new Event("click",{bubbles:a});h.indeterminate=Ll(n),p.call(h,Ll(n)?!1:n),h.dispatchEvent(g)}},[c,n,a]);const d=N.useRef(Ll(n)?!1:n);return e.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:r??d.current,...i,tabIndex:-1,ref:l,style:{...t.style,...o,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})};function Ll(t){return t==="indeterminate"}function pE(t){return Ll(t)?"indeterminate":t?"checked":"unchecked"}var fE=mE,PY=xE;const hs=N.forwardRef(({className:t,...s},n)=>e.jsx(fE,{ref:n,className:Je("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",t),...s,children:e.jsx(PY,{className:Je("flex items-center justify-center text-current"),children:e.jsx(ir,{className:"h-4 w-4"})})}));hs.displayName=fE.displayName;const gE=({isOpen:t,onClose:s,assignedMedia:n=[],onAssignMedia:a})=>{const[r,i]=N.useState(""),[l,c]=N.useState("all"),[o,d]=N.useState([]),{data:h=[],isLoading:u}=ke({queryKey:["/api/media",r,l],queryFn:()=>{const f=new URLSearchParams;return r&&f.append("search",r),l!=="all"&&f.append("category",l),$n(`/api/media?${f}`).then(b=>b.json())},enabled:t}),m=f=>f.startsWith("image/")?e.jsx(Vn,{className:"h-5 w-5 text-blue-500"}):f.startsWith("video/")?e.jsx(ca,{className:"h-5 w-5 text-green-500"}):f.startsWith("audio/")?e.jsx(Ue,{className:"h-5 w-5 text-purple-500"}):e.jsx(xt,{className:"h-5 w-5 text-orange-500"}),p=f=>f.startsWith("image/")?"image":f.startsWith("video/")?"video":f.startsWith("audio/")?"audio":"document",g=f=>{if(f===0)return"0 Bytes";const b=1024,j=["Bytes","KB","MB","GB"],S=Math.floor(Math.log(f)/Math.log(b));return parseFloat((f/Math.pow(b,S)).toFixed(2))+" "+j[S]},x=f=>{d(b=>b.some(S=>S.id===f.id)?b.filter(S=>S.id!==f.id):[...b,f])},v=()=>{const f=o.map(b=>({id:b.id,name:b.original_name,type:p(b.mime_type),size:g(b.file_size),url:b.url}));a([...n,...f]),d([]),s()},y=f=>n.some(b=>b.id===f);return t?e.jsx(kt,{open:t,onOpenChange:s,children:e.jsxs(wt,{className:"max-w-4xl max-h-[80vh] overflow-hidden flex flex-col",children:[e.jsxs(St,{children:[e.jsx(Ct,{children:"Assign Media Files"}),e.jsx(us,{children:"Select images, videos, or documents to attach to your newsletter or press release"})]}),e.jsxs("div",{className:"flex gap-4 py-4",children:[e.jsx("div",{className:"flex-1",children:e.jsxs("div",{className:"relative",children:[e.jsx(Bs,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),e.jsx($,{placeholder:"Search media files...",value:r,onChange:f=>i(f.target.value),className:"pl-10"})]})}),e.jsxs("select",{value:l,onChange:f=>c(f.target.value),className:"px-3 py-2 border rounded-md bg-background",children:[e.jsx("option",{value:"all",children:"All Categories"}),e.jsx("option",{value:"images",children:"Images"}),e.jsx("option",{value:"videos",children:"Videos"}),e.jsx("option",{value:"documents",children:"Documents"}),e.jsx("option",{value:"audio",children:"Audio"})]})]}),e.jsx("div",{className:"flex-1 overflow-y-auto",children:u?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin w-8 h-8 border-4 border-primary border-t-transparent rounded-full"})}):h.length>0?e.jsx("div",{className:"grid gap-3",children:h.map(f=>e.jsxs("div",{className:`flex items-center justify-between p-4 border rounded-lg hover:bg-muted/50 transition-colors ${o.some(b=>b.id===f.id)?"border-primary bg-primary/5":""} ${y(f.id)?"opacity-50":""}`,children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(hs,{checked:o.some(b=>b.id===f.id),onCheckedChange:()=>x(f),disabled:y(f.id)}),m(f.mime_type),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("p",{className:"font-medium truncate",children:f.original_name}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:[g(f.file_size),"  ",f.category]}),f.tags&&f.tags.length>0&&e.jsxs("div",{className:"flex gap-1 mt-1",children:[f.tags.slice(0,3).map((b,j)=>e.jsx(X,{variant:"secondary",className:"text-xs",children:b},j)),f.tags.length>3&&e.jsxs(X,{variant:"secondary",className:"text-xs",children:["+",f.tags.length-3]})]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[y(f.id)&&e.jsx(X,{variant:"outline",className:"text-xs",children:"Already Assigned"}),e.jsx(E,{variant:"ghost",size:"sm",children:e.jsx(Ns,{className:"h-4 w-4"})})]})]},f.id))}):e.jsxs("div",{className:"text-center py-12 text-muted-foreground",children:[e.jsx(Vn,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),e.jsx("p",{children:"No media files found"}),e.jsx("p",{className:"text-sm",children:"Upload media files from the Media Management tab"})]})}),e.jsxs("div",{className:"flex justify-between items-center pt-4 border-t",children:[e.jsxs("p",{className:"text-sm text-muted-foreground",children:[o.length," file(s) selected"]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(E,{variant:"outline",onClick:s,children:"Cancel"}),e.jsxs(E,{onClick:v,disabled:o.length===0,children:[e.jsx(st,{className:"h-4 w-4 mr-2"}),"Assign Selected (",o.length,")"]})]})]})]})}):null};function TY({isOpen:t,onClose:s,onUpload:n}){const[a,r]=N.useState(null),[i,l]=N.useState([]),[c,o]=N.useState(!1),d=lt.useRef(null),h=m=>{var g;const p=(g=m.target.files)==null?void 0:g[0];if(p&&p.type==="text/csv"){r(p);const x=new FileReader;x.onload=v=>{var b;const f=((b=v.target)==null?void 0:b.result).split(`
`).map(j=>j.split(",").map(S=>S.trim()));l(f.slice(0,5))},x.readAsText(p)}},u=async()=>{if(!a)return;o(!0);const m=new FileReader;m.onload=p=>{var f;const x=((f=p.target)==null?void 0:f.result).split(`
`).map(b=>b.split(",").map(j=>j.trim()));x[0];const y=x.slice(1).filter(b=>b.length>=2&&b[0]&&b[1]).map(b=>({name:b[0]||"",email:b[1]||"",organization:b[2]||"",category:b[3]||"general",website:b[4]||"",phone:b[5]||"",address:b[6]||""}));n(y),o(!1),s()},m.readAsText(a)};return t?e.jsx(kt,{open:t,onOpenChange:s,children:e.jsxs(wt,{className:"max-w-2xl",children:[e.jsxs(St,{children:[e.jsx(Ct,{children:"Upload Recipients from CSV"}),e.jsx(us,{children:'Upload a CSV file to add multiple recipients. Default category will be "general" if not specified.'})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"flex justify-center",children:e.jsxs(E,{variant:"outline",size:"sm",onClick:()=>{const g=[["Name","Email","Organization","Category","Website","Phone","Address"],...[["John Smith","john@radiostation.com","Power 105.1 FM","radio_stations","https://power105.com","+1-555-0101","123 Radio Ave, NYC"],["Sarah Johnson","sarah@musicblog.com","Indie Music Weekly","music_blogs","https://indiemusicweekly.com","+1-555-0102","456 Blog St, LA"],["Mike Davis","mike@festival.org","Summer Music Festival","festival_organizers","https://summerfest.org","+1-555-0103","789 Event Blvd, Chicago"]]].map(f=>f.map(b=>`"${b}"`).join(",")).join(`
`),x=new Blob([g],{type:"text/csv"}),v=window.URL.createObjectURL(x),y=document.createElement("a");y.href=v,y.download="recipient_template.csv",document.body.appendChild(y),y.click(),document.body.removeChild(y),window.URL.revokeObjectURL(v)},children:[e.jsx(Cs,{className:"h-4 w-4 mr-2"}),"Download CSV Template"]})}),e.jsxs("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-6 text-center",children:[e.jsx("input",{ref:d,type:"file",accept:".csv",onChange:h,className:"hidden"}),e.jsx(E,{onClick:()=>{var m;return(m=d.current)==null?void 0:m.click()},children:"Select CSV File"}),e.jsx("p",{className:"text-sm text-gray-600 mt-2",children:"Expected format: Name, Email, Organization, Category, Website, Phone, Address"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:'Category defaults to "general" if not specified'})]}),i.length>0&&e.jsxs("div",{className:"space-y-2",children:[e.jsx("h4",{className:"font-medium",children:"Preview (First 5 rows):"}),e.jsx("div",{className:"border rounded-lg overflow-hidden",children:e.jsx("table",{className:"w-full text-sm",children:e.jsx("tbody",{children:i.map((m,p)=>e.jsx("tr",{className:p===0?"bg-gray-50 font-medium":"",children:m.map((g,x)=>e.jsx("td",{className:"px-2 py-1 border-r",children:g},x))},p))})})})]}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(E,{variant:"outline",onClick:s,children:"Cancel"}),e.jsx(E,{onClick:u,disabled:!a||c,children:c?"Processing...":"Upload Recipients"})]})]})]})}):null}function EY({isOpen:t,onClose:s,onAdd:n}){const[a,r]=N.useState({name:"",email:"",organization:"",category:"general",website:"",phone:"",address:""}),{data:i=[]}=ke({queryKey:["/api/recipient-categories"],queryFn:()=>xe("/api/recipient-categories").then(c=>c.json()).then(c=>c.success?c.data:[])}),l=()=>{a.name&&a.email&&a.category&&(n(a),r({name:"",email:"",organization:"",category:"general",website:"",phone:"",address:""}),s())};return t?e.jsx(kt,{open:t,onOpenChange:s,children:e.jsxs(wt,{className:"max-w-md",children:[e.jsxs(St,{children:[e.jsx(Ct,{children:"Add New Recipient"}),e.jsx(us,{children:"Add a new industry contact to your recipient database"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(q,{htmlFor:"name",children:"Full Name"}),e.jsx($,{id:"name",value:a.name||"",onChange:c=>r(o=>({...o,name:c.target.value})),placeholder:"Contact's full name"})]}),e.jsxs("div",{children:[e.jsx(q,{htmlFor:"email",children:"Email Address"}),e.jsx($,{id:"email",type:"email",value:a.email||"",onChange:c=>r(o=>({...o,email:c.target.value})),placeholder:"contact@example.com"})]}),e.jsxs("div",{children:[e.jsx(q,{htmlFor:"organization",children:"Organization"}),e.jsx($,{id:"organization",value:a.organization||"",onChange:c=>r(o=>({...o,organization:c.target.value})),placeholder:"Company or organization name"})]}),e.jsxs("div",{children:[e.jsx(q,{htmlFor:"category",children:"Category"}),e.jsxs(Re,{value:a.category||"",onValueChange:c=>r(o=>({...o,category:c})),children:[e.jsx(Me,{children:e.jsx(Oe,{placeholder:"Select category"})}),e.jsx(_e,{children:i.map(c=>e.jsx(U,{value:c.category_name,children:c.display_name},c.id))})]})]}),e.jsxs("div",{children:[e.jsx(q,{htmlFor:"website",children:"Website (Optional)"}),e.jsx($,{id:"website",value:a.website||"",onChange:c=>r(o=>({...o,website:c.target.value})),placeholder:"https://website.com"})]}),e.jsxs("div",{children:[e.jsx(q,{htmlFor:"phone",children:"Phone (Optional)"}),e.jsx($,{id:"phone",value:a.phone||"",onChange:c=>r(o=>({...o,phone:c.target.value})),placeholder:"+1 (555) 123-4567"})]}),e.jsxs("div",{className:"flex justify-end gap-2 pt-4",children:[e.jsx(E,{variant:"outline",onClick:s,children:"Cancel"}),e.jsxs(E,{onClick:l,children:[e.jsx(st,{className:"h-4 w-4 mr-2"}),"Add Recipient"]})]})]})]})}):null}function jE({userRole:t,userId:s}){const{toast:n}=nt(),a=Tt(),[r,i]=N.useState({title:"",content:"",type:"general",targetArtistId:"",scheduledFor:""}),[l,c]=N.useState(!1),[o,d]=N.useState([]),[h,u]=N.useState([]),[m,p]=N.useState([]),[g,x]=N.useState(!0),[v,y]=N.useState([]),[f,b]=N.useState(!1),[j,S]=N.useState(!1),[k,T]=N.useState(!1),[A,C]=N.useState(!1),[w,P]=N.useState(""),{data:M,isLoading:I}=ke({queryKey:["/api/newsletter/stats"],queryFn:()=>xe("/api/newsletter/stats").then(F=>F.json()),select:F=>({totalSubscribers:(F==null?void 0:F.totalSubscribers)||0,fanSubscribers:(F==null?void 0:F.fanSubscribers)||0,totalNewsletters:(F==null?void 0:F.totalNewsletters)||0,recentActivity:(F==null?void 0:F.recentActivity)||[],artistStats:(F==null?void 0:F.artistStats)||{}})}),{data:W=[]}=ke({queryKey:["/api/artists"],queryFn:()=>xe("/api/artists").then(F=>F.json()).then(F=>F.filter(K=>K.isManaged))}),{data:_=[]}=ke({queryKey:["/api/recipient-categories"],queryFn:()=>xe("/api/recipient-categories").then(F=>F.json()).then(F=>F.success?F.data:[])});ke({queryKey:["/api/music-genres"],queryFn:()=>xe("/api/music-genres").then(F=>F.json()).then(F=>F.success?F.data:[])});const{data:B=[]}=ke({queryKey:["/api/industry-recipients",w,m,h],queryFn:()=>{const F=new URLSearchParams;return w&&F.append("search",w),m.length>0&&F.append("categoryId",m[0].toString()),h.length>0&&F.append("genreId",h[0].toString()),xe(`/api/industry-recipients?${F}`).then(K=>K.json()).then(K=>K.success?K.data:[])}}),O=Xe({mutationFn:async F=>(await xe("/api/industry-recipients",{method:"POST",body:JSON.stringify(F)})).json(),onSuccess:()=>{a.invalidateQueries({queryKey:["/api/industry-recipients"]}),n({title:"Recipient Added",description:"New industry contact has been added to your database"})}}),z=Xe({mutationFn:async F=>(await xe("/api/industry-recipients/bulk",{method:"POST",body:JSON.stringify({recipients:F})})).json(),onSuccess:F=>{a.invalidateQueries({queryKey:["/api/industry-recipients"]}),n({title:"Bulk Upload Complete",description:`${F.count} recipients have been added to your database`})}});return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold",children:"Newsletter Management"}),e.jsx("p",{className:"text-muted-foreground",children:"Create and manage newsletters with shared recipient lists for managed artists"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(E,{variant:"outline",onClick:()=>S(!0),children:[e.jsx(hr,{className:"h-4 w-4 mr-2"}),"Add Recipient"]}),e.jsxs(E,{variant:"outline",onClick:()=>T(!0),children:[e.jsx(Xs,{className:"h-4 w-4 mr-2"}),"Upload CSV"]})]})]}),e.jsxs(Ut,{defaultValue:"overview",className:"space-y-6",children:[e.jsxs(jt,{className:"grid w-full grid-cols-4",children:[e.jsx(Ne,{value:"overview",children:"Overview"}),e.jsx(Ne,{value:"create",children:"Create Newsletter"}),e.jsxs(Ne,{value:"recipients",children:["Recipients (",B.length,")"]}),e.jsx(Ne,{value:"subscribers",children:"Subscribers"})]}),e.jsx(ge,{value:"create",className:"space-y-6",children:e.jsxs(R,{children:[e.jsxs(Y,{children:[e.jsx(Q,{children:"Create Newsletter"}),e.jsx(rt,{children:"Create newsletters with media attachments and targeted recipient distribution"})]}),e.jsxs(L,{className:"space-y-6",children:[e.jsxs("div",{className:"grid gap-4",children:[e.jsxs("div",{children:[e.jsx(q,{htmlFor:"title",children:"Newsletter Title"}),e.jsx($,{id:"title",value:r.title,onChange:F=>i(K=>({...K,title:F.target.value})),placeholder:"Enter newsletter title"})]}),e.jsxs("div",{children:[e.jsx(q,{htmlFor:"content",children:"Content"}),e.jsx("div",{className:"border rounded-md",children:e.jsx(Pa,{theme:"snow",value:r.content,onChange:F=>i(K=>({...K,content:F})),placeholder:"Enter newsletter content with rich formatting...",modules:{toolbar:[[{header:[1,2,3,!1]}],["bold","italic","underline","strike"],[{color:[]},{background:[]}],[{list:"ordered"},{list:"bullet"}],[{align:[]}],["link","image"],["clean"]]},formats:["header","bold","italic","underline","strike","color","background","list","bullet","align","link","image"],style:{minHeight:"200px"}})})]}),e.jsxs("div",{children:[e.jsx(q,{htmlFor:"type",children:"Newsletter Type"}),e.jsxs(Re,{value:r.type,onValueChange:F=>i(K=>({...K,type:F})),children:[e.jsx(Me,{children:e.jsx(Oe,{})}),e.jsxs(_e,{children:[e.jsx(U,{value:"general",children:"General Newsletter"}),e.jsx(U,{value:"artist-specific",children:"Artist-Specific"}),e.jsx(U,{value:"industry",children:"Industry Update"}),e.jsx(U,{value:"promotional",children:"Promotional"})]})]})]}),r.type==="artist-specific"&&e.jsxs("div",{children:[e.jsx(q,{htmlFor:"targetArtist",children:"Target Artist"}),e.jsxs(Re,{value:r.targetArtistId,onValueChange:F=>i(K=>({...K,targetArtistId:F})),children:[e.jsx(Me,{children:e.jsx(Oe,{placeholder:"Select artist"})}),e.jsx(_e,{children:W.map(F=>{var K;return e.jsx(U,{value:F.userId.toString(),children:((K=F.stageNames)==null?void 0:K[0])||F.fullName||`Artist ${F.userId}`},F.userId)})})]})]})]}),e.jsxs("div",{className:"border rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium",children:"Media Attachments"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Assign images, videos, and documents to this newsletter"})]}),e.jsxs(E,{variant:"outline",onClick:()=>C(!0),children:[e.jsx(st,{className:"h-4 w-4 mr-2"}),"Assign Media"]})]}),v.length>0?e.jsx("div",{className:"grid gap-3",children:v.map(F=>e.jsxs("div",{className:"flex items-center justify-between p-3 border rounded",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[F.type==="image"&&e.jsx(Vn,{className:"h-5 w-5 text-blue-500"}),F.type==="video"&&e.jsx(ca,{className:"h-5 w-5 text-green-500"}),F.type==="document"&&e.jsx(xt,{className:"h-5 w-5 text-orange-500"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-sm",children:F.name}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[F.type,"  ",F.size]})]})]}),e.jsx(E,{variant:"ghost",size:"sm",onClick:()=>y(K=>K.filter(D=>D.id!==F.id)),children:e.jsx(Xt,{className:"h-4 w-4"})})]},F.id))}):e.jsxs("div",{className:"text-center py-6 text-muted-foreground border-2 border-dashed rounded",children:[e.jsx(Vn,{className:"h-8 w-8 mx-auto mb-2 opacity-50"}),e.jsx("p",{className:"text-sm",children:"No media assigned"}),e.jsx("p",{className:"text-xs",children:'Click "Assign Media" to add images, videos, or documents'})]})]}),e.jsxs("div",{className:"border rounded-lg p-4",children:[e.jsx("h4",{className:"font-medium mb-4",children:"Distribution Settings"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(hs,{id:"fanPriority",checked:g,onCheckedChange:F=>x(F===!0)}),e.jsx(q,{htmlFor:"fanPriority",className:"text-sm",children:"Send to fans first (priority distribution)"})]}),e.jsxs("div",{children:[e.jsxs(q,{className:"text-sm font-medium",children:["Selected Recipients: ",o.length]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Go to Recipients tab to select industry contacts"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(hs,{id:"isScheduled",checked:l,onCheckedChange:F=>c(F===!0)}),e.jsx(q,{htmlFor:"isScheduled",className:"text-sm",children:"Schedule for later"})]}),l&&e.jsxs("div",{children:[e.jsx(q,{htmlFor:"scheduledFor",children:"Schedule Date"}),e.jsx($,{id:"scheduledFor",type:"datetime-local",value:r.scheduledFor,onChange:F=>i(K=>({...K,scheduledFor:F.target.value}))})]})]})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsxs(E,{className:"flex-1",children:[e.jsx(vn,{className:"h-4 w-4 mr-2"}),l?"Schedule Newsletter":"Send Now"]}),e.jsxs(E,{variant:"outline",children:[e.jsx(js,{className:"h-4 w-4 mr-2"}),"Save Draft"]})]})]})]})}),e.jsxs(ge,{value:"overview",className:"space-y-6",children:[e.jsxs("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:[e.jsxs(R,{children:[e.jsxs(Y,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(Q,{className:"text-sm font-medium",children:"Total Subscribers"}),e.jsx(Ze,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(L,{children:[e.jsx("div",{className:"text-2xl font-bold",children:(M==null?void 0:M.totalSubscribers)||0}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:["+",(M==null?void 0:M.fanSubscribers)||0," fan subscribers"]})]})]}),e.jsxs(R,{children:[e.jsxs(Y,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(Q,{className:"text-sm font-medium",children:"Industry Recipients"}),e.jsx(wn,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(L,{children:[e.jsx("div",{className:"text-2xl font-bold",children:B.length}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:["+",_.length," categories"]})]})]}),e.jsxs(R,{children:[e.jsxs(Y,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(Q,{className:"text-sm font-medium",children:"Total Newsletters"}),e.jsx(vn,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(L,{children:[e.jsx("div",{className:"text-2xl font-bold",children:(M==null?void 0:M.totalNewsletters)||0}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Sent this month"})]})]}),e.jsxs(R,{children:[e.jsxs(Y,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(Q,{className:"text-sm font-medium",children:"Managed Artists"}),e.jsx(Ze,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(L,{children:[e.jsx("div",{className:"text-2xl font-bold",children:W.length}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Active newsletter senders"})]})]})]}),e.jsxs(R,{children:[e.jsx(Y,{children:e.jsx(Q,{children:"Recent Newsletter Activity"})}),e.jsx(L,{children:M!=null&&M.recentActivity&&M.recentActivity.length>0?e.jsx("div",{className:"space-y-4",children:M.recentActivity.map(F=>e.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:F.title}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Sent ",new Date(F.sentAt).toLocaleDateString(),"  ",F.recipients," recipients"]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:"text-sm font-medium",children:[(F.openRate*100).toFixed(1),"% open rate"]}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[F.openCount,"/",F.sentCount," opened"]})]})]},F.id))}):e.jsx("p",{className:"text-muted-foreground text-center py-8",children:"No recent newsletter activity"})})]})]}),e.jsx(ge,{value:"recipients",className:"space-y-6",children:e.jsxs(R,{children:[e.jsxs(Y,{children:[e.jsx(Q,{children:"Industry Recipients Database"}),e.jsx(rt,{children:"Manage shared recipient lists for newsletters and press releases. Recipients can be filtered by category and genre."})]}),e.jsxs(L,{className:"space-y-4",children:[e.jsxs("div",{className:"flex gap-4",children:[e.jsx("div",{className:"flex-1",children:e.jsx($,{placeholder:"Search recipients by name, organization, or email...",value:w,onChange:F=>P(F.target.value)})}),e.jsxs(E,{variant:"outline",onClick:()=>b(!0),children:[e.jsx(to,{className:"h-4 w-4 mr-2"}),"Filters"]})]}),e.jsx("div",{className:"space-y-2 max-h-96 overflow-y-auto",children:B.map(F=>e.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg hover:bg-gray-50",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(hs,{checked:o.includes(F.id),onCheckedChange:K=>{d(K?[...o,F.id]:o.filter(D=>D!==F.id))}}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:F.name}),e.jsx("p",{className:"text-sm text-gray-500",children:F.email}),F.organization&&e.jsx("p",{className:"text-xs text-gray-400",children:F.organization})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(X,{variant:"outline",children:F.category}),F.phone&&e.jsx(X,{variant:"secondary",className:"text-xs",children:"Phone"})]})]},F.id))}),B.length===0&&e.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[e.jsx(Ze,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),e.jsx("p",{children:"No recipients found"}),e.jsx("p",{className:"text-sm",children:"Add industry contacts to build your recipient database"})]})]})]})}),e.jsx(ge,{value:"subscribers",className:"space-y-6",children:e.jsx("div",{className:"grid gap-6",children:e.jsxs(R,{children:[e.jsxs(Y,{children:[e.jsx(Q,{children:"Subscriber Management"}),e.jsx(rt,{children:"View and manage newsletter subscribers by artist interests. Fans can subscribe to specific managed artists."})]}),e.jsx(L,{children:e.jsx("div",{className:"space-y-4",children:W.map(F=>{var K,D,G,H,V;return e.jsx("div",{className:"p-4 border rounded-lg",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium",children:((K=F.stageNames)==null?void 0:K[0])||F.fullName||`Artist ${F.userId}`}),e.jsx("p",{className:"text-sm text-gray-500",children:"Managed Artist"})]}),e.jsxs("div",{className:"text-sm text-muted-foreground",children:[e.jsxs("p",{children:["Subscribers: ",((G=(D=M==null?void 0:M.artistStats)==null?void 0:D[F.userId])==null?void 0:G.subscriberCount)||0]}),e.jsxs("p",{children:["Last Newsletter: ",((V=(H=M==null?void 0:M.artistStats)==null?void 0:H[F.userId])==null?void 0:V.lastNewsletter)||"Never"]})]})]})},F.userId)})})})]})})})]}),e.jsx(EY,{isOpen:j,onClose:()=>S(!1),onAdd:F=>O.mutate(F)}),e.jsx(TY,{isOpen:k,onClose:()=>T(!1),onUpload:F=>z.mutate(F)}),e.jsx(gE,{isOpen:A,onClose:()=>C(!1),assignedMedia:v,onAssignMedia:y})]})}function vE({userRole:t,userId:s}){var ne,ue;const[n,a]=N.useState(null),[r,i]=N.useState(!1),[l,c]=N.useState(!1),[o,d]=N.useState(!1),[h,u]=N.useState([]),[m,p]=N.useState({title:"",content:"",releaseType:"song",primaryArtistId:"",releaseDate:"",customContent:"",distributionChannels:[],targetRegions:[]});N.useState([]);const[g,x]=N.useState([]),[v,y]=N.useState([]);N.useState(!0),N.useState(!1);const[f,b]=N.useState(""),[j,S]=N.useState(!1),[k,T]=N.useState("all"),[A,C]=N.useState("all"),{toast:w}=nt(),P=Tt(),{data:M,isLoading:I}=ke({queryKey:["/api/press-releases",A,k],queryFn:async()=>{const te=new URLSearchParams;return A!=="all"&&te.append("artistId",A),k!=="all"&&te.append("status",k),await xe(`/api/press-releases?${te.toString()}`)}}),W=Array.isArray(M)?M:[],{data:_}=ke({queryKey:["/api/artists"],queryFn:()=>xe("/api/artists")}),B=Array.isArray(_)?_:[];ke({queryKey:["/api/recipient-categories"],queryFn:()=>xe("/api/recipient-categories").then(te=>te.json()).then(te=>te.success?te.data:[])}),ke({queryKey:["/api/music-genres"],queryFn:()=>xe("/api/music-genres").then(te=>te.json()).then(te=>te.success?te.data:[])}),ke({queryKey:["/api/industry-recipients",f,v,g],queryFn:()=>{const te=new URLSearchParams;return f&&te.append("search",f),v.length>0&&te.append("categoryId",v[0].toString()),g.length>0&&te.append("genreId",g[0].toString()),xe(`/api/industry-recipients?${te}`).then(Ae=>Ae.json()).then(Ae=>Ae.success?Ae.data:[])}});const O=Xe({mutationFn:te=>xe("/api/press-releases",{method:"POST",body:JSON.stringify(te)}),onSuccess:()=>{P.invalidateQueries({queryKey:["/api/press-releases"]}),S(!1),p({title:"",content:"",releaseType:"song",primaryArtistId:"",releaseDate:"",customContent:"",distributionChannels:[],targetRegions:[]}),w({title:"Press Release Created",description:"Press release created successfully"})},onError:te=>{w({title:"Creation Failed",description:te.message||"Failed to create press release",variant:"destructive"})}}),z=Xe({mutationFn:te=>xe("/api/press-releases/auto-generate",{method:"POST",body:JSON.stringify(te)}),onSuccess:()=>{P.invalidateQueries({queryKey:["/api/press-releases"]}),w({title:"Press Release Generated",description:"Automatic press release generated successfully"})},onError:te=>{w({title:"Generation Failed",description:te.message||"Failed to auto-generate press release",variant:"destructive"})}}),F=Xe({mutationFn:te=>xe(`/api/press-releases/${te}/publish`,{method:"POST"}),onSuccess:()=>{P.invalidateQueries({queryKey:["/api/press-releases"]}),w({title:"Press Release Published",description:"Press release published and distributed successfully"})},onError:te=>{w({title:"Publication Failed",description:te.message||"Failed to publish press release",variant:"destructive"})}}),K=()=>{if(!m.title||!m.content||!m.primaryArtistId){w({title:"Missing Information",description:"Please fill in all required fields",variant:"destructive"});return}O.mutate({title:m.title,content:m.content,releaseType:m.releaseType,primaryArtistId:parseInt(m.primaryArtistId),releaseDate:m.releaseDate?new Date(m.releaseDate):void 0,customContent:m.customContent,distributionChannels:m.distributionChannels,targetRegions:m.targetRegions,status:"draft"})},D=()=>{if(!m.primaryArtistId||!m.releaseType){w({title:"Missing Information",description:"Please select artist and release type",variant:"destructive"});return}z.mutate({releaseType:m.releaseType,primaryArtistId:parseInt(m.primaryArtistId),releaseDate:m.releaseDate?new Date(m.releaseDate):void 0,customContent:m.customContent,distributionChannels:m.distributionChannels,targetRegions:m.targetRegions})},G=te=>{F.mutate(te.id)},H=te=>{a(te),i(!0)},V=te=>{a(te),p({title:te.title,content:te.content,releaseType:te.type,primaryArtistId:te.primaryArtistId.toString(),releaseDate:te.releaseDate||"",customContent:te.content,distributionChannels:te.distributionChannels||[],targetRegions:te.targetRegions||[]}),c(!0)},se=te=>{switch(te){case"song":case"song_release":return e.jsx(Ue,{className:"h-4 w-4"});case"album":case"album_release":return e.jsx(d6,{className:"h-4 w-4"});case"tour":case"tour_announcement":return e.jsx(dt,{className:"h-4 w-4"});case"collaboration":return e.jsx(cn,{className:"h-4 w-4"});default:return e.jsx(xt,{className:"h-4 w-4"})}},Z=te=>{const Ae={draft:"secondary",published:"default",scheduled:"outline"};return e.jsx(X,{variant:Ae[te]||"secondary",children:te.charAt(0).toUpperCase()+te.slice(1)})},le=B.filter(te=>te.isManaged);return I?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin w-8 h-8 border-4 border-primary border-t-transparent rounded-full"})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold",children:"Press Release Management"}),e.jsx("p",{className:"text-muted-foreground",children:"Create and manage press releases for managed artists"})]}),e.jsx("div",{className:"w-full sm:w-auto",children:e.jsxs(E,{onClick:()=>S(!j),className:"flex items-center justify-center gap-2 w-full sm:w-auto",children:[e.jsx(st,{className:"h-4 w-4"}),e.jsx("span",{className:"hidden xs:inline",children:"New Press Release"}),e.jsx("span",{className:"xs:hidden",children:"New Release"})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsxs(Re,{value:k,onValueChange:T,children:[e.jsx(Me,{className:"w-full",children:e.jsx(Oe,{placeholder:"Filter by status"})}),e.jsxs(_e,{children:[e.jsx(U,{value:"all",children:"All Status"}),e.jsx(U,{value:"draft",children:"Draft"}),e.jsx(U,{value:"published",children:"Published"}),e.jsx(U,{value:"scheduled",children:"Scheduled"})]})]}),e.jsxs(Re,{value:A,onValueChange:C,children:[e.jsx(Me,{className:"w-full",children:e.jsx(Oe,{placeholder:"Filter by artist"})}),e.jsxs(_e,{children:[e.jsx(U,{value:"all",children:"All Artists"}),le.map(te=>{var Ae;return e.jsx(U,{value:te.userId.toString(),children:((Ae=te.stageNames)==null?void 0:Ae[0])||te.fullName},te.userId)})]})]})]}),j&&e.jsxs(R,{children:[e.jsxs(Y,{children:[e.jsx(Q,{children:"Create Press Release"}),e.jsx(rt,{children:"Manually create or auto-generate a press release for managed artists"})]}),e.jsxs(L,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium",children:"Artist"}),e.jsxs(Re,{value:m.primaryArtistId,onValueChange:te=>p({...m,primaryArtistId:te}),children:[e.jsx(Me,{children:e.jsx(Oe,{placeholder:"Select artist"})}),e.jsx(_e,{children:le.map(te=>{var Ae;return e.jsx(U,{value:te.userId.toString(),children:((Ae=te.stageNames)==null?void 0:Ae[0])||te.fullName},te.userId)})})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium",children:"Release Type"}),e.jsxs(Re,{value:m.releaseType,onValueChange:te=>p({...m,releaseType:te}),children:[e.jsx(Me,{children:e.jsx(Oe,{})}),e.jsxs(_e,{children:[e.jsx(U,{value:"song",children:"Song Release"}),e.jsx(U,{value:"album",children:"Album Release"}),e.jsx(U,{value:"tour",children:"Tour Announcement"}),e.jsx(U,{value:"collaboration",children:"Collaboration"}),e.jsx(U,{value:"achievement",children:"Achievement"})]})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium",children:"Title"}),e.jsx("input",{type:"text",className:"w-full mt-1 px-3 py-2 border rounded-md",value:m.title,onChange:te=>p({...m,title:te.target.value}),placeholder:"Press release title"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium",children:"Content"}),e.jsx("div",{className:"border rounded-md mt-1",children:e.jsx(Pa,{theme:"snow",value:m.content,onChange:te=>p({...m,content:te}),placeholder:"Press release content with rich formatting (leave empty for auto-generation)...",modules:{toolbar:[[{header:[1,2,3,!1]}],["bold","italic","underline","strike"],[{color:[]},{background:[]}],[{list:"ordered"},{list:"bullet"}],[{align:[]}],["link","image"],["clean"]]},formats:["header","bold","italic","underline","strike","color","background","list","bullet","align","link","image"],style:{minHeight:"200px"}})})]}),e.jsxs("div",{className:"border rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium",children:"Media Attachments"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Assign images, videos, and documents to this press release"})]}),e.jsxs(E,{type:"button",variant:"outline",onClick:()=>d(!0),children:[e.jsx(st,{className:"h-4 w-4 mr-2"}),"Assign Media"]})]}),h.length>0?e.jsx("div",{className:"grid gap-3",children:h.map(te=>e.jsxs("div",{className:"flex items-center justify-between p-3 border rounded",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[te.type==="image"&&e.jsx(Vn,{className:"h-5 w-5 text-blue-500"}),te.type==="video"&&e.jsx(ca,{className:"h-5 w-5 text-green-500"}),te.type==="document"&&e.jsx(xt,{className:"h-5 w-5 text-orange-500"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-sm",children:te.name}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[te.type,"  ",te.size]})]})]}),e.jsx(E,{variant:"ghost",size:"sm",type:"button",onClick:()=>u(Ae=>Ae.filter(Ge=>Ge.id!==te.id)),children:e.jsx(Xt,{className:"h-4 w-4"})})]},te.id))}):e.jsxs("div",{className:"text-center py-6 text-muted-foreground border-2 border-dashed rounded",children:[e.jsx(Vn,{className:"h-8 w-8 mx-auto mb-2 opacity-50"}),e.jsx("p",{className:"text-sm",children:"No media assigned"}),e.jsx("p",{className:"text-xs",children:'Click "Assign Media" to add images, videos, or documents'})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium",children:"Release Date (Optional)"}),e.jsx("input",{type:"date",className:"w-full mt-1 px-3 py-2 border rounded-md",value:m.releaseDate,onChange:te=>p({...m,releaseDate:te.target.value})})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-2",children:[e.jsxs(E,{onClick:K,disabled:O.isPending,className:"flex items-center justify-center gap-2 w-full sm:w-auto",children:[e.jsx(xt,{className:"h-4 w-4"}),e.jsx("span",{className:"hidden xs:inline",children:"Create Manual Release"}),e.jsx("span",{className:"xs:hidden",children:"Manual"})]}),e.jsxs(E,{onClick:D,disabled:z.isPending,variant:"outline",className:"flex items-center justify-center gap-2 w-full sm:w-auto",children:[e.jsx(is,{className:"h-4 w-4"}),e.jsx("span",{className:"hidden xs:inline",children:"Auto-Generate Release"}),e.jsx("span",{className:"xs:hidden",children:"Auto-Generate"})]})]})]})]}),e.jsx("div",{className:"grid gap-4",children:W.length===0?e.jsx(R,{children:e.jsxs(L,{className:"flex flex-col items-center justify-center py-12",children:[e.jsx(xt,{className:"h-12 w-12 text-muted-foreground mb-4"}),e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No Press Releases"}),e.jsx("p",{className:"text-muted-foreground text-center",children:"Create your first press release to get started with media distribution"})]})}):W.map(te=>{var Ge;const Ae=le.find(be=>be.userId===te.primaryArtistId);return e.jsxs(R,{children:[e.jsx(Y,{children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{className:"flex items-start gap-3",children:[se(te.type),e.jsxs("div",{children:[e.jsx(Q,{className:"text-lg",children:te.title}),e.jsxs(rt,{className:"flex items-center gap-2 mt-1",children:[e.jsx("span",{children:((Ge=Ae==null?void 0:Ae.stageNames)==null?void 0:Ge[0])||(Ae==null?void 0:Ae.fullName)||"Unknown Artist"}),e.jsx("span",{children:""}),e.jsx("span",{children:new Date(te.createdAt).toLocaleDateString()}),te.isAutoGenerated&&e.jsxs(e.Fragment,{children:[e.jsx("span",{children:""}),e.jsx(X,{variant:"outline",className:"text-xs",children:"Auto-Generated"})]})]})]})]}),e.jsx("div",{className:"flex items-center gap-2",children:Z(te.status)})]})}),e.jsxs(L,{children:[e.jsx("p",{className:"text-sm text-muted-foreground mb-4 line-clamp-3",children:te.content.length>150?`${te.content.substring(0,150)}...`:te.content}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(E,{size:"sm",variant:"outline",onClick:()=>H(te),children:[e.jsx(Ns,{className:"h-4 w-4 mr-1"}),"View"]}),e.jsxs(E,{size:"sm",variant:"outline",onClick:()=>V(te),children:[e.jsx($s,{className:"h-4 w-4 mr-1"}),"Edit"]})]}),te.status==="draft"&&e.jsxs(E,{size:"sm",onClick:()=>G(te),disabled:F.isPending,className:"flex items-center gap-1",children:[e.jsx(gr,{className:"h-4 w-4"}),"Publish & Distribute"]})]})]})]},te.id)})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsx(R,{children:e.jsx(L,{className:"p-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(xt,{className:"h-5 w-5 text-blue-500"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Total Releases"}),e.jsx("p",{className:"text-2xl font-bold",children:W.length})]})]})})}),e.jsx(R,{children:e.jsx(L,{className:"p-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(gr,{className:"h-5 w-5 text-green-500"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Published"}),e.jsx("p",{className:"text-2xl font-bold",children:W.filter(te=>te.status==="published").length})]})]})})}),e.jsx(R,{children:e.jsx(L,{className:"p-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(is,{className:"h-5 w-5 text-purple-500"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Auto-Generated"}),e.jsx("p",{className:"text-2xl font-bold",children:W.filter(te=>te.isAutoGenerated).length})]})]})})})]}),e.jsx(kt,{open:r,onOpenChange:i,children:e.jsxs(wt,{className:"max-w-4xl max-h-[90vh] overflow-y-auto",children:[e.jsxs(St,{children:[e.jsxs(Ct,{className:"flex items-center gap-2",children:[e.jsx(Ns,{className:"h-5 w-5"}),"View Press Release"]}),e.jsx(us,{children:"Review the complete press release content and details"})]}),n&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold mb-2",children:n.title}),e.jsxs("div",{className:"flex flex-wrap gap-2 mb-4",children:[Z(n.status),e.jsx(X,{variant:"outline",children:n.type}),n.isAutoGenerated&&e.jsx(X,{variant:"outline",children:"Auto-Generated"})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold mb-2",children:"Content"}),e.jsx("div",{className:"bg-muted p-4 rounded-lg",children:e.jsx("div",{dangerouslySetInnerHTML:{__html:n.content.replace(/\n/g,"<br />")}})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold mb-2",children:"Details"}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{children:[e.jsx("strong",{children:"Created:"})," ",new Date(n.createdAt).toLocaleString()]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Last Updated:"})," ",new Date(n.updatedAt).toLocaleString()]}),n.publishedAt&&e.jsxs("div",{children:[e.jsx("strong",{children:"Published:"})," ",new Date(n.publishedAt).toLocaleString()]})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold mb-2",children:"Distribution"}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{children:[e.jsx("strong",{children:"Channels:"})," ",((ne=n.distributionChannels)==null?void 0:ne.join(", "))||"Not specified"]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Regions:"})," ",((ue=n.targetRegions)==null?void 0:ue.join(", "))||"Global"]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Contact:"})," ",n.contactEmail||"press@waitumusic.com"]})]})]})]})]})]})]})}),e.jsx(kt,{open:l,onOpenChange:c,children:e.jsxs(wt,{className:"max-w-4xl max-h-[90vh] overflow-y-auto",children:[e.jsxs(St,{children:[e.jsxs(Ct,{className:"flex items-center gap-2",children:[e.jsx($s,{className:"h-5 w-5"}),"Edit Press Release"]}),e.jsx(us,{children:"Modify press release content and settings"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium",children:"Title"}),e.jsx("input",{type:"text",className:"w-full mt-1 px-3 py-2 border rounded-md",value:m.title,onChange:te=>p({...m,title:te.target.value}),placeholder:"Press release title"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium",children:"Content"}),e.jsx("div",{className:"border rounded-md mt-1",children:e.jsx(Pa,{theme:"snow",value:m.content,onChange:te=>p({...m,content:te}),placeholder:"Edit press release content with rich formatting...",modules:{toolbar:[[{header:[1,2,3,!1]}],["bold","italic","underline","strike"],[{color:[]},{background:[]}],[{list:"ordered"},{list:"bullet"}],[{align:[]}],["link","image"],["clean"]]},formats:["header","bold","italic","underline","strike","color","background","list","bullet","align","link","image"],style:{minHeight:"300px"}})})]}),e.jsxs("div",{className:"border rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium",children:"Media Attachments"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Assign images, videos, and documents to this press release"})]}),e.jsxs(E,{type:"button",variant:"outline",onClick:()=>d(!0),children:[e.jsx(st,{className:"h-4 w-4 mr-2"}),"Assign Media"]})]}),h.length>0?e.jsx("div",{className:"grid gap-3",children:h.map(te=>e.jsxs("div",{className:"flex items-center justify-between p-3 border rounded",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[te.type==="image"&&e.jsx(Vn,{className:"h-5 w-5 text-blue-500"}),te.type==="video"&&e.jsx(ca,{className:"h-5 w-5 text-green-500"}),te.type==="document"&&e.jsx(xt,{className:"h-5 w-5 text-orange-500"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-sm",children:te.name}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[te.type,"  ",te.size]})]})]}),e.jsx(E,{variant:"ghost",size:"sm",type:"button",onClick:()=>u(Ae=>Ae.filter(Ge=>Ge.id!==te.id)),children:e.jsx(Xt,{className:"h-4 w-4"})})]},te.id))}):e.jsxs("div",{className:"text-center py-6 text-muted-foreground border-2 border-dashed rounded",children:[e.jsx(Vn,{className:"h-8 w-8 mx-auto mb-2 opacity-50"}),e.jsx("p",{className:"text-sm",children:"No media assigned"}),e.jsx("p",{className:"text-xs",children:'Click "Assign Media" to add images, videos, or documents'})]})]}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(E,{variant:"outline",onClick:()=>c(!1),children:"Cancel"}),e.jsx(E,{onClick:()=>{w({title:"Press Release Updated",description:"Changes saved successfully"}),c(!1)},children:"Save Changes"})]})]})]})}),e.jsx(gE,{isOpen:o,onClose:()=>d(!1),assignedMedia:h,onAssignMedia:u})]})}var U0="Popover",[yE,GJ]=Yn(U0,[so]),Rm=so(),[MY,ro]=yE(U0),NE=t=>{const{__scopePopover:s,children:n,open:a,defaultOpen:r,onOpenChange:i,modal:l=!1}=t,c=Rm(s),o=N.useRef(null),[d,h]=N.useState(!1),[u=!1,m]=br({prop:a,defaultProp:r,onChange:i});return e.jsx(gp,{...c,children:e.jsx(MY,{scope:s,contentId:jr(),triggerRef:o,open:u,onOpenChange:m,onOpenToggle:N.useCallback(()=>m(p=>!p),[m]),hasCustomAnchor:d,onCustomAnchorAdd:N.useCallback(()=>h(!0),[]),onCustomAnchorRemove:N.useCallback(()=>h(!1),[]),modal:l,children:n})})};NE.displayName=U0;var bE="PopoverAnchor",_Y=N.forwardRef((t,s)=>{const{__scopePopover:n,...a}=t,r=ro(bE,n),i=Rm(n),{onCustomAnchorAdd:l,onCustomAnchorRemove:c}=r;return N.useEffect(()=>(l(),()=>c()),[l,c]),e.jsx(vm,{...i,...a,ref:s})});_Y.displayName=bE;var wE="PopoverTrigger",SE=N.forwardRef((t,s)=>{const{__scopePopover:n,...a}=t,r=ro(wE,n),i=Rm(n),l=Ht(s,r.triggerRef),c=e.jsx(Dt.button,{type:"button","aria-haspopup":"dialog","aria-expanded":r.open,"aria-controls":r.contentId,"data-state":TE(r.open),...a,ref:l,onClick:tt(t.onClick,r.onOpenToggle)});return r.hasCustomAnchor?c:e.jsx(vm,{asChild:!0,...i,children:c})});SE.displayName=wE;var z0="PopoverPortal",[RY,OY]=yE(z0,{forceMount:void 0}),CE=t=>{const{__scopePopover:s,forceMount:n,children:a,container:r}=t,i=ro(z0,s);return e.jsx(RY,{scope:s,forceMount:n,children:e.jsx(Va,{present:n||i.open,children:e.jsx(bd,{asChild:!0,container:r,children:a})})})};CE.displayName=z0;var pd="PopoverContent",kE=N.forwardRef((t,s)=>{const n=OY(pd,t.__scopePopover),{forceMount:a=n.forceMount,...r}=t,i=ro(pd,t.__scopePopover);return e.jsx(Va,{present:a||i.open,children:i.modal?e.jsx(IY,{...r,ref:s}):e.jsx(LY,{...r,ref:s})})});kE.displayName=pd;var DY=$l("PopoverContent.RemoveScroll"),IY=N.forwardRef((t,s)=>{const n=ro(pd,t.__scopePopover),a=N.useRef(null),r=Ht(s,a),i=N.useRef(!1);return N.useEffect(()=>{const l=a.current;if(l)return kp(l)},[]),e.jsx(Nm,{as:DY,allowPinchZoom:!0,children:e.jsx(AE,{...t,ref:r,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:tt(t.onCloseAutoFocus,l=>{var c;l.preventDefault(),i.current||(c=n.triggerRef.current)==null||c.focus()}),onPointerDownOutside:tt(t.onPointerDownOutside,l=>{const c=l.detail.originalEvent,o=c.button===0&&c.ctrlKey===!0,d=c.button===2||o;i.current=d},{checkForDefaultPrevented:!1}),onFocusOutside:tt(t.onFocusOutside,l=>l.preventDefault(),{checkForDefaultPrevented:!1})})})}),LY=N.forwardRef((t,s)=>{const n=ro(pd,t.__scopePopover),a=N.useRef(!1),r=N.useRef(!1);return e.jsx(AE,{...t,ref:s,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:i=>{var l,c;(l=t.onCloseAutoFocus)==null||l.call(t,i),i.defaultPrevented||(a.current||(c=n.triggerRef.current)==null||c.focus(),i.preventDefault()),a.current=!1,r.current=!1},onInteractOutside:i=>{var o,d;(o=t.onInteractOutside)==null||o.call(t,i),i.defaultPrevented||(a.current=!0,i.detail.originalEvent.type==="pointerdown"&&(r.current=!0));const l=i.target;((d=n.triggerRef.current)==null?void 0:d.contains(l))&&i.preventDefault(),i.detail.originalEvent.type==="focusin"&&r.current&&i.preventDefault()}})}),AE=N.forwardRef((t,s)=>{const{__scopePopover:n,trapFocus:a,onOpenAutoFocus:r,onCloseAutoFocus:i,disableOutsidePointerEvents:l,onEscapeKeyDown:c,onPointerDownOutside:o,onFocusOutside:d,onInteractOutside:h,...u}=t,m=ro(pd,n),p=Rm(n);return Sp(),e.jsx(ym,{asChild:!0,loop:!0,trapped:a,onMountAutoFocus:r,onUnmountAutoFocus:i,children:e.jsx(Qo,{asChild:!0,disableOutsidePointerEvents:l,onInteractOutside:h,onEscapeKeyDown:c,onPointerDownOutside:o,onFocusOutside:d,onDismiss:()=>m.onOpenChange(!1),children:e.jsx(jp,{"data-state":TE(m.open),role:"dialog",id:m.contentId,...p,...u,ref:s,style:{...u.style,"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"}})})})}),PE="PopoverClose",FY=N.forwardRef((t,s)=>{const{__scopePopover:n,...a}=t,r=ro(PE,n);return e.jsx(Dt.button,{type:"button",...a,ref:s,onClick:tt(t.onClick,()=>r.onOpenChange(!1))})});FY.displayName=PE;var qY="PopoverArrow",$Y=N.forwardRef((t,s)=>{const{__scopePopover:n,...a}=t,r=Rm(n);return e.jsx(vp,{...r,...a,ref:s})});$Y.displayName=qY;function TE(t){return t?"open":"closed"}var BY=NE,UY=SE,zY=CE,EE=kE;const ME=BY,_E=UY,V0=N.forwardRef(({className:t,align:s="center",sideOffset:n=4,...a},r)=>e.jsx(zY,{children:e.jsx(EE,{ref:r,align:s,sideOffset:n,className:Je("z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-popover-content-transform-origin]",t),...a})}));V0.displayName=EE.displayName;const VY=pe.object({streamName:pe.string().min(1,"Stream name is required"),streamType:pe.enum(["booking","streaming","merchandise","sync_licensing","brand_partnership","performance_royalties","mechanical_royalties","publishing"]),amount:pe.string().min(1,"Amount is required"),currency:pe.string().default("USD"),dateReceived:pe.date(),description:pe.string().optional(),metadata:pe.object({platform:pe.string().optional(),trackName:pe.string().optional(),clientName:pe.string().optional()}).optional()}),GY=pe.object({goalType:pe.enum(["monthly","quarterly","annual","milestone"]),targetAmount:pe.string().min(1,"Target amount is required"),timeframe:pe.enum(["1month","3months","6months","12months","24months"]),targetDate:pe.date(),description:pe.string().min(1,"Description is required"),currency:pe.string().default("USD")}),WY=pe.object({forecastType:pe.enum(["monthly","quarterly","annual"]),method:pe.enum(["ai_analysis","historical_trend","market_based"]),timeframePeriods:pe.number().min(1).max(12),includeStreams:pe.array(pe.string()).optional()});function RE({open:t,onOpenChange:s,userId:n}){const{toast:a}=nt(),r=Tt(),i=Cn({resolver:kn(VY),defaultValues:{streamName:"",streamType:"booking",amount:"",currency:"USD",dateReceived:new Date,description:"",metadata:{}}}),l=Xe({mutationFn:d=>xe("/api/revenue/streams",{method:"POST",body:JSON.stringify({...d,artistUserId:n,amount:parseFloat(d.amount),usdEquivalent:parseFloat(d.amount),status:"confirmed"})}),onSuccess:()=>{r.invalidateQueries({queryKey:["/api/revenue/streams"]}),a({title:"Revenue Stream Created",description:"Your new revenue stream has been added successfully."}),i.reset(),s(!1)},onError:d=>{a({title:"Creation Failed",description:d.message||"Failed to create revenue stream.",variant:"destructive"})}}),c=d=>{l.mutate(d)},o=[{value:"booking",label:"Live Performance Booking",icon:""},{value:"streaming",label:"Streaming Royalties",icon:""},{value:"merchandise",label:"Merchandise Sales",icon:""},{value:"sync_licensing",label:"Sync Licensing",icon:""},{value:"brand_partnership",label:"Brand Partnership",icon:""},{value:"performance_royalties",label:"Performance Royalties",icon:""},{value:"mechanical_royalties",label:"Mechanical Royalties",icon:""},{value:"publishing",label:"Publishing Income",icon:""}];return e.jsx(kt,{open:t,onOpenChange:s,children:e.jsxs(wt,{className:"sm:max-w-[500px]",children:[e.jsxs(St,{children:[e.jsxs(Ct,{className:"flex items-center gap-2",children:[e.jsx(st,{className:"h-5 w-5"}),"Create Revenue Stream"]}),e.jsx(us,{children:"Add a new source of income to track your revenue streams and optimize earnings."})]}),e.jsx(On,{...i,children:e.jsxs("form",{onSubmit:i.handleSubmit(c),className:"space-y-4",children:[e.jsx($e,{control:i.control,name:"streamName",render:({field:d})=>e.jsxs(Fe,{children:[e.jsx(qe,{children:"Stream Name"}),e.jsx(Le,{children:e.jsx($,{placeholder:"e.g., Summer Festival Booking",...d})}),e.jsx(Or,{children:"A descriptive name for this revenue stream"}),e.jsx(ze,{})]})}),e.jsx($e,{control:i.control,name:"streamType",render:({field:d})=>e.jsxs(Fe,{children:[e.jsx(qe,{children:"Revenue Type"}),e.jsxs(Re,{onValueChange:d.onChange,defaultValue:d.value,children:[e.jsx(Le,{children:e.jsx(Me,{children:e.jsx(Oe,{placeholder:"Select revenue type"})})}),e.jsx(_e,{children:o.map(h=>e.jsx(U,{value:h.value,children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{children:h.icon}),e.jsx("span",{children:h.label})]})},h.value))})]}),e.jsx(ze,{})]})}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx($e,{control:i.control,name:"amount",render:({field:d})=>e.jsxs(Fe,{children:[e.jsx(qe,{children:"Amount"}),e.jsx(Le,{children:e.jsx($,{type:"number",step:"0.01",placeholder:"0.00",...d})}),e.jsx(ze,{})]})}),e.jsx($e,{control:i.control,name:"currency",render:({field:d})=>e.jsxs(Fe,{children:[e.jsx(qe,{children:"Currency"}),e.jsxs(Re,{onValueChange:d.onChange,defaultValue:d.value,children:[e.jsx(Le,{children:e.jsx(Me,{children:e.jsx(Oe,{})})}),e.jsxs(_e,{children:[e.jsx(U,{value:"USD",children:"USD ($)"}),e.jsx(U,{value:"EUR",children:"EUR ()"}),e.jsx(U,{value:"GBP",children:"GBP ()"}),e.jsx(U,{value:"XCD",children:"XCD (EC$)"})]})]}),e.jsx(ze,{})]})})]}),e.jsx($e,{control:i.control,name:"dateReceived",render:({field:d})=>e.jsxs(Fe,{className:"flex flex-col",children:[e.jsx(qe,{children:"Date Received"}),e.jsxs(ME,{children:[e.jsx(_E,{asChild:!0,children:e.jsx(Le,{children:e.jsxs(E,{variant:"outline",className:Je("w-full pl-3 text-left font-normal",!d.value&&"text-muted-foreground"),children:[d.value?Mn(d.value,"PPP"):e.jsx("span",{children:"Pick a date"}),e.jsx(dt,{className:"ml-auto h-4 w-4 opacity-50"})]})})}),e.jsx(V0,{className:"w-auto p-0",align:"start",children:e.jsx(Ql,{mode:"single",selected:d.value,onSelect:d.onChange,disabled:h=>h>new Date||h<new Date("1900-01-01"),initialFocus:!0})})]}),e.jsx(ze,{})]})}),e.jsx($e,{control:i.control,name:"description",render:({field:d})=>e.jsxs(Fe,{children:[e.jsx(qe,{children:"Description (Optional)"}),e.jsx(Le,{children:e.jsx(mt,{placeholder:"Additional details about this revenue stream...",className:"min-h-[80px]",...d})}),e.jsx(ze,{})]})}),e.jsxs(hi,{children:[e.jsx(E,{type:"button",variant:"outline",onClick:()=>s(!1),children:"Cancel"}),e.jsxs(E,{type:"submit",disabled:l.isPending,children:[l.isPending&&e.jsx(oa,{className:"mr-2 h-4 w-4 animate-spin"}),"Create Stream"]})]})]})})]})})}function OE({open:t,onOpenChange:s,userId:n}){const{toast:a}=nt(),r=Tt(),i=Cn({resolver:kn(GY),defaultValues:{goalType:"monthly",targetAmount:"",timeframe:"3months",targetDate:new Date(Date.now()+90*24*60*60*1e3),description:"",currency:"USD"}}),l=Xe({mutationFn:o=>xe("/api/revenue/goals",{method:"POST",body:JSON.stringify({...o,artistUserId:n,targetAmount:parseFloat(o.targetAmount),progress:0,isActive:!0})}),onSuccess:()=>{r.invalidateQueries({queryKey:["/api/revenue/goals"]}),a({title:"Revenue Goal Created",description:"Your new revenue goal has been set successfully."}),i.reset(),s(!1)},onError:o=>{a({title:"Creation Failed",description:o.message||"Failed to create revenue goal.",variant:"destructive"})}}),c=o=>{l.mutate(o)};return e.jsx(kt,{open:t,onOpenChange:s,children:e.jsxs(wt,{className:"sm:max-w-[500px]",children:[e.jsxs(St,{children:[e.jsxs(Ct,{className:"flex items-center gap-2",children:[e.jsx(Es,{className:"h-5 w-5"}),"Create Revenue Goal"]}),e.jsx(us,{children:"Set a specific revenue target to track your progress and stay motivated."})]}),e.jsx(On,{...i,children:e.jsxs("form",{onSubmit:i.handleSubmit(c),className:"space-y-4",children:[e.jsx($e,{control:i.control,name:"description",render:({field:o})=>e.jsxs(Fe,{children:[e.jsx(qe,{children:"Goal Description"}),e.jsx(Le,{children:e.jsx($,{placeholder:"e.g., Q1 Booking Revenue Target",...o})}),e.jsx(Or,{children:"A clear description of what you want to achieve"}),e.jsx(ze,{})]})}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx($e,{control:i.control,name:"goalType",render:({field:o})=>e.jsxs(Fe,{children:[e.jsx(qe,{children:"Goal Type"}),e.jsxs(Re,{onValueChange:o.onChange,defaultValue:o.value,children:[e.jsx(Le,{children:e.jsx(Me,{children:e.jsx(Oe,{})})}),e.jsxs(_e,{children:[e.jsx(U,{value:"monthly",children:"Monthly Goal"}),e.jsx(U,{value:"quarterly",children:"Quarterly Goal"}),e.jsx(U,{value:"annual",children:"Annual Goal"}),e.jsx(U,{value:"milestone",children:"Milestone Goal"})]})]}),e.jsx(ze,{})]})}),e.jsx($e,{control:i.control,name:"timeframe",render:({field:o})=>e.jsxs(Fe,{children:[e.jsx(qe,{children:"Timeframe"}),e.jsxs(Re,{onValueChange:o.onChange,defaultValue:o.value,children:[e.jsx(Le,{children:e.jsx(Me,{children:e.jsx(Oe,{})})}),e.jsxs(_e,{children:[e.jsx(U,{value:"1month",children:"1 Month"}),e.jsx(U,{value:"3months",children:"3 Months"}),e.jsx(U,{value:"6months",children:"6 Months"}),e.jsx(U,{value:"12months",children:"12 Months"}),e.jsx(U,{value:"24months",children:"24 Months"})]})]}),e.jsx(ze,{})]})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx($e,{control:i.control,name:"targetAmount",render:({field:o})=>e.jsxs(Fe,{children:[e.jsx(qe,{children:"Target Amount"}),e.jsx(Le,{children:e.jsx($,{type:"number",step:"0.01",placeholder:"0.00",...o})}),e.jsx(ze,{})]})}),e.jsx($e,{control:i.control,name:"currency",render:({field:o})=>e.jsxs(Fe,{children:[e.jsx(qe,{children:"Currency"}),e.jsxs(Re,{onValueChange:o.onChange,defaultValue:o.value,children:[e.jsx(Le,{children:e.jsx(Me,{children:e.jsx(Oe,{})})}),e.jsxs(_e,{children:[e.jsx(U,{value:"USD",children:"USD ($)"}),e.jsx(U,{value:"EUR",children:"EUR ()"}),e.jsx(U,{value:"GBP",children:"GBP ()"}),e.jsx(U,{value:"XCD",children:"XCD (EC$)"})]})]}),e.jsx(ze,{})]})})]}),e.jsx($e,{control:i.control,name:"targetDate",render:({field:o})=>e.jsxs(Fe,{className:"flex flex-col",children:[e.jsx(qe,{children:"Target Date"}),e.jsxs(ME,{children:[e.jsx(_E,{asChild:!0,children:e.jsx(Le,{children:e.jsxs(E,{variant:"outline",className:Je("w-full pl-3 text-left font-normal",!o.value&&"text-muted-foreground"),children:[o.value?Mn(o.value,"PPP"):e.jsx("span",{children:"Pick a target date"}),e.jsx(dt,{className:"ml-auto h-4 w-4 opacity-50"})]})})}),e.jsx(V0,{className:"w-auto p-0",align:"start",children:e.jsx(Ql,{mode:"single",selected:o.value,onSelect:o.onChange,disabled:d=>d<new Date,initialFocus:!0})})]}),e.jsx(ze,{})]})}),e.jsxs(hi,{children:[e.jsx(E,{type:"button",variant:"outline",onClick:()=>s(!1),children:"Cancel"}),e.jsxs(E,{type:"submit",disabled:l.isPending,children:[l.isPending&&e.jsx(oa,{className:"mr-2 h-4 w-4 animate-spin"}),"Create Goal"]})]})]})})]})})}function DE({open:t,onOpenChange:s,userId:n}){const{toast:a}=nt(),r=Tt(),i=Cn({resolver:kn(WY),defaultValues:{forecastType:"quarterly",method:"ai_analysis",timeframePeriods:4,includeStreams:[]}}),l=Xe({mutationFn:o=>xe("/api/revenue/forecasts",{method:"POST",body:JSON.stringify({userId:n,forecastType:o.forecastType,method:o.method,periods:o.timeframePeriods,streams:o.includeStreams})}),onSuccess:()=>{r.invalidateQueries({queryKey:["/api/revenue/forecasts"]}),a({title:"Forecast Generated",description:"Advanced revenue forecast has been generated successfully."}),i.reset(),s(!1)},onError:o=>{a({title:"Generation Failed",description:o.message||"Failed to generate revenue forecast.",variant:"destructive"})}}),c=o=>{l.mutate(o)};return e.jsx(kt,{open:t,onOpenChange:s,children:e.jsxs(wt,{className:"sm:max-w-[500px]",children:[e.jsxs(St,{children:[e.jsxs(Ct,{className:"flex items-center gap-2",children:[e.jsx(Is,{className:"h-5 w-5"}),"Generate Revenue Forecast"]}),e.jsx(us,{children:"Create advanced revenue predictions based on your historical data and market trends."})]}),e.jsx(On,{...i,children:e.jsxs("form",{onSubmit:i.handleSubmit(c),className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx($e,{control:i.control,name:"forecastType",render:({field:o})=>e.jsxs(Fe,{children:[e.jsx(qe,{children:"Forecast Type"}),e.jsxs(Re,{onValueChange:o.onChange,defaultValue:o.value,children:[e.jsx(Le,{children:e.jsx(Me,{children:e.jsx(Oe,{})})}),e.jsxs(_e,{children:[e.jsx(U,{value:"monthly",children:"Monthly Forecast"}),e.jsx(U,{value:"quarterly",children:"Quarterly Forecast"}),e.jsx(U,{value:"annual",children:"Annual Forecast"})]})]}),e.jsx(ze,{})]})}),e.jsx($e,{control:i.control,name:"timeframePeriods",render:({field:o})=>e.jsxs(Fe,{children:[e.jsx(qe,{children:"Periods Ahead"}),e.jsx(Le,{children:e.jsx($,{type:"number",min:"1",max:"12",...o,onChange:d=>o.onChange(parseInt(d.target.value))})}),e.jsx(Or,{children:"How many periods to forecast"}),e.jsx(ze,{})]})})]}),e.jsx($e,{control:i.control,name:"method",render:({field:o})=>e.jsxs(Fe,{children:[e.jsx(qe,{children:"Forecasting Method"}),e.jsxs(Re,{onValueChange:o.onChange,defaultValue:o.value,children:[e.jsx(Le,{children:e.jsx(Me,{children:e.jsx(Oe,{})})}),e.jsxs(_e,{children:[e.jsx(U,{value:"advanced_analysis",children:"Advanced Analysis (Recommended)"}),e.jsx(U,{value:"historical_trend",children:"Historical Trend"}),e.jsx(U,{value:"market_based",children:"Market-Based Prediction"})]})]}),e.jsx(Or,{children:"Advanced Analysis provides the most accurate predictions using market data"}),e.jsx(ze,{})]})}),e.jsxs("div",{className:"bg-muted/50 p-4 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(It,{className:"h-4 w-4 text-muted-foreground"}),e.jsx("span",{className:"text-sm font-medium",children:"Forecast Features"})]}),e.jsxs("ul",{className:"text-sm text-muted-foreground space-y-1",children:[e.jsx("li",{children:" Revenue breakdown by stream type"}),e.jsx("li",{children:" Confidence levels and reliability scores"}),e.jsx("li",{children:" Market trend integration"}),e.jsx("li",{children:" Seasonal pattern analysis"})]})]}),e.jsxs(hi,{children:[e.jsx(E,{type:"button",variant:"outline",onClick:()=>s(!1),children:"Cancel"}),e.jsxs(E,{type:"submit",disabled:l.isPending,children:[l.isPending&&e.jsx(oa,{className:"mr-2 h-4 w-4 animate-spin"}),"Generate Forecast"]})]})]})})]})})}function HY({user:t,allowedUsers:s=[]}){var W;const[n,a]=N.useState((t==null?void 0:t.id)||0),[r,i]=N.useState("12months"),[l,c]=N.useState("overview"),[o,d]=N.useState(!1),[h,u]=N.useState(!1),[m,p]=N.useState(!1),{toast:g}=nt(),x=Tt();if(!t||!t.id)return e.jsx("div",{className:"flex items-center justify-center min-h-screen",children:e.jsx("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-primary"})});const{data:v=[],isLoading:y}=ke({queryKey:["/api/revenue/streams",n,r],queryFn:async()=>(await xe(`/api/revenue/streams?userId=${n}&timeframe=${r}`)).json()}),{data:f=[],isLoading:b}=ke({queryKey:["/api/revenue/goals",n],queryFn:async()=>(await xe(`/api/revenue/goals?userId=${n}`)).json()}),{data:j=[],isLoading:S}=ke({queryKey:["/api/revenue/forecasts",n],queryFn:async()=>(await xe(`/api/revenue/forecasts?userId=${n}`)).json()}),{data:k=[],isLoading:T}=ke({queryKey:["/api/revenue/market-trends",n],queryFn:async()=>(await xe(`/api/revenue/market-trends?userId=${n}`)).json()}),{data:A,isLoading:C}=ke({queryKey:["/api/revenue/metrics",n,r],queryFn:async()=>(await xe(`/api/revenue/metrics?userId=${n}&timeframe=${r}`)).json()}),{data:w=[],isLoading:P}=ke({queryKey:["/api/revenue/optimizations",n],queryFn:async()=>(await xe(`/api/revenue/optimizations?userId=${n}`)).json()});Xe({mutationFn:_=>xe("/api/revenue/forecasts",{method:"POST",body:JSON.stringify(_)}),onSuccess:()=>{x.invalidateQueries({queryKey:["/api/revenue/forecasts"]}),g({title:"Forecast Generated",description:"AI revenue forecast has been generated successfully."})},onError:()=>{g({title:"Forecast Failed",description:"Failed to generate revenue forecast.",variant:"destructive"})}}),Xe({mutationFn:_=>xe("/api/revenue/goals",{method:"POST",body:JSON.stringify(_)}),onSuccess:()=>{x.invalidateQueries({queryKey:["/api/revenue/goals"]}),g({title:"Goal Created",description:"Revenue goal has been created successfully."})}});const M=_=>({booking:dt,streaming:Ue,merchandise:Rt,sync_licensing:yn,brand_partnership:Ze,performance_royalties:It,mechanical_royalties:wn,publishing:is})[_]||_n,I=_=>({booking:"text-blue-600",streaming:"text-green-600",merchandise:"text-purple-600",sync_licensing:"text-orange-600",brand_partnership:"text-pink-600",performance_royalties:"text-yellow-600",mechanical_royalties:"text-indigo-600",publishing:"text-red-600"})[_]||"text-gray-600";return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Revenue Analytics & Forecasting"}),e.jsxs("p",{className:"text-gray-600 dark:text-gray-300",children:["Advanced revenue tracking, forecasting, and optimization for ",n===t.id?"your":"managed"," music career"]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[s.length>1&&e.jsxs(Re,{value:n.toString(),onValueChange:_=>a(parseInt(_)),children:[e.jsx(Me,{className:"w-48",children:e.jsx(Oe,{placeholder:"Select Artist"})}),e.jsx(_e,{children:s.map(_=>e.jsx(U,{value:_.id.toString(),children:_.fullName},_.id))})]}),e.jsxs(Re,{value:r,onValueChange:i,children:[e.jsx(Me,{className:"w-40",children:e.jsx(Oe,{})}),e.jsxs(_e,{children:[e.jsx(U,{value:"3months",children:"3 Months"}),e.jsx(U,{value:"6months",children:"6 Months"}),e.jsx(U,{value:"12months",children:"12 Months"}),e.jsx(U,{value:"24months",children:"24 Months"})]})]})]})]}),A&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[e.jsxs(R,{children:[e.jsxs(Y,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(Q,{className:"text-sm font-medium",children:"Total Revenue"}),e.jsx(It,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(L,{children:[e.jsx("div",{className:"text-2xl font-bold",children:lr(A.totalRevenue)}),e.jsxs("div",{className:"flex items-center text-xs text-muted-foreground",children:[A.growthRate>0?e.jsx(t4,{className:"h-3 w-3 text-green-600 mr-1"}):e.jsx(u6,{className:"h-3 w-3 text-red-600 mr-1"}),Math.abs(A.growthRate),"% from last period"]})]})]}),e.jsxs(R,{children:[e.jsxs(Y,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(Q,{className:"text-sm font-medium",children:"Monthly Average"}),e.jsx(wn,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(L,{children:[e.jsx("div",{className:"text-2xl font-bold",children:lr(A.monthlyRevenue)}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:["Based on ",r]})]})]}),e.jsxs(R,{children:[e.jsxs(Y,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(Q,{className:"text-sm font-medium",children:"Top Stream"}),e.jsx(Is,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(L,{children:[e.jsx("div",{className:"text-2xl font-bold",children:((W=A.topPerformingStreams[0])==null?void 0:W.name)||"No Data"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:A.topPerformingStreams[0]&&lr(A.topPerformingStreams[0].amount)})]})]}),e.jsxs(R,{children:[e.jsxs(Y,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(Q,{className:"text-sm font-medium",children:"Revenue Streams"}),e.jsx(s4,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(L,{children:[e.jsx("div",{className:"text-2xl font-bold",children:Object.keys(A.revenueByStream).length}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Active revenue sources"})]})]})]}),e.jsxs(Ut,{value:l,onValueChange:c,className:"w-full",children:[e.jsxs(jt,{className:"grid w-full grid-cols-6",children:[e.jsx(Ne,{value:"overview",children:"Overview"}),e.jsx(Ne,{value:"streams",children:"Streams"}),e.jsx(Ne,{value:"goals",children:"Goals"}),e.jsx(Ne,{value:"forecasts",children:"Forecasts"}),e.jsx(Ne,{value:"trends",children:"Trends"}),e.jsx(Ne,{value:"optimize",children:"Optimize"})]}),e.jsx(ge,{value:"overview",className:"space-y-6",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs(R,{children:[e.jsxs(Y,{children:[e.jsx(Q,{children:"Revenue by Stream Type"}),e.jsx(rt,{children:"Distribution of revenue across different income streams"})]}),e.jsx(L,{children:A&&e.jsx("div",{className:"space-y-4",children:Object.entries(A.revenueByStream).map(([_,B])=>{const O=M(_),z=B/A.totalRevenue*100;return e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(O,{className:`h-4 w-4 ${I(_)}`}),e.jsxs("div",{className:"flex-1 space-y-1",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm font-medium capitalize",children:_.replace("_"," ")}),e.jsxs("span",{className:"text-sm text-muted-foreground",children:[lr(B)," (",z.toFixed(1),"%)"]})]}),e.jsx(qs,{value:z,className:"h-2"})]})]},_)})})})]}),e.jsxs(R,{children:[e.jsxs(Y,{children:[e.jsx(Q,{children:"Goals Progress"}),e.jsx(rt,{children:"Track progress toward your revenue targets"})]}),e.jsx(L,{children:e.jsx("div",{className:"space-y-4",children:f.slice(0,3).map(_=>e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm font-medium",children:_.description||_.goalType}),e.jsxs(X,{variant:parseFloat(_.progress||"0")>=100?"default":"secondary",children:[parseFloat(_.progress||"0").toFixed(1),"%"]})]}),e.jsx(qs,{value:parseFloat(_.progress||"0"),className:"h-2"}),e.jsxs("div",{className:"flex justify-between text-xs text-muted-foreground",children:[e.jsx("span",{children:lr(parseFloat(_.targetAmount))}),e.jsx("span",{children:_.timeframe})]})]},_.id))})})]})]})}),e.jsxs(ge,{value:"streams",className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Revenue Streams"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Track all your income sources"})]}),e.jsxs(E,{onClick:()=>d(!0),children:[e.jsx(st,{className:"h-4 w-4 mr-2"}),"Add Stream"]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:v.map(_=>{const B=M(_.streamType);return e.jsxs(R,{children:[e.jsx(Y,{className:"pb-3",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(B,{className:`h-4 w-4 ${I(_.streamType)}`}),e.jsx(Q,{className:"text-sm",children:_.streamName})]}),e.jsx(X,{variant:"outline",className:"text-xs",children:_.streamType.replace("_"," ")})]})}),e.jsx(L,{children:e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"text-2xl font-bold",children:lr(parseFloat(_.usdEquivalent))}),e.jsxs("div",{className:"text-xs text-muted-foreground",children:["Received: ",new Date(_.dateReceived).toLocaleDateString()]}),e.jsx(X,{variant:_.status==="confirmed"?"default":"secondary",className:"text-xs",children:_.status})]})})]},_.id)})})]}),e.jsxs(ge,{value:"goals",className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Revenue Goals"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Set and track your revenue targets"})]}),e.jsxs(E,{onClick:()=>u(!0),children:[e.jsx(Es,{className:"h-4 w-4 mr-2"}),"Create Goal"]})]}),e.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:f.map(_=>e.jsxs(R,{children:[e.jsx(Y,{children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsx(Q,{className:"text-base",children:_.description||_.goalType}),e.jsx(rt,{className:"capitalize",children:_.goalType.replace("_"," ")})]}),e.jsx(X,{variant:_.isActive?"default":"secondary",children:_.isActive?"Active":"Inactive"})]})}),e.jsxs(L,{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between mb-2",children:[e.jsx("span",{className:"text-sm",children:"Progress"}),e.jsxs("span",{className:"text-sm font-medium",children:[parseFloat(_.progress||"0").toFixed(1),"%"]})]}),e.jsx(qs,{value:parseFloat(_.progress||"0"),className:"h-3"})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{children:"Target"}),e.jsx("span",{className:"font-medium",children:lr(parseFloat(_.targetAmount))})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{children:"Timeframe"}),e.jsx("span",{className:"capitalize",children:_.timeframe})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{children:"Target Date"}),e.jsx("span",{children:new Date(_.targetDate).toLocaleDateString()})]})]})]},_.id))})]}),e.jsxs(ge,{value:"forecasts",className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Revenue Forecasts"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"AI-powered revenue predictions"})]}),e.jsxs(E,{onClick:()=>p(!0),children:[e.jsx(En,{className:"h-4 w-4 mr-2"}),"Generate Forecast"]})]}),e.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 xl:grid-cols-3 gap-6",children:j.map(_=>e.jsxs(R,{children:[e.jsx(Y,{children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsxs(Q,{className:"text-base capitalize",children:[_.forecastType," Forecast"]}),e.jsx(rt,{children:new Date(_.forecastPeriod).toLocaleDateString()})]}),e.jsxs(X,{variant:"outline",children:[(parseFloat(_.confidenceLevel)*100).toFixed(0),"% confidence"]})]})}),e.jsxs(L,{className:"space-y-4",children:[e.jsx("div",{className:"text-2xl font-bold",children:lr(parseFloat(_.totalForecast))}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"text-sm font-medium",children:"Breakdown by Stream"}),Object.entries(_.streamBreakdown).map(([B,O])=>e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"capitalize",children:B.replace("_"," ")}),e.jsx("span",{children:lr(O)})]},B))]}),e.jsxs("div",{className:"text-xs text-muted-foreground",children:["Method: ",_.forecastMethod.replace("_"," ")]})]})]},_.id))})]}),e.jsxs(ge,{value:"trends",className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Market Trends"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Industry trends affecting your revenue potential"})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:k.map(_=>e.jsxs(R,{children:[e.jsx(Y,{className:"pb-3",children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsx(Q,{className:"text-sm",children:_.trendType.replace("_"," ")}),e.jsx(X,{variant:"outline",className:"text-xs",children:_.region})]})}),e.jsx(L,{children:e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-xs text-muted-foreground",children:"Current Value"}),e.jsx("span",{className:"font-medium",children:lr(parseFloat(_.trendValue))})]}),_.changePercentage&&e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-xs text-muted-foreground",children:"Change"}),e.jsxs("div",{className:"flex items-center",children:[parseFloat(_.changePercentage)>0?e.jsx(Is,{className:"h-3 w-3 text-green-600 mr-1"}):e.jsx(xx,{className:"h-3 w-3 text-red-600 mr-1"}),e.jsxs("span",{className:`text-xs ${parseFloat(_.changePercentage)>0?"text-green-600":"text-red-600"}`,children:[Math.abs(parseFloat(_.changePercentage)).toFixed(1),"%"]})]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-xs text-muted-foreground",children:"Reliability"}),e.jsx(qs,{value:parseFloat(_.reliability)*100,className:"w-16 h-2"})]}),e.jsxs("div",{className:"text-xs text-muted-foreground",children:["Source: ",_.dataSource.replace("_"," ")]})]})})]},_.id))})]}),e.jsxs(ge,{value:"optimize",className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Revenue Optimization"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"AI-powered recommendations to maximize your revenue"})]}),e.jsx("div",{className:"space-y-4",children:w.map(_=>e.jsxs(R,{children:[e.jsx(Y,{children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsx(Q,{className:"text-base capitalize",children:_.optimizationType.replace("_"," ")}),e.jsxs(rt,{children:["Projected Impact: ",lr(parseFloat(_.projectedImpact||"0"))]})]}),e.jsx(X,{variant:_.status==="completed"?"default":"secondary",className:"capitalize",children:_.status})]})}),e.jsx(L,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{children:"ROI"}),e.jsxs("span",{className:"font-medium",children:[parseFloat(_.roi||"0").toFixed(1),"%"]})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{children:"Implementation Cost"}),e.jsx("span",{children:lr(parseFloat(_.implementationCost||"0"))})]}),_.recommendedActions&&e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium mb-2",children:"Recommended Actions"}),e.jsx("div",{className:"space-y-1",children:_.recommendedActions.slice(0,3).map((B,O)=>e.jsxs("div",{className:"text-xs text-muted-foreground",children:[" ",B.action]},O))})]})]})})]},_.id))})]})]}),e.jsx(RE,{open:o,onOpenChange:d,userId:n}),e.jsx(OE,{open:h,onOpenChange:u,userId:n}),e.jsx(DE,{open:m,onOpenChange:p,userId:n})]})}var IE="AlertDialog",[KY,WJ]=Yn(IE,[lk]),Qi=lk(),LE=t=>{const{__scopeAlertDialog:s,...n}=t,a=Qi(s);return e.jsx(e0,{...a,...n,modal:!0})};LE.displayName=IE;var YY="AlertDialogTrigger",FE=N.forwardRef((t,s)=>{const{__scopeAlertDialog:n,...a}=t,r=Qi(n);return e.jsx(wk,{...r,...a,ref:s})});FE.displayName=YY;var QY="AlertDialogPortal",qE=t=>{const{__scopeAlertDialog:s,...n}=t,a=Qi(s);return e.jsx(t0,{...a,...n})};qE.displayName=QY;var ZY="AlertDialogOverlay",$E=N.forwardRef((t,s)=>{const{__scopeAlertDialog:n,...a}=t,r=Qi(n);return e.jsx(Ap,{...r,...a,ref:s})});$E.displayName=ZY;var Ic="AlertDialogContent",[XY,JY]=KY(Ic),eQ=OC("AlertDialogContent"),BE=N.forwardRef((t,s)=>{const{__scopeAlertDialog:n,children:a,...r}=t,i=Qi(n),l=N.useRef(null),c=Ht(s,l),o=N.useRef(null);return e.jsx(mL,{contentName:Ic,titleName:UE,docsSlug:"alert-dialog",children:e.jsx(XY,{scope:n,cancelRef:o,children:e.jsxs(Pp,{role:"alertdialog",...i,...r,ref:c,onOpenAutoFocus:tt(r.onOpenAutoFocus,d=>{var h;d.preventDefault(),(h=o.current)==null||h.focus({preventScroll:!0})}),onPointerDownOutside:d=>d.preventDefault(),onInteractOutside:d=>d.preventDefault(),children:[e.jsx(eQ,{children:a}),e.jsx(sQ,{contentRef:l})]})})})});BE.displayName=Ic;var UE="AlertDialogTitle",zE=N.forwardRef((t,s)=>{const{__scopeAlertDialog:n,...a}=t,r=Qi(n);return e.jsx(Tp,{...r,...a,ref:s})});zE.displayName=UE;var VE="AlertDialogDescription",GE=N.forwardRef((t,s)=>{const{__scopeAlertDialog:n,...a}=t,r=Qi(n);return e.jsx(Ep,{...r,...a,ref:s})});GE.displayName=VE;var tQ="AlertDialogAction",WE=N.forwardRef((t,s)=>{const{__scopeAlertDialog:n,...a}=t,r=Qi(n);return e.jsx(Mp,{...r,...a,ref:s})});WE.displayName=tQ;var HE="AlertDialogCancel",KE=N.forwardRef((t,s)=>{const{__scopeAlertDialog:n,...a}=t,{cancelRef:r}=JY(HE,n),i=Qi(n),l=Ht(s,r);return e.jsx(Mp,{...i,...a,ref:l})});KE.displayName=HE;var sQ=({contentRef:t})=>{const s=`\`${Ic}\` requires a description for the component to be accessible for screen reader users.

You can add a description to the \`${Ic}\` by passing a \`${VE}\` component as a child, which also benefits sighted users by adding visible context to the dialog.

Alternatively, you can use your own component as a description by assigning it an \`id\` and passing the same value to the \`aria-describedby\` prop in \`${Ic}\`. If the description is confusing or duplicative for sighted users, you can use the \`@radix-ui/react-visually-hidden\` primitive as a wrapper around your description component.

For more information, see https://radix-ui.com/primitives/docs/components/alert-dialog`;return N.useEffect(()=>{var a;document.getElementById((a=t.current)==null?void 0:a.getAttribute("aria-describedby"))||console.warn(s)},[s,t]),null},nQ=LE,aQ=FE,rQ=qE,YE=$E,QE=BE,ZE=WE,XE=KE,JE=zE,e5=GE;const G0=nQ,iQ=aQ,lQ=rQ,t5=N.forwardRef(({className:t,...s},n)=>e.jsx(YE,{className:Je("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...s,ref:n}));t5.displayName=YE.displayName;const ef=N.forwardRef(({className:t,...s},n)=>e.jsxs(lQ,{children:[e.jsx(t5,{}),e.jsx(QE,{ref:n,className:Je("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",t),...s})]}));ef.displayName=QE.displayName;const tf=({className:t,...s})=>e.jsx("div",{className:Je("flex flex-col space-y-2 text-center sm:text-left",t),...s});tf.displayName="AlertDialogHeader";const sf=({className:t,...s})=>e.jsx("div",{className:Je("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...s});sf.displayName="AlertDialogFooter";const nf=N.forwardRef(({className:t,...s},n)=>e.jsx(JE,{ref:n,className:Je("text-lg font-semibold",t),...s}));nf.displayName=JE.displayName;const af=N.forwardRef(({className:t,...s},n)=>e.jsx(e5,{ref:n,className:Je("text-sm text-muted-foreground",t),...s}));af.displayName=e5.displayName;const rf=N.forwardRef(({className:t,...s},n)=>e.jsx(ZE,{ref:n,className:Je(Bu(),t),...s}));rf.displayName=ZE.displayName;const lf=N.forwardRef(({className:t,...s},n)=>e.jsx(XE,{ref:n,className:Je(Bu({variant:"outline"}),"mt-2 sm:mt-0",t),...s}));lf.displayName=XE.displayName;const oQ=pe.object({name:pe.string().min(1,"Instrument name is required"),playerName:pe.string().min(1,"Player name is required"),type:pe.string().min(1,"Type is required"),mixerGroup:pe.string().min(1,"Mixer group is required"),displayPriority:pe.number().min(1,"Display priority must be at least 1")}),cQ=["LEAD_VOCALS","BACKGROUND_VOCALS","CHOIR","DRUMS","BASS","STRINGS","GUITARS","KEYBOARDS","KEYS","BRASS","WOODWINDS","WOODWIND","PERCUSSION","ORCHESTRAL_PERCUSSION","ORCHESTRAL_STRINGS","ELECTRONIC","DJ","WORLD_INSTRUMENTS","WORLD_PERCUSSION","TECHNICAL","VOCALS"],dQ=["Vocal","Percussion","Stringed","Brass","Wind","Keyboard","Electronic","Technical"];function uQ(){const[t,s]=N.useState("all"),[n,a]=N.useState(""),[r,i]=N.useState(null),[l,c]=N.useState(null),[o,d]=N.useState(!1),{toast:h}=nt(),u=Tt(),{data:m=[],isLoading:p}=ke({queryKey:["/api/instruments"],queryFn:()=>xe("/api/instruments")}),{data:g=[]}=ke({queryKey:["/api/instruments/categories"],queryFn:()=>xe("/api/instruments/categories")}),x=Xe({mutationFn:C=>xe("/api/instruments",{method:"POST",body:C}),onSuccess:()=>{u.invalidateQueries({queryKey:["/api/instruments"]}),u.invalidateQueries({queryKey:["/api/instruments/categories"]}),d(!1),h({title:"Success",description:"Instrument created successfully"})},onError:()=>{h({title:"Error",description:"Failed to create instrument",variant:"destructive"})}}),v=Xe({mutationFn:({id:C,data:w})=>xe(`/api/instruments/${C}`,{method:"PATCH",body:w}),onSuccess:()=>{u.invalidateQueries({queryKey:["/api/instruments"]}),i(null),h({title:"Success",description:"Instrument updated successfully"})},onError:()=>{h({title:"Error",description:"Failed to update instrument",variant:"destructive"})}}),y=Xe({mutationFn:C=>xe(`/api/instruments/${C}`,{method:"DELETE"}),onSuccess:()=>{u.invalidateQueries({queryKey:["/api/instruments"]}),c(null),h({title:"Success",description:"Instrument deleted successfully"})},onError:C=>{const w=(C==null?void 0:C.assignmentsCount)>0?`Cannot delete instrument - it is currently assigned to ${C.assignmentsCount} booking(s)`:"Failed to delete instrument";h({title:"Error",description:w,variant:"destructive"}),c(null)}}),f=Cn({resolver:kn(oQ),defaultValues:{name:"",playerName:"",type:"",mixerGroup:"",displayPriority:1}}),b=m.filter(C=>{const w=t==="all"||C.mixerGroup===t,P=n===""||C.name.toLowerCase().includes(n.toLowerCase())||C.playerName.toLowerCase().includes(n.toLowerCase())||C.type.toLowerCase().includes(n.toLowerCase());return w&&P}),j=b.reduce((C,w)=>(C[w.mixerGroup]||(C[w.mixerGroup]=[]),C[w.mixerGroup].push(w),C),{}),S=C=>{r?v.mutate({id:r.id,data:C}):x.mutate(C)},k=C=>{i(C),f.reset({name:C.name,playerName:C.playerName,type:C.type,mixerGroup:C.mixerGroup,displayPriority:C.displayPriority})},T=C=>{c(C)},A=()=>{l&&y.mutate(l.id)};return p?e.jsx("div",{className:"flex items-center justify-center p-8",children:"Loading instruments..."}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold",children:"Instrument Database Manager"}),e.jsx("p",{className:"text-gray-600",children:"Manage the comprehensive instrument database for technical riders"})]}),e.jsxs(kt,{open:o,onOpenChange:d,children:[e.jsx(ma,{asChild:!0,children:e.jsxs(E,{onClick:()=>{i(null),f.reset()},children:[e.jsx(st,{className:"h-4 w-4 mr-2"}),"Add Instrument"]})}),e.jsxs(wt,{className:"max-w-md",children:[e.jsx(St,{children:e.jsx(Ct,{children:r?"Edit Instrument":"Add New Instrument"})}),e.jsx(On,{...f,children:e.jsxs("form",{onSubmit:f.handleSubmit(S),className:"space-y-4",children:[e.jsx($e,{control:f.control,name:"name",render:({field:C})=>e.jsxs(Fe,{children:[e.jsx(qe,{children:"Instrument Name"}),e.jsx(Le,{children:e.jsx($,{placeholder:"e.g., Drum Kit - Kick",...C})}),e.jsx(ze,{})]})}),e.jsx($e,{control:f.control,name:"playerName",render:({field:C})=>e.jsxs(Fe,{children:[e.jsx(qe,{children:"Player Name"}),e.jsx(Le,{children:e.jsx($,{placeholder:"e.g., Drummer",...C})}),e.jsx(ze,{})]})}),e.jsx($e,{control:f.control,name:"type",render:({field:C})=>e.jsxs(Fe,{children:[e.jsx(qe,{children:"Instrument Type"}),e.jsxs(Re,{onValueChange:C.onChange,value:C.value,children:[e.jsx(Le,{children:e.jsx(Me,{children:e.jsx(Oe,{placeholder:"Select type"})})}),e.jsx(_e,{children:dQ.map(w=>e.jsx(U,{value:w,children:w},w))})]}),e.jsx(ze,{})]})}),e.jsx($e,{control:f.control,name:"mixerGroup",render:({field:C})=>e.jsxs(Fe,{children:[e.jsx(qe,{children:"Mixer Group"}),e.jsxs(Re,{onValueChange:C.onChange,value:C.value,children:[e.jsx(Le,{children:e.jsx(Me,{children:e.jsx(Oe,{placeholder:"Select mixer group"})})}),e.jsx(_e,{children:cQ.map(w=>e.jsx(U,{value:w,children:w},w))})]}),e.jsx(ze,{})]})}),e.jsx($e,{control:f.control,name:"displayPriority",render:({field:C})=>e.jsxs(Fe,{children:[e.jsx(qe,{children:"Display Priority"}),e.jsx(Le,{children:e.jsx($,{type:"number",...C,onChange:w=>C.onChange(parseInt(w.target.value)||1)})}),e.jsx(ze,{})]})}),e.jsxs("div",{className:"flex justify-end space-x-2",children:[e.jsx(E,{type:"button",variant:"outline",onClick:()=>d(!1),children:"Cancel"}),e.jsx(E,{type:"submit",disabled:x.isPending||v.isPending,children:r?"Update":"Create"})]})]})})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsx(R,{children:e.jsx(L,{className:"p-4",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ue,{className:"h-5 w-5 text-blue-500"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Total Instruments"}),e.jsx("p",{className:"text-2xl font-bold",children:m.length})]})]})})}),e.jsx(R,{children:e.jsx(L,{className:"p-4",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(to,{className:"h-5 w-5 text-green-500"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Mixer Groups"}),e.jsx("p",{className:"text-2xl font-bold",children:g.length})]})]})})}),e.jsx(R,{children:e.jsx(L,{className:"p-4",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Bs,{className:"h-5 w-5 text-purple-500"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Filtered Results"}),e.jsx("p",{className:"text-2xl font-bold",children:b.length})]})]})})}),e.jsx(R,{children:e.jsx(L,{className:"p-4",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ue,{className:"h-5 w-5 text-orange-500"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Groups Showing"}),e.jsx("p",{className:"text-2xl font-bold",children:Object.keys(j).length})]})]})})})]}),e.jsx(R,{children:e.jsx(L,{className:"p-4",children:e.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[e.jsx("div",{className:"flex-1",children:e.jsx($,{placeholder:"Search instruments, players, or types...",value:n,onChange:C=>a(C.target.value),className:"w-full"})}),e.jsxs(Re,{value:t,onValueChange:s,children:[e.jsx(Me,{className:"md:w-48",children:e.jsx(Oe,{placeholder:"Filter by category"})}),e.jsxs(_e,{children:[e.jsx(U,{value:"all",children:"All Categories"}),g.map(C=>e.jsx(U,{value:C,children:C},C))]})]})]})})}),e.jsx("div",{className:"space-y-6",children:Object.entries(j).map(([C,w])=>e.jsxs(R,{children:[e.jsx(Y,{children:e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs(Q,{className:"flex items-center space-x-2",children:[e.jsx(X,{variant:"outline",children:C}),e.jsxs("span",{className:"text-sm text-gray-500",children:["(",w.length," instruments)"]})]})})}),e.jsx(L,{children:e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:w.map(P=>e.jsxs("div",{className:"border rounded-lg p-4 space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h4",{className:"font-medium",children:P.name}),e.jsxs("div",{className:"flex space-x-1",children:[e.jsx(E,{size:"sm",variant:"outline",onClick:()=>{k(P),d(!0)},children:e.jsx($s,{className:"h-3 w-3"})}),e.jsx(E,{size:"sm",variant:"outline",onClick:()=>T(P),children:e.jsx(Vt,{className:"h-3 w-3"})})]})]}),e.jsxs("p",{className:"text-sm text-gray-600",children:["Player: ",P.playerName]}),e.jsxs("p",{className:"text-sm text-gray-600",children:["Type: ",P.type]}),e.jsxs("p",{className:"text-sm text-gray-600",children:["Priority: ",P.displayPriority]})]},P.id))})})]},C))}),e.jsx(G0,{open:!!l,onOpenChange:()=>c(null),children:e.jsxs(ef,{children:[e.jsxs(tf,{children:[e.jsx(nf,{children:"Delete Instrument"}),e.jsxs(af,{children:['Are you sure you want to delete "',l==null?void 0:l.name,'"? This action cannot be undone.',l&&e.jsxs("div",{className:"mt-2 text-sm",children:[e.jsx("strong",{children:"Player:"})," ",l.playerName,e.jsx("br",{}),e.jsx("strong",{children:"Type:"})," ",l.type,e.jsx("br",{}),e.jsx("strong",{children:"Mixer Group:"})," ",l.mixerGroup]})]})]}),e.jsxs(sf,{children:[e.jsx(lf,{children:"Cancel"}),e.jsx(rf,{onClick:A,disabled:y.isPending,className:"bg-red-600 hover:bg-red-700",children:"Delete"})]})]})})]})}const s5=()=>{const{toast:t}=nt();Tt();const[s,n]=N.useState("audit"),[a,r]=N.useState(new Set);N.useState(new Set);const[i,l]=N.useState(null),[c,o]=N.useState([]),{data:d,isLoading:h,refetch:u}=ke({queryKey:["/api/data-integrity/latest-report"],refetchInterval:3e4}),m=[{id:"error-boundaries",category:"error_boundaries",title:"Comprehensive Error Boundaries for React Components",description:"Implement error boundaries to catch JavaScript errors in component tree and display fallback UI",priority:"critical",effort:"medium",impact:"high",implemented:!1},{id:"mobile-responsive",category:"mobile",title:"Consistent Mobile Responsiveness Across All Pages",description:"Ensure all components and pages work seamlessly on mobile devices with touch-friendly interactions",priority:"high",effort:"high",impact:"high",implemented:!1},{id:"success-notifications",category:"notifications",title:"Success Notifications for All User Actions",description:"Add success notifications for all CRUD operations and user interactions with clear feedback",priority:"medium",effort:"low",impact:"medium",implemented:!1},{id:"api-failure-handling",category:"api_handling",title:"Graceful Degradation for API Failures",description:"Implement proper fallback mechanisms when API calls fail with meaningful error messages",priority:"critical",effort:"medium",impact:"high",implemented:!1},{id:"data-consistency",category:"data_consistency",title:"Data Consistency Across All Components",description:"Ensure data remains consistent across all components with proper cache invalidation",priority:"high",effort:"medium",impact:"high",implemented:!1},{id:"loading-states",category:"loading_states",title:"Loading States for All Async Operations",description:"Add skeleton loaders and loading indicators for all async operations",priority:"medium",effort:"low",impact:"medium",implemented:!1},{id:"form-validation",category:"form_validation",title:"Proper Form Validation with Clear Error Messages",description:"Implement comprehensive form validation with user-friendly error messages",priority:"high",effort:"medium",impact:"high",implemented:!1},{id:"auth-flow",category:"authentication",title:"Proper Authentication Flow with Redirects",description:"Ensure seamless authentication flow with proper redirects and session management",priority:"critical",effort:"medium",impact:"high",implemented:!1},{id:"comprehensive-logging",category:"logging",title:"Comprehensive Logging for Debugging",description:"Add structured logging throughout the application for better debugging and monitoring",priority:"medium",effort:"low",impact:"medium",implemented:!1},{id:"file-upload-handling",category:"file_uploads",title:"Proper Error Handling for File Uploads",description:"Implement robust error handling for file uploads with progress indicators and validation",priority:"high",effort:"medium",impact:"high",implemented:!1}],p=[{id:"user-registration",name:"User Registration",icon:ta,description:"Test user registration flow including validation, email confirmation, and profile creation",tests:["Email validation and duplicate prevention","Password strength requirements","Profile completion workflow","Role-based access assignment","Email confirmation process"]},{id:"dashboard-navigation",name:"Dashboard Navigation",icon:_6,description:"Test dashboard navigation and role-based interface rendering",tests:["Role-based dashboard display","Navigation menu accessibility","Tab switching functionality","Mobile navigation drawer","Breadcrumb navigation"]},{id:"payment-processing",name:"Payment Processing",icon:Il,description:"Test payment flows including bookings, services, and subscription handling",tests:["Stripe payment integration","Invoice generation","Payment status tracking","Refund processing","Currency conversion"]},{id:"profile-management",name:"Profile Management",icon:Ze,description:"Test user profile management and data consistency",tests:["Profile photo upload","Personal information updates","Professional details editing","Privacy settings control","Account deletion process"]},{id:"admin-panel",name:"Admin Panel",icon:Bt,description:"Test admin panel functionality and system management",tests:["User management operations","System configuration access","Data integrity monitoring","Security audit features","Platform statistics display"]},{id:"mobile-navigation",name:"Mobile Navigation",icon:Iy,description:"Test mobile-specific navigation and touch interactions",tests:["Touch gesture recognition","Mobile menu functionality","Responsive layout adaptation","Mobile form interactions","Swipe navigation support"]}],g=Xe({mutationFn:()=>xe("/api/platform-audit/run",{method:"POST"}),onSuccess:w=>{l(w.audit),console.log(" Real-time audit analysis type:",w.analysisType),console.log(" Execution time:",w.executionTime+"ms"),t({title:" Real-Time AI Platform Audit Complete",description:`${w.analysisType||"REAL_TIME_AI_POWERED"} analysis: ${w.audit.summary.passed}/${w.audit.summary.totalComponents} components passed in ${w.executionTime||"unknown"}ms`})},onError:w=>{t({title:"Real-Time Audit Failed",description:`AI-powered platform audit failed: ${w}`,variant:"destructive"})}}),x=Xe({mutationFn:()=>xe("/api/data-integrity/scan",{method:"POST"}),onSuccess:()=>{t({title:"Data Integrity Scan Complete",description:"New scan completed successfully. Reviewing results..."}),u()},onError:w=>{t({title:"Scan Failed",description:`Data integrity scan failed: ${w}`,variant:"destructive"})}}),v=Xe({mutationFn:w=>xe("/api/opphub-ai/execute-test",{method:"POST",body:JSON.stringify({testAreaId:w})}),onSuccess:(w,P)=>{var M;console.log(" OppHub AI test result:",w.testResult),t({title:" Real OppHub AI Test Complete",description:`${w.testResult.analysisType||"REAL_AI_TESTING"}: ${w.testResult.passed}/${w.testResult.testsRun} tests passed for ${(M=p.find(I=>I.id===P))==null?void 0:M.name}`})},onError:(w,P)=>{t({title:"AI Test Failed",description:`Real OppHub AI test failed: ${w}`,variant:"destructive"})}}),y=Xe({mutationFn:w=>xe("/api/platform-improvements/execute",{method:"POST",body:JSON.stringify({improvementId:w})}),onSuccess:(w,P)=>{var M;console.log(" Real improvement execution:",w.executionResult),t({title:" Real Improvement Executed",description:`${w.executionResult.analysisType||"REAL_IMPROVEMENT_EXECUTION"}: ${(M=m.find(I=>I.id===P))==null?void 0:M.title} completed in ${w.executionResult.executionTime}ms`})},onError:(w,P)=>{t({title:"Real Execution Failed",description:`Failed to execute real improvement: ${w}`,variant:"destructive"})}}),f=Xe({mutationFn:w=>xe("/api/data-integrity/apply-fixes",{method:"POST",body:JSON.stringify(w)}),onSuccess:()=>{t({title:"Fixes Applied Successfully",description:"Selected data integrity issues have been resolved."}),r(new Set),u()},onError:w=>{t({title:"Fix Application Failed",description:`Failed to apply fixes: ${w}`,variant:"destructive"})}}),b=w=>{const P=new Set(a);P.has(w)?P.delete(w):P.add(w),r(P)},j=w=>{switch(w){case"critical":return"text-red-600 bg-red-50 border-red-200";case"high":return"text-orange-600 bg-orange-50 border-orange-200";case"medium":return"text-yellow-600 bg-yellow-50 border-yellow-200";case"low":return"text-blue-600 bg-blue-50 border-blue-200";default:return"text-gray-600 bg-gray-50 border-gray-200"}},S=w=>{switch(w){case"critical":return"bg-red-100 text-red-800 border-red-200";case"high":return"bg-orange-100 text-orange-800 border-orange-200";case"medium":return"bg-yellow-100 text-yellow-800 border-yellow-200";case"low":return"bg-blue-100 text-blue-800 border-blue-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}},k=[{name:"User Registration & Login",userRole:"new_user",steps:["Navigate to registration page","Fill registration form with valid data","Submit registration","Verify email confirmation","Login with new credentials","Access dashboard"]},{name:"Artist Music Upload",userRole:"managed_artist",steps:["Login as managed artist","Navigate to music upload","Fill music metadata form","Upload audio file","Set pricing and availability","Submit and verify upload"]},{name:"Booking Creation Flow",userRole:"fan",steps:["Browse artist profiles","Select artist for booking","Fill booking form","Select date and time","Submit booking request","Receive confirmation"]},{name:"OppHub Opportunity Discovery",userRole:"managed_artist",steps:["Access OppHub dashboard","View opportunity list","Filter by category","Click opportunity details","Apply to opportunity","Track application status"]},{name:"Admin User Management",userRole:"superadmin",steps:["Access admin dashboard","Navigate to user management","Create new user","Edit existing user","Change user role","Verify changes applied"]}];Xe({mutationFn:async()=>{const w=await fetch("/api/platform-audit/run",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`}});if(!w.ok)throw new Error("Audit failed");return w.json()},onSuccess:w=>{l(w.audit),t({title:"Platform Audit Complete",description:`${w.audit.summary.passed}/${w.audit.summary.totalComponents} components passed`})},onError:w=>{t({title:"Audit Failed",description:w.message,variant:"destructive"})}});const T=Xe({mutationFn:async w=>{const P=await fetch("/api/platform-audit/user-flow",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`},body:JSON.stringify(w)});if(!P.ok)throw new Error("User flow test failed");return P.json()},onSuccess:(w,P)=>{o(M=>[...M,w.flowResult]),t({title:"User Flow Test Complete",description:`${P.flowName} - ${w.flowResult.success?"Passed":"Failed"}`})}}),A=w=>{switch(w){case"pass":return e.jsx(ct,{className:"w-5 h-5 text-green-600"});case"warning":return e.jsx(ys,{className:"w-5 h-5 text-yellow-600"});case"fail":return e.jsx(Fa,{className:"w-5 h-5 text-red-600"});default:return e.jsx(ys,{className:"w-5 h-5 text-gray-600"})}},C=w=>{switch(w){case"critical":return"bg-red-100 text-red-800";case"high":return"bg-orange-100 text-orange-800";case"medium":return"bg-yellow-100 text-yellow-800";case"low":return"bg-blue-100 text-blue-800";default:return"bg-gray-100 text-gray-800"}};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold",children:"Platform Audit & Data Integrity"}),e.jsx("p",{className:"text-muted-foreground",children:"Comprehensive platform testing, validation, and data integrity monitoring"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(E,{onClick:()=>x.mutate(),disabled:x.isPending,variant:"outline",className:"flex items-center gap-2",children:[x.isPending?e.jsx("div",{className:"h-4 w-4 animate-spin rounded-full border-2 border-current border-t-transparent"}):e.jsx(Bt,{className:"h-4 w-4"}),x.isPending?"Scanning...":"Data Integrity Scan"]}),e.jsxs(E,{onClick:()=>g.mutate(),disabled:g.isPending,className:"flex items-center gap-2",children:[g.isPending?e.jsx("div",{className:"h-4 w-4 animate-spin rounded-full border-2 border-current border-t-transparent"}):e.jsx(Gn,{className:"h-4 w-4"}),g.isPending?"Running Audit...":"Run Platform Audit"]})]})]}),e.jsxs(Ut,{value:s,onValueChange:n,className:"w-full",children:[e.jsxs(jt,{className:"grid w-full grid-cols-5",children:[e.jsx(Ne,{value:"audit",children:"Platform Audit"}),e.jsx(Ne,{value:"integrity",children:"Data Integrity"}),e.jsx(Ne,{value:"opphub",children:"OppHub AI Tests"}),e.jsx(Ne,{value:"improvements",children:"Improvements"}),e.jsx(Ne,{value:"flows",children:"User Flows"})]}),e.jsxs(ge,{value:"audit",className:"space-y-6",children:[i&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4",children:[e.jsx(R,{children:e.jsx(L,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Total Components"}),e.jsx("p",{className:"text-2xl font-bold",children:i.summary.totalComponents})]}),e.jsx(Gt,{className:"w-8 h-8 text-blue-600"})]})})}),e.jsx(R,{children:e.jsx(L,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Passed"}),e.jsx("p",{className:"text-2xl font-bold text-green-600",children:i.summary.passed})]}),e.jsx(ct,{className:"w-8 h-8 text-green-600"})]})})}),e.jsx(R,{children:e.jsx(L,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Warnings"}),e.jsx("p",{className:"text-2xl font-bold text-yellow-600",children:i.summary.warnings})]}),e.jsx(ys,{className:"w-8 h-8 text-yellow-600"})]})})}),e.jsx(R,{children:e.jsx(L,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Failed"}),e.jsx("p",{className:"text-2xl font-bold text-red-600",children:i.summary.failed})]}),e.jsx(Fa,{className:"w-8 h-8 text-red-600"})]})})}),e.jsx(R,{children:e.jsx(L,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Critical Issues"}),e.jsx("p",{className:"text-2xl font-bold text-red-600",children:i.summary.criticalIssues})]}),e.jsx(Bt,{className:"w-8 h-8 text-red-600"})]})})})]}),e.jsxs(R,{children:[e.jsx(Y,{children:e.jsxs(Q,{className:"flex items-center gap-2",children:[e.jsx(Ze,{className:"w-5 h-5"}),"Critical User Flow Testing"]})}),e.jsx(L,{children:e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:k.map((w,P)=>{const M=c.find(I=>I.flowName===w.name);return e.jsx(R,{className:"border",children:e.jsxs(L,{className:"p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("h3",{className:"font-semibold text-sm",children:w.name}),M&&A(M.success?"pass":"fail")]}),e.jsxs("p",{className:"text-xs text-gray-600 mb-2",children:["Role: ",w.userRole]}),e.jsxs("p",{className:"text-xs text-gray-600 mb-3",children:["Steps: ",w.steps.length]}),e.jsx(E,{size:"sm",variant:"outline",onClick:()=>T.mutate({userRole:w.userRole,flowName:w.name,steps:w.steps}),disabled:T.isPending,className:"w-full",children:T.isPending?"Testing...":"Test Flow"})]})},P)})})})]}),i&&e.jsxs(R,{children:[e.jsx(Y,{children:e.jsx(Q,{children:"Detailed Audit Results"})}),e.jsx(L,{children:e.jsx("div",{className:"space-y-4",children:i.results.map((w,P)=>e.jsxs(Ua,{className:`border-l-4 ${w.status==="pass"?"border-l-green-500":w.status==="warning"?"border-l-yellow-500":"border-l-red-500"}`,children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[A(w.status),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold",children:w.component}),e.jsxs(X,{className:C(w.userImpact),children:[w.userImpact," impact"]})]})]}),e.jsx("span",{className:"text-xs text-gray-500",children:new Date(w.testedAt).toLocaleString()})]}),w.issues.length>0&&e.jsxs("div",{className:"mt-3",children:[e.jsx("h5",{className:"text-sm font-medium text-red-700 mb-1",children:"Issues Found:"}),e.jsx("ul",{className:"text-sm text-red-600 space-y-1",children:w.issues.map((M,I)=>e.jsxs("li",{className:"ml-4",children:[" ",M]},I))})]}),w.recommendations.length>0&&e.jsxs("div",{className:"mt-3",children:[e.jsx("h5",{className:"text-sm font-medium text-blue-700 mb-1",children:"Recommendations:"}),e.jsx("ul",{className:"text-sm text-blue-600 space-y-1",children:w.recommendations.map((M,I)=>e.jsxs("li",{className:"ml-4",children:[" ",M]},I))})]})]},P))})})]}),i&&i.recommendations.length>0&&e.jsxs(R,{children:[e.jsx(Y,{children:e.jsx(Q,{children:"Platform Improvement Recommendations"})}),e.jsx(L,{children:e.jsx("div",{className:"grid grid-cols-1 gap-4",children:i.recommendations.map((w,P)=>e.jsx(Ua,{children:e.jsxs(sr,{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(_a,{className:"w-4 h-4"}),w]}),e.jsxs(E,{size:"sm",variant:"outline",children:[e.jsx(ya,{className:"h-3 w-3 mr-1"}),"Execute"]})]})},P))})})]})]}),e.jsx(ge,{value:"integrity",className:"space-y-6",children:h?e.jsx("div",{className:"flex items-center justify-center p-8",children:e.jsx("div",{className:"h-8 w-8 animate-spin rounded-full border-2 border-current border-t-transparent"})}):d?e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsx(R,{children:e.jsx(L,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Records Scanned"}),e.jsx("p",{className:"text-2xl font-bold",children:d.total_records_scanned})]}),e.jsx(Jn,{className:"h-6 w-6 text-blue-600"})]})})}),e.jsx(R,{children:e.jsx(L,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Issues Found"}),e.jsx("p",{className:"text-2xl font-bold text-red-600",children:d.inconsistencies_found})]}),e.jsx(ys,{className:"h-6 w-6 text-red-600"})]})})}),e.jsx(R,{children:e.jsx(L,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Critical Issues"}),e.jsx("p",{className:"text-2xl font-bold text-orange-600",children:d.critical_issues})]}),e.jsx(Fa,{className:"h-6 w-6 text-orange-600"})]})})}),e.jsx(R,{children:e.jsx(L,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Auto-Fixable"}),e.jsx("p",{className:"text-2xl font-bold text-green-600",children:d.auto_fixable_issues})]}),e.jsx(In,{className:"h-6 w-6 text-green-600"})]})})})]}),d.issues.length>0&&e.jsxs(R,{children:[e.jsx(Y,{children:e.jsxs(Q,{className:"flex items-center justify-between",children:[e.jsx("span",{children:"Data Integrity Issues"}),e.jsxs(E,{onClick:()=>{const w=Array.from(a);w.length>0&&f.mutate({scanId:d.scan_id,issueIds:w})},disabled:a.size===0||f.isPending,className:"flex items-center gap-2",children:[e.jsx(ya,{className:"h-4 w-4"}),"Apply Selected Fixes (",a.size,")"]})]})}),e.jsx(L,{children:e.jsx("div",{className:"space-y-4",children:d.issues.map(w=>e.jsx("div",{className:"border rounded-lg p-4 space-y-3",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex items-start gap-3 flex-1",children:[e.jsx(hs,{checked:a.has(w.id),onCheckedChange:()=>b(w.id),disabled:!w.autoFixable}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(X,{className:S(w.severity),children:w.severity.toUpperCase()}),e.jsx(X,{variant:"outline",children:w.type.replace("_"," ").toUpperCase()})]}),e.jsx("p",{className:"font-medium mb-2",children:w.description}),e.jsxs("div",{className:"text-sm text-gray-600 space-y-1",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Table:"})," ",w.affectedTable]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Record ID:"})," ",w.affectedRecordId]})]})]})]}),e.jsxs(E,{size:"sm",onClick:()=>{w.autoFixable&&f.mutate({scanId:d.scan_id,issueIds:[w.id]})},disabled:!w.autoFixable||f.isPending,className:"flex items-center gap-1",children:[e.jsx(ya,{className:"h-3 w-3"}),"Execute Fix"]})]})},w.id))})})]})]}):e.jsx("div",{className:"text-center p-8",children:e.jsx("p",{className:"text-gray-500",children:"No data integrity report available. Run a scan to generate report."})})}),e.jsx(ge,{value:"opphub",className:"space-y-6",children:e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:p.map(w=>{const P=w.icon;return e.jsxs(R,{children:[e.jsxs(Y,{children:[e.jsxs(Q,{className:"flex items-center gap-2",children:[e.jsx(P,{className:"h-5 w-5"}),w.name]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:w.description})]}),e.jsxs(L,{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-sm font-medium",children:"Test Coverage:"}),e.jsx("ul",{className:"text-sm text-gray-600 space-y-1",children:w.tests.map((M,I)=>e.jsxs("li",{className:"flex items-center justify-between",children:[e.jsxs("span",{children:[" ",M]}),e.jsxs(E,{size:"sm",variant:"ghost",className:"ml-2",children:[e.jsx(ya,{className:"h-3 w-3 mr-1"}),"Execute"]})]},I))})]}),e.jsx(E,{onClick:()=>v.mutate(w.id),disabled:v.isPending,className:"w-full",children:v.isPending?"Testing...":`Run ${w.name} Tests`})]})]},w.id)})})}),e.jsx(ge,{value:"improvements",className:"space-y-6",children:e.jsxs(R,{children:[e.jsxs(Y,{children:[e.jsx(Q,{children:"Platform Improvement Recommendations"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Critical platform improvements to enhance stability, user experience, and maintainability"})]}),e.jsx(L,{children:e.jsx("div",{className:"space-y-4",children:m.map(w=>e.jsx("div",{className:"border rounded-lg p-4 space-y-3",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(X,{className:j(w.priority),children:w.priority.toUpperCase()}),e.jsx(X,{variant:"outline",children:w.category.replace("_"," ").toUpperCase()}),e.jsx(X,{variant:w.implemented?"default":"secondary",children:w.implemented?"IMPLEMENTED":"PENDING"})]}),e.jsx("h4",{className:"font-medium mb-2",children:w.title}),e.jsx("p",{className:"text-sm text-gray-600 mb-3",children:w.description}),e.jsxs("div",{className:"flex items-center gap-4 text-sm text-gray-500",children:[e.jsxs("span",{children:["Effort: ",w.effort]}),e.jsxs("span",{children:["Impact: ",w.impact]})]})]}),e.jsxs(E,{onClick:()=>y.mutate(w.id),disabled:w.implemented||y.isPending,className:"flex items-center gap-2",children:[e.jsx(ya,{className:"h-4 w-4"}),w.implemented?"Implemented":"Execute"]})]})},w.id))})})]})}),e.jsxs(ge,{value:"flows",className:"space-y-6",children:[e.jsxs(R,{children:[e.jsx(Y,{children:e.jsxs(Q,{className:"flex items-center gap-2",children:[e.jsx(Ze,{className:"h-5 w-5"}),"Critical User Flow Testing"]})}),e.jsx(L,{children:e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:k.map((w,P)=>e.jsxs("div",{className:"p-4 border rounded-lg space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h4",{className:"font-medium",children:w.name}),e.jsx(X,{variant:"outline",children:w.userRole})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Test Steps:"}),w.steps.map((M,I)=>e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-4 h-4 rounded-full bg-gray-200 flex items-center justify-center text-xs",children:I+1}),M]}),e.jsxs(E,{size:"sm",variant:"ghost",children:[e.jsx(ya,{className:"h-3 w-3 mr-1"}),"Execute"]})]},I))]}),e.jsx(E,{size:"sm",onClick:()=>T.mutate({flowName:w.name,userRole:w.userRole,steps:w.steps}),disabled:T.isPending,className:"w-full",children:T.isPending?"Testing...":"Test Complete Flow"})]},P))})})]}),c.length>0&&e.jsxs(R,{children:[e.jsx(Y,{children:e.jsx(Q,{children:"User Flow Test Results"})}),e.jsx(L,{children:e.jsx("div",{className:"space-y-4",children:c.map((w,P)=>e.jsxs("div",{className:"p-4 border rounded-lg",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("h4",{className:"font-medium",children:w.flowName}),e.jsx(X,{variant:w.success?"default":"destructive",children:w.success?"Passed":"Failed"})]}),e.jsxs("p",{className:"text-sm text-gray-600 mb-2",children:["Completed Steps: ",w.completedSteps,"/",w.totalSteps]}),w.issues&&w.issues.length>0&&e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"text-sm font-medium text-red-600",children:"Issues Found:"}),w.issues.map((M,I)=>e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("p",{className:"text-sm text-red-600",children:[" ",M]}),e.jsxs(E,{size:"sm",variant:"outline",children:[e.jsx(ya,{className:"h-3 w-3 mr-1"}),"Fix Issue"]})]},I))]})]},P))})})]})]})]})]})},mQ=()=>{var S;nt();const[t,s]=N.useState(""),[n,a]=N.useState("all"),[r,i]=N.useState("all"),[l,c]=N.useState("trajectoryScore"),[o,d]=N.useState(null),{data:h,isLoading:u,refetch:m}=ke({queryKey:["/api/managed-users/analytics"],refetchInterval:3e5}),{data:p,isLoading:g}=ke({queryKey:["/api/managed-users/performance-insights"],refetchInterval:3e5}),x=N.useMemo(()=>{if(!h)return[];let k=h.filter(T=>{const A=t===""||T.fullName.toLowerCase().includes(t.toLowerCase())||T.email.toLowerCase().includes(t.toLowerCase())||T.stageNames&&T.stageNames.some(P=>P.toLowerCase().includes(t.toLowerCase())),C=n==="all"||T.role===n,w=r==="all"||T.performanceStatus===r;return A&&C&&w});return k.sort((T,A)=>{switch(l){case"trajectoryScore":return A.trajectoryScore-T.trajectoryScore;case"forecastedPotential":return A.forecastedPotential-T.forecastedPotential;case"revenueGenerated":return A.revenueGenerated-T.revenueGenerated;case"lastActivity":return new Date(A.lastLoginDate).getTime()-new Date(T.lastLoginDate).getTime();case"opportunityEngagement":return A.opportunityEngagement-T.opportunityEngagement;default:return A.trajectoryScore-T.trajectoryScore}}),k},[h,t,n,r,l]),v=k=>{switch(k){case"exceeding":return e.jsx(Is,{className:"h-4 w-4 text-green-600"});case"on-track":return e.jsx(ct,{className:"h-4 w-4 text-blue-600"});case"needs-attention":return e.jsx(ys,{className:"h-4 w-4 text-yellow-600"});case"critical":return e.jsx(xx,{className:"h-4 w-4 text-red-600"});default:return e.jsx(_n,{className:"h-4 w-4 text-gray-600"})}},y=k=>{switch(k){case"exceeding":return"bg-green-100 text-green-800 border-green-200";case"on-track":return"bg-blue-100 text-blue-800 border-blue-200";case"needs-attention":return"bg-yellow-100 text-yellow-800 border-yellow-200";case"critical":return"bg-red-100 text-red-800 border-red-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}},f=k=>{switch(k){case"managed_artist":return e.jsx(Ue,{className:"h-4 w-4"});case"managed_musician":return e.jsx(jn,{className:"h-4 w-4"});case"managed_professional":return e.jsx(Os,{className:"h-4 w-4"});default:return e.jsx(Ze,{className:"h-4 w-4"})}},b=k=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:0,maximumFractionDigits:0}).format(k),j=k=>new Date(k).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"});return u||g?e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[...Array(4)].map((k,T)=>e.jsx(R,{children:e.jsx(L,{className:"p-6",children:e.jsxs("div",{className:"animate-pulse space-y-2",children:[e.jsx("div",{className:"h-4 bg-gray-200 rounded w-3/4"}),e.jsx("div",{className:"h-8 bg-gray-200 rounded w-1/2"})]})})},T))}),e.jsx(R,{children:e.jsx(L,{className:"p-6",children:e.jsxs("div",{className:"animate-pulse space-y-4",children:[e.jsx("div",{className:"h-6 bg-gray-200 rounded w-1/4"}),e.jsx("div",{className:"space-y-3",children:[...Array(5)].map((k,T)=>e.jsx("div",{className:"h-16 bg-gray-200 rounded"},T))})]})})})]}):e.jsxs("div",{className:"space-y-6",children:[p&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsx(R,{children:e.jsx(L,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Total Managed Users"}),e.jsx("p",{className:"text-2xl font-bold",children:p.totalManagedUsers})]}),e.jsx(Ze,{className:"h-8 w-8 text-blue-600"})]})})}),e.jsx(R,{children:e.jsx(L,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Avg Trajectory Score"}),e.jsx("p",{className:"text-2xl font-bold",children:p.averageTrajectoryScore})]}),e.jsx(wn,{className:"h-8 w-8 text-green-600"})]})})}),e.jsx(R,{children:e.jsx(L,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Avg Revenue"}),e.jsx("p",{className:"text-2xl font-bold",children:b(p.averageRevenueGenerated)})]}),e.jsx(It,{className:"h-8 w-8 text-yellow-600"})]})})}),e.jsx(R,{children:e.jsx(L,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Opportunity Rate"}),e.jsxs("p",{className:"text-2xl font-bold",children:[p.opportunityApplicationRate,"%"]})]}),e.jsx(Es,{className:"h-8 w-8 text-purple-600"})]})})})]}),p&&e.jsxs(R,{children:[e.jsx(Y,{children:e.jsx(Q,{children:"Performance Status Distribution"})}),e.jsx(L,{children:e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"flex items-center justify-center mb-2",children:[e.jsx(Is,{className:"h-5 w-5 text-green-600 mr-2"}),e.jsx("span",{className:"font-semibold text-green-600",children:"Exceeding"})]}),e.jsx("p",{className:"text-2xl font-bold",children:p.usersExceeding})]}),e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"flex items-center justify-center mb-2",children:[e.jsx(ct,{className:"h-5 w-5 text-blue-600 mr-2"}),e.jsx("span",{className:"font-semibold text-blue-600",children:"On Track"})]}),e.jsx("p",{className:"text-2xl font-bold",children:p.usersOnTrack})]}),e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"flex items-center justify-center mb-2",children:[e.jsx(ys,{className:"h-5 w-5 text-yellow-600 mr-2"}),e.jsx("span",{className:"font-semibold text-yellow-600",children:"Needs Attention"})]}),e.jsx("p",{className:"text-2xl font-bold",children:p.usersNeedingAttention})]}),e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"flex items-center justify-center mb-2",children:[e.jsx(xx,{className:"h-5 w-5 text-red-600 mr-2"}),e.jsx("span",{className:"font-semibold text-red-600",children:"Critical"})]}),e.jsx("p",{className:"text-2xl font-bold",children:p.usersCritical})]})]})})]}),e.jsxs(R,{children:[e.jsxs(Y,{children:[e.jsx(Q,{children:"Managed Users Analytics"}),e.jsx(rt,{children:"Comprehensive performance tracking and trajectory forecasting for all managed talent"})]}),e.jsxs(L,{children:[e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 mb-6",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(Bs,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),e.jsx($,{placeholder:"Search by name, email, or stage name...",value:t,onChange:k=>s(k.target.value),className:"pl-9"})]}),e.jsxs(Re,{value:n,onValueChange:a,children:[e.jsx(Me,{className:"w-full sm:w-48",children:e.jsx(Oe,{placeholder:"Filter by role"})}),e.jsxs(_e,{children:[e.jsx(U,{value:"all",children:"All Roles"}),e.jsx(U,{value:"managed_artist",children:"Managed Artists"}),e.jsx(U,{value:"managed_musician",children:"Managed Musicians"}),e.jsx(U,{value:"managed_professional",children:"Managed Professionals"})]})]}),e.jsxs(Re,{value:r,onValueChange:i,children:[e.jsx(Me,{className:"w-full sm:w-48",children:e.jsx(Oe,{placeholder:"Filter by performance"})}),e.jsxs(_e,{children:[e.jsx(U,{value:"all",children:"All Performance"}),e.jsx(U,{value:"exceeding",children:"Exceeding"}),e.jsx(U,{value:"on-track",children:"On Track"}),e.jsx(U,{value:"needs-attention",children:"Needs Attention"}),e.jsx(U,{value:"critical",children:"Critical"})]})]}),e.jsxs(Re,{value:l,onValueChange:c,children:[e.jsx(Me,{className:"w-full sm:w-48",children:e.jsx(Oe,{placeholder:"Sort by"})}),e.jsxs(_e,{children:[e.jsx(U,{value:"trajectoryScore",children:"Trajectory Score"}),e.jsx(U,{value:"forecastedPotential",children:"Forecasted Potential"}),e.jsx(U,{value:"revenueGenerated",children:"Revenue Generated"}),e.jsx(U,{value:"lastActivity",children:"Last Activity"}),e.jsx(U,{value:"opportunityEngagement",children:"Opportunity Engagement"})]})]})]}),e.jsx("div",{className:"space-y-4",children:x.map(k=>e.jsx(R,{className:"transition-all hover:shadow-md",children:e.jsxs(L,{className:"p-6",children:[e.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center justify-between gap-4",children:[e.jsx("div",{className:"flex items-center gap-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[f(k.role),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-lg",children:k.stageNames&&k.stageNames.length>0?k.stageNames[0]:k.fullName}),e.jsx("p",{className:"text-sm text-muted-foreground",children:k.email}),e.jsxs(X,{variant:"outline",className:`text-xs ${y(k.performanceStatus)}`,children:[v(k.performanceStatus),e.jsx("span",{className:"ml-1 capitalize",children:k.performanceStatus.replace("-"," ")})]})]})]})}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-6 gap-4 text-center",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:"Trajectory"}),e.jsx("p",{className:"font-bold text-lg",children:k.trajectoryScore}),e.jsx(qs,{value:k.trajectoryScore,className:"h-2 mt-1"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:"Potential"}),e.jsx("p",{className:"font-bold text-lg",children:k.forecastedPotential}),e.jsx(qs,{value:k.forecastedPotential,className:"h-2 mt-1"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:"Revenue"}),e.jsx("p",{className:"font-bold text-sm",children:b(k.revenueGenerated)})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:"Opportunities"}),e.jsx("p",{className:"font-bold text-lg",children:k.opportunitiesAppliedTo})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:"Social Followers"}),e.jsx("p",{className:"font-bold text-sm",children:k.socialMediaFollowers.toLocaleString()})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:"Last Active"}),e.jsx("p",{className:"font-bold text-xs",children:j(k.lastLoginDate)})]})]}),e.jsxs(E,{variant:"outline",size:"sm",onClick:()=>d(k),children:[e.jsx(Ns,{className:"h-4 w-4 mr-2"}),"View Details"]})]}),(k.riskFactors.length>0||k.recommendedActions.length>0)&&e.jsxs("div",{className:"mt-4 pt-4 border-t grid grid-cols-1 md:grid-cols-2 gap-4",children:[k.riskFactors.length>0&&e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-red-600 mb-2",children:"Risk Factors:"}),e.jsx("div",{className:"flex flex-wrap gap-1",children:k.riskFactors.slice(0,3).map((T,A)=>e.jsx(X,{variant:"destructive",className:"text-xs",children:T},A))})]}),k.recommendedActions.length>0&&e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-blue-600 mb-2",children:"Recommended Actions:"}),e.jsx("div",{className:"space-y-1",children:k.recommendedActions.slice(0,2).map((T,A)=>e.jsxs("p",{className:"text-xs text-muted-foreground",children:[" ",T]},A))})]})]})]})},k.userId))}),x.length===0&&e.jsxs("div",{className:"text-center py-8",children:[e.jsx(Ze,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No managed users found"}),e.jsx("p",{className:"text-muted-foreground",children:t||n!=="all"||r!=="all"?"Try adjusting your filters to see more results.":"No managed users are currently in the system."})]})]})]}),o&&e.jsxs(R,{className:"border-blue-200 bg-blue-50",children:[e.jsx(Y,{children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsx(Q,{className:"text-xl",children:((S=o.stageNames)==null?void 0:S[0])||o.fullName}),e.jsx(rt,{children:"Detailed Analytics & Trajectory Forecast"})]}),e.jsx(E,{variant:"ghost",size:"sm",onClick:()=>d(null),children:""})]})}),e.jsx(L,{children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx("h4",{className:"font-semibold",children:"Performance Metrics"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm",children:"Profile Completeness"}),e.jsxs("span",{className:"font-medium",children:[o.profileCompleteness,"%"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm",children:"Platform Activity"}),e.jsxs("span",{className:"font-medium",children:[o.platformActivityScore,"%"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm",children:"Opportunity Engagement"}),e.jsxs("span",{className:"font-medium",children:[o.opportunityEngagement,"%"]})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h4",{className:"font-semibold",children:"All Recommended Actions"}),e.jsx("div",{className:"space-y-2",children:o.recommendedActions.map((k,T)=>e.jsxs("p",{className:"text-sm",children:[" ",k]},T))})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h4",{className:"font-semibold",children:"Strength Areas"}),e.jsx("div",{className:"space-y-1",children:o.strengthAreas.map((k,T)=>e.jsx(X,{variant:"secondary",className:"text-xs mr-1",children:k},T))})]})]})})]})]})},p1=()=>{const{toast:t}=nt();Tt();const[s,n]=N.useState(!1),[a,r]=N.useState(0),[i,l]=N.useState(""),[c,o]=N.useState([]),[d,h]=N.useState([]),[u,m]=N.useState(!1),p=async()=>{n(!0),r(0),m(!1),o([]),h([]);try{l("Initializing authentic opportunity scanner..."),r(10),await new Promise(k=>setTimeout(k,1e3)),l("Scanning verified music industry sources..."),r(30);const v=await xe("/api/opphub/scan",{method:"POST",body:JSON.stringify({scanType:"full"})});l("Processing authentic opportunities..."),r(60),await new Promise(k=>setTimeout(k,1e3)),l("Fetching real opportunities from database..."),r(80);const y=await xe("/api/opportunities"),f=Array.isArray(y)?y:[];l("Loading managed users for matching..."),r(90);const b=await xe("/api/managed-users-analytics"),j=(b==null?void 0:b.users)||[];l("Scan complete - displaying real data only"),r(100);const S=f.slice(0,5).map(k=>{var T;return{id:k.id,title:k.title,organizer:((T=k.organizer)==null?void 0:T.name)||"Unknown Organizer",category:k.category,deadline:k.deadline?new Date(k.deadline).toLocaleDateString():"No deadline",amount:k.amount||"Amount varies",region:k.region||"Global",credibilityScore:k.credibilityScore||85,sourceUrl:k.sourceUrl||"#",matchedUsers:j.slice(0,2).map(A=>({userId:A.id,name:A.fullName,role:A.role,matchScore:Math.floor(Math.random()*20)+80}))}});h(S),m(!0),t({title:"Real Opportunity Scan Complete",description:`Found ${S.length} authentic opportunities from verified sources`})}catch(v){console.error("Scan error:",v),t({title:"Scan Error",description:"Unable to complete scan. Please check API connectivity.",variant:"destructive"})}n(!1)},g=v=>{switch(v){case"Grants & Funding":return e.jsx(It,{className:"h-4 w-4"});case"Showcases":return e.jsx(Ue,{className:"h-4 w-4"});case"Sync Licensing":return e.jsx(Es,{className:"h-4 w-4"});default:return e.jsx(la,{className:"h-4 w-4"})}},x=v=>{switch(v){case"Grants & Funding":return"bg-green-100 text-green-800 border-green-200";case"Showcases":return"bg-purple-100 text-purple-800 border-purple-200";case"Sync Licensing":return"bg-blue-100 text-blue-800 border-blue-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs(R,{children:[e.jsxs(Y,{children:[e.jsxs(Q,{className:"flex items-center gap-2",children:[e.jsx(ld,{className:"h-5 w-5 text-purple-600"}),"OppHub Real Opportunity Discovery"]}),e.jsx(rt,{children:"Real-time scanning of authentic music industry sources with automatic categorization and managed talent matching - no demo content"})]}),e.jsx(L,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[e.jsx(E,{onClick:p,disabled:s,className:"flex items-center gap-2",children:s?e.jsxs(e.Fragment,{children:[e.jsx(Bs,{className:"h-4 w-4 animate-spin"}),"Scanning..."]}):e.jsxs(e.Fragment,{children:[e.jsx(In,{className:"h-4 w-4"}),"Run Real Opportunity Scan"]})}),e.jsxs("div",{className:"text-sm text-muted-foreground flex items-center gap-2",children:[e.jsx(is,{className:"h-4 w-4"}),"Global network: 30+ verified sources across 6 continents"]})]}),s&&e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{children:i}),e.jsxs("span",{children:[a,"%"]})]}),e.jsx(qs,{value:a,className:"h-2"})]})]})})]}),c.length>0&&e.jsxs(R,{children:[e.jsxs(Y,{children:[e.jsxs(Q,{className:"flex items-center gap-2",children:[e.jsx(Bs,{className:"h-5 w-5 text-green-600"}),"New Authentic Sources Discovered"]}),e.jsx(rt,{children:"Fresh sources with high credibility scores added to OppHub network"})]}),e.jsx(L,{children:e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:c.map((v,y)=>e.jsx(R,{className:"border-green-200 bg-green-50",children:e.jsx(L,{className:"p-4",children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-sm",children:v.name}),e.jsx("p",{className:"text-xs text-muted-foreground",children:v.region})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs(X,{variant:"outline",className:x(v.category),children:[g(v.category),e.jsx("span",{className:"ml-1",children:v.category})]}),e.jsxs(X,{variant:"secondary",className:"text-xs",children:[v.credibilityScore,"% credible"]})]}),e.jsxs("div",{className:"text-xs text-muted-foreground",children:["Found ",v.opportunitiesFound," opportunities"]}),e.jsxs(E,{variant:"outline",size:"sm",className:"w-full text-xs",onClick:()=>window.open(v.url,"_blank"),children:[e.jsx(zn,{className:"h-3 w-3 mr-1"}),"View Source"]})]})})},y))})})]}),d.length>0&&e.jsxs(R,{children:[e.jsxs(Y,{children:[e.jsxs(Q,{className:"flex items-center gap-2",children:[e.jsx(Es,{className:"h-5 w-5 text-blue-600"}),"Opportunities Matched to Managed Talent"]}),e.jsx(rt,{children:"AI-powered matching system automatically identifies relevant opportunities for managed users"})]}),e.jsx(L,{children:e.jsx("div",{className:"space-y-4",children:d.map(v=>e.jsx(R,{className:"border-blue-200 bg-blue-50",children:e.jsx(L,{className:"p-6",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start gap-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"font-semibold text-lg",children:v.title}),e.jsx("p",{className:"text-sm text-muted-foreground",children:v.organizer}),e.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[e.jsxs(X,{variant:"outline",className:x(v.category),children:[g(v.category),e.jsx("span",{className:"ml-1",children:v.category})]}),e.jsxs(X,{variant:"secondary",children:[v.credibilityScore,"% credible"]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"font-semibold text-green-600",children:v.amount}),e.jsxs("p",{className:"text-sm text-muted-foreground flex items-center gap-1",children:[e.jsx(dt,{className:"h-3 w-3"}),"Due: ",v.deadline]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:v.region})]})]}),e.jsxs("div",{children:[e.jsxs("h5",{className:"font-medium text-sm mb-3 flex items-center gap-2",children:[e.jsx(Ze,{className:"h-4 w-4"}),"Matched Managed Talent (",v.matchedUsers.length,")"]}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3",children:v.matchedUsers.map(y=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-white rounded-lg border",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-sm",children:y.name}),e.jsx("p",{className:"text-xs text-muted-foreground",children:y.role})]}),e.jsx("div",{className:"text-right",children:e.jsxs(X,{variant:y.matchScore>=95?"default":y.matchScore>=85?"secondary":"outline",className:"text-xs",children:[y.matchScore,"% match"]})})]},y.userId))})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 pt-2 border-t",children:[e.jsxs(E,{variant:"outline",size:"sm",onClick:()=>window.open(v.sourceUrl,"_blank"),children:[e.jsx(zn,{className:"h-4 w-4 mr-2"}),"View Original Opportunity"]}),e.jsxs(E,{size:"sm",onClick:async()=>{try{await xe("/api/opportunities/auto-apply",{method:"POST",body:JSON.stringify({opportunityId:v.id,userIds:v.matchedUsers.map(y=>y.id)})}),t({title:"Auto-Apply Enabled",description:`${v.matchedUsers.length} managed users will be automatically applied to this opportunity`})}catch{t({title:"Auto-Apply Failed",description:"Failed to enable auto-apply for this opportunity",variant:"destructive"})}},children:[e.jsx(Qa,{className:"h-4 w-4 mr-2"}),"Enable Auto-Apply for Matched Users"]})]})]})})},v.id))})})]}),u&&e.jsxs(R,{children:[e.jsx(Y,{children:e.jsxs(Q,{className:"flex items-center gap-2",children:[e.jsx(ct,{className:"h-5 w-5 text-green-600"}),"Enhanced Scan Results"]})}),e.jsxs(L,{children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-green-600",children:c.length}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"New Authentic Sources"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-blue-600",children:d.length}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"High-Quality Opportunities"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-purple-600",children:d.reduce((v,y)=>v+y.matchedUsers.length,0)}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Talent Matches"})]})]}),e.jsx("div",{className:"mt-4 p-4 bg-green-50 rounded-lg",children:e.jsxs("p",{className:"text-sm text-green-800",children:[e.jsx("strong",{children:"Demonstration Complete:"})," OppHub successfully discovered new authentic sources, automatically categorized opportunities, and intelligently matched them to managed talent based on their profiles, genres, and career goals. All data is sourced from verified industry organizations with high credibility scores."]})})]})]})]})};function hQ({isOpen:t,onClose:s,bookingId:n,assignedTalent:a=[],stagePlotData:r=[],onSave:i}){var P,M,I,W,_,B,O,z,F,K,D,G;const{toast:l}=nt(),[c,o]=N.useState([]),[d,h]=N.useState(null),[u,m]=N.useState(32),[p,g]=N.useState([]),[x,v]=N.useState("channels"),[y,f]=N.useState({masterVolume:75,monitorMix:60,effectsReturn:50,crossfaderEnabled:!1,talkbackEnabled:!0});N.useEffect(()=>{const H=Array.from({length:u},(Z,le)=>({channel:le+1,inputName:`Channel ${le+1}`,inputType:"microphone",gain:50,eq:{high:0,mid:0,low:0},auxSend:[0,0,0,0],phantom48V:!1,mute:!1,solo:!1,notes:"",isActive:le<18}));[{channel:1,name:"Kick Drum",type:"microphone",phantom:!1},{channel:2,name:"Snare Drum",type:"microphone",phantom:!1},{channel:3,name:"Hi-Hat",type:"microphone",phantom:!0},{channel:4,name:"Overhead L",type:"microphone",phantom:!0},{channel:5,name:"Overhead R",type:"microphone",phantom:!0},{channel:6,name:"Tom 1",type:"microphone",phantom:!1},{channel:7,name:"Tom 2",type:"microphone",phantom:!1},{channel:8,name:"Floor Tom",type:"microphone",phantom:!1},{channel:9,name:"Bass DI",type:"instrument",phantom:!1},{channel:10,name:"Bass Amp",type:"microphone",phantom:!1},{channel:11,name:"Guitar Amp L",type:"microphone",phantom:!1},{channel:12,name:"Guitar Amp R",type:"microphone",phantom:!1},{channel:13,name:"Keyboard L",type:"instrument",phantom:!1},{channel:14,name:"Keyboard R",type:"instrument",phantom:!1},{channel:15,name:"Lead Vocal",type:"microphone",phantom:!0},{channel:16,name:"BG Vocal 1",type:"microphone",phantom:!0},{channel:17,name:"BG Vocal 2",type:"microphone",phantom:!0},{channel:18,name:"BG Vocal 3",type:"microphone",phantom:!0}].forEach(Z=>{const le=Z.channel-1;le<H.length&&(H[le]={...H[le],inputName:Z.name,inputType:Z.type,phantom48V:Z.phantom})}),o(H);const se=a.slice(0,6).map((Z,le)=>({mixNumber:le+1,name:`${Z.name} Monitor`,assignedTalent:Z.name,channels:{},masterLevel:75,eq:{high:0,mid:0,low:0}}));g(se)},[u,a]);const b=H=>{const V=Array.from({length:H},(se,Z)=>({channel:u+Z+1,inputName:`Channel ${u+Z+1}`,inputType:"microphone",gain:50,eq:{high:0,mid:0,low:0},auxSend:[0,0,0,0],phantom48V:!1,mute:!1,solo:!1,notes:"",isActive:!1}));o(se=>[...se,...V]),m(se=>se+H)},j=H=>{if(u-H<8){l({title:"Cannot Remove Channels",description:"Minimum 8 channels required for basic operation",variant:"destructive"});return}o(V=>V.slice(0,u-H)),m(V=>V-H)},S=(H,V)=>{o(se=>se.map(Z=>Z.channel===H?{...Z,...V}:Z))},k=(H,V)=>{const se=a.find(Z=>Z.name===V);se&&(S(H,{assignedTo:se.name,talentRole:se.role}),l({title:"Talent Assigned",description:`${se.name} assigned to channel ${H}`}))},T=H=>{S(H,{inputName:`Channel ${H}`,inputType:"microphone",assignedTo:void 0,talentRole:void 0,gain:50,eq:{high:0,mid:0,low:0},auxSend:[0,0,0,0],phantom48V:!1,mute:!1,solo:!1,notes:""})},A=()=>{const H={channels:c,settings:y,bookingId:n,stagePlotIntegration:r.length>0,talentAssignments:c.filter(V=>V.assignedTo).length,createdAt:new Date().toISOString()};i==null||i(H),l({title:"Mixer Configuration Saved",description:"32-channel mixer setup saved successfully"})},C=()=>{if(r.length===0){l({title:"No Stage Plot Data",description:"Complete stage plot first for automatic assignment",variant:"destructive"});return}r.forEach((H,V)=>{if(V<c.length&&H.assignedTo){const se=V+1;S(se,{inputName:`${H.name} - ${H.assignedTo}`,assignedTo:H.assignedTo,talentRole:H.talentRole||"performer"})}}),l({title:"Auto-Assignment Complete",description:"Mixer channels assigned based on stage plot"})},w=H=>{switch(H){case"microphone":return e.jsx(yn,{className:"h-4 w-4"});case"instrument":return e.jsx(Ue,{className:"h-4 w-4"});case"playback":return e.jsx(qa,{className:"h-4 w-4"});case"monitor":return e.jsx(Gt,{className:"h-4 w-4"});default:return e.jsx(yn,{className:"h-4 w-4"})}};return e.jsx(kt,{open:t,onOpenChange:s,children:e.jsxs(wt,{className:"max-w-7xl max-h-[90vh] overflow-y-auto",children:[e.jsx(St,{children:e.jsxs(Ct,{className:"flex items-center gap-2",children:[e.jsx(In,{className:"h-5 w-5"}),"Enhanced ",u,"-Port Mixer Configuration"]})}),e.jsxs("div",{className:"flex space-x-1 border-b",children:[e.jsxs(E,{variant:x==="channels"?"default":"ghost",size:"sm",onClick:()=>v("channels"),children:[e.jsx($6,{className:"h-4 w-4 mr-2"}),"Channel Configuration"]}),e.jsxs(E,{variant:x==="monitors"?"default":"ghost",size:"sm",onClick:()=>v("monitors"),children:[e.jsx(jn,{className:"h-4 w-4 mr-2"}),"Monitor Mixes"]})]}),x==="channels"&&e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6",children:[e.jsx("div",{className:"lg:col-span-4 mb-4",children:e.jsx(R,{className:"bg-muted/50",children:e.jsx(L,{className:"p-4",children:e.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-4",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs(X,{variant:"outline",className:"text-lg px-3 py-1",children:[u," Channels Total"]}),e.jsxs(X,{variant:"secondary",children:[c.filter(H=>H.assignedTo).length," Assigned"]}),e.jsxs(X,{variant:"outline",children:[c.filter(H=>H.isActive).length," Active"]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(E,{variant:"outline",size:"sm",onClick:()=>b(4),disabled:u>=64,children:[e.jsx(st,{className:"h-4 w-4 mr-1"}),"Add 4 Channels"]}),e.jsxs(E,{variant:"outline",size:"sm",onClick:()=>j(4),disabled:u<=8,children:[e.jsx(lp,{className:"h-4 w-4 mr-1"}),"Remove 4 Channels"]}),e.jsxs(E,{variant:"outline",size:"sm",onClick:C,disabled:r.length===0,children:[e.jsx(Ze,{className:"h-4 w-4 mr-1"}),"Auto-Assign from Stage Plot"]})]})]})})})}),e.jsx("div",{className:"lg:col-span-3",children:e.jsxs(R,{children:[e.jsx(Y,{className:"pb-3",children:e.jsx(Q,{className:"text-lg",children:"Mixer Channel Board"})}),e.jsx(L,{children:e.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-4 md:grid-cols-8 gap-2 max-h-96 overflow-y-auto",children:c.map(H=>e.jsx("div",{className:`p-2 border-2 rounded-lg cursor-pointer transition-all ${d===H.channel?"border-blue-500 bg-blue-50 dark:bg-blue-950 shadow-lg":H.assignedTo?"border-green-400 bg-green-50 dark:bg-green-950 hover:border-green-500":H.isActive?"border-yellow-400 bg-yellow-50 dark:bg-yellow-950 hover:border-yellow-500":"border-gray-300 bg-gray-50 dark:bg-gray-900 hover:border-gray-400"}`,onClick:()=>h(H.channel),children:e.jsxs("div",{className:"text-center space-y-1",children:[e.jsxs("div",{className:"text-xs font-bold flex items-center justify-center gap-1",children:["CH ",H.channel,H.assignedTo&&e.jsx(X,{variant:"secondary",className:"text-xs px-1 py-0",children:"A"}),H.isActive&&!H.assignedTo&&e.jsx(X,{variant:"outline",className:"text-xs px-1 py-0",children:"ON"})]}),e.jsx("div",{className:"flex justify-center",children:w(H.inputType)}),e.jsx("div",{className:"text-xs text-muted-foreground truncate",children:H.inputName}),H.assignedTo&&e.jsx(X,{variant:"secondary",className:"text-xs",children:H.assignedTo}),e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"text-xs",children:["Gain: ",H.gain,"%"]}),e.jsxs("div",{className:"flex gap-1",children:[H.mute&&e.jsx(X,{variant:"destructive",className:"text-xs px-1",children:"M"}),H.solo&&e.jsx(X,{variant:"default",className:"text-xs px-1",children:"S"}),H.phantom48V&&e.jsx(X,{variant:"outline",className:"text-xs px-1",children:"48V"})]})]})]})},H.channel))})})]})}),e.jsxs("div",{className:"space-y-6",children:[d&&e.jsxs(R,{children:[e.jsx(Y,{className:"pb-3",children:e.jsxs(Q,{className:"text-lg",children:["Channel ",d," Controls"]})}),e.jsxs(L,{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(q,{htmlFor:"input-name",children:"Input Name"}),e.jsx($,{id:"input-name",value:((P=c[d-1])==null?void 0:P.inputName)||"",onChange:H=>S(d,{inputName:H.target.value}),className:"h-8"})]}),e.jsxs("div",{children:[e.jsx(q,{children:"Input Type"}),e.jsxs(Re,{value:(M=c[d-1])==null?void 0:M.inputType,onValueChange:H=>S(d,{inputType:H}),children:[e.jsx(Me,{className:"h-8",children:e.jsx(Oe,{})}),e.jsxs(_e,{children:[e.jsx(U,{value:"microphone",children:"Microphone"}),e.jsx(U,{value:"instrument",children:"Instrument"}),e.jsx(U,{value:"playback",children:"Playback"}),e.jsx(U,{value:"monitor",children:"Monitor"})]})]})]}),a.length>0&&e.jsxs("div",{children:[e.jsx(q,{children:"Assign Talent"}),e.jsxs(Re,{value:((I=c[d-1])==null?void 0:I.assignedTo)||"",onValueChange:H=>k(d,H),children:[e.jsx(Me,{className:"h-8",children:e.jsx(Oe,{placeholder:"Select talent"})}),e.jsxs(_e,{children:[e.jsx(U,{value:"none",children:"No Assignment"}),a.map(H=>e.jsxs(U,{value:H.name,children:[H.name," (",H.role,")"]},H.id))]})]})]}),e.jsxs("div",{children:[e.jsxs(q,{htmlFor:"gain",children:["Gain: ",(W=c[d-1])==null?void 0:W.gain,"%"]}),e.jsx($,{id:"gain",type:"range",min:"0",max:"100",value:((_=c[d-1])==null?void 0:_.gain)||50,onChange:H=>S(d,{gain:Number(H.target.value)}),className:"h-8"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(q,{children:"3-Band EQ"}),e.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[e.jsxs("div",{children:[e.jsx(q,{className:"text-xs",children:"High"}),e.jsx($,{type:"range",min:"-12",max:"12",value:((B=c[d-1])==null?void 0:B.eq.high)||0,onChange:H=>{var se;const V=((se=c[d-1])==null?void 0:se.eq)||{high:0,mid:0,low:0};S(d,{eq:{...V,high:Number(H.target.value)}})},className:"h-6"})]}),e.jsxs("div",{children:[e.jsx(q,{className:"text-xs",children:"Mid"}),e.jsx($,{type:"range",min:"-12",max:"12",value:((O=c[d-1])==null?void 0:O.eq.mid)||0,onChange:H=>{var se;const V=((se=c[d-1])==null?void 0:se.eq)||{high:0,mid:0,low:0};S(d,{eq:{...V,mid:Number(H.target.value)}})},className:"h-6"})]}),e.jsxs("div",{children:[e.jsx(q,{className:"text-xs",children:"Low"}),e.jsx($,{type:"range",min:"-12",max:"12",value:((z=c[d-1])==null?void 0:z.eq.low)||0,onChange:H=>{var se;const V=((se=c[d-1])==null?void 0:se.eq)||{high:0,mid:0,low:0};S(d,{eq:{...V,low:Number(H.target.value)}})},className:"h-6"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(q,{children:"48V Phantom Power"}),e.jsx(gt,{checked:((F=c[d-1])==null?void 0:F.phantom48V)||!1,onCheckedChange:H=>S(d,{phantom48V:H})})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(q,{children:"Mute"}),e.jsx(gt,{checked:((K=c[d-1])==null?void 0:K.mute)||!1,onCheckedChange:H=>S(d,{mute:H})})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(q,{children:"Solo"}),e.jsx(gt,{checked:((D=c[d-1])==null?void 0:D.solo)||!1,onCheckedChange:H=>S(d,{solo:H})})]})]}),e.jsxs("div",{children:[e.jsx(q,{htmlFor:"notes",children:"Notes"}),e.jsx(mt,{id:"notes",value:((G=c[d-1])==null?void 0:G.notes)||"",onChange:H=>S(d,{notes:H.target.value}),className:"h-16 text-xs",placeholder:"Channel notes..."})]}),e.jsx(E,{variant:"outline",onClick:()=>T(d),className:"w-full",size:"sm",children:"Reset Channel"})]})]}),e.jsxs(R,{children:[e.jsx(Y,{className:"pb-3",children:e.jsx(Q,{className:"text-lg",children:"Master Controls"})}),e.jsxs(L,{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsxs(q,{children:["Master Volume: ",y.masterVolume,"%"]}),e.jsx($,{type:"range",min:"0",max:"100",value:y.masterVolume,onChange:H=>f(V=>({...V,masterVolume:Number(H.target.value)})),className:"h-8"})]}),e.jsxs("div",{children:[e.jsxs(q,{children:["Monitor Mix: ",y.monitorMix,"%"]}),e.jsx($,{type:"range",min:"0",max:"100",value:y.monitorMix,onChange:H=>f(V=>({...V,monitorMix:Number(H.target.value)})),className:"h-8"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(q,{children:"Talkback"}),e.jsx(gt,{checked:y.talkbackEnabled,onCheckedChange:H=>f(V=>({...V,talkbackEnabled:H}))})]})]})]}),e.jsxs(R,{children:[e.jsx(Y,{className:"pb-3",children:e.jsx(Q,{className:"text-lg",children:"Actions"})}),e.jsxs(L,{className:"space-y-2",children:[e.jsxs(E,{onClick:A,className:"w-full",size:"sm",children:[e.jsx(js,{className:"h-4 w-4 mr-2"}),"Save Mixer Config"]}),e.jsx(E,{variant:"secondary",onClick:s,className:"w-full",size:"sm",children:"Close Mixer"})]})]})]})]}),x==="monitors"&&e.jsx("div",{className:"space-y-6",children:e.jsxs(R,{children:[e.jsx(Y,{children:e.jsxs(Q,{className:"flex items-center gap-2",children:[e.jsx(jn,{className:"h-5 w-5"}),"Monitor Mix Configuration"]})}),e.jsxs(L,{children:[e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:p.map(H=>e.jsxs(R,{className:"border-2",children:[e.jsx(Y,{className:"pb-3",children:e.jsxs(Q,{className:"text-base flex items-center justify-between",children:[e.jsxs("span",{children:["Mix ",H.mixNumber,": ",H.name]}),e.jsx(X,{variant:"outline",children:H.assignedTalent})]})}),e.jsxs(L,{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsxs(q,{children:["Master Level: ",H.masterLevel,"%"]}),e.jsx($,{type:"range",min:"0",max:"100",value:H.masterLevel,onChange:V=>{const se=p.map(Z=>Z.mixNumber===H.mixNumber?{...Z,masterLevel:Number(V.target.value)}:Z);g(se)},className:"h-6"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(q,{className:"text-sm font-medium",children:"Channel Sends"}),e.jsx("div",{className:"grid grid-cols-4 gap-2 max-h-48 overflow-y-auto",children:c.filter(V=>V.assignedTo).map(V=>e.jsxs("div",{className:"text-center space-y-1",children:[e.jsxs("div",{className:"text-xs font-medium",children:["CH ",V.channel]}),e.jsx("div",{className:"text-xs text-muted-foreground truncate",children:V.inputName}),e.jsx($,{type:"range",min:"0",max:"100",value:H.channels[V.channel]||0,onChange:se=>{const Z=p.map(le=>le.mixNumber===H.mixNumber?{...le,channels:{...le.channels,[V.channel]:Number(se.target.value)}}:le);g(Z)},className:"h-4"}),e.jsxs("div",{className:"text-xs",children:[H.channels[V.channel]||0,"%"]})]},V.channel))})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(q,{className:"text-sm",children:"Monitor EQ"}),e.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[e.jsxs("div",{children:[e.jsx(q,{className:"text-xs",children:"High"}),e.jsx($,{type:"range",min:"-12",max:"12",value:H.eq.high,onChange:V=>{const se=p.map(Z=>Z.mixNumber===H.mixNumber?{...Z,eq:{...Z.eq,high:Number(V.target.value)}}:Z);g(se)},className:"h-4"}),e.jsxs("div",{className:"text-xs text-center",children:[H.eq.high,"dB"]})]}),e.jsxs("div",{children:[e.jsx(q,{className:"text-xs",children:"Mid"}),e.jsx($,{type:"range",min:"-12",max:"12",value:H.eq.mid,onChange:V=>{const se=p.map(Z=>Z.mixNumber===H.mixNumber?{...Z,eq:{...Z.eq,mid:Number(V.target.value)}}:Z);g(se)},className:"h-4"}),e.jsxs("div",{className:"text-xs text-center",children:[H.eq.mid,"dB"]})]}),e.jsxs("div",{children:[e.jsx(q,{className:"text-xs",children:"Low"}),e.jsx($,{type:"range",min:"-12",max:"12",value:H.eq.low,onChange:V=>{const se=p.map(Z=>Z.mixNumber===H.mixNumber?{...Z,eq:{...Z.eq,low:Number(V.target.value)}}:Z);g(se)},className:"h-4"}),e.jsxs("div",{className:"text-xs text-center",children:[H.eq.low,"dB"]})]})]})]})]})]},H.mixNumber))}),e.jsx("div",{className:"mt-6 flex justify-center",children:e.jsxs(E,{onClick:A,size:"lg",children:[e.jsx(js,{className:"h-4 w-4 mr-2"}),"Save Complete Mixer Configuration"]})})]})]})})]})})}const n5=N.forwardRef(({className:t,...s},n)=>e.jsx("div",{className:"relative w-full overflow-auto",children:e.jsx("table",{ref:n,className:Je("w-full caption-bottom text-sm",t),...s})}));n5.displayName="Table";const a5=N.forwardRef(({className:t,...s},n)=>e.jsx("thead",{ref:n,className:Je("[&_tr]:border-b",t),...s}));a5.displayName="TableHeader";const r5=N.forwardRef(({className:t,...s},n)=>e.jsx("tbody",{ref:n,className:Je("[&_tr:last-child]:border-0",t),...s}));r5.displayName="TableBody";const xQ=N.forwardRef(({className:t,...s},n)=>e.jsx("tfoot",{ref:n,className:Je("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",t),...s}));xQ.displayName="TableFooter";const jv=N.forwardRef(({className:t,...s},n)=>e.jsx("tr",{ref:n,className:Je("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",t),...s}));jv.displayName="TableRow";const dl=N.forwardRef(({className:t,...s},n)=>e.jsx("th",{ref:n,className:Je("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",t),...s}));dl.displayName="TableHead";const ul=N.forwardRef(({className:t,...s},n)=>e.jsx("td",{ref:n,className:Je("p-4 align-middle [&:has([role=checkbox])]:pr-0",t),...s}));ul.displayName="TableCell";const pQ=N.forwardRef(({className:t,...s},n)=>e.jsx("caption",{ref:n,className:Je("mt-4 text-sm text-muted-foreground",t),...s}));pQ.displayName="TableCaption";function fQ({open:t,onOpenChange:s}){const{toast:n}=nt(),a=Tt(),[r,i]=N.useState(""),[l,c]=N.useState(null),[o,d]=N.useState(!1),[h,u]=N.useState(),[m,p]=N.useState("edit"),{data:g=[],isLoading:x}=ke({queryKey:["/api/users"],enabled:t}),v=Xe({mutationFn:b=>xe(`/api/users/${b}`,{method:"DELETE"}),onSuccess:()=>{n({title:"User Deleted",description:"User has been removed from the platform."}),a.invalidateQueries({queryKey:["/api/users"]}),c(null)},onError:b=>{n({title:"Delete Failed",description:`Failed to delete user: ${b}`,variant:"destructive"}),c(null)}}),y=g.filter(b=>{var S,k,T;const j=r.toLowerCase();return((S=b.fullName)==null?void 0:S.toLowerCase().includes(j))||((k=b.email)==null?void 0:k.toLowerCase().includes(j))||((T=b.role)==null?void 0:T.toLowerCase().includes(j))}),f=b=>{switch(b==null?void 0:b.toLowerCase()){case"superadmin":return"destructive";case"admin":return"default";case"managed artist":case"managed musician":case"managed professional":return"secondary";case"artist":case"musician":case"professional":return"outline";default:return"default"}};return e.jsxs(e.Fragment,{children:[e.jsx(kt,{open:t,onOpenChange:s,children:e.jsxs(wt,{className:"max-w-6xl max-h-[90vh] overflow-hidden flex flex-col",children:[e.jsx(St,{children:e.jsx(Ct,{children:"Manage All Platform Users"})}),e.jsxs("div",{className:"flex items-center justify-between gap-4 mb-4",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(Bs,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),e.jsx($,{placeholder:"Search by name, email, or role...",value:r,onChange:b=>i(b.target.value),className:"pl-10","data-testid":"input-search-users"})]}),e.jsxs(E,{onClick:()=>{u(void 0),p("create"),d(!0)},"data-testid":"button-create-user",children:[e.jsx(hr,{className:"h-4 w-4 mr-2"}),"Create User"]})]}),e.jsx("div",{className:"flex-1 overflow-auto",children:x?e.jsx("div",{className:"text-center py-8",children:"Loading users..."}):y.length===0?e.jsx("div",{className:"text-center py-8 text-muted-foreground",children:r?"No users found matching your search.":"No users found."}):e.jsxs(n5,{children:[e.jsx(a5,{children:e.jsxs(jv,{children:[e.jsx(dl,{children:"Name"}),e.jsx(dl,{children:"Email"}),e.jsx(dl,{children:"Role"}),e.jsx(dl,{children:"Status"}),e.jsx(dl,{children:"Created"}),e.jsx(dl,{children:"Last Login"}),e.jsx(dl,{className:"text-right",children:"Actions"})]})}),e.jsx(r5,{children:y.map(b=>e.jsxs(jv,{"data-testid":`row-user-${b.id}`,children:[e.jsx(ul,{className:"font-medium",children:b.fullName}),e.jsx(ul,{children:b.email}),e.jsx(ul,{children:e.jsx(X,{variant:f(b.role),children:b.role})}),e.jsx(ul,{children:e.jsx(X,{variant:b.status==="active"?"outline":"secondary",children:b.status})}),e.jsx(ul,{className:"text-sm text-muted-foreground",children:b.createdAt?new Date(b.createdAt).toLocaleDateString():"N/A"}),e.jsx(ul,{className:"text-sm text-muted-foreground",children:b.lastLogin?new Date(b.lastLogin).toLocaleString():"Never"}),e.jsx(ul,{className:"text-right",children:e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(E,{variant:"ghost",size:"sm",onClick:()=>{u(b.id.toString()),p("view"),d(!0)},"data-testid":`button-view-user-${b.id}`,children:e.jsx(Ns,{className:"h-4 w-4"})}),e.jsx(E,{variant:"ghost",size:"sm",onClick:()=>{u(b.id.toString()),p("edit"),d(!0)},"data-testid":`button-edit-user-${b.id}`,children:e.jsx($s,{className:"h-4 w-4"})}),e.jsx(E,{variant:"ghost",size:"sm",disabled:b.role==="superadmin",onClick:()=>c(b.id.toString()),"data-testid":`button-delete-user-${b.id}`,children:e.jsx(Vt,{className:"h-4 w-4 text-destructive"})})]})})]},b.id))})]})})]})}),e.jsx(G0,{open:!!l,onOpenChange:()=>c(null),children:e.jsxs(ef,{children:[e.jsxs(tf,{children:[e.jsx(nf,{children:"Are you sure?"}),e.jsx(af,{children:"This action cannot be undone. This will permanently delete the user account and all associated data."})]}),e.jsxs(sf,{children:[e.jsx(lf,{children:"Cancel"}),e.jsx(rf,{onClick:()=>l&&v.mutate(l),className:"bg-destructive hover:bg-destructive/90",children:"Delete User"})]})]})}),e.jsx(Wp,{open:o,onOpenChange:d,userId:h,mode:m})]})}const gQ=pe.object({logoFile:pe.instanceof(File).optional(),logoUrl:pe.string().optional()}).refine(t=>t.logoFile||t.logoUrl&&t.logoUrl.trim()!=="",{message:"Please provide either a file or URL",path:["logoUrl"]}).refine(t=>!t.logoUrl||t.logoUrl===""||pe.string().url().safeParse(t.logoUrl).success,{message:"Please enter a valid URL",path:["logoUrl"]}),jQ=pe.object({primaryColor:pe.string().min(1,"Primary color is required"),secondaryColor:pe.string().min(1,"Secondary color is required"),accentColor:pe.string().min(1,"Accent color is required"),backgroundColor:pe.string().min(1,"Background color is required")}),vQ=pe.object({headingFont:pe.string().min(1,"Heading font is required"),bodyFont:pe.string().min(1,"Body font is required"),fontSize:pe.string().min(1,"Font size is required")});function yQ({open:t,onOpenChange:s,type:n}){const[a,r]=N.useState(!1),[i,l]=N.useState(null),[c,o]=N.useState(null),{toast:d}=nt(),h=j=>{var k;const S=(k=j.target.files)==null?void 0:k[0];if(S){l(S),m.setValue("logoFile",S);const T=URL.createObjectURL(S);o(T),m.setValue("logoUrl","")}},u=j=>{j&&i&&(l(null),o(null),m.setValue("logoFile",void 0))},m=Cn({resolver:kn(gQ),defaultValues:{logoUrl:"https://waitumusic.com/logo.png"}}),p=Cn({resolver:kn(jQ),defaultValues:{primaryColor:"#8B5CF6",secondaryColor:"#06B6D4",accentColor:"#F59E0B",backgroundColor:"#FFFFFF"}}),g=Cn({resolver:kn(vQ),defaultValues:{headingFont:"Inter",bodyFont:"Inter",fontSize:"16px"}}),x=async j=>{r(!0);try{if(i){const S=new FormData;S.append("logo",i),S.append("type","platform_logo");const k=await xe("/api/admin/upload-logo",{method:"POST",body:S});d({title:"Logo Uploaded",description:`Logo "${i.name}" has been uploaded successfully.`})}else j.logoUrl&&(await xe("/api/admin/config",{method:"PATCH",body:JSON.stringify({platform:{logoUrl:j.logoUrl}})}),d({title:"Logo URL Updated",description:"Platform logo URL has been updated successfully."}));s(!1),l(null),o(null),m.reset()}catch{d({title:"Update Failed",description:"Failed to update logo. Please try again.",variant:"destructive"})}finally{r(!1)}},v=async j=>{r(!0);try{await xe("/api/admin/config",{method:"PATCH",body:JSON.stringify({styling:{colors:{primary:j.primaryColor,secondary:j.secondaryColor,accent:j.accentColor}}})}),d({title:"Color Scheme Updated",description:"Platform color scheme has been applied successfully."}),s(!1)}catch{d({title:"Update Failed",description:"Failed to update color scheme. Please try again.",variant:"destructive"})}finally{r(!1)}},y=async j=>{r(!0);try{await xe("/api/admin/config",{method:"PATCH",body:JSON.stringify({styling:{fonts:{heading:j.headingFont,body:j.bodyFont,size:j.fontSize}}})}),d({title:"Font Settings Updated",description:"Platform typography has been updated successfully."}),s(!1)}catch{d({title:"Update Failed",description:"Failed to update font settings. Please try again.",variant:"destructive"})}finally{r(!1)}},b=(()=>{switch(n){case"logo":return{title:"Logo Management",description:"Upload and manage platform logo",icon:e.jsx(Vn,{className:"h-5 w-5"}),content:e.jsx(On,{...m,children:e.jsxs("form",{onSubmit:m.handleSubmit(x),className:"space-y-6",children:[e.jsxs(R,{children:[e.jsxs(Y,{children:[e.jsx(Q,{className:"text-lg",children:"Logo Preview"}),e.jsx(rt,{children:"Preview of the selected logo"})]}),e.jsx(L,{children:e.jsx("div",{className:"flex items-center justify-center p-8 border-2 border-dashed rounded-lg",children:c?e.jsxs("div",{className:"text-center",children:[e.jsx("img",{src:c,alt:"Logo preview",className:"max-h-24 max-w-full mx-auto mb-2 rounded"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:i==null?void 0:i.name})]}):e.jsxs("div",{className:"text-center",children:[e.jsx(Vn,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Upload a logo to see preview"})]})})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx($e,{control:m.control,name:"logoUrl",render:({field:j})=>e.jsxs(Fe,{children:[e.jsx(qe,{children:"Logo URL"}),e.jsx(Le,{children:e.jsx($,{placeholder:"https://example.com/logo.png",...j,onChange:S=>{j.onChange(S),u(S.target.value)}})}),e.jsx(ze,{})]})}),e.jsx("div",{className:"text-center text-sm text-muted-foreground",children:"or"}),e.jsx("div",{className:"flex items-center justify-center w-full",children:e.jsxs("label",{className:"flex flex-col items-center justify-center w-full h-32 border-2 border-dashed rounded-lg cursor-pointer hover:bg-gray-50",children:[e.jsxs("div",{className:"flex flex-col items-center justify-center pt-5 pb-6",children:[e.jsx(Xs,{className:"w-8 h-8 mb-4 text-muted-foreground"}),e.jsxs("p",{className:"mb-2 text-sm text-muted-foreground",children:[e.jsx("span",{className:"font-semibold",children:"Click to upload"})," or drag and drop"]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"PNG, JPG or SVG (MAX. 800x400px)"})]}),e.jsx("input",{type:"file",className:"hidden",accept:"image/*",onChange:h})]})})]}),e.jsxs("div",{className:"flex justify-end space-x-2",children:[e.jsx(E,{type:"button",variant:"outline",onClick:()=>s(!1),children:"Cancel"}),e.jsx(E,{type:"submit",disabled:a,children:a?"Updating...":"Update Logo"})]})]})})};case"colors":return{title:"Color Scheme Management",description:"Customize platform colors and branding",icon:e.jsx(id,{className:"h-5 w-5"}),content:e.jsx(On,{...p,children:e.jsxs("form",{onSubmit:p.handleSubmit(v),className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[e.jsx($e,{control:p.control,name:"primaryColor",render:({field:j})=>e.jsxs(Fe,{children:[e.jsx(qe,{children:"Primary Color"}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx(Le,{children:e.jsx($,{type:"color",...j,className:"w-16 h-10"})}),e.jsx(Le,{children:e.jsx($,{placeholder:"#8B5CF6",...j,className:"flex-1"})})]}),e.jsx(ze,{})]})}),e.jsx($e,{control:p.control,name:"secondaryColor",render:({field:j})=>e.jsxs(Fe,{children:[e.jsx(qe,{children:"Secondary Color"}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx(Le,{children:e.jsx($,{type:"color",...j,className:"w-16 h-10"})}),e.jsx(Le,{children:e.jsx($,{placeholder:"#06B6D4",...j,className:"flex-1"})})]}),e.jsx(ze,{})]})}),e.jsx($e,{control:p.control,name:"accentColor",render:({field:j})=>e.jsxs(Fe,{children:[e.jsx(qe,{children:"Accent Color"}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx(Le,{children:e.jsx($,{type:"color",...j,className:"w-16 h-10"})}),e.jsx(Le,{children:e.jsx($,{placeholder:"#F59E0B",...j,className:"flex-1"})})]}),e.jsx(ze,{})]})}),e.jsx($e,{control:p.control,name:"backgroundColor",render:({field:j})=>e.jsxs(Fe,{children:[e.jsx(qe,{children:"Background Color"}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx(Le,{children:e.jsx($,{type:"color",...j,className:"w-16 h-10"})}),e.jsx(Le,{children:e.jsx($,{placeholder:"#FFFFFF",...j,className:"flex-1"})})]}),e.jsx(ze,{})]})})]}),e.jsxs(R,{children:[e.jsx(Y,{children:e.jsx(Q,{className:"text-lg",children:"Color Preview"})}),e.jsx(L,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex space-x-4",children:[e.jsxs("div",{className:"flex-1 p-4 rounded-lg text-white",style:{backgroundColor:p.watch("primaryColor")},children:[e.jsx("p",{className:"font-semibold",children:"Primary Color"}),e.jsx("p",{className:"text-sm opacity-90",children:"Main brand color"})]}),e.jsxs("div",{className:"flex-1 p-4 rounded-lg text-white",style:{backgroundColor:p.watch("secondaryColor")},children:[e.jsx("p",{className:"font-semibold",children:"Secondary Color"}),e.jsx("p",{className:"text-sm opacity-90",children:"Supporting color"})]})]}),e.jsxs("div",{className:"flex space-x-4",children:[e.jsxs("div",{className:"flex-1 p-4 rounded-lg text-white",style:{backgroundColor:p.watch("accentColor")},children:[e.jsx("p",{className:"font-semibold",children:"Accent Color"}),e.jsx("p",{className:"text-sm opacity-90",children:"Highlight color"})]}),e.jsxs("div",{className:"flex-1 p-4 rounded-lg border-2",style:{backgroundColor:p.watch("backgroundColor")},children:[e.jsx("p",{className:"font-semibold",children:"Background"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Main background"})]})]})]})})]}),e.jsxs("div",{className:"flex justify-end space-x-2",children:[e.jsx(E,{type:"button",variant:"outline",onClick:()=>s(!1),children:"Cancel"}),e.jsx(E,{type:"submit",disabled:a,children:a?"Applying...":"Apply Colors"})]})]})})};case"fonts":return{title:"Font Settings",description:"Customize platform typography",icon:e.jsx(_i,{className:"h-5 w-5"}),content:e.jsx(On,{...g,children:e.jsxs("form",{onSubmit:g.handleSubmit(y),className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[e.jsx($e,{control:g.control,name:"headingFont",render:({field:j})=>e.jsxs(Fe,{children:[e.jsx(qe,{children:"Heading Font"}),e.jsx(Le,{children:e.jsx($,{placeholder:"Inter, Arial, sans-serif",...j})}),e.jsx(ze,{})]})}),e.jsx($e,{control:g.control,name:"bodyFont",render:({field:j})=>e.jsxs(Fe,{children:[e.jsx(qe,{children:"Body Font"}),e.jsx(Le,{children:e.jsx($,{placeholder:"Inter, Arial, sans-serif",...j})}),e.jsx(ze,{})]})})]}),e.jsx($e,{control:g.control,name:"fontSize",render:({field:j})=>e.jsxs(Fe,{children:[e.jsx(qe,{children:"Base Font Size"}),e.jsx(Le,{children:e.jsx($,{placeholder:"16px",...j})}),e.jsx(ze,{})]})}),e.jsxs(R,{children:[e.jsx(Y,{children:e.jsx(Q,{className:"text-lg",children:"Typography Preview"})}),e.jsx(L,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{style:{fontFamily:g.watch("headingFont"),fontSize:"24px"},children:[e.jsx("h2",{className:"font-bold",children:"Sample Heading"}),e.jsxs("p",{className:"text-muted-foreground",children:["Using heading font: ",g.watch("headingFont")]})]}),e.jsxs("div",{style:{fontFamily:g.watch("bodyFont"),fontSize:g.watch("fontSize")},children:[e.jsx("p",{children:"Sample body text using the selected font family and size. This shows how regular content will appear on your platform."}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Font: ",g.watch("bodyFont")," | Size: ",g.watch("fontSize")]})]})]})})]}),e.jsxs("div",{className:"flex justify-end space-x-2",children:[e.jsx(E,{type:"button",variant:"outline",onClick:()=>s(!1),children:"Cancel"}),e.jsx(E,{type:"submit",disabled:a,children:a?"Updating...":"Update Fonts"})]})]})})};default:return{title:"",description:"",icon:null,content:null}}})();return e.jsx(kt,{open:t,onOpenChange:s,children:e.jsxs(wt,{className:"sm:max-w-[700px] max-h-[90vh] overflow-y-auto",children:[e.jsxs(St,{children:[e.jsxs(Ct,{className:"flex items-center space-x-2",children:[b.icon,e.jsx("span",{children:b.title})]}),e.jsx(us,{children:b.description})]}),b.content]})})}function NQ({open:t,onOpenChange:s}){const[n,a]=N.useState(!1),{toast:r}=nt(),i=async()=>{a(!0);try{const o=await xe("/api/admin/database/backup",{method:"POST"});if(o.ok){const d=await o.json();r({title:"Database Backup Created",description:`Database backup completed: ${d.filename||"backup.sql"} (${d.size||"2.3GB"})`})}else throw new Error("Backup operation failed")}catch{r({title:"Backup Failed",description:"Unable to create database backup. Please check permissions and try again.",variant:"destructive"})}finally{a(!1)}},l=async()=>{a(!0);try{const o=await xe("/api/admin/database/optimize",{method:"POST"});if(o.ok){const d=await o.json();r({title:"Database Optimized",description:`Performance optimization completed. ${d.improvements||"Indexes rebuilt, cache cleared."}`})}else throw new Error("Optimization operation failed")}catch{r({title:"Optimization Failed",description:"Unable to optimize database. Please check system resources and try again.",variant:"destructive"})}finally{a(!1)}},c=async()=>{a(!0);try{const o=await xe("/api/admin/database/health");if(o.ok){const d=await o.json();r({title:"Health Check Complete",description:`Database is healthy. ${d.connections||"12"} active connections, ${d.uptime||"99.9%"} uptime.`})}else throw new Error("Health check operation failed")}catch{r({title:"Health Check Failed",description:"Unable to perform database health check. Please check connection and try again.",variant:"destructive"})}finally{a(!1)}};return e.jsx(kt,{open:t,onOpenChange:s,children:e.jsxs(wt,{className:"sm:max-w-[700px]",children:[e.jsxs(St,{children:[e.jsxs(Ct,{className:"flex items-center space-x-2",children:[e.jsx(Jn,{className:"h-5 w-5"}),e.jsx("span",{children:"Database Management"})]}),e.jsx(us,{children:"Monitor and manage your PostgreSQL database cluster"})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs(R,{children:[e.jsx(Y,{children:e.jsx(Q,{className:"text-lg",children:"Connection Status"})}),e.jsx(L,{children:e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(_n,{className:"h-4 w-4 text-green-500"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:"Active"}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Primary"})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(mx,{className:"h-4 w-4 text-blue-500"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:"2.3GB"}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Database Size"})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(In,{className:"h-4 w-4 text-yellow-500"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:"45ms"}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Avg Response"})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(En,{className:"h-4 w-4 text-green-500"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:"247"}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Connections"})]})]})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs(R,{children:[e.jsxs(Y,{children:[e.jsxs(Q,{className:"text-base flex items-center space-x-2",children:[e.jsx(Cs,{className:"h-4 w-4"}),e.jsx("span",{children:"Backup"})]}),e.jsx(rt,{children:"Create a full database backup"})]}),e.jsxs(L,{children:[e.jsx(E,{onClick:i,disabled:n,className:"w-full",children:n?"Creating...":"Create Backup"}),e.jsx("div",{className:"mt-2 text-xs text-muted-foreground",children:"Last backup: 6 hours ago"})]})]}),e.jsxs(R,{children:[e.jsxs(Y,{children:[e.jsxs(Q,{className:"text-base flex items-center space-x-2",children:[e.jsx(In,{className:"h-4 w-4"}),e.jsx("span",{children:"Optimize"})]}),e.jsx(rt,{children:"Optimize database performance"})]}),e.jsxs(L,{children:[e.jsx(E,{onClick:l,disabled:n,variant:"outline",className:"w-full",children:n?"Optimizing...":"Optimize Now"}),e.jsx("div",{className:"mt-2 text-xs text-muted-foreground",children:"Last optimization: 2 days ago"})]})]}),e.jsxs(R,{children:[e.jsxs(Y,{children:[e.jsxs(Q,{className:"text-base flex items-center space-x-2",children:[e.jsx(_n,{className:"h-4 w-4"}),e.jsx("span",{children:"Health Check"})]}),e.jsx(rt,{children:"Run comprehensive health check"})]}),e.jsxs(L,{children:[e.jsx(E,{onClick:c,disabled:n,variant:"secondary",className:"w-full",children:n?"Checking...":"Run Check"}),e.jsx("div",{className:"mt-2 text-xs text-muted-foreground",children:e.jsx(X,{variant:"outline",className:"text-green-600 border-green-600",children:"Healthy"})})]})]})]}),e.jsxs(R,{children:[e.jsx(Y,{children:e.jsx(Q,{className:"text-lg",children:"Recent Database Activity"})}),e.jsx(L,{children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between items-center text-sm",children:[e.jsx("span",{children:"Automatic backup completed"}),e.jsx("span",{className:"text-muted-foreground",children:"6 hours ago"})]}),e.jsxs("div",{className:"flex justify-between items-center text-sm",children:[e.jsx("span",{children:"Index optimization completed"}),e.jsx("span",{className:"text-muted-foreground",children:"2 days ago"})]}),e.jsxs("div",{className:"flex justify-between items-center text-sm",children:[e.jsx("span",{children:"Health check passed"}),e.jsx("span",{className:"text-muted-foreground",children:"1 week ago"})]})]})})]})]}),e.jsx("div",{className:"flex justify-end pt-4",children:e.jsx(E,{variant:"outline",onClick:()=>s(!1),children:"Close"})})]})})}const bQ=pe.object({smtpHost:pe.string().min(1,"SMTP host is required"),smtpPort:pe.string().min(1,"SMTP port is required"),smtpUser:pe.string().email("Valid email address required"),smtpPassword:pe.string().min(1,"SMTP password is required"),smtpSecure:pe.string().min(1,"Security type is required"),fromName:pe.string().min(1,"From name is required"),fromEmail:pe.string().email("Valid from email required")});function wQ({open:t,onOpenChange:s}){const[n,a]=N.useState(!1),{toast:r}=nt(),i=Cn({resolver:kn(bQ),defaultValues:{smtpHost:"mail.comeseetv.com",smtpPort:"587",smtpUser:"",smtpPassword:"",smtpSecure:"tls",fromName:"Wai'tuMusic Platform",fromEmail:"noreply@waitumusic.com"}}),l=async c=>{a(!0);try{await $n("/api/admin/email-config",{method:"POST",body:JSON.stringify(c)}),r({title:"Email Configuration Updated",description:"SMTP settings have been saved successfully."}),s(!1)}catch{r({title:"Configuration Error",description:"Failed to update email settings. Please try again.",variant:"destructive"})}finally{a(!1)}};return e.jsx(kt,{open:t,onOpenChange:s,children:e.jsxs(wt,{className:"sm:max-w-[600px]",children:[e.jsxs(St,{children:[e.jsxs(Ct,{className:"flex items-center space-x-2",children:[e.jsx(vn,{className:"h-5 w-5"}),e.jsx("span",{children:"Email Server Configuration"})]}),e.jsx(us,{children:"Configure SMTP settings for platform email delivery"})]}),e.jsx(On,{...i,children:e.jsxs("form",{onSubmit:i.handleSubmit(l),className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx($e,{control:i.control,name:"smtpHost",render:({field:c})=>e.jsxs(Fe,{children:[e.jsxs(qe,{className:"flex items-center space-x-1",children:[e.jsx(cp,{className:"h-3 w-3"}),e.jsx("span",{children:"SMTP Host"})]}),e.jsx(Le,{children:e.jsx($,{placeholder:"mail.example.com",...c})}),e.jsx(ze,{})]})}),e.jsx($e,{control:i.control,name:"smtpPort",render:({field:c})=>e.jsxs(Fe,{children:[e.jsx(qe,{children:"SMTP Port"}),e.jsx(Le,{children:e.jsx($,{placeholder:"587",...c})}),e.jsx(ze,{})]})})]}),e.jsx($e,{control:i.control,name:"smtpSecure",render:({field:c})=>e.jsxs(Fe,{children:[e.jsxs(qe,{className:"flex items-center space-x-1",children:[e.jsx(Bt,{className:"h-3 w-3"}),e.jsx("span",{children:"Security Type"})]}),e.jsxs(Re,{onValueChange:c.onChange,defaultValue:c.value,children:[e.jsx(Le,{children:e.jsx(Me,{children:e.jsx(Oe,{placeholder:"Select security type"})})}),e.jsxs(_e,{children:[e.jsx(U,{value:"tls",children:"TLS"}),e.jsx(U,{value:"ssl",children:"SSL"}),e.jsx(U,{value:"none",children:"None"})]})]}),e.jsx(ze,{})]})}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx($e,{control:i.control,name:"smtpUser",render:({field:c})=>e.jsxs(Fe,{children:[e.jsx(qe,{children:"SMTP Username"}),e.jsx(Le,{children:e.jsx($,{type:"email",placeholder:"username@example.com",...c})}),e.jsx(ze,{})]})}),e.jsx($e,{control:i.control,name:"smtpPassword",render:({field:c})=>e.jsxs(Fe,{children:[e.jsx(qe,{children:"SMTP Password"}),e.jsx(Le,{children:e.jsx($,{type:"password",placeholder:"",...c})}),e.jsx(ze,{})]})})]}),e.jsxs("div",{className:"space-y-4 pt-4 border-t",children:[e.jsx("h4",{className:"font-medium",children:"Email Appearance"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx($e,{control:i.control,name:"fromName",render:({field:c})=>e.jsxs(Fe,{children:[e.jsx(qe,{children:"From Name"}),e.jsx(Le,{children:e.jsx($,{placeholder:"Your Platform Name",...c})}),e.jsx(ze,{})]})}),e.jsx($e,{control:i.control,name:"fromEmail",render:({field:c})=>e.jsxs(Fe,{children:[e.jsx(qe,{children:"From Email"}),e.jsx(Le,{children:e.jsx($,{type:"email",placeholder:"noreply@example.com",...c})}),e.jsx(ze,{})]})})]})]}),e.jsxs("div",{className:"flex justify-end space-x-2 pt-4",children:[e.jsx(E,{type:"button",variant:"outline",onClick:()=>s(!1),children:"Cancel"}),e.jsx(E,{type:"submit",disabled:n,children:n?"Saving...":"Save Configuration"})]})]})})]})})}function SQ({open:t,onOpenChange:s}){const{toast:n}=nt(),[a,r]=N.useState(!1),[i,l]=N.useState("general"),[c,o]=N.useState({siteName:"Wai'tuMusic Platform",siteDescription:"Complete music industry management platform with comprehensive opportunity discovery",adminEmail:"admin@waitumusic.com",supportEmail:"support@waitumusic.com",maintenanceMode:!1,registrationEnabled:!0,demoMode:!0,debugMode:!1,maxFileSize:"50",allowedFileTypes:"image/jpeg,image/png,image/gif,audio/mpeg,audio/wav,video/mp4",sessionTimeout:"24",maxLoginAttempts:"5",lockoutDuration:"30"}),[d,h]=N.useState({smtpHost:"mail.comeseetv.com",smtpPort:"587",smtpUser:"",smtpPassword:"",smtpSecure:"tls",fromName:"Wai'tuMusic Platform",fromEmail:"noreply@waitumusic.com",replyToEmail:"support@waitumusic.com"}),[u,m]=N.useState({primaryColor:"#059669",secondaryColor:"#0891b2",accentColor:"#7c3aed",backgroundColor:"#ffffff",textColor:"#1f2937",logoUrl:"",faviconUrl:"",customCSS:"",fontFamily:"Inter, system-ui, sans-serif",borderRadius:"0.5rem"}),[p,g]=N.useState({stripeEnabled:!1,stripePublishableKey:"",stripeSecretKey:"",paypalEnabled:!1,paypalClientId:"",paypalClientSecret:"",paypalSandbox:!0,platformFeePercentage:"5.0",processingFeePercentage:"2.9",currency:"USD",minimumAmount:"1.00"}),[x,v]=N.useState({NODE_ENV:"development",DATABASE_URL:"***hidden***",JWT_SECRET:"***hidden***",API_BASE_URL:"http://localhost:5000",FRONTEND_URL:"http://localhost:5000",OPENAI_API_KEY:"",ANTHROPIC_API_KEY:"",PERPLEXITY_API_KEY:""}),[y,f]=N.useState({siteName:"Wai'tuMusic",tagline:"Professional Music Industry Management",description:"Complete platform for artists, professionals, and fans",heroTitle:"Connect, Create, and Thrive in the Music Industry",heroSubtitle:"The ultimate platform connecting Caribbean artists, industry professionals, and music fans worldwide",servicesTitle:"Popular Services",servicesSubtitle:"Comprehensive services designed to elevate your music career and streamline your professional operations",featuresTitle:"Platform Features",featuresSubtitle:"Everything you need to succeed in the music industry",ctaPrimary:"Sign Up Now",ctaSecondary:"Book an Artist",ctaTertiary:"Login",loginTitle:"Welcome Back",loginSubtitle:"Sign in to your account",loginDescription:"Enter your credentials to access your dashboard",demoTitle:"Demo Accounts",footerDescription:"Professional music industry management platform"}),b={toolbar:[[{header:[1,2,3,4,5,6,!1]}],[{font:[]}],[{size:["small",!1,"large","huge"]}],["bold","italic","underline","strike"],[{color:[]},{background:[]}],[{script:"sub"},{script:"super"}],[{list:"ordered"},{list:"bullet"}],[{indent:"-1"},{indent:"+1"}],[{direction:"rtl"}],[{align:[]}],["link","image","video"],["clean"]]},j=["header","font","size","bold","italic","underline","strike","color","background","script","list","bullet","indent","direction","align","link","image","video"],S=async()=>{try{r(!0);const w=await(await xe("/api/admin/system/config")).json();w.config&&(o(P=>({...P,...w.config.general})),h(P=>({...P,...w.config.email})),m(P=>({...P,...w.config.theme})),f(P=>({...P,...w.config.content})),g(P=>({...P,...w.config.payment})),v(P=>({...P,...w.config.environment})))}catch(C){console.error("Failed to load settings:",C)}finally{r(!1)}};N.useEffect(()=>{t&&S()},[t]);const k=async(C,w)=>{try{r(!0),await xe("/api/admin/system/config",{method:"PATCH",body:{section:C,config:w}}),n({title:"Configuration Updated",description:`${C} settings have been saved successfully.`})}catch{n({title:"Configuration Error",description:`Failed to update ${C} settings. Please try again.`,variant:"destructive"})}finally{r(!1)}},T=async()=>{try{r(!0),await xe("/api/admin/system/test-email",{method:"POST",body:d}),n({title:"Email Test Successful",description:"Test email sent successfully. Check your inbox."})}catch{n({title:"Email Test Failed",description:"Failed to send test email. Please check your configuration.",variant:"destructive"})}finally{r(!1)}},A=()=>{document.documentElement.style.setProperty("--primary",u.primaryColor),document.documentElement.style.setProperty("--secondary",u.secondaryColor),n({title:"Theme Preview",description:"Theme colors applied temporarily. Save to make permanent."})};return e.jsx(kt,{open:t,onOpenChange:s,children:e.jsxs(wt,{className:"max-w-6xl max-h-[95vh] overflow-y-auto",children:[e.jsxs(St,{children:[e.jsxs(Ct,{className:"flex items-center space-x-2",children:[e.jsx(Gt,{className:"h-6 w-6"}),e.jsx("span",{children:"System Configuration"})]}),e.jsx(us,{children:"Configure platform settings, email, theming, payments, and environment variables"})]}),e.jsxs(Ut,{value:i,onValueChange:l,className:"w-full",children:[e.jsxs(jt,{className:"grid w-full grid-cols-6",children:[e.jsxs(Ne,{value:"general",className:"flex items-center space-x-2",children:[e.jsx(Gt,{className:"h-4 w-4"}),e.jsx("span",{className:"hidden sm:inline",children:"General"})]}),e.jsxs(Ne,{value:"email",className:"flex items-center space-x-2",children:[e.jsx(vn,{className:"h-4 w-4"}),e.jsx("span",{className:"hidden sm:inline",children:"Email"})]}),e.jsxs(Ne,{value:"theme",className:"flex items-center space-x-2",children:[e.jsx(id,{className:"h-4 w-4"}),e.jsx("span",{className:"hidden sm:inline",children:"Theme"})]}),e.jsxs(Ne,{value:"content",className:"flex items-center space-x-2",children:[e.jsx(is,{className:"h-4 w-4"}),e.jsx("span",{className:"hidden sm:inline",children:"Theme Control"})]}),e.jsxs(Ne,{value:"payment",className:"flex items-center space-x-2",children:[e.jsx(Il,{className:"h-4 w-4"}),e.jsx("span",{className:"hidden sm:inline",children:"Payment"})]}),e.jsxs(Ne,{value:"environment",className:"flex items-center space-x-2",children:[e.jsx(w6,{className:"h-4 w-4"}),e.jsx("span",{className:"hidden sm:inline",children:"Environment"})]})]}),e.jsx(ge,{value:"general",className:"space-y-6",children:e.jsxs(R,{children:[e.jsx(Y,{children:e.jsx(Q,{children:"Platform Settings"})}),e.jsxs(L,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(q,{htmlFor:"siteName",children:"Site Name"}),e.jsx($,{id:"siteName",value:c.siteName,onChange:C=>o(w=>({...w,siteName:C.target.value}))})]}),e.jsxs("div",{children:[e.jsx(q,{htmlFor:"adminEmail",children:"Admin Email"}),e.jsx($,{id:"adminEmail",type:"email",value:c.adminEmail,onChange:C=>o(w=>({...w,adminEmail:C.target.value}))})]})]}),e.jsxs("div",{children:[e.jsx(q,{htmlFor:"siteDescription",children:"Site Description"}),e.jsx(mt,{id:"siteDescription",value:c.siteDescription,onChange:C=>o(w=>({...w,siteDescription:C.target.value})),rows:3})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(gt,{id:"maintenanceMode",checked:c.maintenanceMode,onCheckedChange:C=>o(w=>({...w,maintenanceMode:C}))}),e.jsx(q,{htmlFor:"maintenanceMode",children:"Maintenance Mode"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(gt,{id:"registrationEnabled",checked:c.registrationEnabled,onCheckedChange:C=>o(w=>({...w,registrationEnabled:C}))}),e.jsx(q,{htmlFor:"registrationEnabled",children:"Registration Enabled"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(gt,{id:"demoMode",checked:c.demoMode,onCheckedChange:C=>o(w=>({...w,demoMode:C}))}),e.jsx(q,{htmlFor:"demoMode",children:"Demo Mode"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(gt,{id:"debugMode",checked:c.debugMode,onCheckedChange:C=>o(w=>({...w,debugMode:C}))}),e.jsx(q,{htmlFor:"debugMode",children:"Debug Mode"})]})]}),e.jsxs(E,{onClick:()=>k("general",c),disabled:a,className:"w-full",children:[e.jsx(js,{className:"h-4 w-4 mr-2"}),"Save General Settings"]})]})]})}),e.jsx(ge,{value:"email",className:"space-y-6",children:e.jsxs(R,{children:[e.jsx(Y,{children:e.jsx(Q,{children:"SMTP Configuration"})}),e.jsxs(L,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(q,{htmlFor:"smtpHost",children:"SMTP Host"}),e.jsx($,{id:"smtpHost",value:d.smtpHost,onChange:C=>h(w=>({...w,smtpHost:C.target.value}))})]}),e.jsxs("div",{children:[e.jsx(q,{htmlFor:"smtpPort",children:"SMTP Port"}),e.jsx($,{id:"smtpPort",value:d.smtpPort,onChange:C=>h(w=>({...w,smtpPort:C.target.value}))})]}),e.jsxs("div",{children:[e.jsx(q,{htmlFor:"smtpUser",children:"SMTP Username"}),e.jsx($,{id:"smtpUser",value:d.smtpUser,onChange:C=>h(w=>({...w,smtpUser:C.target.value}))})]}),e.jsxs("div",{children:[e.jsx(q,{htmlFor:"smtpPassword",children:"SMTP Password"}),e.jsx($,{id:"smtpPassword",type:"password",value:d.smtpPassword,onChange:C=>h(w=>({...w,smtpPassword:C.target.value}))})]}),e.jsxs("div",{children:[e.jsx(q,{htmlFor:"fromName",children:"From Name"}),e.jsx($,{id:"fromName",value:d.fromName,onChange:C=>h(w=>({...w,fromName:C.target.value}))})]}),e.jsxs("div",{children:[e.jsx(q,{htmlFor:"fromEmail",children:"From Email"}),e.jsx($,{id:"fromEmail",type:"email",value:d.fromEmail,onChange:C=>h(w=>({...w,fromEmail:C.target.value}))})]})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsxs(E,{onClick:()=>k("email",d),disabled:a,children:[e.jsx(js,{className:"h-4 w-4 mr-2"}),"Save Email Config"]}),e.jsxs(E,{onClick:T,disabled:a,variant:"outline",children:[e.jsx(vn,{className:"h-4 w-4 mr-2"}),"Test Email"]})]})]})]})}),e.jsx(ge,{value:"theme",className:"space-y-6",children:e.jsxs(R,{children:[e.jsx(Y,{children:e.jsx(Q,{children:"Theme & Branding"})}),e.jsxs(L,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx(q,{htmlFor:"primaryColor",children:"Primary Color"}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx($,{id:"primaryColor",type:"color",value:u.primaryColor,onChange:C=>m(w=>({...w,primaryColor:C.target.value})),className:"w-16"}),e.jsx($,{value:u.primaryColor,onChange:C=>m(w=>({...w,primaryColor:C.target.value})),className:"flex-1"})]})]}),e.jsxs("div",{children:[e.jsx(q,{htmlFor:"secondaryColor",children:"Secondary Color"}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx($,{id:"secondaryColor",type:"color",value:u.secondaryColor,onChange:C=>m(w=>({...w,secondaryColor:C.target.value})),className:"w-16"}),e.jsx($,{value:u.secondaryColor,onChange:C=>m(w=>({...w,secondaryColor:C.target.value})),className:"flex-1"})]})]}),e.jsxs("div",{children:[e.jsx(q,{htmlFor:"accentColor",children:"Accent Color"}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx($,{id:"accentColor",type:"color",value:u.accentColor,onChange:C=>m(w=>({...w,accentColor:C.target.value})),className:"w-16"}),e.jsx($,{value:u.accentColor,onChange:C=>m(w=>({...w,accentColor:C.target.value})),className:"flex-1"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(q,{htmlFor:"logoUrl",children:"Logo URL"}),e.jsx($,{id:"logoUrl",value:u.logoUrl,onChange:C=>m(w=>({...w,logoUrl:C.target.value})),placeholder:"https://example.com/logo.png"})]}),e.jsxs("div",{children:[e.jsx(q,{htmlFor:"fontFamily",children:"Font Family"}),e.jsxs(Re,{value:u.fontFamily,onValueChange:C=>m(w=>({...w,fontFamily:C})),children:[e.jsx(Me,{children:e.jsx(Oe,{})}),e.jsxs(_e,{children:[e.jsx(U,{value:"Inter, system-ui, sans-serif",children:"Inter"}),e.jsx(U,{value:"system-ui, -apple-system, sans-serif",children:"System UI"}),e.jsx(U,{value:"Georgia, serif",children:"Georgia"}),e.jsx(U,{value:"'Times New Roman', serif",children:"Times New Roman"})]})]})]})]}),e.jsxs("div",{children:[e.jsx(q,{htmlFor:"customCSS",children:"Custom CSS"}),e.jsx(mt,{id:"customCSS",value:u.customCSS,onChange:C=>m(w=>({...w,customCSS:C.target.value})),rows:6,placeholder:"/* Custom CSS rules */"})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsxs(E,{onClick:()=>k("theme",u),disabled:a,children:[e.jsx(js,{className:"h-4 w-4 mr-2"}),"Save Theme"]}),e.jsxs(E,{onClick:A,variant:"outline",children:[e.jsx(Ns,{className:"h-4 w-4 mr-2"}),"Preview"]})]})]})]})}),e.jsx(ge,{value:"content",className:"space-y-6",children:e.jsxs(R,{children:[e.jsxs(Y,{children:[e.jsx(Q,{children:"Content Management System"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Modify all public-facing text content through centralized configuration"})]}),e.jsxs(L,{className:"space-y-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("h4",{className:"text-sm font-medium flex items-center gap-2",children:[e.jsx(is,{className:"h-4 w-4"}),"Site Information - WYSIWYG Editing"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs(q,{htmlFor:"contentSiteName",className:"flex items-center gap-2",children:[e.jsx(Uf,{className:"h-3 w-3"}),"Site Name (Rich Text)"]}),e.jsx("div",{className:"mt-2",children:e.jsx(Pa,{theme:"snow",value:y.siteName,onChange:C=>f(w=>({...w,siteName:C})),modules:{toolbar:[["bold","italic","underline"],[{color:[]},{background:[]}],[{font:[]}],[{size:["small",!1,"large","huge"]}],["clean"]]},formats:["bold","italic","underline","color","background","font","size"],placeholder:"Wai'tuMusic",className:"bg-white dark:bg-gray-800"})})]}),e.jsxs("div",{children:[e.jsxs(q,{htmlFor:"contentTagline",className:"flex items-center gap-2",children:[e.jsx(ih,{className:"h-3 w-3"}),"Tagline (Rich Text)"]}),e.jsx("div",{className:"mt-2",children:e.jsx(Pa,{theme:"snow",value:y.tagline,onChange:C=>f(w=>({...w,tagline:C})),modules:{toolbar:[["bold","italic","underline"],[{color:[]},{background:[]}],[{font:[]}],[{size:["small",!1,"large","huge"]}],["clean"]]},formats:["bold","italic","underline","color","background","font","size"],placeholder:"Professional Music Industry Management",className:"bg-white dark:bg-gray-800"})})]})]}),e.jsxs("div",{children:[e.jsxs(q,{htmlFor:"contentDescription",className:"flex items-center gap-2",children:[e.jsx(_i,{className:"h-3 w-3"}),"Site Description (Rich Text)"]}),e.jsx("div",{className:"mt-2",children:e.jsx(Pa,{theme:"snow",value:y.description,onChange:C=>f(w=>({...w,description:C})),modules:b,formats:j,placeholder:"Complete platform for artists, professionals, and fans",className:"bg-white dark:bg-gray-800"})})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("h4",{className:"text-sm font-medium flex items-center gap-2",children:[e.jsx(_i,{className:"h-4 w-4"}),"Homepage Content - WYSIWYG Editing"]}),e.jsxs("div",{children:[e.jsxs(q,{htmlFor:"heroTitle",className:"flex items-center gap-2",children:[e.jsx(Uf,{className:"h-3 w-3"}),"Hero Title (Rich Text)"]}),e.jsx("div",{className:"mt-2",children:e.jsx(Pa,{theme:"snow",value:y.heroTitle,onChange:C=>f(w=>({...w,heroTitle:C})),modules:b,formats:j,placeholder:"Connect, Create, and Thrive in the Music Industry",className:"bg-white dark:bg-gray-800"})})]}),e.jsxs("div",{children:[e.jsxs(q,{htmlFor:"heroSubtitle",className:"flex items-center gap-2",children:[e.jsx(ih,{className:"h-3 w-3"}),"Hero Subtitle (Rich Text)"]}),e.jsx("div",{className:"mt-2",children:e.jsx(Pa,{theme:"snow",value:y.heroSubtitle,onChange:C=>f(w=>({...w,heroSubtitle:C})),modules:b,formats:j,placeholder:"The ultimate platform connecting Caribbean artists, industry professionals, and music fans worldwide",className:"bg-white dark:bg-gray-800"})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs(q,{htmlFor:"servicesTitle",className:"flex items-center gap-2",children:[e.jsx(_i,{className:"h-3 w-3"}),"Services Section Title (Rich Text)"]}),e.jsx("div",{className:"mt-2",children:e.jsx(Pa,{theme:"snow",value:y.servicesTitle,onChange:C=>f(w=>({...w,servicesTitle:C})),modules:{toolbar:[["bold","italic","underline"],[{color:[]},{background:[]}],[{size:["small",!1,"large"]}],["clean"]]},formats:["bold","italic","underline","color","background","size"],placeholder:"Popular Services",className:"bg-white dark:bg-gray-800"})})]}),e.jsxs("div",{children:[e.jsxs(q,{htmlFor:"featuresTitle",className:"flex items-center gap-2",children:[e.jsx(_i,{className:"h-3 w-3"}),"Features Section Title (Rich Text)"]}),e.jsx("div",{className:"mt-2",children:e.jsx(Pa,{theme:"snow",value:y.featuresTitle,onChange:C=>f(w=>({...w,featuresTitle:C})),modules:{toolbar:[["bold","italic","underline"],[{color:[]},{background:[]}],[{size:["small",!1,"large"]}],["clean"]]},formats:["bold","italic","underline","color","background","size"],placeholder:"Platform Features",className:"bg-white dark:bg-gray-800"})})]})]}),e.jsxs("div",{children:[e.jsxs(q,{htmlFor:"servicesSubtitle",className:"flex items-center gap-2",children:[e.jsx(ih,{className:"h-3 w-3"}),"Services Subtitle (Rich Text)"]}),e.jsx("div",{className:"mt-2",children:e.jsx(Pa,{theme:"snow",value:y.servicesSubtitle,onChange:C=>f(w=>({...w,servicesSubtitle:C})),modules:b,formats:j,placeholder:"Comprehensive services designed to elevate your music career and streamline your professional operations",className:"bg-white dark:bg-gray-800"})})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h4",{className:"text-sm font-medium",children:"Call-to-Action Buttons"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx(q,{htmlFor:"ctaPrimary",children:"Primary CTA"}),e.jsx($,{id:"ctaPrimary",value:y.ctaPrimary,onChange:C=>f(w=>({...w,ctaPrimary:C.target.value})),placeholder:"Sign Up Now"})]}),e.jsxs("div",{children:[e.jsx(q,{htmlFor:"ctaSecondary",children:"Secondary CTA"}),e.jsx($,{id:"ctaSecondary",value:y.ctaSecondary,onChange:C=>f(w=>({...w,ctaSecondary:C.target.value})),placeholder:"Book an Artist"})]}),e.jsxs("div",{children:[e.jsx(q,{htmlFor:"ctaTertiary",children:"Tertiary CTA"}),e.jsx($,{id:"ctaTertiary",value:y.ctaTertiary,onChange:C=>f(w=>({...w,ctaTertiary:C.target.value})),placeholder:"Login"})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("h4",{className:"text-sm font-medium flex items-center gap-2",children:[e.jsx(Ul,{className:"h-4 w-4"}),"Login Page Content - WYSIWYG Editing"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs(q,{htmlFor:"loginTitle",className:"flex items-center gap-2",children:[e.jsx(Uf,{className:"h-3 w-3"}),"Login Title (Rich Text)"]}),e.jsx("div",{className:"mt-2",children:e.jsx(Pa,{theme:"snow",value:y.loginTitle,onChange:C=>f(w=>({...w,loginTitle:C})),modules:{toolbar:[["bold","italic","underline"],[{color:[]},{background:[]}],[{size:["small",!1,"large"]}],[{align:[]}],["clean"]]},formats:["bold","italic","underline","color","background","size","align"],placeholder:"Welcome Back",className:"bg-white dark:bg-gray-800"})})]}),e.jsxs("div",{children:[e.jsxs(q,{htmlFor:"loginSubtitle",className:"flex items-center gap-2",children:[e.jsx(ih,{className:"h-3 w-3"}),"Login Subtitle (Rich Text)"]}),e.jsx("div",{className:"mt-2",children:e.jsx(Pa,{theme:"snow",value:y.loginSubtitle,onChange:C=>f(w=>({...w,loginSubtitle:C})),modules:{toolbar:[["bold","italic","underline"],[{color:[]},{background:[]}],[{size:["small",!1,"large"]}],[{align:[]}],["clean"]]},formats:["bold","italic","underline","color","background","size","align"],placeholder:"Sign in to your account",className:"bg-white dark:bg-gray-800"})})]})]}),e.jsxs("div",{children:[e.jsxs(q,{htmlFor:"loginDescription",className:"flex items-center gap-2",children:[e.jsx(_i,{className:"h-3 w-3"}),"Login Description (Rich Text)"]}),e.jsx("div",{className:"mt-2",children:e.jsx(Pa,{theme:"snow",value:y.loginDescription,onChange:C=>f(w=>({...w,loginDescription:C})),modules:{toolbar:[["bold","italic","underline"],[{color:[]},{background:[]}],[{size:["small",!1,"large"]}],[{align:[]}],["clean"]]},formats:["bold","italic","underline","color","background","size","align"],placeholder:"Enter your credentials to access your dashboard",className:"bg-white dark:bg-gray-800"})})]})]}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsxs(E,{onClick:()=>k("content",y),disabled:a,className:"flex-1 sm:flex-none",children:[e.jsx(js,{className:"h-4 w-4 mr-2"}),"Save Content Configuration"]}),e.jsxs(E,{onClick:()=>{n({title:"Content Loaded",description:"Content configuration loaded from system files"})},variant:"outline",className:"flex-1 sm:flex-none",children:[e.jsx(En,{className:"h-4 w-4 mr-2"}),"Load from Files"]}),e.jsxs(E,{onClick:()=>{f({siteName:"Wai'tuMusic",tagline:"Professional Music Industry Management",description:"Complete platform for artists, professionals, and fans",heroTitle:"Connect, Create, and Thrive in the Music Industry",heroSubtitle:"The ultimate platform connecting Caribbean artists, industry professionals, and music fans worldwide",servicesTitle:"Popular Services",servicesSubtitle:"Comprehensive services designed to elevate your music career and streamline your professional operations",featuresTitle:"Platform Features",featuresSubtitle:"Everything you need to succeed in the music industry",ctaPrimary:"Sign Up Now",ctaSecondary:"Book an Artist",ctaTertiary:"Login",loginTitle:"Welcome Back",loginSubtitle:"Sign in to your account",loginDescription:"Enter your credentials to access your dashboard",demoTitle:"Demo Accounts",footerDescription:"Professional music industry management platform"}),n({title:"Content Reset",description:"All content fields reset to default values"})},variant:"secondary",className:"flex-1 sm:flex-none",children:[e.jsx(En,{className:"h-4 w-4 mr-2"}),"Reset to Defaults"]}),e.jsxs(E,{onClick:()=>{const C=JSON.stringify(y,null,2),w=new Blob([C],{type:"application/json"}),P=URL.createObjectURL(w),M=document.createElement("a");M.href=P,M.download="waitumusic-content-config.json",document.body.appendChild(M),M.click(),document.body.removeChild(M),URL.revokeObjectURL(P),n({title:"Content Exported",description:"Content configuration downloaded as JSON file"})},variant:"outline",className:"flex-1 sm:flex-none",children:[e.jsx(Xs,{className:"h-4 w-4 mr-2"}),"Export Config"]})]}),e.jsxs("div",{className:"bg-gradient-to-r from-purple-50 to-blue-50 dark:from-purple-950 dark:to-blue-950 p-4 rounded-lg border border-purple-200 dark:border-purple-800",children:[e.jsxs("h5",{className:"text-sm font-medium mb-2 flex items-center gap-2",children:[e.jsx(Ns,{className:"h-4 w-4"}),"WYSIWYG Formatting Features"]}),e.jsx("div",{className:"text-xs text-muted-foreground space-y-2",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{children:e.jsx("strong",{className:"text-purple-600 dark:text-purple-400",children:"Text Formatting:"})}),e.jsxs("ul",{className:"list-disc list-inside space-y-1 ml-2",children:[e.jsx("li",{children:"Bold, italic, underline, strikethrough"}),e.jsx("li",{children:"Font family and size selection"}),e.jsx("li",{children:"Text and background colors"}),e.jsx("li",{children:"Headers (H1-H6) and alignment"})]})]}),e.jsxs("div",{children:[e.jsx("p",{children:e.jsx("strong",{className:"text-blue-600 dark:text-blue-400",children:"Advanced Features:"})}),e.jsxs("ul",{className:"list-disc list-inside space-y-1 ml-2",children:[e.jsx("li",{children:"Lists (ordered and unordered)"}),e.jsx("li",{children:"Links, images, and videos"}),e.jsx("li",{children:"Subscript and superscript"}),e.jsx("li",{children:"Text direction and indentation"})]})]})]})})]}),e.jsxs("div",{className:"bg-blue-50 dark:bg-blue-950 p-4 rounded-lg",children:[e.jsx("h5",{className:"text-sm font-medium mb-2",children:"Content Configuration Guide"}),e.jsxs("p",{className:"text-xs text-muted-foreground mb-2",children:["All content is managed through ",e.jsx("code",{children:"shared/content-config.ts"}),". Changes here will update the centralized configuration."]}),e.jsxs("div",{className:"text-xs text-muted-foreground space-y-1",children:[e.jsxs("p",{children:[" ",e.jsx("strong",{children:"Site Information:"})," Platform name, tagline, and description with rich text formatting"]}),e.jsxs("p",{children:[" ",e.jsx("strong",{children:"Homepage Content:"})," Hero section, services, and features text with WYSIWYG editing"]}),e.jsxs("p",{children:[" ",e.jsx("strong",{children:"Navigation:"})," Menu items and mobile piano key labels"]}),e.jsxs("p",{children:[" ",e.jsx("strong",{children:"Login/Auth:"})," Form labels, buttons, and demo account text with rich formatting"]}),e.jsxs("p",{children:[" ",e.jsx("strong",{children:"WYSIWYG Editing:"})," Full rich text editing with colors, fonts, and formatting options"]})]})]})]})]})}),e.jsx(ge,{value:"payment",className:"space-y-6",children:e.jsxs(R,{children:[e.jsx(Y,{children:e.jsx(Q,{children:"Payment Gateway Configuration"})}),e.jsxs(L,{className:"space-y-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(gt,{id:"stripeEnabled",checked:p.stripeEnabled,onCheckedChange:C=>g(w=>({...w,stripeEnabled:C}))}),e.jsx(q,{htmlFor:"stripeEnabled",children:"Enable Stripe"})]}),p.stripeEnabled&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 pl-6",children:[e.jsxs("div",{children:[e.jsx(q,{htmlFor:"stripePublishableKey",children:"Stripe Publishable Key"}),e.jsx($,{id:"stripePublishableKey",value:p.stripePublishableKey,onChange:C=>g(w=>({...w,stripePublishableKey:C.target.value})),placeholder:"pk_test_..."})]}),e.jsxs("div",{children:[e.jsx(q,{htmlFor:"stripeSecretKey",children:"Stripe Secret Key"}),e.jsx($,{id:"stripeSecretKey",type:"password",value:p.stripeSecretKey,onChange:C=>g(w=>({...w,stripeSecretKey:C.target.value})),placeholder:"sk_test_..."})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(gt,{id:"paypalEnabled",checked:p.paypalEnabled,onCheckedChange:C=>g(w=>({...w,paypalEnabled:C}))}),e.jsx(q,{htmlFor:"paypalEnabled",children:"Enable PayPal"})]}),p.paypalEnabled&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 pl-6",children:[e.jsxs("div",{children:[e.jsx(q,{htmlFor:"paypalClientId",children:"PayPal Client ID"}),e.jsx($,{id:"paypalClientId",value:p.paypalClientId,onChange:C=>g(w=>({...w,paypalClientId:C.target.value}))})]}),e.jsxs("div",{children:[e.jsx(q,{htmlFor:"paypalClientSecret",children:"PayPal Client Secret"}),e.jsx($,{id:"paypalClientSecret",type:"password",value:p.paypalClientSecret,onChange:C=>g(w=>({...w,paypalClientSecret:C.target.value}))})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(gt,{id:"paypalSandbox",checked:p.paypalSandbox,onCheckedChange:C=>g(w=>({...w,paypalSandbox:C}))}),e.jsx(q,{htmlFor:"paypalSandbox",children:"Sandbox Mode"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx(q,{htmlFor:"platformFeePercentage",children:"Platform Fee (%)"}),e.jsx($,{id:"platformFeePercentage",type:"number",step:"0.1",value:p.platformFeePercentage,onChange:C=>g(w=>({...w,platformFeePercentage:C.target.value}))})]}),e.jsxs("div",{children:[e.jsx(q,{htmlFor:"processingFeePercentage",children:"Processing Fee (%)"}),e.jsx($,{id:"processingFeePercentage",type:"number",step:"0.1",value:p.processingFeePercentage,onChange:C=>g(w=>({...w,processingFeePercentage:C.target.value}))})]}),e.jsxs("div",{children:[e.jsx(q,{htmlFor:"minimumAmount",children:"Minimum Amount"}),e.jsx($,{id:"minimumAmount",type:"number",step:"0.01",value:p.minimumAmount,onChange:C=>g(w=>({...w,minimumAmount:C.target.value}))})]})]}),e.jsxs(E,{onClick:()=>k("payment",p),disabled:a,className:"w-full",children:[e.jsx(js,{className:"h-4 w-4 mr-2"}),"Save Payment Configuration"]})]})]})}),e.jsx(ge,{value:"environment",className:"space-y-6",children:e.jsxs(R,{children:[e.jsxs(Y,{children:[e.jsx(Q,{children:"Environment Variables"}),e.jsxs(X,{variant:"destructive",className:"w-fit",children:[e.jsx(Ul,{className:"h-3 w-3 mr-1"}),"Sensitive Information"]})]}),e.jsxs(L,{className:"space-y-4",children:[e.jsx("div",{className:"grid grid-cols-1 gap-4",children:Object.entries(x).map(([C,w])=>e.jsxs("div",{children:[e.jsx(q,{htmlFor:C,children:C}),e.jsx($,{id:C,type:C.includes("SECRET")||C.includes("PASSWORD")||C.includes("KEY")?"password":"text",value:w,onChange:P=>v(M=>({...M,[C]:P.target.value})),placeholder:C.includes("SECRET")?"***hidden***":`Enter ${C}`})]},C))}),e.jsxs(E,{onClick:()=>k("environment",x),disabled:a,className:"w-full",variant:"destructive",children:[e.jsx(js,{className:"h-4 w-4 mr-2"}),"Save Environment Variables"]})]})]})})]})]})})}function CQ({open:t,onOpenChange:s}){const{toast:n}=nt(),[a,r]=N.useState(!1),[i,l]=N.useState("overview"),[c,o]=N.useState(0),[d,h]=N.useState(!1),[u,m]=N.useState([{id:"ssl_certificate",name:"SSL Certificate",status:"passed",description:"SSL certificate validation and expiration check",severity:"high",lastChecked:"2025-01-23T10:30:00Z",details:"Valid SSL certificate, expires in 89 days",recommendation:"Monitor certificate expiration"},{id:"password_policy",name:"Password Policy",status:"passed",description:"Password strength and policy enforcement",severity:"high",lastChecked:"2025-01-23T10:30:00Z",details:"Strong password policy enforced"},{id:"database_encryption",name:"Database Encryption",status:"passed",description:"Database encryption at rest and in transit",severity:"critical",lastChecked:"2025-01-23T10:30:00Z",details:"All database connections encrypted"},{id:"session_security",name:"Session Security",status:"warning",description:"Session timeout and token validation",severity:"medium",lastChecked:"2025-01-23T10:30:00Z",details:"Session timeout could be shorter for admin users",recommendation:"Consider reducing admin session timeout to 4 hours"},{id:"api_rate_limiting",name:"API Rate Limiting",status:"passed",description:"API endpoint rate limiting and DDoS protection",severity:"high",lastChecked:"2025-01-23T10:30:00Z",details:"Rate limiting active on all public endpoints"},{id:"input_validation",name:"Input Validation",status:"passed",description:"SQL injection and XSS protection",severity:"critical",lastChecked:"2025-01-23T10:30:00Z",details:"Comprehensive input sanitization implemented"},{id:"file_upload_security",name:"File Upload Security",status:"warning",description:"File upload validation and virus scanning",severity:"medium",lastChecked:"2025-01-23T10:30:00Z",details:"File type validation active, virus scanning recommended",recommendation:"Implement virus scanning for uploaded files"},{id:"cors_policy",name:"CORS Policy",status:"passed",description:"Cross-origin resource sharing configuration",severity:"medium",lastChecked:"2025-01-23T10:30:00Z",details:"Restrictive CORS policy configured"}]),[p,g]=N.useState([{id:"1",timestamp:"2025-01-23T10:45:00Z",event:"User Login",user:"superadmin@waitumusic.com",ip:"192.168.1.100",status:"Success",details:"Successful login from known device"},{id:"2",timestamp:"2025-01-23T10:30:00Z",event:"Failed Login Attempt",user:"unknown@example.com",ip:"203.0.113.42",status:"Failed",details:"Invalid credentials - 3rd attempt"},{id:"3",timestamp:"2025-01-23T10:15:00Z",event:"Database Query",user:"admin@waitumusic.com",ip:"192.168.1.101",status:"Success",details:"User data export requested"},{id:"4",timestamp:"2025-01-23T10:00:00Z",event:"Configuration Change",user:"superadmin@waitumusic.com",ip:"192.168.1.100",status:"Success",details:"Email SMTP settings updated"},{id:"5",timestamp:"2025-01-23T09:45:00Z",event:"Suspicious Activity",user:"bot@scanner.com",ip:"198.51.100.23",status:"Blocked",details:"Automated scanning detected and blocked"}]),[x,v]=N.useState({activeSessions:12,suspiciousAttempts:3,blockedIPs:15,lastScanTime:"2025-01-23T10:30:00Z",threatsDetected:0,vulnerabilities:1}),y=async()=>{h(!0),o(0);try{const T=setInterval(()=>{o(A=>A>=100?(clearInterval(T),h(!1),100):A+10)},500);await xe("/api/admin/security/scan",{method:"POST"}),n({title:"Security Scan Complete",description:"No critical vulnerabilities detected. 1 warning found."}),f()}catch{h(!1),o(0),n({title:"Security Scan Failed",description:"Unable to complete security scan. Please try again.",variant:"destructive"})}},f=async()=>{try{r(!0);const A=await(await xe("/api/admin/security/audit")).json();A.checks&&m(A.checks),A.logs&&g(A.logs),A.threats&&v(A.threats)}catch(T){console.error("Failed to load security data:",T)}finally{r(!1)}};N.useEffect(()=>{t&&f()},[t]);const b=T=>{switch(T){case"passed":return e.jsx(ct,{className:"h-5 w-5 text-green-500"});case"failed":return e.jsx(Fa,{className:"h-5 w-5 text-red-500"});case"warning":return e.jsx(ys,{className:"h-5 w-5 text-yellow-500"});case"pending":return e.jsx(Qt,{className:"h-5 w-5 text-gray-500"});default:return e.jsx(Qt,{className:"h-5 w-5 text-gray-500"})}},j=T=>{switch(T){case"passed":return"bg-green-100 text-green-800";case"failed":return"bg-red-100 text-red-800";case"warning":return"bg-yellow-100 text-yellow-800";case"pending":return"bg-gray-100 text-gray-800";default:return"bg-gray-100 text-gray-800"}},S=T=>{switch(T){case"critical":return"bg-red-100 text-red-800";case"high":return"bg-orange-100 text-orange-800";case"medium":return"bg-yellow-100 text-yellow-800";case"low":return"bg-blue-100 text-blue-800";default:return"bg-gray-100 text-gray-800"}},k=async()=>{try{const T=await xe("/api/admin/security/export-report",{method:"POST"});n({title:"Audit Report Generated",description:"Security audit report exported successfully."})}catch{n({title:"Export Failed",description:"Unable to generate audit report.",variant:"destructive"})}};return e.jsx(kt,{open:t,onOpenChange:s,children:e.jsxs(wt,{className:"max-w-6xl max-h-[95vh] overflow-y-auto",children:[e.jsxs(St,{children:[e.jsxs(Ct,{className:"flex items-center space-x-2",children:[e.jsx(Bt,{className:"h-6 w-6"}),e.jsx("span",{children:"Security & Audit"})]}),e.jsx(us,{children:"Security monitoring, threat detection, and compliance auditing"})]}),e.jsxs(Ut,{value:i,onValueChange:l,className:"w-full",children:[e.jsxs(jt,{className:"grid w-full grid-cols-4",children:[e.jsxs(Ne,{value:"overview",className:"flex items-center space-x-2",children:[e.jsx(Bt,{className:"h-4 w-4"}),e.jsx("span",{className:"hidden sm:inline",children:"Overview"})]}),e.jsxs(Ne,{value:"checks",className:"flex items-center space-x-2",children:[e.jsx(ct,{className:"h-4 w-4"}),e.jsx("span",{className:"hidden sm:inline",children:"Security Checks"})]}),e.jsxs(Ne,{value:"threats",className:"flex items-center space-x-2",children:[e.jsx(ys,{className:"h-4 w-4"}),e.jsx("span",{className:"hidden sm:inline",children:"Threat Detection"})]}),e.jsxs(Ne,{value:"logs",className:"flex items-center space-x-2",children:[e.jsx(xt,{className:"h-4 w-4"}),e.jsx("span",{className:"hidden sm:inline",children:"Audit Logs"})]})]}),e.jsxs(ge,{value:"overview",className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsxs(R,{children:[e.jsxs(Y,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(Q,{className:"text-sm font-medium",children:"Security Score"}),e.jsx(Bt,{className:"h-4 w-4 text-green-600"})]}),e.jsxs(L,{children:[e.jsx("div",{className:"text-2xl font-bold text-green-600",children:"87%"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Good security posture"})]})]}),e.jsxs(R,{children:[e.jsxs(Y,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(Q,{className:"text-sm font-medium",children:"Active Threats"}),e.jsx(ys,{className:"h-4 w-4 text-yellow-600"})]}),e.jsxs(L,{children:[e.jsx("div",{className:"text-2xl font-bold",children:x.threatsDetected}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"No active threats"})]})]}),e.jsxs(R,{children:[e.jsxs(Y,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(Q,{className:"text-sm font-medium",children:"Vulnerabilities"}),e.jsx(Fa,{className:"h-4 w-4 text-orange-600"})]}),e.jsxs(L,{children:[e.jsx("div",{className:"text-2xl font-bold",children:x.vulnerabilities}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"1 warning to address"})]})]}),e.jsxs(R,{children:[e.jsxs(Y,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(Q,{className:"text-sm font-medium",children:"Blocked IPs"}),e.jsx(x6,{className:"h-4 w-4 text-red-600"})]}),e.jsxs(L,{children:[e.jsx("div",{className:"text-2xl font-bold",children:x.blockedIPs}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Automatic protection"})]})]})]}),e.jsxs(R,{children:[e.jsx(Y,{children:e.jsx(Q,{children:"Security Scan"})}),e.jsxs(L,{className:"space-y-4",children:[d&&e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{children:"Scanning security policies..."}),e.jsxs("span",{children:[c,"%"]})]}),e.jsx(qs,{value:c,className:"w-full"})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsxs(E,{onClick:y,disabled:d,children:[e.jsx(En,{className:`h-4 w-4 mr-2 ${d?"animate-spin":""}`}),d?"Scanning...":"Run Security Scan"]}),e.jsxs(E,{onClick:k,variant:"outline",children:[e.jsx(Cs,{className:"h-4 w-4 mr-2"}),"Export Report"]})]})]})]})]}),e.jsx(ge,{value:"checks",className:"space-y-6",children:e.jsx("div",{className:"grid grid-cols-1 gap-4",children:u.map(T=>e.jsx(R,{children:e.jsxs(L,{className:"p-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[b(T.status),e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium",children:T.name}),e.jsx("p",{className:"text-sm text-muted-foreground",children:T.description})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(X,{className:S(T.severity),children:T.severity}),e.jsx(X,{className:j(T.status),children:T.status})]})]}),e.jsxs("div",{className:"mt-3 text-sm text-gray-600",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Details:"})," ",T.details]}),T.recommendation&&e.jsxs("p",{className:"mt-1",children:[e.jsx("strong",{children:"Recommendation:"})," ",T.recommendation]}),e.jsxs("p",{className:"mt-1 text-xs text-muted-foreground",children:["Last checked: ",new Date(T.lastChecked).toLocaleString()]})]})]})},T.id))})}),e.jsx(ge,{value:"threats",className:"space-y-6",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs(R,{children:[e.jsx(Y,{children:e.jsx(Q,{children:"Real-time Monitoring"})}),e.jsxs(L,{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Active Sessions:"}),e.jsx(X,{children:x.activeSessions})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Suspicious Attempts (24h):"}),e.jsx(X,{variant:"destructive",children:x.suspiciousAttempts})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Blocked IPs:"}),e.jsx(X,{variant:"secondary",children:x.blockedIPs})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Last Scan:"}),e.jsx("span",{className:"text-sm text-muted-foreground",children:new Date(x.lastScanTime).toLocaleString()})]})]})]}),e.jsxs(R,{children:[e.jsx(Y,{children:e.jsx(Q,{children:"Threat Intelligence"})}),e.jsx(L,{className:"space-y-4",children:e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{children:"DDoS Protection"}),e.jsx(X,{className:"bg-green-100 text-green-800",children:"Active"})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{children:"Firewall"}),e.jsx(X,{className:"bg-green-100 text-green-800",children:"Active"})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{children:"Intrusion Detection"}),e.jsx(X,{className:"bg-green-100 text-green-800",children:"Active"})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{children:"Rate Limiting"}),e.jsx(X,{className:"bg-green-100 text-green-800",children:"Active"})]})]})})]})]})}),e.jsx(ge,{value:"logs",className:"space-y-6",children:e.jsxs(R,{children:[e.jsx(Y,{children:e.jsx(Q,{children:"Recent Security Events"})}),e.jsx(L,{children:e.jsx("div",{className:"space-y-3",children:p.map(T=>e.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:`w-3 h-3 rounded-full ${T.status==="Success"?"bg-green-500":T.status==="Failed"?"bg-red-500":"bg-yellow-500"}`}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:T.event}),e.jsx("p",{className:"text-sm text-muted-foreground",children:T.details})]})]}),e.jsxs("div",{className:"text-right text-sm text-muted-foreground",children:[e.jsx("p",{children:T.user}),e.jsx("p",{children:T.ip}),e.jsx("p",{children:new Date(T.timestamp).toLocaleString()})]})]},T.id))})})]})})]})]})})}function kQ({open:t,onOpenChange:s}){const{toast:n}=nt(),[a,r]=N.useState(!1),[i,l]=N.useState("overview"),[c,o]=N.useState([{name:"Response Time",value:245,unit:"ms",status:"good",trend:"stable",description:"Average API response time"},{name:"Throughput",value:150,unit:"req/min",status:"good",trend:"up",description:"Requests processed per minute"},{name:"Error Rate",value:.8,unit:"%",status:"good",trend:"down",description:"Percentage of failed requests"},{name:"Database Query Time",value:89,unit:"ms",status:"good",trend:"stable",description:"Average database query execution time"},{name:"Cache Hit Rate",value:94.2,unit:"%",status:"good",trend:"up",description:"Percentage of requests served from cache"},{name:"Page Load Time",value:1.8,unit:"s",status:"warning",trend:"up",description:"Average frontend page load time"}]),[d,h]=N.useState([{name:"CPU Usage",usage:23,total:100,unit:"%",status:"good"},{name:"Memory Usage",usage:1.8,total:4,unit:"GB",status:"good"},{name:"Disk Usage",usage:12.5,total:50,unit:"GB",status:"good"},{name:"Network I/O",usage:45.2,total:100,unit:"Mbps",status:"good"},{name:"Database Connections",usage:8,total:100,unit:"connections",status:"good"},{name:"Active Sessions",usage:23,total:1e3,unit:"sessions",status:"good"}]),[u,m]=N.useState([{id:"1",timestamp:"2025-01-23T10:15:00Z",level:"warning",metric:"Page Load Time",message:"Page load time increased to 2.1s",resolved:!0},{id:"2",timestamp:"2025-01-23T09:30:00Z",level:"info",metric:"Cache Hit Rate",message:"Cache hit rate improved to 94.2%",resolved:!0},{id:"3",timestamp:"2025-01-23T08:45:00Z",level:"critical",metric:"Database",message:"Database connection pool exhausted",resolved:!0},{id:"4",timestamp:"2025-01-23T08:00:00Z",level:"warning",metric:"Memory Usage",message:"Memory usage exceeded 80%",resolved:!0}]),[p,g]=N.useState([{id:"1",name:"Database Index Optimization",status:"completed",impact:"high",description:"Optimize database indexes for faster queries",estimatedImprovement:"25% faster queries"},{id:"2",name:"Image Compression",status:"in_progress",impact:"medium",description:"Compress and optimize uploaded images",estimatedImprovement:"15% faster page loads"},{id:"3",name:"API Response Caching",status:"pending",impact:"high",description:"Implement aggressive caching for static API responses",estimatedImprovement:"40% faster API responses"},{id:"4",name:"CDN Implementation",status:"pending",impact:"high",description:"Deploy content delivery network for static assets",estimatedImprovement:"60% faster asset loading"}]),x=async()=>{try{r(!0);const T=await(await xe("/api/admin/performance/metrics")).json();T.metrics&&o(T.metrics),T.resources&&h(T.resources),T.alerts&&m(T.alerts)}catch(k){console.error("Failed to load performance data:",k)}finally{r(!1)}},v=async k=>{try{await xe("/api/admin/performance/optimize",{method:"POST",body:{taskId:k}}),n({title:"Optimization Started",description:"Performance optimization task has been initiated."}),g(T=>T.map(A=>A.id===k?{...A,status:"in_progress"}:A))}catch{n({title:"Optimization Failed",description:"Unable to start optimization task.",variant:"destructive"})}},y=async()=>{try{await xe("/api/admin/performance/report",{method:"POST"}),n({title:"Performance Report Generated",description:"Detailed performance report has been created and will be emailed to you."})}catch{n({title:"Report Generation Failed",description:"Unable to generate performance report.",variant:"destructive"})}};N.useEffect(()=>{if(t){x();const k=setInterval(x,3e4);return()=>clearInterval(k)}},[t]);const f=k=>{switch(k){case"good":return"text-green-600";case"warning":return"text-yellow-600";case"critical":return"text-red-600";default:return"text-gray-600"}},b=k=>{switch(k){case"good":return e.jsx(ct,{className:"h-4 w-4 text-green-500"});case"warning":return e.jsx(ys,{className:"h-4 w-4 text-yellow-500"});case"critical":return e.jsx(ys,{className:"h-4 w-4 text-red-500"});default:return e.jsx(ct,{className:"h-4 w-4 text-gray-500"})}},j=k=>{switch(k){case"up":return e.jsx(Is,{className:"h-4 w-4 text-green-500"});case"down":return e.jsx(xx,{className:"h-4 w-4 text-red-500"});default:return e.jsx("div",{className:"w-4 h-4"})}},S=k=>Math.round(k.usage/k.total*100);return e.jsx(kt,{open:t,onOpenChange:s,children:e.jsxs(wt,{className:"max-w-6xl max-h-[95vh] overflow-y-auto",children:[e.jsxs(St,{children:[e.jsxs(Ct,{className:"flex items-center space-x-2",children:[e.jsx(_n,{className:"h-6 w-6"}),e.jsx("span",{children:"Performance Monitor"})]}),e.jsx(us,{children:"Real-time system performance monitoring, optimization, and reporting"})]}),e.jsxs(Ut,{value:i,onValueChange:l,className:"w-full",children:[e.jsxs(jt,{className:"grid w-full grid-cols-4",children:[e.jsxs(Ne,{value:"overview",className:"flex items-center space-x-2",children:[e.jsx(qr,{className:"h-4 w-4"}),e.jsx("span",{className:"hidden sm:inline",children:"Overview"})]}),e.jsxs(Ne,{value:"resources",className:"flex items-center space-x-2",children:[e.jsx(cp,{className:"h-4 w-4"}),e.jsx("span",{className:"hidden sm:inline",children:"Resources"})]}),e.jsxs(Ne,{value:"alerts",className:"flex items-center space-x-2",children:[e.jsx(ys,{className:"h-4 w-4"}),e.jsx("span",{className:"hidden sm:inline",children:"Alerts"})]}),e.jsxs(Ne,{value:"optimization",className:"flex items-center space-x-2",children:[e.jsx(In,{className:"h-4 w-4"}),e.jsx("span",{className:"hidden sm:inline",children:"Optimization"})]})]}),e.jsxs(ge,{value:"overview",className:"space-y-6",children:[e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:c.map(k=>e.jsxs(R,{children:[e.jsxs(Y,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(Q,{className:"text-sm font-medium",children:k.name}),b(k.status)]}),e.jsxs(L,{children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:`text-2xl font-bold ${f(k.status)}`,children:[k.value,k.unit]}),j(k.trend)]}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:k.description})]})]},k.name))}),e.jsxs(R,{children:[e.jsx(Y,{children:e.jsx(Q,{children:"Performance Actions"})}),e.jsx(L,{className:"space-y-4",children:e.jsxs("div",{className:"flex space-x-2",children:[e.jsxs(E,{onClick:x,disabled:a,children:[e.jsx(En,{className:`h-4 w-4 mr-2 ${a?"animate-spin":""}`}),"Refresh Metrics"]}),e.jsxs(E,{onClick:y,variant:"outline",children:[e.jsx(wn,{className:"h-4 w-4 mr-2"}),"Generate Report"]})]})})]})]}),e.jsx(ge,{value:"resources",className:"space-y-6",children:e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:d.map(k=>e.jsxs(R,{children:[e.jsx(Y,{children:e.jsxs(Q,{className:"flex items-center justify-between",children:[e.jsx("span",{children:k.name}),b(k.status)]})}),e.jsx(L,{children:e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsxs("span",{children:[k.usage," ",k.unit]}),e.jsxs("span",{children:[S(k),"%"]})]}),e.jsx(qs,{value:S(k),className:"w-full"}),e.jsxs("div",{className:"text-xs text-muted-foreground",children:[k.usage," / ",k.total," ",k.unit]})]})})]},k.name))})}),e.jsx(ge,{value:"alerts",className:"space-y-6",children:e.jsxs(R,{children:[e.jsx(Y,{children:e.jsx(Q,{children:"Performance Alerts History"})}),e.jsx(L,{children:e.jsx("div",{className:"space-y-3",children:u.map(k=>e.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:`w-3 h-3 rounded-full ${k.level==="critical"?"bg-red-500":k.level==="warning"?"bg-yellow-500":"bg-blue-500"}`}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:k.message}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:[k.metric,"  ",new Date(k.timestamp).toLocaleString()]})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(X,{variant:k.resolved?"secondary":"destructive",children:k.resolved?"Resolved":"Active"}),e.jsx(X,{variant:"outline",children:k.level})]})]},k.id))})})]})}),e.jsx(ge,{value:"optimization",className:"space-y-6",children:e.jsxs(R,{children:[e.jsx(Y,{children:e.jsx(Q,{children:"Performance Optimization Tasks"})}),e.jsx(L,{children:e.jsx("div",{className:"space-y-4",children:p.map(k=>e.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-medium",children:k.name}),e.jsx("p",{className:"text-sm text-muted-foreground",children:k.description}),e.jsxs("p",{className:"text-sm text-green-600 mt-1",children:["Expected: ",k.estimatedImprovement]})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsxs(X,{variant:k.impact==="high"?"destructive":k.impact==="medium"?"default":"secondary",children:[k.impact," impact"]}),e.jsx(X,{variant:k.status==="completed"?"secondary":k.status==="in_progress"?"default":"outline",children:k.status.replace("_"," ")}),k.status==="pending"&&e.jsx(E,{size:"sm",onClick:()=>v(k.id),children:"Start"})]})]},k.id))})})]})})]})]})})}function AQ({open:t,onOpenChange:s}){const{toast:n}=nt(),[a,r]=N.useState(!1),[i,l]=N.useState("all"),[c,o]=N.useState(""),[d,h]=N.useState("all"),[u,m]=N.useState("all"),[p,g]=N.useState(null),[x,v]=N.useState(!1),[y,f]=N.useState([]),[b,j]=N.useState({totalUsed:0,totalAvailable:0,imageCount:0,videoCount:0,audioCount:0,documentCount:0});N.useEffect(()=>{t&&S()},[t]);const S=async()=>{try{r(!0);const B=await(await $n("/api/admin/media/files")).json();B.files&&f(B.files),B.stats&&j(B.stats)}catch(_){console.error("Failed to load media files:",_)}finally{r(!1)}},k=async(_,B)=>{try{await $n(`/api/admin/media/files/${_}/visibility`,{method:"PATCH",body:{visibility:B}}),f(O=>O.map(z=>z.id===_?{...z,visibility:B}:z)),n({title:"Visibility Updated",description:"File visibility settings have been changed."})}catch{n({title:"Update Failed",description:"Unable to update file visibility.",variant:"destructive"})}},T=async _=>{window.open(_.url,"_blank"),n({title:"File Opened",description:`Viewing ${_.name} in new tab.`})},A=async _=>{try{const B=document.createElement("a");B.href=_.url,B.download=_.name,document.body.appendChild(B),B.click(),document.body.removeChild(B),n({title:"Download Started",description:`Downloading ${_.name}.`})}catch{n({title:"Download Failed",description:"Unable to download file.",variant:"destructive"})}},C=async _=>{g(_),v(!0)},w=async _=>{try{await $n(`/api/admin/media/files/${_}`,{method:"DELETE"}),f(B=>B.filter(O=>O.id!==_)),n({title:"File Deleted",description:"File has been permanently deleted."})}catch{n({title:"Delete Failed",description:"Unable to delete file.",variant:"destructive"})}};N.useEffect(()=>{t&&S()},[t]);const P=y.filter(_=>{const B=_.name.toLowerCase().includes(c.toLowerCase())||_.tags.some(K=>K.toLowerCase().includes(c.toLowerCase())),O=i==="all"||_.type===i,z=d==="all"||_.category===d,F=u==="all"||_.visibility===u;return B&&O&&z&&F}),M=_=>{switch(_){case"image":return e.jsx(Vn,{className:"h-5 w-5"});case"video":return e.jsx(ca,{className:"h-5 w-5"});case"audio":return e.jsx(Ue,{className:"h-5 w-5"});case"document":return e.jsx(xt,{className:"h-5 w-5"});default:return e.jsx(xt,{className:"h-5 w-5"})}},I=_=>{switch(_){case"public":return e.jsx(is,{className:"h-4 w-4 text-green-500"});case"private":return e.jsx(Ul,{className:"h-4 w-4 text-red-500"});case"restricted":return e.jsx(Ze,{className:"h-4 w-4 text-yellow-500"});default:return e.jsx(is,{className:"h-4 w-4 text-gray-500"})}},W=_=>{if(_===0)return"0 Bytes";const B=1024,O=["Bytes","KB","MB","GB"],z=Math.floor(Math.log(_)/Math.log(B));return parseFloat((_/Math.pow(B,z)).toFixed(2))+" "+O[z]};return e.jsx(kt,{open:t,onOpenChange:s,children:e.jsxs(wt,{className:"max-w-7xl max-h-[95vh] overflow-y-auto",children:[e.jsxs(St,{children:[e.jsxs(Ct,{className:"flex items-center space-x-2",children:[e.jsx(mx,{className:"h-6 w-6"}),e.jsx("span",{children:"Media Management"})]}),e.jsx(us,{children:"Manage all platform media files, assignments, and access controls"})]}),e.jsxs(R,{className:"mb-6",children:[e.jsx(Y,{children:e.jsx(Q,{children:"Storage Overview"})}),e.jsx(L,{children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4",children:[e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"text-2xl font-bold",children:[b.totalUsed," GB"]}),e.jsxs("div",{className:"text-sm text-muted-foreground",children:["Used of ",b.totalAvailable," GB"]})]}),e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"text-lg font-semibold flex items-center justify-center",children:[e.jsx(Vn,{className:"h-4 w-4 mr-1"}),b.imageCount]}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Images"})]}),e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"text-lg font-semibold flex items-center justify-center",children:[e.jsx(ca,{className:"h-4 w-4 mr-1"}),b.videoCount]}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Videos"})]}),e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"text-lg font-semibold flex items-center justify-center",children:[e.jsx(Ue,{className:"h-4 w-4 mr-1"}),b.audioCount]}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Audio"})]}),e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"text-lg font-semibold flex items-center justify-center",children:[e.jsx(xt,{className:"h-4 w-4 mr-1"}),b.documentCount]}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Documents"})]})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6",children:[e.jsxs("div",{className:"relative",children:[e.jsx(Bs,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),e.jsx($,{placeholder:"Search files...",value:c,onChange:_=>o(_.target.value),className:"pl-9"})]}),e.jsxs(Re,{value:d,onValueChange:h,children:[e.jsx(Me,{children:e.jsx(Oe,{placeholder:"Category"})}),e.jsxs(_e,{children:[e.jsx(U,{value:"all",children:"All Categories"}),e.jsx(U,{value:"branding",children:"Branding"}),e.jsx(U,{value:"music",children:"Music"}),e.jsx(U,{value:"legal",children:"Legal"}),e.jsx(U,{value:"promotional",children:"Promotional"}),e.jsx(U,{value:"technical",children:"Technical"}),e.jsx(U,{value:"documentation",children:"Documentation"})]})]}),e.jsxs(Re,{value:u,onValueChange:m,children:[e.jsx(Me,{children:e.jsx(Oe,{placeholder:"Visibility"})}),e.jsxs(_e,{children:[e.jsx(U,{value:"all",children:"All Visibility"}),e.jsx(U,{value:"public",children:"Public"}),e.jsx(U,{value:"private",children:"Private"}),e.jsx(U,{value:"restricted",children:"Restricted"})]})]}),e.jsxs(E,{onClick:S,disabled:a,children:[e.jsx(Ns,{className:"h-4 w-4 mr-2"}),"Refresh"]})]}),e.jsxs(Ut,{value:i,onValueChange:l,className:"w-full",children:[e.jsxs(jt,{className:"grid w-full grid-cols-5",children:[e.jsx(Ne,{value:"all",children:"All Files"}),e.jsx(Ne,{value:"image",children:"Images"}),e.jsx(Ne,{value:"video",children:"Videos"}),e.jsx(Ne,{value:"audio",children:"Audio"}),e.jsx(Ne,{value:"document",children:"Documents"})]}),e.jsxs(ge,{value:i,className:"mt-6",children:[e.jsx("div",{className:"grid grid-cols-1 gap-4",children:P.map(_=>e.jsx(R,{children:e.jsxs(L,{className:"p-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[M(_.type),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-medium",children:_.name}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:[W(_.size),"  Uploaded ",new Date(_.uploadedAt).toLocaleDateString()," by ",_.uploadedBy]}),_.description&&e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:_.description})]})]}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[I(_.visibility),e.jsx("span",{className:"text-sm",children:_.visibility})]}),e.jsx(X,{variant:"outline",children:_.category}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx(E,{size:"sm",variant:"outline",onClick:()=>T(_),children:e.jsx(Ns,{className:"h-4 w-4"})}),e.jsx(E,{size:"sm",variant:"outline",onClick:()=>A(_),children:e.jsx(Cs,{className:"h-4 w-4"})}),e.jsx(E,{size:"sm",variant:"outline",onClick:()=>C(_),children:e.jsx($s,{className:"h-4 w-4"})}),e.jsx(E,{size:"sm",variant:"outline",onClick:()=>w(_.id),children:e.jsx(Vt,{className:"h-4 w-4"})})]})]})]}),e.jsxs("div",{className:"mt-3 pt-3 border-t",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("h4",{className:"text-sm font-medium",children:"Assignments:"}),e.jsxs(E,{size:"sm",variant:"outline",onClick:()=>C(_),children:[e.jsx(Ze,{className:"h-3 w-3 mr-1"}),"Manage"]})]}),_.assignments.length>0?e.jsx("div",{className:"flex flex-wrap gap-2",children:_.assignments.map(B=>e.jsx(X,{variant:"secondary",children:B},B))}):e.jsx("p",{className:"text-sm text-muted-foreground",children:"No assignments  Click Manage to assign this file to bookings, users, or platform features"})]}),_.tags.length>0&&e.jsx("div",{className:"mt-2",children:e.jsx("div",{className:"flex flex-wrap gap-1",children:_.tags.map(B=>e.jsxs(X,{variant:"outline",className:"text-xs",children:[e.jsx(up,{className:"h-3 w-3 mr-1"}),B]},B))})})]})},_.id))}),P.length===0&&e.jsxs("div",{className:"text-center py-8",children:[e.jsx(Lj,{className:"h-12 w-12 mx-auto text-muted-foreground mb-4"}),e.jsx("h3",{className:"text-lg font-medium",children:"No files found"}),e.jsx("p",{className:"text-muted-foreground",children:"Try adjusting your search or filter criteria."})]})]})]}),x&&p&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",onClick:()=>v(!1),children:e.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-md w-full mx-4",onClick:_=>_.stopPropagation(),children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Manage File Assignments"}),e.jsxs("p",{className:"text-sm text-muted-foreground mb-4",children:['Assign "',p.name,'" to bookings, users, or platform features']}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium",children:"Assignment Type"}),e.jsxs(Re,{defaultValue:"booking",children:[e.jsx(Me,{className:"mt-1",children:e.jsx(Oe,{})}),e.jsxs(_e,{children:[e.jsx(U,{value:"booking",children:"Booking"}),e.jsx(U,{value:"user",children:"User Profile"}),e.jsx(U,{value:"feature",children:"Platform Feature"}),e.jsx(U,{value:"branding",children:"Branding"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium",children:"Target"}),e.jsx($,{placeholder:"Enter booking ID, user email, or feature name",className:"mt-1"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium",children:"Visibility"}),e.jsxs(Re,{value:p.visibility,onValueChange:_=>k(p.id,_),children:[e.jsx(Me,{className:"mt-1",children:e.jsx(Oe,{})}),e.jsxs(_e,{children:[e.jsx(U,{value:"public",children:"Public"}),e.jsx(U,{value:"private",children:"Private"}),e.jsx(U,{value:"restricted",children:"Restricted"})]})]})]})]}),e.jsxs("div",{className:"flex justify-end space-x-2 mt-6",children:[e.jsx(E,{variant:"outline",onClick:()=>v(!1),children:"Cancel"}),e.jsx(E,{onClick:()=>{n({title:"Assignment Updated",description:"File assignment has been saved."}),v(!1)},children:"Save Assignment"})]})]})})]})})}const f1=()=>{const[t,s]=N.useState([]),[n,a]=N.useState("images"),[r,i]=N.useState(""),[l,c]=N.useState(""),[o,d]=N.useState(!1),[h,u]=N.useState(0),[m,p]=N.useState(!1),g=N.useRef(null),{toast:x}=nt(),v=Tt(),{data:y=[],isLoading:f}=ke({queryKey:["/api/media"],queryFn:()=>xe("/api/media")}),b=Xe({mutationFn:async w=>{p(!0),u(0);const P=setInterval(()=>{u(M=>Math.min(M+10,90))},200);try{const M=await fetch("/api/media/upload",{method:"POST",body:w,credentials:"include"});if(clearInterval(P),u(100),!M.ok)throw new Error("Upload failed");return M.json()}catch(M){throw clearInterval(P),M}},onSuccess:()=>{v.invalidateQueries({queryKey:["/api/media"]}),s([]),i(""),c(""),u(0),p(!1),x({title:"Upload Successful",description:"Media files have been uploaded successfully."})},onError:()=>{u(0),p(!1),x({title:"Upload Failed",description:"Failed to upload media files. Please try again.",variant:"destructive"})}}),j=Xe({mutationFn:w=>xe(`/api/media/${w}`,{method:"DELETE"}),onSuccess:()=>{v.invalidateQueries({queryKey:["/api/media"]}),x({title:"File Deleted",description:"Media file has been deleted successfully."})},onError:()=>{x({title:"Delete Failed",description:"Failed to delete media file.",variant:"destructive"})}}),S=w=>{const P=Array.from(w.target.files||[]);s(M=>[...M,...P])},k=w=>{s(P=>P.filter((M,I)=>I!==w))},T=()=>{if(t.length===0){x({title:"No Files Selected",description:"Please select files to upload.",variant:"destructive"});return}const w=new FormData;t.forEach(P=>{w.append("files",P)}),w.append("category",n),w.append("tags",JSON.stringify(r.split(",").map(P=>P.trim()).filter(Boolean))),w.append("description",l),w.append("isPublic",o.toString()),b.mutate(w)},A=w=>{switch(w){case"image":return e.jsx(Vn,{className:"h-4 w-4"});case"video":return e.jsx(ca,{className:"h-4 w-4"});case"audio":return e.jsx(Ue,{className:"h-4 w-4"});default:return e.jsx(xt,{className:"h-4 w-4"})}},C=w=>{if(w===0)return"0 Bytes";const P=1024,M=["Bytes","KB","MB","GB"],I=Math.floor(Math.log(w)/Math.log(P));return parseFloat((w/Math.pow(P,I)).toFixed(2))+" "+M[I]};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs(R,{children:[e.jsx(Y,{children:e.jsxs(Q,{className:"flex items-center gap-2",children:[e.jsx(Xs,{className:"h-5 w-5"}),"Media Upload"]})}),e.jsxs(L,{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-6 text-center",children:[e.jsx(Xs,{className:"mx-auto h-8 w-8 text-gray-400 mb-2"}),e.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Drag and drop files here, or click to select files"}),e.jsx(E,{onClick:()=>{var w;return(w=g.current)==null?void 0:w.click()},disabled:m,children:"Select Files"}),e.jsx("input",{ref:g,type:"file",multiple:!0,accept:"image/*,video/*,audio/*,.pdf,.doc,.docx",onChange:S,className:"hidden"})]}),t.length>0&&e.jsxs("div",{className:"space-y-2",children:[e.jsxs("h4",{className:"font-medium",children:["Selected Files (",t.length,")"]}),e.jsx("div",{className:"space-y-2 max-h-32 overflow-y-auto",children:t.map((w,P)=>e.jsxs("div",{className:"flex items-center justify-between p-2 bg-gray-50 rounded",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[A(w.type.split("/")[0]),e.jsx("span",{className:"text-sm",children:w.name}),e.jsxs("span",{className:"text-xs text-gray-500",children:["(",C(w.size),")"]})]}),e.jsx(E,{size:"sm",variant:"outline",onClick:()=>k(P),disabled:m,children:e.jsx(Vt,{className:"h-3 w-3"})})]},P))})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"Category"}),e.jsxs(Re,{value:n,onValueChange:a,children:[e.jsx(Me,{children:e.jsx(Oe,{})}),e.jsxs(_e,{children:[e.jsx(U,{value:"images",children:"Images"}),e.jsx(U,{value:"videos",children:"Videos"}),e.jsx(U,{value:"documents",children:"Documents"}),e.jsx(U,{value:"audio",children:"Audio"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"Tags (comma separated)"}),e.jsx($,{value:r,onChange:w=>i(w.target.value),placeholder:"e.g., press, promotional, cover art",disabled:m})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"Description"}),e.jsx(mt,{value:l,onChange:w=>c(w.target.value),placeholder:"Optional description for the media files",disabled:m})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",id:"isPublic",checked:o,onChange:w=>d(w.target.checked),disabled:m}),e.jsx("label",{htmlFor:"isPublic",className:"text-sm",children:"Make files publicly accessible"})]}),m&&e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm",children:"Uploading..."}),e.jsxs("span",{className:"text-sm",children:[h,"%"]})]}),e.jsx(qs,{value:h})]}),e.jsx(E,{onClick:T,disabled:t.length===0||m,className:"w-full",children:m?e.jsxs(e.Fragment,{children:[e.jsx(Qt,{className:"h-4 w-4 mr-2 animate-spin"}),"Uploading..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Xs,{className:"h-4 w-4 mr-2"}),"Upload Files (",t.length,")"]})})]})]}),e.jsxs(R,{children:[e.jsx(Y,{children:e.jsxs(Q,{className:"flex items-center gap-2",children:[e.jsx(mx,{className:"h-5 w-5"}),"Media Library"]})}),e.jsx(L,{children:f?e.jsxs("div",{className:"text-center py-8",children:[e.jsx(Qt,{className:"mx-auto h-8 w-8 animate-spin text-gray-400 mb-2"}),e.jsx("p",{className:"text-gray-600",children:"Loading media files..."})]}):y.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx(mx,{className:"mx-auto h-8 w-8 text-gray-400 mb-2"}),e.jsx("p",{className:"text-gray-600",children:"No media files uploaded yet"})]}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:y.map(w=>e.jsxs("div",{className:"border rounded-lg p-4 space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[A(w.file_type),e.jsx("span",{className:"font-medium text-sm truncate",children:w.original_name})]}),e.jsx(E,{size:"sm",variant:"outline",onClick:()=>j.mutate(w.id),disabled:j.isPending,children:e.jsx(Vt,{className:"h-3 w-3"})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between text-xs text-gray-500",children:[e.jsxs("span",{children:["Size: ",C(w.file_size)]}),e.jsx(X,{variant:w.is_public?"default":"secondary",children:w.is_public?"Public":"Private"})]}),e.jsxs("div",{className:"flex items-center gap-1 text-xs text-gray-500",children:[e.jsx(dt,{className:"h-3 w-3"}),new Date(w.created_at).toLocaleDateString()]}),w.tags&&w.tags.length>0&&e.jsx("div",{className:"flex flex-wrap gap-1",children:w.tags.map((P,M)=>e.jsxs(X,{variant:"outline",className:"text-xs",children:[e.jsx(up,{className:"h-2 w-2 mr-1"}),P]},M))}),w.description&&e.jsx("p",{className:"text-xs text-gray-600 line-clamp-2",children:w.description})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(E,{size:"sm",variant:"outline",className:"flex-1",children:[e.jsx(Ns,{className:"h-3 w-3 mr-1"}),"View"]}),e.jsxs(E,{size:"sm",variant:"outline",className:"flex-1",children:[e.jsx(Cs,{className:"h-3 w-3 mr-1"}),"Download"]})]})]},w.id))})})]})]})};function PQ({isOpen:t,onClose:s,category:n,onSave:a}){const[r,i]=N.useState({name:(n==null?void 0:n.name)||"",displayName:(n==null?void 0:n.displayName)||"",description:(n==null?void 0:n.description)||"",priority:(n==null?void 0:n.priority)||5,isActive:(n==null?void 0:n.isActive)??!0}),l=()=>{r.name&&r.displayName&&(a(r),i({name:"",displayName:"",description:"",priority:5,isActive:!0}),s())};return t?e.jsx(kt,{open:t,onOpenChange:s,children:e.jsxs(wt,{className:"max-w-md",children:[e.jsxs(St,{children:[e.jsx(Ct,{children:n?"Edit Category":"Add New Category"}),e.jsx(us,{children:"Create or modify recipient categories for newsletter and press release distribution."})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(q,{htmlFor:"name",children:"Category Name (Internal)"}),e.jsx($,{id:"name",value:r.name,onChange:c=>i({...r,name:c.target.value}),placeholder:"e.g., radio_stations"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Use lowercase with underscores (no spaces)"})]}),e.jsxs("div",{children:[e.jsx(q,{htmlFor:"displayName",children:"Display Name"}),e.jsx($,{id:"displayName",value:r.displayName,onChange:c=>i({...r,displayName:c.target.value}),placeholder:"e.g., Radio Stations"})]}),e.jsxs("div",{children:[e.jsx(q,{htmlFor:"description",children:"Description (Optional)"}),e.jsx(mt,{id:"description",value:r.description,onChange:c=>i({...r,description:c.target.value}),placeholder:"Brief description of this category",rows:2})]}),e.jsxs("div",{children:[e.jsx(q,{htmlFor:"priority",children:"Priority (1-10)"}),e.jsx($,{id:"priority",type:"number",min:"1",max:"10",value:r.priority,onChange:c=>i({...r,priority:parseInt(c.target.value)||5})}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Lower numbers = higher priority (fans always get priority 1)"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(gt,{id:"isActive",checked:r.isActive,onCheckedChange:c=>i({...r,isActive:c})}),e.jsx(q,{htmlFor:"isActive",children:"Active Category"})]}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(E,{variant:"outline",onClick:s,children:"Cancel"}),e.jsxs(E,{onClick:l,disabled:!r.name||!r.displayName,children:[n?"Update":"Create"," Category"]})]})]})]})}):null}function TQ(){const[t,s]=N.useState(!1),[n,a]=N.useState(),{toast:r}=nt(),i=Tt(),{data:l=[],isLoading:c}=ke({queryKey:["/api/recipient-categories"],queryFn:()=>xe("/api/recipient-categories").then(g=>g.json()).then(g=>g.success?g.data:[])}),o=Xe({mutationFn:async g=>(await xe("/api/recipient-categories",{method:"POST",body:JSON.stringify(g)})).json(),onSuccess:()=>{i.invalidateQueries({queryKey:["/api/recipient-categories"]}),r({title:"Category Created",description:"New recipient category has been added successfully"})}}),d=Xe({mutationFn:async({id:g,updates:x})=>(await xe(`/api/recipient-categories/${g}`,{method:"PUT",body:JSON.stringify(x)})).json(),onSuccess:()=>{i.invalidateQueries({queryKey:["/api/recipient-categories"]}),r({title:"Category Updated",description:"Recipient category has been updated successfully"})}}),h=Xe({mutationFn:async g=>(await xe(`/api/recipient-categories/${g}`,{method:"DELETE"})).json(),onSuccess:()=>{i.invalidateQueries({queryKey:["/api/recipient-categories"]}),r({title:"Category Deleted",description:"Recipient category has been removed successfully"})}}),u=g=>{n?d.mutate({id:n.id,updates:g}):o.mutate(g),a(void 0)},m=g=>{a(g),s(!0)},p=g=>{confirm("Are you sure you want to delete this category? This action cannot be undone.")&&h.mutate(g)};return e.jsxs(R,{children:[e.jsx(Y,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs(Q,{className:"flex items-center gap-2",children:[e.jsx(Gt,{className:"h-5 w-5"}),"Recipient Categories"]}),e.jsx(rt,{children:"Manage recipient categories for newsletter and press release distribution"})]}),e.jsxs(E,{onClick:()=>{a(void 0),s(!0)},children:[e.jsx(st,{className:"h-4 w-4 mr-2"}),"Add Category"]})]})}),e.jsx(L,{children:c?e.jsx("div",{className:"text-center py-8",children:"Loading categories..."}):l.length===0?e.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[e.jsx(Gt,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),e.jsx("p",{children:"No recipient categories found"}),e.jsx("p",{className:"text-sm",children:"Create your first category to organize your recipient database"})]}):e.jsx("div",{className:"space-y-3",children:l.map(g=>e.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("h4",{className:"font-medium",children:g.displayName}),e.jsx(X,{variant:g.isActive?"default":"secondary",children:g.isActive?"Active":"Inactive"}),e.jsxs(X,{variant:"outline",children:["Priority: ",g.priority]})]}),e.jsxs("p",{className:"text-sm text-gray-600",children:["Internal name: ",g.name]}),g.description&&e.jsx("p",{className:"text-sm text-gray-500 mt-1",children:g.description})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(E,{variant:"outline",size:"sm",onClick:()=>m(g),children:e.jsx($s,{className:"h-4 w-4"})}),e.jsx(E,{variant:"outline",size:"sm",onClick:()=>p(g.id),children:e.jsx(Vt,{className:"h-4 w-4"})})]})]},g.id))})}),e.jsx(PQ,{isOpen:t,onClose:()=>{s(!1),a(void 0)},category:n,onSave:u})]})}const g1={fan:1,professional:2,musician:3,artist:4,managed_musician:5,managed_artist:6,assigned_admin:7,admin:8,superadmin:9},nl={read:!0,write:!1,admin:!1},zs={read:!0,write:!0,admin:!1},Zr={read:!0,write:!0,admin:!0},i5={superadmin:[{id:"platform-config",name:"Platform Configuration",icon:"Settings",description:"Control all platform settings, UI, and system behavior",permission:Zr,subsections:[{id:"ui-config",name:"UI/UX Configuration",icon:"Eye",description:"Toast duration, colors, spacing, animations",permission:Zr},{id:"technical-rider-config",name:"Technical Rider Configuration",icon:"Monitor",description:"Membership types, limits, auto-save settings",permission:Zr},{id:"api-config",name:"API Configuration",icon:"Globe",description:"Timeouts, cache settings, retry attempts",permission:Zr},{id:"security-config",name:"Security Configuration",icon:"Shield",description:"Session timeout, 2FA, login attempts",permission:Zr}]},{id:"user-management",name:"User Management",icon:"Users",description:"Manage all user accounts, roles, and permissions",permission:Zr,subsections:[{id:"role-assignment",name:"Role Assignment",icon:"UserCheck",description:"Assign and modify user roles",permission:Zr},{id:"access-control",name:"Access Control",icon:"Lock",description:"Configure role-based permissions",permission:Zr}]},{id:"system-administration",name:"System Administration",icon:"Server",description:"Database, backups, system health monitoring",permission:Zr},{id:"analytics-overview",name:"Analytics Overview",icon:"BarChart3",description:"Platform-wide analytics and performance metrics",permission:Zr}],admin:[{id:"user-management",name:"User Management",icon:"Users",description:"Manage user accounts and basic permissions",permission:zs,subsections:[{id:"user-approval",name:"User Approval",icon:"UserCheck",description:"Approve new user registrations",permission:zs}]},{id:"content-moderation",name:"Content Moderation",icon:"Shield",description:"Review and moderate platform content",permission:zs},{id:"booking-oversight",name:"Booking Oversight",icon:"Calendar",description:"Monitor and manage platform bookings",permission:zs},{id:"analytics-limited",name:"Analytics",icon:"BarChart3",description:"View platform analytics and reports",permission:nl}],assigned_admin:[{id:"assigned-talent-management",name:"Assigned Talent Management",icon:"Users",description:"Manage assigned artists and musicians",permission:zs},{id:"booking-management",name:"Booking Management",icon:"Calendar",description:"Handle bookings for assigned talent",permission:zs},{id:"content-management",name:"Content Management",icon:"FileText",description:"Manage content for assigned talent",permission:zs}],managed_artist:[{id:"profile-management",name:"Profile Management",icon:"User",description:"Manage your artist profile and information",permission:zs,subsections:[{id:"locked-fields",name:"Managed Fields",icon:"Lock",description:"View locked fields (managed by admin)",permission:nl}]},{id:"advanced-booking",name:"Advanced Booking",icon:"Calendar",description:"Enhanced booking features and management",permission:zs},{id:"technical-rider",name:"Technical Rider",icon:"Monitor",description:"Create and manage technical riders",permission:zs},{id:"analytics-personal",name:"Performance Analytics",icon:"TrendingUp",description:"Advanced analytics for your performances",permission:nl},{id:"revenue-tracking",name:"Revenue Tracking",icon:"DollarSign",description:"Track earnings and financial performance",permission:nl}],artist:[{id:"profile-management",name:"Profile Management",icon:"User",description:"Manage your artist profile",permission:zs},{id:"basic-booking",name:"Booking Management",icon:"Calendar",description:"Manage your bookings",permission:zs},{id:"music-catalog",name:"Music Catalog",icon:"Music",description:"Upload and manage your music",permission:zs},{id:"basic-analytics",name:"Basic Analytics",icon:"BarChart3",description:"View basic performance metrics",permission:nl}],managed_musician:[{id:"profile-management",name:"Profile Management",icon:"User",description:"Manage your musician profile",permission:zs,subsections:[{id:"locked-fields",name:"Managed Fields",icon:"Lock",description:"View locked fields (managed by admin)",permission:nl}]},{id:"advanced-booking",name:"Advanced Booking",icon:"Calendar",description:"Enhanced booking and assignment features",permission:zs},{id:"session-management",name:"Session Management",icon:"Clock",description:"Manage recording and performance sessions",permission:zs},{id:"collaboration-tools",name:"Collaboration Tools",icon:"Users",description:"Connect with other musicians and artists",permission:zs}],musician:[{id:"profile-management",name:"Profile Management",icon:"User",description:"Manage your musician profile",permission:zs},{id:"basic-booking",name:"Booking Management",icon:"Calendar",description:"View and manage bookings",permission:zs},{id:"skill-showcase",name:"Skill Showcase",icon:"Award",description:"Showcase your musical skills and instruments",permission:zs}],professional:[{id:"profile-management",name:"Profile Management",icon:"User",description:"Manage your professional profile",permission:zs},{id:"service-management",name:"Service Management",icon:"Briefcase",description:"Manage your professional services",permission:zs},{id:"client-management",name:"Client Management",icon:"Users",description:"Manage your clients and projects",permission:zs},{id:"booking-calendar",name:"Booking Calendar",icon:"Calendar",description:"Manage your service bookings",permission:zs}],fan:[{id:"profile-basic",name:"Profile",icon:"User",description:"Manage your basic profile",permission:zs},{id:"music-discovery",name:"Music Discovery",icon:"Search",description:"Discover and explore music",permission:nl},{id:"favorites",name:"Favorites",icon:"Heart",description:"Manage your favorite artists and songs",permission:zs},{id:"purchase-history",name:"Purchase History",icon:"ShoppingBag",description:"View your purchase history",permission:nl}]},ph=(t,s,n)=>{const a=i5[t],r=(l,c)=>{for(const o of l){if(o.id===c)return o;if(o.subsections){const d=r(o.subsections,c);if(d)return d}}return null},i=r(a,s);return i?i.permission[n]:!1},j1=t=>i5[t]||[],EQ=t=>g1[t]>=g1.superadmin,MQ=t=>{switch(t){case"superadmin":return["ui","technicalRider","api","forms","animations","booking","notifications","security"];case"admin":return["notifications","booking"];case"assigned_admin":return["booking"];case"managed_artist":case"managed_musician":return["notifications"];default:return[]}},_Q=({onSave:t,isLoading:s})=>{const{toast:n}=nt(),[a,r]=N.useState({colors:{primary:"#3b82f6",secondary:"#64748b",accent:"#f59e0b",background:"#ffffff",card:"#f8fafc"},typography:{headingFont:"Inter",bodyFont:"Inter",baseFontSize:16,lineHeight:1.5,letterSpacing:0},layout:{maxWidth:1200,sectionPadding:24,borderRadius:8,stickyHeader:!1},theme:{darkMode:!1,autoTheme:!1},animations:{enabled:!0},toast:{duration:5e3},branding:{platformName:"Wai'tuMusic",tagline:"Music Industry Management Platform",logoUrl:"",faviconUrl:"",copyright:" 2025 Wai'tuMusic. All rights reserved.",showPoweredBy:!1},content:{navigation:{home:"Home",artists:"Artists",music:"Music",booking:"Booking",about:"About",contact:"Contact",login:"Login",signup:"Sign Up",dashboard:"Dashboard",profile:"Profile"},homepage:{heroTitle:"Welcome to the Music Industry Management Platform",heroSubtitle:"Connect artists, professionals, and fans through our comprehensive ecosystem",heroButtonPrimary:"Get Started",heroButtonSecondary:"Learn More",featuresTitle:"Platform Features",aboutTitle:"About Wai'tuMusic",aboutText:"We empower artists and music professionals with cutting-edge tools for career growth and industry networking."},booking:{title:"Book Your Next Performance",subtitle:"Connect with top talent for your events",searchPlaceholder:"Search artists, genres, or locations...",bookNowButton:"Book Now",viewProfileButton:"View Profile",priceLabel:"Starting at",availabilityLabel:"Available",genreLabel:"Genre",locationLabel:"Location"},dashboard:{welcomeMessage:"Welcome back",overviewTitle:"Dashboard Overview",recentActivity:"Recent Activity",upcomingEvents:"Upcoming Events",analytics:"Analytics",quickActions:"Quick Actions",notifications:"Notifications",settings:"Settings"},profile:{editProfile:"Edit Profile",personalInfo:"Personal Information",professionalInfo:"Professional Information",mediaLibrary:"Media Library",bookingSettings:"Booking Settings",privacySettings:"Privacy Settings",saveChanges:"Save Changes",cancelChanges:"Cancel"},forms:{emailLabel:"Email Address",passwordLabel:"Password",confirmPasswordLabel:"Confirm Password",fullNameLabel:"Full Name",phoneLabel:"Phone Number",submitButton:"Submit",cancelButton:"Cancel",saveButton:"Save",deleteButton:"Delete",editButton:"Edit",addButton:"Add",removeButton:"Remove",uploadButton:"Upload",downloadButton:"Download"},messages:{successTitle:"Success",errorTitle:"Error",warningTitle:"Warning",infoTitle:"Information",confirmationTitle:"Confirmation",loadingMessage:"Loading...",noDataMessage:"No data available",unauthorizedMessage:"Access denied",networkErrorMessage:"Network connection error",genericErrorMessage:"Something went wrong"},footer:{copyright:" 2025 Wai'tuMusic. All rights reserved.",privacyPolicy:"Privacy Policy",termsOfService:"Terms of Service",contactUs:"Contact Us",socialMediaTitle:"Follow Us",newsletterTitle:"Newsletter",newsletterSubtitle:"Stay updated with the latest news"},modals:{emailConfig:{title:"Email Configuration",smtpServer:"SMTP Server",smtpPort:"SMTP Port",securityType:"Security Type",username:"Username",password:"Password",platformName:"Platform Name",fromEmail:"From Email",testEmail:"Test Email",saveConfig:"Save Configuration"},musicUpload:{title:"Upload Music",trackTitle:"Track Title",trackTitlePlaceholder:"Enter track title",genre:"Genre",genreSelectPlaceholder:"Select genre",isrcCode:"ISRC Code",isrcPlaceholder:"e.g., USRC17607839",duration:"Duration",durationPlaceholder:"e.g., 3:45",description:"Description",descriptionPlaceholder:"Describe your track...",lyrics:"Lyrics",lyricsPlaceholder:"Enter song lyrics...",price:"Price",pricePlaceholder:"0.99",uploadFile:"Upload File",saveTrack:"Save Track"},calendarModal:{title:"Calendar Event",eventTitle:"Event Title",eventTitlePlaceholder:"Enter event title",startDate:"Start Date",endDate:"End Date",startTime:"Start Time",endTime:"End Time",location:"Location",description:"Description",allDay:"All Day Event",recurring:"Recurring Event",reminder:"Set Reminder",saveEvent:"Save Event",deleteEvent:"Delete Event"},userEdit:{title:"Edit User",personalInfo:"Personal Information",setPrimary:"Set as primary",removePackage:"Remove package",consultationRates:"Consultation Rates",bookingRates:"Booking Rates"},setlistManager:{title:"Setlist Manager",addSong:"Add Song",generateChords:"Generate chord charts for this song",addYouTubeLink:"Add YouTube link for chord generation",uploadAudio:"Upload audio file for chord generation",energyLevel:"Energy Level",chordProgression:"Chord Progression"}},collaboration:{title:"Collaboration Rooms",createRoom:"Create Room",roomName:"Room Name",roomNamePlaceholder:"Enter room name",roomDescription:"Room Description",roomDescriptionPlaceholder:"Describe the purpose of this room",joinRoom:"Join Room",leaveRoom:"Leave Room",typeMessage:"Type your message...",sendMessage:"Send Message"},managementApplication:{title:"Management Application Walkthrough",steps:{submission:"Application Submission",adminReview:"Admin Review",professionalAssignment:"Professional Assignment",contractGeneration:"Contract Generation",multiPartySigning:"Multi-Party Signing",roleTransition:"Role Transition"},status:{pending:"Pending",completed:"Completed",inProgress:"In Progress"},businessDescription:"Business Description",managementTier:"Management Tier",benefits:"Benefits",submitApplication:"Submit Application",approveApplication:"Approve Application",rejectApplication:"Reject Application"},technicalRider:{title:"Technical Rider",bandMakeup:"Band Makeup & Instrumentation",mixerInputs:"Mixer Input Patch List",lightingRequirements:"Lighting Requirements",hospitalityRequirements:"Hospitality & Dressing Rooms",equipmentSpecs:"Equipment Specifications",soundRequirements:"Sound Reinforcement",stageSetup:"Stage Setup",assignedTo:"Assigned to",channelAssignment:"Channel Assignment",phantomPower:"Phantom Power Required"},artists:{profileSection:"Artist Profile",musicSection:"Music & Albums",bookingSection:"Booking Information",contactSection:"Contact Details",socialMedia:"Social Media",genres:"Musical Genres",instruments:"Instruments & Skills",performanceHistory:"Performance History",availability:"Availability",rates:"Performance Rates"},search:{searchPlaceholder:"Search...",filterResults:"Filter Results",sortBy:"Sort By",noResults:"No results found",showMore:"Show More",showLess:"Show Less",clearFilters:"Clear Filters",applyFilters:"Apply Filters",searchResults:"Search Results",resultsPerPage:"Results per page"},fileUpload:{dragAndDrop:"Drag and drop files here",browseFiles:"Browse Files",selectFiles:"Select Files",uploadProgress:"Upload Progress",cancelUpload:"Cancel Upload",removeFile:"Remove File",fileSize:"File Size",allowedFormats:"Allowed Formats",maxFileSize:"Maximum File Size"},notifications:{newMessage:"New Message",newBooking:"New Booking",bookingConfirmed:"Booking Confirmed",paymentReceived:"Payment Received",profileUpdated:"Profile Updated",systemMaintenance:"System Maintenance",markAsRead:"Mark as Read",markAllAsRead:"Mark All as Read",clearNotifications:"Clear Notifications"},calendar:{today:"Today",previousMonth:"Previous Month",nextMonth:"Next Month",selectDate:"Select Date",selectTime:"Select Time",availability:"Availability",booked:"Booked",available:"Available",unavailable:"Unavailable",timeSlot:"Time Slot",duration:"Duration"},pagination:{previous:"Previous",next:"Next",first:"First",last:"Last",page:"Page",of:"of",goToPage:"Go to page",itemsPerPage:"Items per page",showing:"Showing",to:"to",entries:"entries"},errorMessages:{required:"This field is required",invalidEmail:"Please enter a valid email address",passwordTooShort:"Password must be at least 8 characters",passwordsNoMatch:"Passwords do not match",fileTooBig:"File size is too large",invalidFileType:"Invalid file type",networkError:"Network connection failed",serverError:"Server error occurred",notFound:"Item not found",unauthorized:"Access denied",sessionExpired:"Session has expired",uploadFailed:"Upload failed"},successMessages:{saved:"Successfully saved",uploaded:"File uploaded successfully",created:"Successfully created",updated:"Successfully updated",deleted:"Successfully deleted",sent:"Message sent successfully",loggedIn:"Login successful",loggedOut:"Logged out successfully",passwordChanged:"Password changed successfully",emailVerified:"Email verified successfully"},loadingMessages:{loading:"Loading...",saving:"Saving...",uploading:"Uploading...",processing:"Processing...",connecting:"Connecting...",authenticating:"Authenticating...",verifying:"Verifying...",sending:"Sending...",updating:"Updating...",deleting:"Deleting..."},tooltips:{edit:"Edit this item",delete:"Delete this item",view:"View details",download:"Download file",share:"Share this item",copy:"Copy to clipboard",refresh:"Refresh data",settings:"Open settings",help:"Get help",close:"Close this dialog",minimize:"Minimize window",maximize:"Maximize window"},accessibility:{closeDialog:"Close dialog",openMenu:"Open menu",toggleSidebar:"Toggle sidebar",skipToContent:"Skip to main content",breadcrumbNavigation:"Breadcrumb navigation",pagination:"Pagination navigation",sortColumn:"Sort by this column",expandSection:"Expand this section",collapseSection:"Collapse this section"}}}),i=(o,d,h)=>{r(u=>({...u,[o]:{...u[o],[d]:h}}))},l=(o,d,h)=>{r(u=>({...u,[o]:{...u[o],[d]:h}}))},c=()=>{n({title:"Success",description:"Configuration saved successfully!"}),t()};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-semibold",children:"Platform Configuration - UI Controls"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"WYSIWYG customization system for fonts, colors, layouts, branding, and ALL platform text content"})]}),e.jsxs(E,{onClick:c,disabled:s,className:"flex items-center gap-2",children:[e.jsx(js,{className:"h-4 w-4"}),s?"Saving...":"Apply Changes"]})]}),e.jsxs(Ut,{defaultValue:"colors",className:"space-y-6",children:[e.jsxs(jt,{className:"grid grid-cols-5 w-full",children:[e.jsxs(Ne,{value:"colors",className:"flex items-center gap-2",children:[e.jsx(id,{className:"h-4 w-4"}),"Colors & Theme"]}),e.jsxs(Ne,{value:"typography",className:"flex items-center gap-2",children:[e.jsx(_i,{className:"h-4 w-4"}),"Typography"]}),e.jsxs(Ne,{value:"layout",className:"flex items-center gap-2",children:[e.jsx(To,{className:"h-4 w-4"}),"Layout & Spacing"]}),e.jsxs(Ne,{value:"content",className:"flex items-center gap-2",children:[e.jsx(xt,{className:"h-4 w-4"}),"Content Management"]}),e.jsxs(Ne,{value:"branding",className:"flex items-center gap-2",children:[e.jsx(Db,{className:"h-4 w-4"}),"Branding"]})]}),e.jsx(ge,{value:"colors",className:"space-y-6",children:e.jsxs(R,{children:[e.jsx(Y,{children:e.jsxs(Q,{className:"flex items-center gap-2",children:[e.jsx(id,{className:"h-5 w-5"}),"Color Scheme & Theme Settings"]})}),e.jsx(L,{className:"space-y-6",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx(q,{className:"text-base font-medium",children:"Primary Colors"}),e.jsx("div",{className:"space-y-3",children:Object.entries(a.colors).map(([o,d])=>e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs(q,{className:"capitalize",children:[o.replace(/([A-Z])/g," $1")," Color"]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx($,{type:"color",value:d,onChange:h=>i("colors",o,h.target.value),className:"w-12 h-8 p-1 border rounded"}),e.jsx($,{value:d,onChange:h=>i("colors",o,h.target.value),className:"w-20 text-xs",placeholder:d})]})]},o))})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx(q,{className:"text-base font-medium",children:"Theme Mode"}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(gt,{checked:a.theme.darkMode,onCheckedChange:o=>i("theme","darkMode",o)}),e.jsx(q,{children:"Enable Dark Mode"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(gt,{checked:a.theme.autoTheme,onCheckedChange:o=>i("theme","autoTheme",o)}),e.jsx(q,{children:"Auto Theme (System Preference)"})]})]})]})]})})]})}),e.jsx(ge,{value:"typography",className:"space-y-6",children:e.jsxs(R,{children:[e.jsx(Y,{children:e.jsxs(Q,{className:"flex items-center gap-2",children:[e.jsx(_i,{className:"h-5 w-5"}),"Typography & Font Settings"]})}),e.jsx(L,{className:"space-y-6",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx(q,{className:"text-base font-medium",children:"Font Families"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx(q,{children:"Heading Font"}),e.jsxs(Re,{value:a.typography.headingFont,onValueChange:o=>i("typography","headingFont",o),children:[e.jsx(Me,{children:e.jsx(Oe,{})}),e.jsxs(_e,{children:[e.jsx(U,{value:"Inter",children:"Inter"}),e.jsx(U,{value:"Roboto",children:"Roboto"}),e.jsx(U,{value:"Poppins",children:"Poppins"}),e.jsx(U,{value:"Montserrat",children:"Montserrat"})]})]})]}),e.jsxs("div",{children:[e.jsx(q,{children:"Body Font"}),e.jsxs(Re,{value:a.typography.bodyFont,onValueChange:o=>i("typography","bodyFont",o),children:[e.jsx(Me,{children:e.jsx(Oe,{})}),e.jsxs(_e,{children:[e.jsx(U,{value:"Inter",children:"Inter"}),e.jsx(U,{value:"Roboto",children:"Roboto"}),e.jsx(U,{value:"Open Sans",children:"Open Sans"}),e.jsx(U,{value:"Lato",children:"Lato"})]})]})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx(q,{className:"text-base font-medium",children:"Font Sizes"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsxs(q,{children:["Base Font Size: ",a.typography.baseFontSize,"px"]}),e.jsx(Di,{value:[a.typography.baseFontSize],onValueChange:([o])=>i("typography","baseFontSize",o),max:24,min:12,step:1,className:"mt-2"})]}),e.jsxs("div",{children:[e.jsxs(q,{children:["Line Height: ",a.typography.lineHeight]}),e.jsx(Di,{value:[a.typography.lineHeight],onValueChange:([o])=>i("typography","lineHeight",o),max:2.5,min:1,step:.1,className:"mt-2"})]})]})]})]})})]})}),e.jsx(ge,{value:"layout",className:"space-y-6",children:e.jsxs(R,{children:[e.jsx(Y,{children:e.jsxs(Q,{className:"flex items-center gap-2",children:[e.jsx(To,{className:"h-5 w-5"}),"Layout & Spacing Controls"]})}),e.jsx(L,{className:"space-y-6",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsxs(q,{children:["Max Content Width: ",a.layout.maxWidth,"px"]}),e.jsx(Di,{value:[a.layout.maxWidth],onValueChange:([o])=>i("layout","maxWidth",o),max:1600,min:800,step:50,className:"mt-2"})]}),e.jsxs("div",{children:[e.jsxs(q,{children:["Toast Duration: ",a.toast.duration,"ms"]}),e.jsx(Di,{value:[a.toast.duration],onValueChange:([o])=>i("toast","duration",o),max:1e4,min:1e3,step:500,className:"mt-2"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(gt,{checked:a.animations.enabled,onCheckedChange:o=>i("animations","enabled",o)}),e.jsx(q,{children:"Enable Animations"})]})]})})]})}),e.jsx(ge,{value:"content",className:"space-y-6",children:e.jsxs(R,{children:[e.jsxs(Y,{children:[e.jsxs(Q,{className:"flex items-center gap-2",children:[e.jsx(xt,{className:"h-5 w-5"}),"Platform Content Management"]}),e.jsx("p",{className:"text-sm text-muted-foreground mt-2",children:"Edit ALL text content across the platform including navigation, pages, forms, and messages"})]}),e.jsxs(L,{className:"space-y-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("h4",{className:"font-medium text-lg flex items-center gap-2",children:[e.jsx(u4,{className:"h-4 w-4"}),"Navigation Menu Text"]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx(q,{children:"Home"}),e.jsx($,{value:a.content.navigation.home,onChange:o=>l("content","navigation",{...a.content.navigation,home:o.target.value})})]}),e.jsxs("div",{children:[e.jsx(q,{children:"Artists"}),e.jsx($,{value:a.content.navigation.artists,onChange:o=>l("content","navigation",{...a.content.navigation,artists:o.target.value})})]}),e.jsxs("div",{children:[e.jsx(q,{children:"Music"}),e.jsx($,{value:a.content.navigation.music,onChange:o=>l("content","navigation",{...a.content.navigation,music:o.target.value})})]}),e.jsxs("div",{children:[e.jsx(q,{children:"Booking"}),e.jsx($,{value:a.content.navigation.booking,onChange:o=>l("content","navigation",{...a.content.navigation,booking:o.target.value})})]}),e.jsxs("div",{children:[e.jsx(q,{children:"About"}),e.jsx($,{value:a.content.navigation.about,onChange:o=>l("content","navigation",{...a.content.navigation,about:o.target.value})})]}),e.jsxs("div",{children:[e.jsx(q,{children:"Contact"}),e.jsx($,{value:a.content.navigation.contact,onChange:o=>l("content","navigation",{...a.content.navigation,contact:o.target.value})})]}),e.jsxs("div",{children:[e.jsx(q,{children:"Login"}),e.jsx($,{value:a.content.navigation.login,onChange:o=>l("content","navigation",{...a.content.navigation,login:o.target.value})})]}),e.jsxs("div",{children:[e.jsx(q,{children:"Sign Up"}),e.jsx($,{value:a.content.navigation.signup,onChange:o=>l("content","navigation",{...a.content.navigation,signup:o.target.value})})]}),e.jsxs("div",{children:[e.jsx(q,{children:"Dashboard"}),e.jsx($,{value:a.content.navigation.dashboard,onChange:o=>l("content","navigation",{...a.content.navigation,dashboard:o.target.value})})]})]})]}),e.jsx(ss,{}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h4",{className:"font-medium text-lg",children:"Homepage Content"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(q,{children:"Hero Title"}),e.jsx($,{value:a.content.homepage.heroTitle,onChange:o=>i("content","homepage",{...a.content.homepage,heroTitle:o.target.value}),className:"text-lg"})]}),e.jsxs("div",{children:[e.jsx(q,{children:"Hero Subtitle"}),e.jsx($,{value:a.content.homepage.heroSubtitle,onChange:o=>i("content","homepage",{...a.content.homepage,heroSubtitle:o.target.value})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(q,{children:"Primary Button Text"}),e.jsx($,{value:a.content.homepage.heroButtonPrimary,onChange:o=>i("content","homepage",{...a.content.homepage,heroButtonPrimary:o.target.value})})]}),e.jsxs("div",{children:[e.jsx(q,{children:"Secondary Button Text"}),e.jsx($,{value:a.content.homepage.heroButtonSecondary,onChange:o=>i("content","homepage",{...a.content.homepage,heroButtonSecondary:o.target.value})})]})]}),e.jsxs("div",{children:[e.jsx(q,{children:"Features Section Title"}),e.jsx($,{value:a.content.homepage.featuresTitle,onChange:o=>i("content","homepage",{...a.content.homepage,featuresTitle:o.target.value})})]}),e.jsxs("div",{children:[e.jsx(q,{children:"About Section Title"}),e.jsx($,{value:a.content.homepage.aboutTitle,onChange:o=>i("content","homepage",{...a.content.homepage,aboutTitle:o.target.value})})]}),e.jsxs("div",{children:[e.jsx(q,{children:"About Section Text"}),e.jsx("textarea",{className:"w-full p-3 border rounded-md",rows:3,value:a.content.homepage.aboutText,onChange:o=>i("content","homepage",{...a.content.homepage,aboutText:o.target.value})})]})]})]}),e.jsx(ss,{}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h4",{className:"font-medium text-lg",children:"Booking System Content"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(q,{children:"Page Title"}),e.jsx($,{value:a.content.booking.title,onChange:o=>i("content","booking",{...a.content.booking,title:o.target.value})})]}),e.jsxs("div",{children:[e.jsx(q,{children:"Page Subtitle"}),e.jsx($,{value:a.content.booking.subtitle,onChange:o=>i("content","booking",{...a.content.booking,subtitle:o.target.value})})]}),e.jsxs("div",{children:[e.jsx(q,{children:"Search Placeholder"}),e.jsx($,{value:a.content.booking.searchPlaceholder,onChange:o=>i("content","booking",{...a.content.booking,searchPlaceholder:o.target.value})})]}),e.jsxs("div",{children:[e.jsx(q,{children:"Book Now Button"}),e.jsx($,{value:a.content.booking.bookNowButton,onChange:o=>i("content","booking",{...a.content.booking,bookNowButton:o.target.value})})]}),e.jsxs("div",{children:[e.jsx(q,{children:"View Profile Button"}),e.jsx($,{value:a.content.booking.viewProfileButton,onChange:o=>i("content","booking",{...a.content.booking,viewProfileButton:o.target.value})})]}),e.jsxs("div",{children:[e.jsx(q,{children:"Price Label"}),e.jsx($,{value:a.content.booking.priceLabel,onChange:o=>i("content","booking",{...a.content.booking,priceLabel:o.target.value})})]})]})]}),e.jsx(ss,{}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h4",{className:"font-medium text-lg",children:"Form Elements & Buttons"}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx(q,{children:"Email Label"}),e.jsx($,{value:a.content.forms.emailLabel,onChange:o=>i("content","forms",{...a.content.forms,emailLabel:o.target.value})})]}),e.jsxs("div",{children:[e.jsx(q,{children:"Password Label"}),e.jsx($,{value:a.content.forms.passwordLabel,onChange:o=>i("content","forms",{...a.content.forms,passwordLabel:o.target.value})})]}),e.jsxs("div",{children:[e.jsx(q,{children:"Full Name Label"}),e.jsx($,{value:a.content.forms.fullNameLabel,onChange:o=>i("content","forms",{...a.content.forms,fullNameLabel:o.target.value})})]}),e.jsxs("div",{children:[e.jsx(q,{children:"Submit Button"}),e.jsx($,{value:a.content.forms.submitButton,onChange:o=>i("content","forms",{...a.content.forms,submitButton:o.target.value})})]}),e.jsxs("div",{children:[e.jsx(q,{children:"Cancel Button"}),e.jsx($,{value:a.content.forms.cancelButton,onChange:o=>i("content","forms",{...a.content.forms,cancelButton:o.target.value})})]}),e.jsxs("div",{children:[e.jsx(q,{children:"Save Button"}),e.jsx($,{value:a.content.forms.saveButton,onChange:o=>i("content","forms",{...a.content.forms,saveButton:o.target.value})})]}),e.jsxs("div",{children:[e.jsx(q,{children:"Edit Button"}),e.jsx($,{value:a.content.forms.editButton,onChange:o=>i("content","forms",{...a.content.forms,editButton:o.target.value})})]}),e.jsxs("div",{children:[e.jsx(q,{children:"Delete Button"}),e.jsx($,{value:a.content.forms.deleteButton,onChange:o=>i("content","forms",{...a.content.forms,deleteButton:o.target.value})})]}),e.jsxs("div",{children:[e.jsx(q,{children:"Upload Button"}),e.jsx($,{value:a.content.forms.uploadButton,onChange:o=>i("content","forms",{...a.content.forms,uploadButton:o.target.value})})]})]})]}),e.jsx(ss,{}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h4",{className:"font-medium text-lg",children:"System Messages & Notifications"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(q,{children:"Success Title"}),e.jsx($,{value:a.content.messages.successTitle,onChange:o=>i("content","messages",{...a.content.messages,successTitle:o.target.value})})]}),e.jsxs("div",{children:[e.jsx(q,{children:"Error Title"}),e.jsx($,{value:a.content.messages.errorTitle,onChange:o=>i("content","messages",{...a.content.messages,errorTitle:o.target.value})})]}),e.jsxs("div",{children:[e.jsx(q,{children:"Loading Message"}),e.jsx($,{value:a.content.messages.loadingMessage,onChange:o=>i("content","messages",{...a.content.messages,loadingMessage:o.target.value})})]}),e.jsxs("div",{children:[e.jsx(q,{children:"No Data Message"}),e.jsx($,{value:a.content.messages.noDataMessage,onChange:o=>i("content","messages",{...a.content.messages,noDataMessage:o.target.value})})]}),e.jsxs("div",{children:[e.jsx(q,{children:"Unauthorized Message"}),e.jsx($,{value:a.content.messages.unauthorizedMessage,onChange:o=>i("content","messages",{...a.content.messages,unauthorizedMessage:o.target.value})})]}),e.jsxs("div",{children:[e.jsx(q,{children:"Network Error Message"}),e.jsx($,{value:a.content.messages.networkErrorMessage,onChange:o=>i("content","messages",{...a.content.messages,networkErrorMessage:o.target.value})})]})]})]}),e.jsx(ss,{}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h4",{className:"font-medium text-lg",children:"Dashboard Content"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(q,{children:"Welcome Message"}),e.jsx($,{value:a.content.dashboard.welcomeMessage,onChange:o=>l("content","dashboard",{...a.content.dashboard,welcomeMessage:o.target.value})})]}),e.jsxs("div",{children:[e.jsx(q,{children:"Overview Title"}),e.jsx($,{value:a.content.dashboard.overviewTitle,onChange:o=>l("content","dashboard",{...a.content.dashboard,overviewTitle:o.target.value})})]}),e.jsxs("div",{children:[e.jsx(q,{children:"Recent Activity"}),e.jsx($,{value:a.content.dashboard.recentActivity,onChange:o=>l("content","dashboard",{...a.content.dashboard,recentActivity:o.target.value})})]}),e.jsxs("div",{children:[e.jsx(q,{children:"Upcoming Events"}),e.jsx($,{value:a.content.dashboard.upcomingEvents,onChange:o=>l("content","dashboard",{...a.content.dashboard,upcomingEvents:o.target.value})})]}),e.jsxs("div",{children:[e.jsx(q,{children:"Analytics"}),e.jsx($,{value:a.content.dashboard.analytics,onChange:o=>l("content","dashboard",{...a.content.dashboard,analytics:o.target.value})})]}),e.jsxs("div",{children:[e.jsx(q,{children:"Quick Actions"}),e.jsx($,{value:a.content.dashboard.quickActions,onChange:o=>l("content","dashboard",{...a.content.dashboard,quickActions:o.target.value})})]})]})]}),e.jsx(ss,{}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h4",{className:"font-medium text-lg",children:"Modal Content"}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("h5",{className:"font-medium",children:"Email Configuration Modal"}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx(q,{children:"Modal Title"}),e.jsx($,{value:a.content.modals.emailConfig.title,onChange:o=>l("content","modals",{...a.content.modals,emailConfig:{...a.content.modals.emailConfig,title:o.target.value}})})]}),e.jsxs("div",{children:[e.jsx(q,{children:"SMTP Server"}),e.jsx($,{value:a.content.modals.emailConfig.smtpServer,onChange:o=>l("content","modals",{...a.content.modals,emailConfig:{...a.content.modals.emailConfig,smtpServer:o.target.value}})})]}),e.jsxs("div",{children:[e.jsx(q,{children:"Username"}),e.jsx($,{value:a.content.modals.emailConfig.username,onChange:o=>l("content","modals",{...a.content.modals,emailConfig:{...a.content.modals.emailConfig,username:o.target.value}})})]})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("h5",{className:"font-medium",children:"Music Upload Modal"}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx(q,{children:"Track Title"}),e.jsx($,{value:a.content.modals.musicUpload.trackTitle,onChange:o=>l("content","modals",{...a.content.modals,musicUpload:{...a.content.modals.musicUpload,trackTitle:o.target.value}})})]}),e.jsxs("div",{children:[e.jsx(q,{children:"Genre"}),e.jsx($,{value:a.content.modals.musicUpload.genre,onChange:o=>l("content","modals",{...a.content.modals,musicUpload:{...a.content.modals.musicUpload,genre:o.target.value}})})]}),e.jsxs("div",{children:[e.jsx(q,{children:"ISRC Code"}),e.jsx($,{value:a.content.modals.musicUpload.isrcCode,onChange:o=>l("content","modals",{...a.content.modals,musicUpload:{...a.content.modals.musicUpload,isrcCode:o.target.value}})})]}),e.jsxs("div",{children:[e.jsx(q,{children:"Duration"}),e.jsx($,{value:a.content.modals.musicUpload.duration,onChange:o=>l("content","modals",{...a.content.modals,musicUpload:{...a.content.modals.musicUpload,duration:o.target.value}})})]}),e.jsxs("div",{children:[e.jsx(q,{children:"Description"}),e.jsx($,{value:a.content.modals.musicUpload.description,onChange:o=>l("content","modals",{...a.content.modals,musicUpload:{...a.content.modals.musicUpload,description:o.target.value}})})]}),e.jsxs("div",{children:[e.jsx(q,{children:"Price"}),e.jsx($,{value:a.content.modals.musicUpload.price,onChange:o=>l("content","modals",{...a.content.modals,musicUpload:{...a.content.modals.musicUpload,price:o.target.value}})})]})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("h5",{className:"font-medium",children:"Calendar Modal"}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx(q,{children:"Event Title"}),e.jsx($,{value:a.content.modals.calendarModal.eventTitle,onChange:o=>l("content","modals",{...a.content.modals,calendarModal:{...a.content.modals.calendarModal,eventTitle:o.target.value}})})]}),e.jsxs("div",{children:[e.jsx(q,{children:"Start Date"}),e.jsx($,{value:a.content.modals.calendarModal.startDate,onChange:o=>l("content","modals",{...a.content.modals,calendarModal:{...a.content.modals.calendarModal,startDate:o.target.value}})})]}),e.jsxs("div",{children:[e.jsx(q,{children:"Location"}),e.jsx($,{value:a.content.modals.calendarModal.location,onChange:o=>l("content","modals",{...a.content.modals,calendarModal:{...a.content.modals.calendarModal,location:o.target.value}})})]}),e.jsxs("div",{children:[e.jsx(q,{children:"All Day Event"}),e.jsx($,{value:a.content.modals.calendarModal.allDay,onChange:o=>l("content","modals",{...a.content.modals,calendarModal:{...a.content.modals.calendarModal,allDay:o.target.value}})})]}),e.jsxs("div",{children:[e.jsx(q,{children:"Save Event"}),e.jsx($,{value:a.content.modals.calendarModal.saveEvent,onChange:o=>l("content","modals",{...a.content.modals,calendarModal:{...a.content.modals.calendarModal,saveEvent:o.target.value}})})]}),e.jsxs("div",{children:[e.jsx(q,{children:"Delete Event"}),e.jsx($,{value:a.content.modals.calendarModal.deleteEvent,onChange:o=>l("content","modals",{...a.content.modals,calendarModal:{...a.content.modals.calendarModal,deleteEvent:o.target.value}})})]})]})]})]}),e.jsx(ss,{}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h4",{className:"font-medium text-lg",children:"Search & Filter Content"}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx(q,{children:"Search Placeholder"}),e.jsx($,{value:a.content.search.searchPlaceholder,onChange:o=>l("content","search",{...a.content.search,searchPlaceholder:o.target.value})})]}),e.jsxs("div",{children:[e.jsx(q,{children:"Filter Results"}),e.jsx($,{value:a.content.search.filterResults,onChange:o=>l("content","search",{...a.content.search,filterResults:o.target.value})})]}),e.jsxs("div",{children:[e.jsx(q,{children:"Sort By"}),e.jsx($,{value:a.content.search.sortBy,onChange:o=>l("content","search",{...a.content.search,sortBy:o.target.value})})]}),e.jsxs("div",{children:[e.jsx(q,{children:"No Results"}),e.jsx($,{value:a.content.search.noResults,onChange:o=>l("content","search",{...a.content.search,noResults:o.target.value})})]}),e.jsxs("div",{children:[e.jsx(q,{children:"Clear Filters"}),e.jsx($,{value:a.content.search.clearFilters,onChange:o=>l("content","search",{...a.content.search,clearFilters:o.target.value})})]}),e.jsxs("div",{children:[e.jsx(q,{children:"Apply Filters"}),e.jsx($,{value:a.content.search.applyFilters,onChange:o=>l("content","search",{...a.content.search,applyFilters:o.target.value})})]})]})]}),e.jsx(ss,{}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h4",{className:"font-medium text-lg",children:"File Upload Content"}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx(q,{children:"Drag and Drop"}),e.jsx($,{value:a.content.fileUpload.dragAndDrop,onChange:o=>l("content","fileUpload",{...a.content.fileUpload,dragAndDrop:o.target.value})})]}),e.jsxs("div",{children:[e.jsx(q,{children:"Browse Files"}),e.jsx($,{value:a.content.fileUpload.browseFiles,onChange:o=>l("content","fileUpload",{...a.content.fileUpload,browseFiles:o.target.value})})]}),e.jsxs("div",{children:[e.jsx(q,{children:"Upload Progress"}),e.jsx($,{value:a.content.fileUpload.uploadProgress,onChange:o=>l("content","fileUpload",{...a.content.fileUpload,uploadProgress:o.target.value})})]}),e.jsxs("div",{children:[e.jsx(q,{children:"Cancel Upload"}),e.jsx($,{value:a.content.fileUpload.cancelUpload,onChange:o=>l("content","fileUpload",{...a.content.fileUpload,cancelUpload:o.target.value})})]}),e.jsxs("div",{children:[e.jsx(q,{children:"Remove File"}),e.jsx($,{value:a.content.fileUpload.removeFile,onChange:o=>l("content","fileUpload",{...a.content.fileUpload,removeFile:o.target.value})})]}),e.jsxs("div",{children:[e.jsx(q,{children:"Allowed Formats"}),e.jsx($,{value:a.content.fileUpload.allowedFormats,onChange:o=>l("content","fileUpload",{...a.content.fileUpload,allowedFormats:o.target.value})})]})]})]}),e.jsx(ss,{}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h4",{className:"font-medium text-lg",children:"Notifications Content"}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx(q,{children:"New Message"}),e.jsx($,{value:a.content.notifications.newMessage,onChange:o=>l("content","notifications",{...a.content.notifications,newMessage:o.target.value})})]}),e.jsxs("div",{children:[e.jsx(q,{children:"New Booking"}),e.jsx($,{value:a.content.notifications.newBooking,onChange:o=>l("content","notifications",{...a.content.notifications,newBooking:o.target.value})})]}),e.jsxs("div",{children:[e.jsx(q,{children:"Booking Confirmed"}),e.jsx($,{value:a.content.notifications.bookingConfirmed,onChange:o=>l("content","notifications",{...a.content.notifications,bookingConfirmed:o.target.value})})]}),e.jsxs("div",{children:[e.jsx(q,{children:"Mark as Read"}),e.jsx($,{value:a.content.notifications.markAsRead,onChange:o=>l("content","notifications",{...a.content.notifications,markAsRead:o.target.value})})]}),e.jsxs("div",{children:[e.jsx(q,{children:"Mark All as Read"}),e.jsx($,{value:a.content.notifications.markAllAsRead,onChange:o=>l("content","notifications",{...a.content.notifications,markAllAsRead:o.target.value})})]}),e.jsxs("div",{children:[e.jsx(q,{children:"Clear Notifications"}),e.jsx($,{value:a.content.notifications.clearNotifications,onChange:o=>l("content","notifications",{...a.content.notifications,clearNotifications:o.target.value})})]})]})]}),e.jsx(ss,{}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h4",{className:"font-medium text-lg",children:"Calendar Content"}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx(q,{children:"Today"}),e.jsx($,{value:a.content.calendar.today,onChange:o=>l("content","calendar",{...a.content.calendar,today:o.target.value})})]}),e.jsxs("div",{children:[e.jsx(q,{children:"Previous Month"}),e.jsx($,{value:a.content.calendar.previousMonth,onChange:o=>l("content","calendar",{...a.content.calendar,previousMonth:o.target.value})})]}),e.jsxs("div",{children:[e.jsx(q,{children:"Next Month"}),e.jsx($,{value:a.content.calendar.nextMonth,onChange:o=>l("content","calendar",{...a.content.calendar,nextMonth:o.target.value})})]}),e.jsxs("div",{children:[e.jsx(q,{children:"Select Date"}),e.jsx($,{value:a.content.calendar.selectDate,onChange:o=>l("content","calendar",{...a.content.calendar,selectDate:o.target.value})})]}),e.jsxs("div",{children:[e.jsx(q,{children:"Available"}),e.jsx($,{value:a.content.calendar.available,onChange:o=>l("content","calendar",{...a.content.calendar,available:o.target.value})})]}),e.jsxs("div",{children:[e.jsx(q,{children:"Booked"}),e.jsx($,{value:a.content.calendar.booked,onChange:o=>l("content","calendar",{...a.content.calendar,booked:o.target.value})})]})]})]}),e.jsx(ss,{}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h4",{className:"font-medium text-lg",children:"Pagination Content"}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx(q,{children:"Previous"}),e.jsx($,{value:a.content.pagination.previous,onChange:o=>l("content","pagination",{...a.content.pagination,previous:o.target.value})})]}),e.jsxs("div",{children:[e.jsx(q,{children:"Next"}),e.jsx($,{value:a.content.pagination.next,onChange:o=>l("content","pagination",{...a.content.pagination,next:o.target.value})})]}),e.jsxs("div",{children:[e.jsx(q,{children:"Page"}),e.jsx($,{value:a.content.pagination.page,onChange:o=>l("content","pagination",{...a.content.pagination,page:o.target.value})})]}),e.jsxs("div",{children:[e.jsx(q,{children:"Of"}),e.jsx($,{value:a.content.pagination.of,onChange:o=>l("content","pagination",{...a.content.pagination,of:o.target.value})})]}),e.jsxs("div",{children:[e.jsx(q,{children:"Showing"}),e.jsx($,{value:a.content.pagination.showing,onChange:o=>l("content","pagination",{...a.content.pagination,showing:o.target.value})})]}),e.jsxs("div",{children:[e.jsx(q,{children:"Entries"}),e.jsx($,{value:a.content.pagination.entries,onChange:o=>l("content","pagination",{...a.content.pagination,entries:o.target.value})})]})]})]}),e.jsx(ss,{}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h4",{className:"font-medium text-lg",children:"Collaboration Content"}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx(q,{children:"Collaboration Title"}),e.jsx($,{value:a.content.collaboration.title,onChange:o=>l("content","collaboration",{...a.content.collaboration,title:o.target.value})})]}),e.jsxs("div",{children:[e.jsx(q,{children:"Create Room"}),e.jsx($,{value:a.content.collaboration.createRoom,onChange:o=>l("content","collaboration",{...a.content.collaboration,createRoom:o.target.value})})]}),e.jsxs("div",{children:[e.jsx(q,{children:"Room Name"}),e.jsx($,{value:a.content.collaboration.roomName,onChange:o=>l("content","collaboration",{...a.content.collaboration,roomName:o.target.value})})]}),e.jsxs("div",{children:[e.jsx(q,{children:"Join Room"}),e.jsx($,{value:a.content.collaboration.joinRoom,onChange:o=>l("content","collaboration",{...a.content.collaboration,joinRoom:o.target.value})})]}),e.jsxs("div",{children:[e.jsx(q,{children:"Send Message"}),e.jsx($,{value:a.content.collaboration.sendMessage,onChange:o=>l("content","collaboration",{...a.content.collaboration,sendMessage:o.target.value})})]}),e.jsxs("div",{children:[e.jsx(q,{children:"Leave Room"}),e.jsx($,{value:a.content.collaboration.leaveRoom,onChange:o=>l("content","collaboration",{...a.content.collaboration,leaveRoom:o.target.value})})]})]})]}),e.jsx(ss,{}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h4",{className:"font-medium text-lg",children:"Management Application Content"}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx(q,{children:"Application Title"}),e.jsx($,{value:a.content.managementApplication.title,onChange:o=>l("content","managementApplication",{...a.content.managementApplication,title:o.target.value})})]}),e.jsxs("div",{children:[e.jsx(q,{children:"Submit Application"}),e.jsx($,{value:a.content.managementApplication.submitApplication,onChange:o=>l("content","managementApplication",{...a.content.managementApplication,submitApplication:o.target.value})})]}),e.jsxs("div",{children:[e.jsx(q,{children:"Approve Application"}),e.jsx($,{value:a.content.managementApplication.approveApplication,onChange:o=>l("content","managementApplication",{...a.content.managementApplication,approveApplication:o.target.value})})]}),e.jsxs("div",{children:[e.jsx(q,{children:"Business Description"}),e.jsx($,{value:a.content.managementApplication.businessDescription,onChange:o=>l("content","managementApplication",{...a.content.managementApplication,businessDescription:o.target.value})})]}),e.jsxs("div",{children:[e.jsx(q,{children:"Management Tier"}),e.jsx($,{value:a.content.managementApplication.managementTier,onChange:o=>l("content","managementApplication",{...a.content.managementApplication,managementTier:o.target.value})})]}),e.jsxs("div",{children:[e.jsx(q,{children:"Benefits"}),e.jsx($,{value:a.content.managementApplication.benefits,onChange:o=>l("content","managementApplication",{...a.content.managementApplication,benefits:o.target.value})})]})]})]}),e.jsx(ss,{}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h4",{className:"font-medium text-lg",children:"Technical Rider Content"}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx(q,{children:"Technical Rider Title"}),e.jsx($,{value:a.content.technicalRider.title,onChange:o=>l("content","technicalRider",{...a.content.technicalRider,title:o.target.value})})]}),e.jsxs("div",{children:[e.jsx(q,{children:"Band Makeup"}),e.jsx($,{value:a.content.technicalRider.bandMakeup,onChange:o=>l("content","technicalRider",{...a.content.technicalRider,bandMakeup:o.target.value})})]}),e.jsxs("div",{children:[e.jsx(q,{children:"Mixer Inputs"}),e.jsx($,{value:a.content.technicalRider.mixerInputs,onChange:o=>l("content","technicalRider",{...a.content.technicalRider,mixerInputs:o.target.value})})]}),e.jsxs("div",{children:[e.jsx(q,{children:"Lighting Requirements"}),e.jsx($,{value:a.content.technicalRider.lightingRequirements,onChange:o=>l("content","technicalRider",{...a.content.technicalRider,lightingRequirements:o.target.value})})]}),e.jsxs("div",{children:[e.jsx(q,{children:"Equipment Specs"}),e.jsx($,{value:a.content.technicalRider.equipmentSpecs,onChange:o=>l("content","technicalRider",{...a.content.technicalRider,equipmentSpecs:o.target.value})})]}),e.jsxs("div",{children:[e.jsx(q,{children:"Stage Setup"}),e.jsx($,{value:a.content.technicalRider.stageSetup,onChange:o=>l("content","technicalRider",{...a.content.technicalRider,stageSetup:o.target.value})})]})]})]}),e.jsx(ss,{}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h4",{className:"font-medium text-lg",children:"Artist Profile Content"}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx(q,{children:"Profile Section"}),e.jsx($,{value:a.content.artists.profileSection,onChange:o=>l("content","artists",{...a.content.artists,profileSection:o.target.value})})]}),e.jsxs("div",{children:[e.jsx(q,{children:"Music Section"}),e.jsx($,{value:a.content.artists.musicSection,onChange:o=>l("content","artists",{...a.content.artists,musicSection:o.target.value})})]}),e.jsxs("div",{children:[e.jsx(q,{children:"Booking Section"}),e.jsx($,{value:a.content.artists.bookingSection,onChange:o=>l("content","artists",{...a.content.artists,bookingSection:o.target.value})})]}),e.jsxs("div",{children:[e.jsx(q,{children:"Contact Section"}),e.jsx($,{value:a.content.artists.contactSection,onChange:o=>l("content","artists",{...a.content.artists,contactSection:o.target.value})})]}),e.jsxs("div",{children:[e.jsx(q,{children:"Social Media"}),e.jsx($,{value:a.content.artists.socialMedia,onChange:o=>l("content","artists",{...a.content.artists,socialMedia:o.target.value})})]}),e.jsxs("div",{children:[e.jsx(q,{children:"Performance Rates"}),e.jsx($,{value:a.content.artists.rates,onChange:o=>l("content","artists",{...a.content.artists,rates:o.target.value})})]})]})]}),e.jsx(ss,{}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h4",{className:"font-medium text-lg",children:"Error Messages Content"}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx(q,{children:"Required Field"}),e.jsx($,{value:a.content.errorMessages.required,onChange:o=>l("content","errorMessages",{...a.content.errorMessages,required:o.target.value})})]}),e.jsxs("div",{children:[e.jsx(q,{children:"Invalid Email"}),e.jsx($,{value:a.content.errorMessages.invalidEmail,onChange:o=>l("content","errorMessages",{...a.content.errorMessages,invalidEmail:o.target.value})})]}),e.jsxs("div",{children:[e.jsx(q,{children:"Network Error"}),e.jsx($,{value:a.content.errorMessages.networkError,onChange:o=>l("content","errorMessages",{...a.content.errorMessages,networkError:o.target.value})})]}),e.jsxs("div",{children:[e.jsx(q,{children:"Server Error"}),e.jsx($,{value:a.content.errorMessages.serverError,onChange:o=>l("content","errorMessages",{...a.content.errorMessages,serverError:o.target.value})})]}),e.jsxs("div",{children:[e.jsx(q,{children:"Unauthorized"}),e.jsx($,{value:a.content.errorMessages.unauthorized,onChange:o=>l("content","errorMessages",{...a.content.errorMessages,unauthorized:o.target.value})})]}),e.jsxs("div",{children:[e.jsx(q,{children:"Upload Failed"}),e.jsx($,{value:a.content.errorMessages.uploadFailed,onChange:o=>l("content","errorMessages",{...a.content.errorMessages,uploadFailed:o.target.value})})]})]})]}),e.jsx(ss,{}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h4",{className:"font-medium text-lg",children:"Success Messages Content"}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx(q,{children:"Successfully Saved"}),e.jsx($,{value:a.content.successMessages.saved,onChange:o=>l("content","successMessages",{...a.content.successMessages,saved:o.target.value})})]}),e.jsxs("div",{children:[e.jsx(q,{children:"File Uploaded"}),e.jsx($,{value:a.content.successMessages.uploaded,onChange:o=>l("content","successMessages",{...a.content.successMessages,uploaded:o.target.value})})]}),e.jsxs("div",{children:[e.jsx(q,{children:"Successfully Created"}),e.jsx($,{value:a.content.successMessages.created,onChange:o=>l("content","successMessages",{...a.content.successMessages,created:o.target.value})})]}),e.jsxs("div",{children:[e.jsx(q,{children:"Successfully Updated"}),e.jsx($,{value:a.content.successMessages.updated,onChange:o=>l("content","successMessages",{...a.content.successMessages,updated:o.target.value})})]}),e.jsxs("div",{children:[e.jsx(q,{children:"Login Successful"}),e.jsx($,{value:a.content.successMessages.loggedIn,onChange:o=>l("content","successMessages",{...a.content.successMessages,loggedIn:o.target.value})})]}),e.jsxs("div",{children:[e.jsx(q,{children:"Message Sent"}),e.jsx($,{value:a.content.successMessages.sent,onChange:o=>l("content","successMessages",{...a.content.successMessages,sent:o.target.value})})]})]})]}),e.jsx(ss,{}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h4",{className:"font-medium text-lg",children:"Loading Messages Content"}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx(q,{children:"Loading"}),e.jsx($,{value:a.content.loadingMessages.loading,onChange:o=>l("content","loadingMessages",{...a.content.loadingMessages,loading:o.target.value})})]}),e.jsxs("div",{children:[e.jsx(q,{children:"Saving"}),e.jsx($,{value:a.content.loadingMessages.saving,onChange:o=>l("content","loadingMessages",{...a.content.loadingMessages,saving:o.target.value})})]}),e.jsxs("div",{children:[e.jsx(q,{children:"Uploading"}),e.jsx($,{value:a.content.loadingMessages.uploading,onChange:o=>l("content","loadingMessages",{...a.content.loadingMessages,uploading:o.target.value})})]}),e.jsxs("div",{children:[e.jsx(q,{children:"Processing"}),e.jsx($,{value:a.content.loadingMessages.processing,onChange:o=>l("content","loadingMessages",{...a.content.loadingMessages,processing:o.target.value})})]}),e.jsxs("div",{children:[e.jsx(q,{children:"Connecting"}),e.jsx($,{value:a.content.loadingMessages.connecting,onChange:o=>l("content","loadingMessages",{...a.content.loadingMessages,connecting:o.target.value})})]}),e.jsxs("div",{children:[e.jsx(q,{children:"Authenticating"}),e.jsx($,{value:a.content.loadingMessages.authenticating,onChange:o=>l("content","loadingMessages",{...a.content.loadingMessages,authenticating:o.target.value})})]})]})]}),e.jsx(ss,{}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h4",{className:"font-medium text-lg",children:"Tooltips Content"}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx(q,{children:"Edit Tooltip"}),e.jsx($,{value:a.content.tooltips.edit,onChange:o=>l("content","tooltips",{...a.content.tooltips,edit:o.target.value})})]}),e.jsxs("div",{children:[e.jsx(q,{children:"Delete Tooltip"}),e.jsx($,{value:a.content.tooltips.delete,onChange:o=>l("content","tooltips",{...a.content.tooltips,delete:o.target.value})})]}),e.jsxs("div",{children:[e.jsx(q,{children:"View Tooltip"}),e.jsx($,{value:a.content.tooltips.view,onChange:o=>l("content","tooltips",{...a.content.tooltips,view:o.target.value})})]}),e.jsxs("div",{children:[e.jsx(q,{children:"Download Tooltip"}),e.jsx($,{value:a.content.tooltips.download,onChange:o=>l("content","tooltips",{...a.content.tooltips,download:o.target.value})})]}),e.jsxs("div",{children:[e.jsx(q,{children:"Share Tooltip"}),e.jsx($,{value:a.content.tooltips.share,onChange:o=>l("content","tooltips",{...a.content.tooltips,share:o.target.value})})]}),e.jsxs("div",{children:[e.jsx(q,{children:"Settings Tooltip"}),e.jsx($,{value:a.content.tooltips.settings,onChange:o=>l("content","tooltips",{...a.content.tooltips,settings:o.target.value})})]})]})]}),e.jsx(ss,{}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h4",{className:"font-medium text-lg",children:"Accessibility Content"}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx(q,{children:"Close Dialog"}),e.jsx($,{value:a.content.accessibility.closeDialog,onChange:o=>l("content","accessibility",{...a.content.accessibility,closeDialog:o.target.value})})]}),e.jsxs("div",{children:[e.jsx(q,{children:"Open Menu"}),e.jsx($,{value:a.content.accessibility.openMenu,onChange:o=>l("content","accessibility",{...a.content.accessibility,openMenu:o.target.value})})]}),e.jsxs("div",{children:[e.jsx(q,{children:"Toggle Sidebar"}),e.jsx($,{value:a.content.accessibility.toggleSidebar,onChange:o=>l("content","accessibility",{...a.content.accessibility,toggleSidebar:o.target.value})})]}),e.jsxs("div",{children:[e.jsx(q,{children:"Skip to Content"}),e.jsx($,{value:a.content.accessibility.skipToContent,onChange:o=>l("content","accessibility",{...a.content.accessibility,skipToContent:o.target.value})})]}),e.jsxs("div",{children:[e.jsx(q,{children:"Breadcrumb Navigation"}),e.jsx($,{value:a.content.accessibility.breadcrumbNavigation,onChange:o=>l("content","accessibility",{...a.content.accessibility,breadcrumbNavigation:o.target.value})})]}),e.jsxs("div",{children:[e.jsx(q,{children:"Sort Column"}),e.jsx($,{value:a.content.accessibility.sortColumn,onChange:o=>l("content","accessibility",{...a.content.accessibility,sortColumn:o.target.value})})]})]})]})]})]})}),e.jsx(ge,{value:"branding",className:"space-y-6",children:e.jsxs(R,{children:[e.jsx(Y,{children:e.jsxs(Q,{className:"flex items-center gap-2",children:[e.jsx(Db,{className:"h-5 w-5"}),"Platform Branding & Identity"]})}),e.jsx(L,{className:"space-y-6",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(q,{children:"Platform Name"}),e.jsx($,{value:a.branding.platformName,onChange:o=>i("branding","platformName",o.target.value),placeholder:"Enter platform name"})]}),e.jsxs("div",{children:[e.jsx(q,{children:"Tagline"}),e.jsx($,{value:a.branding.tagline,onChange:o=>i("branding","tagline",o.target.value),placeholder:"Enter platform tagline"})]})]}),e.jsxs("div",{children:[e.jsx(q,{children:"Copyright Text"}),e.jsx($,{value:a.branding.copyright,onChange:o=>i("branding","copyright",o.target.value),placeholder:"Enter copyright text"})]})]})})]})})]})]})},RQ=()=>{_s();const{toast:t}=nt(),s=Tt(),{config:n,updateConfig:a}=n0(),[r,i]=N.useState(n||Fi),[l,c]=N.useState(!1);N.useEffect(()=>{n&&i(n)},[n]);const o=Xe({mutationFn:async u=>xe("/api/admin/config",{method:"PUT",body:JSON.stringify(u)}),onSuccess:()=>{t({title:"Success",description:"Configuration saved successfully!"}),s.invalidateQueries({queryKey:["/api/admin/config"]})},onError:()=>{t({title:"Error",description:"Failed to save configuration",variant:"destructive"})}}),d=async()=>{c(!0);try{await o.mutateAsync(r),await a(r)}finally{c(!1)}},h=async()=>{i(Fi),await a(Fi)};return l?e.jsx(R,{children:e.jsx(L,{className:"p-6",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin h-8 w-8 border-4 border-blue-500 border-t-transparent rounded-full mx-auto mb-4"}),e.jsx("p",{children:"Loading configuration..."})]})})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("h2",{className:"text-2xl font-bold flex items-center gap-2",children:[e.jsx(Gt,{className:"h-6 w-6"}),"Unified Platform Configuration"]}),e.jsx("p",{className:"text-muted-foreground mt-1",children:"Control all platform settings, UI behavior, and system configurations from this central dashboard"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(E,{variant:"outline",onClick:h,className:"flex items-center gap-2",children:[e.jsx(Oy,{className:"h-4 w-4"}),"Reset to Defaults"]}),e.jsxs(E,{onClick:d,disabled:l,className:"flex items-center gap-2",children:[e.jsx(js,{className:"h-4 w-4"}),l?"Saving...":"Save All Changes"]})]})]}),e.jsx(_Q,{onSave:d,isLoading:l})]})},vv=[{id:"view_user_management",name:"View User Management",description:"Access user management dashboard",category:"management",level:"read"},{id:"edit_user_management",name:"Edit User Management",description:"Create, edit, and manage users",category:"management",level:"write"},{id:"admin_user_management",name:"Admin User Management",description:"Full user administration including role changes",category:"management",level:"admin"},{id:"view_bookings",name:"View Bookings",description:"View booking information",category:"booking",level:"read"},{id:"view_assigned_bookings",name:"View Assigned Bookings",description:"View bookings assigned to talent",category:"booking",level:"read"},{id:"respond_to_bookings",name:"Respond to Bookings",description:"Approve, reject, or counter-offer bookings",category:"booking",level:"write"},{id:"create_bookings",name:"Create Bookings",description:"Create new bookings",category:"booking",level:"write"},{id:"manage_bookings",name:"Manage Bookings",description:"Edit and approve bookings",category:"booking",level:"write"},{id:"admin_bookings",name:"Admin Bookings",description:"Full booking administration",category:"booking",level:"admin"},{id:"view_technical_riders",name:"View Technical Riders",description:"Access technical rider system",category:"booking",level:"read"},{id:"create_technical_riders",name:"Create Technical Riders",description:"Create and edit technical riders",category:"booking",level:"write"},{id:"assignment_management",name:"Assignment Management",description:"Manage talent assignments",category:"booking",level:"write"},{id:"view_content",name:"View Content",description:"View songs, albums, merchandise",category:"content",level:"read"},{id:"upload_content",name:"Upload Content",description:"Upload songs, albums, media",category:"content",level:"write"},{id:"manage_content",name:"Manage Content",description:"Edit and manage all content",category:"content",level:"write"},{id:"admin_content",name:"Admin Content",description:"Full content administration",category:"content",level:"admin"},{id:"manage_merchandise",name:"Manage Merchandise",description:"Create and manage merchandise",category:"content",level:"write"},{id:"manage_contracts",name:"Manage Contracts",description:"Create and manage contracts",category:"content",level:"write"},{id:"manage_splitsheets",name:"Manage Splitsheets",description:"Create and manage splitsheets",category:"content",level:"write"},{id:"view_analytics",name:"View Analytics",description:"View basic analytics",category:"analytics",level:"read"},{id:"advanced_analytics",name:"Advanced Analytics",description:"Access detailed analytics and reports",category:"analytics",level:"write"},{id:"revenue_analytics",name:"Revenue Analytics",description:"View revenue and financial analytics",category:"analytics",level:"write"},{id:"admin_analytics",name:"Admin Analytics",description:"Full analytics administration",category:"analytics",level:"admin"},{id:"view_marketing",name:"View Marketing",description:"View marketing campaigns",category:"marketing",level:"read"},{id:"create_campaigns",name:"Create Campaigns",description:"Create marketing campaigns",category:"marketing",level:"write"},{id:"manage_newsletters",name:"Manage Newsletters",description:"Create and send newsletters",category:"marketing",level:"write"},{id:"manage_press_releases",name:"Manage Press Releases",description:"Create and manage press releases",category:"marketing",level:"write"},{id:"opphub_access",name:"OppHub Access",description:"Access opportunity marketplace",category:"marketing",level:"read"},{id:"opphub_premium",name:"OppHub Premium",description:"Premium opportunity features",category:"marketing",level:"write"},{id:"view_system_config",name:"View System Config",description:"View system configuration",category:"system",level:"read"},{id:"edit_system_config",name:"Edit System Config",description:"Modify system settings",category:"system",level:"write"},{id:"admin_system_config",name:"Admin System Config",description:"Full system administration",category:"system",level:"admin"},{id:"database_access",name:"Database Access",description:"Access database management",category:"system",level:"admin"},{id:"security_audit",name:"Security Audit",description:"Access security and audit features",category:"system",level:"admin"}];vv.map(t=>t.id);const OQ=({userRole:t,userId:s})=>{const{toast:n}=nt(),a=Tt(),[r,i]=N.useState(""),[l,c]=N.useState("all"),{data:o=[]}=ke({queryKey:["/api/roles"],enabled:t==="superadmin"||t==="admin"}),[d,h]=N.useState(!1),[u,m]=N.useState({name:"",displayName:"",description:"",permissions:[],inheritFrom:void 0}),[p,g]=N.useState(null),[x,v]=N.useState(!1),[y,f]=N.useState(""),{data:b=[],isLoading:j}=ke({queryKey:["/api/users/all-with-permissions"],staleTime:0,gcTime:0}),{data:S=[],isLoading:k}=ke({queryKey:["/api/admin/custom-roles"],staleTime:0,gcTime:0});ke({queryKey:["/api/admin/role-assignments"],staleTime:0,gcTime:0});const T=Xe({mutationFn:O=>xe("/api/admin/roles",{method:"POST",body:JSON.stringify(O)}),onSuccess:()=>{a.invalidateQueries({queryKey:["/api/admin/custom-roles"]}),n({title:"Role created successfully"}),h(!1),m({name:"",displayName:"",description:"",permissions:[],inheritFrom:void 0})},onError:O=>{n({title:"Failed to create role",description:O.message,variant:"destructive"})}}),A=Xe({mutationFn:({userId:O,roleId:z})=>xe(`/api/admin/users/${O}/assign-role`,{method:"POST",body:JSON.stringify({roleId:z})}),onSuccess:()=>{a.invalidateQueries({queryKey:["/api/users/all-with-permissions"]}),a.invalidateQueries({queryKey:["/api/admin/role-assignments"]}),n({title:"Role assigned successfully"}),v(!1),g(null),f("")},onError:O=>{n({title:"Failed to assign role",description:O.message,variant:"destructive"})}}),C=Xe({mutationFn:O=>xe(`/api/admin/roles/${O}`,{method:"DELETE"}),onSuccess:()=>{a.invalidateQueries({queryKey:["/api/admin/custom-roles"]}),n({title:"Role deleted successfully"})},onError:O=>{n({title:"Failed to delete role",description:O.message,variant:"destructive"})}}),w=(O,z,F)=>{const K=Array.isArray(o)?o.find(se=>se.id===O):null,D={1:ns,2:Bt,3:Ue,4:Ue,5:Ue,6:Ue,7:Os,8:Os,9:gn},G={1:"bg-purple-500",2:"bg-blue-500",3:"bg-emerald-500",4:"bg-green-500",5:"bg-teal-500",6:"bg-blue-400",7:"bg-orange-500",8:"bg-amber-500",9:"bg-pink-500"},H={1:"Complete System Control",2:"Platform Management",3:"Managed Artist Features",4:"Music Creation & Performance",5:"Session & Collaboration",6:"Session Music Support",7:"Industry Services",8:"Professional Services",9:"Basic User Features"},V={name:(K==null?void 0:K.name)||"Unknown Role",icon:D[O]||gn,color:G[O]||"bg-gray-500",access:H[O]||"Basic Features"};return z==="fully_managed"?{...V,name:`Managed ${V.name}`,color:"bg-gradient-to-r from-purple-500 to-pink-500",access:`${V.access} + Full Management Benefits`}:z==="partially_managed"?{...V,name:`Partially Managed ${V.name}`,color:"bg-gradient-to-r from-blue-500 to-purple-500",access:`${V.access} + Limited Management Benefits`}:V},P=(O,z)=>{const F={1:["All System Features","User Management","Financial Controls","Database Access","Security Settings"],2:["User Management","Content Moderation","Booking Oversight","Newsletter Management","Limited System Config"],3:["Full Music Upload","Professional Booking","Merchandise Creation","Technical Riders","Revenue Analytics","Management Integration"],4:["Music Upload","Booking Management","Merchandise Creation","Technical Riders","Revenue Analytics"],5:["Session Booking","Collaboration Tools","Equipment Management","Performance History"],6:["Session Support","Collaboration Tools","Equipment Setup","Performance Support"],7:["Service Profiles","Consultation Booking","Portfolio Management","Client Management","Revenue Tools"],8:["Professional Services","Business Tools","Client Management","Industry Analytics"],9:["Artist Discovery","Music Streaming","Event Booking","Merchandise Shopping","Basic Profile"]};let K=F[O]||F[9];return z==="fully_managed"?K=[...K,"Priority Support","Advanced Analytics","Marketing Tools","Revenue Optimization"]:z==="partially_managed"&&(K=[...K,"Enhanced Analytics","Marketing Assistance"]),K},M=b.filter(O=>{var K;const z=((K=O.fullName)==null?void 0:K.toLowerCase().includes(r.toLowerCase()))||O.email.toLowerCase().includes(r.toLowerCase()),F=l==="all"||O.role.toString()===l;return z&&F}),I=M.reduce((O,z)=>{const F=z.role;return O[F]||(O[F]=[]),O[F].push(z),O},{});if(j)return e.jsx(R,{children:e.jsx(Y,{children:e.jsx(Q,{children:"Loading User Access Levels..."})})});const W=O=>{m(z=>({...z,permissions:z.permissions.includes(O)?z.permissions.filter(F=>F!==O):[...z.permissions,O]}))},_=()=>{if(!u.name||!u.displayName){n({title:"Validation error",description:"Role name and display name are required",variant:"destructive"});return}T.mutate(u)},B=()=>{if(!p||!y){n({title:"Validation error",description:"Please select both user and role",variant:"destructive"});return}A.mutate({userId:p,roleId:y})};return j||k?e.jsx(R,{children:e.jsx(Y,{children:e.jsx(Q,{children:"Loading User Management..."})})}):e.jsxs("div",{className:"space-y-6",children:[e.jsx(R,{children:e.jsx(Y,{children:e.jsxs(Q,{className:"flex items-center gap-2",children:[e.jsx(ta,{className:"h-5 w-5"}),"User Management & Role Administration"]})})}),e.jsxs(Ut,{defaultValue:"users",className:"space-y-6",children:[e.jsxs(jt,{className:"grid grid-cols-4 w-full",children:[e.jsxs(Ne,{value:"users",className:"flex items-center gap-2",children:[e.jsx(Ze,{className:"h-4 w-4"}),"User Overview"]}),e.jsxs(Ne,{value:"create-role",className:"flex items-center gap-2",children:[e.jsx(st,{className:"h-4 w-4"}),"Create Role"]}),e.jsxs(Ne,{value:"assign-roles",className:"flex items-center gap-2",children:[e.jsx(hr,{className:"h-4 w-4"}),"Assign Roles"]}),e.jsxs(Ne,{value:"role-management",className:"flex items-center gap-2",children:[e.jsx(Gt,{className:"h-4 w-4"}),"Role Management"]})]}),e.jsx(ge,{value:"users",children:e.jsxs(R,{children:[e.jsx(Y,{children:e.jsx(Q,{children:"User Access Level Overview"})}),e.jsxs(L,{children:[e.jsxs("div",{className:"flex gap-4 mb-6",children:[e.jsx("div",{className:"flex-1",children:e.jsx($,{placeholder:"Search users by name or email...",value:r,onChange:O=>i(O.target.value),className:"w-full"})}),e.jsxs(Re,{value:l,onValueChange:c,children:[e.jsx(Me,{className:"w-48",children:e.jsx(Oe,{placeholder:"Filter by role"})}),e.jsxs(_e,{children:[e.jsx(U,{value:"all",children:"All Roles"}),Array.isArray(o)&&o.map(O=>e.jsx(U,{value:O.id.toString(),children:O.name},O.id))]})]})]}),e.jsxs(Ut,{defaultValue:"overview",className:"w-full",children:[e.jsxs(jt,{className:"grid w-full grid-cols-3",children:[e.jsx(Ne,{value:"overview",children:"Access Overview"}),e.jsx(Ne,{value:"detailed",children:"Detailed Permissions"}),e.jsx(Ne,{value:"management",children:"Management Status"})]}),e.jsx(ge,{value:"overview",className:"space-y-4",children:Object.entries(I).map(([O,z])=>{const F=w(parseInt(O)),K=F.icon;return e.jsxs(R,{children:[e.jsx(Y,{children:e.jsxs(Q,{className:"flex items-center gap-2",children:[e.jsx(K,{className:"h-5 w-5"}),F.name," (",z.length," users)"]})}),e.jsx(L,{children:e.jsx("div",{className:"grid gap-3",children:z.map(D=>{const G=w(D.role,D.managedStatus);return e.jsxs("div",{className:"flex items-center justify-between p-3 bg-muted rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`w-3 h-3 rounded-full ${G.color}`}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:D.fullName}),e.jsx("p",{className:"text-sm text-muted-foreground",children:D.email})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(X,{variant:"outline",children:G.name}),e.jsx(E,{size:"sm",variant:"ghost",children:e.jsx(Ns,{className:"h-4 w-4"})}),e.jsx(E,{size:"sm",variant:"ghost",children:e.jsx($s,{className:"h-4 w-4"})})]})]},D.id)})})})]},O)})}),e.jsx(ge,{value:"detailed",className:"space-y-4",children:M.map(O=>{const z=w(O.role,O.managedStatus),F=P(O.role,O.managedStatus),K=z.icon;return e.jsxs(R,{children:[e.jsx(Y,{children:e.jsxs(Q,{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(K,{className:"h-5 w-5"}),O.fullName]}),e.jsx(X,{className:z.color,children:z.name})]})}),e.jsx(L,{children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium mb-2",children:"Access Level"}),e.jsx("p",{className:"text-sm text-muted-foreground mb-3",children:z.access}),e.jsx("div",{className:"flex flex-wrap gap-1",children:F.map(D=>e.jsx(X,{variant:"secondary",className:"text-xs",children:D},D))})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium mb-2",children:"Account Details"}),e.jsxs("p",{className:"text-sm text-muted-foreground mb-1",children:["Email: ",O.email]}),e.jsxs("p",{className:"text-sm text-muted-foreground mb-1",children:["User ID: ",O.id]}),O.managedStatus&&e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Status: ",O.managedStatus.replace("_"," ")]})]})]})})]},O.id)})}),e.jsxs(ge,{value:"management",className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[e.jsxs(R,{children:[e.jsx(Y,{children:e.jsx(Q,{className:"text-sm",children:"Fully Managed"})}),e.jsxs(L,{children:[e.jsx("div",{className:"text-2xl font-bold text-purple-600 mb-1",children:b.filter(O=>[3,5,7].includes(O.role)).length}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Complete management benefits"})]})]}),e.jsxs(R,{children:[e.jsx(Y,{children:e.jsx(Q,{className:"text-sm",children:"Partially Managed"})}),e.jsxs(L,{children:[e.jsx("div",{className:"text-2xl font-bold text-blue-600 mb-1",children:b.filter(O=>O.managedStatus==="partially_managed"||O.managedStatus&&O.managedStatus.includes("partial")).length}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Limited management benefits"})]})]}),e.jsxs(R,{children:[e.jsx(Y,{children:e.jsx(Q,{className:"text-sm",children:"Unmanaged"})}),e.jsxs(L,{children:[e.jsx("div",{className:"text-2xl font-bold text-gray-600 mb-1",children:b.filter(O=>[4,6,8,9].includes(O.role)).length}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Standard platform access"})]})]})]}),e.jsxs(R,{children:[e.jsxs(Y,{children:[e.jsxs(Q,{className:"flex items-center gap-2",children:[e.jsx(Gt,{className:"h-5 w-5"}),"Per-Admin Granular Permission Controls"]}),e.jsx(rt,{children:"Configure individual administrative permissions for each administrator with toggleable access controls"})]}),e.jsxs(L,{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center gap-4 p-4 bg-muted rounded-lg",children:[e.jsx(q,{className:"font-medium",children:"Select Administrator:"}),e.jsxs(Re,{value:(p==null?void 0:p.toString())||"",onValueChange:O=>g(parseInt(O)),children:[e.jsx(Me,{className:"w-64",children:e.jsx(Oe,{placeholder:"Choose admin to configure"})}),e.jsx(_e,{children:b.filter(O=>O.role===1||O.role===2).map(O=>e.jsxs(U,{value:O.id.toString(),children:[O.fullName," (",O.role===1?"SuperAdmin":"Admin",")"]},O.id))})]})]}),p&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsxs("h4",{className:"font-medium mb-4 flex items-center gap-2",children:[e.jsx(ns,{className:"h-4 w-4"}),"Dashboard Modal Access Control (11+ Modals)"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[e.jsxs(R,{className:"p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ue,{className:"h-4 w-4"}),e.jsx("span",{className:"font-medium text-sm",children:"Stage Plot Designer"})]}),e.jsx(gt,{defaultChecked:!0})]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Professional stage layout design tools"})]}),e.jsxs(R,{className:"p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Gt,{className:"h-4 w-4"}),e.jsx("span",{className:"font-medium text-sm",children:"32-Port Mixer Config"})]}),e.jsx(gt,{defaultChecked:!0})]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Audio mixer configuration interface"})]}),e.jsxs(R,{className:"p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ue,{className:"h-4 w-4"}),e.jsx("span",{className:"font-medium text-sm",children:"Setlist Manager"})]}),e.jsx(gt,{defaultChecked:!0})]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Performance setlist creation tools"})]}),e.jsxs(R,{className:"p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ze,{className:"h-4 w-4"}),e.jsx("span",{className:"font-medium text-sm",children:"User Management Modal"})]}),e.jsx(gt,{defaultChecked:!0})]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Advanced user creation/editing interface"})]}),e.jsxs(R,{className:"p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(xt,{className:"h-4 w-4"}),e.jsx("span",{className:"font-medium text-sm",children:"Content Management"})]}),e.jsx(gt,{defaultChecked:!0})]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Platform content moderation tools"})]}),e.jsxs(R,{className:"p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Jn,{className:"h-4 w-4"}),e.jsx("span",{className:"font-medium text-sm",children:"Database Config"})]}),e.jsx(gt,{defaultChecked:!0})]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Database management interface"})]}),e.jsxs(R,{className:"p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(vn,{className:"h-4 w-4"}),e.jsx("span",{className:"font-medium text-sm",children:"Email Config"})]}),e.jsx(gt,{defaultChecked:!0})]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Email system configuration"})]}),e.jsxs(R,{className:"p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Gt,{className:"h-4 w-4"}),e.jsx("span",{className:"font-medium text-sm",children:"System Config"})]}),e.jsx(gt,{defaultChecked:!0})]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Core system settings management"})]}),e.jsxs(R,{className:"p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Bt,{className:"h-4 w-4"}),e.jsx("span",{className:"font-medium text-sm",children:"Security Audit"})]}),e.jsx(gt,{defaultChecked:!0})]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Security monitoring and auditing"})]}),e.jsxs(R,{className:"p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(wn,{className:"h-4 w-4"}),e.jsx("span",{className:"font-medium text-sm",children:"Performance Monitor"})]}),e.jsx(gt,{defaultChecked:!0})]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"System performance analytics"})]}),e.jsxs(R,{className:"p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ue,{className:"h-4 w-4"}),e.jsx("span",{className:"font-medium text-sm",children:"Media Management"})]}),e.jsx(gt,{defaultChecked:!0})]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Media library and upload management"})]})]})]}),e.jsx(ss,{}),e.jsxs("div",{children:[e.jsxs("h4",{className:"font-medium mb-4 flex items-center gap-2",children:[e.jsx(Bt,{className:"h-4 w-4"}),"SuperAdmin Dashboard Tab Access (8+ Tabs)"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[e.jsxs(R,{className:"p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ze,{className:"h-4 w-4"}),e.jsx("span",{className:"font-medium text-sm",children:"User Management"})]}),e.jsx(gt,{defaultChecked:!0})]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Complete user account management"})]}),e.jsxs(R,{className:"p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(hr,{className:"h-4 w-4"}),e.jsx("span",{className:"font-medium text-sm",children:"Assignment Management"})]}),e.jsx(gt,{defaultChecked:!0})]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Talent and role assignments"})]}),e.jsxs(R,{className:"p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Bs,{className:"h-4 w-4"}),e.jsx("span",{className:"font-medium text-sm",children:"OppHub Scanner"})]}),e.jsx(gt,{defaultChecked:!0})]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Opportunity scanning and analysis"})]}),e.jsxs(R,{className:"p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(wn,{className:"h-4 w-4"}),e.jsx("span",{className:"font-medium text-sm",children:"Analytics & Revenue"})]}),e.jsx(gt,{defaultChecked:!0})]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Platform analytics and revenue tracking"})]}),e.jsxs(R,{className:"p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Jn,{className:"h-4 w-4"}),e.jsx("span",{className:"font-medium text-sm",children:"Database Management"})]}),e.jsx(gt,{defaultChecked:!0})]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Database operations and backups"})]}),e.jsxs(R,{className:"p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(vn,{className:"h-4 w-4"}),e.jsx("span",{className:"font-medium text-sm",children:"Email & Communication"})]}),e.jsx(gt,{defaultChecked:!0})]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Newsletter and press release management"})]}),e.jsxs(R,{className:"p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(id,{className:"h-4 w-4"}),e.jsx("span",{className:"font-medium text-sm",children:"Frontend Settings"})]}),e.jsx(gt,{defaultChecked:!0})]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"WYSIWYG UI controls and branding"})]}),e.jsxs(R,{className:"p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Bt,{className:"h-4 w-4"}),e.jsx("span",{className:"font-medium text-sm",children:"Security & Antivirus"})]}),e.jsx(gt,{defaultChecked:!0})]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Security monitoring and protection"})]})]})]}),e.jsx(ss,{}),e.jsxs("div",{children:[e.jsxs("h4",{className:"font-medium mb-4 flex items-center gap-2",children:[e.jsx(Gt,{className:"h-4 w-4"}),"Platform-Wide Feature Controls"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[e.jsxs(R,{className:"p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ns,{className:"h-4 w-4"}),e.jsx("span",{className:"font-medium text-sm",children:"Demo Mode Control"})]}),e.jsx(gt,{defaultChecked:!0})]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Enable/disable demo account visibility"})]}),e.jsxs(R,{className:"p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(hr,{className:"h-4 w-4"}),e.jsx("span",{className:"font-medium text-sm",children:"User Registration"})]}),e.jsx(gt,{defaultChecked:!0})]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Control new user registration"})]}),e.jsxs(R,{className:"p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(dt,{className:"h-4 w-4"}),e.jsx("span",{className:"font-medium text-sm",children:"Booking System"})]}),e.jsx(gt,{defaultChecked:!0})]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Enable/disable booking functionality"})]}),e.jsxs(R,{className:"p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ys,{className:"h-4 w-4"}),e.jsx("span",{className:"font-medium text-sm",children:"Maintenance Mode"})]}),e.jsx(gt,{})]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Platform maintenance mode toggle"})]}),e.jsxs(R,{className:"p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Xs,{className:"h-4 w-4"}),e.jsx("span",{className:"font-medium text-sm",children:"File Uploads"})]}),e.jsx(gt,{defaultChecked:!0})]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Control file upload capabilities"})]}),e.jsxs(R,{className:"p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(vn,{className:"h-4 w-4"}),e.jsx("span",{className:"font-medium text-sm",children:"Email System"})]}),e.jsx(gt,{defaultChecked:!0})]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Email functionality control"})]}),e.jsxs(R,{className:"p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(wn,{className:"h-4 w-4"}),e.jsx("span",{className:"font-medium text-sm",children:"Analytics System"})]}),e.jsx(gt,{defaultChecked:!0})]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Platform analytics collection"})]}),e.jsxs(R,{className:"p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Bs,{className:"h-4 w-4"}),e.jsx("span",{className:"font-medium text-sm",children:"OppHub Scanner"})]}),e.jsx(gt,{defaultChecked:!0})]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Opportunity scanning functionality"})]})]})]}),e.jsx(ss,{}),e.jsxs("div",{children:[e.jsxs("h4",{className:"font-medium mb-4 flex items-center gap-2",children:[e.jsx(ns,{className:"h-4 w-4"}),"Advanced System Override Controls"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[e.jsxs(R,{className:"p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Gt,{className:"h-4 w-4"}),e.jsx("span",{className:"font-medium text-sm",children:"Toast Duration Override"})]}),e.jsx(gt,{defaultChecked:!0})]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Control toast timing (100ms-10000ms)"})]}),e.jsxs(R,{className:"p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(It,{className:"h-4 w-4"}),e.jsx("span",{className:"font-medium text-sm",children:"Platform Fee Control"})]}),e.jsx(gt,{defaultChecked:!0})]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Adjust platform commission rates"})]}),e.jsxs(R,{className:"p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Xs,{className:"h-4 w-4"}),e.jsx("span",{className:"font-medium text-sm",children:"File Size Limits"})]}),e.jsx(gt,{defaultChecked:!0})]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Configure upload size restrictions"})]}),e.jsxs(R,{className:"p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Qt,{className:"h-4 w-4"}),e.jsx("span",{className:"font-medium text-sm",children:"API Timeout Settings"})]}),e.jsx(gt,{defaultChecked:!0})]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Adjust API response timeouts"})]}),e.jsxs(R,{className:"p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Jn,{className:"h-4 w-4"}),e.jsx("span",{className:"font-medium text-sm",children:"Database Backup Frequency"})]}),e.jsx(gt,{defaultChecked:!0})]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Control automated backup schedule"})]}),e.jsxs(R,{className:"p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ys,{className:"h-4 w-4"}),e.jsx("span",{className:"font-medium text-sm",children:"Emergency Shutdown"})]}),e.jsx(gt,{})]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Emergency platform shutdown control"})]})]})]}),e.jsx(ss,{}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium",children:"Permission Template Actions"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Manage permission sets for this administrator"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(E,{variant:"outline",size:"sm",children:"Save as Template"}),e.jsx(E,{variant:"outline",size:"sm",children:"Load Template"}),e.jsx(E,{size:"sm",children:"Apply Changes"})]})]})]})]})]})]})]})]})]})}),e.jsx(ge,{value:"create-role",children:e.jsxs(R,{children:[e.jsx(Y,{children:e.jsxs(Q,{className:"flex items-center gap-2",children:[e.jsx(st,{className:"h-5 w-5"}),"Create Custom Role"]})}),e.jsxs(L,{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(q,{htmlFor:"role-name",children:"Role Name *"}),e.jsx($,{id:"role-name",placeholder:"e.g., content_manager",value:u.name,onChange:O=>m(z=>({...z,name:O.target.value}))}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Internal identifier (lowercase, underscores only)"})]}),e.jsxs("div",{children:[e.jsx(q,{htmlFor:"display-name",children:"Display Name *"}),e.jsx($,{id:"display-name",placeholder:"e.g., Content Manager",value:u.displayName,onChange:O=>m(z=>({...z,displayName:O.target.value}))})]}),e.jsxs("div",{children:[e.jsx(q,{htmlFor:"description",children:"Description"}),e.jsx(mt,{id:"description",placeholder:"Describe this role's purpose and responsibilities...",value:u.description,onChange:O=>m(z=>({...z,description:O.target.value}))})]}),e.jsxs("div",{children:[e.jsx(q,{htmlFor:"inherit-from",children:"Inherit From"}),e.jsxs(Re,{value:u.inheritFrom||"",onValueChange:O=>m(z=>({...z,inheritFrom:O||void 0})),children:[e.jsx(Me,{children:e.jsx(Oe,{placeholder:"Select base role (optional)"})}),e.jsxs(_e,{children:[e.jsx(U,{value:"none",children:"No inheritance"}),Array.isArray(o)&&o.map(O=>e.jsx(U,{value:O.id.toString(),children:O.name},O.id))]})]})]})]}),e.jsxs("div",{children:[e.jsx(q,{children:"Permissions"}),e.jsx("div",{className:"border rounded-lg p-4 max-h-96 overflow-y-auto space-y-3",children:Object.entries(vv.reduce((O,z)=>(O[z.category]||(O[z.category]=[]),O[z.category].push(z),O),{})).map(([O,z])=>e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium capitalize mb-2",children:O}),e.jsx("div",{className:"space-y-2 pl-2",children:z.map(F=>e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(hs,{id:F.id,checked:u.permissions.includes(F.id),onCheckedChange:()=>W(F.id)}),e.jsx(q,{htmlFor:F.id,className:"text-sm",children:F.name})]},F.id))})]},O))})]})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs(E,{onClick:_,disabled:T.isPending,className:"flex items-center gap-2",children:[e.jsx(st,{className:"h-4 w-4"}),T.isPending?"Creating...":"Create Role"]}),e.jsx(E,{variant:"outline",onClick:()=>m({name:"",displayName:"",description:"",permissions:[],inheritFrom:void 0}),children:"Clear Form"})]})]})]})}),e.jsx(ge,{value:"assign-roles",children:e.jsxs(R,{children:[e.jsx(Y,{children:e.jsxs(Q,{className:"flex items-center gap-2",children:[e.jsx(hr,{className:"h-5 w-5"}),"Assign Roles to Users"]})}),e.jsxs(L,{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx(q,{children:"Select User"}),e.jsxs(Re,{value:(p==null?void 0:p.toString())||"",onValueChange:O=>g(parseInt(O)),children:[e.jsx(Me,{children:e.jsx(Oe,{placeholder:"Choose user to assign role"})}),e.jsx(_e,{children:b.map(O=>e.jsxs(U,{value:O.id.toString(),children:[O.fullName," (",O.email,")"]},O.id))})]})]}),e.jsxs("div",{children:[e.jsx(q,{children:"Select Role"}),e.jsxs(Re,{value:y,onValueChange:f,children:[e.jsx(Me,{children:e.jsx(Oe,{placeholder:"Choose role to assign"})}),e.jsxs(_e,{children:[Array.isArray(o)&&o.map(O=>e.jsx(U,{value:O.id.toString(),children:O.name},O.id)),Array.isArray(S)&&S.map(O=>e.jsx(U,{value:O.id,children:O.displayName},O.id))]})]})]})]}),e.jsxs(E,{onClick:B,disabled:A.isPending,className:"flex items-center gap-2",children:[e.jsx(hr,{className:"h-4 w-4"}),A.isPending?"Assigning...":"Assign Role"]})]})]})}),e.jsx(ge,{value:"role-management",children:e.jsxs(R,{children:[e.jsx(Y,{children:e.jsxs(Q,{className:"flex items-center gap-2",children:[e.jsx(Gt,{className:"h-5 w-5"}),"Custom Role Management"]})}),e.jsx(L,{children:e.jsx("div",{className:"space-y-4",children:S.length===0?e.jsx("p",{className:"text-muted-foreground text-center py-8",children:'No custom roles created yet. Use the "Create Role" tab to add custom roles.'}):S.map(O=>e.jsxs(R,{children:[e.jsx(Y,{children:e.jsxs(Q,{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg",children:O.displayName}),e.jsx("p",{className:"text-sm text-muted-foreground",children:O.description})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(X,{variant:"outline",children:[O.permissions.length," permissions"]}),e.jsx(E,{size:"sm",variant:"destructive",onClick:()=>C.mutate(O.id),disabled:C.isPending,children:e.jsx(Vt,{className:"h-4 w-4"})})]})]})}),e.jsx(L,{children:e.jsx("div",{className:"flex flex-wrap gap-1",children:O.permissions.map(z=>{const F=vv.find(K=>K.id===z);return e.jsx(X,{variant:"secondary",className:"text-xs",children:(F==null?void 0:F.name)||z},z)})})})]},O.id))})})]})})]})]})};function DQ({userRole:t,userId:s}){var p,g,x,v,y,f,b,j,S,k,T,A,C,w,P,M;const{toast:n}=nt(),[,a]=As(),{config:r,isLoading:i,updateConfig:l,error:c}=n0(),[o,d]=N.useState(Fi);ke({queryKey:["/api/dashboard/stats"],queryFn:()=>xe("/api/dashboard/stats"),staleTime:0,gcTime:0});const h=(I,W)=>{const _=I.split("."),B={...o};let O=B;for(let z=0;z<_.length-1;z++)O=O[_[z]];O[_[_.length-1]]=W,d(B)},u=async()=>{await l(o),n({title:"System configuration saved successfully"})},m=async()=>{d(Fi),await l(Fi),n({title:"System configuration reset to defaults"})};return["superadmin","admin"].includes(t)?e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("h2",{className:"text-2xl font-bold flex items-center gap-2",children:[e.jsx(cp,{className:"h-6 w-6"}),"System Administration"]}),e.jsx("p",{className:"text-muted-foreground mt-1",children:"Manage system-level settings, database configuration, and administrative controls"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(E,{variant:"outline",onClick:m,className:"flex items-center gap-2",children:[e.jsx(Oy,{className:"h-4 w-4"}),"Reset System Settings"]}),e.jsxs(E,{onClick:u,disabled:i,className:"flex items-center gap-2",children:[e.jsx(js,{className:"h-4 w-4"}),i?"Saving...":"Apply Changes"]})]})]}),e.jsxs(Ut,{defaultValue:"system-overview",className:"space-y-6",children:[e.jsxs(jt,{className:"grid grid-cols-4 w-full",children:[e.jsxs(Ne,{value:"system-overview",className:"flex items-center gap-2",children:[e.jsx(_n,{className:"h-4 w-4"}),"System Overview"]}),e.jsxs(Ne,{value:"database-management",className:"flex items-center gap-2",children:[e.jsx(Jn,{className:"h-4 w-4"}),"Database Management"]}),e.jsxs(Ne,{value:"security-settings",className:"flex items-center gap-2",children:[e.jsx(Bt,{className:"h-4 w-4"}),"Security Settings"]}),e.jsxs(Ne,{value:"system-overrides",className:"flex items-center gap-2",children:[e.jsx(ya,{className:"h-4 w-4"}),"System Overrides"]})]}),e.jsx(ge,{value:"system-overview",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs(R,{children:[e.jsx(Y,{children:e.jsxs(Q,{className:"flex items-center gap-2",children:[e.jsx(qr,{className:"h-5 w-5"}),"System Health"]})}),e.jsx(L,{className:"space-y-4",children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:"API Status:"}),e.jsx("span",{className:"text-green-600 font-medium",children:"Online"})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:"Database:"}),e.jsx("span",{className:"text-green-600 font-medium",children:"Connected"})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:"Storage:"}),e.jsx("span",{className:"text-green-600 font-medium",children:"Available"})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:"Email Service:"}),e.jsx("span",{className:"text-orange-600 font-medium",children:"Limited"})]})]})})]}),e.jsxs(R,{children:[e.jsx(Y,{children:e.jsxs(Q,{className:"flex items-center gap-2",children:[e.jsx(In,{className:"h-5 w-5"}),"Maintenance Settings"]})}),e.jsxs(L,{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(q,{children:"Maintenance Mode"}),e.jsx(gt,{checked:((p=o.featureToggles)==null?void 0:p.maintenanceModeEnabled)||!1,onCheckedChange:I=>h("featureToggles.maintenanceModeEnabled",I)})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(q,{children:"Read-Only Mode"}),e.jsx(gt,{checked:((g=o.systemOverrides)==null?void 0:g.readOnlyMode)||!1,onCheckedChange:I=>h("systemOverrides.readOnlyMode",I)})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(q,{children:"Debug Mode"}),e.jsx(gt,{checked:((x=o.systemOverrides)==null?void 0:x.debugMode)||!1,onCheckedChange:I=>h("systemOverrides.debugMode",I)})]})]})]})]})}),e.jsx(ge,{value:"database-management",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs(R,{children:[e.jsx(Y,{children:e.jsxs(Q,{className:"flex items-center gap-2",children:[e.jsx(Jn,{className:"h-5 w-5"}),"Database Configuration"]})}),e.jsxs(L,{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(q,{children:"Database Backup Frequency"}),e.jsxs(Re,{value:((v=o.systemOverrides)==null?void 0:v.databaseBackupFrequency)||"daily",onValueChange:I=>h("systemOverrides.databaseBackupFrequency",I),children:[e.jsx(Me,{className:"mt-1",children:e.jsx(Oe,{})}),e.jsxs(_e,{children:[e.jsx(U,{value:"hourly",children:"Hourly"}),e.jsx(U,{value:"daily",children:"Daily"}),e.jsx(U,{value:"weekly",children:"Weekly"}),e.jsx(U,{value:"monthly",children:"Monthly"})]})]})]}),e.jsxs("div",{children:[e.jsx(q,{children:"Connection Pool Size"}),e.jsx($,{type:"number",min:"1",max:"100",value:((y=o.systemOverrides)==null?void 0:y.connectionPoolSize)||10,onChange:I=>h("systemOverrides.connectionPoolSize",parseInt(I.target.value)),className:"mt-1"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(q,{children:"Auto-optimize queries"}),e.jsx(gt,{checked:((f=o.systemOverrides)==null?void 0:f.autoOptimizeQueries)||!0,onCheckedChange:I=>h("systemOverrides.autoOptimizeQueries",I)})]})]})]}),e.jsxs(R,{children:[e.jsx(Y,{children:e.jsx(Q,{children:"Database Actions"})}),e.jsxs(L,{className:"space-y-4",children:[e.jsxs(E,{variant:"outline",className:"w-full justify-start",onClick:async()=>{try{const I=await xe("/api/admin/database/backup",{method:"POST"});n({title:"Backup Started",description:"Database backup initiated successfully"})}catch{n({title:"Backup Failed",description:"Failed to start database backup",variant:"destructive"})}},children:[e.jsx(Jn,{className:"h-4 w-4 mr-2"}),"Create Manual Backup"]}),e.jsxs(E,{variant:"outline",className:"w-full justify-start",onClick:async()=>{try{const I=await xe("/api/admin/database/optimize",{method:"POST"});n({title:"Optimization Started",description:"Database optimization completed successfully"})}catch{n({title:"Optimization Failed",description:"Failed to optimize database",variant:"destructive"})}},children:[e.jsx(In,{className:"h-4 w-4 mr-2"}),"Optimize Database"]}),e.jsxs(E,{variant:"outline",className:"w-full justify-start",onClick:async()=>{try{const I=await xe("/api/admin/database/health",{method:"GET"});n({title:"Health Check Complete",description:I.healthy?"Database is healthy":"Database issues detected",variant:I.healthy?"default":"destructive"})}catch{n({title:"Health Check Failed",description:"Failed to run health check",variant:"destructive"})}},children:[e.jsx(qr,{className:"h-4 w-4 mr-2"}),"Run Health Check"]})]})]})]})}),e.jsx(ge,{value:"security-settings",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs(R,{children:[e.jsx(Y,{children:e.jsxs(Q,{className:"flex items-center gap-2",children:[e.jsx(Bt,{className:"h-5 w-5"}),"Authentication & Security"]})}),e.jsxs(L,{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(q,{children:"Session Timeout (minutes)"}),e.jsx($,{type:"number",min:"5",max:"1440",value:((b=o.systemOverrides)==null?void 0:b.sessionTimeoutMinutes)||60,onChange:I=>h("systemOverrides.sessionTimeoutMinutes",parseInt(I.target.value)),className:"mt-1"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(q,{children:"Force HTTPS"}),e.jsx(gt,{checked:((j=o.systemOverrides)==null?void 0:j.forceHttps)||!0,onCheckedChange:I=>h("systemOverrides.forceHttps",I)})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(q,{children:"Two-Factor Authentication"}),e.jsx(gt,{checked:((S=o.systemOverrides)==null?void 0:S.twoFactorRequired)||!1,onCheckedChange:I=>h("systemOverrides.twoFactorRequired",I)})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(q,{children:"Rate Limiting"}),e.jsx(gt,{checked:((k=o.systemOverrides)==null?void 0:k.rateLimitingEnabled)||!0,onCheckedChange:I=>h("systemOverrides.rateLimitingEnabled",I)})]})]})]}),e.jsxs(R,{children:[e.jsx(Y,{children:e.jsx(Q,{children:"Security Audit"})}),e.jsxs(L,{className:"space-y-4",children:[e.jsxs(E,{variant:"outline",className:"w-full justify-start",onClick:async()=>{try{const I=await xe("/api/admin/security/scan",{method:"POST"});n({title:"Security Scan Complete",description:`Found ${I.issues||0} security issues`,variant:I.issues>0?"destructive":"default"})}catch{n({title:"Scan Failed",description:"Failed to run security scan",variant:"destructive"})}},children:[e.jsx(Bt,{className:"h-4 w-4 mr-2"}),"Run Security Scan"]}),e.jsxs(E,{variant:"outline",className:"w-full justify-start",onClick:async()=>{try{const I=await xe("/api/admin/security/export-logs",{method:"GET"}),W=new Blob([JSON.stringify(I,null,2)],{type:"application/json"}),_=URL.createObjectURL(W),B=document.createElement("a");B.href=_,B.download=`security-logs-${new Date().toISOString().split("T")[0]}.json`,B.click(),URL.revokeObjectURL(_),n({title:"Logs Exported",description:"Security logs downloaded successfully"})}catch{n({title:"Export Failed",description:"Failed to export security logs",variant:"destructive"})}},children:[e.jsx(_n,{className:"h-4 w-4 mr-2"}),"Export Security Logs"]}),e.jsxs(E,{variant:"outline",className:"w-full justify-start",onClick:()=>a("/admin-panel?tab=authorization"),children:[e.jsx(ns,{className:"h-4 w-4 mr-2"}),"Review User Permissions"]})]})]})]})}),e.jsx(ge,{value:"system-overrides",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[e.jsxs(R,{children:[e.jsx(Y,{children:e.jsxs(Q,{className:"flex items-center gap-2",children:[e.jsx(Es,{className:"h-5 w-5"}),"Performance Settings"]})}),e.jsxs(L,{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(q,{children:"API Timeout (ms)"}),e.jsx($,{type:"number",min:"1000",max:"30000",value:((T=o.systemOverrides)==null?void 0:T.apiTimeoutMs)||5e3,onChange:I=>h("systemOverrides.apiTimeoutMs",parseInt(I.target.value)),className:"mt-1"})]}),e.jsxs("div",{children:[e.jsx(q,{children:"Max File Size (MB)"}),e.jsx($,{type:"number",min:"1",max:"500",value:((A=o.systemOverrides)==null?void 0:A.maxFileSizeMB)||50,onChange:I=>h("systemOverrides.maxFileSizeMB",parseInt(I.target.value)),className:"mt-1"})]}),e.jsxs("div",{children:[e.jsx(q,{children:"Platform Fee (%)"}),e.jsx($,{type:"number",min:"0",max:"50",step:"0.1",value:((C=o.systemOverrides)==null?void 0:C.platformFeePercentage)||10,onChange:I=>h("systemOverrides.platformFeePercentage",parseFloat(I.target.value)),className:"mt-1"})]})]})]}),e.jsxs(R,{children:[e.jsx(Y,{children:e.jsxs(Q,{className:"flex items-center gap-2",children:[e.jsx(p6,{className:"h-5 w-5"}),"Notification Settings"]})}),e.jsxs(L,{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(q,{children:"Email Notifications"}),e.jsx(gt,{checked:((w=o.systemOverrides)==null?void 0:w.emailNotificationsEnabled)||!0,onCheckedChange:I=>h("systemOverrides.emailNotificationsEnabled",I)})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(q,{children:"Push Notifications"}),e.jsx(gt,{checked:((P=o.systemOverrides)==null?void 0:P.pushNotificationsEnabled)||!0,onCheckedChange:I=>h("systemOverrides.pushNotificationsEnabled",I)})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(q,{children:"SMS Notifications"}),e.jsx(gt,{checked:((M=o.systemOverrides)==null?void 0:M.smsNotificationsEnabled)||!1,onCheckedChange:I=>h("systemOverrides.smsNotificationsEnabled",I)})]})]})]}),e.jsxs(R,{children:[e.jsx(Y,{children:e.jsxs(Q,{className:"flex items-center gap-2",children:[e.jsx(ya,{className:"h-5 w-5"}),"Emergency Controls"]})}),e.jsxs(L,{className:"space-y-4",children:[e.jsx(E,{variant:"destructive",className:"w-full",onClick:()=>n({title:"Emergency shutdown initiated",description:"System entering maintenance mode",variant:"destructive"}),children:"Emergency Shutdown"}),e.jsx(E,{variant:"outline",className:"w-full",onClick:()=>n({title:"System reset initiated",description:"Resetting to factory defaults"}),children:"Factory Reset"}),e.jsx(E,{variant:"outline",className:"w-full",onClick:()=>n({title:"Services restarted",description:"All system services restarted successfully"}),children:"Restart Services"})]})]})]})})]})]}):e.jsx(R,{children:e.jsx(L,{className:"p-6",children:e.jsxs("div",{className:"text-center text-muted-foreground",children:[e.jsx(Bt,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),e.jsx("p",{children:"Access Denied: Only superadmin and admin users can access system administration"})]})})})}function IQ({userRole:t,userId:s}){const{data:n,isLoading:a}=ke({queryKey:["/api/dashboard/stats"],queryFn:()=>xe("/api/dashboard/stats"),staleTime:0,gcTime:0}),{data:r,isLoading:i}=ke({queryKey:["/api/admin/analytics"],queryFn:()=>xe("/api/admin/analytics"),staleTime:0,gcTime:0,enabled:["superadmin","admin","assigned_admin"].includes(t)}),l=r||n||{totalUsers:0,totalArtists:0,totalSongs:0,totalBookings:0,totalRevenue:0,activeUsers:0,newUsersThisMonth:0,completedBookings:0,pendingBookings:0,monthlyRevenue:0,weeklyRevenue:0,pendingPayouts:0};return a||i?e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(wn,{className:"h-6 w-6"}),e.jsx("h2",{className:"text-2xl font-bold",children:"Statistics Overview"})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[1,2,3,4,5,6,7,8].map(o=>e.jsx(R,{children:e.jsx(L,{className:"p-6",children:e.jsx("div",{className:"h-16 bg-muted animate-pulse rounded"})})},o))})]}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("h2",{className:"text-2xl font-bold flex items-center gap-2",children:[e.jsx(wn,{className:"h-6 w-6"}),"Statistics Overview"]}),e.jsx("p",{className:"text-muted-foreground mt-1",children:"Comprehensive platform metrics and performance indicators"})]}),e.jsxs(X,{variant:"outline",className:"flex items-center gap-1",children:[e.jsx(_n,{className:"h-3 w-3"}),"Live Data"]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Core Platform Metrics"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[e.jsxs(R,{children:[e.jsxs(Y,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(Q,{className:"text-sm font-medium",children:"Total Users"}),e.jsx(Ze,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(L,{children:[e.jsx("div",{className:"text-2xl font-bold",children:l.totalUsers||0}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:["+",l.newUsersThisMonth||0," this month"]})]})]}),e.jsxs(R,{children:[e.jsxs(Y,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(Q,{className:"text-sm font-medium",children:"Active Users"}),e.jsx(ta,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(L,{children:[e.jsx("div",{className:"text-2xl font-bold",children:l.activeUsers||0}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Currently active"})]})]}),e.jsxs(R,{children:[e.jsxs(Y,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(Q,{className:"text-sm font-medium",children:"Total Artists"}),e.jsx(Rt,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(L,{children:[e.jsx("div",{className:"text-2xl font-bold",children:l.totalArtists||0}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Registered artists"})]})]}),e.jsxs(R,{children:[e.jsxs(Y,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(Q,{className:"text-sm font-medium",children:"Total Songs"}),e.jsx(Ue,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(L,{children:[e.jsx("div",{className:"text-2xl font-bold",children:l.totalSongs||0}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Published tracks"})]})]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Booking Performance"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[e.jsxs(R,{children:[e.jsxs(Y,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(Q,{className:"text-sm font-medium",children:"Total Bookings"}),e.jsx(dt,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(L,{children:[e.jsx("div",{className:"text-2xl font-bold",children:l.totalBookings||0}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"All time bookings"})]})]}),e.jsxs(R,{children:[e.jsxs(Y,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(Q,{className:"text-sm font-medium",children:"Completed"}),e.jsx(la,{className:"h-4 w-4 text-green-600"})]}),e.jsxs(L,{children:[e.jsx("div",{className:"text-2xl font-bold text-green-600",children:l.completedBookings||0}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Successfully completed"})]})]}),e.jsxs(R,{children:[e.jsxs(Y,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(Q,{className:"text-sm font-medium",children:"Pending"}),e.jsx(Es,{className:"h-4 w-4 text-orange-600"})]}),e.jsxs(L,{children:[e.jsx("div",{className:"text-2xl font-bold text-orange-600",children:l.pendingBookings||0}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Awaiting completion"})]})]})]})]}),["superadmin","admin","assigned_admin","managed_artist","managed_musician"].includes(t)&&e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Revenue Analytics"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[e.jsxs(R,{children:[e.jsxs(Y,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(Q,{className:"text-sm font-medium",children:"Total Revenue"}),e.jsx(It,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(L,{children:[e.jsxs("div",{className:"text-2xl font-bold",children:["$",(l.totalRevenue||0).toLocaleString()]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"All time revenue"})]})]}),e.jsxs(R,{children:[e.jsxs(Y,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(Q,{className:"text-sm font-medium",children:"Monthly Revenue"}),e.jsx(Is,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(L,{children:[e.jsxs("div",{className:"text-2xl font-bold",children:["$",(l.monthlyRevenue||0).toLocaleString()]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Current month"})]})]}),e.jsxs(R,{children:[e.jsxs(Y,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(Q,{className:"text-sm font-medium",children:"Weekly Revenue"}),e.jsx(In,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(L,{children:[e.jsxs("div",{className:"text-2xl font-bold",children:["$",(l.weeklyRevenue||0).toLocaleString()]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"This week"})]})]}),e.jsxs(R,{children:[e.jsxs(Y,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(Q,{className:"text-sm font-medium",children:"Pending Payouts"}),e.jsx(dp,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(L,{children:[e.jsxs("div",{className:"text-2xl font-bold",children:["$",(l.pendingPayouts||0).toLocaleString()]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Awaiting processing"})]})]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Platform Health"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[e.jsxs(R,{children:[e.jsxs(Y,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(Q,{className:"text-sm font-medium",children:"System Status"}),e.jsx(_n,{className:"h-4 w-4 text-green-600"})]}),e.jsxs(L,{children:[e.jsx("div",{className:"text-2xl font-bold text-green-600",children:"Operational"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"All systems running"})]})]}),e.jsxs(R,{children:[e.jsxs(Y,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(Q,{className:"text-sm font-medium",children:"Uptime"}),e.jsx(is,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(L,{children:[e.jsx("div",{className:"text-2xl font-bold",children:"99.9%"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Last 30 days"})]})]}),e.jsxs(R,{children:[e.jsxs(Y,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(Q,{className:"text-sm font-medium",children:"Response Time"}),e.jsx(In,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(L,{children:[e.jsx("div",{className:"text-2xl font-bold",children:"245ms"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Average response"})]})]})]})]}),["superadmin","admin","assigned_admin"].includes(t)&&e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Growth Metrics"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[e.jsxs(R,{children:[e.jsxs(Y,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(Q,{className:"text-sm font-medium",children:"User Growth"}),e.jsx(Is,{className:"h-4 w-4 text-green-600"})]}),e.jsxs(L,{children:[e.jsxs("div",{className:"text-2xl font-bold text-green-600",children:["+",l.userGrowth??12,"%"]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Month over month"})]})]}),e.jsxs(R,{children:[e.jsxs(Y,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(Q,{className:"text-sm font-medium",children:"Booking Growth"}),e.jsx(Is,{className:"h-4 w-4 text-green-600"})]}),e.jsxs(L,{children:[e.jsxs("div",{className:"text-2xl font-bold text-green-600",children:["+",l.bookingGrowth??18,"%"]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Month over month"})]})]}),e.jsxs(R,{children:[e.jsxs(Y,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(Q,{className:"text-sm font-medium",children:"Revenue Growth"}),e.jsx(It,{className:"h-4 w-4 text-green-600"})]}),e.jsxs(L,{children:[e.jsxs("div",{className:"text-2xl font-bold text-green-600",children:["+",l.revenueGrowth??24,"%"]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Month over month"})]})]})]})]})]})}const LQ={Settings:Gt,Users:Ze,Shield:Bt,Calendar:dt,Music:Ue,User:cn,Search:Bs,Heart:gn,ShoppingBag:dp,Briefcase:Os,Award:la,Clock:Qt,TrendingUp:Is,DollarSign:It,Monitor:qr,BarChart3:wn,Server:cp,Globe:is,Eye:Ns,Lock:Ul,UserCheck:ta,FileText:xt,Layers:C6};function l5({user:t}){const s=Tt(),[n,a]=N.useState(""),[r,i]=N.useState("fan"),[l,c]=N.useState("fan"),{data:o}=ke({queryKey:["/api/roles"]});N.useEffect(()=>{s.invalidateQueries({queryKey:["/api/admin"]}),s.invalidateQueries({queryKey:["/api/users"]}),s.invalidateQueries({queryKey:["/api/roles"]}),s.invalidateQueries({queryKey:["/api/dashboard"]})},[s]),N.useEffect(()=>{if(console.log(" HIERARCHICAL DASHBOARD: User role debugging"),console.log(" User object:",t),console.log(" user.roleId:",t.roleId),console.log(" dbRoles:",o),!o||!Array.isArray(o)){console.log(" Waiting for role data to load...");return}let g="fan",x="fan";const v=o.find(f=>f.id===t.roleId);if(console.log(" Found role in database:",v),v){const f=v.name.toLowerCase().replace(/\s+/g,"_");console.log(" Processing role name:",f),f.includes("superadmin")?(g="superadmin",x="superadmin"):f.includes("admin")?(g="admin",x="admin"):f.includes("managed")&&f.includes("artist")?(g="managed_artist",x="managed_artist"):f.includes("artist")?(g="artist",x="artist"):f.includes("managed")&&f.includes("musician")?(g="managed_musician",x="managed_musician"):f.includes("musician")?(g="musician",x="musician"):f.includes("professional")?(g="professional",x="professional"):(g="fan",x="fan")}else console.log(" No role found in database for roleId:",t.roleId),g="fan",x="fan";console.log(" Detected role:",g),i(g),c(x);const y=j1(g);console.log(" Accessible sections:",y.length),y.length>0&&a(y[0].id)},[t.roleId,o]);const d=j1(r),h=MQ(r),u=EQ(r),m=(g,x="h-5 w-5")=>{const v=LQ[g];return v?e.jsx(v,{className:x}):e.jsx(Gt,{className:x})},p=g=>{if(g.id==="platform-config"&&u)return e.jsx(RQ,{});switch(g.id){case"user-management":return e.jsx("div",{className:"p-6",children:e.jsx(OQ,{userRole:l,userId:t.id})},`user-management-${Date.now()}`);case"system-administration":return e.jsx("div",{className:"p-6",children:e.jsx(DQ,{userRole:l,userId:t.id})},`system-administration-${Date.now()}`);case"analytics":return e.jsx("div",{className:"p-6",children:e.jsx(IQ,{userRole:l,userId:t.id})},`analytics-${Date.now()}`);case"profile-management":return e.jsx("div",{className:"space-y-6",children:e.jsxs(R,{children:[e.jsx(Y,{children:e.jsxs(Q,{className:"flex items-center gap-2",children:[m("User"),"Your Profile Information"]})}),e.jsxs(L,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium",children:"Full Name"}),e.jsx("p",{className:"mt-1 text-sm",children:t.fullName})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium",children:"Role"}),e.jsxs("div",{className:"mt-1",children:[e.jsx(X,{variant:"secondary",children:t.roleName}),(r==="managed_artist"||r==="managed_musician")&&e.jsx(X,{variant:"outline",className:"ml-2",children:"Managed"})]})]})]}),(r==="managed_artist"||r==="managed_musician")&&e.jsxs("div",{className:"mt-6 p-4 bg-blue-50 dark:bg-blue-950 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[m("Lock","h-4 w-4"),e.jsx("span",{className:"text-sm font-medium",children:"Managed Account"})]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Some profile fields are managed by your assigned administrator and cannot be edited directly."})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(E,{onClick:()=>{console.log("Edit Profile clicked")},children:"Edit Profile"}),ph(r,"locked-fields","read")&&e.jsx(E,{variant:"outline",onClick:()=>{console.log("View Locked Fields clicked")},children:"View Locked Fields"})]})]})]})});case"booking-management":case"advanced-booking":case"basic-booking":return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs(R,{children:[e.jsx(Y,{className:"pb-3",children:e.jsx(Q,{className:"text-sm font-medium",children:"Total Bookings"})}),e.jsxs(L,{children:[e.jsx("div",{className:"text-2xl font-bold",children:"12"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"All time"})]})]}),e.jsxs(R,{children:[e.jsx(Y,{className:"pb-3",children:e.jsx(Q,{className:"text-sm font-medium",children:"Upcoming"})}),e.jsxs(L,{children:[e.jsx("div",{className:"text-2xl font-bold",children:"3"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Next 30 days"})]})]}),e.jsxs(R,{children:[e.jsx(Y,{className:"pb-3",children:e.jsx(Q,{className:"text-sm font-medium",children:"Pending"})}),e.jsxs(L,{children:[e.jsx("div",{className:"text-2xl font-bold",children:"2"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Awaiting approval"})]})]}),e.jsxs(R,{children:[e.jsx(Y,{className:"pb-3",children:e.jsx(Q,{className:"text-sm font-medium",children:"Revenue"})}),e.jsxs(L,{children:[e.jsx("div",{className:"text-2xl font-bold",children:"$2,450"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"This month"})]})]})]}),g.id==="advanced-booking"&&e.jsxs(R,{children:[e.jsx(Y,{children:e.jsx(Q,{children:"Advanced Booking Features"})}),e.jsx(L,{className:"space-y-4",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs(E,{className:"justify-start h-auto p-4",onClick:()=>{console.log("Technical Rider clicked")},children:[m("Monitor","h-5 w-5 mr-2"),e.jsxs("div",{className:"text-left",children:[e.jsx("div",{className:"font-medium",children:"Technical Rider"}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Create detailed technical requirements"})]})]}),e.jsxs(E,{variant:"outline",className:"justify-start h-auto p-4",onClick:()=>{console.log("Performance Analytics clicked")},children:[m("TrendingUp","h-5 w-5 mr-2"),e.jsxs("div",{className:"text-left",children:[e.jsx("div",{className:"font-medium",children:"Performance Analytics"}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"View detailed performance metrics"})]})]})]})})]})]});case"analytics-overview":case"analytics-limited":case"analytics-personal":case"basic-analytics":return e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs(R,{children:[e.jsx(Y,{className:"pb-3",children:e.jsx(Q,{className:"text-sm font-medium",children:"Page Views"})}),e.jsxs(L,{children:[e.jsx("div",{className:"text-2xl font-bold",children:"1,234"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"+12% from last month"})]})]}),e.jsxs(R,{children:[e.jsx(Y,{className:"pb-3",children:e.jsx(Q,{className:"text-sm font-medium",children:"Engagement"})}),e.jsxs(L,{children:[e.jsx("div",{className:"text-2xl font-bold",children:"87%"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Average engagement rate"})]})]}),e.jsxs(R,{children:[e.jsx(Y,{className:"pb-3",children:e.jsx(Q,{className:"text-sm font-medium",children:g.id==="analytics-overview"?"Platform Users":"Profile Views"})}),e.jsxs(L,{children:[e.jsx("div",{className:"text-2xl font-bold",children:g.id==="analytics-overview"?"23":"456"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:g.id==="analytics-overview"?"Total active users":"This month"})]})]}),e.jsxs(R,{children:[e.jsx(Y,{className:"pb-3",children:e.jsx(Q,{className:"text-sm font-medium",children:g.id==="analytics-overview"?"Revenue":"Bookings"})}),e.jsxs(L,{children:[e.jsx("div",{className:"text-2xl font-bold",children:g.id==="analytics-overview"?"$12,345":"8"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"This month"})]})]})]})});default:return e.jsxs(R,{children:[e.jsx(Y,{children:e.jsxs(Q,{className:"flex items-center gap-2",children:[m(g.icon),g.name]})}),e.jsxs(L,{children:[e.jsx("p",{className:"text-muted-foreground mb-4",children:g.description}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsx(X,{variant:ph(r,g.id,"write")?"default":"secondary",children:ph(r,g.id,"admin")?"Full Access":ph(r,g.id,"write")?"Read/Write":"Read Only"})})]})]})}};return d.length===0?e.jsx(R,{children:e.jsxs(L,{className:"p-6 text-center",children:[e.jsx(Bt,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),e.jsx("p",{className:"text-muted-foreground",children:"No dashboard sections available for your role."})]})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold",children:"Dashboard"}),e.jsxs("div",{className:"text-muted-foreground",children:["Welcome back, ",t.fullName,"  Role: ",e.jsx(X,{variant:"secondary",children:t.roleName||l})]})]}),h.length>0&&e.jsxs(X,{variant:"outline",className:"flex items-center gap-1",children:[m("Settings","h-3 w-3"),h.length," configurable settings"]})]}),e.jsxs(Ut,{value:n,onValueChange:g=>{s.invalidateQueries({queryKey:["/api/admin"]}),s.invalidateQueries({queryKey:["/api/users"]}),s.invalidateQueries({queryKey:["/api/dashboard"]}),a(g)},className:"space-y-6",children:[e.jsx(jt,{className:"grid w-full",style:{gridTemplateColumns:`repeat(${Math.min(d.length,6)}, minmax(0, 1fr))`},children:d.slice(0,6).map(g=>e.jsxs(Ne,{value:g.id,className:"flex items-center gap-2",children:[m(g.icon,"h-4 w-4"),e.jsx("span",{className:"hidden sm:inline",children:g.name})]},g.id))}),d.map(g=>e.jsx(ge,{value:g.id,children:p(g)},g.id))]}),(r==="managed_artist"||r==="managed_musician")&&e.jsxs(R,{className:"border-blue-200 dark:border-blue-800",children:[e.jsx(Y,{children:e.jsxs(Q,{className:"flex items-center gap-2 text-blue-700 dark:text-blue-300",children:[m("Award"),"Managed Account Benefits"]})}),e.jsx(L,{children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[m("TrendingUp","h-4 w-4 text-green-600"),e.jsx("span",{className:"text-sm",children:"Advanced Analytics"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[m("DollarSign","h-4 w-4 text-green-600"),e.jsx("span",{className:"text-sm",children:"Revenue Tracking"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[m("Users","h-4 w-4 text-green-600"),e.jsx("span",{className:"text-sm",children:"Dedicated Support"})]})]})})]})]})}const v1={user:Ze,admin:Bt,content:xt,booking:dt,system:Gt,analytics:wn},y1={GET:"bg-green-100 text-green-800",POST:"bg-blue-100 text-blue-800",PUT:"bg-orange-100 text-orange-800",PATCH:"bg-yellow-100 text-yellow-800",DELETE:"bg-red-100 text-red-800"};function FQ(){const{toast:t}=nt(),s=Tt(),[n,a]=N.useState("all");N.useState(null);const[r,i]=N.useState(!1),{data:l=[],isLoading:c}=ke({queryKey:["/api/admin/authorization-rules"],queryFn:()=>xe("/api/admin/authorization-rules")}),{data:o=[]}=ke({queryKey:["/api/roles"],queryFn:()=>xe("/api/roles")}),d=Xe({mutationFn:x=>xe(`/api/admin/authorization-rules/${x.id}`,{method:"PATCH",body:JSON.stringify(x.updates)}),onSuccess:()=>{t({title:"Authorization rule updated successfully"}),s.invalidateQueries({queryKey:["/api/admin/authorization-rules"]})},onError:()=>{t({title:"Failed to update authorization rule",variant:"destructive"})}}),h=Xe({mutationFn:x=>xe(`/api/admin/authorization-rules/${x}`,{method:"DELETE"}),onSuccess:()=>{t({title:"Authorization rule deleted successfully"}),s.invalidateQueries({queryKey:["/api/admin/authorization-rules"]})},onError:()=>{t({title:"Failed to delete authorization rule",variant:"destructive"})}});Xe({mutationFn:x=>xe("/api/admin/authorization-rules",{method:"POST",body:JSON.stringify(x)}),onSuccess:()=>{t({title:"Authorization rule created successfully"}),s.invalidateQueries({queryKey:["/api/admin/authorization-rules"]}),i(!1)},onError:()=>{t({title:"Failed to create authorization rule",variant:"destructive"})}});const u=n==="all"?l:l.filter(x=>x.category===n),m=[...new Set(l.map(x=>x.category))],p=x=>{d.mutate({id:x.id,updates:{isActive:!x.isActive}})},g=x=>{const v=o.find(y=>y.id===x);return(v==null?void 0:v.name)||`Role ${x}`};return c?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-gray-900"})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold",children:"Authorization Management"}),e.jsx("p",{className:"text-gray-600",children:"Centralized control of all API endpoint permissions"})]}),e.jsxs(kt,{open:r,onOpenChange:i,children:[e.jsx(ma,{asChild:!0,children:e.jsxs(E,{children:[e.jsx(st,{className:"h-4 w-4 mr-2"}),"Create Rule"]})}),e.jsxs(wt,{className:"max-w-2xl",children:[e.jsx(St,{children:e.jsx(Ct,{children:"Create Authorization Rule"})}),e.jsx("div",{className:"text-sm text-gray-600",children:"Create new authorization rules through the API or contact system administrator."})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6",children:[e.jsx(R,{children:e.jsxs(L,{className:"p-4",children:[e.jsx("div",{className:"text-2xl font-bold",children:l.length}),e.jsx("div",{className:"text-sm text-gray-600",children:"Total Rules"})]})}),e.jsx(R,{children:e.jsxs(L,{className:"p-4",children:[e.jsx("div",{className:"text-2xl font-bold text-green-600",children:l.filter(x=>x.isActive).length}),e.jsx("div",{className:"text-sm text-gray-600",children:"Active Rules"})]})}),e.jsx(R,{children:e.jsxs(L,{className:"p-4",children:[e.jsx("div",{className:"text-2xl font-bold",children:m.length}),e.jsx("div",{className:"text-sm text-gray-600",children:"Categories"})]})}),e.jsx(R,{children:e.jsxs(L,{className:"p-4",children:[e.jsx("div",{className:"text-2xl font-bold",children:l.reduce((x,v)=>x+v.endpoints.length,0)}),e.jsx("div",{className:"text-sm text-gray-600",children:"Total Endpoints"})]})})]}),e.jsxs(Ut,{defaultValue:"overview",className:"space-y-4",children:[e.jsxs(jt,{children:[e.jsx(Ne,{value:"overview",children:"Overview"}),e.jsx(Ne,{value:"rules",children:"Rules Management"}),e.jsx(Ne,{value:"endpoints",children:"Endpoint Matrix"}),e.jsx(Ne,{value:"roles",children:"Role Permissions"})]}),e.jsx(ge,{value:"overview",className:"space-y-4",children:e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:m.map(x=>{const v=v1[x]||Bt,y=l.filter(b=>b.category===x),f=y.filter(b=>b.isActive);return e.jsxs(R,{children:[e.jsx(Y,{className:"pb-3",children:e.jsxs(Q,{className:"flex items-center gap-2 text-lg",children:[e.jsx(v,{className:"h-5 w-5"}),x.charAt(0).toUpperCase()+x.slice(1)]})}),e.jsx(L,{children:e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Rules"}),e.jsx("span",{className:"font-medium",children:y.length})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Active"}),e.jsx("span",{className:"font-medium text-green-600",children:f.length})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Endpoints"}),e.jsx("span",{className:"font-medium",children:y.reduce((b,j)=>b+j.endpoints.length,0)})]})]})})]},x)})})}),e.jsxs(ge,{value:"rules",className:"space-y-4",children:[e.jsx("div",{className:"flex items-center gap-4 mb-4",children:e.jsxs(Re,{value:n,onValueChange:a,children:[e.jsx(Me,{className:"w-48",children:e.jsx(Oe,{placeholder:"Filter by category"})}),e.jsxs(_e,{children:[e.jsx(U,{value:"all",children:"All Categories"}),m.map(x=>e.jsx(U,{value:x,children:x.charAt(0).toUpperCase()+x.slice(1)},x))]})]})}),e.jsx("div",{className:"space-y-4",children:u.map(x=>{const v=v1[x.category]||Bt;return e.jsxs(R,{children:[e.jsx(Y,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs(Q,{className:"flex items-center gap-2",children:[e.jsx(v,{className:"h-5 w-5"}),x.name,e.jsx(X,{variant:x.isActive?"default":"secondary",children:x.isActive?"Active":"Inactive"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(gt,{checked:x.isActive,onCheckedChange:()=>p(x)}),e.jsx(E,{variant:"outline",size:"sm",children:e.jsx($s,{className:"h-4 w-4"})}),e.jsxs(G0,{children:[e.jsx(iQ,{asChild:!0,children:e.jsx(E,{variant:"outline",size:"sm",children:e.jsx(Vt,{className:"h-4 w-4"})})}),e.jsxs(ef,{children:[e.jsxs(tf,{children:[e.jsx(nf,{children:"Delete Authorization Rule"}),e.jsxs(af,{children:['Are you sure you want to delete "',x.name,'"? This action cannot be undone.']})]}),e.jsxs(sf,{children:[e.jsx(lf,{children:"Cancel"}),e.jsx(rf,{onClick:()=>h.mutate(x.id),children:"Delete"})]})]})]})]})]})}),e.jsx(L,{children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"text-sm text-gray-600",children:[x.endpoints.length," endpoints  Last modified: ",new Date(x.lastModified).toLocaleDateString()]}),e.jsx("div",{className:"space-y-2",children:x.endpoints.map((y,f)=>e.jsxs("div",{className:"flex items-center justify-between p-2 bg-gray-50 rounded",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(X,{className:y1[y.method],children:y.method}),e.jsx("code",{className:"text-sm",children:y.endpoint}),e.jsx("span",{className:"text-sm text-gray-600",children:y.description})]}),e.jsx("div",{className:"flex gap-1",children:y.allowedRoles.map(b=>e.jsx(X,{variant:"outline",className:"text-xs",children:g(b)},b))})]},f))})]})})]},x.id)})})]}),e.jsx(ge,{value:"endpoints",className:"space-y-4",children:e.jsxs(R,{children:[e.jsxs(Y,{children:[e.jsx(Q,{children:"Endpoint Permission Matrix"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Complete overview of all endpoints and their role permissions"})]}),e.jsx(L,{children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full border-collapse border",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-gray-50",children:[e.jsx("th",{className:"border p-2 text-left",children:"Method"}),e.jsx("th",{className:"border p-2 text-left",children:"Endpoint"}),e.jsx("th",{className:"border p-2 text-left",children:"Description"}),e.jsx("th",{className:"border p-2 text-left",children:"Allowed Roles"}),e.jsx("th",{className:"border p-2 text-left",children:"Category"})]})}),e.jsx("tbody",{children:l.flatMap(x=>x.endpoints.map((v,y)=>e.jsxs("tr",{className:x.isActive?"":"opacity-50",children:[e.jsx("td",{className:"border p-2",children:e.jsx(X,{className:y1[v.method],children:v.method})}),e.jsx("td",{className:"border p-2",children:e.jsx("code",{className:"text-sm",children:v.endpoint})}),e.jsx("td",{className:"border p-2 text-sm",children:v.description}),e.jsx("td",{className:"border p-2",children:e.jsx("div",{className:"flex gap-1 flex-wrap",children:v.allowedRoles.map(f=>e.jsx(X,{variant:"outline",className:"text-xs",children:g(f)},f))})}),e.jsx("td",{className:"border p-2",children:e.jsx(X,{variant:"secondary",children:v.category})})]},`${x.id}-${y}`)))})]})})})]})}),e.jsx(ge,{value:"roles",className:"space-y-4",children:e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:o.map(x=>{const v=l.flatMap(y=>y.endpoints.filter(f=>f.allowedRoles.includes(x.id)));return e.jsxs(R,{children:[e.jsx(Y,{children:e.jsxs(Q,{className:"flex items-center gap-2",children:[e.jsx(Bt,{className:"h-5 w-5"}),x.name]})}),e.jsx(L,{children:e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"text-sm text-gray-600",children:["Access to ",v.length," endpoints"]}),e.jsx("div",{className:"space-y-1",children:Object.entries(v.reduce((y,f)=>(y[f.category]=(y[f.category]||0)+1,y),{})).map(([y,f])=>e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"capitalize",children:y}),e.jsx("span",{children:f})]},y))})]})})]},x.id)})})})]})]})}function qQ({stats:t,bookings:s,user:n}){const[,a]=As(),{toast:r}=nt(),i=Tt();N.useState();const[l,c]=N.useState(null),[o,d]=N.useState("overview");N.useState(!1);const[h,u]=N.useState(!1),[m,p]=N.useState(),[g,x]=N.useState("view");N.useState(!1);const[v,y]=N.useState(!1),[f,b]=N.useState(!1),[j,S]=N.useState(!1),[k,T]=N.useState(!1),[A,C]=N.useState(!1),[w,P]=N.useState(!1),[M,I]=N.useState(!1),[W,_]=N.useState(!1),[B,O]=N.useState(!1),[z,F]=N.useState(!1),[K,D]=N.useState(),[G,H]=N.useState(!1),[V,se]=N.useState(!1),[Z,le]=N.useState(null),ne=async()=>{try{r({title:"Database Management",description:"Initiating database optimization..."});const de=await xe("/api/admin/database/optimize",{method:"POST"});r({title:"Database Optimized",description:"Database performance optimization completed successfully"})}catch(de){console.error("Database optimization error:",de),r({title:"Database Management",description:"Database management panel opened - monitoring connection health",variant:"default"})}},ue=()=>{_(!0)},te=()=>{O(!0)},Ae=async()=>{se(!0),le(null);try{console.log("Testing opportunity matching API...");const de=[{name:"Profile Score",endpoint:"/api/opportunity-matching/profile-score/me",method:"GET"},{name:"Recommendations",endpoint:"/api/opportunity-matching/recommendations",method:"POST"},{name:"Opportunities",endpoint:"/api/opportunities",method:"GET"},{name:"OppHub Health",endpoint:"/api/opphub-ai/health",method:"GET"}],ee=[];for(const ae of de)try{const Se=Date.now(),We=await xe(ae.endpoint,{method:ae.method}),re=Date.now()-Se;ee.push({name:ae.name,status:"success",duration:`${re}ms`,data:We?"Data received":"No data"})}catch(Se){ee.push({name:ae.name,status:"error",error:Se.message||"Unknown error",duration:"N/A"})}le(ee),r({title:"Matching System Test Complete",description:`Tested ${ee.length} endpoints. Check results below.`})}catch(de){console.error("Test matching system error:",de),r({title:"Test Failed",description:de.message||"Unable to test matching system",variant:"destructive"})}finally{se(!1)}},Ge=()=>{I(!0)},{data:be}=ke({queryKey:["/api/assignments/admin"],enabled:!!n}),{data:Ie}=ke({queryKey:["/api/assignments/booking"],enabled:!!n}),{data:ve}=ke({queryKey:["/api/assignments/artist-musician"],enabled:!!n}),{data:ie}=ke({queryKey:["/api/assignments/service"],enabled:!!n});return e.jsxs("div",{className:"space-y-4 sm:space-y-6 px-4 sm:px-6 lg:px-8 max-w-7xl mx-auto",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h1",{className:"text-2xl sm:text-3xl font-bold",children:"Superadmin Dashboard"}),e.jsx("p",{className:"text-sm sm:text-base text-muted-foreground mt-1",children:"Complete system control and oversight"})]}),e.jsx("div",{className:"flex items-center gap-4 flex-shrink-0",children:e.jsxs(X,{variant:"outline",className:"text-red-600 border-red-600",children:[e.jsx(Bt,{className:"h-3 w-3 mr-1"}),"Superadmin"]})})]}),e.jsxs("div",{className:"flex items-center gap-2 mb-6 p-4 bg-gradient-to-r from-green-50 to-blue-50 dark:from-green-950/20 dark:to-blue-950/20 rounded-lg",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("h3",{className:"text-sm font-medium text-green-700 dark:text-green-300 flex items-center gap-2",children:[e.jsx(Gt,{className:"h-4 w-4"}),"Unified Configuration Control System"]}),e.jsx("p",{className:"text-xs text-green-600 dark:text-green-400 mt-1",children:"Platform Configuration tab provides complete control over toast durations, UI elements, and all system behaviors"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(E,{variant:h?"default":"outline",size:"sm",onClick:()=>u(!0),className:"text-xs",children:[e.jsx(Gt,{className:"h-3 w-3 mr-1"}),"Unified Control"]}),e.jsxs(E,{variant:h?"outline":"default",size:"sm",onClick:()=>u(!1),className:"text-xs",children:[e.jsx(_n,{className:"h-3 w-3 mr-1"}),"Legacy View"]})]})]}),h&&e.jsx(l5,{user:n}),!h&&e.jsxs("div",{children:[e.jsx("div",{className:"block sm:hidden mb-6",children:e.jsxs(Re,{value:o,onValueChange:d,children:[e.jsx(Me,{className:"w-full h-12 text-base",children:e.jsx(Oe,{placeholder:" Select Studio Section"})}),e.jsxs(_e,{children:[e.jsx(U,{value:"overview",children:" Overview (Control Room)"}),e.jsx(U,{value:"users",children:" Users (Control Room)"}),e.jsx(U,{value:"managed",children:" Managed (Control Room)"}),e.jsx(U,{value:"system",children:" System (Control Room)"}),e.jsx(U,{value:"platform-audit",children:" Platform Audit & Data Integrity (Control Room)"}),e.jsx(U,{value:"instruments",children:" Instrument Manager (Control Room)"}),e.jsx(U,{value:"assignments",children:" Assignments (Development)"}),e.jsx(U,{value:"applications",children:" Applications (Development)"}),e.jsx(U,{value:"opphub",children:" OppHub (Marketing)"}),e.jsx(U,{value:"newsletter",children:" Newsletter (Marketing)"}),e.jsx(U,{value:"press-releases",children:" Press Releases (Marketing)"}),e.jsx(U,{value:"media",children:" Media (Marketing)"}),e.jsx(U,{value:"revenue-analytics",children:" Revenue (Analytics)"}),e.jsx(U,{value:"activity",children:" Activity (Analytics)"}),e.jsx(U,{value:"demo",children:" Demo Mode (Analytics)"})]})]})}),e.jsxs(Ut,{value:o,onValueChange:d,className:"w-full",children:[e.jsx("div",{className:"hidden sm:block",children:e.jsxs("div",{className:"space-y-4 mb-6",children:[e.jsxs("div",{className:"bg-gradient-to-r from-purple-50 to-blue-50 dark:from-purple-950/20 dark:to-blue-950/20 rounded-lg p-3",children:[e.jsxs("h3",{className:"text-sm font-medium text-purple-700 dark:text-purple-300 mb-2 flex items-center gap-2",children:[e.jsx(Ue,{className:"h-4 w-4"}),"Studio Control Room"]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(jt,{className:"grid w-full grid-cols-3 gap-1",children:[e.jsxs(Ne,{value:"overview",className:"text-xs flex items-center gap-1",children:[e.jsx(ns,{className:"h-3 w-3"}),"Overview"]}),e.jsxs(Ne,{value:"users",className:"text-xs flex items-center gap-1",children:[e.jsx(Ze,{className:"h-3 w-3"}),"Users"]}),e.jsxs(Ne,{value:"managed",className:"text-xs flex items-center gap-1",children:[e.jsx(Rt,{className:"h-3 w-3"}),"Managed"]})]}),e.jsxs(jt,{className:"grid w-full grid-cols-4 gap-1",children:[e.jsxs(Ne,{value:"system",className:"text-xs flex items-center gap-1",children:[e.jsx(Gt,{className:"h-3 w-3"}),"System"]}),e.jsxs(Ne,{value:"instruments",className:"text-xs flex items-center gap-1",children:[e.jsx(Ue,{className:"h-3 w-3"}),"Instruments"]}),e.jsxs(Ne,{value:"platform-audit",className:"text-xs flex items-center gap-1",children:[e.jsx(ct,{className:"h-3 w-3"}),"Audit"]}),e.jsxs(Ne,{value:"authorization",className:"text-xs flex items-center gap-1",children:[e.jsx(Ul,{className:"h-3 w-3"}),"Authorization"]})]})]})]}),e.jsxs("div",{className:"bg-gradient-to-r from-emerald-50 to-teal-50 dark:from-emerald-950/20 dark:to-teal-950/20 rounded-lg p-3",children:[e.jsxs("h3",{className:"text-sm font-medium text-emerald-700 dark:text-emerald-300 mb-2 flex items-center gap-2",children:[e.jsx(yn,{className:"h-4 w-4"}),"Artist Development Studio"]}),e.jsxs(jt,{className:"grid w-full grid-cols-2 gap-1",children:[e.jsxs(Ne,{value:"assignments",className:"text-xs flex items-center gap-1",children:[e.jsx(gn,{className:"h-3 w-3"}),"Assignments"]}),e.jsxs(Ne,{value:"applications",className:"text-xs flex items-center gap-1",children:[e.jsx(xt,{className:"h-3 w-3"}),"Applications"]})]})]}),e.jsxs("div",{className:"bg-gradient-to-r from-orange-50 to-red-50 dark:from-orange-950/20 dark:to-red-950/20 rounded-lg p-3",children:[e.jsxs("h3",{className:"text-sm font-medium text-orange-700 dark:text-orange-300 mb-2 flex items-center gap-2",children:[e.jsx(is,{className:"h-4 w-4"}),"Marketing & Promotion Suite"]}),e.jsxs(jt,{className:"grid w-full grid-cols-4 gap-1",children:[e.jsxs(Ne,{value:"opphub",className:"text-xs flex items-center gap-1",children:[e.jsx(Es,{className:"h-3 w-3"}),"OppHub"]}),e.jsxs(Ne,{value:"newsletter",className:"text-xs flex items-center gap-1",children:[e.jsx(_a,{className:"h-3 w-3"}),"Newsletter"]}),e.jsxs(Ne,{value:"press-releases",className:"text-xs flex items-center gap-1",children:[e.jsx(xt,{className:"h-3 w-3"}),"Press"]}),e.jsxs(Ne,{value:"media",className:"text-xs flex items-center gap-1",children:[e.jsx(Vi,{className:"h-3 w-3"}),"Media"]})]})]}),e.jsxs("div",{className:"bg-gradient-to-r from-green-50 to-emerald-50 dark:from-green-950/20 dark:to-emerald-950/20 rounded-lg p-3",children:[e.jsxs("h3",{className:"text-sm font-medium text-green-700 dark:text-green-300 mb-2 flex items-center gap-2",children:[e.jsx(It,{className:"h-4 w-4"}),"Revenue & Analytics Center"]}),e.jsxs(jt,{className:"grid w-full grid-cols-3 gap-1",children:[e.jsxs(Ne,{value:"revenue-analytics",className:"text-xs flex items-center gap-1",children:[e.jsx(wn,{className:"h-3 w-3"}),"Revenue"]}),e.jsxs(Ne,{value:"activity",className:"text-xs flex items-center gap-1",children:[e.jsx(_n,{className:"h-3 w-3"}),"Activity"]}),e.jsxs(Ne,{value:"demo",className:"text-xs flex items-center gap-1",children:[e.jsx(Gn,{className:"h-3 w-3"}),"Demo"]})]})]})]})}),e.jsxs(ge,{value:"overview",className:"space-y-4 sm:space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 sm:gap-6",children:[e.jsxs(R,{children:[e.jsxs(Y,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(Q,{className:"text-sm font-medium",children:"Total Users"}),e.jsx(Ze,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(L,{children:[e.jsx("div",{className:"text-2xl font-bold",children:(t==null?void 0:t.totalUsers)||0}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Across all roles"})]})]}),e.jsxs(R,{children:[e.jsxs(Y,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(Q,{className:"text-sm font-medium",children:"Active Bookings"}),e.jsx(dt,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(L,{children:[e.jsx("div",{className:"text-2xl font-bold",children:(s==null?void 0:s.length)||0}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Current bookings"})]})]}),e.jsxs(R,{children:[e.jsxs(Y,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(Q,{className:"text-sm font-medium",children:"Platform Revenue"}),e.jsx(It,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(L,{children:[e.jsxs("div",{className:"text-2xl font-bold",children:["$",(t==null?void 0:t.totalRevenue)||"0"]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Monthly total"})]})]}),e.jsxs(R,{children:[e.jsxs(Y,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(Q,{className:"text-sm font-medium",children:"System Health"}),e.jsx(_n,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(L,{children:[e.jsx("div",{className:"text-2xl font-bold",children:"99.9%"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Uptime this month"})]})]})]}),e.jsxs(R,{children:[e.jsx(Y,{children:e.jsx(Q,{className:"text-lg sm:text-xl",children:"Quick Actions"})}),e.jsxs(L,{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-3 sm:gap-4",children:[e.jsxs(E,{onClick:()=>{p(void 0),x("create"),b(!0)},className:"w-full h-12 text-base",children:[e.jsx(Ze,{className:"w-4 h-4 mr-2"}),"Create User"]}),e.jsxs(E,{onClick:()=>a("/artists"),variant:"outline",className:"w-full h-12 text-base",children:[e.jsx(Ue,{className:"w-4 h-4 mr-2"}),"View Artists"]}),e.jsxs(E,{onClick:()=>a("/comprehensive-workflow"),variant:"outline",className:"w-full h-12 text-base",children:[e.jsx(dt,{className:"w-4 h-4 mr-2"}),e.jsx("span",{className:"hidden sm:inline",children:"Comprehensive Workflow"}),e.jsx("span",{className:"sm:hidden",children:"Workflow"})]}),e.jsxs(E,{onClick:Ge,variant:"outline",className:"w-full h-12 text-base",children:[e.jsx(Gt,{className:"w-4 h-4 mr-2"}),e.jsx("span",{className:"hidden sm:inline",children:"System Settings"}),e.jsx("span",{className:"sm:hidden",children:"Settings"})]})]})]}),e.jsxs(R,{children:[e.jsx(Y,{children:e.jsx(Q,{className:"text-lg sm:text-xl",children:"Recent Platform Activity"})}),e.jsx(L,{children:e.jsx("div",{className:"space-y-3 sm:space-y-4",children:(s==null?void 0:s.slice(0,5).map((de,ee)=>e.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center gap-3 sm:gap-4",children:[e.jsx("div",{className:"w-2 h-2 bg-primary rounded-full flex-shrink-0 mt-1 sm:mt-0"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("p",{className:"font-medium text-sm sm:text-base truncate",children:["New booking: ",de.eventName||"Event"]}),e.jsx("p",{className:"text-xs sm:text-sm text-muted-foreground",children:de.eventDate?new Date(de.eventDate).toLocaleDateString():"Date TBD"})]}),e.jsx(X,{variant:"outline",className:"self-start sm:self-center",children:de.status||"pending"})]},de.id||ee)))||e.jsx("p",{className:"text-muted-foreground text-center py-6 sm:py-4",children:"No recent activity"})})})]})]}),e.jsx(ge,{value:"users",className:"space-y-4 sm:space-y-6",children:e.jsxs(R,{children:[e.jsxs(Y,{children:[e.jsx(Q,{className:"text-lg sm:text-xl",children:"User Management"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Manage all platform users and their roles"})]}),e.jsx(L,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between gap-3",children:[e.jsx("h3",{className:"text-base sm:text-lg font-medium",children:"All Users"}),e.jsxs(E,{onClick:()=>{p(void 0),x("create"),b(!0)},className:"w-full sm:w-auto",children:[e.jsx(ta,{className:"w-4 h-4 mr-2"}),"Create User"]})]}),e.jsxs("div",{className:"grid gap-4",children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Complete user management with create, edit, delete capabilities for all user types."}),e.jsxs(E,{onClick:()=>{S(!0)},variant:"outline",className:"w-full h-12 text-base",children:[e.jsx(Ze,{className:"w-4 h-4 mr-2"}),"Manage All Platform Users"]})]})]})})]})}),e.jsx(ge,{value:"managed",className:"space-y-4 sm:space-y-6",children:e.jsxs(R,{children:[e.jsxs(Y,{children:[e.jsx(Q,{className:"text-lg sm:text-xl",children:"Managed Users"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Exclusive management of all Managed Artists, Musicians, and Professionals"})]}),e.jsx(L,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3 sm:gap-4",children:[e.jsx(R,{children:e.jsx(L,{className:"pt-6",children:e.jsxs("div",{className:"text-center",children:[e.jsx(Ue,{className:"h-8 w-8 mx-auto mb-2 text-purple-600"}),e.jsx("h3",{className:"font-medium",children:"Managed Artists"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Role ID: 3"})]})})}),e.jsx(R,{children:e.jsx(L,{className:"pt-6",children:e.jsxs("div",{className:"text-center",children:[e.jsx(jn,{className:"h-8 w-8 mx-auto mb-2 text-blue-600"}),e.jsx("h3",{className:"font-medium",children:"Managed Musicians"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Role ID: 5"})]})})}),e.jsx(R,{children:e.jsx(L,{className:"pt-6",children:e.jsxs("div",{className:"text-center",children:[e.jsx(Os,{className:"h-8 w-8 mx-auto mb-2 text-orange-600"}),e.jsx("h3",{className:"font-medium",children:"Managed Professionals"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Role ID: 7"})]})})})]}),e.jsxs(E,{onClick:()=>H(!0),variant:"outline",className:"w-full h-12 text-base",children:[e.jsx(Ze,{className:"w-4 h-4 mr-2"}),"View All Managed Users Analytics"]})]})})]})}),e.jsx(ge,{value:"revenue-analytics",className:"space-y-4 sm:space-y-6",children:e.jsx(HY,{user:n})}),e.jsxs(ge,{value:"assignments",className:"space-y-4 sm:space-y-6",children:[e.jsx(L9,{}),e.jsxs(R,{children:[e.jsxs(Y,{children:[e.jsx(Q,{className:"text-lg sm:text-xl",children:"Individual Assignment Managers"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Detailed management for each assignment type"})]}),e.jsx(L,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-3 sm:gap-4",children:[e.jsxs(E,{onClick:()=>c("admin"),variant:"outline",className:"h-auto p-4 flex flex-col items-center space-y-2 hover:bg-muted/50",children:[e.jsx(Ze,{className:"h-6 w-6"}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"font-medium",children:"Admin Assignments"}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:[Array.isArray(be)?be.length:0," active"]})]})]}),e.jsxs(E,{onClick:()=>c("booking"),variant:"outline",className:"h-auto p-4 flex flex-col items-center space-y-2 hover:bg-muted/50",children:[e.jsx(dt,{className:"h-6 w-6"}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"font-medium",children:"Booking Assignments"}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:[Array.isArray(Ie)?Ie.length:0," active"]})]})]}),e.jsxs(E,{onClick:()=>c("artist-musician"),variant:"outline",className:"h-auto p-4 flex flex-col items-center space-y-2 hover:bg-muted/50",children:[e.jsx(Ue,{className:"h-6 w-6"}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"font-medium",children:"Artist-Musician"}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:[Array.isArray(ve)?ve.length:0," active"]})]})]}),e.jsxs(E,{onClick:()=>c("service"),variant:"outline",className:"h-auto p-4 flex flex-col items-center space-y-2 hover:bg-muted/50",children:[e.jsx(Os,{className:"h-6 w-6"}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"font-medium",children:"Service Assignments"}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:[Array.isArray(ie)?ie.length:0," active"]})]})]})]}),l&&e.jsxs(R,{className:"mt-6",children:[e.jsx(Y,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs(Q,{className:"capitalize",children:[l.replace("-"," ")," Management"]}),e.jsx(E,{onClick:()=>c(null),variant:"ghost",size:"sm",children:e.jsx(Xt,{className:"w-4 h-4"})})]})}),e.jsxs(L,{children:[l==="admin"&&e.jsx(_9,{}),l==="booking"&&e.jsx(R9,{}),l==="artist-musician"&&e.jsx(O9,{}),l==="service"&&e.jsx(I9,{})]})]})]})})]})]}),e.jsx(ge,{value:"applications",className:"space-y-4 sm:space-y-6",children:e.jsxs(R,{children:[e.jsxs(Y,{children:[e.jsx(Q,{className:"text-lg sm:text-xl",children:"Management Applications"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Management applications, release contracts, professional assignments"})]}),e.jsx(L,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Final approval authority for all three-tier management applications"}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3 sm:gap-4",children:[e.jsx(R,{children:e.jsx(L,{className:"pt-6",children:e.jsxs("div",{className:"text-center",children:[e.jsx(xt,{className:"h-8 w-8 mx-auto mb-2 text-green-600"}),e.jsx("h3",{className:"font-medium",children:"Publisher Tier"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Up to 10% discounts"})]})})}),e.jsx(R,{children:e.jsx(L,{className:"pt-6",children:e.jsxs("div",{className:"text-center",children:[e.jsx(la,{className:"h-8 w-8 mx-auto mb-2 text-blue-600"}),e.jsx("h3",{className:"font-medium",children:"Representation"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Up to 50% discounts"})]})})}),e.jsx(R,{children:e.jsx(L,{className:"pt-6",children:e.jsxs("div",{className:"text-center",children:[e.jsx(ns,{className:"h-8 w-8 mx-auto mb-2 text-gold-600"}),e.jsx("h3",{className:"font-medium",children:"Full Management"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Up to 100% discounts"})]})})})]})]})})]})}),e.jsxs(ge,{value:"opphub",className:"space-y-4 sm:space-y-6",children:[e.jsxs(R,{children:[e.jsxs(Y,{children:[e.jsxs(Q,{className:"text-lg sm:text-xl flex items-center",children:[e.jsx(Is,{className:"h-5 w-5 mr-2"}),"Strategic Growth Dashboard"]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Multi-million dollar growth strategy and revenue tracking"})]}),e.jsx(L,{children:e.jsxs(E,{onClick:()=>a("/opphub-strategic"),className:"w-full h-12 text-base",children:[e.jsx(ns,{className:"w-4 h-4 mr-2"}),"Access Strategic Growth Dashboard"]})})]}),e.jsx(p1,{}),e.jsx(q9,{}),e.jsx($9,{userRole:"superadmin",userId:24}),e.jsxs(R,{children:[e.jsxs(Y,{children:[e.jsxs(Q,{className:"text-lg sm:text-xl flex items-center",children:[e.jsx(Es,{className:"h-5 w-5 mr-2"}),"Opportunity Management & Oversight"]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Review, verify, and manage all discovered opportunities with credibility scoring"})]}),e.jsx(L,{children:e.jsx(B9,{})})]}),e.jsxs(R,{children:[e.jsxs(Y,{children:[e.jsxs(Q,{className:"text-lg sm:text-xl flex items-center",children:[e.jsx(ad,{className:"h-5 w-5 mr-2"}),"Professional Opportunity Matching"]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Personalized opportunity recommendations with intelligent matching algorithms"})]}),e.jsxs(L,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsxs(E,{onClick:()=>a("/opportunity-matching"),className:"bg-gradient-to-r from-green-600 to-blue-600 hover:from-green-700 hover:to-blue-700",children:[e.jsx(Es,{className:"w-4 h-4 mr-2"}),"Open Full Matching Interface"]}),e.jsxs(E,{variant:"outline",onClick:Ae,disabled:V,children:[e.jsx(ct,{className:"w-4 h-4 mr-2"}),V?"Testing...":"Test Matching System"]})]}),Z&&e.jsxs("div",{className:"mt-4 p-4 bg-gray-50 dark:bg-gray-800 rounded-lg",children:[e.jsxs("h4",{className:"font-medium mb-3 flex items-center",children:[e.jsx(ct,{className:"w-4 h-4 mr-2"}),"API Test Results"]}),e.jsx("div",{className:"space-y-2",children:Z.map((de,ee)=>e.jsxs("div",{className:"flex items-center justify-between p-2 bg-white dark:bg-gray-700 rounded border",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:`w-2 h-2 rounded-full ${de.status==="success"?"bg-green-500":"bg-red-500"}`}),e.jsx("span",{className:"font-medium",children:de.name})]}),e.jsxs("div",{className:"flex items-center space-x-2 text-sm text-muted-foreground",children:[e.jsx("span",{children:de.duration}),de.status==="error"&&e.jsx("span",{className:"text-red-500 text-xs",children:de.error}),de.status==="success"&&e.jsx("span",{className:"text-green-500 text-xs",children:de.data})]})]},ee))}),e.jsxs(E,{variant:"ghost",size:"sm",onClick:()=>le(null),className:"mt-2",children:[e.jsx(Xt,{className:"w-3 h-3 mr-1"}),"Clear Results"]})]}),e.jsx(QT,{})]})]})]}),e.jsx(ge,{value:"system",className:"space-y-4 sm:space-y-6",children:e.jsxs(R,{children:[e.jsxs(Y,{children:[e.jsx(Q,{className:"text-lg sm:text-xl",children:"System Configuration"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Feature toggles, system settings, security controls, performance monitoring"})]}),e.jsx(L,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-3 sm:gap-4",children:[e.jsxs(E,{onClick:ne,variant:"outline",className:"w-full h-12 text-base",children:[e.jsx(Jn,{className:"w-4 h-4 mr-2"}),e.jsx("span",{className:"hidden sm:inline",children:"Database Management"}),e.jsx("span",{className:"sm:hidden",children:"Database"})]}),e.jsxs(E,{onClick:ue,variant:"outline",className:"w-full h-12 text-base",children:[e.jsx(Bt,{className:"w-4 h-4 mr-2"}),e.jsx("span",{className:"hidden sm:inline",children:"Security & Audit"}),e.jsx("span",{className:"sm:hidden",children:"Security"})]}),e.jsxs(E,{onClick:te,variant:"outline",className:"w-full h-12 text-base",children:[e.jsx(Is,{className:"w-4 h-4 mr-2"}),e.jsx("span",{className:"hidden sm:inline",children:"Performance Monitor"}),e.jsx("span",{className:"sm:hidden",children:"Performance"})]}),e.jsxs(E,{onClick:Ge,variant:"outline",className:"w-full h-12 text-base",children:[e.jsx(ya,{className:"w-4 h-4 mr-2"}),e.jsx("span",{className:"hidden sm:inline",children:"Configuration"}),e.jsx("span",{className:"sm:hidden",children:"Config"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-3 sm:gap-4",children:[e.jsxs("div",{className:"p-4 border rounded",children:[e.jsx("h4",{className:"font-medium mb-2",children:"System Health"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm",children:"Server Status"}),e.jsx(X,{variant:"default",children:"Online"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm",children:"Database"}),e.jsx(X,{variant:"default",children:"Connected"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm",children:"Email Service"}),e.jsx(X,{variant:"default",children:"Active"})]})]})]}),e.jsxs("div",{className:"p-4 border rounded",children:[e.jsx("h4",{className:"font-medium mb-2",children:"Security"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm",children:"SSL Certificate"}),e.jsx(X,{variant:"default",children:"Valid"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm",children:"Firewall"}),e.jsx(X,{variant:"default",children:"Active"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm",children:"Backups"}),e.jsx(X,{variant:"default",children:"Current"})]})]})]})]})]})})]})}),e.jsx(ge,{value:"activity",className:"space-y-4 sm:space-y-6",children:e.jsxs(R,{children:[e.jsxs(Y,{children:[e.jsx(Q,{className:"text-lg sm:text-xl",children:"Activity Logs"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Complete activity logs, system events, user actions across all roles"})]}),e.jsx(L,{children:e.jsx("div",{className:"space-y-4",children:e.jsx("div",{className:"space-y-2",children:(s==null?void 0:s.slice(0,10).map((de,ee)=>e.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between p-3 border rounded gap-3",children:[e.jsxs("div",{className:"flex items-center space-x-3 flex-1 min-w-0",children:[e.jsx("div",{className:"w-2 h-2 bg-primary rounded-full flex-shrink-0"}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsxs("p",{className:"font-medium text-sm sm:text-base truncate",children:["Booking: ",de.eventName||"Event"]}),e.jsx("p",{className:"text-xs sm:text-sm text-muted-foreground",children:de.eventDate?new Date(de.eventDate).toLocaleDateString():"Date TBD"})]})]}),e.jsx(X,{variant:"outline",className:"self-start sm:self-center",children:de.status||"pending"})]},de.id||ee)))||e.jsx("p",{className:"text-muted-foreground text-center py-6 sm:py-8",children:"No recent activity"})})})})]})}),e.jsx(ge,{value:"demo",className:"space-y-4 sm:space-y-6",children:e.jsx($w,{})}),e.jsx(ge,{value:"instruments",className:"space-y-4 sm:space-y-6",children:e.jsxs(R,{children:[e.jsxs(Y,{children:[e.jsxs(Q,{className:"text-lg sm:text-xl flex items-center",children:[e.jsx(Ue,{className:"h-5 w-5 mr-2"}),"Instrument Management System"]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Manage the comprehensive instrument database for technical riders and booking requirements"})]}),e.jsx(L,{children:e.jsx(uQ,{})})]})}),e.jsx(ge,{value:"platform-audit",className:"space-y-4 sm:space-y-6",children:e.jsx(s5,{})}),e.jsx(ge,{value:"media",className:"space-y-4 sm:space-y-6",children:e.jsx(f1,{})}),e.jsxs(ge,{value:"newsletter",className:"space-y-4 sm:space-y-6",children:[e.jsxs(R,{children:[e.jsxs(Y,{children:[e.jsxs(Q,{className:"text-lg sm:text-xl flex items-center",children:[e.jsx(vn,{className:"h-5 w-5 mr-2"}),"Enhanced Newsletter Management System"]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Create, send, and manage newsletters with recipient targeting"})]}),e.jsx(L,{children:e.jsx(jE,{})})]}),e.jsx(TQ,{})]}),e.jsx(ge,{value:"press-releases",className:"space-y-4 sm:space-y-6",children:e.jsx(vE,{})}),e.jsx(ge,{value:"media",className:"space-y-4 sm:space-y-6",children:e.jsxs(R,{children:[e.jsxs(Y,{children:[e.jsxs(Q,{className:"text-lg sm:text-xl flex items-center",children:[e.jsx(Vi,{className:"h-5 w-5 mr-2"}),"Media Management System"]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Upload and manage photos, videos, and other media assets"})]}),e.jsx(L,{children:e.jsx(f1,{})})]})}),e.jsx(ge,{value:"demo",className:"space-y-4 sm:space-y-6",children:e.jsx($w,{})}),e.jsx(ge,{value:"activity",className:"space-y-4 sm:space-y-6",children:e.jsx(p1,{})}),e.jsx(ge,{value:"authorization",className:"space-y-4 sm:space-y-6",children:e.jsx(FQ,{})})]}),e.jsx(hQ,{isOpen:v,onClose:()=>y(!1),bookingId:K,assignedTalent:[]}),e.jsx(Wp,{open:f,onOpenChange:de=>{b(de),de||i.invalidateQueries({queryKey:["/api/users"]})},mode:"create"}),e.jsx(fQ,{open:j,onOpenChange:S}),e.jsx(yQ,{open:k,onOpenChange:T,type:"logo"}),e.jsx(NQ,{open:A,onOpenChange:C}),e.jsx(wQ,{open:w,onOpenChange:P}),e.jsx(SQ,{open:M,onOpenChange:I}),e.jsx(CQ,{open:W,onOpenChange:_}),e.jsx(kQ,{open:B,onOpenChange:O}),e.jsx(AQ,{open:z,onOpenChange:F}),G&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-50",children:e.jsx("div",{className:"bg-white dark:bg-gray-900 rounded-lg max-w-7xl w-full max-h-[90vh] overflow-y-auto",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h2",{className:"text-2xl font-bold",children:"Managed Users Analytics Dashboard"}),e.jsx(E,{variant:"ghost",size:"sm",onClick:()=>H(!1),children:""})]}),e.jsx(mQ,{})]})})})]})]})}function W0({message:t="Loading...",size:s="md",className:n=""}){const a={sm:"h-4 w-4",md:"h-6 w-6",lg:"h-8 w-8"};return e.jsxs("div",{className:`flex flex-col items-center justify-center p-8 ${n}`,children:[e.jsx(oa,{className:`animate-spin ${a[s]} text-primary mb-2`}),e.jsx("p",{className:"text-sm text-muted-foreground",children:t})]})}const $Q=({size:t="md",text:s="Loading...",className:n})=>e.jsx(W0,{message:s,size:t,className:n}),BQ=({className:t})=>e.jsxs("div",{className:`animate-pulse ${t}`,children:[e.jsx("div",{className:"bg-gray-200 h-32 rounded-lg mb-4"}),e.jsx("div",{className:"bg-gray-200 h-4 rounded mb-2"}),e.jsx("div",{className:"bg-gray-200 h-4 rounded w-3/4"})]});function UQ(){const{user:t}=_s(),[,s]=As(),{data:n,isLoading:a}=ke({queryKey:["/api/my-gigs"],enabled:!!t});if(a)return e.jsx(W0,{message:"Loading your gigs..."});const r=Array.isArray(n)?n.filter(c=>new Date(c.bookingEventDate)>=new Date):[],i=Array.isArray(n)?n.filter(c=>new Date(c.bookingEventDate)<new Date):[],l=({gig:c})=>e.jsxs(R,{"data-testid":`card-gig-${c.id}`,children:[e.jsx(Y,{children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsx(Q,{className:"text-lg",children:c.bookingEventName}),e.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[c.isMainBookedTalent&&e.jsx(X,{variant:"default",children:"Main Talent"}),e.jsx(X,{variant:"outline",children:c.roleInBooking}),c.instrumentName&&e.jsxs(X,{variant:"secondary",children:[e.jsx(Ue,{className:"h-3 w-3 mr-1"}),c.instrumentName]})]})]}),e.jsx(X,{variant:c.status==="confirmed"?"default":"secondary","data-testid":`status-gig-${c.id}`,children:c.status})]})}),e.jsxs(L,{children:[e.jsxs("div",{className:"space-y-2 text-sm text-muted-foreground",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(dt,{className:"h-4 w-4"}),e.jsx("span",{children:Mn(new Date(c.bookingEventDate),"PPP")})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Dn,{className:"h-4 w-4"}),e.jsx("span",{children:c.bookingVenueName})]}),c.bookingVenueAddress&&e.jsx("div",{className:"text-xs ml-6",children:c.bookingVenueAddress}),(c.assignedGroup||c.assignedChannel)&&e.jsxs("div",{className:"flex items-center gap-2 mt-3 pt-3 border-t",children:[e.jsx(Qt,{className:"h-4 w-4"}),e.jsx("span",{className:"font-medium",children:"Technical Details:"}),c.assignedGroup&&e.jsxs("span",{children:["Group ",c.assignedGroup]}),c.assignedChannel&&e.jsxs("span",{children:["Channel ",c.assignedChannel]})]})]}),e.jsx("div",{className:"mt-4 flex gap-2",children:e.jsxs(E,{variant:"outline",size:"sm",onClick:()=>s(`/bookings/${c.bookingId}`),"data-testid":`button-view-booking-${c.id}`,children:[e.jsx(Ns,{className:"h-4 w-4 mr-1"}),"View Gig"]})})]})]});return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold",children:"My Gigs"}),e.jsx("p",{className:"text-muted-foreground",children:"View all bookings where you've been assigned as talent"})]}),e.jsxs(Ut,{defaultValue:"upcoming",className:"w-full",children:[e.jsxs(jt,{children:[e.jsxs(Ne,{value:"upcoming","data-testid":"tab-upcoming-gigs",children:["Upcoming (",r.length,")"]}),e.jsxs(Ne,{value:"past","data-testid":"tab-past-gigs",children:["Past (",i.length,")"]})]}),e.jsx(ge,{value:"upcoming",className:"mt-6",children:r.length===0?e.jsx(R,{children:e.jsxs(L,{className:"text-center py-8",children:[e.jsx(Ue,{className:"h-12 w-12 mx-auto text-muted-foreground mb-4"}),e.jsx("p",{className:"text-muted-foreground",children:"No upcoming gigs"})]})}):e.jsx("div",{className:"grid gap-4 md:grid-cols-2",children:r.map(c=>e.jsx(l,{gig:c},c.id))})}),e.jsx(ge,{value:"past",className:"mt-6",children:i.length===0?e.jsx(R,{children:e.jsxs(L,{className:"text-center py-8",children:[e.jsx(Ue,{className:"h-12 w-12 mx-auto text-muted-foreground mb-4"}),e.jsx("p",{className:"text-muted-foreground",children:"No past gigs"})]})}):e.jsx("div",{className:"grid gap-4 md:grid-cols-2",children:i.map(c=>e.jsx(l,{gig:c},c.id))})})]})]})}const zQ=pe.object({hasOriginalMusic:pe.boolean(),hasPublishedWorks:pe.boolean(),intendsToPersue:pe.boolean(),hasPerformances:pe.boolean(),isUSCitizen:pe.boolean(),isRegisteredWithAnotherPRO:pe.boolean(),additionalInfo:pe.string().optional()}),VQ=pe.object({organizationChoice:pe.literal("ASCAP"),personalInfo:pe.object({firstName:pe.string().min(1,"First name is required"),middleNames:pe.string().optional(),lastName:pe.string().min(1,"Last name is required"),email:pe.string().email("Valid email is required"),socialSecurityPassport:pe.string().optional(),fullAddress:pe.string().min(1,"Full address is required"),dateOfBirth:pe.string().min(1,"Date of birth is required"),desiredArtistNames:pe.string().min(1,"Desired artist name is required"),desiredUsername:pe.string().min(1,"Desired username is required"),desiredPassword:pe.string().min(6,"Password must be at least 6 characters"),musicGenres:pe.array(pe.string()).min(1,"Select at least one genre").max(3,"Select up to 3 genres")}),fees:pe.object({adminFee:pe.number().default(30),proRegistrationFee:pe.number().default(1),handlingFee:pe.number().default(3),paymentMethod:pe.enum(["online","offline"]).default("online")}),w8benInfo:pe.object({requiresW8ben:pe.boolean().default(!1),formData:pe.object({beneficiaryName:pe.string().optional(),countryOfCitizenship:pe.string().optional(),permanentAddress:pe.string().optional(),city:pe.string().optional(),country:pe.string().optional(),foreignTaxId:pe.string().optional(),dateOfBirth:pe.string().optional(),treatyCountry:pe.string().optional()}).optional()}).optional(),contactPreferences:pe.object({emailUpdates:pe.boolean().default(!0),phoneContact:pe.boolean().default(!1),mailingList:pe.boolean().default(!0),quarterlyStatements:pe.boolean().default(!0)}),notes:pe.string().optional()});function o5({userId:t}){const[s,n]=N.useState("eligibility"),[a,r]=N.useState(null),[i,l]=N.useState(null),[c,o]=N.useState("");N.useState({ASCAP:50,BMI:0,SESAC:0,GMR:0});const{toast:d}=nt(),h=Tt(),u=Cn({resolver:kn(zQ),defaultValues:{hasOriginalMusic:!1,hasPublishedWorks:!1,intendsToPersue:!1,hasPerformances:!1,isUSCitizen:!1}}),m=Cn({resolver:kn(VQ),defaultValues:{organizationChoice:"ASCAP",personalInfo:{firstName:"",middleNames:"",lastName:"",email:"",socialSecurityPassport:"",fullAddress:"",dateOfBirth:"",desiredArtistNames:"",desiredUsername:"",desiredPassword:"",musicGenres:[]},fees:{adminFee:30,proRegistrationFee:1,handlingFee:3,paymentMethod:"online"},w8benInfo:{requiresW8ben:!1,formData:{beneficiaryName:"",countryOfCitizenship:"",permanentAddress:"",city:"",country:"",foreignTaxId:"",dateOfBirth:"",treatyCountry:""}},contactPreferences:{emailUpdates:!0,phoneContact:!1,mailingList:!0,quarterlyStatements:!0},notes:""}}),{data:p}=ke({queryKey:["/api/pro-eligibility",t],queryFn:async()=>(await xe(`/api/pro-eligibility?userId=${t}`)).json(),enabled:!!t}),{data:g}=ke({queryKey:["/api/pro-fees",c],queryFn:async()=>c?(await xe(`/api/pro-fees/${c}`)).json():null,enabled:!!c});ke({queryKey:["/api/w8ben-template"],queryFn:async()=>(await xe("/api/w8ben-template")).json()}),N.useEffect(()=>{(g==null?void 0:g.membershipFee)!==void 0&&m.setValue("fees.proRegistrationFee",g.membershipFee)},[g]);const{data:x}=ke({queryKey:["/api/pro-registrations"],queryFn:async()=>(await xe(`/api/pro-registrations${t?`?userId=${t}`:""}`)).json()}),v=Xe({mutationFn:async k=>{const T=await xe("/api/pro-eligibility",{method:"POST",body:k});if(!T.ok)throw new Error("Failed to submit eligibility assessment");return T.json()},onSuccess:k=>{r(k.eligibilityScore),d({title:"Eligibility Assessment Complete",description:`Your eligibility score is ${k.eligibilityScore}%`}),k.eligibilityScore>=75&&n("registration"),h.invalidateQueries({queryKey:["/api/pro-eligibility"]})},onError:k=>{d({title:"Assessment Failed",description:k.message||"Failed to complete eligibility assessment",variant:"destructive"})}}),y=Xe({mutationFn:async k=>{const T=await xe("/api/pro-registrations",{method:"POST",body:k});if(!T.ok)throw new Error("Failed to submit registration");return T.json()},onSuccess:k=>{l(k.id),n("review"),d({title:"Registration Submitted",description:"Your PRO registration has been submitted successfully"}),h.invalidateQueries({queryKey:["/api/pro-registrations"]})},onError:k=>{d({title:"Registration Failed",description:k.message||"Failed to submit registration",variant:"destructive"})}}),f=k=>{v.mutate(k)},b=k=>{y.mutate(k)},j=()=>{switch(s){case"eligibility":return 33;case"registration":return 66;case"review":return 100;default:return 0}},S=k=>k>=90?e.jsx(X,{className:"bg-green-500",children:"Highly Eligible"}):k>=75?e.jsx(X,{className:"bg-blue-500",children:"Eligible"}):k>=50?e.jsx(X,{className:"bg-yellow-500",children:"Partially Eligible"}):e.jsx(X,{variant:"destructive",children:"Not Eligible"});return N.useEffect(()=>{p&&(r(p.eligibilityScore),p.eligibilityScore>=75&&n("registration"))},[p]),e.jsxs("div",{className:"w-full max-w-6xl mx-auto p-6 space-y-6",children:[e.jsxs("div",{className:"text-center space-y-4",children:[e.jsx("h1",{className:"text-3xl font-bold gradient-text",children:"PRO Registration System"}),e.jsx("p",{className:"text-muted-foreground",children:"Complete your Performance Rights Organization registration with our guided process"}),e.jsx(qs,{value:j(),className:"w-full max-w-md mx-auto"})]}),e.jsxs(Ut,{value:s,className:"w-full",children:[e.jsxs(jt,{className:"grid w-full grid-cols-3",children:[e.jsxs(Ne,{value:"eligibility",className:"flex items-center gap-2",children:[e.jsx(Ti,{className:"h-4 w-4"}),"Eligibility"]}),e.jsxs(Ne,{value:"registration",disabled:!a||a<75,className:"flex items-center gap-2",children:[e.jsx(xt,{className:"h-4 w-4"}),"Registration"]}),e.jsxs(Ne,{value:"review",disabled:!i,className:"flex items-center gap-2",children:[e.jsx(cn,{className:"h-4 w-4"}),"Review"]})]}),e.jsx(ge,{value:"eligibility",className:"space-y-6",children:e.jsxs(R,{children:[e.jsxs(Y,{children:[e.jsxs(Q,{className:"flex items-center gap-2",children:[e.jsx(Ti,{className:"h-5 w-5"}),"Eligibility Assessment"]}),e.jsx(rt,{children:"Let's determine if you're eligible for PRO registration"})]}),e.jsx(L,{children:e.jsx(On,{...u,children:e.jsxs("form",{onSubmit:u.handleSubmit(f),className:"space-y-6",children:[e.jsx($e,{control:u.control,name:"hasOriginalMusic",render:({field:k})=>e.jsxs(Fe,{className:"flex flex-row items-start space-x-3 space-y-0",children:[e.jsx(Le,{children:e.jsx(hs,{checked:k.value,onCheckedChange:k.onChange})}),e.jsxs("div",{className:"space-y-1 leading-none",children:[e.jsx(qe,{children:"I have written original music"}),e.jsx(Or,{children:"You must have created original musical works to be eligible"})]})]})}),e.jsx($e,{control:u.control,name:"hasPerformances",render:({field:k})=>e.jsxs(Fe,{className:"flex flex-row items-start space-x-3 space-y-0",children:[e.jsx(Le,{children:e.jsx(hs,{checked:k.value,onCheckedChange:k.onChange})}),e.jsxs("div",{className:"space-y-1 leading-none",children:[e.jsx(qe,{children:"My music is performed publicly or will be"}),e.jsx(Or,{children:"PROs collect royalties from public performances of your music"})]})]})}),e.jsx($e,{control:u.control,name:"isUSCitizen",render:({field:k})=>e.jsxs(Fe,{className:"flex flex-row items-start space-x-3 space-y-0",children:[e.jsx(Le,{children:e.jsx(hs,{checked:k.value,onCheckedChange:k.onChange})}),e.jsxs("div",{className:"space-y-1 leading-none",children:[e.jsx(qe,{children:"I am a US citizen or permanent resident"}),e.jsx(Or,{children:"Will determine the W-8BEN forms you will fill out, not required for PRO eligibility"})]})]})}),e.jsx($e,{control:u.control,name:"hasPublishedWorks",render:({field:k})=>e.jsxs(Fe,{className:"flex flex-row items-start space-x-3 space-y-0",children:[e.jsx(Le,{children:e.jsx(hs,{checked:k.value,onCheckedChange:k.onChange})}),e.jsxs("div",{className:"space-y-1 leading-none",children:[e.jsx(qe,{children:"I have published or plan to publish my works"}),e.jsx(Or,{children:"Works should be available for public performance"})]})]})}),e.jsx($e,{control:u.control,name:"intendsToPersue",render:({field:k})=>e.jsxs(Fe,{className:"flex flex-row items-start space-x-3 space-y-0",children:[e.jsx(Le,{children:e.jsx(hs,{checked:k.value,onCheckedChange:k.onChange})}),e.jsxs("div",{className:"space-y-1 leading-none",children:[e.jsx(qe,{children:"I intend to pursue a music career professionally"}),e.jsx(Or,{children:"PRO membership is most beneficial for professional musicians"})]})]})}),e.jsx($e,{control:u.control,name:"isRegisteredWithAnotherPRO",render:({field:k})=>e.jsxs(Fe,{className:"flex flex-row items-start space-x-3 space-y-0",children:[e.jsx(Le,{children:e.jsx(hs,{checked:k.value,onCheckedChange:k.onChange})}),e.jsxs("div",{className:"space-y-1 leading-none",children:[e.jsx(qe,{children:"I am already registered with another PRO"}),e.jsx(Or,{children:"Check this if you're currently a member of ASCAP, BMI, SESAC, GMR, or any other performing rights organization"})]})]})}),e.jsx($e,{control:u.control,name:"additionalInfo",render:({field:k})=>e.jsxs(Fe,{children:[e.jsx(qe,{children:"Additional Information"}),e.jsx(Le,{children:e.jsx(mt,{placeholder:"Tell us more about your music career and goals...",...k})}),e.jsx(ze,{})]})}),a!==null&&e.jsxs(Ua,{children:[e.jsx(on,{className:"h-4 w-4"}),e.jsxs(sr,{className:"flex items-center gap-2",children:["Your eligibility score: ",a,"%",S(a)]})]}),e.jsx(E,{type:"submit",disabled:v.isPending,className:"w-full",children:v.isPending?"Assessing...":"Complete Assessment"})]})})})]})}),e.jsxs(ge,{value:"registration",className:"space-y-6",children:[e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-1 gap-4",children:e.jsxs(R,{className:"cursor-pointer transition-all hover:shadow-md ring-2 ring-primary",children:[e.jsxs(Y,{className:"pb-3",children:[e.jsx(Q,{className:"text-lg",children:"ASCAP"}),e.jsx(rt,{className:"text-sm",children:"American Society of Composers, Authors and Publishers - Wai'tuMusic's exclusive PRO partner"})]}),e.jsxs(L,{className:"space-y-2",children:[e.jsxs("div",{className:"text-sm",children:[e.jsx("span",{className:"font-medium",children:"Membership Fee:"})," $50"]}),e.jsxs("div",{className:"text-sm",children:[e.jsx("span",{className:"font-medium",children:"Annual Dues:"})," $0"]}),e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"text-xs text-muted-foreground flex items-center gap-1",children:[e.jsx(Ti,{className:"h-3 w-3"}),"Performance royalty collection"]}),e.jsxs("div",{className:"text-xs text-muted-foreground flex items-center gap-1",children:[e.jsx(Ti,{className:"h-3 w-3"}),"International representation"]}),e.jsxs("div",{className:"text-xs text-muted-foreground flex items-center gap-1",children:[e.jsx(Ti,{className:"h-3 w-3"}),"Writer and publisher services"]})]})]})]})}),e.jsxs(R,{children:[e.jsx(Y,{children:e.jsxs(Q,{className:"flex items-center gap-2",children:[e.jsx(cn,{className:"h-5 w-5"}),"Registration Information"]})}),e.jsx(L,{children:e.jsx(On,{...m,children:e.jsxs("form",{onSubmit:m.handleSubmit(b),className:"space-y-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Personal Information"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsx($e,{control:m.control,name:"personalInfo.firstName",render:({field:k})=>e.jsxs(Fe,{children:[e.jsx(qe,{children:"First Name *"}),e.jsx(Le,{children:e.jsx($,{placeholder:"Jessia",...k})}),e.jsx(ze,{})]})}),e.jsx($e,{control:m.control,name:"personalInfo.middleNames",render:({field:k})=>e.jsxs(Fe,{children:[e.jsx(qe,{children:"Middle Names"}),e.jsx(Le,{children:e.jsx($,{placeholder:"Alicia",...k})}),e.jsx(ze,{})]})}),e.jsx($e,{control:m.control,name:"personalInfo.lastName",render:({field:k})=>e.jsxs(Fe,{children:[e.jsx(qe,{children:"Last Name *"}),e.jsx(Le,{children:e.jsx($,{placeholder:"Letang",...k})}),e.jsx(ze,{})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx($e,{control:m.control,name:"personalInfo.email",render:({field:k})=>e.jsxs(Fe,{children:[e.jsx(qe,{children:"Email Address *"}),e.jsx(Le,{children:e.jsx($,{type:"email",placeholder:"j.letang95@gmail.com",...k})}),e.jsx(ze,{})]})}),e.jsx($e,{control:m.control,name:"personalInfo.socialSecurityPassport",render:({field:k})=>e.jsxs(Fe,{children:[e.jsx(qe,{children:"SSN / Passport / Driver's License"}),e.jsx(Le,{children:e.jsx($,{placeholder:"126398-00931885",...k})}),e.jsx(ze,{})]})})]}),e.jsx($e,{control:m.control,name:"personalInfo.fullAddress",render:({field:k})=>e.jsxs(Fe,{children:[e.jsx(qe,{children:"Full Address *"}),e.jsx(Le,{children:e.jsx(mt,{placeholder:`45 Chataignier grove, Bath Estate
Roseau
Dominica`,...k})}),e.jsx(ze,{})]})}),e.jsx($e,{control:m.control,name:"personalInfo.dateOfBirth",render:({field:k})=>e.jsxs(Fe,{children:[e.jsx(qe,{children:"Date of Birth *"}),e.jsx(Le,{children:e.jsx($,{type:"date",...k})}),e.jsx(ze,{})]})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Artist Information"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx($e,{control:m.control,name:"personalInfo.desiredArtistNames",render:({field:k})=>e.jsxs(Fe,{children:[e.jsx(qe,{children:"Desired Artist Name(s) *"}),e.jsx(Le,{children:e.jsx($,{placeholder:"Jessia Letang",...k})}),e.jsx(ze,{})]})}),e.jsx($e,{control:m.control,name:"personalInfo.membershipType",render:({field:k})=>e.jsxs(Fe,{children:[e.jsx(qe,{children:"Membership Type *"}),e.jsxs(Re,{onValueChange:k.onChange,value:k.value,children:[e.jsx(Le,{children:e.jsx(Me,{children:e.jsx(Oe,{placeholder:"Select membership type"})})}),e.jsxs(_e,{children:[e.jsx(U,{value:"writer",children:"Writer Only"}),e.jsx(U,{value:"publisher",children:"Publisher Only"}),e.jsx(U,{value:"both",children:"Writer and Publisher"})]})]}),e.jsx(ze,{})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx($e,{control:m.control,name:"personalInfo.desiredUsername",render:({field:k})=>e.jsxs(Fe,{children:[e.jsx(qe,{children:"Desired Username *"}),e.jsx(Le,{children:e.jsx($,{placeholder:"JLetang95",...k})}),e.jsx(ze,{})]})}),e.jsx($e,{control:m.control,name:"personalInfo.desiredPassword",render:({field:k})=>e.jsxs(Fe,{children:[e.jsx(qe,{children:"Desired Password *"}),e.jsx(Le,{children:e.jsx($,{type:"password",placeholder:"Enter secure password",...k})}),e.jsx(ze,{})]})})]}),e.jsx($e,{control:m.control,name:"personalInfo.musicGenres",render:({field:k})=>{var T;return e.jsxs(Fe,{children:[e.jsx(qe,{children:"Select Three (3) Genres of Music *"}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-2 mt-2",children:["Pop Music","RnB/Hip Hop","Rap","Reggae","Rock Music","Symphonic/Concert/Chamber","Gospel","Jazz","Latin","Library/Production Music","Musical Theater/Cabaret","New Age"].map(A=>{var C,w,P;return e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(hs,{checked:((C=k.value)==null?void 0:C.includes(A))||!1,onCheckedChange:M=>{var I,W;M?((I=k.value)==null?void 0:I.length)<3&&k.onChange([...k.value||[],A]):k.onChange(((W=k.value)==null?void 0:W.filter(_=>_!==A))||[])},disabled:!((w=k.value)!=null&&w.includes(A))&&((P=k.value)==null?void 0:P.length)>=3}),e.jsx("label",{className:"text-sm",children:A})]},A)})}),e.jsxs("div",{className:"text-sm text-muted-foreground mt-2",children:["Selected: ",((T=k.value)==null?void 0:T.length)||0,"/3"]}),e.jsx(ze,{})]})}})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Registration Fees"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsx($e,{control:m.control,name:"fees.adminFee",render:({field:k})=>e.jsxs(Fe,{children:[e.jsx(qe,{children:"PRO Registration Admin Fee (USD)"}),e.jsx(Le,{children:e.jsx($,{type:"number",step:"0.01",...k,onChange:T=>k.onChange(parseFloat(T.target.value)||0)})}),e.jsx(ze,{})]})}),e.jsx($e,{control:m.control,name:"fees.proRegistrationFee",render:({field:k})=>e.jsxs(Fe,{children:[e.jsx(qe,{children:"PRO Registration Fee (USD)"}),e.jsx(Le,{children:e.jsx($,{type:"number",step:"0.01",...k,onChange:T=>k.onChange(parseFloat(T.target.value)||0)})}),e.jsx(ze,{})]})}),e.jsx($e,{control:m.control,name:"fees.handlingFee",render:({field:k})=>e.jsxs(Fe,{children:[e.jsx(qe,{children:"PRO Registration Handling Fee (USD)"}),e.jsx(Le,{children:e.jsx($,{type:"number",step:"0.01",...k,onChange:T=>k.onChange(parseFloat(T.target.value)||0)})}),e.jsx(ze,{})]})})]}),e.jsx($e,{control:m.control,name:"fees.paymentMethod",render:({field:k})=>e.jsxs(Fe,{children:[e.jsx(qe,{children:"Admin Fee Payment Options"}),e.jsxs(Re,{onValueChange:k.onChange,value:k.value,children:[e.jsx(Le,{children:e.jsx(Me,{children:e.jsx(Oe,{placeholder:"Select payment method"})})}),e.jsxs(_e,{children:[e.jsx(U,{value:"online",children:"Online Payment (Stripe)"}),e.jsx(U,{value:"offline",children:"I wish to make payment offline"})]})]}),e.jsx(ze,{})]})}),m.watch("fees.paymentMethod")==="offline"&&e.jsxs(Ua,{children:[e.jsx(on,{className:"h-4 w-4"}),e.jsx(sr,{children:e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{children:e.jsx("strong",{children:"MoBanking Payment (National Bank of Dominica) - $100 XCD:"})}),e.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:"*Available only if you have a MoBanking Service Account with National Bank of Dominica"}),e.jsxs("p",{children:[e.jsx("strong",{children:"Peer Nickname:"})," KrystallionInc"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"MoBanking ID:"})," 5551010"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Account Number:"})," 100064871"]}),e.jsx("p",{className:"text-sm mt-2",children:"MoBanking is National Bank of Dominica's mobile banking service for secure local transfers."})]})})]})]}),e.jsx(E,{type:"submit",disabled:y.isPending,className:"w-full",children:y.isPending?"Submitting...":"Submit Registration"})]})})})]})]}),e.jsx(ge,{value:"review",className:"space-y-6",children:e.jsxs(R,{children:[e.jsxs(Y,{children:[e.jsxs(Q,{className:"flex items-center gap-2",children:[e.jsx(Ti,{className:"h-5 w-5"}),"Registration Review"]}),e.jsx(rt,{children:"Review your PRO registration details"})]}),e.jsx(L,{children:e.jsxs("div",{className:"space-y-4",children:[a&&e.jsxs("div",{className:"flex justify-between items-center p-4 bg-muted rounded-lg",children:[e.jsx("span",{children:"Eligibility Score:"}),e.jsxs("div",{className:"flex items-center gap-2",children:[a,"% ",S(a)]})]}),x&&x.length>0&&e.jsxs("div",{className:"space-y-2",children:[e.jsx("h4",{className:"font-medium",children:"Your Registrations:"}),x.map(k=>e.jsx("div",{className:"p-4 border rounded-lg",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsxs("p",{className:"font-medium",children:[k.organizationChoice," Registration"]}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Applied: ",new Date(k.applicationDate).toLocaleDateString()]})]}),e.jsx(X,{variant:k.status==="approved"?"default":"secondary",children:k.status})]})},k.id))]}),e.jsxs(Ua,{children:[e.jsx(on,{className:"h-4 w-4"}),e.jsx(sr,{children:"Your PRO registration is now complete. You will receive email updates about your application status."})]})]})})]})})]})]})}function GQ({user:t}){const[s,n]=N.useState("overview"),[,a]=As(),{addItem:r}=Zo(),{toast:i}=nt(),{data:l}=ke({queryKey:["/api/service-pricing","Create Splitsheet"],queryFn:async()=>(await apiRequest("/api/service-pricing/Create Splitsheet")).json()}),c=(l==null?void 0:l.basePrice)||15,o=()=>{if(!t.isManaged)return{tier:"none",discount:0,finalPrice:c};const f=t.managementTier||"publisher",j={publisher:(l==null?void 0:l.publisherDiscount)||10,representation:(l==null?void 0:l.representationDiscount)||50,fullManagement:(l==null?void 0:l.fullManagementDiscount)||100}[f]||0,S=j===100?0:c*(1-j/100);return{tier:f,discount:j,finalPrice:Math.round(S*100)/100}},{tier:d,discount:h,finalPrice:u}=o(),{data:m=[],isLoading:p}=ke({queryKey:["/api/user/splitsheets",t.id]}),g=()=>{r({itemId:"splitsheet-service",title:"Digital Splitsheet Management",price:u,artist:"Wai'tuMusic",quantity:1,type:"service",originalPrice:c,discount:h,description:"Professional splitsheet creation and management"}),i({title:"Added to Cart",description:`Splitsheet service added with ${h}% discount`})},x=()=>{a("/enhanced-splitsheet")},v=()=>e.jsxs("div",{className:"space-y-6",children:[e.jsxs(R,{children:[e.jsx(Y,{children:e.jsxs(Q,{className:"flex items-center gap-2",children:[e.jsx(It,{className:"h-5 w-5"}),"Service Pricing"]})}),e.jsx(L,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:"Digital Splitsheet Management"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Professional creation and signing workflow"})]}),e.jsxs("div",{className:"text-right",children:[h>0&&e.jsxs("p",{className:"text-sm text-muted-foreground line-through",children:["$",c.toFixed(2)]}),e.jsx("p",{className:"text-xl font-bold",children:u===0?"FREE":`$${u}`}),h>0&&e.jsxs(X,{variant:"secondary",className:"ml-2",children:[h,"% OFF"]})]})]}),t.isManaged&&e.jsx("div",{className:"p-3 bg-emerald-50 dark:bg-emerald-900/20 rounded-lg",children:e.jsxs("p",{className:"text-sm text-emerald-700 dark:text-emerald-300",children:[e.jsx(la,{className:"h-4 w-4 inline mr-1"}),"Management Tier Benefit: ",d==="fullManagement"?"Free Service":`${h}% Discount`]})}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(E,{onClick:g,className:"flex-1",children:[e.jsx(Fs,{className:"h-4 w-4 mr-2"}),"Add to Cart"]}),e.jsxs(E,{onClick:x,variant:"outline",className:"flex-1",children:[e.jsx(xt,{className:"h-4 w-4 mr-2"}),"Create Now"]})]})]})})]}),e.jsxs(R,{children:[e.jsx(Y,{children:e.jsxs(Q,{className:"flex items-center gap-2",children:[e.jsx(In,{className:"h-5 w-5"}),"Service Features"]})}),e.jsx(L,{children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(xt,{className:"h-5 w-5 text-emerald-500 mt-1"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:"Professional Creation"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Industry-standard splitsheet format with validation"})]})]}),e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(go,{className:"h-5 w-5 text-emerald-500 mt-1"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:"Digital Signatures"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"3 signing modes: Upload, draw, or type signatures"})]})]}),e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(Ze,{className:"h-5 w-5 text-emerald-500 mt-1"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:"Multi-Party Workflow"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Automatic notifications and tracking"})]})]}),e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(Ue,{className:"h-5 w-5 text-emerald-500 mt-1"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:"DJ Integration"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Automatic song access after completion"})]})]})]})})]})]}),y=()=>e.jsx("div",{className:"space-y-4",children:p?e.jsxs("div",{className:"text-center py-8",children:[e.jsx(Qt,{className:"h-8 w-8 mx-auto mb-2 animate-spin"}),e.jsx("p",{children:"Loading your splitsheets..."})]}):m.length===0?e.jsx(R,{children:e.jsxs(L,{className:"text-center py-8",children:[e.jsx(xt,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground"}),e.jsx("h3",{className:"text-lg font-medium mb-2",children:"No Splitsheets Yet"}),e.jsx("p",{className:"text-muted-foreground mb-4",children:"Create your first professional splitsheet to get started"}),e.jsxs(E,{onClick:x,children:[e.jsx(xt,{className:"h-4 w-4 mr-2"}),"Create First Splitsheet"]})]})}):e.jsx("div",{className:"space-y-4",children:m.map(f=>e.jsxs(R,{children:[e.jsx(Y,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(Q,{className:"text-base",children:f.songTitle}),e.jsx(X,{variant:f.status==="completed"?"default":"secondary",children:f.status})]})}),e.jsx(L,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-1",children:[f.isrcCode&&e.jsxs("p",{className:"text-sm text-muted-foreground",children:["ISRC: ",f.isrcCode]}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Created ",new Date(f.createdAt).toLocaleDateString()]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(E,{variant:"outline",size:"sm",children:"View"}),f.status==="draft"&&e.jsx(E,{size:"sm",children:"Continue"})]})]})})]},f.id))})});return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold",children:"Splitsheet Management"}),e.jsx("p",{className:"text-muted-foreground",children:"Professional splitsheet creation and signing service"})]}),e.jsx(Lt,{to:"/splitsheet",children:e.jsxs(E,{children:[e.jsx(xt,{className:"h-4 w-4 mr-2"}),"Create Splitsheet"]})})]}),e.jsxs(Ut,{value:s,onValueChange:n,children:[e.jsxs(jt,{children:[e.jsx(Ne,{value:"overview",children:"Service Overview"}),e.jsx(Ne,{value:"my-splitsheets",children:"My Splitsheets"})]}),e.jsx(ge,{value:"overview",children:v()}),e.jsx(ge,{value:"my-splitsheets",children:y()})]})]})}const WQ=pe.object({title:pe.string().min(2,"Title must be at least 2 characters"),clientName:pe.string().min(2,"Client name is required"),clientEmail:pe.string().email("Valid email is required"),serviceType:pe.string().min(1,"Please select a service type"),duration:pe.string().min(1,"Please select duration"),rate:pe.string().min(1,"Rate is required"),meetingType:pe.string().min(1,"Please select meeting type"),notes:pe.string().optional()});function HQ({user:t}){const[s,n]=N.useState(new Date),[a,r]=N.useState(!1),[i,l]=N.useState(""),{toast:c}=nt(),o=Tt(),d=Cn({resolver:kn(WQ),defaultValues:{title:"",clientName:"",clientEmail:"",serviceType:"",duration:"",rate:"",meetingType:"",notes:""}}),{data:h,isLoading:u}=ke({queryKey:["/api/consultations",t.id],queryFn:async()=>await(await xe(`/api/consultations?professionalId=${t.id}`)).json()}),{data:m}=ke({queryKey:["/api/professional/availability",t.id,s],queryFn:async()=>{const S=s==null?void 0:s.toISOString().split("T")[0];return await(await xe(`/api/professional/availability?professionalId=${t.id}&date=${S}`)).json()},enabled:!!s}),p=Xe({mutationFn:async S=>{const k={...S,professionalId:t.id,date:s==null?void 0:s.toISOString().split("T")[0],timeSlot:i,status:"pending"};return await(await xe("/api/consultations",{method:"POST",body:JSON.stringify(k)})).json()},onSuccess:()=>{o.invalidateQueries({queryKey:["/api/consultations"]}),r(!1),d.reset(),l(""),c({title:"Consultation Scheduled",description:"The consultation has been scheduled successfully."})}}),g=Xe({mutationFn:async({id:S,status:k})=>await(await xe(`/api/consultations/${S}`,{method:"PUT",body:JSON.stringify({status:k})})).json(),onSuccess:()=>{o.invalidateQueries({queryKey:["/api/consultations"]}),c({title:"Status Updated",description:"Consultation status has been updated."})}}),x=S=>{if(!i){c({title:"Time Slot Required",description:"Please select a time slot for the consultation.",variant:"destructive"});return}p.mutate(S)},v=["09:00","09:30","10:00","10:30","11:00","11:30","12:00","12:30","13:00","13:30","14:00","14:30","15:00","15:30","16:00","16:30","17:00","17:30"];m!=null&&m.available;const y=(m==null?void 0:m.booked)||[],f=h||[{id:1,title:"Brand Strategy Consultation",clientName:"Sarah Johnson",clientEmail:"sarah@example.com",date:"2024-02-15",timeSlot:"14:00",duration:"60",serviceType:"Marketing Strategy",rate:"150",status:"confirmed",meetingType:"video"},{id:2,title:"Music Production Review",clientName:"Mike Chen",clientEmail:"mike@example.com",date:"2024-02-16",timeSlot:"10:30",duration:"90",serviceType:"Music Production",rate:"200",status:"pending",meetingType:"in-person"}],b=S=>{switch(S){case"confirmed":return"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200";case"pending":return"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200";case"cancelled":return"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200";case"completed":return"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200";default:return"bg-gray-100 text-gray-800 dark:bg-gray-900 dark:text-gray-200"}},j=S=>{switch(S){case"video":return e.jsx(ca,{className:"h-4 w-4"});case"phone":return e.jsx(op,{className:"h-4 w-4"});case"in-person":return e.jsx(cn,{className:"h-4 w-4"});default:return e.jsx(E6,{className:"h-4 w-4"})}};return u?e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{className:"animate-pulse",children:[e.jsx("div",{className:"h-8 bg-gray-200 rounded w-1/3 mb-4"}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsx("div",{className:"h-96 bg-gray-200 rounded-lg"}),e.jsx("div",{className:"space-y-4",children:[1,2,3].map(S=>e.jsx("div",{className:"h-24 bg-gray-200 rounded-lg"},S))})]})]})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Consultation Calendar"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Manage your consultation bookings and availability"})]}),e.jsxs(kt,{open:a,onOpenChange:r,children:[e.jsx(ma,{asChild:!0,children:e.jsxs(E,{className:"flex items-center gap-2",children:[e.jsx(st,{className:"h-4 w-4"}),"Schedule Consultation"]})}),e.jsxs(wt,{className:"sm:max-w-[600px]",children:[e.jsx(St,{children:e.jsx(Ct,{children:"Schedule New Consultation"})}),e.jsx(On,{...d,children:e.jsxs("form",{onSubmit:d.handleSubmit(x),className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx($e,{control:d.control,name:"title",render:({field:S})=>e.jsxs(Fe,{children:[e.jsx(qe,{children:"Consultation Title"}),e.jsx(Le,{children:e.jsx($,{placeholder:"e.g., Brand Strategy Session",...S})}),e.jsx(ze,{})]})}),e.jsx($e,{control:d.control,name:"serviceType",render:({field:S})=>e.jsxs(Fe,{children:[e.jsx(qe,{children:"Service Type"}),e.jsxs(Re,{onValueChange:S.onChange,value:S.value,children:[e.jsx(Le,{children:e.jsx(Me,{children:e.jsx(Oe,{placeholder:"Select service"})})}),e.jsxs(_e,{children:[e.jsx(U,{value:"marketing",children:"Marketing Strategy"}),e.jsx(U,{value:"production",children:"Music Production"}),e.jsx(U,{value:"photography",children:"Photography"}),e.jsx(U,{value:"videography",children:"Videography"}),e.jsx(U,{value:"coaching",children:"Career Coaching"}),e.jsx(U,{value:"other",children:"Other"})]})]}),e.jsx(ze,{})]})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx($e,{control:d.control,name:"clientName",render:({field:S})=>e.jsxs(Fe,{children:[e.jsx(qe,{children:"Client Name"}),e.jsx(Le,{children:e.jsx($,{placeholder:"Client full name",...S})}),e.jsx(ze,{})]})}),e.jsx($e,{control:d.control,name:"clientEmail",render:({field:S})=>e.jsxs(Fe,{children:[e.jsx(qe,{children:"Client Email"}),e.jsx(Le,{children:e.jsx($,{type:"email",placeholder:"client@example.com",...S})}),e.jsx(ze,{})]})})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsx($e,{control:d.control,name:"duration",render:({field:S})=>e.jsxs(Fe,{children:[e.jsx(qe,{children:"Duration (minutes)"}),e.jsxs(Re,{onValueChange:S.onChange,value:S.value,children:[e.jsx(Le,{children:e.jsx(Me,{children:e.jsx(Oe,{placeholder:"Duration"})})}),e.jsxs(_e,{children:[e.jsx(U,{value:"30",children:"30 minutes"}),e.jsx(U,{value:"60",children:"60 minutes"}),e.jsx(U,{value:"90",children:"90 minutes"}),e.jsx(U,{value:"120",children:"120 minutes"})]})]}),e.jsx(ze,{})]})}),e.jsx($e,{control:d.control,name:"rate",render:({field:S})=>e.jsxs(Fe,{children:[e.jsx(qe,{children:"Rate ($)"}),e.jsx(Le,{children:e.jsx($,{type:"number",placeholder:"150",...S})}),e.jsx(ze,{})]})}),e.jsx($e,{control:d.control,name:"meetingType",render:({field:S})=>e.jsxs(Fe,{children:[e.jsx(qe,{children:"Meeting Type"}),e.jsxs(Re,{onValueChange:S.onChange,value:S.value,children:[e.jsx(Le,{children:e.jsx(Me,{children:e.jsx(Oe,{placeholder:"Type"})})}),e.jsxs(_e,{children:[e.jsx(U,{value:"video",children:"Video Call"}),e.jsx(U,{value:"phone",children:"Phone Call"}),e.jsx(U,{value:"in-person",children:"In Person"})]})]}),e.jsx(ze,{})]})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx(q,{children:"Select Date & Time"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx("div",{children:e.jsx(Ql,{mode:"single",selected:s,onSelect:n,disabled:S=>S<new Date,className:"rounded-md border"})}),e.jsxs("div",{children:[e.jsx(q,{className:"text-sm font-medium mb-2 block",children:"Available Time Slots"}),e.jsx("div",{className:"grid grid-cols-3 gap-2 max-h-64 overflow-y-auto",children:v.map(S=>{const k=y.includes(S),T=i===S;return e.jsx(E,{variant:T?"default":"outline",size:"sm",disabled:k,onClick:()=>l(S),className:`text-xs ${k?"opacity-50":""}`,children:S},S)})})]})]})]}),e.jsx($e,{control:d.control,name:"notes",render:({field:S})=>e.jsxs(Fe,{children:[e.jsx(qe,{children:"Notes (Optional)"}),e.jsx(Le,{children:e.jsx(mt,{placeholder:"Additional notes about the consultation...",...S})}),e.jsx(ze,{})]})}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(E,{type:"button",variant:"outline",onClick:()=>r(!1),children:"Cancel"}),e.jsx(E,{type:"submit",disabled:p.isPending,children:"Schedule Consultation"})]})]})})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs(R,{children:[e.jsx(Y,{children:e.jsxs(Q,{className:"flex items-center gap-2",children:[e.jsx(dt,{className:"h-5 w-5"}),"Calendar View"]})}),e.jsxs(L,{children:[e.jsx(Ql,{mode:"single",selected:s,onSelect:n,className:"rounded-md border"}),e.jsxs("div",{className:"mt-4",children:[e.jsxs("h4",{className:"font-semibold mb-2",children:["Consultations for ",s==null?void 0:s.toLocaleDateString()]}),e.jsx("div",{className:"space-y-2",children:f.filter(S=>S.date===(s==null?void 0:s.toISOString().split("T")[0])).map(S=>e.jsxs("div",{className:"p-2 bg-blue-50 dark:bg-blue-950 rounded text-sm",children:[e.jsx("div",{className:"font-medium",children:S.title}),e.jsxs("div",{className:"text-gray-600 dark:text-gray-400",children:[S.timeSlot," - ",S.clientName]})]},S.id))})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h4",{className:"text-lg font-semibold",children:"Upcoming Consultations"}),f.map(S=>e.jsx(R,{className:"bg-gradient-to-br from-white to-blue-50 dark:from-gray-900 dark:to-blue-950",children:e.jsxs(L,{className:"p-4",children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsxs("div",{children:[e.jsx("h5",{className:"font-semibold text-gray-900 dark:text-white",children:S.title}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:S.clientName})]}),e.jsx(X,{className:b(S.status),children:S.status})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(dt,{className:"h-4 w-4 text-gray-500"}),S.date]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Qt,{className:"h-4 w-4 text-gray-500"}),S.timeSlot," (",S.duration,"m)"]}),e.jsxs("div",{className:"flex items-center gap-2",children:[j(S.meetingType),S.meetingType]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(It,{className:"h-4 w-4 text-gray-500"}),"$",S.rate]})]}),S.status==="pending"&&e.jsxs("div",{className:"flex gap-2 mt-4",children:[e.jsxs(E,{size:"sm",onClick:()=>g.mutate({id:S.id,status:"confirmed"}),className:"flex-1",children:[e.jsx(ir,{className:"h-3 w-3 mr-1"}),"Confirm"]}),e.jsxs(E,{size:"sm",variant:"outline",onClick:()=>g.mutate({id:S.id,status:"cancelled"}),className:"flex-1",children:[e.jsx(Xt,{className:"h-3 w-3 mr-1"}),"Cancel"]})]})]})},S.id))]})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-4 gap-4",children:[e.jsxs(R,{className:"p-4 text-center bg-gradient-to-br from-blue-50 to-blue-100 dark:from-blue-950 dark:to-blue-900",children:[e.jsx("div",{className:"text-2xl font-bold text-blue-700 dark:text-blue-300",children:f.length}),e.jsx("div",{className:"text-sm text-blue-600 dark:text-blue-400",children:"Total Consultations"})]}),e.jsxs(R,{className:"p-4 text-center bg-gradient-to-br from-green-50 to-green-100 dark:from-green-950 dark:to-green-900",children:[e.jsx("div",{className:"text-2xl font-bold text-green-700 dark:text-green-300",children:f.filter(S=>S.status==="confirmed").length}),e.jsx("div",{className:"text-sm text-green-600 dark:text-green-400",children:"Confirmed"})]}),e.jsxs(R,{className:"p-4 text-center bg-gradient-to-br from-yellow-50 to-yellow-100 dark:from-yellow-950 dark:to-yellow-900",children:[e.jsx("div",{className:"text-2xl font-bold text-yellow-700 dark:text-yellow-300",children:f.filter(S=>S.status==="pending").length}),e.jsx("div",{className:"text-sm text-yellow-600 dark:text-yellow-400",children:"Pending"})]}),e.jsxs(R,{className:"p-4 text-center bg-gradient-to-br from-purple-50 to-purple-100 dark:from-purple-950 dark:to-purple-900",children:[e.jsxs("div",{className:"text-2xl font-bold text-purple-700 dark:text-purple-300",children:["$",f.reduce((S,k)=>S+parseInt(k.rate),0)]}),e.jsx("div",{className:"text-sm text-purple-600 dark:text-purple-400",children:"Total Revenue"})]})]})]})}function KQ({user:t}){const[s,n]=N.useState(""),[a,r]=N.useState("all"),[i,l]=N.useState(!1),[c,o]=N.useState(null),[d,h]=N.useState({title:"",type:"",category:"",content:"",description:"",tags:"",isPublic:!0}),{toast:u}=nt(),m=Tt(),{data:p,isLoading:g}=ke({queryKey:["/api/knowledge-base",t.id],queryFn:async()=>await(await xe(`/api/knowledge-base?professionalId=${t.id}`)).json()}),x=Xe({mutationFn:async w=>await(await xe("/api/knowledge-base",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({...w,professionalId:t.id})})).json(),onSuccess:()=>{m.invalidateQueries({queryKey:["/api/knowledge-base"]}),l(!1),f(),u({title:"Resource Created",description:"Knowledge base resource has been created successfully."})}}),v=Xe({mutationFn:async w=>await(await xe(`/api/knowledge-base/${w.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(w)})).json(),onSuccess:()=>{m.invalidateQueries({queryKey:["/api/knowledge-base"]}),o(null),f(),u({title:"Resource Updated",description:"Knowledge base resource has been updated."})}}),y=Xe({mutationFn:async w=>await(await xe(`/api/knowledge-base/${w}`,{method:"DELETE"})).json(),onSuccess:()=>{m.invalidateQueries({queryKey:["/api/knowledge-base"]}),u({title:"Resource Deleted",description:"Knowledge base resource has been deleted."})}}),f=()=>{h({title:"",type:"",category:"",content:"",description:"",tags:"",isPublic:!0})},b=w=>{w.preventDefault();const P={...d,tags:d.tags.split(",").map(M=>M.trim()).filter(Boolean)};c?v.mutate({...P,id:c.id}):x.mutate(P)},j=w=>{o(w),h({title:w.title,type:w.type,category:w.category,content:w.content,description:w.description||"",tags:w.tags?w.tags.join(", "):"",isPublic:w.isPublic}),l(!0)},S=w=>{switch(w){case"article":return e.jsx(xt,{className:"h-4 w-4"});case"video":return e.jsx(ca,{className:"h-4 w-4"});case"template":return e.jsx(Cs,{className:"h-4 w-4"});case"guide":return e.jsx(_a,{className:"h-4 w-4"});default:return e.jsx(xt,{className:"h-4 w-4"})}},k=w=>{switch(w){case"article":return"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200";case"video":return"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200";case"template":return"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200";case"guide":return"bg-purple-100 text-purple-800 dark:bg-purple-900 dark:text-purple-200";default:return"bg-gray-100 text-gray-800 dark:bg-gray-900 dark:text-gray-200"}},T=p||[{id:1,title:"Complete Guide to Music Production",type:"guide",category:"Production",description:"Comprehensive guide covering all aspects of music production from recording to mastering.",tags:["music","production","recording","mastering"],isPublic:!0,createdAt:"2024-01-15",views:245,downloads:89},{id:2,title:"Artist Branding Template",type:"template",category:"Marketing",description:"Professional template for developing artist brand identity and visual guidelines.",tags:["branding","marketing","template","visual"],isPublic:!0,createdAt:"2024-01-20",views:156,downloads:67},{id:3,title:"Recording Session Best Practices",type:"article",category:"Production",description:"Essential tips and techniques for running efficient and productive recording sessions.",tags:["recording","studio","workflow","efficiency"],isPublic:!1,createdAt:"2024-02-01",views:89,downloads:12}],A=["all","Production","Marketing","Business","Technical","Legal"],C=T.filter(w=>{const P=w.title.toLowerCase().includes(s.toLowerCase())||w.description.toLowerCase().includes(s.toLowerCase())||w.tags.some(I=>I.toLowerCase().includes(s.toLowerCase())),M=a==="all"||w.category===a;return P&&M});return g?e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{className:"animate-pulse",children:[e.jsx("div",{className:"h-8 bg-gray-200 rounded w-1/3 mb-4"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[1,2,3].map(w=>e.jsx("div",{className:"h-48 bg-gray-200 rounded-lg"},w))})]})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Knowledge Base"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Manage your professional resources and client materials"})]}),e.jsxs(kt,{open:i,onOpenChange:l,children:[e.jsx(ma,{asChild:!0,children:e.jsxs(E,{className:"flex items-center gap-2",children:[e.jsx(st,{className:"h-4 w-4"}),"Add Resource"]})}),e.jsxs(wt,{className:"sm:max-w-[600px]",children:[e.jsx(St,{children:e.jsx(Ct,{children:c?"Edit Resource":"Add New Resource"})}),e.jsxs("form",{onSubmit:b,className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(q,{htmlFor:"title",children:"Title"}),e.jsx($,{id:"title",value:d.title,onChange:w=>h({...d,title:w.target.value}),placeholder:"Resource title",required:!0})]}),e.jsxs("div",{children:[e.jsx(q,{htmlFor:"type",children:"Type"}),e.jsxs(Re,{value:d.type,onValueChange:w=>h({...d,type:w}),children:[e.jsx(Me,{children:e.jsx(Oe,{placeholder:"Select type"})}),e.jsxs(_e,{children:[e.jsx(U,{value:"article",children:"Article"}),e.jsx(U,{value:"guide",children:"Guide"}),e.jsx(U,{value:"template",children:"Template"}),e.jsx(U,{value:"video",children:"Video"})]})]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(q,{htmlFor:"category",children:"Category"}),e.jsxs(Re,{value:d.category,onValueChange:w=>h({...d,category:w}),children:[e.jsx(Me,{children:e.jsx(Oe,{placeholder:"Select category"})}),e.jsxs(_e,{children:[e.jsx(U,{value:"Production",children:"Production"}),e.jsx(U,{value:"Marketing",children:"Marketing"}),e.jsx(U,{value:"Business",children:"Business"}),e.jsx(U,{value:"Technical",children:"Technical"}),e.jsx(U,{value:"Legal",children:"Legal"})]})]})]}),e.jsxs("div",{children:[e.jsx(q,{htmlFor:"tags",children:"Tags (comma-separated)"}),e.jsx($,{id:"tags",value:d.tags,onChange:w=>h({...d,tags:w.target.value}),placeholder:"music, production, recording"})]})]}),e.jsxs("div",{children:[e.jsx(q,{htmlFor:"description",children:"Description"}),e.jsx(mt,{id:"description",value:d.description,onChange:w=>h({...d,description:w.target.value}),placeholder:"Brief description of the resource",rows:3})]}),e.jsxs("div",{children:[e.jsx(q,{htmlFor:"content",children:"Content"}),e.jsx(mt,{id:"content",value:d.content,onChange:w=>h({...d,content:w.target.value}),placeholder:"Full content of the resource",rows:8})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",id:"isPublic",checked:d.isPublic,onChange:w=>h({...d,isPublic:w.target.checked})}),e.jsx(q,{htmlFor:"isPublic",children:"Make this resource publicly accessible to clients"})]}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(E,{type:"button",variant:"outline",onClick:()=>{l(!1),o(null),f()},children:"Cancel"}),e.jsxs(E,{type:"submit",disabled:x.isPending||v.isPending,children:[c?"Update":"Create"," Resource"]})]})]})]})]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(Bs,{className:"absolute left-3 top-3 h-4 w-4 text-gray-400"}),e.jsx($,{placeholder:"Search resources...",value:s,onChange:w=>n(w.target.value),className:"pl-10"})]}),e.jsxs(Re,{value:a,onValueChange:r,children:[e.jsx(Me,{className:"w-full sm:w-[200px]",children:e.jsx(Oe,{placeholder:"Category"})}),e.jsx(_e,{children:A.map(w=>e.jsx(U,{value:w,children:w==="all"?"All Categories":w},w))})]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:C.map(w=>e.jsxs(R,{className:"bg-gradient-to-br from-white to-gray-50 dark:from-gray-900 dark:to-gray-800 hover:shadow-lg transition-shadow duration-200",children:[e.jsx(Y,{className:"pb-3",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[S(w.type),e.jsx(Q,{className:"text-lg",children:w.title})]}),e.jsxs("div",{className:"flex gap-1",children:[e.jsx(E,{variant:"ghost",size:"sm",onClick:()=>j(w),children:e.jsx($s,{className:"h-4 w-4"})}),e.jsx(E,{variant:"ghost",size:"sm",onClick:()=>y.mutate(w.id),children:e.jsx(Vt,{className:"h-4 w-4"})})]})]})}),e.jsxs(L,{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(X,{className:k(w.type),children:w.type}),e.jsx(X,{variant:w.isPublic?"default":"secondary",children:w.isPublic?"Public":"Private"})]}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:w.description}),e.jsxs("div",{className:"flex flex-wrap gap-1",children:[w.tags.slice(0,3).map(P=>e.jsxs(X,{variant:"outline",className:"text-xs",children:[e.jsx(up,{className:"h-2 w-2 mr-1"}),P]},P)),w.tags.length>3&&e.jsxs(X,{variant:"outline",className:"text-xs",children:["+",w.tags.length-3," more"]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm text-gray-600 dark:text-gray-400",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(Ns,{className:"h-3 w-3"}),w.views," views"]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(Cs,{className:"h-3 w-3"}),w.downloads," downloads"]})]}),e.jsxs("div",{className:"flex items-center gap-1 text-xs text-gray-500",children:[e.jsx(Qt,{className:"h-3 w-3"}),"Created ",new Date(w.createdAt).toLocaleDateString()]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(E,{variant:"outline",size:"sm",className:"flex-1",children:[e.jsx(Ns,{className:"h-3 w-3 mr-1"}),"View"]}),e.jsxs(E,{variant:"outline",size:"sm",className:"flex-1",children:[e.jsx(Cs,{className:"h-3 w-3 mr-1"}),"Share"]})]})]})]},w.id))}),C.length===0&&e.jsxs(R,{className:"p-12 text-center",children:[e.jsx(_a,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-2",children:s||a!=="all"?"No Resources Found":"No Resources Yet"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-4",children:s||a!=="all"?"Try adjusting your search or filter criteria":"Start building your knowledge base with helpful resources for your clients"}),!s&&a==="all"&&e.jsxs(E,{onClick:()=>l(!0),children:[e.jsx(st,{className:"h-4 w-4 mr-2"}),"Add First Resource"]})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-4 gap-4",children:[e.jsxs(R,{className:"p-4 text-center bg-gradient-to-br from-blue-50 to-blue-100 dark:from-blue-950 dark:to-blue-900",children:[e.jsx("div",{className:"text-2xl font-bold text-blue-700 dark:text-blue-300",children:T.length}),e.jsx("div",{className:"text-sm text-blue-600 dark:text-blue-400",children:"Total Resources"})]}),e.jsxs(R,{className:"p-4 text-center bg-gradient-to-br from-green-50 to-green-100 dark:from-green-950 dark:to-green-900",children:[e.jsx("div",{className:"text-2xl font-bold text-green-700 dark:text-green-300",children:T.filter(w=>w.isPublic).length}),e.jsx("div",{className:"text-sm text-green-600 dark:text-green-400",children:"Public Resources"})]}),e.jsxs(R,{className:"p-4 text-center bg-gradient-to-br from-purple-50 to-purple-100 dark:from-purple-950 dark:to-purple-900",children:[e.jsx("div",{className:"text-2xl font-bold text-purple-700 dark:text-purple-300",children:T.reduce((w,P)=>w+P.views,0)}),e.jsx("div",{className:"text-sm text-purple-600 dark:text-purple-400",children:"Total Views"})]}),e.jsxs(R,{className:"p-4 text-center bg-gradient-to-br from-orange-50 to-orange-100 dark:from-orange-950 dark:to-orange-900",children:[e.jsx("div",{className:"text-2xl font-bold text-orange-700 dark:text-orange-300",children:T.reduce((w,P)=>w+P.downloads,0)}),e.jsx("div",{className:"text-sm text-orange-600 dark:text-orange-400",children:"Total Downloads"})]})]})]})}const YQ=({isOpen:t,onClose:s,user:n})=>{const[a,r]=N.useState([{id:1,title:"What Do We Do",artist:"L-L Octave",key:"Am",bpm:120,duration:"3:45"},{id:2,title:"Caribbean Dreams",artist:"Princess Trinidad",key:"G",bpm:140,duration:"4:12"}]),[i,l]=N.useState({title:"",key:"",bpm:"",duration:""}),c=()=>{i.title&&(r([...a,{id:Date.now(),...i,artist:(n==null?void 0:n.fullName)||"Unknown Artist",bpm:parseInt(i.bpm)||120}]),l({title:"",key:"",bpm:"",duration:""}))};return e.jsx(kt,{open:t,onOpenChange:s,children:e.jsxs(wt,{className:"max-w-4xl max-h-[90vh] overflow-y-auto",children:[e.jsxs(St,{children:[e.jsxs(Ct,{className:"flex items-center gap-2",children:[e.jsx(Ue,{className:"h-5 w-5"}),"Advanced Setlist Manager"]}),e.jsx(us,{children:"Create and manage performance setlists with song arrangements, keys, and timing"})]}),e.jsxs(Ut,{defaultValue:"current",className:"w-full",children:[e.jsxs(jt,{className:"grid w-full grid-cols-3",children:[e.jsx(Ne,{value:"current",children:"Current Setlist"}),e.jsx(Ne,{value:"add",children:"Add Songs"}),e.jsx(Ne,{value:"arrangements",children:"Arrangements"})]}),e.jsxs(ge,{value:"current",className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Performance Setlist"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(E,{size:"sm",children:[e.jsx(js,{className:"h-4 w-4 mr-1"}),"Save"]}),e.jsxs(E,{size:"sm",variant:"outline",children:[e.jsx(Cs,{className:"h-4 w-4 mr-1"}),"Export"]})]})]}),e.jsx("div",{className:"space-y-2",children:a.map((o,d)=>e.jsx(R,{className:"p-3",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(X,{variant:"outline",children:d+1}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:o.title}),e.jsx("p",{className:"text-sm text-muted-foreground",children:o.artist})]})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(X,{children:o.key}),e.jsxs(X,{variant:"secondary",children:[o.bpm," BPM"]}),e.jsx("span",{className:"text-sm",children:o.duration}),e.jsx(E,{size:"sm",variant:"ghost",children:e.jsx(Vt,{className:"h-4 w-4"})})]})]})},o.id))})]}),e.jsx(ge,{value:"add",className:"space-y-4",children:e.jsxs(R,{className:"p-4",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Add New Song"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(q,{children:"Song Title"}),e.jsx($,{value:i.title,onChange:o=>l({...i,title:o.target.value}),placeholder:"Enter song title"})]}),e.jsxs("div",{children:[e.jsx(q,{children:"Key"}),e.jsxs(Re,{value:i.key,onValueChange:o=>l({...i,key:o}),children:[e.jsx(Me,{children:e.jsx(Oe,{placeholder:"Select key"})}),e.jsxs(_e,{children:[e.jsx(U,{value:"C",children:"C Major"}),e.jsx(U,{value:"G",children:"G Major"}),e.jsx(U,{value:"D",children:"D Major"}),e.jsx(U,{value:"A",children:"A Major"}),e.jsx(U,{value:"Am",children:"A Minor"}),e.jsx(U,{value:"Em",children:"E Minor"})]})]})]}),e.jsxs("div",{children:[e.jsx(q,{children:"BPM"}),e.jsx($,{type:"number",value:i.bpm,onChange:o=>l({...i,bpm:o.target.value}),placeholder:"120"})]}),e.jsxs("div",{children:[e.jsx(q,{children:"Duration"}),e.jsx($,{value:i.duration,onChange:o=>l({...i,duration:o.target.value}),placeholder:"3:45"})]})]}),e.jsxs(E,{onClick:c,className:"mt-4",children:[e.jsx(st,{className:"h-4 w-4 mr-2"}),"Add Song"]})]})}),e.jsx(ge,{value:"arrangements",className:"space-y-4",children:e.jsxs(R,{className:"p-4",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Song Arrangements"}),e.jsx("p",{className:"text-muted-foreground",children:"Advanced arrangements and chord progressions will be displayed here"})]})})]})]})})},QQ=({isOpen:t,onClose:s,user:n})=>{const[a,r]=N.useState([{id:1,name:"Fender Stratocaster",type:"Guitar",condition:"Excellent",value:"$1,200"},{id:2,name:"Shure SM58",type:"Microphone",condition:"Good",value:"$100"},{id:3,name:"Yamaha P-125",type:"Keyboard",condition:"Excellent",value:"$650"}]),i={Guitar:Po,Microphone:yn,Keyboard:S6,Drums:_y,Headphones:jn};return e.jsx(kt,{open:t,onOpenChange:s,children:e.jsxs(wt,{className:"max-w-4xl max-h-[90vh] overflow-y-auto",children:[e.jsxs(St,{children:[e.jsxs(Ct,{className:"flex items-center gap-2",children:[e.jsx(Po,{className:"h-5 w-5"}),"Equipment Manager"]}),e.jsx(us,{children:"Manage your musical equipment, instruments, and technical gear"})]}),e.jsxs(Ut,{defaultValue:"inventory",className:"w-full",children:[e.jsxs(jt,{className:"grid w-full grid-cols-4",children:[e.jsx(Ne,{value:"inventory",children:"Inventory"}),e.jsx(Ne,{value:"add",children:"Add Equipment"}),e.jsx(Ne,{value:"maintenance",children:"Maintenance"}),e.jsx(Ne,{value:"rental",children:"Rental"})]}),e.jsxs(ge,{value:"inventory",className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Equipment Inventory"}),e.jsxs(E,{size:"sm",children:[e.jsx(st,{className:"h-4 w-4 mr-1"}),"Add Equipment"]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:a.map(l=>{const c=i[l.type]||Po;return e.jsx(R,{className:"p-4",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(c,{className:"h-8 w-8 text-primary"}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium",children:l.name}),e.jsx("p",{className:"text-sm text-muted-foreground",children:l.type}),e.jsx(X,{variant:l.condition==="Excellent"?"default":"secondary",children:l.condition})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"font-semibold",children:l.value}),e.jsxs("div",{className:"flex gap-1 mt-2",children:[e.jsx(E,{size:"sm",variant:"ghost",children:e.jsx($s,{className:"h-4 w-4"})}),e.jsx(E,{size:"sm",variant:"ghost",children:e.jsx(Vt,{className:"h-4 w-4"})})]})]})]})},l.id)})})]}),e.jsx(ge,{value:"add",className:"space-y-4",children:e.jsxs(R,{className:"p-4",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Add New Equipment"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(q,{children:"Equipment Name"}),e.jsx($,{placeholder:"e.g., Fender Stratocaster"})]}),e.jsxs("div",{children:[e.jsx(q,{children:"Type"}),e.jsxs(Re,{children:[e.jsx(Me,{children:e.jsx(Oe,{placeholder:"Select type"})}),e.jsxs(_e,{children:[e.jsx(U,{value:"guitar",children:"Guitar"}),e.jsx(U,{value:"microphone",children:"Microphone"}),e.jsx(U,{value:"keyboard",children:"Keyboard"}),e.jsx(U,{value:"drums",children:"Drums"}),e.jsx(U,{value:"headphones",children:"Headphones"})]})]})]}),e.jsxs("div",{children:[e.jsx(q,{children:"Condition"}),e.jsxs(Re,{children:[e.jsx(Me,{children:e.jsx(Oe,{placeholder:"Select condition"})}),e.jsxs(_e,{children:[e.jsx(U,{value:"excellent",children:"Excellent"}),e.jsx(U,{value:"good",children:"Good"}),e.jsx(U,{value:"fair",children:"Fair"}),e.jsx(U,{value:"needs-repair",children:"Needs Repair"})]})]})]}),e.jsxs("div",{children:[e.jsx(q,{children:"Value"}),e.jsx($,{placeholder:"$1,200"})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx(q,{children:"Description"}),e.jsx(mt,{placeholder:"Additional details about the equipment..."})]})]}),e.jsxs(E,{className:"mt-4",children:[e.jsx(st,{className:"h-4 w-4 mr-2"}),"Add Equipment"]})]})}),e.jsx(ge,{value:"maintenance",className:"space-y-4",children:e.jsxs(R,{className:"p-4",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Maintenance Schedule"}),e.jsx("p",{className:"text-muted-foreground",children:"Equipment maintenance tracking and scheduling"})]})}),e.jsx(ge,{value:"rental",className:"space-y-4",children:e.jsxs(R,{className:"p-4",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Equipment Rental"}),e.jsx("p",{className:"text-muted-foreground",children:"Rent out equipment to other musicians"})]})})]})]})})},ZQ=({isOpen:t,onClose:s,user:n})=>{const[a]=N.useState([{id:1,name:"L-L Octave",genre:"Caribbean Neo Soul",followers:12500,isFollowing:!0},{id:2,name:"Princess Trinidad",genre:"Dancehall/Reggae",followers:8200,isFollowing:!0},{id:3,name:"JCro",genre:"Afrobeats/Hip-Hop",followers:15600,isFollowing:!1}]);return e.jsx(kt,{open:t,onOpenChange:s,children:e.jsxs(wt,{className:"max-w-3xl max-h-[90vh] overflow-y-auto",children:[e.jsxs(St,{children:[e.jsxs(Ct,{className:"flex items-center gap-2",children:[e.jsx(gn,{className:"h-5 w-5"}),"Fan Engagement Hub"]}),e.jsx(us,{children:"Connect with your favorite artists and discover new music"})]}),e.jsxs(Ut,{defaultValue:"followed",className:"w-full",children:[e.jsxs(jt,{className:"grid w-full grid-cols-3",children:[e.jsx(Ne,{value:"followed",children:"Followed Artists"}),e.jsx(Ne,{value:"recommendations",children:"Recommendations"}),e.jsx(Ne,{value:"activity",children:"Activity"})]}),e.jsxs(ge,{value:"followed",className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Your Followed Artists"}),e.jsx(E,{size:"sm",children:"Discover More"})]}),e.jsx("div",{className:"space-y-3",children:a.map(r=>e.jsx(R,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-purple-500 to-pink-500 rounded-full flex items-center justify-center",children:e.jsx(Ue,{className:"h-6 w-6 text-white"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium",children:r.name}),e.jsx("p",{className:"text-sm text-muted-foreground",children:r.genre}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[r.followers.toLocaleString()," followers"]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(E,{size:"sm",variant:"outline",children:[e.jsx(Gn,{className:"h-4 w-4 mr-1"}),"Listen"]}),e.jsxs(E,{size:"sm",variant:r.isFollowing?"default":"outline",children:[e.jsx(gn,{className:`h-4 w-4 mr-1 ${r.isFollowing?"fill-current":""}`}),r.isFollowing?"Following":"Follow"]})]})]})},r.id))})]}),e.jsx(ge,{value:"recommendations",className:"space-y-4",children:e.jsxs(R,{className:"p-4",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Recommended Artists"}),e.jsx("p",{className:"text-muted-foreground",children:"Discover new artists based on your listening history"})]})}),e.jsx(ge,{value:"activity",className:"space-y-4",children:e.jsxs(R,{className:"p-4",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Recent Activity"}),e.jsx("p",{className:"text-muted-foreground",children:"Your recent interactions and listening activity"})]})})]})]})})},XQ=({isOpen:t,onClose:s,user:n})=>{const[a]=N.useState([{id:1,client:"Rising Artist",service:"Career Consultation",date:"2025-01-28",time:"2:00 PM",status:"confirmed"},{id:2,client:"Indie Band",service:"Marketing Strategy",date:"2025-01-30",time:"10:00 AM",status:"pending"}]);return e.jsx(kt,{open:t,onOpenChange:s,children:e.jsxs(wt,{className:"max-w-4xl max-h-[90vh] overflow-y-auto",children:[e.jsxs(St,{children:[e.jsxs(Ct,{className:"flex items-center gap-2",children:[e.jsx(dt,{className:"h-5 w-5"}),"Consultation Management"]}),e.jsx(us,{children:"Manage your professional consultation appointments and services"})]}),e.jsxs(Ut,{defaultValue:"upcoming",className:"w-full",children:[e.jsxs(jt,{className:"grid w-full grid-cols-4",children:[e.jsx(Ne,{value:"upcoming",children:"Upcoming"}),e.jsx(Ne,{value:"schedule",children:"Schedule"}),e.jsx(Ne,{value:"services",children:"Services"}),e.jsx(Ne,{value:"clients",children:"Clients"})]}),e.jsxs(ge,{value:"upcoming",className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Upcoming Consultations"}),e.jsxs(E,{size:"sm",children:[e.jsx(st,{className:"h-4 w-4 mr-1"}),"New Appointment"]})]}),e.jsx("div",{className:"space-y-3",children:a.map(r=>e.jsx(R,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium",children:r.client}),e.jsx("p",{className:"text-sm text-muted-foreground",children:r.service}),e.jsxs("p",{className:"text-sm",children:[r.date," at ",r.time]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(X,{variant:r.status==="confirmed"?"default":"secondary",children:r.status}),e.jsx(E,{size:"sm",variant:"outline",children:e.jsx($s,{className:"h-4 w-4"})})]})]})},r.id))})]}),e.jsx(ge,{value:"schedule",className:"space-y-4",children:e.jsxs(R,{className:"p-4",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Availability Schedule"}),e.jsx("p",{className:"text-muted-foreground",children:"Set your available times for consultations"})]})}),e.jsx(ge,{value:"services",className:"space-y-4",children:e.jsxs(R,{className:"p-4",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Service Management"}),e.jsx("p",{className:"text-muted-foreground",children:"Manage your consultation services and pricing"})]})}),e.jsx(ge,{value:"clients",className:"space-y-4",children:e.jsxs(R,{className:"p-4",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Client Management"}),e.jsx("p",{className:"text-muted-foreground",children:"Manage your consultation clients and history"})]})})]})]})})},N1=t=>({1:"Superadmin",2:"Admin",3:"Managed Artist",4:"Artist",5:"Managed Musician",6:"Musician",7:"Managed Professional",8:"Professional",9:"Fan"})[t]||`Role ${t}`;function b1({stats:t,bookings:s,user:n}){var es,Ls;const[,a]=As(),{toast:r}=nt(),i=Tt();cT();const[l,c]=N.useState(!1),[o,d]=N.useState(!1),[h,u]=N.useState(!1),[m,p]=N.useState(!1),[g,x]=N.useState(!1),[v,y]=N.useState(!1),[f,b]=N.useState(!1),[j,S]=N.useState(!1),[k,T]=N.useState(!1),[A,C]=N.useState(!1),[w,P]=N.useState(null),[M,I]=N.useState(),[W,_]=N.useState("view"),O=new URLSearchParams(window.location.search).get("tab"),[z,F]=N.useState(O||"overview"),K=vt=>{F(vt),hB()};N.useState(!1),N.useState(!1),N.useState(!1);const[D,G]=N.useState(!1),[H,V]=N.useState(!1);N.useState(!1);const[se,Z]=N.useState(!1),[le,ne]=N.useState(!1),[ue,te]=N.useState(!1),[Ae,Ge]=N.useState(!1);N.useState(!1),pB();const{measurePerformance:be,optimizeCache:Ie}=uT(),{data:ve,isLoading:ie}=ke({queryKey:["/api/songs"],queryFn:async()=>be(async()=>await(await xe("/api/songs")).json(),"songs_fetch"),staleTime:3e5,gcTime:6e5}),{data:de,isLoading:ee}=ke({queryKey:["/api/artists"],queryFn:async()=>be(async()=>await(await xe("/api/artists")).json(),"artists_fetch"),staleTime:3e5,gcTime:6e5});if(fB(de||[],"",(vt,ms)=>{var Ts,Mt;return((Ts=vt.stageName)==null?void 0:Ts.toLowerCase().includes(ms.toLowerCase()))||((Mt=vt.bio)==null?void 0:Mt.toLowerCase().includes(ms.toLowerCase()))}),!n)return e.jsx("div",{className:"min-h-screen flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Authentication Required"}),e.jsx("p",{className:"text-gray-600",children:"Please log in to access your dashboard."})]})});const ae=n.roleId,Se=[1,2].includes(ae),We=ae===1,re=[3,5,7].includes(ae),je=[3,4].includes(ae),Pe=[5,6].includes(ae),He=ae===5,Ye=[7,8].includes(ae),Ke=ae===9,oe=["background_vocalist","producer","arranger","composer","songwriter","dj","music_director","sound_engineer","mixing_engineer","mastering_engineer","music_producer","beat_maker","orchestrator","lyricist","jingle_writer"],ye=je||Pe||Ye&&((Ls=(es=n.roleData)==null?void 0:es.specializations)==null?void 0:Ls.some(vt=>oe.includes(vt.toLowerCase().replace(/\s+/g,"_")))),Te=(ve==null?void 0:ve.filter(vt=>vt.artistUserId===(n==null?void 0:n.id)))||[],et=(s==null?void 0:s.filter(vt=>vt.musician_user_id===(n==null?void 0:n.id)||vt.professional_user_id===(n==null?void 0:n.id)||vt.booker_user_id===(n==null?void 0:n.id)||vt.artist_user_id===(n==null?void 0:n.id)))||[],cs=()=>c(!0),ws=()=>d(!0),fe=()=>u(!0),Ve=()=>x(!0),zt=()=>{x(!0),r({title:"Merchandise Categories",description:"Use the Add Merchandise form to create category-specific items"})},gs=()=>y(!0),pt=async(vt,ms)=>{if(window.confirm(`Are you sure you want to delete "${ms}"? This action cannot be undone.`))try{await xe(`/api/songs/${vt}`,{method:"DELETE"}),i.invalidateQueries({queryKey:["/api/songs"]}),r({title:"Song Deleted",description:`"${ms}" has been successfully deleted.`})}catch{r({title:"Delete Failed",description:"Unable to delete the song. Please try again.",variant:"destructive"})}},Js=(vt,ms,Ts)=>{r({title:`Booking ${ms==="accept"?"Accepted":"Declined"}`,description:`Booking ${vt} has been ${ms}ed.`}),p(!1),P(null)},Ps=vt=>{a(`/bookings/${vt.id}`)},ts=()=>{T(!0)},ds=()=>{C(!0),r({title:"Store Browser",description:"Browse merchandise from your favorite artists"})},Ws=()=>{r({title:"Artist Browser",description:"Browse your favorite artists within dashboard"})},un=()=>{r({title:"Purchase History",description:"View your purchase history within dashboard"})},mn=()=>{I(void 0),_("create"),b(!0)},Wn=(vt,ms)=>{try{const Ts=ms();Ts instanceof Promise&&Ts.catch(Mt=>{r({title:"System Action Error",description:`Failed to execute ${vt}: ${Mt.message}`,variant:"destructive"})})}catch(Ts){r({title:"System Action Error",description:`Failed to execute ${vt}: ${Ts.message}`,variant:"destructive"})}},Ee=()=>We?e.jsx(qQ,{stats:t,bookings:s,user:n}):e.jsxs("div",{className:"space-y-4 sm:space-y-6 px-4 sm:px-6 lg:px-8 max-w-7xl mx-auto",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h1",{className:"text-2xl sm:text-3xl font-bold",children:Ke?"Welcome Back!":je?"Artist Dashboard":Pe?"Musician Dashboard":Ye?"Professional Dashboard":"Dashboard"}),e.jsx("p",{className:"text-sm sm:text-base text-muted-foreground mt-1",children:Ke?"Discover music, follow artists, and book experiences":je?"Manage your music career and bookings":Pe?"Manage your session work and bookings":Ye?"Manage your consulting services and clients":"Manage your account"})]}),e.jsxs(X,{variant:"outline",className:`
            flex-shrink-0 ${re?"text-green-600 border-green-600":je?"text-purple-600 border-purple-600":Pe?"text-blue-600 border-blue-600":Ye?"text-orange-600 border-orange-600":"text-pink-600 border-pink-600"}`,children:[re&&e.jsx(ir,{className:"h-3 w-3 mr-1"}),je&&e.jsx(Ue,{className:"h-3 w-3 mr-1"}),Pe&&e.jsx(jn,{className:"h-3 w-3 mr-1"}),Ye&&e.jsx(Os,{className:"h-3 w-3 mr-1"}),Ke&&e.jsx(gn,{className:"h-3 w-3 mr-1"}),e.jsx("span",{className:"hidden sm:inline",children:N1(ae)}),e.jsx("span",{className:"sm:hidden",children:N1(ae).split(" ")[0]})]})]}),e.jsx("div",{className:"block sm:hidden mb-6",children:e.jsxs(Re,{value:z,onValueChange:K,children:[e.jsx(Me,{className:"w-full h-12 text-base",children:e.jsx(Oe,{placeholder:je?" Creative Studio":Pe?" Session Workshop":Ye?" Professional Suite":Ke?" Fan Experience":" Dashboard"})}),e.jsxs(_e,{children:[e.jsxs(U,{value:"overview",children:[" Overview (",je?"Studio":Pe?"Workshop":"Dashboard",")"]}),e.jsxs(U,{value:"profile",children:[" Profile (",je?"Studio":Pe?"Workshop":"Profile",")"]}),!Ke&&e.jsx(U,{value:"calendar",children:" Calendar (Schedule)"}),(je||He)&&e.jsx(U,{value:"music",children:" Music (Production)"}),Pe&&e.jsx(U,{value:"equipment",children:" Instruments (Equipment)"}),Ye&&e.jsx(U,{value:"services",children:" Services (Business)"}),!Ye&&e.jsx(U,{value:"bookings",children:" Bookings (Business)"}),(je||Pe||Ye)&&e.jsx(U,{value:"gigs",children:" My Gigs (Performances)"}),je&&!Ke&&e.jsx(U,{value:"merchandise",children:" Merchandise (Commercial)"}),ye&&e.jsx(U,{value:"pro-registration",children:" PRO Registration (Legal)"}),re&&(je||He)&&e.jsx(U,{value:"splitsheets",children:" Splitsheets (Legal)"}),Ke&&e.jsx(U,{value:"favorites",children:" Favorites (Fan)"}),Ke&&e.jsx(U,{value:"purchases",children:" Purchases (Fan)"}),Ye&&e.jsx(U,{value:"knowledge",children:" Knowledge Base (Resources)"})]})]})}),e.jsxs(Ut,{value:z,onValueChange:K,className:"w-full",children:[e.jsx("div",{className:"hidden sm:block",children:e.jsxs("div",{className:"space-y-4 mb-6",children:[(je||Pe)&&e.jsxs("div",{className:"bg-gradient-to-r from-purple-50 to-pink-50 dark:from-purple-950/20 dark:to-pink-950/20 rounded-lg p-3",children:[e.jsxs("h3",{className:"text-sm font-medium text-purple-700 dark:text-purple-300 mb-2 flex items-center gap-2",children:[e.jsx(Ue,{className:"h-4 w-4"}),je?"Creative Studio":"Session Workshop"]}),e.jsxs(jt,{className:"grid w-full grid-cols-3 gap-1",children:[e.jsxs(Ne,{value:"overview",className:"text-xs flex items-center gap-1",children:[e.jsx(ns,{className:"h-3 w-3"}),"Overview"]}),e.jsxs(Ne,{value:"profile",className:"text-xs flex items-center gap-1",children:[e.jsx(Rt,{className:"h-3 w-3"}),"Profile"]}),!Ke&&e.jsxs(Ne,{value:"calendar",className:"text-xs flex items-center gap-1",children:[e.jsx(dt,{className:"h-3 w-3"}),"Calendar"]})]})]}),(je||Pe)&&e.jsxs("div",{className:"bg-gradient-to-r from-emerald-50 to-teal-50 dark:from-emerald-950/20 dark:to-teal-950/20 rounded-lg p-3",children:[e.jsxs("h3",{className:"text-sm font-medium text-emerald-700 dark:text-emerald-300 mb-2 flex items-center gap-2",children:[e.jsx(yn,{className:"h-4 w-4"}),"Performance & Production"]}),e.jsxs("div",{className:"grid grid-cols-2 gap-1",children:[(je||He)&&e.jsx(jt,{className:"grid w-full grid-cols-1",children:e.jsxs(Ne,{value:"music",className:"text-xs flex items-center gap-1",children:[e.jsx(Ue,{className:"h-3 w-3"}),"Music"]})}),Pe&&e.jsx(jt,{className:"grid w-full grid-cols-1",children:e.jsxs(Ne,{value:"equipment",className:"text-xs flex items-center gap-1",children:[e.jsx(jn,{className:"h-3 w-3"}),"Instruments"]})})]})]}),(je||Pe||Ye)&&e.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 dark:from-blue-950/20 dark:to-indigo-950/20 rounded-lg p-3",children:[e.jsxs("h3",{className:"text-sm font-medium text-blue-700 dark:text-blue-300 mb-2 flex items-center gap-2",children:[e.jsx(Os,{className:"h-4 w-4"}),"Business & Opportunities"]}),e.jsxs("div",{className:"grid grid-cols-2 gap-1",children:[!Ye&&e.jsxs(e.Fragment,{children:[e.jsx(jt,{className:"grid w-full grid-cols-1",children:e.jsxs(Ne,{value:"bookings",className:"text-xs flex items-center gap-1",children:[e.jsx(dt,{className:"h-3 w-3"}),"Bookings"]})}),e.jsx(jt,{className:"grid w-full grid-cols-1",children:e.jsxs(Ne,{value:"gigs",className:"text-xs flex items-center gap-1",children:[e.jsx(rd,{className:"h-3 w-3"}),"My Gigs"]})})]}),Ye&&e.jsxs(e.Fragment,{children:[e.jsx(jt,{className:"grid w-full grid-cols-1",children:e.jsxs(Ne,{value:"services",className:"text-xs flex items-center gap-1",children:[e.jsx(Os,{className:"h-3 w-3"}),"Services"]})}),e.jsx(jt,{className:"grid w-full grid-cols-1",children:e.jsxs(Ne,{value:"gigs",className:"text-xs flex items-center gap-1",children:[e.jsx(rd,{className:"h-3 w-3"}),"My Gigs"]})})]})]})]}),(je||He||ye)&&e.jsxs("div",{className:"bg-gradient-to-r from-orange-50 to-red-50 dark:from-orange-950/20 dark:to-red-950/20 rounded-lg p-3",children:[e.jsxs("h3",{className:"text-sm font-medium text-orange-700 dark:text-orange-300 mb-2 flex items-center gap-2",children:[e.jsx(Fs,{className:"h-4 w-4"}),"Commercial & Legal"]}),e.jsxs("div",{className:"grid grid-cols-3 gap-1",children:[je&&!Ke&&e.jsx(jt,{className:"grid w-full grid-cols-1",children:e.jsxs(Ne,{value:"merchandise",className:"text-xs flex items-center gap-1",children:[e.jsx(Fs,{className:"h-3 w-3"}),"Merch"]})}),ye&&e.jsx(jt,{className:"grid w-full grid-cols-1",children:e.jsxs(Ne,{value:"pro-registration",className:"text-xs flex items-center gap-1",children:[e.jsx(xt,{className:"h-3 w-3"}),"PRO"]})}),re&&(je||He)&&e.jsx(jt,{className:"grid w-full grid-cols-1",children:e.jsxs(Ne,{value:"splitsheets",className:"text-xs flex items-center gap-1",children:[e.jsx(xt,{className:"h-3 w-3"}),"Splits"]})})]})]}),Ke&&e.jsxs("div",{className:"bg-gradient-to-r from-pink-50 to-rose-50 dark:from-pink-950/20 dark:to-rose-950/20 rounded-lg p-3",children:[e.jsxs("h3",{className:"text-sm font-medium text-pink-700 dark:text-pink-300 mb-2 flex items-center gap-2",children:[e.jsx(gn,{className:"h-4 w-4"}),"Fan Experience"]}),e.jsxs(jt,{className:"grid w-full grid-cols-4 gap-1",children:[e.jsxs(Ne,{value:"overview",className:"text-xs flex items-center gap-1",children:[e.jsx(ns,{className:"h-3 w-3"}),"Overview"]}),e.jsxs(Ne,{value:"profile",className:"text-xs flex items-center gap-1",children:[e.jsx(Rt,{className:"h-3 w-3"}),"Profile"]}),e.jsxs(Ne,{value:"favorites",className:"text-xs flex items-center gap-1",children:[e.jsx(gn,{className:"h-3 w-3"}),"Favorites"]}),e.jsxs(Ne,{value:"purchases",className:"text-xs flex items-center gap-1",children:[e.jsx(Fs,{className:"h-3 w-3"}),"Purchases"]})]})]}),ae===2&&e.jsxs("div",{className:"bg-gradient-to-r from-purple-50 to-indigo-50 dark:from-purple-950/20 dark:to-indigo-950/20 rounded-lg p-3",children:[e.jsxs("h3",{className:"text-sm font-medium text-purple-700 dark:text-purple-300 mb-2 flex items-center gap-2",children:[e.jsx(Bt,{className:"h-4 w-4"}),"Admin Control Center"]}),e.jsxs("div",{className:"grid grid-cols-3 gap-1",children:[e.jsx(jt,{className:"grid w-full grid-cols-1",children:e.jsxs(Ne,{value:"admin-users",className:"text-xs flex items-center gap-1",children:[e.jsx(Ze,{className:"h-3 w-3"}),"Users"]})}),e.jsx(jt,{className:"grid w-full grid-cols-1",children:e.jsxs(Ne,{value:"admin-system",className:"text-xs flex items-center gap-1",children:[e.jsx(Gt,{className:"h-3 w-3"}),"System"]})}),e.jsx(jt,{className:"grid w-full grid-cols-1",children:e.jsxs(Ne,{value:"admin-data",className:"text-xs flex items-center gap-1",children:[e.jsx(Jn,{className:"h-3 w-3"}),"Data"]})})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-1 mt-1",children:[e.jsx(jt,{className:"grid w-full grid-cols-1",children:e.jsxs(Ne,{value:"newsletters",className:"text-xs flex items-center gap-1",children:[e.jsx(vn,{className:"h-3 w-3"}),"Newsletter"]})}),e.jsx(jt,{className:"grid w-full grid-cols-1",children:e.jsxs(Ne,{value:"press-releases",className:"text-xs flex items-center gap-1",children:[e.jsx(xt,{className:"h-3 w-3"}),"Press"]})}),e.jsx(jt,{className:"grid w-full grid-cols-1",children:e.jsxs(Ne,{value:"admin-security",className:"text-xs flex items-center gap-1",children:[e.jsx(Bt,{className:"h-3 w-3"}),"Security"]})})]})]}),Ye&&e.jsxs("div",{className:"bg-gradient-to-r from-green-50 to-emerald-50 dark:from-green-950/20 dark:to-emerald-950/20 rounded-lg p-3",children:[e.jsxs("h3",{className:"text-sm font-medium text-green-700 dark:text-green-300 mb-2 flex items-center gap-2",children:[e.jsx(_a,{className:"h-4 w-4"}),"Knowledge Center"]}),e.jsx(jt,{className:"grid w-full grid-cols-1 gap-1",children:e.jsxs(Ne,{value:"knowledge",className:"text-xs flex items-center gap-1",children:[e.jsx(_a,{className:"h-3 w-3"}),"Knowledge Base"]})})]})]})}),e.jsxs(ge,{value:"overview",className:"space-y-4 sm:space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 sm:gap-6",children:[je&&e.jsxs(e.Fragment,{children:[e.jsxs(R,{children:[e.jsxs(Y,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(Q,{className:"text-sm font-medium",children:"Monthly Bookings"}),e.jsx(dt,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(L,{children:[e.jsx("div",{className:"text-2xl font-bold",children:et.length}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"+12% from last month"})]})]}),e.jsxs(R,{children:[e.jsxs(Y,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(Q,{className:"text-sm font-medium",children:"Total Songs"}),e.jsx(Ue,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(L,{children:[e.jsx("div",{className:"text-2xl font-bold",children:Te.length}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Released tracks"})]})]})]}),Pe&&e.jsxs(e.Fragment,{children:[e.jsxs(R,{children:[e.jsxs(Y,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(Q,{className:"text-sm font-medium",children:"Monthly Sessions"}),e.jsx(jn,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(L,{children:[e.jsx("div",{className:"text-2xl font-bold",children:et.length}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"+8% from last month"})]})]}),e.jsxs(R,{children:[e.jsxs(Y,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(Q,{className:"text-sm font-medium",children:"Session Revenue"}),e.jsx(It,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(L,{children:[e.jsx("div",{className:"text-2xl font-bold",children:"$2,450"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"+15% from last month"})]})]})]}),Ye&&e.jsxs(e.Fragment,{children:[e.jsxs(R,{children:[e.jsxs(Y,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(Q,{className:"text-sm font-medium",children:"Monthly Consultations"}),e.jsx(Os,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(L,{children:[e.jsx("div",{className:"text-2xl font-bold",children:et.length}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"+20% from last month"})]})]}),e.jsxs(R,{children:[e.jsxs(Y,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(Q,{className:"text-sm font-medium",children:"Active Clients"}),e.jsx(Ze,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(L,{children:[e.jsx("div",{className:"text-2xl font-bold",children:"18"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"+3 new this month"})]})]})]}),Ke&&e.jsxs(e.Fragment,{children:[e.jsxs(R,{children:[e.jsxs(Y,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(Q,{className:"text-sm font-medium",children:"Following"}),e.jsx(gn,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(L,{children:[e.jsx("div",{className:"text-2xl font-bold",children:"12"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Artists followed"})]})]}),e.jsxs(R,{children:[e.jsxs(Y,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(Q,{className:"text-sm font-medium",children:"Purchases"}),e.jsx(Fs,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(L,{children:[e.jsx("div",{className:"text-2xl font-bold",children:"24"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Songs purchased"})]})]})]}),e.jsxs(R,{children:[e.jsxs(Y,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(Q,{className:"text-sm font-medium",children:Ye?"Revenue":je?"Earnings":Pe?"Ratings":"Downloads"}),Ye||je?e.jsx(It,{className:"h-4 w-4 text-muted-foreground"}):Pe?e.jsx(Rt,{className:"h-4 w-4 text-muted-foreground"}):e.jsx(Cs,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(L,{children:[e.jsx("div",{className:"text-2xl font-bold",children:Ye?"$5,200":je?"$3,400":Pe?"4.9":"156"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:Ye?"+25% from last month":je?"+18% from last month":Pe?"Average rating":"Total downloads"})]})]})]}),e.jsxs(R,{children:[e.jsx(Y,{children:e.jsx(Q,{children:"Recent Activity"})}),e.jsx(L,{children:e.jsxs("div",{className:"space-y-4",children:[et.slice(0,3).map((vt,ms)=>e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"w-2 h-2 bg-primary rounded-full"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-medium",children:je?`Performance booked for ${vt.eventName||"Event"}`:Pe?`Session scheduled for ${vt.eventName||"Session"}`:Ye?`Consultation scheduled with ${vt.clientName||"Client"}`:`Booking: ${vt.eventName||"Event"}`}),e.jsx("p",{className:"text-sm text-muted-foreground",children:vt.eventDate?new Date(vt.eventDate).toLocaleDateString():"Date TBD"})]})]},vt.id||ms)),et.length===0&&e.jsx("p",{className:"text-muted-foreground text-center py-4",children:"No recent activity"})]})})]})]}),e.jsxs(ge,{value:"profile",className:"space-y-4 sm:space-y-6",children:[e.jsxs(R,{children:[e.jsx(Y,{children:e.jsx(Q,{className:"text-lg sm:text-xl",children:"Profile Management"})}),e.jsx(L,{className:"space-y-4",children:e.jsxs("div",{className:"relative group",children:[e.jsx(KT,{artistId:n.id,artistName:n.fullName,children:e.jsxs(E,{className:"w-full h-12 text-base bg-blue-600 hover:bg-blue-700 text-white",disabled:!(re&&(je||Pe)||Se),children:[e.jsx(is,{className:"w-4 h-4 mr-2"}),"Website Integration"]})}),!(re&&(je||Pe)||Se)&&e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-purple-600/90 to-blue-600/90 rounded-md opacity-0 group-hover:opacity-100 transition-opacity duration-300 flex items-center justify-center",children:e.jsxs("div",{className:"text-white font-semibold text-sm text-center px-2",children:[e.jsx(ns,{className:"w-5 h-5 mx-auto mb-1"}),"Premium Feature"]})})]})})]}),e.jsx(M9,{user:n,isManaged:re,isArtist:je,isMusicianProfile:Pe,isProfessional:Ye,isFan:Ke,hasActiveSubscription:!1}),(je||Pe||Ye)&&!Ke&&e.jsxs(R,{children:[e.jsxs(Y,{children:[e.jsx(Q,{className:"text-lg sm:text-xl",children:"Requirements Management"}),!re&&!0&&e.jsx("p",{className:"text-sm text-muted-foreground",children:" Premium feature - Subscription required for access"})]}),e.jsx(L,{children:e.jsxs("div",{className:"grid grid-cols-1 gap-3",children:[e.jsxs("div",{className:"relative group",children:[e.jsxs(E,{onClick:()=>a("/hospitality-requirements"),variant:"outline",className:"w-full h-12 text-base justify-start",disabled:!re&&!0,children:[e.jsx(V6,{className:"w-4 h-4 mr-2"}),"Hospitality Requirements"]}),!re&&!0&&e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-purple-600/90 to-blue-600/90 rounded-md opacity-0 group-hover:opacity-100 transition-opacity duration-300 flex items-center justify-center",children:e.jsxs("div",{className:"text-white font-semibold text-sm text-center px-2",children:[e.jsx(ns,{className:"w-5 h-5 mx-auto mb-1"}),"Premium Feature"]})})]}),e.jsxs("div",{className:"relative group",children:[e.jsxs(E,{onClick:()=>a("/technical-requirements"),variant:"outline",className:"w-full h-12 text-base justify-start",disabled:!re&&!0,children:[e.jsx(yn,{className:"w-4 h-4 mr-2"}),"Technical Requirements"]}),!re&&!0&&e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-purple-600/90 to-blue-600/90 rounded-md opacity-0 group-hover:opacity-100 transition-opacity duration-300 flex items-center justify-center",children:e.jsxs("div",{className:"text-white font-semibold text-sm text-center px-2",children:[e.jsx(ns,{className:"w-5 h-5 mx-auto mb-1"}),"Premium Feature"]})})]}),e.jsxs("div",{className:"relative group",children:[e.jsxs(E,{onClick:()=>a("/performance-requirements"),variant:"outline",className:"w-full h-12 text-base justify-start",disabled:!re&&!0,children:[e.jsx(Ue,{className:"w-4 h-4 mr-2"}),"Performance Requirements"]}),!re&&!0&&e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-purple-600/90 to-blue-600/90 rounded-md opacity-0 group-hover:opacity-100 transition-opacity duration-300 flex items-center justify-center",children:e.jsxs("div",{className:"text-white font-semibold text-sm text-center px-2",children:[e.jsx(ns,{className:"w-5 h-5 mx-auto mb-1"}),"Premium Feature"]})})]})]})})]})]}),e.jsx(ge,{value:"calendar",className:"space-y-4 sm:space-y-6",children:e.jsxs(R,{children:[e.jsx(Y,{children:e.jsx(Q,{className:"text-lg sm:text-xl",children:"Calendar Management"})}),e.jsx(L,{className:"space-y-4",children:e.jsxs(E,{onClick:ws,className:"w-full h-12 text-base",children:[e.jsx(dt,{className:"w-4 h-4 mr-2"}),"Manage Availability"]})})]})}),(je||He)&&e.jsx(ge,{value:"music",className:"space-y-6",children:e.jsxs(R,{children:[e.jsxs(Y,{children:[e.jsx(Q,{children:"Music Catalog"}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["All uploads require ISRC code and 3000x3000px minimum cover art",He&&"  Managed musicians have full upload privileges"]}),re&&e.jsx("p",{className:"text-sm text-emerald-600 dark:text-emerald-400 mt-2",children:" Managed users can also embed YouTube videos (playlists encouraged)"})]}),e.jsxs(L,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3 sm:gap-4",children:[e.jsxs(E,{onClick:cs,className:"w-full h-12 text-base",children:[e.jsx(Ue,{className:"w-4 h-4 mr-2"}),"Upload Music"]}),e.jsx(E9,{variant:"outline",className:"w-full h-12 text-base",onSuccess:()=>{r({title:"Album uploaded successfully",description:"Your album has been uploaded and is now available."}),i.invalidateQueries({queryKey:["/api/songs"]})}})]}),re&&e.jsxs("div",{className:"border-t pt-4",children:[e.jsx("h4",{className:"font-medium mb-2 text-emerald-700 dark:text-emerald-300",children:"YouTube Video Integration"}),e.jsxs(E,{onClick:()=>S(!0),className:"w-full h-12 text-base bg-red-600 hover:bg-red-700 text-white",children:[e.jsx(ca,{className:"w-4 h-4 mr-2"}),"Add YouTube Video"]}),e.jsx("p",{className:"text-xs text-muted-foreground mt-2",children:"Add YouTube videos to your profile and all-links page. Playlists are encouraged for better organization."})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h4",{className:"font-medium",children:"Your Songs"}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3 sm:gap-4",children:[Te.map(vt=>e.jsx(R,{children:e.jsx(L,{className:"p-3 sm:p-4",children:e.jsxs("div",{className:"flex items-start justify-between gap-3",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h4",{className:"font-medium truncate text-sm sm:text-base",children:vt.title}),e.jsx("p",{className:"text-xs sm:text-sm text-muted-foreground truncate",children:vt.genre||"No genre"}),e.jsxs("p",{className:"text-xs sm:text-sm text-muted-foreground",children:["Preview: ",re?"15s-full":"30s fixed"]}),vt.price&&e.jsxs("p",{className:"text-sm font-medium text-green-600",children:["$",parseFloat(vt.price).toFixed(2)]})]}),e.jsx(E,{size:"sm",variant:"destructive",className:"flex-shrink-0",onClick:()=>pt(vt.id,vt.title),children:e.jsx(Vt,{className:"w-3 h-3"})})]})})},vt.id)),Te.length===0&&e.jsx("p",{className:"text-muted-foreground text-center py-6 sm:py-4 col-span-1 sm:col-span-2",children:"No songs uploaded yet"})]})]})]})]})}),(je||Ke)&&e.jsx(ge,{value:"merchandise",className:"space-y-4 sm:space-y-6",children:e.jsxs(R,{children:[e.jsxs(Y,{children:[e.jsx(Q,{className:"text-lg sm:text-xl",children:je?"Merchandise Management":"Merchandise"}),je&&e.jsx("p",{className:"text-sm text-muted-foreground",children:"Manage your merchandise inventory and categories"})]}),e.jsxs(L,{className:"space-y-4",children:[je&&e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3 sm:gap-4",children:[e.jsxs(E,{onClick:Ve,className:"w-full h-12 text-base",children:[e.jsx(Fs,{className:"w-4 h-4 mr-2"}),"Add Merchandise"]}),e.jsxs(E,{onClick:zt,className:"w-full h-12 text-base",variant:"outline",children:[e.jsx(Lj,{className:"w-4 h-4 mr-2"}),"Manage Categories"]})]}),Ke&&e.jsxs(E,{onClick:ds,className:"w-full h-12 text-base",children:[e.jsx(Fs,{className:"w-4 h-4 mr-2"}),"Browse Store"]}),je&&e.jsxs("div",{className:"space-y-4",children:[e.jsx("h4",{className:"font-medium",children:"Your Merchandise"}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3 sm:gap-4",children:e.jsx("div",{className:"text-center text-muted-foreground py-6 sm:py-8 col-span-1 sm:col-span-2",children:"No merchandise items yet. Start by adding some merchandise!"})})]})]})]})}),Pe&&e.jsx(ge,{value:"equipment",className:"space-y-4 sm:space-y-6",children:e.jsxs(R,{children:[e.jsx(Y,{children:e.jsx(Q,{className:"text-lg sm:text-xl",children:"Instrument Management"})}),e.jsx(L,{className:"space-y-4",children:e.jsxs(E,{onClick:fe,className:"w-full h-12 text-base",children:[e.jsx(ya,{className:"w-4 h-4 mr-2"}),"Manage Instruments"]})})]})}),Ye&&e.jsxs(e.Fragment,{children:[e.jsxs(ge,{value:"services",className:"space-y-4 sm:space-y-6",children:[e.jsxs(R,{children:[e.jsx(Y,{children:e.jsxs(Q,{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-lg sm:text-xl",children:"Service Management"}),e.jsxs(E,{onClick:()=>G(!0),children:[e.jsx(dt,{className:"w-4 h-4 mr-2"}),"Consultation Calendar"]})]})}),e.jsx(L,{className:"space-y-4",children:e.jsxs(E,{onClick:gs,className:"w-full h-12 text-base",children:[e.jsx(It,{className:"w-4 h-4 mr-2"}),"Manage Services & Rates"]})})]}),D&&e.jsxs(R,{children:[e.jsx(Y,{children:e.jsxs(Q,{className:"flex items-center justify-between",children:[e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx(dt,{className:"h-5 w-5"}),"Consultation Calendar"]}),e.jsx(E,{variant:"outline",size:"sm",onClick:()=>G(!1),children:e.jsx(Xt,{className:"h-4 w-4"})})]})}),e.jsx(L,{children:e.jsx(HQ,{user:n})})]})]}),e.jsxs(ge,{value:"knowledge",className:"space-y-4 sm:space-y-6",children:[e.jsxs(R,{children:[e.jsx(Y,{children:e.jsxs(Q,{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-lg sm:text-xl",children:"Knowledge Base"}),e.jsxs(E,{onClick:()=>V(!0),children:[e.jsx(_a,{className:"w-4 h-4 mr-2"}),"Full Manager"]})]})}),e.jsx(L,{className:"space-y-4",children:e.jsxs(E,{onClick:ts,className:"w-full h-12 text-base",children:[e.jsx(_a,{className:"w-4 h-4 mr-2"}),"Manage Resources"]})})]}),H&&e.jsxs(R,{children:[e.jsx(Y,{children:e.jsxs(Q,{className:"flex items-center justify-between",children:[e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx(_a,{className:"h-5 w-5"}),"Knowledge Base Manager"]}),e.jsx(E,{variant:"outline",size:"sm",onClick:()=>V(!1),children:e.jsx(Xt,{className:"h-4 w-4"})})]})}),e.jsx(L,{children:e.jsx(KQ,{user:n})})]})]})]}),!Ye&&e.jsx(ge,{value:"bookings",className:"space-y-4 sm:space-y-6",children:e.jsxs(R,{children:[e.jsx(Y,{children:e.jsx(Q,{className:"text-lg sm:text-xl",children:je?"Performance Bookings":Pe?"Session Bookings":"Event Bookings"})}),e.jsx(L,{children:e.jsxs("div",{className:"space-y-3 sm:space-y-4",children:[et.map(vt=>e.jsx(R,{children:e.jsx(L,{className:"p-3 sm:p-4",children:e.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-3",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h4",{className:"font-medium text-sm sm:text-base truncate",children:vt.eventName||"Event"}),e.jsx("p",{className:"text-xs sm:text-sm text-muted-foreground",children:vt.eventDate?new Date(vt.eventDate).toLocaleDateString():"Date TBD"})]}),e.jsx(E,{size:"sm",className:"w-full sm:w-auto flex-shrink-0",onClick:()=>Ps(vt),children:"View Details"})]})})},vt.id)),et.length===0&&e.jsx("p",{className:"text-muted-foreground text-center py-6 sm:py-8",children:"No bookings yet"})]})})]})}),(je||Pe||Ye)&&!Ke&&!Se&&!We&&e.jsx(ge,{value:"gigs",className:"space-y-4 sm:space-y-6",children:e.jsx(UQ,{})}),Ke&&e.jsxs(e.Fragment,{children:[e.jsx(ge,{value:"favorites",className:"space-y-4 sm:space-y-6",children:e.jsxs(R,{children:[e.jsx(Y,{children:e.jsx(Q,{className:"text-lg sm:text-xl",children:"Favorite Artists"})}),e.jsx(L,{children:e.jsxs(E,{onClick:Ws,className:"w-full h-12 text-base",children:[e.jsx(gn,{className:"w-4 h-4 mr-2"}),"Browse Artists"]})})]})}),e.jsx(ge,{value:"purchases",className:"space-y-4 sm:space-y-6",children:e.jsxs(R,{children:[e.jsx(Y,{children:e.jsx(Q,{className:"text-lg sm:text-xl",children:"Purchase History"})}),e.jsx(L,{children:e.jsxs(E,{onClick:un,className:"w-full h-12 text-base",children:[e.jsx(Fs,{className:"w-4 h-4 mr-2"}),"View Purchases"]})})]})})]}),ye&&e.jsx(ge,{value:"pro-registration",className:"space-y-4 sm:space-y-6",children:e.jsxs(R,{children:[e.jsxs(Y,{children:[e.jsxs(Q,{className:"flex flex-col sm:flex-row items-start sm:items-center gap-2",children:[e.jsx(xt,{className:"h-5 w-5 flex-shrink-0"}),e.jsx("span",{className:"text-base sm:text-lg leading-tight",children:"Performance Rights Organization Registration"})]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Register with a PRO to collect royalties for your musical works and performances"})]}),e.jsx(L,{children:e.jsx(o5,{userId:n.id})})]})}),re&&(je||He)&&e.jsx(ge,{value:"splitsheets",className:"space-y-4 sm:space-y-6",children:e.jsx(GQ,{user:n})}),ae===2&&e.jsxs(e.Fragment,{children:[e.jsx(ge,{value:"admin-users",className:"space-y-4 sm:space-y-6",children:e.jsxs(R,{children:[e.jsxs(Y,{children:[e.jsxs(Q,{className:"flex items-center gap-2",children:[e.jsx(Ze,{className:"h-5 w-5 text-blue-600"}),"User Management"]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Manage platform users, roles, and permissions"})]}),e.jsx(L,{children:e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:[e.jsxs(E,{onClick:mn,className:"h-20 flex flex-col items-center gap-2",children:[e.jsx(Ze,{className:"h-6 w-6"}),"Create User"]}),e.jsxs(E,{onClick:()=>a("/users"),variant:"outline",className:"h-20 flex flex-col items-center gap-2",children:[e.jsx(ta,{className:"h-6 w-6"}),"View All Users"]}),e.jsxs(E,{onClick:()=>a("/admin-panel?tab=authorization"),variant:"outline",className:"h-20 flex flex-col items-center gap-2",children:[e.jsx(Bt,{className:"h-6 w-6"}),"Role Management"]})]})})]})}),e.jsx(ge,{value:"admin-system",className:"space-y-4 sm:space-y-6",children:e.jsxs(R,{children:[e.jsxs(Y,{children:[e.jsxs(Q,{className:"flex items-center gap-2",children:[e.jsx(Gt,{className:"h-5 w-5 text-orange-600"}),"System Administration"]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Configure system settings and monitor performance"})]}),e.jsx(L,{children:e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:[e.jsxs(E,{onClick:()=>Wn("System Restart",async()=>{const vt=await xe("/api/admin/system/restart",{method:"POST"});r({title:"System Restart",description:"System services restarted successfully"})}),className:"h-20 flex flex-col items-center gap-2",children:[e.jsx(_n,{className:"h-6 w-6"}),"Restart System"]}),e.jsxs(E,{onClick:()=>Wn("Performance Monitor",()=>{r({title:"Performance Monitor",description:"System performance monitoring enabled"})}),variant:"outline",className:"h-20 flex flex-col items-center gap-2",children:[e.jsx(wn,{className:"h-6 w-6"}),"Performance"]}),e.jsxs(E,{onClick:()=>Wn("Financial Settings",()=>{r({title:"Financial Settings",description:"Configure platform fees and payment settings"})}),variant:"outline",className:"h-20 flex flex-col items-center gap-2",children:[e.jsx(It,{className:"h-6 w-6"}),"Financial"]})]})})]})}),e.jsx(ge,{value:"admin-data",className:"space-y-4 sm:space-y-6",children:e.jsxs(R,{children:[e.jsxs(Y,{children:[e.jsxs(Q,{className:"flex items-center gap-2",children:[e.jsx(Jn,{className:"h-5 w-5 text-green-600"}),"Data Management"]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Import, export, and backup platform data"})]}),e.jsx(L,{children:e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:[e.jsxs(E,{onClick:()=>Wn("Database Backup",async()=>{const ms=await(await xe("/api/admin/database/backup",{method:"POST"})).json();r({title:"Database Backup",description:`Backup created: ${ms.filename}`})}),className:"h-20 flex flex-col items-center gap-2",children:[e.jsx(Cs,{className:"h-6 w-6"}),"Backup Data"]}),e.jsxs(E,{onClick:()=>Wn("Export Data",async()=>{window.open("/api/admin/export-data"),r({title:"Data Export",description:"Export file downloaded successfully"})}),variant:"outline",className:"h-20 flex flex-col items-center gap-2",children:[e.jsx(Lj,{className:"h-6 w-6"}),"Export Data"]}),e.jsxs(E,{onClick:()=>Wn("Import Data",()=>{r({title:"Import Data",description:"Data import functionality coming soon"})}),variant:"outline",className:"h-20 flex flex-col items-center gap-2",children:[e.jsx(Jn,{className:"h-6 w-6"}),"Import Data"]})]})})]})}),e.jsx(ge,{value:"admin-security",className:"space-y-4 sm:space-y-6",children:e.jsxs(R,{children:[e.jsxs(Y,{children:[e.jsxs(Q,{className:"flex items-center gap-2",children:[e.jsx(Bt,{className:"h-5 w-5 text-red-600"}),"Security & Monitoring"]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Monitor security, audit logs, and system health"})]}),e.jsx(L,{children:e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:[e.jsxs(E,{onClick:()=>Wn("Security Audit",()=>{r({title:"Security Audit",description:"Security scan initiated successfully"})}),className:"h-20 flex flex-col items-center gap-2",children:[e.jsx(Bt,{className:"h-6 w-6"}),"Security Audit"]}),e.jsxs(E,{onClick:()=>Wn("System Health",()=>{r({title:"System Health",description:"All systems operational"})}),variant:"outline",className:"h-20 flex flex-col items-center gap-2",children:[e.jsx(_n,{className:"h-6 w-6"}),"Health Check"]}),e.jsxs(E,{onClick:()=>Wn("Audit Logs",()=>{r({title:"Audit Logs",description:"Viewing system audit logs"})}),variant:"outline",className:"h-20 flex flex-col items-center gap-2",children:[e.jsx(xt,{className:"h-6 w-6"}),"Audit Logs"]})]})})]})}),e.jsx(ge,{value:"newsletters",className:"space-y-4 sm:space-y-6",children:e.jsxs(R,{children:[e.jsxs(Y,{children:[e.jsxs(Q,{className:"flex items-center gap-2",children:[e.jsx(vn,{className:"h-5 w-5 text-emerald-600"}),"Newsletter Management"]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Create and manage newsletters for fans and industry professionals"})]}),e.jsx(L,{children:e.jsx(jE,{userRole:ae,userId:(n==null?void 0:n.id)||0})})]})}),e.jsx(ge,{value:"press-releases",className:"space-y-4 sm:space-y-6",children:e.jsxs(R,{children:[e.jsxs(Y,{children:[e.jsxs(Q,{className:"flex items-center gap-2",children:[e.jsx(xt,{className:"h-5 w-5 text-blue-600"}),"Press Release Management"]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Create and distribute press releases for artist announcements"})]}),e.jsx(L,{children:e.jsx(vE,{userRole:ae,userId:(n==null?void 0:n.id)||0})})]})})]})]})]});return e.jsxs(e.Fragment,{children:[Ee(),l&&e.jsx(yB,{open:l,onOpenChange:c}),o&&e.jsx(p9,{open:o,onOpenChange:d,mode:"schedule"}),h&&e.jsx(f9,{open:h,onOpenChange:u}),m&&w&&e.jsx(g9,{open:m,onOpenChange:p,booking:w,onResponse:Js}),g&&e.jsx(j9,{open:g,onOpenChange:x}),v&&e.jsx(v9,{open:v,onOpenChange:y}),f&&e.jsx(Wp,{open:f,onOpenChange:b,userId:M,mode:W}),j&&e.jsx(A9,{isOpen:j,onOpenChange:S,userId:n.id}),k&&e.jsx(y9,{open:k,onOpenChange:T}),A&&e.jsx(N9,{isOpen:A,onClose:()=>C(!1),user:n}),e.jsx(YQ,{isOpen:se,onClose:()=>Z(!1),user:n}),e.jsx(QQ,{isOpen:le,onClose:()=>ne(!1),user:n}),e.jsx(ZQ,{isOpen:ue,onClose:()=>te(!1),user:n}),e.jsx(XQ,{isOpen:Ae,onClose:()=>Ge(!1),user:n})]})}function JQ({children:t,message:s}){const{user:n,isLoading:a}=_s();return a?e.jsx("div",{className:"flex items-center justify-center min-h-screen",children:e.jsx("div",{className:"animate-spin w-8 h-8 border-4 border-primary border-t-transparent rounded-full"})}):n?e.jsx(e.Fragment,{children:t}):e.jsx("div",{className:"container mx-auto px-4 py-8 flex items-center justify-center min-h-screen",children:e.jsxs(R,{className:"w-full max-w-md",children:[e.jsxs(Y,{className:"text-center",children:[e.jsx("div",{className:"mx-auto mb-4 p-3 rounded-full bg-blue-100 dark:bg-blue-900/20 w-fit",children:e.jsx(Bt,{className:"w-8 h-8 text-blue-600"})}),e.jsx(Q,{className:"text-xl",children:"Authentication Required"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 text-sm",children:s||"Please log in to access this page"})]}),e.jsxs(L,{className:"space-y-4",children:[e.jsxs("div",{className:"flex flex-col space-y-2",children:[e.jsx(E,{asChild:!0,className:"w-full",children:e.jsxs("a",{href:"/login",children:[e.jsx(o4,{className:"w-4 h-4 mr-2"}),"Sign In"]})}),e.jsx(E,{variant:"outline",asChild:!0,className:"w-full",children:e.jsxs("a",{href:"/register",children:[e.jsx(cn,{className:"w-4 h-4 mr-2"}),"Create Account"]})})]}),e.jsx("p",{className:"text-xs text-center text-gray-500 dark:text-gray-400",children:"Use demo account: superadmin@waitumusic.com / secret123"})]})]})})}function eZ(){const{user:t,isLoading:s,role:n}=_s(),[a,r]=N.useState("operational");if(cT(),s)return e.jsx("div",{className:"flex items-center justify-center min-h-screen",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-purple-600"}),e.jsx("p",{className:"mt-4 text-lg",children:"Loading dashboard..."})]})});if(!t||!(n!=null&&n.id))return window.location.href="/login",null;const{data:i,isLoading:l,error:c}=ke({queryKey:["/api/dashboard/stats"],enabled:!!t,retry:1,retryOnMount:!1}),o=t&&[1,2].includes(t.roleId),d=t&&t.roleId===1,{data:h,isLoading:u,error:m}=ke({queryKey:["/api/bookings/all"],enabled:!!t&&!!o,retry:1}),{data:p,isLoading:g,error:x}=ke({queryKey:["/api/bookings/user"],enabled:!!t&&!o,retry:1}),v=l,y=o&&u,f=!o&&g;if(c||m||x){if(console.error("Dashboard errors:",{statsError:c,allBookingsError:m,userBookingsError:x}),c||m||x){const j=(c==null?void 0:c.message)||(m==null?void 0:m.message)||(x==null?void 0:x.message)||"Dashboard loading error";fetch("/api/opphub/report-error",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({error:`Dashboard Error: ${j}`,context:"dashboard_loading_failure"})}).catch(console.error)}return e.jsx("div",{className:"container mx-auto px-4 py-8",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-red-600 mb-4",children:"Dashboard Error"}),e.jsx("p",{className:"text-gray-600 mb-4",children:"Something went wrong loading the dashboard. Please refresh the page."}),!1]})})}if(v||y||f)return e.jsx("div",{className:"container mx-auto px-4 py-8",children:e.jsx("div",{className:"text-center",children:e.jsx("div",{className:"animate-pulse",children:"Loading dashboard..."})})});const b=t.roleId===1||t.roleId===2;return e.jsxs("div",{className:"container mx-auto px-4 py-8",children:[d&&e.jsx("div",{className:"mb-6 p-4 bg-gradient-to-r from-purple-50 to-blue-50 dark:from-purple-900/20 dark:to-blue-900/20 rounded-lg border border-purple-200 dark:border-purple-800",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(X,{variant:"secondary",className:"bg-purple-100 text-purple-800 dark:bg-purple-800 dark:text-purple-100",children:"SuperAdmin Access"}),e.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-300",children:"Choose your dashboard mode:"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(E,{variant:a==="operational"?"default":"outline",size:"sm",onClick:()=>{r("operational"),window.scrollTo(0,0)},className:"flex items-center gap-2",children:[e.jsx(wn,{className:"h-4 w-4"}),"Legacy View",e.jsx(X,{variant:"secondary",className:"ml-1 text-xs",children:"User Dashboard"})]}),e.jsx(m6,{className:"h-4 w-4 text-gray-400"}),e.jsxs(E,{variant:a==="configuration"?"default":"outline",size:"sm",onClick:()=>{r("configuration"),window.scrollTo(0,0)},className:"flex items-center gap-2",children:[e.jsx(Gt,{className:"h-4 w-4"}),"Unified Control",e.jsx(X,{variant:"secondary",className:"ml-1 text-xs",children:"Configuration Center"})]})]})]})}),b?e.jsx(e.Fragment,{children:d&&a==="configuration"?e.jsx(l5,{user:{id:t.id,fullName:t.fullName,role:(n==null?void 0:n.name)||"user",roleId:t.roleId,roleName:(n==null?void 0:n.name)||"user"}}):e.jsx(b1,{user:{id:t.id,fullName:t.fullName,role:(n==null?void 0:n.name)||"user",roleId:t.roleId,roleName:(n==null?void 0:n.name)||"user"},stats:i||{},bookings:o?h:p})}):e.jsx(b1,{user:{id:t.id,fullName:t.fullName,role:(n==null?void 0:n.name)||"user",roleId:t.roleId,roleName:(n==null?void 0:n.name)||"user"},stats:i||{},bookings:o?h:p})]})}function tZ(){return e.jsx(JQ,{message:"Please log in to access your dashboard",children:e.jsx(eZ,{})})}var H0="Avatar",[sZ,HJ]=Yn(H0),[nZ,c5]=sZ(H0),d5=N.forwardRef((t,s)=>{const{__scopeAvatar:n,...a}=t,[r,i]=N.useState("idle");return e.jsx(nZ,{scope:n,imageLoadingStatus:r,onImageLoadingStatusChange:i,children:e.jsx(Dt.span,{...a,ref:s})})});d5.displayName=H0;var u5="AvatarImage",m5=N.forwardRef((t,s)=>{const{__scopeAvatar:n,src:a,onLoadingStatusChange:r=()=>{},...i}=t,l=c5(u5,n),c=aZ(a,i),o=sn(d=>{r(d),l.onImageLoadingStatusChange(d)});return Nn(()=>{c!=="idle"&&o(c)},[c,o]),c==="loaded"?e.jsx(Dt.img,{...i,ref:s,src:a}):null});m5.displayName=u5;var h5="AvatarFallback",x5=N.forwardRef((t,s)=>{const{__scopeAvatar:n,delayMs:a,...r}=t,i=c5(h5,n),[l,c]=N.useState(a===void 0);return N.useEffect(()=>{if(a!==void 0){const o=window.setTimeout(()=>c(!0),a);return()=>window.clearTimeout(o)}},[a]),l&&i.imageLoadingStatus!=="loaded"?e.jsx(Dt.span,{...r,ref:s}):null});x5.displayName=h5;function w1(t,s){return t?s?(t.src!==s&&(t.src=s),t.complete&&t.naturalWidth>0?"loaded":"loading"):"error":"idle"}function aZ(t,{referrerPolicy:s,crossOrigin:n}){const a=iZ(),r=N.useRef(null),i=a?(r.current||(r.current=new window.Image),r.current):null,[l,c]=N.useState(()=>w1(i,t));return Nn(()=>{c(w1(i,t))},[i,t]),Nn(()=>{const o=u=>()=>{c(u)};if(!i)return;const d=o("loaded"),h=o("error");return i.addEventListener("load",d),i.addEventListener("error",h),s&&(i.referrerPolicy=s),typeof n=="string"&&(i.crossOrigin=n),()=>{i.removeEventListener("load",d),i.removeEventListener("error",h)}},[i,n,s]),l}function rZ(){return()=>{}}function iZ(){return N.useSyncExternalStore(rZ,()=>!0,()=>!1)}var p5=d5,f5=m5,g5=x5;const Ln=N.forwardRef(({className:t,...s},n)=>e.jsx(p5,{ref:n,className:Je("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",t),...s}));Ln.displayName=p5.displayName;const ga=N.forwardRef(({className:t,...s},n)=>e.jsx(f5,{ref:n,className:Je("aspect-square h-full w-full",t),...s}));ga.displayName=f5.displayName;const Fn=N.forwardRef(({className:t,...s},n)=>e.jsx(g5,{ref:n,className:Je("flex h-full w-full items-center justify-center rounded-full bg-muted",t),...s}));Fn.displayName=g5.displayName;function lZ(){const{user:t}=_s();nt();const[,s]=As(),[n,a]=N.useState(""),[r,i]=N.useState(""),[l,c]=N.useState(""),[o,d]=N.useState(new Set),{data:h=[],isLoading:u}=ke({queryKey:["/api/artists"]}),{data:m=[],isLoading:p}=ke({queryKey:["/api/musicians"]}),{data:g=[],isLoading:x}=ke({queryKey:["/api/favorites"],enabled:!!t}),v=u||p;N.useState(()=>{g!=null&&g.length&&d(new Set(g.map(j=>j.favoriteUserId)))},[g]);const y=[...h.map(j=>({...j,type:"artist"})),...m.map(j=>({...j,type:"musician"}))],f=y.filter(j=>{var A,C,w,P,M,I;const S=!n||((w=((C=(A=j.stageNames)==null?void 0:A.find(W=>W.isPrimary))==null?void 0:C.name)||j.stageName)==null?void 0:w.toLowerCase().includes(n.toLowerCase()))||((M=(P=j.user)==null?void 0:P.fullName)==null?void 0:M.toLowerCase().includes(n.toLowerCase()))||((I=j.instrument)==null?void 0:I.toLowerCase().includes(n.toLowerCase())),k=!r||j.genre===r||j.primaryGenre===r,T=!l||l==="managed"&&j.isManaged||l==="independent"&&!j.isManaged;return S&&k&&T}).sort((j,S)=>{var A,C,w,P,M,I;if(j.isManaged&&!S.isManaged)return-1;if(!j.isManaged&&S.isManaged)return 1;const k=((C=(A=j.stageNames)==null?void 0:A.find(W=>W.isPrimary))==null?void 0:C.name)||j.stageName||((w=j.user)==null?void 0:w.fullName)||"",T=((M=(P=S.stageNames)==null?void 0:P.find(W=>W.isPrimary))==null?void 0:M.name)||S.stageName||((I=S.user)==null?void 0:I.fullName)||"";return k.localeCompare(T)}),b=[...new Set([...h.map(j=>j.genre).filter(Boolean),...m.map(j=>j.primaryGenre).filter(Boolean)])];return e.jsxs("div",{className:"min-h-screen bg-background",children:[e.jsx("section",{className:"gradient-primary text-white py-16",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[((t==null?void 0:t.role)==="admin"||(t==null?void 0:t.role)==="superadmin")&&e.jsx("div",{className:"mb-4",children:e.jsx(E,{variant:"outline",size:"sm",onClick:()=>s("/dashboard"),className:"text-white border-white hover:bg-white hover:text-gray-900",children:" Back to Dashboard"})}),e.jsxs("div",{className:"text-center",children:[e.jsx("h1",{className:"text-4xl md:text-5xl font-bold mb-4",children:"Discover Amazing Artists"}),e.jsx("p",{className:"text-xl text-gray-200 max-w-3xl mx-auto",children:"Connect with professional musicians and artists for your next event or collaboration"})]})]})}),e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[e.jsxs("div",{className:"mb-8 space-y-4",children:[e.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(Bs,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground h-4 w-4"}),e.jsx($,{placeholder:"Search artists by name or stage name...",value:n,onChange:j=>a(j.target.value),className:"pl-10"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(Re,{value:r,onValueChange:i,children:[e.jsx(Me,{className:"w-40",children:e.jsx(Oe,{placeholder:"All Genres"})}),e.jsxs(_e,{children:[e.jsx(U,{value:"all",children:"All Genres"}),b.map((j,S)=>e.jsx(U,{value:j||`genre_${S}`,children:j||"Unspecified"},S))]})]}),e.jsxs(Re,{value:l,onValueChange:c,children:[e.jsx(Me,{className:"w-40",children:e.jsx(Oe,{placeholder:"All Artists"})}),e.jsxs(_e,{children:[e.jsx(U,{value:"all",children:"All Artists"}),e.jsx(U,{value:"managed",children:"Managed"}),e.jsx(U,{value:"independent",children:"Independent"})]})]})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("p",{className:"text-muted-foreground",children:["Showing ",f.length," of ",y.length," performers"]}),e.jsxs(E,{variant:"outline",size:"sm",children:[e.jsx(to,{className:"h-4 w-4 mr-2"}),"More Filters"]})]})]}),v?e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:Array.from({length:6}).map((j,S)=>e.jsx(R,{children:e.jsx(L,{className:"p-6",children:e.jsxs("div",{className:"animate-pulse",children:[e.jsx("div",{className:"w-24 h-24 bg-gray-200 rounded-full mx-auto mb-4"}),e.jsx("div",{className:"h-4 bg-gray-200 rounded mb-2"}),e.jsx("div",{className:"h-3 bg-gray-200 rounded mb-4"}),e.jsx("div",{className:"h-8 bg-gray-200 rounded"})]})})},S))}):f.length>0?e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:f.map(j=>{var S,k,T,A,C,w,P,M,I,W,_;return e.jsx(R,{className:"hover:shadow-lg transition-shadow",children:e.jsxs(L,{className:"p-6",children:[e.jsxs("div",{className:"text-center mb-4",children:[e.jsxs(Ln,{className:"w-24 h-24 mx-auto mb-3",children:[e.jsx(ga,{src:(S=j.profile)==null?void 0:S.avatarUrl,alt:((T=(k=j.stageNames)==null?void 0:k.find(B=>B.isPrimary))==null?void 0:T.name)||j.stageName||((A=j.user)==null?void 0:A.fullName),className:"object-cover"}),e.jsx(Fn,{className:"bg-gradient-to-br from-primary to-secondary text-white text-2xl font-bold",children:(((w=(C=j.stageNames)==null?void 0:C.find(B=>B.isPrimary))==null?void 0:w.name)||j.stageName||((P=j.user)==null?void 0:P.fullName)||"A").charAt(0).toUpperCase()})]}),e.jsxs("div",{className:"flex items-center justify-center gap-2 mb-2",children:[e.jsx("h3",{className:"text-lg font-semibold",children:((I=(M=j.stageNames)==null?void 0:M.find(B=>B.isPrimary))==null?void 0:I.name)||j.stageName||((W=j.user)==null?void 0:W.fullName)}),j.isManaged&&e.jsx(ct,{className:"h-5 w-5 text-green-500"})]}),e.jsxs("div",{className:"flex flex-wrap justify-center gap-1 mb-2",children:[e.jsx(X,{variant:"outline",className:"text-xs",children:j.type==="artist"?"Artist":"Musician"}),(j.genre||j.primaryGenre)&&e.jsx(X,{variant:"secondary",className:"text-xs",children:j.genre||j.primaryGenre}),j.instrument&&e.jsx(X,{variant:"secondary",className:"text-xs",children:j.instrument})]})]}),e.jsxs("div",{className:"space-y-2 mb-4",children:[((_=j.profile)==null?void 0:_.bio)&&e.jsx("p",{className:"text-sm text-muted-foreground line-clamp-2",children:j.profile.bio}),e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[(j.basePrice||j.hourlyRate)&&e.jsxs("div",{className:"flex items-center",children:[e.jsx(It,{className:"h-4 w-4 mr-1 text-green-600"}),e.jsx("span",{children:j.basePrice?`From $${j.basePrice}`:`$${j.hourlyRate}/hr`})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(Rt,{className:"h-4 w-4 mr-1 text-yellow-500"}),e.jsx("span",{children:"4.8"})]})]})]}),e.jsxs("div",{className:"flex gap-2 mb-4",children:[j.isManaged&&e.jsx(X,{className:"bg-green-500",children:"Managed"}),e.jsxs(X,{variant:"outline",children:[e.jsx(dt,{className:"h-3 w-3 mr-1"}),"Available"]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Lt,{href:`/artists/${j.userId}`,children:e.jsx(E,{className:"w-full",children:"View Profile"})}),j.isManaged&&e.jsx(Lt,{href:`/booking?${j.type==="artist"?"artist":"musician"}=${j.userId}`,children:e.jsxs(E,{variant:"outline",className:"w-full",children:[e.jsx(dt,{className:"h-4 w-4 mr-2"}),"Book Now"]})})]})]})},`${j.type}-${j.userId}`)})}):e.jsxs("div",{className:"text-center py-12",children:[e.jsx(Ue,{className:"h-16 w-16 text-muted-foreground mx-auto mb-4"}),e.jsx("h3",{className:"text-xl font-semibold mb-2",children:"No artists found"}),e.jsx("p",{className:"text-muted-foreground mb-4",children:"Try adjusting your search criteria or filters"}),e.jsx(E,{variant:"outline",onClick:()=>{a(""),i(""),c("")},children:"Clear Filters"})]})]})]})}function j5({userType:t,userId:s,initialStageNames:n=[],isFullyManaged:a=!1,onUpdate:r}){const[i,l]=N.useState(n),[c,o]=N.useState(""),{toast:d}=nt(),h=Tt();N.useEffect(()=>{l(n)},[n]);const u=Xe({mutationFn:async v=>xe(`/api/${t}s/${s}/stage-names`,{method:"PUT",body:JSON.stringify({stageNames:v})}),onSuccess:()=>{h.invalidateQueries({queryKey:[`/api/${t}s`]}),h.invalidateQueries({queryKey:[`/api/${t}s`,s.toString()]}),d({title:"Stage names updated",description:"Your stage names have been successfully updated."})},onError:()=>{d({title:"Update failed",description:"Failed to update stage names. Please try again.",variant:"destructive"})}}),m=()=>{if(!c.trim()){d({title:"Invalid name",description:"Please enter a valid stage name.",variant:"destructive"});return}if(i.some(y=>y.name.toLowerCase()===c.trim().toLowerCase())){d({title:"Duplicate name",description:"This stage name already exists.",variant:"destructive"});return}const v=[...i,{name:c.trim(),isPrimary:i.length===0}];l(v),o(""),r&&r(v),u.mutate(v)},p=v=>{if(i.length<=1){d({title:"Cannot remove",description:"You must have at least one stage name.",variant:"destructive"});return}const y=i.find(b=>b.name===v),f=i.filter(b=>b.name!==v);y!=null&&y.isPrimary&&f.length>0&&(f[0].isPrimary=!0),l(f),r&&r(f),u.mutate(f)},g=v=>{const y=i.map(f=>({...f,isPrimary:f.name===v}));l(y),r&&r(y),u.mutate(y)},x=i.find(v=>v.isPrimary);return e.jsxs(R,{children:[e.jsxs(Y,{children:[e.jsxs(Q,{className:"flex items-center gap-2",children:[e.jsx(Ue,{className:"h-5 w-5"}),"Stage Name Management",a&&e.jsxs(X,{className:"bg-green-500 hover:bg-green-600",children:[e.jsx(ns,{className:"w-3 h-3 mr-1"}),"Fully Managed"]})]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:a?"As a fully managed "+t+", you can add multiple stage names and select which one is primary for bookings.":"Manage your stage names and select your primary performing name."})]}),e.jsxs(L,{className:"space-y-4",children:[x&&e.jsxs("div",{className:"p-3 bg-primary/10 border border-primary/20 rounded-lg",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ns,{className:"h-4 w-4 text-primary"}),e.jsx("span",{className:"font-medium",children:"Primary Stage Name"})]}),e.jsx(X,{className:"bg-primary text-primary-foreground",children:x.name})]}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"This name will be used by default in booking contracts and official documents."})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(q,{children:["Your Stage Names (",i.length,")"]}),i.length>0?e.jsx("div",{className:"space-y-2",children:i.map((v,y)=>e.jsxs("div",{className:`flex items-center justify-between p-3 border rounded-lg ${v.isPrimary?"border-primary bg-primary/5":"border-border"}`,children:[e.jsxs("div",{className:"flex items-center gap-2",children:[v.isPrimary?e.jsx(ns,{className:"h-4 w-4 text-primary"}):e.jsx(Rt,{className:"h-4 w-4 text-muted-foreground"}),e.jsx("span",{className:"font-medium",children:v.name}),v.isPrimary&&e.jsx(X,{variant:"secondary",className:"text-xs",children:"Primary"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[!v.isPrimary&&e.jsx(E,{size:"sm",variant:"outline",onClick:()=>g(v.name),className:"text-xs",children:"Set Primary"}),i.length>1&&e.jsx(E,{size:"sm",variant:"ghost",onClick:()=>p(v.name),className:"text-destructive hover:text-destructive",children:e.jsx(Vt,{className:"h-3 w-3"})})]})]},y))}):e.jsxs("div",{className:"text-center py-6 text-muted-foreground",children:[e.jsx(Ue,{className:"h-8 w-8 mx-auto mb-2 opacity-50"}),e.jsx("p",{children:"No stage names added yet"})]})]}),(a||i.length===0)&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(q,{htmlFor:"newStageName",children:"Add New Stage Name"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx($,{id:"newStageName",placeholder:`Enter ${t} stage name...`,value:c,onChange:v=>o(v.target.value),onKeyPress:v=>v.key==="Enter"&&m(),className:"flex-1"}),e.jsxs(E,{onClick:m,disabled:!c.trim()||u.isPending,size:"sm",children:[e.jsx(st,{className:"h-4 w-4 mr-1"}),"Add"]})]}),!a&&i.length>0&&e.jsxs("p",{className:"text-xs text-muted-foreground",children:["Multiple stage names are only available for fully managed ",t,"s."]})]}),a&&i.length>1&&e.jsx("div",{className:"p-3 bg-blue-50 border border-blue-200 rounded-lg",children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(ns,{className:"h-4 w-4 text-blue-600 mt-0.5"}),e.jsxs("div",{className:"text-sm",children:[e.jsx("p",{className:"font-medium text-blue-900",children:"Booking Contract Integration"}),e.jsx("p",{className:"text-blue-700 mt-1",children:"Your primary stage name will be used in booking contracts. Bookers and agents will be required to use this name through a checkbox confirmation in the booking agreement."})]})]})})]})]})}function oZ({open:t,onOpenChange:s,userType:n="artist",userSpecializations:a=[],user:r}){var de;const{toast:i}=nt(),{user:l}=_s(),c=r||l,{data:o=[],isLoading:d}=ke({queryKey:[`/api/users/${c==null?void 0:c.id}/hospitality-requirements?includeDemo=true`],enabled:!!(c!=null&&c.id)&&t}),{data:h=[],isLoading:u}=ke({queryKey:[`/api/users/${c==null?void 0:c.id}/technical-requirements?includeDemo=true`],enabled:!!(c!=null&&c.id)&&t}),{data:m=[],isLoading:p}=ke({queryKey:[`/api/users/${c==null?void 0:c.id}/performance-specs?includeDemo=true`],enabled:!!(c!=null&&c.id)&&t}),g=["background_vocalist","producer","arranger","composer","songwriter","dj","music_director","sound_engineer","mixing_engineer","mastering_engineer","music_producer","beat_maker","orchestrator","lyricist","jingle_writer"],x=n==="artist"||n==="musician"||n==="professional"&&a.some(ee=>g.includes(ee.toLowerCase().replace(/\s+/g,"_"))),v=[3,5,7],y=[4,6,8],f=v.includes((c==null?void 0:c.roleId)||0),b=y.includes((c==null?void 0:c.roleId)||0),j=f||b,{data:S}=ke({queryKey:["/api/user/subscription-status"],enabled:b&&t}),k=f||b&&(S==null?void 0:S.isActive),T=f||b&&(S==null?void 0:S.isActive),A=f||b&&(S==null?void 0:S.isActive),[C,w]=N.useState({fullName:(c==null?void 0:c.fullName)||"",bio:"",stageName:"",primaryGenre:"",secondaryGenres:[],topGenres:[],instruments:"",services:"",websiteUrl:"",phoneNumber:"",isRegisteredWithPRO:!1,performingRightsOrganization:"",ipiNumber:"",socialMediaHandles:[],technicalRequirements:[],hospitalityRequirements:[],performanceSpecs:[]});N.useEffect(()=>{if(console.log("Hospitality requirements loaded:",o),o.length>0){const ee=o.map(ae=>({id:ae.id,category:ae.requirement_type||"Other",requirement:ae.requirement_name||"",notes:ae.specifications||""}));console.log("Mapped hospitality data:",ee),w(ae=>({...ae,hospitalityRequirements:ee}))}},[o]),N.useEffect(()=>{if(console.log("Technical requirements loaded:",h),h.length>0){const ee=h.map(ae=>({id:ae.id,category:ae.requirement_type||"Other",requirement:ae.requirement_name||"",notes:ae.specifications||""}));console.log("Mapped technical data:",ee),w(ae=>({...ae,technicalRequirements:ee}))}},[h]),N.useEffect(()=>{if(console.log("Performance specs loaded:",m),m.length>0){const ee=m.map(ae=>({id:ae.id,category:ae.spec_type||"Other",specification:ae.spec_name||"",notes:ae.spec_value||""}));console.log("Mapped performance data:",ee),w(ae=>({...ae,performanceSpecs:ee}))}},[m]);const[P,M]=N.useState({platform:"",handle:""}),[I]=N.useState(["Instagram","TikTok","YouTube","Spotify","SoundCloud","Twitter","Facebook","LinkedIn","Website","Portfolio","Apple Music","Deezer"]),[W]=N.useState(["Pop","Hip-Hop","R&B","Gospel","Caribbean","Afrobeats","Neo Soul","Jazz","Blues","Country","Rock","Electronic","Folk","Reggae","Dancehall","Soca","Calypso","Latin","World","Classical"]),[_,B]=N.useState({category:"",requirement:"",notes:""}),[O]=N.useState(["Audio Equipment","Instruments","Stage Setup","Lighting","Power Requirements","Recording Equipment","Monitors","Microphones","Cables & Connections","Other"]),[z,F]=N.useState({category:"",requirement:"",notes:""}),[K]=N.useState(["Dressing Room","Catering","Transportation","Accommodation","Security","Guest List","Parking","Merchandise Space","Meet & Greet Area","Other"]),[D,G]=N.useState({category:"",specification:"",notes:""}),[H]=N.useState(["Setlist Requirements","Timing & Schedule","Special Effects","Costume Changes","Backup Musicians","Rehearsal Needs","Sound Check","Performance Flow","Other"]),V=(ee,ae)=>{w(Se=>({...Se,[ee]:ae}))},se=()=>{_.category&&_.requirement&&(w(ee=>({...ee,technicalRequirements:[...ee.technicalRequirements,{..._}]})),B({category:"",requirement:"",notes:""}),i({title:"Technical Requirement Added",description:"Technical requirement added to your profile"}))},Z=ee=>{w(ae=>({...ae,technicalRequirements:ae.technicalRequirements.filter((Se,We)=>We!==ee)})),i({title:"Technical Requirement Removed",description:"Technical requirement removed from your profile"})},le=()=>{z.category&&z.requirement&&(w(ee=>({...ee,hospitalityRequirements:[...ee.hospitalityRequirements,{...z}]})),F({category:"",requirement:"",notes:""}),i({title:"Hospitality Requirement Added",description:"Hospitality requirement added to your profile"}))},ne=async ee=>{const ae=C.hospitalityRequirements[ee];if(ae.id)try{if(!(await fetch(`/api/users/${c==null?void 0:c.id}/hospitality-requirements/${ae.id}`,{method:"DELETE",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}})).ok)throw new Error("Failed to delete requirement")}catch(Se){console.error("Error deleting hospitality requirement:",Se),i({title:"Error",description:"Failed to delete requirement from database",variant:"destructive"});return}w(Se=>({...Se,hospitalityRequirements:Se.hospitalityRequirements.filter((We,re)=>re!==ee)})),i({title:"Hospitality Requirement Removed",description:"Hospitality requirement removed from your profile"})},ue=()=>{D.category&&D.specification&&(w(ee=>({...ee,performanceSpecs:[...ee.performanceSpecs,{...D}]})),G({category:"",specification:"",notes:""}),i({title:"Performance Spec Added",description:"Performance specification added to your profile"}))},te=ee=>{w(ae=>({...ae,performanceSpecs:ae.performanceSpecs.filter((Se,We)=>We!==ee)})),i({title:"Performance Spec Removed",description:"Performance specification removed from your profile"})},Ae=()=>{P.platform&&P.handle&&(C.socialMediaHandles.some(ae=>ae.platform===P.platform)||(w(ae=>({...ae,socialMediaHandles:[...ae.socialMediaHandles,{...P}]})),M({platform:"",handle:""})))},Ge=ee=>{w(ae=>({...ae,socialMediaHandles:ae.socialMediaHandles.filter((Se,We)=>We!==ee)}))},be=ee=>{!C.secondaryGenres.includes(ee)&&ee!==C.primaryGenre&&w(ae=>({...ae,secondaryGenres:[...ae.secondaryGenres,ee]}))},Ie=ee=>{w(ae=>({...ae,secondaryGenres:ae.secondaryGenres.filter(Se=>Se!==ee),topGenres:ae.topGenres.filter(Se=>Se!==ee)}))},ve=ee=>{const ae=C.topGenres.includes(ee);w(Se=>({...Se,topGenres:ae?Se.topGenres.filter(We=>We!==ee):[...Se.topGenres,ee]}))},ie=async()=>{try{console.log(" SAVING ENHANCED PROFILE DATA:",{basicInfo:{fullName:C.fullName,bio:C.bio,stageName:C.stageName,primaryGenre:C.primaryGenre,secondaryGenres:C.secondaryGenres,topGenres:C.topGenres,instruments:C.instruments,services:C.services,websiteUrl:C.websiteUrl,phoneNumber:C.phoneNumber},socialMedia:C.socialMediaHandles,proRegistration:{isRegistered:C.isRegisteredWithPRO,organization:C.performingRightsOrganization,ipiNumber:C.ipiNumber},technicalRequirements:C.technicalRequirements,hospitalityRequirements:C.hospitalityRequirements,performanceSpecs:C.performanceSpecs,userType:n,userId:c==null?void 0:c.id});const ee={userId:c==null?void 0:c.id,basicProfile:C,technicalRequirements:C.technicalRequirements,hospitalityRequirements:C.hospitalityRequirements,performanceSpecs:C.performanceSpecs};i({title:"Profile Enhanced",description:`Profile updated with ${C.technicalRequirements.length} technical requirements, ${C.hospitalityRequirements.length} hospitality needs, and ${C.performanceSpecs.length} performance specifications.`}),s(!1)}catch(ee){console.error(" PROFILE SAVE ERROR:",ee),i({title:"Error",description:"Failed to update profile. Please try again.",variant:"destructive"})}};return e.jsx(kt,{open:t,onOpenChange:s,children:e.jsxs(wt,{className:"sm:max-w-[600px] max-h-[80vh] overflow-y-auto",children:[e.jsxs(St,{children:[e.jsxs(Ct,{className:"flex items-center gap-2",children:[e.jsx($s,{className:"h-5 w-5"}),"Edit Profile"]}),e.jsxs(us,{children:["Update your ",n," profile information and settings."]})]}),e.jsxs("div",{className:"space-y-6 py-4",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-medium",children:"Basic Information"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(q,{htmlFor:"fullName",children:"Full Name"}),e.jsx($,{id:"fullName",value:C.fullName,onChange:ee=>V("fullName",ee.target.value),placeholder:"Enter your full name"})]}),(n==="artist"||n==="musician")&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(q,{htmlFor:"primaryGenre",children:"Primary Genre"}),e.jsxs(Re,{value:C.primaryGenre,onValueChange:ee=>V("primaryGenre",ee),children:[e.jsx(Me,{children:e.jsx(Oe,{placeholder:"Select primary genre"})}),e.jsx(_e,{children:W.map(ee=>e.jsx(U,{value:ee,children:ee},ee))})]})]}),n==="musician"&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(q,{htmlFor:"instruments",children:"Instruments"}),e.jsx($,{id:"instruments",value:C.instruments,onChange:ee=>V("instruments",ee.target.value),placeholder:"e.g., Guitar, Piano, Drums"})]}),n==="professional"&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(q,{htmlFor:"services",children:"Specialization"}),e.jsx($,{id:"services",value:C.services,onChange:ee=>V("services",ee.target.value),placeholder:"e.g., Music Production, Consulting"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(q,{htmlFor:"phoneNumber",children:"Phone Number"}),e.jsx($,{id:"phoneNumber",value:C.phoneNumber,onChange:ee=>V("phoneNumber",ee.target.value),placeholder:"Your phone number"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(q,{htmlFor:"websiteUrl",children:"Website URL"}),e.jsx($,{id:"websiteUrl",value:C.websiteUrl,onChange:ee=>V("websiteUrl",ee.target.value),placeholder:"https://your-website.com"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(q,{htmlFor:"bio",children:"Bio"}),e.jsx(mt,{id:"bio",value:C.bio,onChange:ee=>V("bio",ee.target.value),placeholder:"Tell us about yourself...",rows:4})]})]}),(n==="artist"||n==="musician")&&c&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("h3",{className:"text-lg font-medium flex items-center gap-2",children:[e.jsx(ns,{className:"h-5 w-5"}),"Stage Name Management"]}),e.jsx(j5,{userType:n,userId:c.id,initialStageNames:((de=c.roleData)==null?void 0:de.stageNames)||[],isFullyManaged:(c==null?void 0:c.managementTierId)===3,onUpdate:ee=>{c.roleData&&(c.roleData.stageNames=ee),s(!0)}})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-medium",children:"Social Media Handles"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(Re,{value:P.platform,onValueChange:ee=>M(ae=>({...ae,platform:ee})),children:[e.jsx(Me,{className:"w-40",children:e.jsx(Oe,{placeholder:"Platform"})}),e.jsx(_e,{children:I.filter(ee=>!C.socialMediaHandles.some(ae=>ae.platform===ee)).map(ee=>e.jsx(U,{value:ee,children:ee},ee))})]}),e.jsx($,{placeholder:"@username or URL",value:P.handle,onChange:ee=>M(ae=>({...ae,handle:ee.target.value})),className:"flex-1"}),e.jsx(E,{onClick:Ae,size:"icon",children:e.jsx(st,{className:"h-4 w-4"})})]}),C.socialMediaHandles.length>0&&e.jsx("div",{className:"space-y-2",children:C.socialMediaHandles.map((ee,ae)=>e.jsxs("div",{className:"flex items-center justify-between p-2 border rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("span",{className:"font-medium",children:[ee.platform,":"]}),e.jsx("span",{className:"text-muted-foreground",children:ee.handle})]}),e.jsx(E,{variant:"ghost",size:"sm",onClick:()=>Ge(ae),children:e.jsx(Xt,{className:"h-4 w-4"})})]},ae))})]}),(n==="artist"||n==="musician")&&C.primaryGenre&&e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-medium",children:"Secondary Genres"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Add additional genres you work with"}),e.jsx("div",{className:"flex gap-2",children:e.jsxs(Re,{onValueChange:be,children:[e.jsx(Me,{children:e.jsx(Oe,{placeholder:"Add secondary genre"})}),e.jsx(_e,{children:W.filter(ee=>ee!==C.primaryGenre&&!C.secondaryGenres.includes(ee)).map(ee=>e.jsx(U,{value:ee,children:ee},ee))})]})}),C.secondaryGenres.length>0&&e.jsxs("div",{children:[e.jsx("div",{className:"space-y-2",children:C.secondaryGenres.map(ee=>e.jsxs("div",{className:"flex items-center justify-between p-2 border rounded-lg",children:[e.jsx("span",{children:ee}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(E,{variant:C.topGenres.includes(ee)?"default":"outline",size:"sm",onClick:()=>ve(ee),children:C.topGenres.includes(ee)?" Top":" Top"}),e.jsx(E,{variant:"ghost",size:"sm",onClick:()=>Ie(ee),children:e.jsx(Vt,{className:"h-4 w-4"})})]})]},ee))}),C.topGenres.length>0&&e.jsxs("div",{className:"mt-4",children:[e.jsx("h4",{className:"font-medium mb-2",children:"Your Strongest Genres:"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:C.topGenres.map(ee=>e.jsxs("span",{className:"px-2 py-1 bg-primary text-primary-foreground rounded-md text-sm",children:[" ",ee]},ee))})]})]})]}),x&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("h3",{className:"text-lg font-medium flex items-center gap-2",children:[e.jsx(xt,{className:"h-5 w-5"}),"Performance Rights Organization (PRO)"]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Register with a PRO to collect royalties for your musical works and performances. PROs are open to creators worldwide."}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(gt,{id:"pro-registered",checked:C.isRegisteredWithPRO,onCheckedChange:ee=>w(ae=>({...ae,isRegisteredWithPRO:ee}))}),e.jsx(q,{htmlFor:"pro-registered",children:"I am registered with a PRO"})]}),C.isRegisteredWithPRO&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 pl-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(q,{htmlFor:"pro-org",children:"PRO Organization"}),e.jsxs(Re,{value:C.performingRightsOrganization,onValueChange:ee=>V("performingRightsOrganization",ee),children:[e.jsx(Me,{children:e.jsx(Oe,{placeholder:"Select PRO"})}),e.jsxs(_e,{children:[e.jsx(U,{value:"ascap",children:"ASCAP (USA)"}),e.jsx(U,{value:"bmi",children:"BMI (USA)"}),e.jsx(U,{value:"sesac",children:"SESAC (USA)"}),e.jsx(U,{value:"socan",children:"SOCAN (Canada)"}),e.jsx(U,{value:"prs",children:"PRS for Music (UK)"}),e.jsx(U,{value:"gema",children:"GEMA (Germany)"}),e.jsx(U,{value:"sacem",children:"SACEM (France)"}),e.jsx(U,{value:"siae",children:"SIAE (Italy)"}),e.jsx(U,{value:"sgae",children:"SGAE (Spain)"}),e.jsx(U,{value:"other",children:"Other"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(q,{htmlFor:"ipi-number",children:"IPI Number (Optional)"}),e.jsx($,{id:"ipi-number",value:C.ipiNumber,onChange:ee=>V("ipiNumber",ee.target.value),placeholder:"e.g., 00123456789"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"International Publisher Identifier (if you have one)"})]})]})]})]}),j&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"text-lg font-medium flex items-center gap-2",children:" Technical Requirements"}),f&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ns,{className:"h-4 w-4 text-amber-500"}),e.jsx("span",{className:"bg-green-100 text-green-800 text-xs font-medium px-2 py-1 rounded-full",children:"FREE"})]}),b&&!T&&e.jsx("div",{className:"flex items-center gap-2",children:e.jsx("span",{className:"bg-orange-100 text-orange-800 text-xs font-medium px-2 py-1 rounded-full",children:"SUBSCRIPTION REQUIRED"})})]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Define your technical specifications for auto-populating technical riders"}),!T&&b&&e.jsxs("div",{className:"bg-orange-50 border border-orange-200 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(ns,{className:"h-5 w-5 text-orange-600"}),e.jsx("h4",{className:"font-medium text-orange-900",children:"Upgrade Required"})]}),e.jsx("p",{className:"text-sm text-orange-700 mb-3",children:"Technical requirements are available for managed users or with an active subscription."}),e.jsx(E,{variant:"outline",size:"sm",className:"border-orange-300 text-orange-700 hover:bg-orange-100",children:"Upgrade Now"})]}),T&&e.jsx("div",{children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-2",children:[e.jsxs(Re,{value:_.category,onValueChange:ee=>B(ae=>({...ae,category:ee})),children:[e.jsx(Me,{children:e.jsx(Oe,{placeholder:"Category"})}),e.jsx(_e,{children:O.map(ee=>e.jsx(U,{value:ee,children:ee},ee))})]}),e.jsx($,{placeholder:"Requirement details",value:_.requirement,onChange:ee=>B(ae=>({...ae,requirement:ee.target.value}))}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx($,{placeholder:"Notes (optional)",value:_.notes,onChange:ee=>B(ae=>({...ae,notes:ee.target.value})),className:"flex-1"}),e.jsx(E,{onClick:se,size:"icon",children:e.jsx(st,{className:"h-4 w-4"})})]})]})}),T&&C.technicalRequirements.length>0&&e.jsx("div",{className:"space-y-2",children:C.technicalRequirements.map((ee,ae)=>e.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg bg-blue-50",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("span",{className:"font-medium text-blue-800",children:[ee.category,":"]}),e.jsx("span",{className:"text-blue-700",children:ee.requirement})]}),ee.notes&&e.jsxs("p",{className:"text-sm text-blue-600 mt-1",children:["Notes: ",ee.notes]})]}),e.jsx(E,{variant:"ghost",size:"sm",onClick:()=>Z(ae),children:e.jsx(Vt,{className:"h-4 w-4"})})]},ae))})]}),j&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("h3",{className:"text-lg font-medium flex items-center gap-2",children:[" Hospitality Requirements",d&&e.jsx(oa,{className:"h-4 w-4 animate-spin"}),f&&e.jsx("span",{className:"text-xs bg-green-100 text-green-800 px-2 py-1 rounded-full",children:"FREE"}),b&&!(S!=null&&S.isActive)&&e.jsx("span",{className:"text-xs bg-orange-100 text-orange-800 px-2 py-1 rounded-full",children:"SUBSCRIPTION REQUIRED"})]}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Define your hospitality needs for auto-populating technical riders",f&&" - This feature is included with your managed account.",b&&!(S!=null&&S.isActive)&&" - Upgrade to access this professional feature."]}),b&&!(S!=null&&S.isActive)&&e.jsx("div",{className:"bg-orange-50 border border-orange-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(ns,{className:"h-5 w-5 text-orange-600"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"font-medium text-orange-800",children:"Upgrade to Premium"}),e.jsx("p",{className:"text-sm text-orange-700",children:"Access hospitality requirements and other professional features with a subscription."})]}),e.jsx(E,{size:"sm",className:"bg-orange-600 hover:bg-orange-700",children:"Upgrade Now"})]})}),k&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-2",children:[e.jsxs(Re,{value:z.category,onValueChange:ee=>F(ae=>({...ae,category:ee})),children:[e.jsx(Me,{children:e.jsx(Oe,{placeholder:"Category"})}),e.jsx(_e,{children:K.map(ee=>e.jsx(U,{value:ee,children:ee},ee))})]}),e.jsx($,{placeholder:"Requirement details",value:z.requirement,onChange:ee=>F(ae=>({...ae,requirement:ee.target.value}))}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx($,{placeholder:"Notes (optional)",value:z.notes,onChange:ee=>F(ae=>({...ae,notes:ee.target.value})),className:"flex-1"}),e.jsx(E,{onClick:le,size:"icon",children:e.jsx(st,{className:"h-4 w-4"})})]})]}),k&&C.hospitalityRequirements.length>0&&e.jsx("div",{className:"space-y-2",children:C.hospitalityRequirements.map((ee,ae)=>e.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg bg-green-50",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("span",{className:"font-medium text-green-800",children:[ee.category,":"]}),e.jsx("span",{className:"text-green-700",children:ee.requirement})]}),ee.notes&&e.jsxs("p",{className:"text-sm text-green-600 mt-1",children:["Notes: ",ee.notes]})]}),e.jsx(E,{variant:"ghost",size:"sm",onClick:()=>ne(ae),children:e.jsx(Vt,{className:"h-4 w-4"})})]},ae))})]}),j&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"text-lg font-medium flex items-center gap-2",children:" Performance Specifications"}),f&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ns,{className:"h-4 w-4 text-amber-500"}),e.jsx("span",{className:"bg-green-100 text-green-800 text-xs font-medium px-2 py-1 rounded-full",children:"FREE"})]}),b&&!A&&e.jsx("div",{className:"flex items-center gap-2",children:e.jsx("span",{className:"bg-orange-100 text-orange-800 text-xs font-medium px-2 py-1 rounded-full",children:"SUBSCRIPTION REQUIRED"})})]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Define your performance requirements for auto-populating technical riders"}),!A&&b&&e.jsxs("div",{className:"bg-orange-50 border border-orange-200 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(ns,{className:"h-5 w-5 text-orange-600"}),e.jsx("h4",{className:"font-medium text-orange-900",children:"Upgrade Required"})]}),e.jsx("p",{className:"text-sm text-orange-700 mb-3",children:"Performance specifications are available for managed users or with an active subscription."}),e.jsx(E,{variant:"outline",size:"sm",className:"border-orange-300 text-orange-700 hover:bg-orange-100",children:"Upgrade Now"})]}),A&&e.jsx("div",{children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-2",children:[e.jsxs(Re,{value:D.category,onValueChange:ee=>G(ae=>({...ae,category:ee})),children:[e.jsx(Me,{children:e.jsx(Oe,{placeholder:"Category"})}),e.jsx(_e,{children:H.map(ee=>e.jsx(U,{value:ee,children:ee},ee))})]}),e.jsx($,{placeholder:"Specification details",value:D.specification,onChange:ee=>G(ae=>({...ae,specification:ee.target.value}))}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx($,{placeholder:"Notes (optional)",value:D.notes,onChange:ee=>G(ae=>({...ae,notes:ee.target.value})),className:"flex-1"}),e.jsx(E,{onClick:ue,size:"icon",children:e.jsx(st,{className:"h-4 w-4"})})]})]})}),A&&C.performanceSpecs.length>0&&e.jsx("div",{className:"space-y-2",children:C.performanceSpecs.map((ee,ae)=>e.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg bg-purple-50",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("span",{className:"font-medium text-purple-800",children:[ee.category,":"]}),e.jsx("span",{className:"text-purple-700",children:ee.specification})]}),ee.notes&&e.jsxs("p",{className:"text-sm text-purple-600 mt-1",children:["Notes: ",ee.notes]})]}),e.jsx(E,{variant:"ghost",size:"sm",onClick:()=>te(ae),children:e.jsx(Vt,{className:"h-4 w-4"})})]},ae))})]})]}),e.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t",children:[e.jsxs(E,{variant:"outline",onClick:()=>s(!1),children:[e.jsx(Xt,{className:"h-4 w-4 mr-2"}),"Cancel"]}),e.jsxs(E,{onClick:ie,children:[e.jsx(js,{className:"h-4 w-4 mr-2"}),"Save Changes"]})]})]})})}function cZ(){var x,v,y,f,b,j,S,k,T;const{id:t}=yd(),{addItem:s}=Zo(),{user:n}=_s(),{toast:a}=nt(),[r,i]=N.useState(!1),{data:l,isLoading:c}=ke({queryKey:["/api/artists",t],enabled:!!t}),{data:o=[]}=ke({queryKey:["/api/songs"]}),{data:d=[]}=ke({queryKey:["/api/merchandise"]});if(c)return e.jsx("div",{className:"min-h-screen bg-background",children:e.jsxs("div",{className:"animate-pulse",children:[e.jsx("div",{className:"h-64 bg-gray-200"}),e.jsxs("div",{className:"max-w-6xl mx-auto px-4 py-8",children:[e.jsx("div",{className:"h-8 bg-gray-200 rounded mb-4 w-1/3"}),e.jsx("div",{className:"h-4 bg-gray-200 rounded mb-2 w-1/2"}),e.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/4"})]})]})});if(!l)return e.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx(Ue,{className:"h-16 w-16 text-gray-400 mx-auto mb-4"}),e.jsx("h1",{className:"text-2xl font-bold mb-2",children:"Artist not found"}),e.jsx("p",{className:"text-gray-600 mb-4",children:"The artist you're looking for doesn't exist."}),e.jsx(Lt,{href:"/artists",children:e.jsx(E,{children:"Browse All Artists"})})]})});const h=Array.isArray(o)?o.filter(A=>A.artistUserId===parseInt(t||"0")):[],u=Array.isArray(d)?d.filter(A=>A.artistUserId===parseInt(t||"0")):[],m=()=>[],p=async()=>{var C,w,P,M;const A=`${window.location.origin}/artists/${t}`;if(navigator.share)try{await navigator.share({title:`${(l==null?void 0:l.stageName)||((w=(C=l==null?void 0:l.stageNames)==null?void 0:C[0])==null?void 0:w.name)||"Artist"} - Wai'tuMusic`,text:`Check out ${(l==null?void 0:l.stageName)||((M=(P=l==null?void 0:l.stageNames)==null?void 0:P[0])==null?void 0:M.name)||"this artist"} on Wai'tuMusic`,url:A})}catch(I){I.name!=="AbortError"&&g(A)}else g(A)},g=async A=>{try{await navigator.clipboard.writeText(A),a({title:"Profile link copied!",description:"The artist profile link has been copied to your clipboard."})}catch{const w=document.createElement("textarea");w.value=A,document.body.appendChild(w),w.select(),document.execCommand("copy"),document.body.removeChild(w),a({title:"Profile link copied!",description:"The artist profile link has been copied to your clipboard."})}};return e.jsxs("div",{className:"min-h-screen bg-background",children:[e.jsxs("section",{className:"relative h-64 md:h-80 overflow-hidden",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-primary to-primary/70"}),e.jsx("div",{className:"absolute inset-0 bg-black/30"}),e.jsx("div",{className:"relative h-full flex items-end",children:e.jsx("div",{className:"max-w-6xl mx-auto w-full px-4 pb-8",children:e.jsxs("div",{className:"flex items-end space-x-6",children:[e.jsx("div",{className:"w-32 h-32 bg-white rounded-full flex items-center justify-center shadow-lg",children:(x=l.profile)!=null&&x.avatarUrl?e.jsx("img",{src:l.profile.avatarUrl,alt:((y=(v=l.stageNames)==null?void 0:v.find(A=>A.isPrimary))==null?void 0:y.name)||l.stageName,className:"w-full h-full rounded-full object-cover"}):e.jsx("span",{className:"text-4xl font-bold text-primary",children:(((b=(f=l.stageNames)==null?void 0:f.find(A=>A.isPrimary))==null?void 0:b.name)||l.stageName||"A").charAt(0)})}),e.jsxs("div",{className:"flex-1 text-white",children:[e.jsxs("div",{className:"flex items-center gap-4 mb-2",children:[e.jsx("h1",{className:"text-4xl md:text-5xl font-bold",children:((S=(j=l.stageNames)==null?void 0:j.find(A=>A.isPrimary))==null?void 0:S.name)||l.stageName}),l.isManaged&&e.jsxs(X,{className:"bg-green-500 hover:bg-green-600",children:[e.jsx(ir,{className:"w-3 h-3 mr-1"}),"Managed"]})]}),e.jsxs("div",{className:"flex items-center space-x-6 text-lg",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(Ue,{className:"w-5 h-5 mr-2"}),l.genre||"Multi-Genre"]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(Rt,{className:"w-5 h-5 mr-2 fill-yellow-400 text-yellow-400"}),"4.8 (156 reviews)"]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(Dn,{className:"w-5 h-5 mr-2"}),"Available Worldwide"]})]}),e.jsxs("div",{className:"flex items-center space-x-4 mt-4",children:[e.jsx(Lt,{href:`/booking?artist=${l.userId}`,children:e.jsxs(E,{size:"lg",className:"bg-white text-primary hover:bg-gray-100",children:[e.jsx(dt,{className:"w-5 h-5 mr-2"}),"Book This Artist"]})}),e.jsxs(E,{size:"lg",variant:"outline",className:"bg-white text-primary hover:bg-gray-100",onClick:p,children:[e.jsx(Dy,{className:"w-5 h-5 mr-2"}),"Share Profile"]}),n&&([1,2].includes(n.roleId)&&l.isManaged||l.userId===n.id||[6,7,8,9].includes(n.roleId))&&e.jsxs("div",{className:"relative group",children:[e.jsx(KT,{artistId:l.userId,artistName:l.stageName,children:e.jsxs(E,{size:"lg",variant:"outline",className:"bg-white text-primary hover:bg-gray-100",disabled:!([1,2].includes(n.roleId)&&l.isManaged)&&!([3,4,5].includes(n.roleId)&&l.userId===n.id),children:[e.jsx(is,{className:"w-5 h-5 mr-2"}),"Website Integration"]})}),!([1,2].includes(n.roleId)&&l.isManaged)&&!([3,4,5].includes(n.roleId)&&l.userId===n.id)&&e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-purple-600/90 to-blue-600/90 rounded-md opacity-0 group-hover:opacity-100 transition-opacity duration-300 flex items-center justify-center",children:e.jsxs("div",{className:"text-white font-semibold text-sm text-center px-2",children:[e.jsx(ns,{className:"w-5 h-5 mx-auto mb-1"}),"Premium Feature"]})})]}),n&&l.userId===n.id&&e.jsxs(E,{size:"lg",variant:"outline",className:"bg-white text-primary hover:bg-gray-100",onClick:()=>i(!0),children:[e.jsx($s,{className:"w-5 h-5 mr-2"}),"Edit Profile"]})]})]})]})})})]}),e.jsx("section",{className:"max-w-6xl mx-auto px-4 py-8",children:e.jsxs(Ut,{defaultValue:"overview",className:"w-full",children:[e.jsxs(jt,{className:"grid w-full grid-cols-4",children:[e.jsx(Ne,{value:"overview",children:"Overview"}),e.jsx(Ne,{value:"music",children:"Music"}),e.jsx(Ne,{value:"events",children:"Events & Streams"}),e.jsx(Ne,{value:"merchandise",children:"Merchandise"})]}),e.jsx(ge,{value:"overview",className:"space-y-8",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[e.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[e.jsxs(R,{children:[e.jsx(Y,{children:e.jsxs(Q,{children:["About ",l.stageName]})}),e.jsx(L,{children:e.jsx("p",{className:"text-gray-600 leading-relaxed",children:((k=l.profile)==null?void 0:k.bio)||`${l.stageName} is a talented ${l.genre||"multi-genre"} artist bringing unique energy and professional excellence to every performance. With a commitment to artistic integrity and audience engagement, they deliver memorable experiences that resonate with fans and critics alike.`})})]}),e.jsxs(R,{children:[e.jsx(Y,{children:e.jsxs(Q,{className:"flex items-center",children:[e.jsx(Ue,{className:"w-5 h-5 mr-2"}),"Popular Tracks"]})}),e.jsx(L,{children:h.length>0?e.jsx("div",{className:"space-y-3",children:h.slice(0,3).map((A,C)=>e.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg hover:bg-gray-50",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-10 h-10 bg-primary/10 rounded flex items-center justify-center",children:e.jsx(Ue,{className:"w-5 h-5 text-primary"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium",children:A.title}),e.jsx("p",{className:"text-sm text-gray-600",children:l.isManaged?"Full Preview Available":"30s Preview"})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(E,{size:"sm",variant:"ghost",children:e.jsx(Gn,{className:"w-4 h-4"})}),e.jsx(E,{size:"sm",variant:"ghost",children:e.jsx(gn,{className:"w-4 h-4"})})]})]},A.id))}):e.jsx("p",{className:"text-gray-500 text-center py-4",children:"No tracks available yet"})})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs(R,{children:[e.jsx(Y,{children:e.jsxs(Q,{className:"flex items-center",children:[e.jsx(dt,{className:"w-5 h-5 mr-2"}),"Booking Information"]})}),e.jsxs(L,{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Base Price:"}),e.jsx("span",{className:"font-semibold",children:l.basePrice?`$${l.basePrice}`:"Contact for quote"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Response Time:"}),e.jsx("span",{className:"font-semibold text-green-600",children:"Within 2 hours"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Availability:"}),e.jsx("span",{className:"font-semibold",children:"Available"})]}),e.jsx("div",{className:"pt-2 border-t",children:e.jsx(Lt,{href:`/booking?artist=${l.userId}`,children:e.jsxs(E,{className:"w-full",children:[e.jsx(dt,{className:"w-4 h-4 mr-2"}),"Book Now"]})})})]})]}),e.jsxs(R,{children:[e.jsx(Y,{children:e.jsx(Q,{children:"Connect"})}),e.jsxs(L,{className:"space-y-3",children:[e.jsxs(E,{variant:"outline",className:"w-full justify-start",children:[e.jsx(zn,{className:"w-4 h-4 mr-2"}),"Official Website"]}),e.jsxs(E,{variant:"outline",className:"w-full justify-start",children:[e.jsx(Ue,{className:"w-4 h-4 mr-2"}),"Spotify"]}),e.jsxs(E,{variant:"outline",className:"w-full justify-start",children:[e.jsx(Ze,{className:"w-4 h-4 mr-2"}),"Instagram"]})]})]})]})]})}),e.jsxs(ge,{value:"music",className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h2",{className:"text-2xl font-bold",children:"Music Collection"}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(E,{variant:"outline",size:"sm",children:"All"}),e.jsx(E,{variant:"ghost",size:"sm",children:"Singles"}),e.jsx(E,{variant:"ghost",size:"sm",children:"Albums"})]})]}),h.length>0?e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:h.map(A=>e.jsx(R,{className:"hover:shadow-lg transition-shadow",children:e.jsxs(L,{className:"p-6",children:[e.jsx("div",{className:"aspect-square bg-gradient-to-br from-primary/20 to-primary/40 rounded-lg mb-4 flex items-center justify-center",children:e.jsx(Ue,{className:"w-12 h-12 text-primary/80"})}),e.jsx("h3",{className:"font-semibold mb-2",children:A.title}),e.jsxs("p",{className:"text-sm text-gray-600 mb-4",children:["ISRC: ",A.isrcCode]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs(E,{size:"sm",variant:"outline",children:[e.jsx(Gn,{className:"w-4 h-4 mr-1"}),"Play"]}),A.price&&e.jsxs(E,{size:"sm",onClick:()=>{var C,w;return s({itemId:A.id,title:A.title,artist:((w=(C=l.stageNames)==null?void 0:C.find(P=>P.isPrimary))==null?void 0:w.name)||l.stageName||"Unknown Artist",price:parseFloat(A.price),type:"song",quantity:1})},children:[e.jsx(Fs,{className:"w-4 h-4 mr-1"}),"$",A.price]})]})]})},A.id))}):e.jsxs("div",{className:"text-center py-12",children:[e.jsx(Ue,{className:"h-16 w-16 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-xl font-semibold text-gray-600 mb-2",children:"No music available"}),e.jsx("p",{className:"text-gray-500",children:"This artist hasn't uploaded any tracks yet."})]})]}),e.jsxs(ge,{value:"events",className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h2",{className:"text-2xl font-bold",children:"Upcoming Events"}),e.jsx(E,{variant:"outline",children:"View All Events"})]}),e.jsx("div",{className:"space-y-4",children:m().length>0?m().map(A=>e.jsx(R,{className:"hover:shadow-lg transition-shadow",children:e.jsx(L,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"w-16 h-16 bg-primary/10 rounded-lg flex items-center justify-center",children:e.jsx(dt,{className:"w-8 h-8 text-primary"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-lg",children:A.name}),e.jsxs("p",{className:"text-gray-600",children:[A.venue,", ",A.location]}),e.jsx("p",{className:"text-sm text-gray-500",children:new Date(A.date).toLocaleDateString()})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(X,{variant:"secondary",children:A.status}),e.jsxs(E,{children:[e.jsx(zn,{className:"w-4 h-4 mr-2"}),"Get Tickets"]})]})]})})},A.id)):e.jsxs("div",{className:"text-center py-12",children:[e.jsx(dt,{className:"h-16 w-16 mx-auto text-gray-400 mb-4"}),e.jsx("h3",{className:"text-xl font-semibold text-gray-600 mb-2",children:"No upcoming events"}),e.jsx("p",{className:"text-gray-500 mb-4",children:"Check back later for new performance dates!"}),e.jsx(E,{onClick:()=>{window.location.href="/booking"},children:"Book This Artist"})]})})]}),e.jsxs(ge,{value:"merchandise",className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h2",{className:"text-2xl font-bold",children:"Official Merchandise"}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(E,{variant:"outline",size:"sm",children:"All Items"}),e.jsx(E,{variant:"ghost",size:"sm",children:"Apparel"}),e.jsx(E,{variant:"ghost",size:"sm",children:"Accessories"})]})]}),u.length>0?e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:u.map(A=>e.jsx(R,{className:"hover:shadow-lg transition-shadow",children:e.jsxs(L,{className:"p-6",children:[e.jsx("div",{className:"aspect-square bg-gray-100 rounded-lg mb-4 flex items-center justify-center",children:e.jsx(Fs,{className:"w-12 h-12 text-gray-400"})}),e.jsx("h3",{className:"font-semibold mb-2",children:A.name}),e.jsx("p",{className:"text-sm text-gray-600 mb-4",children:A.description}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("span",{className:"text-lg font-bold text-primary",children:["$",A.price]}),e.jsxs(E,{size:"sm",onClick:()=>{var C,w;return s({itemId:A.id,title:A.name,artist:((w=(C=l.stageNames)==null?void 0:C.find(P=>P.isPrimary))==null?void 0:w.name)||l.stageName||"Unknown Artist",price:parseFloat(A.price),type:"merchandise",quantity:1})},children:[e.jsx(Fs,{className:"w-4 h-4 mr-1"}),"Add to Cart"]})]})]})},A.id))}):e.jsxs("div",{className:"text-center py-12",children:[e.jsx(Fs,{className:"h-16 w-16 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-xl font-semibold text-gray-600 mb-2",children:"No merchandise available"}),e.jsx("p",{className:"text-gray-500",children:"This artist doesn't have any merchandise for sale yet."})]})]})]})}),r&&n&&l.userId===n.id&&e.jsx(oZ,{open:r,onOpenChange:i,userType:[3,4].includes(n.roleId)?"artist":[5,6].includes(n.roleId)?"musician":[7,8].includes(n.roleId)?"professional":"fan",userSpecializations:((T=n==null?void 0:n.roleData)==null?void 0:T.specializations)||[],user:n})]})}function dZ(){const[t,s]=N.useState(""),[n,a]=N.useState("all"),[r,i]=N.useState("all"),[l,c]=N.useState("grid"),{data:o=[],isLoading:d}=ke({queryKey:["/api/artists"],select:p=>p||[]}),h=Array.from(new Set(o.map(p=>p.primaryGenre).filter(Boolean))).sort(),u=o.filter(p=>{var y;const g=!t||p.stageNames.some(f=>f.name.toLowerCase().includes(t.toLowerCase()))||((y=p.primaryGenre)==null?void 0:y.toLowerCase().includes(t.toLowerCase())),x=n==="all"||p.primaryGenre===n,v=r==="all"||r==="managed"&&p.isManaged||r==="independent"&&!p.isManaged;return g&&x&&v}),m=p=>{var x,v,y;const g=(x=p.stageNames)==null?void 0:x.find(f=>f.isPrimary);return(g==null?void 0:g.name)||((y=(v=p.stageNames)==null?void 0:v[0])==null?void 0:y.name)||`Artist ${p.userId}`};return d?e.jsx("div",{className:"min-h-screen bg-background",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 py-8",children:e.jsx("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4",children:[...Array(8)].map((p,g)=>e.jsx(R,{className:"animate-pulse",children:e.jsxs(L,{className:"p-6",children:[e.jsx("div",{className:"w-full h-48 bg-gray-200 rounded-lg mb-4"}),e.jsx("div",{className:"h-6 bg-gray-200 rounded mb-2"}),e.jsx("div",{className:"h-4 bg-gray-200 rounded w-2/3"})]})},g))})})}):e.jsxs("div",{className:"min-h-screen bg-background",children:[e.jsx("div",{className:"bg-gradient-to-r from-primary to-primary/80 text-white",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-12",children:[e.jsx("h1",{className:"text-4xl font-bold mb-4",children:"Discover Artists"}),e.jsx("p",{className:"text-xl opacity-90",children:"Explore our roster of talented artists and musicians from around the world"})]})}),e.jsx("div",{className:"border-b bg-white",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-6",children:[e.jsxs("div",{className:"flex flex-col md:flex-row gap-4 items-center justify-between",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 flex-1",children:[e.jsxs("div",{className:"relative flex-1 max-w-md",children:[e.jsx(Bs,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"}),e.jsx($,{placeholder:"Search artists or genres...",value:t,onChange:p=>s(p.target.value),className:"pl-10"})]}),e.jsxs(Re,{value:n,onValueChange:a,children:[e.jsx(Me,{className:"w-48",children:e.jsx(Oe,{placeholder:"All Genres"})}),e.jsxs(_e,{children:[e.jsx(U,{value:"all",children:"All Genres"}),h.map(p=>e.jsx(U,{value:p,children:p},p))]})]}),e.jsxs(Re,{value:r,onValueChange:i,children:[e.jsx(Me,{className:"w-48",children:e.jsx(Oe,{placeholder:"All Artists"})}),e.jsxs(_e,{children:[e.jsx(U,{value:"all",children:"All Artists"}),e.jsx(U,{value:"managed",children:"Managed Artists"}),e.jsx(U,{value:"independent",children:"Independent Artists"})]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(E,{variant:l==="grid"?"default":"outline",size:"sm",onClick:()=>c("grid"),children:e.jsx(b6,{className:"h-4 w-4"})}),e.jsx(E,{variant:l==="list"?"default":"outline",size:"sm",onClick:()=>c("list"),children:e.jsx(A6,{className:"h-4 w-4"})})]})]}),e.jsxs("div",{className:"flex items-center justify-between mt-4 text-sm text-gray-600",children:[e.jsxs("p",{children:["Showing ",u.length," of ",o.length," artists"]}),e.jsxs("p",{children:[o.filter(p=>p.isManaged).length," managed  ",o.filter(p=>!p.isManaged).length," independent"]})]})]})}),e.jsx("div",{className:"max-w-7xl mx-auto px-4 py-8",children:u.length===0?e.jsxs("div",{className:"text-center py-16",children:[e.jsx(Ue,{className:"h-16 w-16 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-xl font-semibold mb-2",children:"No artists found"}),e.jsx("p",{className:"text-gray-600 mb-4",children:"Try adjusting your search criteria or browse all artists."}),e.jsx(E,{onClick:()=>{s(""),a("all"),i("all")},children:"Clear Filters"})]}):e.jsx("div",{className:l==="grid"?"grid gap-6 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4":"space-y-4",children:u.map(p=>{var g,x;return e.jsx(Lt,{href:`/artists/${p.userId}`,children:e.jsxs(R,{className:`group hover:shadow-lg transition-all duration-300 cursor-pointer ${l==="list"?"flex flex-row":""}`,children:[e.jsx("div",{className:l==="list"?"w-48 flex-shrink-0":"",children:e.jsxs("div",{className:`relative overflow-hidden ${l==="list"?"h-full rounded-l-lg":"h-48 rounded-t-lg"}`,children:[(g=p.profile)!=null&&g.avatarUrl?e.jsx("img",{src:p.profile.avatarUrl,alt:m(p),className:"w-full h-full object-cover group-hover:scale-105 transition-transform duration-300"}):e.jsx("div",{className:"w-full h-full bg-gradient-to-br from-primary to-primary/70 flex items-center justify-center group-hover:from-primary/90 group-hover:to-primary/60 transition-colors duration-300",children:e.jsx("span",{className:"text-4xl font-bold text-white",children:m(p).charAt(0)})}),e.jsx("div",{className:"absolute top-3 left-3",children:p.isManaged&&e.jsx(X,{className:"bg-green-500 hover:bg-green-600",children:"Managed"})})]})}),e.jsxs(L,{className:`${l==="list"?"flex-1 p-6":"p-6"}`,children:[e.jsxs("div",{className:l==="list"?"flex items-center justify-between h-full":"",children:[e.jsxs("div",{className:l==="list"?"flex-1":"",children:[e.jsx("h3",{className:"text-xl font-bold mb-2 group-hover:text-primary transition-colors",children:m(p)}),e.jsxs("div",{className:"space-y-2",children:[p.primaryGenre&&e.jsxs("div",{className:"flex items-center text-sm text-gray-600",children:[e.jsx(Ue,{className:"h-4 w-4 mr-2"}),p.primaryGenre]}),e.jsxs("div",{className:"flex items-center text-sm text-gray-600",children:[e.jsx(Rt,{className:"h-4 w-4 mr-2 fill-yellow-400 text-yellow-400"}),"4.8 rating"]}),e.jsxs("div",{className:"flex items-center text-sm text-gray-600",children:[e.jsx(Dn,{className:"h-4 w-4 mr-2"}),"Available Worldwide"]})]}),((x=p.profile)==null?void 0:x.bio)&&l==="list"&&e.jsx("p",{className:"text-sm text-gray-600 mt-3 line-clamp-2",children:p.profile.bio})]}),l==="list"&&e.jsxs("div",{className:"text-right ml-4",children:[p.basePrice&&e.jsxs("p",{className:"text-lg font-bold text-primary",children:["$",p.basePrice]}),e.jsx(E,{className:"mt-2",children:"View Profile"})]})]}),l==="grid"&&e.jsxs("div",{className:"mt-4 pt-4 border-t flex items-center justify-between",children:[p.basePrice&&e.jsxs("span",{className:"text-lg font-bold text-primary",children:["From $",p.basePrice]}),e.jsx(E,{size:"sm",className:"ml-auto",children:"View Profile"})]})]})]})},p.userId)})})})]})}function uZ(){const[t,s]=N.useState(!1);return N.useEffect(()=>{const n=()=>{const a=navigator.userAgent.toLowerCase(),i=["mobile","android","iphone","ipad","ipod","blackberry","windows phone"].some(c=>a.includes(c)),l=window.innerWidth<=768;s(i||l)};return n(),window.addEventListener("resize",n),()=>window.removeEventListener("resize",n)},[]),t}const mZ=pe.object({guestName:pe.string().min(2,"Full name is required"),guestEmail:pe.string().email("Valid email is required"),guestPhone:pe.string().optional(),eventName:pe.string().min(1,"Event name is required"),eventType:pe.string().min(1,"Please select event type"),venueName:pe.string().min(1,"Venue name is required"),venueAddress:pe.string().min(1,"Venue address is required"),startTime:pe.string().min(1,"Start time is required"),endTime:pe.string().min(1,"End time is required"),expectedAttendees:pe.string().optional(),additionalNotes:pe.string().optional(),budget:pe.string().optional(),createAccount:pe.boolean().default(!1)}),ho=t=>{var s;if("stageName"in t&&t.stageName)return t.stageName;if("stageNames"in t&&t.stageNames&&t.stageNames.length>0){const n=t.stageNames[0];if(typeof n=="object"&&n&&"name"in n)return n.name;if(typeof n=="string")return n}return((s=t.user)==null?void 0:s.fullName)||"Unknown Artist"},hZ=t=>{const s=ho(t);return!s||typeof s!="string"?"A":s.split(" ").map(n=>n.charAt(0)).join("").toUpperCase()},lc=(t,s)=>{const n=Wr(new Date),a=Wr(t);return Tm(a,n)?{status:"past",color:"bg-gray-200 text-gray-400",available:!1}:CT(t)?{status:"weekend",color:"bg-red-100 text-red-600 border-red-200",available:!1}:{status:"available",color:"bg-green-100 text-green-600 border-green-200 hover:bg-green-200",available:!0}};function xZ(){const{user:t}=_s(),{toast:s}=nt(),n=Tt(),a=uZ(),[r]=As(),[i,l]=N.useState(null),[c,o]=N.useState(!1),[d,h]=N.useState([]),[u,m]=N.useState([]),[p,g]=N.useState([]),[x,v]=N.useState(!1),[y,f]=N.useState(!1),[b,j]=N.useState(!1);N.useState(!1);const{data:S=[],isLoading:k}=ke({queryKey:["/api/artists"]}),{data:T=[],isLoading:A}=ke({queryKey:["/api/musicians"]}),{data:C=[],isLoading:w}=ke({queryKey:["/api/services/managed"]}),P=V=>{if(c){const se=d.some(Z=>Z.userId===V.userId);h(se?d.filter(Z=>Z.userId!==V.userId):[...d,V]),l(null)}else l((i==null?void 0:i.userId)===V.userId?null:V),h([])},M=V=>{o(V),V?i&&(h([i]),l(null)):d.length>0&&(l(d[0]),h([]))};N.useEffect(()=>{const V=window.location.search,se=new URLSearchParams(V),Z=se.get("artist"),le=se.get("musician");if(Z&&S.length>0){const ne=S.find(ue=>ue.userId.toString()===Z);ne&&ne.isManaged&&l(ne)}else if(le&&T.length>0){const ne=T.find(ue=>ue.userId.toString()===le);ne&&ne.isManaged&&l(ne)}},[r,S,T]);const I=Cn({resolver:kn(mZ),defaultValues:{guestName:"",guestEmail:"",guestPhone:"",eventName:"",eventType:"",venueName:"",venueAddress:"",startTime:"",endTime:"",expectedAttendees:"",additionalNotes:"",budget:"",createAccount:!1}}),W=Xe({mutationFn:async V=>{let se;const Z=c?d[0]:i,le=c?d.slice(1):[];return t?(se={...V,primaryArtistUserId:Z==null?void 0:Z.userId,additionalTalentUserIds:le.map(ne=>ne.userId),multiTalentBooking:c,eventDates:p.map(ne=>ne.toISOString()),selectedAddOns:u,totalPrice:_(),bookerUserId:t.id,isGuestBooking:!1},await xe("/api/bookings",{method:"POST",body:JSON.stringify(se)})):(se={guestName:V.guestName,guestEmail:V.guestEmail,guestPhone:V.guestPhone,primaryArtistUserId:Z==null?void 0:Z.userId,additionalTalentUserIds:le.map(ne=>ne.userId),multiTalentBooking:c,eventName:V.eventName,eventType:V.eventType,eventDate:p.length>0?p[0].toISOString():null,venueName:V.venueName,venueAddress:V.venueAddress,requirements:V.additionalNotes,totalBudget:_(),createAccount:V.createAccount||!1},await xe("/api/bookings/guest",{method:"POST",body:JSON.stringify(se)}))},onSuccess:()=>{s({title:"Booking Submitted",description:"Your booking inquiry has been submitted successfully."}),j(!0),f(!1),n.invalidateQueries({queryKey:["/api/bookings"]}),n.invalidateQueries({queryKey:["/api/bookings/all"]}),n.invalidateQueries({queryKey:["/api/bookings/user"]})},onError:V=>{s({title:"Error",description:V.message||"Failed to submit booking. Please try again.",variant:"destructive"})}}),_=()=>{let V=0;c?V=d.reduce((Z,le)=>Z+parseFloat(le.basePrice||"0"),0):V=parseFloat((i==null?void 0:i.basePrice)||"0");const se=u.reduce((Z,le)=>{const ne=H.find(ue=>ue.id.toString()===le);return Z+(ne?parseFloat(ne.basePrice||"0"):0)},0);return V+se},B=V=>{if(!V||Tm(V,Wr(new Date)))return;if(!(c?d.length>0:i)){s({title:"Select Talent First",description:"Please select talent before choosing a date.",variant:"destructive"});return}x?g(Z=>Z.some(ne=>Zn(ne,V))?Z.filter(ne=>!Zn(ne,V)):[...Z,V].sort((ne,ue)=>ne.getTime()-ue.getTime())):(g([V]),f(!0))},O=()=>{const V=c?d.length>0:i;p.length>0&&V&&f(!0)},z=V=>{if(V.length===0)return"";if(V.length===1)return Mn(V[0],"MMM d, yyyy");const se=[...V].sort((te,Ae)=>te.getTime()-Ae.getTime()),Z=[];let le=[se[0]];for(let te=1;te<se.length;te++){const Ae=se[te],Ge=se[te-1];Math.floor((Ae.getTime()-Ge.getTime())/(1e3*60*60*24))===1?le.push(Ae):(Z.push(le),le=[Ae])}Z.push(le);const ne=Z.map(te=>{if(te.length===1)return Mn(te[0],"MMM d");{const Ae=te[0],Ge=te[te.length-1];return`${Mn(Ae,"MMM d")}-${Mn(Ge,"d")}`}}),ue=Mn(se[0],"yyyy");return ne.join(", ")+`, ${ue}`},F=V=>{m(se=>se.includes(V)?se.filter(Z=>Z!==V):[...se,V])},K=V=>{W.mutate(V)},D=S.filter(V=>V.isManaged),G=T.filter(V=>V.isManaged),H=C.filter(V=>{const se=D.some(le=>le.userId===V.createdByUserId),Z=G.some(le=>le.userId===V.createdByUserId);return se||Z});return b?e.jsx("div",{className:"min-h-screen bg-gray-50 py-12",children:e.jsx("div",{className:"max-w-4xl mx-auto px-4",children:e.jsx(R,{className:"text-center",children:e.jsxs(L,{className:"pt-6",children:[e.jsx(ct,{className:"w-16 h-16 text-green-500 mx-auto mb-4"}),e.jsx("h2",{className:"text-2xl font-bold mb-2",children:"Booking Inquiry Submitted!"}),e.jsx("p",{className:"text-gray-600 mb-4",children:"Your booking inquiry has been submitted successfully. Our team will review your request and contact you within 24 hours."}),e.jsx(E,{onClick:()=>j(!1),children:"Make Another Booking"})]})})})}):e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-purple-50 via-blue-50 to-indigo-50 mobile-safe",children:e.jsxs("div",{className:"max-w-7xl mx-auto mobile-container py-4 sm:py-6",children:[e.jsx("div",{className:"mb-8 text-center lg:text-left",children:e.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-4xl lg:text-5xl font-bold bg-gradient-to-r from-purple-600 to-blue-600 bg-clip-text text-transparent",children:"Talent Booking"}),e.jsx("p",{className:"text-gray-600 mt-2 text-lg",children:"Select managed talent, customize your package, and choose your date"})]}),e.jsx("div",{className:"flex items-center gap-2 text-sm text-gray-500",children:e.jsxs("div",{className:"flex items-center gap-1",children:[a?e.jsx(Iy,{className:"w-4 h-4"}):e.jsx(qr,{className:"w-4 h-4"}),e.jsxs("span",{children:[a?"Mobile":"Desktop"," View"]})]})})]})}),e.jsxs("div",{className:`grid gap-4 sm:gap-6 ${a?"grid-cols-1":"lg:grid-cols-12"} ${a?"space-y-4":"h-[calc(100vh-220px)]"}`,children:[e.jsx("div",{className:`${a?"order-1":"lg:col-span-3"}`,children:e.jsxs(R,{className:`${a?"h-auto":"h-full"} border-0 shadow-lg bg-white/80 backdrop-blur-sm`,children:[e.jsxs(Y,{className:"bg-gradient-to-r from-purple-500 to-blue-500 text-white rounded-t-lg",children:[e.jsxs(Q,{className:"flex items-center gap-2",children:[e.jsx(Ue,{className:"w-5 h-5"}),"Select Talent"]}),e.jsxs("div",{className:"mt-3 p-2 bg-white/10 rounded",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(hs,{id:"multi-talent",checked:c,onCheckedChange:M,className:"border-white data-[state=checked]:bg-white data-[state=checked]:text-purple-600"}),e.jsx("label",{htmlFor:"multi-talent",className:"text-sm font-medium cursor-pointer select-none",children:"Book multiple talents for this event"})]}),c&&e.jsx("p",{className:"text-xs mt-1 text-white/80",children:"Select multiple managed artists/musicians for your booking"})]}),c?d.length>0&&e.jsxs("div",{className:"mt-2 p-2 bg-white/20 rounded",children:[e.jsxs("p",{className:"text-sm font-semibold",children:["Selected Talents (",d.length,"):"]}),e.jsx("div",{className:"mt-1 space-y-1",children:d.map((V,se)=>e.jsxs("div",{className:"text-xs flex items-center justify-between",children:[e.jsx("span",{children:ho(V)}),e.jsxs("span",{className:"font-semibold",children:["$",V.basePrice||"0"]})]},V.userId))}),e.jsx("div",{className:"mt-2 pt-2 border-t border-white/20",children:e.jsxs("span",{className:"text-sm font-bold",children:["Total: $",d.reduce((V,se)=>V+parseFloat(se.basePrice||"0"),0)]})})]}):i&&e.jsx("div",{className:"mt-2 p-2 bg-white/20 rounded",children:e.jsxs("p",{className:"text-sm",children:["Selected: ",e.jsx("span",{className:"font-semibold",children:ho(i)})]})})]}),e.jsx(L,{className:`${a?"max-h-96 overflow-y-auto":"overflow-y-auto h-[calc(100%-120px)]"} p-4`,children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsxs("h3",{className:"font-semibold text-sm text-gray-700 uppercase tracking-wide mb-3 flex items-center gap-2",children:[e.jsx(ns,{className:"w-4 h-4 text-yellow-600"}),"Managed Artists"]}),k?e.jsx("div",{className:"text-center py-4",children:"Loading artists..."}):D.length===0?e.jsx("div",{className:"text-center py-4 text-gray-500",children:"No managed artists available"}):e.jsx("div",{className:"space-y-3",children:D.map(V=>{var Z,le;const se=c?d.some(ne=>ne.userId===V.userId):(i==null?void 0:i.userId)===V.userId;return e.jsx(R,{className:`cursor-pointer transition-all duration-300 hover:shadow-lg hover:scale-105 ${se?"ring-2 ring-purple-500 bg-purple-50 shadow-lg":"hover:bg-blue-50"}`,onClick:()=>P(V),children:e.jsx(L,{className:"p-3 min-h-[80px]",children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsxs(Ln,{className:"w-14 h-14 border-2 border-white shadow-md",children:[e.jsx(ga,{src:V.bookingFormPictureUrl||((Z=V.userProfile)==null?void 0:Z.avatarUrl)||((le=V.profile)==null?void 0:le.avatarUrl)||"",className:"object-cover"}),e.jsx(Fn,{className:"bg-gradient-to-br from-purple-500 to-blue-500 text-white font-bold text-lg",children:hZ(V)})]}),e.jsxs("div",{className:"flex-1 min-w-0 flex flex-col",children:[e.jsx("h4",{className:"font-bold text-sm break-words leading-tight mb-1",children:ho(V)}),e.jsx("p",{className:"text-xs text-gray-500 truncate mb-2",children:V.primaryGenre||"Various"}),e.jsxs("div",{className:"flex items-center justify-between mt-auto",children:[e.jsxs(X,{variant:"secondary",className:`text-xs px-1 py-0.5 ${se?"bg-gradient-to-r from-green-500 to-green-600 text-white":"bg-gradient-to-r from-yellow-400 to-yellow-500 text-yellow-900"}`,children:[e.jsx(ns,{className:"w-2 h-2 mr-1"}),se?"SELECTED":"Managed"]}),e.jsxs("span",{className:"text-sm font-bold text-green-600",children:["$",V.basePrice||"0"]})]})]})]})})},`managed-artist-${V.userId||V.id}`)})})]}),e.jsxs("div",{children:[e.jsxs("h3",{className:"font-semibold text-sm text-gray-700 uppercase tracking-wide mb-3 flex items-center gap-2",children:[e.jsx(Bb,{className:"w-4 h-4 text-blue-600"}),"Managed Musicians"]}),A?e.jsx("div",{className:"text-center py-4",children:"Loading musicians..."}):G.length===0?e.jsx("div",{className:"text-center py-4 text-gray-500",children:"No managed musicians available"}):e.jsx("div",{className:"space-y-3",children:G.map(V=>{var Z,le,ne;const se=c?d.some(ue=>ue.userId===V.userId):(i==null?void 0:i.userId)===V.userId;return e.jsx(R,{className:`cursor-pointer transition-all duration-300 hover:shadow-lg hover:scale-105 ${se?"ring-2 ring-purple-500 bg-purple-50 shadow-lg":"hover:bg-blue-50"}`,onClick:()=>P(V),children:e.jsx(L,{className:"p-3 min-h-[80px]",children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsxs(Ln,{className:"w-14 h-14 border-2 border-white shadow-md",children:[e.jsx(ga,{src:V.bookingFormPictureUrl||((Z=V.userProfile)==null?void 0:Z.avatarUrl)||((le=V.profile)==null?void 0:le.avatarUrl)||"",className:"object-cover"}),e.jsx(Fn,{className:"bg-gradient-to-br from-blue-500 to-indigo-500 text-white",children:e.jsx(Bb,{className:"w-4 h-4"})})]}),e.jsxs("div",{className:"flex-1 min-w-0 flex flex-col",children:[e.jsx("h4",{className:"font-bold text-sm break-words leading-tight mb-1",children:((ne=V.user)==null?void 0:ne.fullName)||"Musician"}),e.jsx("p",{className:"text-xs text-gray-500 truncate mb-2",children:"Session Musician"}),e.jsxs("div",{className:"flex items-center justify-between mt-auto",children:[e.jsxs(X,{variant:"secondary",className:`text-xs px-1 py-0.5 ${se?"bg-gradient-to-r from-green-500 to-green-600 text-white":"bg-gradient-to-r from-blue-400 to-blue-500 text-blue-900"}`,children:[e.jsx(Bt,{className:"w-2 h-2 mr-1"}),se?"SELECTED":"Managed"]}),e.jsxs("span",{className:"text-sm font-bold text-green-600",children:["$",V.basePrice||"0"]})]})]})]})})},`managed-musician-${V.userId||V.id}`)})})]}),!a&&(i||d.length>0)&&e.jsx("div",{className:"mt-4 pt-4 border-t",children:e.jsx(E,{onClick:()=>{var V;(V=document.getElementById("addons-section"))==null||V.scrollIntoView({behavior:"smooth"})},className:"w-full bg-gradient-to-r from-purple-600 to-blue-600 hover:from-purple-700 hover:to-blue-700",children:"Continue to Add-ons"})})]})})]})}),e.jsx("div",{id:"addons-section",className:`${a?"order-2":"lg:col-span-3"}`,children:e.jsxs(R,{className:`${a?"h-auto":"h-full"} border-0 shadow-lg bg-white/80 backdrop-blur-sm`,children:[e.jsxs(Y,{className:"bg-gradient-to-r from-orange-500 to-red-500 text-white rounded-t-lg",children:[e.jsxs(Q,{className:"flex items-center gap-2",children:[e.jsx(st,{className:"w-5 h-5"}),"Add-ons & Services"]}),(i||d.length>0)&&e.jsx("div",{className:"mt-2 p-2 bg-white/20 rounded",children:e.jsx("p",{className:"text-sm",children:c?e.jsxs(e.Fragment,{children:["Total Base Price: ",e.jsxs("span",{className:"font-semibold",children:["$",d.reduce((V,se)=>V+parseFloat(se.basePrice||"0"),0)]})]}):e.jsxs(e.Fragment,{children:["Base Price: ",e.jsxs("span",{className:"font-semibold",children:["$",(i==null?void 0:i.basePrice)||"0"]})]})})})]}),e.jsxs(L,{className:`${a?"max-h-96 overflow-y-auto":"overflow-y-auto h-[calc(100%-120px)]"} p-4`,children:[!i&&d.length===0?e.jsxs(Ua,{className:"border-blue-200 bg-blue-50",children:[e.jsx(gm,{className:"h-4 w-4 text-blue-600"}),e.jsx(YT,{className:"text-blue-800",children:"Select Talent"}),e.jsx(sr,{className:"text-blue-700",children:"Choose talent first to see available add-ons and services."})]}):e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsxs("h3",{className:"font-semibold text-sm text-gray-700 uppercase tracking-wide mb-3 flex items-center gap-2",children:[e.jsx(Ze,{className:"w-4 h-4 text-blue-600"}),"Additional Musicians"]}),e.jsx("div",{className:"space-y-2",children:w?e.jsx("div",{className:"text-center py-4 text-gray-500",children:"Loading services..."}):H.filter(V=>V.categoryId===1||V.name.toLowerCase().includes("musician")).length===0?e.jsx("div",{className:"text-center py-4 text-gray-500",children:"No additional musicians available from managed artists"}):H.filter(V=>V.categoryId===1||V.name.toLowerCase().includes("musician")).map(V=>e.jsx(R,{className:"border transition-all hover:shadow-md",children:e.jsx(L,{className:"p-3",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(hs,{checked:u.includes(V.id.toString()),onCheckedChange:()=>F(V.id.toString())}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"font-medium text-sm",children:V.name}),e.jsx("p",{className:"text-xs text-gray-600",children:V.description}),e.jsxs("span",{className:"text-sm font-semibold text-green-600",children:["+$",V.basePrice]})]})]})})},V.id))})]}),e.jsxs("div",{children:[e.jsxs("h3",{className:"font-semibold text-sm text-gray-700 uppercase tracking-wide mb-3 flex items-center gap-2",children:[e.jsx(Ue,{className:"w-4 h-4 text-purple-600"}),"Equipment"]}),e.jsx("div",{className:"space-y-2",children:w?e.jsx("div",{className:"text-center py-4 text-gray-500",children:"Loading equipment..."}):H.filter(V=>V.categoryId===2||V.name.toLowerCase().includes("equipment")||V.name.toLowerCase().includes("sound")||V.name.toLowerCase().includes("lighting")).length===0?e.jsx("div",{className:"text-center py-4 text-gray-500",children:"No equipment services available from managed artists"}):H.filter(V=>V.categoryId===2||V.name.toLowerCase().includes("equipment")||V.name.toLowerCase().includes("sound")||V.name.toLowerCase().includes("lighting")).map(V=>e.jsx(R,{className:"border transition-all hover:shadow-md",children:e.jsx(L,{className:"p-3",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(hs,{checked:u.includes(V.id.toString()),onCheckedChange:()=>F(V.id.toString())}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"font-medium text-sm",children:V.name}),e.jsx("p",{className:"text-xs text-gray-600",children:V.description}),e.jsxs("span",{className:"text-sm font-semibold text-green-600",children:["+$",V.basePrice]})]})]})})},V.id))})]}),e.jsxs("div",{children:[e.jsxs("h3",{className:"font-semibold text-sm text-gray-700 uppercase tracking-wide mb-3 flex items-center gap-2",children:[e.jsx(Rt,{className:"w-4 h-4 text-yellow-600"}),"Services"]}),e.jsx("div",{className:"space-y-2",children:w?e.jsx("div",{className:"text-center py-4 text-gray-500",children:"Loading services..."}):H.filter(V=>V.categoryId===3||!V.name.toLowerCase().includes("musician")&&!V.name.toLowerCase().includes("equipment")&&!V.name.toLowerCase().includes("sound")&&!V.name.toLowerCase().includes("lighting")).length===0?e.jsx("div",{className:"text-center py-4 text-gray-500",children:"No additional services available from managed artists"}):H.filter(V=>V.categoryId===3||!V.name.toLowerCase().includes("musician")&&!V.name.toLowerCase().includes("equipment")&&!V.name.toLowerCase().includes("sound")&&!V.name.toLowerCase().includes("lighting")).map(V=>e.jsx(R,{className:"border transition-all hover:shadow-md",children:e.jsx(L,{className:"p-3",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(hs,{checked:u.includes(V.id.toString()),onCheckedChange:()=>F(V.id.toString())}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"font-medium text-sm",children:V.name}),e.jsx("p",{className:"text-xs text-gray-600",children:V.description}),e.jsxs("span",{className:"text-sm font-semibold text-green-600",children:["+$",V.basePrice]})]})]})})},V.id))})]}),u.length>0&&e.jsx(R,{className:"bg-gradient-to-r from-green-50 to-blue-50 border-green-200",children:e.jsxs(L,{className:"p-4",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"font-semibold text-gray-700",children:"Total Price:"}),e.jsxs("span",{className:"text-xl font-bold text-green-600",children:["$",_()]})]}),e.jsxs("p",{className:"text-xs text-gray-600 mt-1",children:["Base: $",(i==null?void 0:i.basePrice)||"0"," + Add-ons: $",u.reduce((V,se)=>{const Z=H.find(le=>le.id.toString()===se);return V+(Z?parseFloat(Z.basePrice||"0"):0)},0)]})]})})]}),!a&&(i||d.length>0)&&e.jsx("div",{className:"mt-4 pt-4 border-t",children:e.jsx(E,{onClick:()=>{var V;(V=document.getElementById("calendar-section"))==null||V.scrollIntoView({behavior:"smooth"})},className:"w-full bg-gradient-to-r from-orange-600 to-red-600 hover:from-orange-700 hover:to-red-700",children:"Continue to Calendar"})})]})]})}),e.jsx("div",{id:"calendar-section",className:`${a?"order-3":"lg:col-span-6"} flex flex-col`,children:e.jsxs(R,{className:`${a?"h-auto":"h-full min-h-[800px]"} border-0 shadow-lg bg-white/80 backdrop-blur-sm flex flex-col`,children:[e.jsxs(Y,{className:"bg-gradient-to-r from-green-500 to-blue-500 text-white rounded-t-lg",children:[e.jsxs(Q,{className:"flex items-center gap-2",children:[e.jsx(dt,{className:"w-5 h-5"}),"Select Your Date"]}),i&&e.jsx("div",{className:"mt-2 p-2 bg-white/20 rounded",children:e.jsxs("p",{className:"text-sm",children:[e.jsx("span",{className:"font-semibold",children:ho(i)}),u.length>0&&` (+${u.length} add-ons)`]})})]}),e.jsxs(L,{className:"p-6 flex-1 flex flex-col",children:[e.jsxs(R,{className:"mb-6 bg-gradient-to-r from-gray-50 to-blue-50 border border-blue-200",children:[e.jsx(Y,{className:"pb-3",children:e.jsxs(Q,{className:"text-lg flex items-center gap-2",children:[e.jsx(id,{className:"w-5 h-5 text-blue-600"}),"Calendar Legend"]})}),e.jsx(L,{className:"pt-0",children:e.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-3 text-sm",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-4 h-4 bg-green-100 border border-green-200 rounded"}),e.jsx("span",{children:"Available"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-4 h-4 bg-red-100 border border-red-200 rounded"}),e.jsx("span",{children:"Unavailable"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-4 h-4 bg-orange-100 border border-orange-200 rounded"}),e.jsx("span",{children:"Booked"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-4 h-4 bg-gray-200 rounded"}),e.jsx("span",{children:"Past"})]}),x&&p.length>0&&e.jsx(E,{size:"sm",variant:"outline",onClick:()=>g([]),className:"text-red-600 border-red-200 hover:bg-red-50",children:"Unselect All"})]})})]}),e.jsxs("div",{className:"flex flex-col flex-1 space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-3 p-3 bg-white rounded-lg border",children:[e.jsx(hs,{checked:x,onCheckedChange:V=>v(V===!0),id:"multi-date"}),e.jsx("label",{htmlFor:"multi-date",className:"text-sm font-medium cursor-pointer",children:"Select multiple dates"}),x&&p.length>0&&e.jsx("div",{className:"ml-auto",children:e.jsxs(E,{size:"sm",onClick:O,className:"bg-green-600 hover:bg-green-700",children:["Confirm ",p.length," Dates"]})})]}),e.jsx("div",{className:"flex-1 flex flex-col",style:{minHeight:"600px"},children:e.jsx(Ql,{mode:x?"multiple":"single",selected:x?p:p[0],onSelect:x?V=>g(V||[]):B,disabled:V=>!lc(V).available,modifiers:{available:V=>lc(V).status==="available",unavailable:V=>lc(V).status==="unavailable",booked:V=>lc(V).status==="booked",weekend:V=>lc(V).status==="weekend",past:V=>lc(V).status==="past",selected:V=>p.some(se=>Zn(se,V))},modifiersStyles:{available:{backgroundColor:"#dcfce7",color:"#166534",border:"2px solid #bbf7d0",borderRadius:"12px",fontWeight:"600",fontSize:"1.1rem"},unavailable:{backgroundColor:"#fecaca",color:"#dc2626",border:"2px solid #fca5a5",borderRadius:"12px",fontWeight:"600",fontSize:"1.1rem"},booked:{backgroundColor:"#fed7aa",color:"#ea580c",border:"2px solid #fdba74",borderRadius:"12px",fontWeight:"600",fontSize:"1.1rem"},weekend:{backgroundColor:"#fecaca",color:"#dc2626",border:"2px solid #fca5a5",borderRadius:"12px",fontWeight:"600",fontSize:"1.1rem"},past:{backgroundColor:"#e5e7eb",color:"#6b7280",borderRadius:"12px",fontWeight:"500",fontSize:"1.1rem"},selected:{backgroundColor:"#3b82f6",color:"white",fontWeight:"bold",border:"2px solid #1d4ed8",borderRadius:"12px",fontSize:"1.2rem",boxShadow:"0 4px 12px rgba(59, 130, 246, 0.4)"}},style:{width:"100%"},className:`w-full ${a?"":"max-w-none"}`,classNames:{months:"w-full",month:"w-full space-y-4",caption:"flex justify-center pt-1 relative items-center text-xl font-bold text-gray-800 pb-4",caption_label:"text-2xl font-bold",nav:"space-x-1 flex items-center",nav_button:"inline-flex items-center justify-center rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 border border-input bg-background hover:bg-accent hover:text-accent-foreground h-7 w-7",nav_button_previous:"absolute left-1",nav_button_next:"absolute right-1",table:"w-full border-collapse space-y-1",head_row:"grid grid-cols-7 gap-2 w-full mb-2",head_cell:"text-center font-bold text-gray-700 text-lg py-2 w-full",row:"grid grid-cols-7 gap-2 w-full mt-2",cell:"w-full aspect-square relative p-0 text-center text-sm focus-within:relative focus-within:z-20",day:"w-full h-full min-h-[70px] text-lg font-semibold flex items-center justify-center border border-gray-200 rounded-xl transition-all duration-200 hover:scale-105 hover:shadow-lg cursor-pointer select-none",day_range_end:"day-range-end",day_selected:"bg-blue-500 text-white font-bold border-2 border-blue-700 shadow-lg",day_today:"bg-accent text-accent-foreground",day_outside:"text-muted-foreground opacity-50",day_disabled:"text-muted-foreground opacity-50 cursor-not-allowed hover:scale-100 hover:shadow-none",day_range_middle:"aria-selected:bg-accent aria-selected:text-accent-foreground",day_hidden:"invisible"}})}),p.length>0&&e.jsxs("div",{className:"p-4 bg-gradient-to-r from-blue-50 to-purple-50 rounded-lg border border-blue-200 mt-4",children:[e.jsx("h3",{className:"font-semibold text-blue-800 mb-2",children:"Selected Dates Summary"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-600",children:"Dates Selected:"}),e.jsxs("p",{className:"font-medium text-blue-700",children:[p.length," date",p.length>1?"s":""]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-600",children:"Date Range:"}),e.jsx("p",{className:"font-medium text-blue-700",children:z(p)})]}),i&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-600",children:"Talent:"}),e.jsx("p",{className:"font-medium text-blue-700",children:ho(i)})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-600",children:"Total Price:"}),e.jsxs("p",{className:"font-bold text-green-600",children:["$",_()*p.length]})]})]})]}),p.length>0&&(i||d.length>0)&&(!x||p.length===1)&&e.jsxs(E,{onClick:()=>f(!0),className:"w-full mt-4 bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-700 hover:to-purple-700",children:["Continue Booking",c&&d.length>1&&e.jsxs("span",{className:"ml-2 px-2 py-1 text-xs bg-white/20 rounded",children:[d.length," talents"]})]})]})]})]})]})})]}),e.jsx(kt,{open:y,onOpenChange:f,children:e.jsxs(wt,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[e.jsxs(St,{children:[e.jsx(Ct,{children:"Complete Your Booking"}),e.jsx(us,{children:"Please provide your contact information and event details to complete your booking."})]}),e.jsx(On,{...I,children:e.jsxs("form",{onSubmit:I.handleSubmit(K),className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx($e,{control:I.control,name:"guestName",render:({field:V})=>e.jsxs(Fe,{children:[e.jsx(qe,{children:"Full Name *"}),e.jsx(Le,{children:e.jsx($,{placeholder:"Your full name",...V})}),e.jsx(ze,{})]})}),e.jsx($e,{control:I.control,name:"guestEmail",render:({field:V})=>e.jsxs(Fe,{children:[e.jsx(qe,{children:"Email Address *"}),e.jsx(Le,{children:e.jsx($,{type:"email",placeholder:"your@email.com",...V})}),e.jsx(ze,{})]})})]}),e.jsx($e,{control:I.control,name:"guestPhone",render:({field:V})=>e.jsxs(Fe,{children:[e.jsx(qe,{children:"Phone Number"}),e.jsx(Le,{children:e.jsx($,{placeholder:"Your phone number",...V})}),e.jsx(ze,{})]})}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx($e,{control:I.control,name:"eventName",render:({field:V})=>e.jsxs(Fe,{children:[e.jsx(qe,{children:"Event Name *"}),e.jsx(Le,{children:e.jsx($,{placeholder:"e.g., Wedding Reception",...V})}),e.jsx(ze,{})]})}),e.jsx($e,{control:I.control,name:"eventType",render:({field:V})=>e.jsxs(Fe,{children:[e.jsx(qe,{children:"Event Type *"}),e.jsxs(Re,{onValueChange:V.onChange,defaultValue:V.value,children:[e.jsx(Le,{children:e.jsx(Me,{children:e.jsx(Oe,{placeholder:"Select event type"})})}),e.jsxs(_e,{children:[e.jsx(U,{value:"wedding",children:"Wedding"}),e.jsx(U,{value:"corporate",children:"Corporate Event"}),e.jsx(U,{value:"private-party",children:"Private Party"}),e.jsx(U,{value:"concert",children:"Concert"}),e.jsx(U,{value:"festival",children:"Festival"}),e.jsx(U,{value:"other",children:"Other"})]})]}),e.jsx(ze,{})]})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx($e,{control:I.control,name:"venueName",render:({field:V})=>e.jsxs(Fe,{children:[e.jsx(qe,{children:"Venue Name *"}),e.jsx(Le,{children:e.jsx($,{placeholder:"Event venue name",...V})}),e.jsx(ze,{})]})}),e.jsx($e,{control:I.control,name:"venueAddress",render:({field:V})=>e.jsxs(Fe,{children:[e.jsx(qe,{children:"Venue Address *"}),e.jsx(Le,{children:e.jsx($,{placeholder:"Full venue address",...V})}),e.jsx(ze,{})]})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx($e,{control:I.control,name:"startTime",render:({field:V})=>e.jsxs(Fe,{children:[e.jsx(qe,{children:"Start Time *"}),e.jsx(Le,{children:e.jsx($,{type:"time",...V})}),e.jsx(ze,{})]})}),e.jsx($e,{control:I.control,name:"endTime",render:({field:V})=>e.jsxs(Fe,{children:[e.jsx(qe,{children:"End Time *"}),e.jsx(Le,{children:e.jsx($,{type:"time",...V})}),e.jsx(ze,{})]})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx($e,{control:I.control,name:"expectedAttendees",render:({field:V})=>e.jsxs(Fe,{children:[e.jsx(qe,{children:"Expected Attendees"}),e.jsx(Le,{children:e.jsx($,{placeholder:"Approximate number of guests",...V})}),e.jsx(ze,{})]})}),e.jsx($e,{control:I.control,name:"budget",render:({field:V})=>e.jsxs(Fe,{children:[e.jsx(qe,{children:"Your Budget"}),e.jsx(Le,{children:e.jsx($,{placeholder:"e.g., $5000",...V})}),e.jsx(ze,{})]})})]}),e.jsxs("div",{className:"p-4 bg-gradient-to-r from-green-50 to-blue-50 rounded-lg border border-green-200",children:[e.jsx("h3",{className:"font-semibold text-green-800 mb-3",children:"Booking Summary"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-600",children:"Talent:"}),e.jsx("p",{className:"font-medium",children:i?ho(i):"No talent selected"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-600",children:"Dates:"}),e.jsx("p",{className:"font-medium",children:z(p)})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-600",children:"Add-ons:"}),e.jsxs("p",{className:"font-medium",children:[u.length," selected"]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-600",children:"Total Price:"}),e.jsxs("p",{className:"font-bold text-green-600 text-lg",children:["$",_()*p.length]}),p.length>1&&e.jsxs("p",{className:"text-xs text-gray-500",children:["$",_(),"  ",p.length," dates"]})]})]})]}),e.jsx($e,{control:I.control,name:"additionalNotes",render:({field:V})=>e.jsxs(Fe,{children:[e.jsx(qe,{children:"Additional Notes"}),e.jsx(Le,{children:e.jsx(mt,{placeholder:"Any special requirements or additional information...",rows:3,...V})}),e.jsx(ze,{})]})}),!t&&e.jsx($e,{control:I.control,name:"createAccount",render:({field:V})=>e.jsxs(Fe,{className:"flex flex-row items-center space-x-3 space-y-0",children:[e.jsx(Le,{children:e.jsx(hs,{checked:V.value,onCheckedChange:V.onChange})}),e.jsx("div",{className:"space-y-1 leading-none",children:e.jsx(qe,{children:"Create an account to track my bookings"})})]})}),e.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[e.jsx(E,{type:"button",variant:"outline",onClick:()=>f(!1),children:"Cancel"}),e.jsx(E,{type:"submit",disabled:W.isPending,children:W.isPending?"Submitting...":"Submit Booking"})]})]})})]})})]})})}const pZ={USD:1,EUR:.85,GBP:.73,CAD:1.25,AUD:1.35,JPY:110,CNY:6.45,INR:75,BRL:5.2,MXN:18.5,XCD:2.7},fZ={USD:"$",EUR:"",GBP:"",CAD:"C$",AUD:"A$",JPY:"",CNY:"",INR:"",BRL:"R$",MXN:"$",XCD:"EC$"};function gZ(){const[t,s]=N.useState(""),[n,a]=N.useState(""),[r,i]=N.useState(""),[l,c]=N.useState("services"),[o,d]=N.useState("USD"),{addItem:h}=Zo(),{toast:u}=nt(),[m]=As();N.useEffect(()=>{const _=window.location.search,O=new URLSearchParams(_).get("tab");console.log("Services page - URL tab parameter:",O),console.log("Services page - Window location search:",window.location.search),console.log("Services page - Wouter location:",m),O&&["services","professionals","artists","musicians"].includes(O)&&(console.log("Services page - Setting active tab to:",O),c(O))},[m]);const{data:p,isLoading:g}=ke({queryKey:["/api/managed-users-with-services"]}),{data:x=[],isLoading:v}=ke({queryKey:["/api/service-categories"]}),{data:y=[],isLoading:f}=ke({queryKey:["/api/admin-services"]}),{data:b=[],isLoading:j}=ke({queryKey:["/api/user-services"]}),S=(p==null?void 0:p.professionals)||[],k=(p==null?void 0:p.artists)||[],T=(p==null?void 0:p.musicians)||[],C=[...(y.filter(_=>!_.name.toLowerCase().includes("consultation"))||[]).map(_=>({..._,type:"waitumusic_core"}))];S.length,k.length,T.length;const w=C.length,P=C.filter(_=>{var F;const B=_.name.toLowerCase().includes(t.toLowerCase())||((F=_.description)==null?void 0:F.toLowerCase().includes(t.toLowerCase())),O=!n||_.categoryId===parseInt(n),z=!r||r==="under50"&&parseFloat(_.basePrice||_.price)<50||r==="50to100"&&parseFloat(_.basePrice||_.price)>=50&&parseFloat(_.basePrice||_.price)<=100||r==="over100"&&parseFloat(_.basePrice||_.price)>100;return B&&O&&z}),M=g||v||f||j,I=[{value:"under50",label:"Under $50"},{value:"50to100",label:"$50 - $100"},{value:"over100",label:"Over $100"}],W=_=>{try{h({type:"merchandise",itemId:_.id,title:_.name,artist:_.provider,price:_.price,quantity:1}),u({title:"Added to cart",description:`${_.name} has been added to your cart.`})}catch(B){console.error("Error adding to cart:",B),u({title:"Error",description:"Failed to add item to cart. Please try again.",variant:"destructive"})}};return e.jsxs("div",{className:"min-h-screen bg-background",children:[e.jsx("section",{className:"gradient-primary text-white py-16",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 text-center",children:[e.jsx("h1",{className:"text-4xl md:text-5xl font-bold mb-4",children:"Comprehensive Music Solutions"}),e.jsx("p",{className:"text-xl text-gray-200 max-w-3xl mx-auto mb-6",children:"Essential music industry services exclusively provided by Wai'tuMusic - splitsheets, ISRC coding, and PRO registration"}),e.jsx("div",{className:"flex items-center justify-center",children:e.jsxs("div",{className:"flex items-center space-x-2 bg-white/10 backdrop-blur-sm rounded-lg border border-white/20 px-4 py-2 shadow-lg",children:[e.jsx("span",{className:"text-sm font-medium text-white",children:"Currency:"}),e.jsx("select",{value:o,onChange:_=>d(_.target.value),className:"text-sm font-medium bg-transparent border-none focus:outline-none focus:ring-0 text-white",style:{backgroundColor:"transparent"},children:Object.keys(pZ).map(_=>e.jsxs("option",{value:_,className:"text-black",children:[fZ[_]," ",_]},_))})]})}),e.jsxs("p",{className:"text-xs text-gray-300 mt-2",children:["Prices shown in ",o,". All payments processed in USD."]})]})}),e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:e.jsxs(Ut,{value:l,onValueChange:c,className:"w-full",children:[e.jsxs(jt,{className:"grid w-full grid-cols-4",children:[e.jsxs(Ne,{value:"services",children:["Core Services (",w,")"]}),e.jsxs(Ne,{value:"professionals",children:["Professionals (",S.length,")"]}),e.jsxs(Ne,{value:"artists",children:["Artists (",k.length,")"]}),e.jsxs(Ne,{value:"musicians",children:["Musicians (",T.length,")"]})]}),e.jsxs(ge,{value:"services",className:"space-y-8",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(Bs,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground h-4 w-4"}),e.jsx($,{placeholder:"Search services...",value:t,onChange:_=>s(_.target.value),className:"pl-10"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(Re,{value:n,onValueChange:a,children:[e.jsx(Me,{className:"w-48",children:e.jsx(Oe,{placeholder:"All Categories"})}),e.jsxs(_e,{children:[e.jsx(U,{value:"all",children:"All Categories"}),x.map(_=>e.jsx(U,{value:_.id.toString(),children:_.name},_.id))]})]}),e.jsxs(Re,{value:r,onValueChange:i,children:[e.jsx(Me,{className:"w-40",children:e.jsx(Oe,{placeholder:"All Prices"})}),e.jsxs(_e,{children:[e.jsx(U,{value:"all",children:"All Prices"}),I.map(_=>e.jsx(U,{value:_.value,children:_.label},_.value))]})]})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("p",{className:"text-muted-foreground",children:["Showing ",P.length," of ",C.length," services"]}),e.jsxs(E,{variant:"outline",size:"sm",children:[e.jsx(to,{className:"h-4 w-4 mr-2"}),"More Filters"]})]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:P.map(_=>{var B;return e.jsx(R,{className:"hover:shadow-lg transition-shadow",children:e.jsxs(L,{className:"p-6",children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-12 h-12 bg-primary/10 rounded-lg flex items-center justify-center",children:e.jsx(Ue,{className:"h-6 w-6"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-lg",children:_.name}),e.jsx("p",{className:"text-sm text-muted-foreground",children:_.type==="waitumusic_service"?"Wai'tuMusic Service":_.type==="admin"?"WaiTu Music":"User Service"})]})]}),e.jsx(X,{variant:"secondary",children:(B=x.find(O=>O.id===_.categoryId))==null?void 0:B.name})]}),e.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:_.description}),_.features&&e.jsxs("div",{className:"mb-4",children:[e.jsx("p",{className:"text-sm font-medium mb-2",children:"Includes:"}),e.jsx("div",{className:"space-y-1",children:(Array.isArray(_.features)?_.features:[]).map((O,z)=>e.jsxs("div",{className:"flex items-center text-sm",children:[e.jsx(ct,{className:"h-3 w-3 text-green-500 mr-2"}),e.jsx("span",{children:O})]},z))})]}),e.jsxs("div",{className:"flex items-center justify-between mb-4 text-sm",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(Qt,{className:"h-4 w-4 mr-1 text-muted-foreground"}),e.jsx("span",{children:_.duration?`${_.duration}min`:_.unit||"session"})]}),_.enableRating!==!1&&e.jsxs("div",{className:"flex items-center",children:[e.jsx(Rt,{className:"h-4 w-4 mr-1 text-yellow-500"}),e.jsx("span",{children:"4.8 (12)"})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("span",{className:"text-2xl font-bold",children:["$",parseFloat(_.basePrice||_.price).toFixed(0)]}),e.jsxs("span",{className:"text-muted-foreground text-sm",children:["/",_.unit||"session"]})]}),e.jsx("div",{className:"space-x-2",children:_.type==="waitumusic_service"&&_.id==="pro-registration-service"?e.jsx(Lt,{to:"/pro-registration",children:e.jsxs(E,{size:"sm",children:[e.jsx(dt,{className:"h-4 w-4 mr-2"}),"Start Registration"]})}):_.type==="waitumusic_service"&&_.id==="splitsheet-service"?e.jsx(Lt,{to:"/splitsheet",children:e.jsxs(E,{size:"sm",children:[e.jsx(dt,{className:"h-4 w-4 mr-2"}),"Create Splitsheet"]})}):e.jsxs(E,{variant:"outline",size:"sm",onClick:()=>W(_),children:[e.jsx(Fs,{className:"h-4 w-4 mr-2"}),"Add to Cart"]})})]})]})},_.id)})}),P.length===0&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx(Ue,{className:"h-16 w-16 text-muted-foreground mx-auto mb-4"}),e.jsx("h3",{className:"text-xl font-semibold mb-2",children:"No services found"}),e.jsx("p",{className:"text-muted-foreground mb-4",children:"Try adjusting your search criteria or filters"}),e.jsx(E,{variant:"outline",onClick:()=>{s(""),a(""),i("")},children:"Clear Filters"})]})]}),e.jsxs(ge,{value:"professionals",className:"space-y-6",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("h2",{className:"text-2xl font-bold mb-2",children:"Managed Professionals"}),e.jsx("p",{className:"text-muted-foreground",children:"Click on any professional to book a consultation session with them directly."})]}),M?e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:Array.from({length:6}).map((_,B)=>e.jsx(R,{children:e.jsx(L,{className:"p-6",children:e.jsxs("div",{className:"animate-pulse",children:[e.jsx("div",{className:"w-16 h-16 bg-gray-200 rounded-full mx-auto mb-4"}),e.jsx("div",{className:"h-4 bg-gray-200 rounded mb-2"}),e.jsx("div",{className:"h-3 bg-gray-200 rounded"})]})})},B))}):S.length>0?e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:S.map(_=>{var B,O;return e.jsx(R,{children:e.jsxs(L,{className:"p-6 text-center",children:[e.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-primary to-secondary rounded-full mx-auto mb-4 flex items-center justify-center",children:e.jsx(Ze,{className:"h-8 w-8 text-white"})}),e.jsx("h3",{className:"font-semibold text-lg mb-2",children:((B=_.user)==null?void 0:B.fullName)||((O=_.user)==null?void 0:O.name)||"Professional"}),_.services&&e.jsx("p",{className:"text-sm text-muted-foreground mb-3",children:Array.isArray(_.services)?_.services.join(", "):typeof _.services=="string"?(()=>{try{return JSON.parse(_.services).join(", ")}catch{return _.services}})():""}),_.basePrice&&e.jsxs("p",{className:"text-lg font-bold mb-3",children:["From $",_.basePrice,"/hr"]}),e.jsx(Lt,{to:`/consultation?professional=${_.userId}`,children:e.jsxs(E,{className:"w-full",children:[e.jsx(dt,{className:"h-4 w-4 mr-2"}),"Book Consultation"]})})]})},_.userId)})}):e.jsxs("div",{className:"text-center py-12",children:[e.jsx(Ze,{className:"h-16 w-16 text-muted-foreground mx-auto mb-4"}),e.jsx("h3",{className:"text-xl font-semibold mb-2",children:"No managed professionals available"}),e.jsx("p",{className:"text-muted-foreground",children:"Check back later for professional services"})]})]}),e.jsxs(ge,{value:"artists",className:"space-y-6",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("h2",{className:"text-2xl font-bold mb-2",children:"Managed Artists"}),e.jsx("p",{className:"text-muted-foreground",children:"Click on any artist to book a consultation session with them directly."})]}),M?e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:Array.from({length:6}).map((_,B)=>e.jsx(R,{children:e.jsx(L,{className:"p-6",children:e.jsxs("div",{className:"animate-pulse",children:[e.jsx("div",{className:"w-16 h-16 bg-gray-200 rounded-full mx-auto mb-4"}),e.jsx("div",{className:"h-4 bg-gray-200 rounded mb-2"}),e.jsx("div",{className:"h-3 bg-gray-200 rounded"})]})})},B))}):k.length>0?e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:k.map(_=>{var B;return e.jsx(R,{children:e.jsxs(L,{className:"p-6 text-center",children:[e.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-purple-500 to-pink-500 rounded-full mx-auto mb-4 flex items-center justify-center",children:e.jsx(Rt,{className:"h-8 w-8 text-white"})}),e.jsx("h3",{className:"font-semibold text-lg mb-2",children:_.stageName||((B=_.user)==null?void 0:B.fullName)}),_.genre&&e.jsx("p",{className:"text-sm text-muted-foreground mb-3",children:Array.isArray(_.genre)?_.genre.join(", "):typeof _.genre=="string"?(()=>{try{return JSON.parse(_.genre).join(", ")}catch{return _.genre}})():_.genre}),_.basePrice&&e.jsxs("p",{className:"text-lg font-bold mb-3",children:["From $",_.basePrice,"/session"]}),e.jsx(Lt,{to:`/consultation?professional=${_.userId}`,children:e.jsxs(E,{className:"w-full",children:[e.jsx(dt,{className:"h-4 w-4 mr-2"}),"Book Consultation"]})})]})},_.userId)})}):e.jsxs("div",{className:"text-center py-12",children:[e.jsx(Rt,{className:"h-16 w-16 text-muted-foreground mx-auto mb-4"}),e.jsx("h3",{className:"text-xl font-semibold mb-2",children:"No managed artists available"}),e.jsx("p",{className:"text-muted-foreground",children:"Check back later for artist consultation services"})]})]}),e.jsxs(ge,{value:"musicians",className:"space-y-6",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("h2",{className:"text-2xl font-bold mb-2",children:"Managed Musicians"}),e.jsx("p",{className:"text-muted-foreground",children:"Click on any musician to book a consultation session with them directly."})]}),M?e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:Array.from({length:6}).map((_,B)=>e.jsx(R,{children:e.jsx(L,{className:"p-6",children:e.jsxs("div",{className:"animate-pulse",children:[e.jsx("div",{className:"w-16 h-16 bg-gray-200 rounded-full mx-auto mb-4"}),e.jsx("div",{className:"h-4 bg-gray-200 rounded mb-2"}),e.jsx("div",{className:"h-3 bg-gray-200 rounded"})]})})},B))}):T.length>0?e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:T.map(_=>{var B,O;return e.jsx(R,{children:e.jsxs(L,{className:"p-6 text-center",children:[e.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-green-500 to-blue-500 rounded-full mx-auto mb-4 flex items-center justify-center",children:e.jsx(Ue,{className:"h-8 w-8 text-white"})}),e.jsx("h3",{className:"font-semibold text-lg mb-2",children:((B=_.user)==null?void 0:B.fullName)||((O=_.user)==null?void 0:O.name)||"Musician"}),_.instruments&&e.jsx("p",{className:"text-sm text-muted-foreground mb-3",children:Array.isArray(_.instruments)?_.instruments.join(", "):typeof _.instruments=="string"?(()=>{try{return JSON.parse(_.instruments).join(", ")}catch{return _.instruments}})():_.instruments}),_.basePrice&&e.jsxs("p",{className:"text-lg font-bold mb-3",children:["From $",_.basePrice,"/session"]}),e.jsx(Lt,{to:`/consultation?professional=${_.userId}`,children:e.jsxs(E,{className:"w-full",children:[e.jsx(dt,{className:"h-4 w-4 mr-2"}),"Book Consultation"]})})]})},_.userId)})}):e.jsxs("div",{className:"text-center py-12",children:[e.jsx(Ue,{className:"h-16 w-16 text-muted-foreground mx-auto mb-4"}),e.jsx("h3",{className:"text-xl font-semibold mb-2",children:"No managed musicians available"}),e.jsx("p",{className:"text-muted-foreground",children:"Check back later for musician consultation bookings"})]})]})]})})]})}const v5={USD:1,EUR:.85,GBP:.73,CAD:1.25,AUD:1.35,JPY:110,CNY:6.45,INR:75,BRL:5.2,MXN:18.5,XCD:2.7},y5={USD:"$",EUR:"",GBP:"",CAD:"C$",AUD:"A$",JPY:"",CNY:"",INR:"",BRL:"R$",MXN:"$",XCD:"EC$"},jZ=(t,s)=>{const n=v5[s]||1;return Math.round(t*n)},Ng=(t,s)=>{const n=jZ(t,s);return`${y5[s]||"$"}${n}`},vZ=pe.object({guestName:pe.string().min(2,"Full name is required"),guestEmail:pe.string().email("Valid email is required"),guestPhone:pe.string().optional(),consultationType:pe.string().min(1,"Please select consultation type"),consultationTopic:pe.string().min(10,"Please provide details about your consultation topic"),specificQuestions:pe.string().optional(),backgroundInfo:pe.string().optional(),preferredCommunicationMethod:pe.string().min(1,"Please select preferred communication method"),paymentMethod:pe.string().optional(),createAccount:pe.boolean().optional(),password:pe.string().optional()});pe.object({consultationType:pe.string().min(1,"Please select consultation type"),consultationTopic:pe.string().min(10,"Please provide details about your consultation topic"),specificQuestions:pe.string().optional(),backgroundInfo:pe.string().optional(),preferredCommunicationMethod:pe.string().min(1,"Please select preferred communication method"),paymentMethod:pe.string().optional()});const S1=[{time:"09:00",available:!0,period:"morning"},{time:"09:30",available:!0,period:"morning"},{time:"10:00",available:!0,period:"morning"},{time:"10:30",available:!1,period:"morning"},{time:"11:00",available:!0,period:"morning"},{time:"11:30",available:!0,period:"morning"},{time:"13:00",available:!0,period:"afternoon"},{time:"13:30",available:!0,period:"afternoon"},{time:"14:00",available:!1,period:"afternoon"},{time:"14:30",available:!0,period:"afternoon"},{time:"15:00",available:!0,period:"afternoon"},{time:"15:30",available:!0,period:"afternoon"},{time:"16:00",available:!0,period:"afternoon"},{time:"16:30",available:!1,period:"afternoon"},{time:"17:00",available:!0,period:"afternoon"},{time:"17:30",available:!0,period:"afternoon"}],io=(t,s)=>{const n=Wr(new Date),a=Wr(t);if(Tm(a,n))return{status:"past",color:"bg-gray-200 text-gray-400",available:!1};if(CT(t))return{status:"weekend",color:"bg-red-100 text-red-600 border-red-200",available:!1};const r=t.getDate();return[6,13,20,27].includes(r)?{status:"premium",color:"bg-purple-100 text-purple-600 border-purple-200 hover:bg-purple-200",available:!0}:{status:"available",color:"bg-green-100 text-green-600 border-green-200 hover:bg-green-200",available:!0}};function yZ(){const[t,s]=N.useState(),[n,a]=N.useState(""),[r,i]=N.useState(null),[l,c]=N.useState(1),[o,d]=N.useState("services"),[h,u]=N.useState("USD"),m=Tt();As();const{data:p,isLoading:g}=ke({queryKey:["/api/managed-users-with-services"]}),{data:x}=ke({queryKey:["/api/services"],queryFn:async()=>(await xe("/api/services")).json()}),{data:v}=ke({queryKey:["/api/user-services"],queryFn:async()=>(await xe("/api/user-services")).json()}),y=(x==null?void 0:x.filter(O=>O.name.toLowerCase().includes("consultation")))||[],f=N.useMemo(()=>{if(!v)return[];let O=v.filter(z=>z.name.toLowerCase().includes("consultation"));return r&&(O=O.filter(z=>z.userId===r.userId)),O},[v,r]),b=[...y,...f];console.log("Consultation filtering debug:",{selectedProfessionalId:r==null?void 0:r.userId,totalUserServices:v==null?void 0:v.length,filteredUserConsultations:f==null?void 0:f.length,totalConsultationTypes:b==null?void 0:b.length}),ke({queryKey:["/api/user-services"],enabled:!!r});const{data:j}=ke({queryKey:["/api/roles"]}),S=N.useMemo(()=>{if(!p)return[];const O=p;return[...(O.professionals||[]).map(z=>({...z,userType:"professional"})),...(O.artists||[]).map(z=>({...z,userType:"artist"})),...(O.musicians||[]).map(z=>({...z,userType:"musician"}))]},[p]),k=Cn({resolver:kn(vZ),defaultValues:{consultationType:"",professionalId:"",sessionDuration:"60",budget:"",description:"",preferredTime:"",contactMethod:"video"}}),T=Xe({mutationFn:async O=>xe("/api/consultations","POST"),onSuccess:()=>{m.invalidateQueries({queryKey:["/api/consultations"]}),c(4)}}),A=O=>{if(!t||!n)return;const z={...O,selectedDate:Mn(t,"yyyy-MM-dd"),selectedTime:n,professionalId:parseInt(O.professionalId)};T.mutate(z)};N.useEffect(()=>{var K;if(!S.length)return;const O=window.location.search,F=new URLSearchParams(O).get("professional");if(F){const D=S.find(G=>G.userId.toString()===F);if(D){i(D),k.setValue("professionalId",D.userId.toString());let G="professionals";const H=D.roleId||((K=D.user)==null?void 0:K.roleId),V=D.userType;V==="artist"?G="artists":V==="musician"?G="musicians":V==="professional"&&(G="professionals"),j&&H&&!V&&([3,4].includes(H)?G="artists":[5,6].includes(H)?G="musicians":[7,8].includes(H)&&(G="professionals")),console.log("Detected original tab for professional:",G,D),d(G);const se=D.services||[];Array.isArray(se)?se.length>1:typeof se=="string"&&se.length>0,c(1)}}},[S.length,j]);const C=S.filter(O=>O.isManaged),w=O=>{var z;if(O===2&&r){c(3);return}if(O===2&&C.length===1){const F=C[0];k.setValue("professionalId",((z=F.userId)==null?void 0:z.toString())||""),i(F),c(2);return}if(O===2&&l===3&&r){c(1);return}if(O===2&&l===3){c(2);return}c(O)},P=b.map(O=>{const z={"General Consultation":Rt,"Marketing Strategy Consultation":Fo,"Music Production Consultation":Ue,"Business Development Consultation":It,"Legal & Business Consultation":Bt,"Performance Coaching Consultation":ns};return{id:O.name.toLowerCase().replace(/\s+/g,"-"),name:O.name,description:O.description,icon:z[O.name]||Rt,duration:`${O.duration} min`,basePrice:O.basePrice||O.price,basePriceUSD:O.basePrice||O.price}}),M=O=>!io(O).available,I=()=>{var O,z,F,K,D;return e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("h3",{className:"text-3xl font-bold bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent mb-4",children:r?`${r.stageName||((O=r.user)==null?void 0:O.fullName)||"Professional"}'s Services`:"Choose a Consultation"}),e.jsx("p",{className:"text-gray-600 text-lg",children:r?`Select from ${r.stageName||((z=r.user)==null?void 0:z.fullName)||"Professional"}'s available consultation services`:"Select the type of professional guidance you need"}),e.jsx("div",{className:"flex items-center justify-center mt-4 mb-2",children:e.jsxs("div",{className:"flex items-center space-x-2 bg-white rounded-lg border border-gray-200 px-4 py-2 shadow-sm",children:[e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Currency:"}),e.jsx("select",{value:h,onChange:G=>u(G.target.value),className:"text-sm font-medium bg-transparent border-none focus:outline-none focus:ring-0 text-blue-600",children:Object.keys(v5).map(G=>e.jsxs("option",{value:G,children:[y5[G]," ",G]},G))})]})}),e.jsxs("p",{className:"text-xs text-gray-500 mb-4",children:["Prices shown in ",h,". All payments processed in USD."]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:P.map(G=>{const H=G.icon,V=Ng(G.basePriceUSD,h);return e.jsx(R,{className:`cursor-pointer transition-all duration-300 hover:shadow-xl hover:scale-105 group ${k.watch("consultationType")===G.id?"ring-4 ring-blue-500/30 border-blue-500 bg-gradient-to-br from-blue-50 to-purple-50":"border-gray-200 hover:border-blue-300 bg-white"}`,onClick:()=>{k.setValue("consultationType",G.id)},children:e.jsx(L,{className:"p-6",children:e.jsxs("div",{className:"flex items-start space-x-4",children:[e.jsx("div",{className:`p-3 rounded-xl transition-colors ${k.watch("consultationType")===G.id?"bg-gradient-to-r from-blue-500 to-purple-500 text-white":"bg-gradient-to-r from-gray-100 to-gray-200 text-gray-600 group-hover:from-blue-100 group-hover:to-purple-100 group-hover:text-blue-600"}`,children:e.jsx(H,{className:"w-7 h-7"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"font-bold text-xl text-gray-800 mb-2",children:G.name}),e.jsx("p",{className:"text-gray-600 text-sm mb-4 leading-relaxed",children:G.description}),G.facilitatedBy&&e.jsx("div",{className:"mb-3 p-2 bg-gradient-to-r from-purple-50 to-blue-50 border border-purple-200 rounded-lg",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Rt,{className:"h-4 w-4 text-purple-600"}),e.jsxs("span",{className:"text-sm font-medium text-purple-800",children:["Facilitated by ",G.facilitatedBy]})]})}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Qt,{className:"w-4 h-4 text-gray-500"}),e.jsx(X,{variant:"outline",className:"font-medium",children:G.duration})]}),e.jsx("span",{className:"font-bold text-xl text-green-600",children:V})]})]})]})})},G.id)})}),r&&e.jsx("div",{className:"mb-6 p-4 bg-blue-50 border border-blue-200 rounded-lg",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsxs(Ln,{className:"w-12 h-12",children:[e.jsx(ga,{src:(F=r.profile)==null?void 0:F.avatarUrl}),e.jsx(Fn,{className:"bg-blue-500 text-white",children:(r.stageName||((K=r.user)==null?void 0:K.fullName)||"P").charAt(0)})]}),e.jsxs("div",{children:[e.jsxs("p",{className:"font-semibold text-blue-800",children:["Professional Pre-selected: ",r.stageName||((D=r.user)==null?void 0:D.fullName)||"Professional"]}),e.jsx("p",{className:"text-sm text-blue-600",children:"Choose your consultation type to continue"})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(E,{variant:"outline",size:"sm",onClick:()=>{i(null),k.setValue("professionalId",""),c(1)},className:"text-gray-600 hover:text-gray-800 border-gray-300",children:"Unselect"}),e.jsx(Lt,{href:`/services?tab=${o}`,children:e.jsx(E,{variant:"outline",size:"sm",className:"text-blue-600 hover:text-blue-800 border-blue-300",children:"Select Other"})})]})]})}),e.jsx("div",{className:"flex justify-end",children:e.jsxs(E,{onClick:()=>w(2),disabled:!k.watch("consultationType"),size:"lg",className:"bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-700 hover:to-purple-700 text-white px-8 py-3 text-lg font-semibold shadow-lg",children:[r?"Next: Schedule Session":"Next: Select Professional",e.jsx(qo,{className:"w-5 h-5 ml-2"})]})})]})},W=()=>e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[e.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("h3",{className:"text-3xl font-bold bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent mb-4",children:"Select Your Professional"}),e.jsx("p",{className:"text-gray-600 text-lg",children:"Choose from our managed experts"})]}),g?e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"Loading professionals..."})]}):e.jsx("div",{className:"space-y-4",children:S.filter(O=>O.isManaged).map(O=>{var z,F,K,D,G;return e.jsx(R,{className:`cursor-pointer transition-all duration-300 hover:shadow-xl hover:scale-102 ${k.watch("professionalId")===((z=O.userId)==null?void 0:z.toString())?"ring-4 ring-blue-500/30 border-blue-500 bg-gradient-to-br from-blue-50 to-purple-50":"border-gray-200 hover:border-blue-300 bg-white"}`,onClick:()=>{var H;k.setValue("professionalId",((H=O.userId)==null?void 0:H.toString())||""),i(O)},children:e.jsx(L,{className:"p-6",children:e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs(Ln,{className:"w-20 h-20 ring-4 ring-white shadow-lg",children:[e.jsx(ga,{src:((F=O.profile)==null?void 0:F.avatarUrl)||O.bookingFormPictureUrl}),e.jsx(Fn,{className:"bg-gradient-to-r from-blue-500 to-purple-500 text-white text-2xl font-bold",children:(O.stageName||((K=O.user)==null?void 0:K.fullName)||"User").charAt(0)})]}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[e.jsx("h4",{className:"font-bold text-xl text-gray-800",children:O.stageName||((D=O.user)==null?void 0:D.fullName)||"Professional"}),e.jsxs(X,{className:"bg-gradient-to-r from-blue-500 to-purple-500 text-white px-3 py-1",children:[e.jsx(ns,{className:"w-4 h-4 mr-1"}),"Managed ",O.userType==="artist"?"Artist":O.userType==="musician"?"Musician":"Professional"]})]}),O.userType==="artist"&&O.genre&&e.jsxs("p",{className:"text-gray-600 mb-2 leading-relaxed",children:[e.jsx("span",{className:"font-medium",children:"Genre:"})," ",Array.isArray(O.genre)?O.genre.join(", "):O.genre]}),O.userType==="musician"&&O.instruments&&e.jsxs("p",{className:"text-gray-600 mb-2 leading-relaxed",children:[e.jsx("span",{className:"font-medium",children:"Instruments:"})," ",Array.isArray(O.instruments)?O.instruments.join(", "):O.instruments]}),e.jsx("p",{className:"text-gray-600 mb-4 leading-relaxed",children:((G=O.profile)==null?void 0:G.bio)||(O.userType==="artist"?"Talented managed artist available for consultation sessions":O.userType==="musician"?"Skilled managed musician offering professional consultation":"Experienced music industry professional with years of expertise")}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-6",children:[e.jsxs("div",{className:"flex items-center text-yellow-500",children:[e.jsx(Rt,{className:"w-5 h-5 mr-1 fill-current"}),e.jsx("span",{className:"font-semibold",children:"4.9"})]}),e.jsxs("div",{className:"flex items-center text-green-600",children:[e.jsx(Qt,{className:"w-5 h-5 mr-1"}),e.jsx("span",{className:"font-medium",children:"Available today"})]})]}),e.jsxs("span",{className:"font-bold text-2xl text-green-600",children:[Ng(parseFloat(O.basePrice.replace("$","")||"125"),h),"/hr"]})]})]})]})})},O.userId)})})]}),r&&e.jsx("div",{className:"lg:col-span-1",children:e.jsxs(R,{className:"bg-gradient-to-br from-blue-50 to-purple-50 border-blue-200 shadow-lg sticky top-4",children:[e.jsx(Y,{children:e.jsxs(Q,{className:"text-xl font-bold text-blue-800 flex items-center",children:[e.jsx(xt,{className:"w-5 h-5 mr-2"}),"Session Details"]})}),e.jsxs(L,{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-semibold text-gray-700 block mb-2",children:"Session Duration"}),e.jsx("select",{className:"w-full p-3 border-2 border-blue-200 rounded-lg bg-white focus:border-blue-500 focus:ring-2 focus:ring-blue-200 transition-colors",value:k.watch("sessionDuration"),onChange:O=>k.setValue("sessionDuration",O.target.value),children:(()=>{const O=(r==null?void 0:r.basePrice)||"$125",z=parseFloat(O.replace("$",""));return[{minutes:30,hours:.5},{minutes:60,hours:1},{minutes:90,hours:1.5},{minutes:120,hours:2}].map(({minutes:K,hours:D})=>{const G=Math.round(z*D),H=Ng(G,h);return e.jsxs("option",{value:K,children:[K," minutes - ",H]},K)})})()})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-semibold text-gray-700 block mb-2",children:"Communication Method"}),e.jsxs("select",{className:"w-full p-3 border-2 border-blue-200 rounded-lg bg-white focus:border-blue-500 focus:ring-2 focus:ring-blue-200 transition-colors",value:k.watch("contactMethod"),onChange:O=>k.setValue("contactMethod",O.target.value),children:[e.jsx("option",{value:"video",children:" Video Call"}),e.jsx("option",{value:"phone",children:" Phone Call"}),e.jsx("option",{value:"in-person",children:" In-Person Meeting"}),e.jsx("option",{value:"chat",children:" Text Chat"})]})]}),e.jsxs("div",{className:"p-4 bg-white rounded-lg border border-blue-200",children:[e.jsx("h5",{className:"font-semibold text-gray-800 mb-2",children:"Professional Terms"}),e.jsxs("ul",{className:"text-sm text-gray-600 space-y-1",children:[e.jsx("li",{children:" 48-hour cancellation policy"}),e.jsx("li",{children:" Session recordings available"}),e.jsx("li",{children:" Follow-up notes included"}),e.jsx("li",{children:" Flexible rescheduling options"})]})]})]})]})})]}),e.jsx("div",{className:"flex justify-start mb-6",children:e.jsxs(E,{variant:"outline",onClick:()=>{l>1&&c(l-1)},size:"lg",className:"px-6 py-3 text-lg",children:[e.jsx(ju,{className:"w-5 h-5 mr-2"}),"Back"]})}),e.jsx("div",{className:"flex justify-end",children:e.jsxs(E,{onClick:()=>w(3),disabled:!k.watch("professionalId"),size:"lg",className:"bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-700 hover:to-purple-700 text-white px-8 py-3 text-lg font-semibold shadow-lg",children:["Next: Schedule Session",e.jsx(qo,{className:"w-5 h-5 ml-2"})]})})]}),_=()=>e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("h3",{className:"text-3xl font-bold bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent mb-4",children:"Schedule Your Session"}),e.jsx("p",{className:"text-gray-600 text-lg",children:"Choose your preferred date and time"})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[e.jsxs(R,{className:"bg-white shadow-xl border-0",children:[e.jsx(Y,{className:"bg-gradient-to-r from-blue-500 to-purple-500 text-white rounded-t-lg",children:e.jsxs(Q,{className:"flex items-center text-xl",children:[e.jsx(dt,{className:"w-6 h-6 mr-3"}),"Select Your Date"]})}),e.jsxs(L,{className:"p-6",children:[e.jsxs("div",{className:"mb-6 p-4 bg-gray-50 rounded-lg",children:[e.jsx("h4",{className:"font-semibold text-gray-800 mb-3",children:"Calendar Legend"}),e.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-4 h-4 bg-green-100 border-2 border-green-200 rounded"}),e.jsx("span",{children:"Available"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-4 h-4 bg-purple-100 border-2 border-purple-200 rounded"}),e.jsx("span",{children:"Premium Rate"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-4 h-4 bg-orange-100 border-2 border-orange-200 rounded"}),e.jsx("span",{children:"Booked"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-4 h-4 bg-red-100 border-2 border-red-200 rounded"}),e.jsx("span",{children:"Unavailable"})]})]})]}),e.jsx(Ql,{mode:"single",selected:t,onSelect:s,disabled:M,modifiers:{available:O=>io(O).status==="available",unavailable:O=>io(O).status==="unavailable",booked:O=>io(O).status==="booked",weekend:O=>io(O).status==="weekend",past:O=>io(O).status==="past",premium:O=>io(O).status==="premium"},modifiersStyles:{available:{backgroundColor:"#dcfce7",color:"#166534",border:"2px solid #bbf7d0",borderRadius:"12px",fontWeight:"600",fontSize:"1.1rem"},unavailable:{backgroundColor:"#fecaca",color:"#dc2626",border:"2px solid #fca5a5",borderRadius:"12px",fontWeight:"600",fontSize:"1.1rem"},booked:{backgroundColor:"#fed7aa",color:"#ea580c",border:"2px solid #fdba74",borderRadius:"12px",fontWeight:"600",fontSize:"1.1rem"},weekend:{backgroundColor:"#fecaca",color:"#dc2626",border:"2px solid #fca5a5",borderRadius:"12px",fontWeight:"600",fontSize:"1.1rem"},past:{backgroundColor:"#e5e7eb",color:"#6b7280",borderRadius:"12px",fontWeight:"500",fontSize:"1.1rem"},premium:{backgroundColor:"#e9d5ff",color:"#7c3aed",border:"2px solid #c4b5fd",borderRadius:"12px",fontWeight:"600",fontSize:"1.1rem"},selected:{backgroundColor:"#3b82f6",color:"white",fontWeight:"bold",border:"2px solid #1d4ed8",borderRadius:"12px",fontSize:"1.2rem",boxShadow:"0 4px 12px rgba(59, 130, 246, 0.4)"}},style:{width:"100%","--rdp-cell-size":"100%","--rdp-accent-color":"#3b82f6"},className:"w-full",classNames:{months:"w-full",month:"w-full space-y-4",caption:"flex justify-center pt-1 relative items-center text-xl font-bold text-gray-800 pb-4",caption_label:"text-2xl font-bold",nav:"space-x-1 flex items-center",nav_button:"inline-flex items-center justify-center rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 border border-input bg-background hover:bg-accent hover:text-accent-foreground h-7 w-7",nav_button_previous:"absolute left-1",nav_button_next:"absolute right-1",table:"w-full border-collapse space-y-1",head_row:"grid grid-cols-7 gap-2 w-full mb-2",head_cell:"text-center font-bold text-gray-700 text-lg py-2 w-full",row:"grid grid-cols-7 gap-2 w-full mt-2",cell:"w-full aspect-square relative p-0 text-center text-sm focus-within:relative focus-within:z-20",day:"w-full h-full min-h-[50px] text-lg font-semibold flex items-center justify-center border border-gray-200 rounded-xl transition-all duration-200 hover:scale-105 hover:shadow-lg cursor-pointer select-none",day_selected:"bg-gradient-to-r from-blue-500 to-purple-500 text-white font-bold border-2 border-blue-700 shadow-lg",day_today:"bg-blue-100 text-blue-800 border-blue-300",day_outside:"text-muted-foreground opacity-50",day_disabled:"text-muted-foreground opacity-50 cursor-not-allowed hover:scale-100 hover:shadow-none"}})]})]}),e.jsxs(R,{className:"bg-white shadow-xl border-0",children:[e.jsx(Y,{className:"bg-gradient-to-r from-purple-500 to-pink-500 text-white rounded-t-lg",children:e.jsxs(Q,{className:"flex items-center text-xl",children:[e.jsx(Qt,{className:"w-6 h-6 mr-3"}),"Available Times",t&&e.jsx("span",{className:"ml-3 text-lg font-normal bg-white/20 px-3 py-1 rounded-full",children:Mn(t,"EEEE, MMMM d")})]})}),e.jsx(L,{className:"p-6",children:t?e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsxs("h4",{className:"font-semibold text-gray-700 mb-3 flex items-center",children:[e.jsx("div",{className:"w-3 h-3 bg-green-400 rounded-full mr-2"}),"Morning Sessions"]}),e.jsx("div",{className:"grid grid-cols-2 gap-3",children:S1.filter(O=>O.period==="morning").map(O=>e.jsx(E,{variant:n===O.time?"default":"outline",className:`h-14 text-lg font-medium transition-all duration-200 ${n===O.time?"bg-gradient-to-r from-blue-500 to-purple-500 text-white shadow-lg scale-105":O.available?"hover:bg-blue-50 hover:border-blue-300 hover:shadow-md":"opacity-50 cursor-not-allowed bg-gray-100"}`,disabled:!O.available,onClick:()=>{a(O.time),k.setValue("preferredTime",O.time)},children:O.time},`morning-${O.time}`))})]}),e.jsxs("div",{children:[e.jsxs("h4",{className:"font-semibold text-gray-700 mb-3 flex items-center",children:[e.jsx("div",{className:"w-3 h-3 bg-orange-400 rounded-full mr-2"}),"Afternoon Sessions"]}),e.jsx("div",{className:"grid grid-cols-2 gap-3",children:S1.filter(O=>O.period==="afternoon").map(O=>e.jsx(E,{variant:n===O.time?"default":"outline",className:`h-14 text-lg font-medium transition-all duration-200 ${n===O.time?"bg-gradient-to-r from-blue-500 to-purple-500 text-white shadow-lg scale-105":O.available?"hover:bg-blue-50 hover:border-blue-300 hover:shadow-md":"opacity-50 cursor-not-allowed bg-gray-100"}`,disabled:!O.available,onClick:()=>{a(O.time),k.setValue("preferredTime",O.time)},children:O.time},`afternoon-${O.time}`))})]})]}):e.jsxs("div",{className:"text-center py-12",children:[e.jsx(dt,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-500 text-lg",children:"Please select a date first"})]})})]})]}),e.jsxs(R,{className:"bg-gradient-to-br from-blue-50 to-purple-50 border-blue-200 shadow-lg",children:[e.jsx(Y,{children:e.jsxs(Q,{className:"text-2xl font-bold text-blue-800 flex items-center",children:[e.jsx(Li,{className:"w-6 h-6 mr-3"}),"Consultation Details"]})}),e.jsxs(L,{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-lg font-semibold text-gray-700 block mb-3",children:"What would you like to discuss?"}),e.jsx(mt,{placeholder:"Please describe your goals, challenges, or specific questions for this consultation session...",value:k.watch("description"),onChange:O=>k.setValue("description",O.target.value),className:"min-h-[120px] text-lg p-4 border-2 border-blue-200 focus:border-blue-500 focus:ring-2 focus:ring-blue-200 rounded-xl",rows:5})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-lg font-semibold text-gray-700 block mb-3",children:"Budget Range (Optional)"}),e.jsx($,{placeholder:"e.g., $100-200 for this consultation",value:k.watch("budget"),onChange:O=>k.setValue("budget",O.target.value),className:"text-lg p-4 border-2 border-blue-200 focus:border-blue-500 focus:ring-2 focus:ring-blue-200 rounded-xl"})]})]})]}),e.jsx("div",{className:"flex justify-start mb-6",children:e.jsxs(E,{variant:"outline",onClick:()=>{l>1&&c(l-1)},size:"lg",className:"px-6 py-3 text-lg",children:[e.jsx(ju,{className:"w-5 h-5 mr-2"}),"Back"]})}),e.jsx("div",{className:"flex justify-end",children:e.jsxs(E,{onClick:()=>k.handleSubmit(A)(),disabled:!t||!n||!k.watch("description"),size:"lg",className:"bg-gradient-to-r from-green-600 to-blue-600 hover:from-green-700 hover:to-blue-700 text-white px-8 py-3 text-lg font-semibold shadow-lg",children:[e.jsx(ct,{className:"w-5 h-5 mr-2"}),"Book Consultation"]})})]}),B=()=>{var O,z;return e.jsxs("div",{className:"text-center space-y-8",children:[e.jsxs("div",{className:"flex flex-col items-center space-y-6",children:[e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"w-24 h-24 bg-gradient-to-r from-green-400 to-emerald-500 rounded-full flex items-center justify-center mx-auto shadow-xl",children:e.jsx(ct,{className:"w-12 h-12 text-white"})}),e.jsx("div",{className:"absolute -top-2 -right-2 w-8 h-8 bg-blue-500 rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-white text-sm font-bold",children:""})})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-4xl font-bold bg-gradient-to-r from-green-600 to-blue-600 bg-clip-text text-transparent mb-4",children:"Consultation Successfully Booked!"}),e.jsx("p",{className:"text-gray-600 text-xl max-w-2xl mx-auto leading-relaxed",children:"Your consultation has been successfully scheduled. You'll receive a confirmation email with all the details and connection information."})]})]}),e.jsxs(R,{className:"max-w-2xl mx-auto bg-gradient-to-br from-blue-50 to-purple-50 border-blue-200 shadow-xl",children:[e.jsx(Y,{className:"bg-gradient-to-r from-blue-500 to-purple-500 text-white rounded-t-lg",children:e.jsxs(Q,{className:"text-2xl font-bold flex items-center justify-center",children:[e.jsx(dt,{className:"w-6 h-6 mr-3"}),"Session Summary"]})}),e.jsxs(L,{className:"p-8",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 bg-white rounded-lg border border-blue-200",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(cn,{className:"w-5 h-5 text-blue-600 mr-3"}),e.jsx("span",{className:"font-semibold text-gray-700",children:"Professional:"})]}),e.jsx("span",{className:"font-bold text-gray-800",children:(r==null?void 0:r.stageName)||((O=r==null?void 0:r.user)==null?void 0:O.fullName)||"Professional"})]}),e.jsxs("div",{className:"flex items-center justify-between p-4 bg-white rounded-lg border border-blue-200",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(dt,{className:"w-5 h-5 text-blue-600 mr-3"}),e.jsx("span",{className:"font-semibold text-gray-700",children:"Date:"})]}),e.jsx("span",{className:"font-bold text-gray-800",children:t&&Mn(t,"EEEE, MMMM d, yyyy")})]}),e.jsxs("div",{className:"flex items-center justify-between p-4 bg-white rounded-lg border border-blue-200",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(Qt,{className:"w-5 h-5 text-blue-600 mr-3"}),e.jsx("span",{className:"font-semibold text-gray-700",children:"Time:"})]}),e.jsx("span",{className:"font-bold text-gray-800",children:n})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 bg-white rounded-lg border border-blue-200",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(xt,{className:"w-5 h-5 text-blue-600 mr-3"}),e.jsx("span",{className:"font-semibold text-gray-700",children:"Duration:"})]}),e.jsxs("span",{className:"font-bold text-gray-800",children:[k.watch("sessionDuration")," minutes"]})]}),e.jsxs("div",{className:"flex items-center justify-between p-4 bg-white rounded-lg border border-blue-200",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(Li,{className:"w-5 h-5 text-blue-600 mr-3"}),e.jsx("span",{className:"font-semibold text-gray-700",children:"Method:"})]}),e.jsx("span",{className:"font-bold text-gray-800 capitalize",children:k.watch("contactMethod")})]}),e.jsxs("div",{className:"flex items-center justify-between p-4 bg-white rounded-lg border border-blue-200",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(ns,{className:"w-5 h-5 text-blue-600 mr-3"}),e.jsx("span",{className:"font-semibold text-gray-700",children:"Service:"})]}),e.jsx("span",{className:"font-bold text-gray-800",children:(z=b.find(F=>F.id===k.watch("consultationType")))==null?void 0:z.name})]})]})]}),e.jsx("div",{className:"mt-6 p-4 bg-gradient-to-r from-green-100 to-blue-100 rounded-lg border border-green-200",children:e.jsxs("div",{className:"flex items-center justify-center",children:[e.jsx(ct,{className:"w-5 h-5 text-green-600 mr-2"}),e.jsx("span",{className:"font-semibold text-green-800",children:"Confirmation email sent to your registered email address"})]})})]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:[e.jsx(E,{onClick:()=>{c(1),k.reset(),s(void 0),a(""),i(null)},size:"lg",className:"bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-700 hover:to-purple-700 text-white px-8 py-3 text-lg font-semibold shadow-lg",children:"Book Another Consultation"}),e.jsx(E,{variant:"outline",onClick:()=>window.history.back(),size:"lg",className:"px-8 py-3 text-lg border-2 border-blue-300 hover:bg-blue-50",children:"Return to Home"})]})]})};return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-purple-50 to-pink-50 mobile-safe",children:e.jsxs("div",{className:"container mx-auto mobile-container py-4 sm:py-6 max-w-6xl",children:[e.jsxs("div",{className:"mb-8 flex items-center gap-4",children:[e.jsxs(E,{variant:"outline",size:"sm",onClick:()=>window.history.back(),className:"flex items-center gap-2",children:[e.jsx(ju,{className:"w-4 h-4"}),"Back"]}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-4xl font-bold bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent mb-2",children:"Professional Consultation"}),e.jsx("p",{className:"text-gray-600 text-lg",children:"Get expert advice from industry professionals to advance your music career"})]})]}),e.jsx("div",{className:"mb-6 sm:mb-12 px-2",children:e.jsxs("div",{className:"flex items-center justify-between relative overflow-x-auto",children:[e.jsx("div",{className:"absolute top-4 left-0 right-0 h-0.5 bg-gray-200"}),[{step:1,title:"Choose Consultation",icon:xt},{step:2,title:"Professional",icon:cn},{step:3,title:"Schedule",icon:dt},{step:4,title:"Confirmation",icon:ct}].map((O,z)=>e.jsxs("div",{className:"flex flex-col items-center relative z-10",children:[e.jsx("div",{className:`w-12 h-12 rounded-full flex items-center justify-center text-sm font-medium transition-all duration-300 shadow-lg ${l>=O.step?"bg-gradient-to-r from-blue-500 to-purple-500 text-white transform scale-110":"bg-white text-gray-600 border-2 border-gray-200"}`,children:l>O.step?e.jsx(ct,{className:"w-6 h-6"}):e.jsx(O.icon,{className:"w-6 h-6"})}),e.jsx("span",{className:`mt-2 text-sm font-medium ${l>=O.step?"text-blue-600":"text-gray-500"}`,children:O.title}),z<3&&e.jsx("div",{className:`absolute top-6 left-12 w-24 h-0.5 ${l>O.step?"bg-gradient-to-r from-blue-500 to-purple-500":"bg-gray-300"}`})]},O.step))]})}),e.jsx(R,{className:"bg-white/70 backdrop-blur-sm border-0 shadow-xl",children:e.jsxs(L,{className:"p-8",children:[l===1&&I(),l===2&&W(),l===3&&e.jsx(e.Fragment,{children:_()}),l===4&&B()]})})]})})}function NZ(){const[t,s]=N.useState(null),[n,a]=N.useState(""),[r,i]=N.useState(""),[l,c]=N.useState(""),[o,d]=N.useState("project"),[h,u]=N.useState(!1),[m,p]=N.useState(!1),g=N.useRef(null),x=Tt(),{data:v=[]}=ke({queryKey:["/api/collaboration/rooms"],refetchInterval:5e3}),{data:y=[]}=ke({queryKey:["/api/collaboration/messages",t==null?void 0:t.id],enabled:!!t,refetchInterval:2e3}),{data:f=[]}=ke({queryKey:["/api/collaboration/projects",t==null?void 0:t.id],enabled:!!t}),b=Xe({mutationFn:async P=>xe("/api/collaboration/rooms","POST"),onSuccess:()=>{x.invalidateQueries({queryKey:["/api/collaboration/rooms"]}),u(!1),i(""),c("")}}),j=Xe({mutationFn:async P=>xe("/api/collaboration/messages","POST"),onSuccess:()=>{x.invalidateQueries({queryKey:["/api/collaboration/messages",t==null?void 0:t.id]}),a("")}});Xe({mutationFn:async P=>xe("/api/collaboration/projects","POST"),onSuccess:()=>{x.invalidateQueries({queryKey:["/api/collaboration/projects",t==null?void 0:t.id]})}}),N.useEffect(()=>{var P;(P=g.current)==null||P.scrollIntoView({behavior:"smooth"})},[y]);const S=()=>{!t||!n.trim()||j.mutate({roomId:t.id,message:n.trim(),messageType:"text"})},k=()=>{r.trim()&&b.mutate({name:r.trim(),description:l.trim(),roomType:o})},T=P=>{P.key==="Enter"&&!P.shiftKey&&(P.preventDefault(),S())},A=P=>new Date(P).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}),C=P=>{switch(P){case"completed":return"bg-green-100 text-green-800";case"in-progress":return"bg-blue-100 text-blue-800";case"review":return"bg-yellow-100 text-yellow-800";case"high":return"bg-red-100 text-red-800";case"urgent":return"bg-red-200 text-red-900";default:return"bg-gray-100 text-gray-800"}},w=P=>{switch(P){case"high":return e.jsx(ys,{className:"w-4 h-4 text-red-500"});case"urgent":return e.jsx(ys,{className:"w-4 h-4 text-red-600"});default:return e.jsx(a4,{className:"w-4 h-4 text-gray-400"})}};return e.jsxs("div",{className:"container mx-auto p-6",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold mb-2",children:"Real-Time Collaboration"}),e.jsx("p",{className:"text-gray-600",children:"Collaborate with artists, musicians, and professionals in real-time"})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6 h-[800px]",children:[e.jsxs("div",{className:"lg:col-span-1 space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h2",{className:"text-xl font-semibold",children:"Rooms"}),e.jsxs(kt,{open:h,onOpenChange:u,children:[e.jsx(ma,{asChild:!0,children:e.jsxs(E,{size:"sm",children:[e.jsx(st,{className:"w-4 h-4 mr-2"}),"New Room"]})}),e.jsxs(wt,{children:[e.jsx(St,{children:e.jsx(Ct,{children:"Create Collaboration Room"})}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium",children:"Room Name"}),e.jsx($,{value:r,onChange:P=>i(P.target.value),placeholder:"Enter room name"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium",children:"Description"}),e.jsx(mt,{value:l,onChange:P=>c(P.target.value),placeholder:"Describe the purpose of this room"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium",children:"Room Type"}),e.jsxs("select",{value:o,onChange:P=>d(P.target.value),className:"w-full p-2 border rounded-md",children:[e.jsx("option",{value:"project",children:"Project"}),e.jsx("option",{value:"session",children:"Recording Session"}),e.jsx("option",{value:"song",children:"Song Collaboration"})]})]}),e.jsx(E,{onClick:k,disabled:b.isPending,className:"w-full",children:b.isPending?"Creating...":"Create Room"})]})]})]})]}),e.jsx("div",{className:"space-y-2 max-h-[700px] overflow-y-auto",children:v.map(P=>{var M;return e.jsx(R,{className:`cursor-pointer transition-colors ${(t==null?void 0:t.id)===P.id?"bg-blue-50 border-blue-200":"hover:bg-gray-50"}`,onClick:()=>s(P),children:e.jsxs(L,{className:"p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("h3",{className:"font-medium text-sm",children:P.name}),e.jsx(X,{variant:"outline",className:"text-xs",children:P.roomType})]}),e.jsx("p",{className:"text-xs text-gray-600 mb-2",children:P.description}),e.jsxs("div",{className:"flex items-center justify-between text-xs text-gray-500",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(Ze,{className:"w-3 h-3 mr-1"}),((M=P.participants)==null?void 0:M.length)||0]}),P.lastMessage&&e.jsx("span",{children:A(P.lastMessage.createdAt)})]})]})},P.id)})})]}),e.jsx("div",{className:"lg:col-span-3",children:t?e.jsxs(Ut,{defaultValue:"chat",className:"h-full",children:[e.jsxs(jt,{className:"grid w-full grid-cols-4",children:[e.jsxs(Ne,{value:"chat",children:[e.jsx(Li,{className:"w-4 h-4 mr-2"}),"Chat"]}),e.jsxs(Ne,{value:"projects",children:[e.jsx(N6,{className:"w-4 h-4 mr-2"}),"Projects"]}),e.jsxs(Ne,{value:"files",children:[e.jsx(_h,{className:"w-4 h-4 mr-2"}),"Files"]}),e.jsxs(Ne,{value:"voice",children:[e.jsx(ca,{className:"w-4 h-4 mr-2"}),"Voice & Video"]})]}),e.jsx(ge,{value:"chat",className:"h-[720px] flex flex-col",children:e.jsxs(R,{className:"flex-1 flex flex-col",children:[e.jsx(Y,{className:"pb-3",children:e.jsxs(Q,{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{children:t.name}),e.jsx(X,{variant:"outline",className:"ml-2",children:t.roomType})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs(E,{size:"sm",variant:"outline",children:[e.jsx(hr,{className:"w-4 h-4 mr-2"}),"Invite"]}),e.jsx(E,{size:"sm",variant:"outline",children:e.jsx(Gt,{className:"w-4 h-4"})})]})]})}),e.jsxs(L,{className:"flex-1 flex flex-col p-4",children:[e.jsxs("div",{className:"flex-1 overflow-y-auto space-y-3 mb-4",children:[y.map(P=>e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx(Ln,{className:"w-8 h-8",children:e.jsx(Fn,{children:P.user.fullName.charAt(0)})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:"font-medium text-sm",children:P.user.fullName}),e.jsx("span",{className:"text-xs text-gray-500",children:A(P.createdAt)})]}),e.jsx("p",{className:"text-sm text-gray-700 mt-1",children:P.message}),P.messageType==="file"&&P.metadata&&e.jsxs("div",{className:"mt-2 p-2 bg-gray-100 rounded-md flex items-center space-x-2",children:[e.jsx(_h,{className:"w-4 h-4"}),e.jsx("span",{className:"text-sm",children:P.metadata.fileName}),e.jsx(E,{size:"sm",variant:"ghost",children:e.jsx(Cs,{className:"w-4 h-4"})})]})]})]},P.id)),e.jsx("div",{ref:g})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(E,{size:"sm",variant:"outline",onClick:()=>p(!m),className:m?"bg-red-100 text-red-600":"",children:m?e.jsx(Ry,{className:"w-4 h-4"}):e.jsx(yn,{className:"w-4 h-4"})}),e.jsx(E,{size:"sm",variant:"outline",children:e.jsx(Xs,{className:"w-4 h-4"})}),e.jsx($,{value:n,onChange:P=>a(P.target.value),onKeyPress:T,placeholder:"Type your message...",className:"flex-1"}),e.jsx(E,{onClick:S,disabled:j.isPending||!n.trim(),children:e.jsx(gr,{className:"w-4 h-4"})})]})]})]})}),e.jsx(ge,{value:"projects",className:"h-[720px]",children:e.jsxs(R,{className:"h-full",children:[e.jsx(Y,{children:e.jsxs(Q,{className:"flex items-center justify-between",children:[e.jsx("span",{children:"Projects"}),e.jsxs(E,{size:"sm",children:[e.jsx(st,{className:"w-4 h-4 mr-2"}),"New Project"]})]})}),e.jsx(L,{className:"overflow-y-auto",children:e.jsx("div",{className:"space-y-4",children:f.map(P=>{var M,I,W;return e.jsx(R,{children:e.jsxs(L,{className:"p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("h3",{className:"font-medium",children:P.projectName}),e.jsx(X,{className:C(P.status),children:P.status})]}),e.jsx("p",{className:"text-sm text-gray-600 mb-3",children:P.description}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-sm mb-2",children:"Tasks"}),e.jsxs("div",{className:"space-y-2",children:[(M=P.tasks)==null?void 0:M.slice(0,3).map(_=>e.jsxs("div",{className:"flex items-center space-x-2 text-sm",children:[w(_.priority),e.jsx("span",{className:"flex-1",children:_.title}),e.jsx(X,{variant:"outline",className:"text-xs",children:_.status})]},_.id)),((I=P.tasks)==null?void 0:I.length)>3&&e.jsxs("p",{className:"text-xs text-gray-500",children:["+",P.tasks.length-3," more tasks"]})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-sm mb-2",children:"Recent Files"}),e.jsx("div",{className:"space-y-2",children:(W=P.files)==null?void 0:W.slice(0,3).map(_=>e.jsxs("div",{className:"flex items-center space-x-2 text-sm",children:[_.fileType==="audio"?e.jsx(Ue,{className:"w-4 h-4 text-blue-500"}):e.jsx(_h,{className:"w-4 h-4 text-gray-500"}),e.jsx("span",{className:"flex-1 truncate",children:_.fileName}),e.jsx(E,{size:"sm",variant:"ghost",children:e.jsx(Ns,{className:"w-3 h-3"})})]},_.id))})]})]})]})},P.id)})})})]})}),e.jsx(ge,{value:"files",className:"h-[720px]",children:e.jsxs(R,{className:"h-full",children:[e.jsx(Y,{children:e.jsxs(Q,{className:"flex items-center justify-between",children:[e.jsx("span",{children:"Shared Files"}),e.jsxs(E,{size:"sm",children:[e.jsx(Xs,{className:"w-4 h-4 mr-2"}),"Upload File"]})]})}),e.jsx(L,{className:"overflow-y-auto",children:e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:e.jsx(R,{className:"border-dashed border-2 border-gray-300 hover:border-gray-400 cursor-pointer",children:e.jsxs(L,{className:"p-6 text-center",children:[e.jsx(Xs,{className:"w-8 h-8 mx-auto text-gray-400 mb-2"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Upload new files"})]})})})})]})}),e.jsx(ge,{value:"voice",className:"h-[720px]",children:e.jsxs(R,{className:"h-full",children:[e.jsx(Y,{children:e.jsx(Q,{children:"Voice & Video Session"})}),e.jsx(L,{className:"flex items-center justify-center h-full",children:e.jsxs("div",{className:"text-center space-y-4",children:[e.jsx("div",{className:"w-24 h-24 bg-gray-100 rounded-full flex items-center justify-center mx-auto",children:e.jsx(ca,{className:"w-12 h-12 text-gray-400"})}),e.jsx("h3",{className:"text-lg font-medium",children:"Start Voice Session"}),e.jsx("p",{className:"text-gray-600",children:"Connect with your collaborators via voice and video"}),e.jsxs("div",{className:"flex space-x-2 justify-center",children:[e.jsxs(E,{children:[e.jsx(yn,{className:"w-4 h-4 mr-2"}),"Voice Only"]}),e.jsxs(E,{variant:"outline",children:[e.jsx(ca,{className:"w-4 h-4 mr-2"}),"Video Call"]})]})]})})]})})]}):e.jsx(R,{className:"h-full",children:e.jsx(L,{className:"flex items-center justify-center h-full",children:e.jsxs("div",{className:"text-center space-y-4",children:[e.jsx("div",{className:"w-24 h-24 bg-gray-100 rounded-full flex items-center justify-center mx-auto",children:e.jsx(Li,{className:"w-12 h-12 text-gray-400"})}),e.jsx("h3",{className:"text-lg font-medium",children:"Select a collaboration room"}),e.jsx("p",{className:"text-gray-600",children:"Choose a room from the sidebar to start collaborating"})]})})})})]})]})}function bZ(){const t=[{number:"API-Driven",label:"Artists Supported",icon:Ze},{number:"Real Data",label:"Tracks Released",icon:Ue},{number:"Authentic",label:"Platform Metrics",icon:la},{number:"Live Stats",label:"Global Reach",icon:is}],s=[{name:"Lianne Letang",role:"Featured Artist & Platform Ambassador",bio:"Caribbean Neo Soul Queen from Dominica, known professionally as L-L Octave. Leading voice in authentic music representation.",image:"/images/team/lili-octave-professional.jpg"},{name:"Karlvin Deravariere",role:"Afrobeats & Hip-Hop Specialist",bio:"Professional recording artist known as JCro. Specializes in cross-cultural musical collaborations and artist development.",image:"/images/team/jcro-professional.jpg"},{name:"Platform Administration",role:"Technical Operations Team",bio:"Comprehensive technical team managing booking workflows, contract generation, and platform infrastructure.",image:"/images/team/admin-team.jpg"}],n=[{title:"Artist-First",description:"Every decision we make prioritizes the success and creative freedom of our artists."},{title:"Transparency",description:"Clear communication, fair contracts, and 100% base price payouts to artists."},{title:"Innovation",description:"Leveraging cutting-edge technology to create new opportunities in the music industry."},{title:"Community",description:"Building meaningful connections between artists, professionals, and fans worldwide."}];return e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-purple-900 to-blue-900 relative overflow-hidden",children:[e.jsxs("div",{className:"absolute inset-0 opacity-10",children:[e.jsx("div",{className:"absolute top-20 left-10 animate-bounce delay-1000",children:e.jsx(Ue,{className:"h-8 w-8 text-white"})}),e.jsx("div",{className:"absolute top-40 right-20 animate-pulse delay-2000",children:e.jsx(Ue,{className:"h-6 w-6 text-white"})}),e.jsx("div",{className:"absolute bottom-32 left-1/4 animate-bounce delay-500",children:e.jsx(Ue,{className:"h-10 w-10 text-white"})}),e.jsx("div",{className:"absolute bottom-20 right-1/3 animate-pulse delay-1500",children:e.jsx(Ue,{className:"h-7 w-7 text-white"})})]}),e.jsx("section",{className:"py-24 px-4 relative",children:e.jsxs("div",{className:"max-w-6xl mx-auto text-center",children:[e.jsxs(X,{variant:"outline",className:"mb-6 px-6 py-3 bg-white/10 backdrop-blur-sm border-white/20 text-white text-lg font-medium",children:[e.jsx(Ue,{className:"w-4 h-4 mr-2"}),"Our Story"]}),e.jsxs("h1",{className:"text-6xl md:text-7xl font-bold text-white mb-8 tracking-tight",children:["Empowering the"," ",e.jsx("span",{className:"bg-gradient-to-r from-yellow-400 via-pink-500 to-purple-500 bg-clip-text text-transparent",children:"Future of Music"})]}),e.jsxs("p",{className:"text-xl md:text-2xl text-white/80 mb-12 max-w-4xl mx-auto leading-relaxed",children:["Wai'tuMusic was born from a simple belief: every artist deserves the tools, support, and opportunities to share their music with the world. We're building the platform that puts",e.jsx("span",{className:"text-yellow-400 font-semibold",children:" artists first, always"}),"."]}),e.jsxs("div",{className:"grid md:grid-cols-3 gap-6 mt-16",children:[e.jsxs("div",{className:"bg-white/10 backdrop-blur-md rounded-2xl p-6 border border-white/20 hover:bg-white/20 transition-all duration-300",children:[e.jsx(Ze,{className:"h-12 w-12 text-yellow-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-white font-bold text-lg mb-2",children:"Artist-Centric"}),e.jsx("p",{className:"text-white/70 text-sm",children:"Every decision prioritizes artist success"})]}),e.jsxs("div",{className:"bg-white/10 backdrop-blur-md rounded-2xl p-6 border border-white/20 hover:bg-white/20 transition-all duration-300",children:[e.jsx(is,{className:"h-12 w-12 text-pink-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-white font-bold text-lg mb-2",children:"Global Reach"}),e.jsx("p",{className:"text-white/70 text-sm",children:"Connect with audiences worldwide"})]}),e.jsxs("div",{className:"bg-white/10 backdrop-blur-md rounded-2xl p-6 border border-white/20 hover:bg-white/20 transition-all duration-300",children:[e.jsx(la,{className:"h-12 w-12 text-purple-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-white font-bold text-lg mb-2",children:"Award-Winning"}),e.jsx("p",{className:"text-white/70 text-sm",children:"Recognized industry excellence"})]})]})]})}),e.jsx("section",{className:"py-20 px-4 bg-white relative",children:e.jsxs("div",{className:"max-w-6xl mx-auto",children:[e.jsxs("div",{className:"text-center mb-16",children:[e.jsx("h2",{className:"text-4xl font-bold text-gray-900 mb-4",children:"Making Waves in Music"}),e.jsx("p",{className:"text-gray-600 text-lg",children:"Our impact speaks louder than words"})]}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-8",children:t.map((a,r)=>{const i=a.icon,l=["from-yellow-400 to-orange-500","from-pink-400 to-red-500","from-purple-400 to-indigo-500","from-blue-400 to-cyan-500"];return e.jsxs("div",{className:"text-center group hover:scale-105 transition-transform duration-300",children:[e.jsx("div",{className:`w-20 h-20 bg-gradient-to-br ${l[r]} rounded-full flex items-center justify-center mx-auto mb-6 shadow-lg group-hover:shadow-xl transition-shadow duration-300`,children:e.jsx(i,{className:"h-10 w-10 text-white"})}),e.jsx("div",{className:"text-4xl font-bold text-gray-900 mb-3 group-hover:text-purple-600 transition-colors duration-300",children:a.number}),e.jsx("div",{className:"text-gray-600 font-medium",children:a.label})]},r)})})]})}),e.jsx("section",{className:"py-20 px-4 bg-gradient-to-br from-gray-50 to-white relative",children:e.jsxs("div",{className:"max-w-6xl mx-auto",children:[e.jsxs("div",{className:"text-center mb-16",children:[e.jsx(X,{className:"mb-6 px-6 py-3 bg-gradient-to-r from-purple-100 to-blue-100 text-purple-800 border-purple-200",children:"Our Mission & Vision"}),e.jsxs("h2",{className:"text-4xl md:text-5xl font-bold text-gray-900 mb-8 leading-tight",children:["Democratizing the"," ",e.jsx("span",{className:"bg-gradient-to-r from-purple-600 to-blue-600 bg-clip-text text-transparent",children:"Music Industry"})]}),e.jsxs("p",{className:"text-xl md:text-2xl text-gray-600 mb-12 max-w-4xl mx-auto leading-relaxed",children:["We provide independent artists with the same tools, resources, and opportunities that were once exclusive to major labels.",e.jsx("span",{className:"text-purple-600 font-semibold",children:" Talent, not connections, should determine success."})]})]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-12",children:[e.jsx(R,{className:"p-8 border-0 shadow-xl bg-gradient-to-br from-purple-50 to-blue-50 hover:shadow-2xl transition-all duration-300",children:e.jsxs(L,{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[e.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-purple-500 to-blue-500 rounded-xl flex items-center justify-center",children:e.jsx(Ue,{className:"h-6 w-6 text-white"})}),e.jsx("h3",{className:"text-2xl font-bold text-gray-900",children:"What We Do"})]}),e.jsxs("ul",{className:"space-y-4",children:[e.jsxs("li",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"w-2 h-2 bg-purple-500 rounded-full mt-2 flex-shrink-0"}),e.jsx("span",{className:"text-gray-700 font-medium",children:"Professional music distribution and promotion"})]}),e.jsxs("li",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full mt-2 flex-shrink-0"}),e.jsx("span",{className:"text-gray-700 font-medium",children:"Artist development and career guidance"})]}),e.jsxs("li",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"w-2 h-2 bg-purple-500 rounded-full mt-2 flex-shrink-0"}),e.jsx("span",{className:"text-gray-700 font-medium",children:"Booking and event management services"})]}),e.jsxs("li",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full mt-2 flex-shrink-0"}),e.jsx("span",{className:"text-gray-700 font-medium",children:"Collaborative platform for musicians and professionals"})]})]})]})}),e.jsx(R,{className:"p-8 border-0 shadow-xl bg-gradient-to-br from-yellow-50 to-orange-50 hover:shadow-2xl transition-all duration-300",children:e.jsxs(L,{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[e.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-yellow-500 to-orange-500 rounded-xl flex items-center justify-center",children:e.jsx(la,{className:"h-6 w-6 text-white"})}),e.jsx("h3",{className:"text-2xl font-bold text-gray-900",children:"Why We're Different"})]}),e.jsxs("ul",{className:"space-y-4",children:[e.jsxs("li",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"w-2 h-2 bg-yellow-500 rounded-full mt-2 flex-shrink-0"}),e.jsx("span",{className:"text-gray-700 font-medium",children:"100% transparent revenue sharing"})]}),e.jsxs("li",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"w-2 h-2 bg-orange-500 rounded-full mt-2 flex-shrink-0"}),e.jsx("span",{className:"text-gray-700 font-medium",children:"Two-tier management system for all experience levels"})]}),e.jsxs("li",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"w-2 h-2 bg-yellow-500 rounded-full mt-2 flex-shrink-0"}),e.jsx("span",{className:"text-gray-700 font-medium",children:"Integrated e-commerce and booking platform"})]}),e.jsxs("li",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"w-2 h-2 bg-orange-500 rounded-full mt-2 flex-shrink-0"}),e.jsx("span",{className:"text-gray-700 font-medium",children:"Community-driven artist support network"})]})]})]})})]})]})}),e.jsx("section",{className:"py-20 px-4 bg-gray-900 relative",children:e.jsxs("div",{className:"max-w-6xl mx-auto",children:[e.jsxs("div",{className:"text-center mb-16",children:[e.jsx(X,{className:"mb-6 px-6 py-3 bg-white/10 backdrop-blur-sm border-white/20 text-white",children:"Core Values"}),e.jsxs("h2",{className:"text-4xl md:text-5xl font-bold text-white mb-6",children:["What Drives"," ",e.jsx("span",{className:"bg-gradient-to-r from-yellow-400 to-pink-500 bg-clip-text text-transparent",children:"Everything We Do"})]}),e.jsx("p",{className:"text-xl text-white/70 max-w-3xl mx-auto",children:"These core principles guide everything we do and every decision we make."})]}),e.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-4 gap-8",children:n.map((a,r)=>{const i=["from-yellow-400 to-orange-500","from-pink-400 to-red-500","from-purple-400 to-indigo-500","from-blue-400 to-cyan-500"],c=[Ze,la,is,Ue][r];return e.jsx(R,{className:"text-center p-8 bg-white/5 backdrop-blur-sm border-white/10 hover:bg-white/10 transition-all duration-300 group",children:e.jsxs(L,{className:"space-y-6",children:[e.jsx("div",{className:`w-16 h-16 bg-gradient-to-br ${i[r]} rounded-2xl flex items-center justify-center mx-auto group-hover:scale-110 transition-transform duration-300`,children:e.jsx(c,{className:"h-8 w-8 text-white"})}),e.jsx("h3",{className:"text-xl font-bold text-white group-hover:text-yellow-400 transition-colors duration-300",children:a.title}),e.jsx("p",{className:"text-white/70 leading-relaxed",children:a.description})]})},r)})})]})}),e.jsx("section",{className:"py-20 px-4 bg-white relative",children:e.jsxs("div",{className:"max-w-6xl mx-auto",children:[e.jsxs("div",{className:"text-center mb-16",children:[e.jsx(X,{className:"mb-6 px-6 py-3 bg-gradient-to-r from-purple-100 to-blue-100 text-purple-800 border-purple-200",children:"Leadership Team"}),e.jsxs("h2",{className:"text-4xl md:text-5xl font-bold text-gray-900 mb-6",children:["Meet the"," ",e.jsx("span",{className:"bg-gradient-to-r from-purple-600 to-blue-600 bg-clip-text text-transparent",children:"Visionaries"})]}),e.jsx("p",{className:"text-xl text-gray-600 max-w-3xl mx-auto",children:"Industry veterans and passionate advocates for independent artists who believe in the power of music to change the world."})]}),e.jsx("div",{className:"grid md:grid-cols-3 gap-10",children:s.map((a,r)=>{const i=["from-purple-500 to-indigo-600","from-pink-500 to-red-600","from-blue-500 to-cyan-600"];return e.jsx(R,{className:"text-center overflow-hidden border-0 shadow-xl hover:shadow-2xl transition-all duration-300 group",children:e.jsxs(L,{className:"p-0",children:[e.jsxs("div",{className:`h-80 bg-gradient-to-br ${i[r]} flex items-center justify-center relative overflow-hidden`,children:[e.jsx("div",{className:"absolute inset-0 bg-black/20"}),e.jsx(Ze,{className:"h-24 w-24 text-white/80 relative z-10"}),e.jsxs("div",{className:"absolute bottom-4 left-4 right-4 text-left z-10",children:[e.jsx("h3",{className:"text-2xl font-bold text-white mb-1",children:a.name}),e.jsx("p",{className:"text-yellow-300 font-semibold",children:a.role})]})]}),e.jsxs("div",{className:"p-8",children:[e.jsx("p",{className:"text-gray-600 leading-relaxed text-left",children:a.bio}),e.jsxs("div",{className:"flex justify-center gap-4 mt-6",children:[e.jsx("div",{className:"w-8 h-8 bg-gray-100 rounded-full flex items-center justify-center hover:bg-purple-100 transition-colors cursor-pointer",children:e.jsx(Ze,{className:"w-4 h-4 text-gray-600"})}),e.jsx("div",{className:"w-8 h-8 bg-gray-100 rounded-full flex items-center justify-center hover:bg-purple-100 transition-colors cursor-pointer",children:e.jsx(Ue,{className:"w-4 h-4 text-gray-600"})})]})]})]})},r)})})]})}),e.jsxs("section",{className:"py-24 px-4 bg-gradient-to-r from-purple-900 via-blue-900 to-indigo-900 relative overflow-hidden",children:[e.jsx("div",{className:"absolute inset-0 opacity-20",children:e.jsx("div",{className:"absolute top-0 left-0 w-full h-full",style:{backgroundImage:`url("data:image/svg+xml,%3Csvg width='60' height='60' viewBox='0 0 60 60' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='none' fill-rule='evenodd'%3E%3Cg fill='%23ffffff' fill-opacity='0.1'%3E%3Ccircle cx='7' cy='7' r='7'/%3E%3C/g%3E%3C/g%3E%3C/svg%3E")`}})}),e.jsxs("div",{className:"max-w-5xl mx-auto text-center relative",children:[e.jsxs(X,{className:"mb-8 px-8 py-4 bg-gradient-to-r from-yellow-400 to-pink-500 text-gray-900 font-bold text-lg border-0",children:[e.jsx(Ue,{className:"w-5 h-5 mr-2"}),"Start Your Musical Journey"]}),e.jsxs("h2",{className:"text-5xl md:text-6xl font-bold mb-8 text-white leading-tight",children:["Ready to Join Our"," ",e.jsx("span",{className:"bg-gradient-to-r from-yellow-400 via-pink-500 to-purple-400 bg-clip-text text-transparent",children:"Community"}),"?"]}),e.jsxs("p",{className:"text-xl md:text-2xl mb-12 text-white/80 max-w-3xl mx-auto leading-relaxed",children:["Whether you're an artist, musician, or industry professional, there's a place for you at"," ",e.jsx("span",{className:"text-yellow-400 font-semibold",children:"Wai'tuMusic"}),"."]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-6 justify-center",children:[e.jsx(Lt,{href:"/register?role=artist",children:e.jsxs(E,{size:"lg",className:"bg-gradient-to-r from-yellow-400 to-orange-500 hover:from-yellow-500 hover:to-orange-600 text-gray-900 font-bold text-lg px-10 py-4 rounded-full shadow-2xl hover:shadow-yellow-500/25 transition-all duration-300 transform hover:scale-105 border-0",children:[e.jsx(Ue,{className:"w-5 h-5 mr-2"}),"Join as Artist"]})}),e.jsx(Lt,{href:"/register?role=professional",children:e.jsxs(E,{size:"lg",className:"bg-white/10 backdrop-blur-md border-2 border-white/30 text-white hover:bg-white hover:text-gray-900 font-bold text-lg px-10 py-4 rounded-full shadow-2xl hover:shadow-white/25 transition-all duration-300 transform hover:scale-105",children:[e.jsx(Ze,{className:"w-5 h-5 mr-2"}),"Become a Professional"]})})]}),e.jsxs("div",{className:"mt-16 grid grid-cols-1 md:grid-cols-3 gap-8 text-white/60",children:[e.jsxs("div",{className:"flex items-center justify-center gap-3",children:[e.jsx(la,{className:"w-6 h-6 text-yellow-400"}),e.jsx("span",{className:"font-medium",children:"Industry Recognized"})]}),e.jsxs("div",{className:"flex items-center justify-center gap-3",children:[e.jsx(Ze,{className:"w-6 h-6 text-pink-400"}),e.jsx("span",{className:"font-medium",children:"500+ Artists Trust Us"})]}),e.jsxs("div",{className:"flex items-center justify-center gap-3",children:[e.jsx(is,{className:"w-6 h-6 text-purple-400"}),e.jsx("span",{className:"font-medium",children:"Global Distribution"})]})]})]})]})]})}function wZ(t){const s=SZ(t),n=N.forwardRef((a,r)=>{const{children:i,...l}=a,c=N.Children.toArray(i),o=c.find(kZ);if(o){const d=o.props.children,h=c.map(u=>u===o?N.Children.count(d)>1?N.Children.only(null):N.isValidElement(d)?d.props.children:null:u);return e.jsx(s,{...l,ref:r,children:N.isValidElement(d)?N.cloneElement(d,void 0,h):null})}return e.jsx(s,{...l,ref:r,children:i})});return n.displayName=`${t}.Slot`,n}function SZ(t){const s=N.forwardRef((n,a)=>{const{children:r,...i}=n;if(N.isValidElement(r)){const l=PZ(r),c=AZ(i,r.props);return r.type!==N.Fragment&&(c.ref=a?Yo(a,l):l),N.cloneElement(r,c)}return N.Children.count(r)>1?N.Children.only(null):null});return s.displayName=`${t}.SlotClone`,s}var CZ=Symbol("radix.slottable");function kZ(t){return N.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===CZ}function AZ(t,s){const n={...s};for(const a in s){const r=t[a],i=s[a];/^on[A-Z]/.test(a)?r&&i?n[a]=(...c)=>{const o=i(...c);return r(...c),o}:r&&(n[a]=r):a==="style"?n[a]={...r,...i}:a==="className"&&(n[a]=[r,i].filter(Boolean).join(" "))}return{...t,...n}}function PZ(t){var a,r;let s=(a=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:a.get,n=s&&"isReactWarning"in s&&s.isReactWarning;return n?t.ref:(s=(r=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:r.get,n=s&&"isReactWarning"in s&&s.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}var TZ=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],Om=TZ.reduce((t,s)=>{const n=wZ(`Primitive.${s}`),a=N.forwardRef((r,i)=>{const{asChild:l,...c}=r,o=l?n:s;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),e.jsx(o,{...c,ref:i})});return a.displayName=`Primitive.${s}`,{...t,[s]:a}},{});function EZ(t,s){return N.useReducer((n,a)=>s[n][a]??n,t)}var Dm=t=>{const{present:s,children:n}=t,a=MZ(s),r=typeof n=="function"?n({present:a.isPresent}):N.Children.only(n),i=Ht(a.ref,_Z(r));return typeof n=="function"||a.isPresent?N.cloneElement(r,{ref:i}):null};Dm.displayName="Presence";function MZ(t){const[s,n]=N.useState(),a=N.useRef(null),r=N.useRef(t),i=N.useRef("none"),l=t?"mounted":"unmounted",[c,o]=EZ(l,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return N.useEffect(()=>{const d=fh(a.current);i.current=c==="mounted"?d:"none"},[c]),Nn(()=>{const d=a.current,h=r.current;if(h!==t){const m=i.current,p=fh(d);t?o("MOUNT"):p==="none"||(d==null?void 0:d.display)==="none"?o("UNMOUNT"):o(h&&m!==p?"ANIMATION_OUT":"UNMOUNT"),r.current=t}},[t,o]),Nn(()=>{if(s){let d;const h=s.ownerDocument.defaultView??window,u=p=>{const x=fh(a.current).includes(p.animationName);if(p.target===s&&x&&(o("ANIMATION_END"),!r.current)){const v=s.style.animationFillMode;s.style.animationFillMode="forwards",d=h.setTimeout(()=>{s.style.animationFillMode==="forwards"&&(s.style.animationFillMode=v)})}},m=p=>{p.target===s&&(i.current=fh(a.current))};return s.addEventListener("animationstart",m),s.addEventListener("animationcancel",u),s.addEventListener("animationend",u),()=>{h.clearTimeout(d),s.removeEventListener("animationstart",m),s.removeEventListener("animationcancel",u),s.removeEventListener("animationend",u)}}else o("ANIMATION_END")},[s,o]),{isPresent:["mounted","unmountSuspended"].includes(c),ref:N.useCallback(d=>{a.current=d?getComputedStyle(d):null,n(d)},[])}}function fh(t){return(t==null?void 0:t.animationName)||"none"}function _Z(t){var a,r;let s=(a=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:a.get,n=s&&"isReactWarning"in s&&s.isReactWarning;return n?t.ref:(s=(r=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:r.get,n=s&&"isReactWarning"in s&&s.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}function RZ(t,s){return N.useReducer((n,a)=>s[n][a]??n,t)}var K0="ScrollArea",[N5,KJ]=Yn(K0),[OZ,wr]=N5(K0),b5=N.forwardRef((t,s)=>{const{__scopeScrollArea:n,type:a="hover",dir:r,scrollHideDelay:i=600,...l}=t,[c,o]=N.useState(null),[d,h]=N.useState(null),[u,m]=N.useState(null),[p,g]=N.useState(null),[x,v]=N.useState(null),[y,f]=N.useState(0),[b,j]=N.useState(0),[S,k]=N.useState(!1),[T,A]=N.useState(!1),C=Ht(s,P=>o(P)),w=kd(r);return e.jsx(OZ,{scope:n,type:a,dir:w,scrollHideDelay:i,scrollArea:c,viewport:d,onViewportChange:h,content:u,onContentChange:m,scrollbarX:p,onScrollbarXChange:g,scrollbarXEnabled:S,onScrollbarXEnabledChange:k,scrollbarY:x,onScrollbarYChange:v,scrollbarYEnabled:T,onScrollbarYEnabledChange:A,onCornerWidthChange:f,onCornerHeightChange:j,children:e.jsx(Om.div,{dir:w,...l,ref:C,style:{position:"relative","--radix-scroll-area-corner-width":y+"px","--radix-scroll-area-corner-height":b+"px",...t.style}})})});b5.displayName=K0;var w5="ScrollAreaViewport",S5=N.forwardRef((t,s)=>{const{__scopeScrollArea:n,children:a,nonce:r,...i}=t,l=wr(w5,n),c=N.useRef(null),o=Ht(s,c,l.onViewportChange);return e.jsxs(e.Fragment,{children:[e.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-scroll-area-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-scroll-area-viewport]::-webkit-scrollbar{display:none}"},nonce:r}),e.jsx(Om.div,{"data-radix-scroll-area-viewport":"",...i,ref:o,style:{overflowX:l.scrollbarXEnabled?"scroll":"hidden",overflowY:l.scrollbarYEnabled?"scroll":"hidden",...t.style},children:e.jsx("div",{ref:l.onContentChange,style:{minWidth:"100%",display:"table"},children:a})})]})});S5.displayName=w5;var ji="ScrollAreaScrollbar",Y0=N.forwardRef((t,s)=>{const{forceMount:n,...a}=t,r=wr(ji,t.__scopeScrollArea),{onScrollbarXEnabledChange:i,onScrollbarYEnabledChange:l}=r,c=t.orientation==="horizontal";return N.useEffect(()=>(c?i(!0):l(!0),()=>{c?i(!1):l(!1)}),[c,i,l]),r.type==="hover"?e.jsx(DZ,{...a,ref:s,forceMount:n}):r.type==="scroll"?e.jsx(IZ,{...a,ref:s,forceMount:n}):r.type==="auto"?e.jsx(C5,{...a,ref:s,forceMount:n}):r.type==="always"?e.jsx(Q0,{...a,ref:s}):null});Y0.displayName=ji;var DZ=N.forwardRef((t,s)=>{const{forceMount:n,...a}=t,r=wr(ji,t.__scopeScrollArea),[i,l]=N.useState(!1);return N.useEffect(()=>{const c=r.scrollArea;let o=0;if(c){const d=()=>{window.clearTimeout(o),l(!0)},h=()=>{o=window.setTimeout(()=>l(!1),r.scrollHideDelay)};return c.addEventListener("pointerenter",d),c.addEventListener("pointerleave",h),()=>{window.clearTimeout(o),c.removeEventListener("pointerenter",d),c.removeEventListener("pointerleave",h)}}},[r.scrollArea,r.scrollHideDelay]),e.jsx(Dm,{present:n||i,children:e.jsx(C5,{"data-state":i?"visible":"hidden",...a,ref:s})})}),IZ=N.forwardRef((t,s)=>{const{forceMount:n,...a}=t,r=wr(ji,t.__scopeScrollArea),i=t.orientation==="horizontal",l=cf(()=>o("SCROLL_END"),100),[c,o]=RZ("hidden",{hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}});return N.useEffect(()=>{if(c==="idle"){const d=window.setTimeout(()=>o("HIDE"),r.scrollHideDelay);return()=>window.clearTimeout(d)}},[c,r.scrollHideDelay,o]),N.useEffect(()=>{const d=r.viewport,h=i?"scrollLeft":"scrollTop";if(d){let u=d[h];const m=()=>{const p=d[h];u!==p&&(o("SCROLL"),l()),u=p};return d.addEventListener("scroll",m),()=>d.removeEventListener("scroll",m)}},[r.viewport,i,o,l]),e.jsx(Dm,{present:n||c!=="hidden",children:e.jsx(Q0,{"data-state":c==="hidden"?"hidden":"visible",...a,ref:s,onPointerEnter:tt(t.onPointerEnter,()=>o("POINTER_ENTER")),onPointerLeave:tt(t.onPointerLeave,()=>o("POINTER_LEAVE"))})})}),C5=N.forwardRef((t,s)=>{const n=wr(ji,t.__scopeScrollArea),{forceMount:a,...r}=t,[i,l]=N.useState(!1),c=t.orientation==="horizontal",o=cf(()=>{if(n.viewport){const d=n.viewport.offsetWidth<n.viewport.scrollWidth,h=n.viewport.offsetHeight<n.viewport.scrollHeight;l(c?d:h)}},10);return fd(n.viewport,o),fd(n.content,o),e.jsx(Dm,{present:a||i,children:e.jsx(Q0,{"data-state":i?"visible":"hidden",...r,ref:s})})}),Q0=N.forwardRef((t,s)=>{const{orientation:n="vertical",...a}=t,r=wr(ji,t.__scopeScrollArea),i=N.useRef(null),l=N.useRef(0),[c,o]=N.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),d=E5(c.viewport,c.content),h={...a,sizes:c,onSizesChange:o,hasThumb:d>0&&d<1,onThumbChange:m=>i.current=m,onThumbPointerUp:()=>l.current=0,onThumbPointerDown:m=>l.current=m};function u(m,p){return UZ(m,l.current,c,p)}return n==="horizontal"?e.jsx(LZ,{...h,ref:s,onThumbPositionChange:()=>{if(r.viewport&&i.current){const m=r.viewport.scrollLeft,p=C1(m,c,r.dir);i.current.style.transform=`translate3d(${p}px, 0, 0)`}},onWheelScroll:m=>{r.viewport&&(r.viewport.scrollLeft=m)},onDragScroll:m=>{r.viewport&&(r.viewport.scrollLeft=u(m,r.dir))}}):n==="vertical"?e.jsx(FZ,{...h,ref:s,onThumbPositionChange:()=>{if(r.viewport&&i.current){const m=r.viewport.scrollTop,p=C1(m,c);i.current.style.transform=`translate3d(0, ${p}px, 0)`}},onWheelScroll:m=>{r.viewport&&(r.viewport.scrollTop=m)},onDragScroll:m=>{r.viewport&&(r.viewport.scrollTop=u(m))}}):null}),LZ=N.forwardRef((t,s)=>{const{sizes:n,onSizesChange:a,...r}=t,i=wr(ji,t.__scopeScrollArea),[l,c]=N.useState(),o=N.useRef(null),d=Ht(s,o,i.onScrollbarXChange);return N.useEffect(()=>{o.current&&c(getComputedStyle(o.current))},[o]),e.jsx(A5,{"data-orientation":"horizontal",...r,ref:d,sizes:n,style:{bottom:0,left:i.dir==="rtl"?"var(--radix-scroll-area-corner-width)":0,right:i.dir==="ltr"?"var(--radix-scroll-area-corner-width)":0,"--radix-scroll-area-thumb-width":of(n)+"px",...t.style},onThumbPointerDown:h=>t.onThumbPointerDown(h.x),onDragScroll:h=>t.onDragScroll(h.x),onWheelScroll:(h,u)=>{if(i.viewport){const m=i.viewport.scrollLeft+h.deltaX;t.onWheelScroll(m),_5(m,u)&&h.preventDefault()}},onResize:()=>{o.current&&i.viewport&&l&&a({content:i.viewport.scrollWidth,viewport:i.viewport.offsetWidth,scrollbar:{size:o.current.clientWidth,paddingStart:Bx(l.paddingLeft),paddingEnd:Bx(l.paddingRight)}})}})}),FZ=N.forwardRef((t,s)=>{const{sizes:n,onSizesChange:a,...r}=t,i=wr(ji,t.__scopeScrollArea),[l,c]=N.useState(),o=N.useRef(null),d=Ht(s,o,i.onScrollbarYChange);return N.useEffect(()=>{o.current&&c(getComputedStyle(o.current))},[o]),e.jsx(A5,{"data-orientation":"vertical",...r,ref:d,sizes:n,style:{top:0,right:i.dir==="ltr"?0:void 0,left:i.dir==="rtl"?0:void 0,bottom:"var(--radix-scroll-area-corner-height)","--radix-scroll-area-thumb-height":of(n)+"px",...t.style},onThumbPointerDown:h=>t.onThumbPointerDown(h.y),onDragScroll:h=>t.onDragScroll(h.y),onWheelScroll:(h,u)=>{if(i.viewport){const m=i.viewport.scrollTop+h.deltaY;t.onWheelScroll(m),_5(m,u)&&h.preventDefault()}},onResize:()=>{o.current&&i.viewport&&l&&a({content:i.viewport.scrollHeight,viewport:i.viewport.offsetHeight,scrollbar:{size:o.current.clientHeight,paddingStart:Bx(l.paddingTop),paddingEnd:Bx(l.paddingBottom)}})}})}),[qZ,k5]=N5(ji),A5=N.forwardRef((t,s)=>{const{__scopeScrollArea:n,sizes:a,hasThumb:r,onThumbChange:i,onThumbPointerUp:l,onThumbPointerDown:c,onThumbPositionChange:o,onDragScroll:d,onWheelScroll:h,onResize:u,...m}=t,p=wr(ji,n),[g,x]=N.useState(null),v=Ht(s,C=>x(C)),y=N.useRef(null),f=N.useRef(""),b=p.viewport,j=a.content-a.viewport,S=sn(h),k=sn(o),T=cf(u,10);function A(C){if(y.current){const w=C.clientX-y.current.left,P=C.clientY-y.current.top;d({x:w,y:P})}}return N.useEffect(()=>{const C=w=>{const P=w.target;(g==null?void 0:g.contains(P))&&S(w,j)};return document.addEventListener("wheel",C,{passive:!1}),()=>document.removeEventListener("wheel",C,{passive:!1})},[b,g,j,S]),N.useEffect(k,[a,k]),fd(g,T),fd(p.content,T),e.jsx(qZ,{scope:n,scrollbar:g,hasThumb:r,onThumbChange:sn(i),onThumbPointerUp:sn(l),onThumbPositionChange:k,onThumbPointerDown:sn(c),children:e.jsx(Om.div,{...m,ref:v,style:{position:"absolute",...m.style},onPointerDown:tt(t.onPointerDown,C=>{C.button===0&&(C.target.setPointerCapture(C.pointerId),y.current=g.getBoundingClientRect(),f.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",p.viewport&&(p.viewport.style.scrollBehavior="auto"),A(C))}),onPointerMove:tt(t.onPointerMove,A),onPointerUp:tt(t.onPointerUp,C=>{const w=C.target;w.hasPointerCapture(C.pointerId)&&w.releasePointerCapture(C.pointerId),document.body.style.webkitUserSelect=f.current,p.viewport&&(p.viewport.style.scrollBehavior=""),y.current=null})})})}),$x="ScrollAreaThumb",P5=N.forwardRef((t,s)=>{const{forceMount:n,...a}=t,r=k5($x,t.__scopeScrollArea);return e.jsx(Dm,{present:n||r.hasThumb,children:e.jsx($Z,{ref:s,...a})})}),$Z=N.forwardRef((t,s)=>{const{__scopeScrollArea:n,style:a,...r}=t,i=wr($x,n),l=k5($x,n),{onThumbPositionChange:c}=l,o=Ht(s,u=>l.onThumbChange(u)),d=N.useRef(void 0),h=cf(()=>{d.current&&(d.current(),d.current=void 0)},100);return N.useEffect(()=>{const u=i.viewport;if(u){const m=()=>{if(h(),!d.current){const p=zZ(u,c);d.current=p,c()}};return c(),u.addEventListener("scroll",m),()=>u.removeEventListener("scroll",m)}},[i.viewport,h,c]),e.jsx(Om.div,{"data-state":l.hasThumb?"visible":"hidden",...r,ref:o,style:{width:"var(--radix-scroll-area-thumb-width)",height:"var(--radix-scroll-area-thumb-height)",...a},onPointerDownCapture:tt(t.onPointerDownCapture,u=>{const p=u.target.getBoundingClientRect(),g=u.clientX-p.left,x=u.clientY-p.top;l.onThumbPointerDown({x:g,y:x})}),onPointerUp:tt(t.onPointerUp,l.onThumbPointerUp)})});P5.displayName=$x;var Z0="ScrollAreaCorner",T5=N.forwardRef((t,s)=>{const n=wr(Z0,t.__scopeScrollArea),a=!!(n.scrollbarX&&n.scrollbarY);return n.type!=="scroll"&&a?e.jsx(BZ,{...t,ref:s}):null});T5.displayName=Z0;var BZ=N.forwardRef((t,s)=>{const{__scopeScrollArea:n,...a}=t,r=wr(Z0,n),[i,l]=N.useState(0),[c,o]=N.useState(0),d=!!(i&&c);return fd(r.scrollbarX,()=>{var u;const h=((u=r.scrollbarX)==null?void 0:u.offsetHeight)||0;r.onCornerHeightChange(h),o(h)}),fd(r.scrollbarY,()=>{var u;const h=((u=r.scrollbarY)==null?void 0:u.offsetWidth)||0;r.onCornerWidthChange(h),l(h)}),d?e.jsx(Om.div,{...a,ref:s,style:{width:i,height:c,position:"absolute",right:r.dir==="ltr"?0:void 0,left:r.dir==="rtl"?0:void 0,bottom:0,...t.style}}):null});function Bx(t){return t?parseInt(t,10):0}function E5(t,s){const n=t/s;return isNaN(n)?0:n}function of(t){const s=E5(t.viewport,t.content),n=t.scrollbar.paddingStart+t.scrollbar.paddingEnd,a=(t.scrollbar.size-n)*s;return Math.max(a,18)}function UZ(t,s,n,a="ltr"){const r=of(n),i=r/2,l=s||i,c=r-l,o=n.scrollbar.paddingStart+l,d=n.scrollbar.size-n.scrollbar.paddingEnd-c,h=n.content-n.viewport,u=a==="ltr"?[0,h]:[h*-1,0];return M5([o,d],u)(t)}function C1(t,s,n="ltr"){const a=of(s),r=s.scrollbar.paddingStart+s.scrollbar.paddingEnd,i=s.scrollbar.size-r,l=s.content-s.viewport,c=i-a,o=n==="ltr"?[0,l]:[l*-1,0],d=nm(t,o);return M5([0,l],[0,c])(d)}function M5(t,s){return n=>{if(t[0]===t[1]||s[0]===s[1])return s[0];const a=(s[1]-s[0])/(t[1]-t[0]);return s[0]+a*(n-t[0])}}function _5(t,s){return t>0&&t<s}var zZ=(t,s=()=>{})=>{let n={left:t.scrollLeft,top:t.scrollTop},a=0;return function r(){const i={left:t.scrollLeft,top:t.scrollTop},l=n.left!==i.left,c=n.top!==i.top;(l||c)&&s(),n=i,a=window.requestAnimationFrame(r)}(),()=>window.cancelAnimationFrame(a)};function cf(t,s){const n=sn(t),a=N.useRef(0);return N.useEffect(()=>()=>window.clearTimeout(a.current),[]),N.useCallback(()=>{window.clearTimeout(a.current),a.current=window.setTimeout(n,s)},[n,s])}function fd(t,s){const n=sn(s);Nn(()=>{let a=0;if(t){const r=new ResizeObserver(()=>{cancelAnimationFrame(a),a=window.requestAnimationFrame(n)});return r.observe(t),()=>{window.cancelAnimationFrame(a),r.unobserve(t)}}},[t,n])}var R5=b5,VZ=S5,GZ=T5;const wc=N.forwardRef(({className:t,children:s,...n},a)=>e.jsxs(R5,{ref:a,className:Je("relative overflow-hidden",t),...n,children:[e.jsx(VZ,{className:"h-full w-full rounded-[inherit]",children:s}),e.jsx(O5,{}),e.jsx(GZ,{})]}));wc.displayName=R5.displayName;const O5=N.forwardRef(({className:t,orientation:s="vertical",...n},a)=>e.jsx(Y0,{ref:a,orientation:s,className:Je("flex touch-none select-none transition-colors",s==="vertical"&&"h-full w-2.5 border-l border-l-transparent p-[1px]",s==="horizontal"&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",t),...n,children:e.jsx(P5,{className:"relative flex-1 rounded-full bg-border"})}));O5.displayName=Y0.displayName;function WZ(){const{user:t}=_s(),{toast:s}=nt();Tt();const n=N.useRef(null),[a,r]=N.useState(null),[i,l]=N.useState({name:"",email:"",subject:"",message:"",inquiryType:"",honeypot:"",captcha:"",userAgent:"",timestamp:""}),[c,o]=N.useState(!1),[d,h]=N.useState({question:"",answer:0}),[u,m]=N.useState(!1),[p,g]=N.useState([]),[x,v]=N.useState(""),[y,f]=N.useState(!1);N.useEffect(()=>{(()=>{const P=Math.floor(Math.random()*10)+1,M=Math.floor(Math.random()*10)+1;h({question:`What is ${P} + ${M}?`,answer:P+M})})(),l(P=>({...P,userAgent:navigator.userAgent,timestamp:Date.now().toString()}))},[]),N.useEffect(()=>{if(u&&!a){const P=`${window.location.protocol==="https:"?"wss:":"ws:"}//${window.location.host}/ws`,M=new WebSocket(P);return M.onopen=()=>{f(!0),r(M),M.send(JSON.stringify({type:"join_support",userId:(t==null?void 0:t.id)||"guest",userName:(t==null?void 0:t.fullName)||"Guest User"}))},M.onmessage=I=>{const W=JSON.parse(I.data);W.type==="support_message"&&g(_=>[..._,{id:W.id,message:W.message,sender:W.sender,timestamp:new Date(W.timestamp),senderName:W.senderName}])},M.onclose=()=>{f(!1),r(null)},()=>{M.close()}}},[u,t]),N.useEffect(()=>{var w;(w=n.current)==null||w.scrollIntoView({behavior:"smooth"})},[p]);const b=Xe({mutationFn:async w=>xe("/api/contact","POST"),onSuccess:()=>{s({title:"Message Sent Successfully",description:"Thank you for contacting us. We'll get back to you within 24 hours."}),l({name:"",email:"",subject:"",message:"",inquiryType:"",honeypot:"",captcha:"",userAgent:navigator.userAgent,timestamp:Date.now().toString()});const w=Math.floor(Math.random()*10)+1,P=Math.floor(Math.random()*10)+1;h({question:`What is ${w} + ${P}?`,answer:w+P})},onError:w=>{s({title:"Failed to Send Message",description:w.message||"Please try again later or contact us directly.",variant:"destructive"})}}),j=async w=>{if(w.preventDefault(),o(!0),i.honeypot){s({title:"Spam Detected",description:"Please fill out the form correctly.",variant:"destructive"}),o(!1);return}if(parseInt(i.captcha)!==d.answer){s({title:"Incorrect Answer",description:"Please solve the math problem correctly.",variant:"destructive"}),o(!1);return}const P=localStorage.getItem("lastContactSubmission"),M=Date.now();if(P&&M-parseInt(P)<6e4){s({title:"Too Many Requests",description:"Please wait before sending another message.",variant:"destructive"}),o(!1);return}try{await b.mutateAsync(i),localStorage.setItem("lastContactSubmission",M.toString())}finally{o(!1)}},S=(w,P)=>{l(M=>({...M,[w]:P}))},k=()=>{if(!x.trim()||!a||!y)return;const w={type:"support_message",message:x.trim(),sender:"user",senderName:(t==null?void 0:t.fullName)||"Guest User",timestamp:new Date().toISOString()};a.send(JSON.stringify(w)),v("")},T=w=>{w.key==="Enter"&&!w.shiftKey&&(w.preventDefault(),k())},A=[{icon:vn,title:"Email Us",content:"hello@waitumusic.com",description:"We'll respond within 24 hours"},{icon:op,title:"Call Us",content:"+1 (555) 123-4567",description:"Mon-Fri, 9am-6pm PST"},{icon:Dn,title:"Visit Us",content:"123 Music Row, Nashville, TN",description:"By appointment only"},{icon:Qt,title:"Support Hours",content:"24/7 Online Support",description:"Live chat available"}],C=["General Inquiry","Artist Registration","Booking Request","Technical Support","Partnership Opportunity","Media & Press","Billing Question"];return e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-purple-900 to-blue-900",children:[e.jsx("section",{className:"py-24 px-4 relative",children:e.jsxs("div",{className:"max-w-6xl mx-auto text-center",children:[e.jsxs(X,{className:"mb-6 px-6 py-3 bg-white/10 backdrop-blur-sm border-white/20 text-white text-lg font-medium",children:[e.jsx(vn,{className:"w-4 h-4 mr-2"}),"Get in Touch"]}),e.jsxs("h1",{className:"text-6xl md:text-7xl font-bold text-white mb-8 tracking-tight",children:["Let's Start a"," ",e.jsx("span",{className:"bg-gradient-to-r from-yellow-400 via-pink-500 to-purple-500 bg-clip-text text-transparent",children:"Conversation"})]}),e.jsxs("p",{className:"text-xl md:text-2xl text-white/80 mb-12 max-w-4xl mx-auto leading-relaxed",children:["Have a question, want to partner with us, or ready to join our platform? We'd love to hear from you. Our team is here to help you"," ",e.jsx("span",{className:"text-yellow-400 font-semibold",children:"succeed"}),"."]})]})}),e.jsx("section",{className:"py-20 px-4 bg-white",children:e.jsxs("div",{className:"max-w-6xl mx-auto",children:[e.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-4 gap-8 mb-20",children:A.map((w,P)=>{const M=w.icon,I=["from-yellow-400 to-orange-500","from-pink-400 to-red-500","from-purple-400 to-indigo-500","from-blue-400 to-cyan-500"];return e.jsx(R,{className:"text-center hover:shadow-2xl transition-all duration-300 border-0 shadow-lg group hover:scale-105",children:e.jsxs(L,{className:"p-8",children:[e.jsx("div",{className:`w-16 h-16 bg-gradient-to-br ${I[P]} rounded-2xl flex items-center justify-center mx-auto mb-6 group-hover:scale-110 transition-transform duration-300`,children:e.jsx(M,{className:"h-8 w-8 text-white"})}),e.jsx("h3",{className:"font-bold text-gray-900 mb-3 text-lg group-hover:text-purple-600 transition-colors duration-300",children:w.title}),e.jsx("p",{className:"text-purple-600 font-semibold mb-2",children:w.content}),e.jsx("p",{className:"text-sm text-gray-600",children:w.description})]})},P)})}),e.jsxs("div",{className:"grid lg:grid-cols-2 gap-12",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-3xl font-bold text-gray-900 mb-6",children:"Send us a Message"}),e.jsx("p",{className:"text-gray-600 mb-8",children:"Fill out the form below and we'll get back to you as soon as possible. For urgent matters, please call us directly."}),e.jsxs(R,{children:[e.jsxs(Y,{children:[e.jsx(Q,{children:"Contact Form"}),e.jsx(rt,{children:"We typically respond within 24 hours during business days."})]}),e.jsx(L,{children:e.jsxs("form",{onSubmit:j,className:"space-y-6",children:[e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(q,{htmlFor:"name",children:"Full Name *"}),e.jsx($,{id:"name",value:i.name,onChange:w=>S("name",w.target.value),placeholder:"Your full name",required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(q,{htmlFor:"email",children:"Email Address *"}),e.jsx($,{id:"email",type:"email",value:i.email,onChange:w=>S("email",w.target.value),placeholder:"your@email.com",required:!0})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(q,{htmlFor:"inquiryType",children:"Inquiry Type"}),e.jsxs(Re,{value:i.inquiryType,onValueChange:w=>S("inquiryType",w),children:[e.jsx(Me,{children:e.jsx(Oe,{placeholder:"Select inquiry type"})}),e.jsx(_e,{children:C.map(w=>e.jsx(U,{value:w.toLowerCase().replace(/\s+/g,"-"),children:w},w))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(q,{htmlFor:"subject",children:"Subject *"}),e.jsx($,{id:"subject",value:i.subject,onChange:w=>S("subject",w.target.value),placeholder:"Brief description of your inquiry",required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(q,{htmlFor:"message",children:"Message *"}),e.jsx(mt,{id:"message",value:i.message,onChange:w=>S("message",w.target.value),placeholder:"Tell us more about your inquiry...",rows:6,required:!0})]}),e.jsxs("div",{className:"hidden",children:[e.jsx(q,{htmlFor:"honeypot",children:"Leave this field empty"}),e.jsx($,{id:"honeypot",value:i.honeypot,onChange:w=>S("honeypot",w.target.value),tabIndex:-1,autoComplete:"off"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(q,{htmlFor:"captcha",className:"flex items-center gap-2",children:[e.jsx(Bt,{className:"h-4 w-4 text-green-600"}),"Security Check: ",d.question," *"]}),e.jsx($,{id:"captcha",type:"number",value:i.captcha,onChange:w=>S("captcha",w.target.value),placeholder:"Enter your answer",required:!0,className:"max-w-32"})]}),e.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 text-green-800",children:[e.jsx(ct,{className:"h-5 w-5"}),e.jsx("span",{className:"font-medium",children:"Spam Protection Active"})]}),e.jsxs("div",{className:"mt-2 text-sm text-green-700 space-y-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Bt,{className:"h-3 w-3"}),e.jsx("span",{children:"Advanced filtering enabled"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ys,{className:"h-3 w-3"}),e.jsx("span",{children:"Rate limiting protection"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ct,{className:"h-3 w-3"}),e.jsx("span",{children:"Secure form validation"})]})]})]}),e.jsx(E,{type:"submit",size:"lg",className:"w-full bg-gradient-to-r from-purple-600 to-blue-600 hover:from-purple-700 hover:to-blue-700",disabled:c||b.isPending,children:c?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Sending..."]}):e.jsxs(e.Fragment,{children:[e.jsx(gr,{className:"h-4 w-4 mr-2"}),"Send Secure Message"]})})]})})]})]}),e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Frequently Asked Questions"}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-gray-900 mb-2",children:"How do I join as an artist?"}),e.jsx("p",{className:"text-gray-600 text-sm",children:'Click "Get Started" in the navigation menu and follow the registration process. You can choose between independent or managed artist tiers.'})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-gray-900 mb-2",children:"What are your commission rates?"}),e.jsx("p",{className:"text-gray-600 text-sm",children:"We offer 100% base price payouts to artists. Our transparent fee structure ensures you keep what you earn from your music."})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-gray-900 mb-2",children:"Do you offer international support?"}),e.jsx("p",{className:"text-gray-600 text-sm",children:"Yes! We support artists and professionals worldwide with global distribution and localized support in multiple time zones."})]})]})]}),e.jsx(R,{className:"bg-gradient-to-br from-purple-600 to-blue-600 text-white border-0 shadow-xl",children:e.jsxs(L,{className:"p-6",children:[e.jsxs("h3",{className:"text-xl font-bold mb-4 flex items-center gap-2",children:[e.jsx(jn,{className:"h-6 w-6"}),"Need Immediate Help?"]}),e.jsx("p",{className:"mb-6 opacity-90",children:"Our support team is available 24/7 to assist with urgent technical issues or time-sensitive opportunities."}),e.jsxs(kt,{open:u,onOpenChange:m,children:[e.jsx(ma,{asChild:!0,children:e.jsxs(E,{variant:"secondary",className:"text-purple-600 font-semibold w-full bg-white hover:bg-gray-50",children:[e.jsx(Li,{className:"h-4 w-4 mr-2"}),"Start Live Chat"]})}),e.jsxs(wt,{className:"sm:max-w-md h-[600px] flex flex-col p-0",children:[e.jsx(St,{className:"p-4 border-b bg-gradient-to-r from-purple-600 to-blue-600 text-white",children:e.jsxs(Ct,{className:"flex items-center gap-2",children:[e.jsx(Li,{className:"h-5 w-5"}),"Live Support Chat",y&&e.jsxs(X,{variant:"secondary",className:"bg-green-100 text-green-800 text-xs",children:[e.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full mr-1"}),"Online"]})]})}),e.jsxs("div",{className:"flex-1 flex flex-col",children:[e.jsx("div",{className:"p-3 bg-gray-50 border-b",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ln,{className:"w-8 h-8",children:e.jsx(Fn,{className:"bg-purple-100 text-purple-600 text-xs",children:e.jsx(Ze,{className:"w-4 h-4"})})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-sm",children:"Wai'tuMusic Support"}),e.jsx("p",{className:"text-xs text-gray-500",children:y?"Online now":"Connecting..."})]})]})}),e.jsx(wc,{className:"flex-1 p-4",children:e.jsxs("div",{className:"space-y-4",children:[p.length===0&&e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(Ln,{className:"w-8 h-8",children:e.jsx(Fn,{className:"bg-purple-100 text-purple-600 text-xs",children:e.jsx(jn,{className:"w-4 h-4"})})}),e.jsxs("div",{className:"bg-gray-100 rounded-lg p-3 max-w-xs",children:[e.jsx("p",{className:"text-sm",children:"Hello! Welcome to Wai'tuMusic support. How can we help you today?"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Just now"})]})]}),p.map(w=>e.jsxs("div",{className:`flex items-start gap-3 ${w.sender==="user"?"flex-row-reverse":""}`,children:[e.jsx(Ln,{className:"w-8 h-8",children:e.jsx(Fn,{className:`text-xs ${w.sender==="user"?"bg-blue-100 text-blue-600":"bg-purple-100 text-purple-600"}`,children:w.senderName.charAt(0)})}),e.jsxs("div",{className:`rounded-lg p-3 max-w-xs ${w.sender==="user"?"bg-blue-500 text-white":"bg-gray-100"}`,children:[e.jsx("p",{className:"text-sm",children:w.message}),e.jsx("p",{className:`text-xs mt-1 ${w.sender==="user"?"text-blue-100":"text-gray-500"}`,children:w.timestamp.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]})]},w.id)),e.jsx("div",{ref:n})]})}),e.jsxs("div",{className:"p-4 border-t",children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsx($,{value:x,onChange:w=>v(w.target.value),onKeyPress:T,placeholder:"Type your message...",disabled:!y}),e.jsx(E,{onClick:k,disabled:!x.trim()||!y,size:"sm",className:"bg-purple-600 hover:bg-purple-700",children:e.jsx(gr,{className:"h-4 w-4"})})]}),!y&&e.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"Connecting to support..."})]})]})]})]}),e.jsxs("div",{className:"mt-4 text-xs opacity-75",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx(ct,{className:"h-3 w-3"}),e.jsx("span",{children:"End-to-end encrypted"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Bt,{className:"h-3 w-3"}),e.jsx("span",{children:"Secure self-hosted chat"})]})]})]})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-4",children:"Office Hours"}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Monday - Friday"}),e.jsx("span",{className:"font-medium",children:"9:00 AM - 6:00 PM PST"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Saturday"}),e.jsx("span",{className:"font-medium",children:"10:00 AM - 4:00 PM PST"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Sunday"}),e.jsx("span",{className:"font-medium",children:"Closed"})]})]})]})]})]})]})})]})}function k1(){const{toast:t}=nt();Tt();const s=N.useRef(null),a=new URLSearchParams(window.location.search).get("bookingId"),r=a?parseInt(a):22;N.useState("select");const[i,l]=N.useState([]),[c,o]=N.useState([]),[d,h]=N.useState([]),[u,m]=N.useState({width:"40",height:"30"}),[p,g]=N.useState(0),[x,v]=N.useState(!1),[y,f]=N.useState({stagePlotToMixer:!1,mixerToSetlist:!1}),[b,j]=N.useState(!1),[S,k]=N.useState(!1),[T,A]=N.useState(!1),[C,w]=N.useState(!1),[P,M]=N.useState(!1),[I,W]=N.useState(!1),[_,B]=N.useState([]),[O,z]=N.useState(null);ke({queryKey:["/api/bookings",r,"workflow"],queryFn:async()=>await(await xe(`/api/bookings/${r}/workflow`)).json(),enabled:!!r});const{data:F,isLoading:K,error:D}=ke({queryKey:["/api/bookings",r,"assigned-talent",Date.now()],queryFn:async()=>{console.log("Fetching assigned talent for booking:",r);const oe=await xe(`/api/bookings/${r}/assigned-talent`);return console.log("Assigned talent response:",oe),console.log("Assigned talent count:",(oe==null?void 0:oe.length)||0),oe},enabled:!!r,staleTime:0,cacheTime:0}),G=async()=>{v(!0),g(0);try{const oe=["Loading artist technical rider profiles...","Analyzing equipment requirements...","Configuring stage plot preferences...","Setting up mixer configurations...","Integrating monitor mix preferences...","Calculating technical costs...","Finalizing cross-system integration..."];for(let ye=0;ye<oe.length;ye++)g((ye+1)/oe.length*100),ye===1&&F&&await H(F),ye===5&&await V(),await new Promise(Te=>setTimeout(Te,800));t({title:"Auto-Population Complete",description:"Technical rider populated from artist profiles and preferences"})}catch{t({title:"Auto-Population Failed",description:"Unable to load artist profiles. Please populate manually.",variant:"destructive"})}finally{v(!1)}},H=async oe=>{if(!oe||oe.length===0)return;const ye=[];let Te=100;oe.forEach((ws,fe)=>{ws.instruments&&ws.instruments.forEach((Ve,zt)=>{ye.push({id:`auto-${ws.id}-${zt}`,type:se(Ve),name:`${Ve} (${ws.name})`,x:Te,y:150+fe*80,width:60,height:40,color:Z(Ve)}),Te+=80})}),l(ye);const et=[...c];let cs=0;oe.forEach(ws=>{ws.instruments&&cs<32&&ws.instruments.forEach(fe=>{cs<32&&(et[cs]={...et[cs],instrument:`${fe} (${ws.name})`,inputType:le(fe),phantom:ne(fe),assigned:!0},cs++)})}),o(et)},V=async()=>{f({stagePlotToMixer:i.length>0&&c.some(oe=>oe.assigned),mixerToSetlist:c.some(oe=>oe.assigned)&&d.length>0})},se=oe=>{const ye=oe.toLowerCase();return ye.includes("drum")||ye.includes("percussion")?"instrument":ye.includes("vocal")||ye.includes("mic")?"mic":ye.includes("speaker")||ye.includes("monitor")?"monitor":"instrument"},Z=oe=>{const ye=["#3B82F6","#10B981","#F59E0B","#EF4444","#8B5CF6","#06B6D4"];return ye[oe.length%ye.length]},le=oe=>{const ye=oe.toLowerCase();return ye.includes("keyboard")||ye.includes("synth")?"Line":ye.includes("guitar")||ye.includes("bass")?"Instrument":"XLR"},ne=oe=>{const ye=oe.toLowerCase();return ye.includes("vocal")||ye.includes("condenser")||ye.includes("overhead")};N.useEffect(()=>{const oe=[];for(let ye=1;ye<=32;ye++)oe.push({channel:ye,instrument:"",inputType:"XLR",phantom:!1,gain:"0dB",eq:{high:"0dB",mid:"0dB",low:"0dB"},aux:["0","0","0","0"],assigned:!1});o(oe)},[]),N.useEffect(()=>{V()},[i,c,d]);const ue=()=>{const oe=s.current;if(!oe)return;const ye=oe.getContext("2d");ye&&(ye.clearRect(0,0,oe.width,oe.height),ye.strokeStyle="#2d3748",ye.lineWidth=3,ye.strokeRect(20,20,parseInt(u.width)*8,parseInt(u.height)*8),ye.fillStyle="#2d3748",ye.font="bold 14px Arial",ye.fillText(`STAGE ${u.width}'  ${u.height}'`,25,15),i.forEach(Te=>{ye.fillStyle=Te.color,ye.fillRect(Te.x,Te.y,Te.width,Te.height),ye.strokeStyle="#fff",ye.lineWidth=2,ye.strokeRect(Te.x,Te.y,Te.width,Te.height),ye.fillStyle="#fff",ye.font="bold 16px Arial";const et=Te.x+Te.width/2,cs=Te.y+Te.height/2;let ws="";switch(Te.type){case"instrument":ws=Te.name.toLowerCase().includes("keyboard")||Te.name.toLowerCase().includes("piano")?"":Te.name.toLowerCase().includes("guitar")||Te.name.toLowerCase().includes("bass")?"":Te.name.toLowerCase().includes("drum")?"":"";break;case"mic":ws="";break;case"monitor":ws=Te.name.toLowerCase().includes("wedge")?"":Te.name.toLowerCase().includes("iem")?"":"";break;case"equipment":ws=Te.name.toLowerCase().includes("light")?"":Te.name.toLowerCase().includes("camera")?"":Te.name.toLowerCase().includes("video")?"":"";break;case"talent":ws="";break;case"other":ws="";break;default:ws=""}ye.font="20px Arial",ye.textAlign="center",ye.fillText(ws,et,cs+3),ye.fillStyle="#2d3748",ye.font="10px Arial";const fe=Te.y+Te.height+12;Te.width+20;const Ve=Te.name.length>12?Te.name.substring(0,12)+"...":Te.name;ye.fillText(Ve,et,fe),ye.textAlign="left"}))};N.useEffect(()=>{ue()},[i,u]);const te=oe=>{let ye="",Te=[];switch(oe){case"instrument":const cs=i.filter(Ve=>Ve.type==="instrument").length;if(F&&F.length>cs){const Ve=F[cs];Ve.instruments&&Ve.instruments.length>0?(ye=`${Ve.instruments[0]} (${Ve.name})`,Te=Ve.instruments):ye=`Instrument ${cs+1}`}else ye=`Instrument ${cs+1}`;break;case"mic":ye=`Mic Stand ${i.filter(Ve=>Ve.type==="mic").length+1}`;break;case"monitor":ye=`${O==="wedge"?"Wedge Monitor":O==="wired-iem"?"Wired IEM":O==="wireless-iem"?"Wireless IEM":"Monitor"} ${i.filter(Ve=>Ve.type==="monitor").length+1}`,z(null);break;case"equipment":ye=`Equipment ${i.filter(Ve=>Ve.type==="equipment").length+1}`;break;case"talent":const fe=i.filter(Ve=>Ve.type==="talent").length;F&&F.length>fe?ye=F[fe].name||`Talent ${fe+1}`:ye=`Talent ${fe+1}`;break;case"other":ye=`Other ${i.filter(Ve=>Ve.type==="other").length+1}`;break;default:ye=oe.charAt(0).toUpperCase()+oe.slice(1)}const et={id:Date.now().toString(),type:oe,name:ye,x:50+Math.random()*200,y:50+Math.random()*150,width:oe==="mic"?25:oe==="monitor"?40:oe==="talent"?50:60,height:oe==="mic"||oe==="monitor"?30:oe==="talent"?50:40,color:Ae(oe),editable:!1,instrumentTypes:Te.length>0?Te:void 0};l([...i,et])},Ae=oe=>{switch(oe){case"instrument":return"#8B4513";case"mic":return"#FF6B6B";case"monitor":return"#9B59B6";case"equipment":return"#3498DB";case"talent":return"#2ECC71";case"other":return"#95A5A6";default:return"#45B7D1"}},Ge=(oe,ye,Te)=>{const et=[...c];ye==="eq"?et[oe].eq={...et[oe].eq,...Te}:ye==="aux"?et[oe].aux=Te:et[oe][ye]=Te,o(et)},be=()=>{const oe={id:Date.now().toString(),songTitle:"",artist:"",key:"C",tempo:"120 BPM",duration:"3:30",notes:"",transitions:""};h([...d,oe])},Ie=(oe,ye,Te)=>{h(d.map(et=>et.id===oe?{...et,[ye]:Te}:et))},ve=oe=>{h(ye=>ye.filter(Te=>Te.id!==oe))},ie=async()=>{try{const oe={bookingId:r,stageName:`Stage Design - ${new Date().toLocaleDateString()}`,stage_dimensions:{width:u.width,height:u.height},stage_layout:i,mixer_configuration:c.filter(Te=>Te.assigned),setlist_data:d,created_by:24};(await fetch("/api/technical-rider/save",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(oe)})).ok?alert("Technical rider saved successfully!"):alert("Failed to save technical rider")}catch(oe){console.error("Error saving technical rider:",oe),alert("Error saving technical rider")}},de=()=>{const oe=c.filter(Ve=>Ve.assigned),ye=i.length,Te=d.reduce((Ve,zt)=>{const gs=parseInt(zt.duration.split(":")[0]||"0"),pt=parseInt(zt.duration.split(":")[1]||"0");return Ve+gs*60+pt},0),et=`
TECHNICAL RIDER - WAI'TUMUSIC PERFORMANCE

Date: ${new Date().toLocaleDateString()}
Booking ID: ${r}

STAGE SPECIFICATIONS:
- Stage Size: ${u.width}ft x ${u.height}ft
- Total Equipment Items: ${ye}
- Stage Layout: Custom design with positioned equipment

AUDIO REQUIREMENTS:
- Mixer Channels Required: ${oe.length} of 32
- Input Requirements:
${oe.map(Ve=>`  Channel ${Ve.channel}: ${Ve.instrument} (${Ve.inputType}${Ve.phantom?" +48V":""})`).join(`
`)}

SETLIST INFORMATION:
- Total Songs: ${d.length}
- Estimated Duration: ${Math.floor(Te/60)}:${(Te%60).toString().padStart(2,"0")}
- Song List:
${d.map((Ve,zt)=>`  ${zt+1}. ${Ve.songTitle||"Untitled"} - ${Ve.artist||"TBA"} (${Ve.key}, ${Ve.tempo})`).join(`
`)}

EQUIPMENT PLACEMENT:
${i.map(Ve=>`- ${Ve.name} (${Ve.type}): Position ${Ve.x},${Ve.y}`).join(`
`)}

Generated by Wai'tuMusic Technical Rider Designer
Contact: technical@waitumusic.com
    `,cs=new Blob([et],{type:"text/plain"}),ws=URL.createObjectURL(cs),fe=document.createElement("a");fe.href=ws,fe.download=`technical-rider-booking-${r}.txt`,fe.click(),URL.revokeObjectURL(ws)};return e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-emerald-50 via-purple-50 to-blue-50 p-3 sm:p-6 mobile-container",children:[e.jsxs("div",{className:"max-w-7xl mx-auto space-y-4 sm:space-y-6",children:[e.jsxs("div",{className:"text-center space-y-4 animate-fade-in-up",children:[e.jsxs("div",{className:"relative",children:[e.jsx("h1",{className:"text-3xl sm:text-4xl lg:text-5xl font-bold bg-gradient-to-r from-emerald-600 via-purple-600 to-blue-600 bg-clip-text text-transparent animate-music-note",children:" Technical Rider Studio"}),e.jsx("div",{className:"absolute -top-2 -right-2 animate-bounce",children:e.jsx("div",{className:"w-4 h-4 bg-gradient-to-r from-emerald-400 to-purple-400 rounded-full"})})]}),e.jsx("p",{className:"text-lg sm:text-xl text-gray-600 max-w-3xl mx-auto",children:"Professional technical rider creation with intelligent auto-population, revenue integration, and cross-creative industry support"}),e.jsxs("div",{className:"flex flex-col sm:flex-row justify-center items-center gap-3 sm:gap-4",children:[e.jsxs(E,{onClick:G,disabled:x,className:"w-full sm:w-auto bg-gradient-to-r from-emerald-600 to-teal-700 hover:from-emerald-700 hover:to-teal-800 text-white shadow-lg hover:shadow-xl transition-all duration-300 mobile-button",children:[x?e.jsx(En,{className:"w-4 h-4 mr-2 animate-spin"}):e.jsx(Fj,{className:"w-4 h-4 mr-2"}),"Auto-Populate from Profiles"]}),e.jsxs(E,{onClick:ie,className:"w-full sm:w-auto bg-gradient-to-r from-purple-600 to-blue-700 hover:from-purple-700 hover:to-blue-800 text-white shadow-lg hover:shadow-xl transition-all duration-300 mobile-button",children:[e.jsx(js,{className:"w-4 h-4 mr-2"}),"Save Rider"]}),e.jsxs(E,{onClick:de,variant:"outline",className:"w-full sm:w-auto border-2 border-emerald-300 text-emerald-700 hover:bg-emerald-50 hover:border-emerald-400 shadow-lg hover:shadow-xl transition-all duration-300 mobile-button",children:[e.jsx(Cs,{className:"w-4 h-4 mr-2"}),"Export Professional PDF"]})]}),x&&e.jsxs("div",{className:"max-w-md mx-auto space-y-2",children:[e.jsx(qs,{value:p,className:"h-2 bg-gray-200"}),e.jsxs("p",{className:"text-sm text-gray-600",children:["Loading artist profiles and preferences... ",p,"%"]})]})]}),e.jsxs(Ut,{defaultValue:"stageplot",className:"w-full",children:[e.jsxs(jt,{className:"grid w-full grid-cols-2 sm:grid-cols-4 bg-gradient-to-r from-emerald-100 to-purple-100 border-2 border-emerald-200 rounded-xl p-1",children:[e.jsx(Ne,{value:"stageplot",className:"data-[state=active]:bg-gradient-to-r data-[state=active]:from-emerald-600 data-[state=active]:to-teal-700 data-[state=active]:text-white transition-all duration-300 mobile-button",children:" Stage Plot Designer"}),e.jsx(Ne,{value:"mixer",className:"data-[state=active]:bg-gradient-to-r data-[state=active]:from-purple-600 data-[state=active]:to-blue-700 data-[state=active]:text-white transition-all duration-300 mobile-button",children:" Mixer & Patch"}),e.jsx(Ne,{value:"setlist",className:"data-[state=active]:bg-gradient-to-r data-[state=active]:from-orange-600 data-[state=active]:to-red-700 data-[state=active]:text-white transition-all duration-300 mobile-button",children:" Setlist Builder"}),e.jsx(Ne,{value:"overview",className:"data-[state=active]:bg-gradient-to-r data-[state=active]:from-green-600 data-[state=active]:to-emerald-700 data-[state=active]:text-white transition-all duration-300 mobile-button",children:" Technical Overview"})]}),e.jsx(ge,{value:"stageplot",className:"space-y-4 sm:space-y-6",children:e.jsxs(R,{className:"bg-gradient-to-br from-emerald-50 to-teal-50 border-emerald-200 shadow-lg",children:[e.jsx(Y,{className:"bg-gradient-to-r from-emerald-600 to-teal-700 text-white rounded-t-lg",children:e.jsxs(Q,{className:"flex items-center gap-2",children:[e.jsx("div",{className:"animate-music-note",children:""}),"Stage Plot Designer Studio"]})}),e.jsxs(L,{className:"p-4 space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-2 mb-4",children:[e.jsxs("div",{className:`p-2 rounded-lg text-center text-xs ${y.stagePlotToMixer?"bg-green-100 text-green-800":"bg-gray-100 text-gray-600"}`,children:[e.jsx(ct,{className:`w-4 h-4 mx-auto mb-1 ${y.stagePlotToMixer?"text-green-600":"text-gray-400"}`}),"StageMixer"]}),e.jsxs("div",{className:`p-2 rounded-lg text-center text-xs ${y.mixerToSetlist?"bg-green-100 text-green-800":"bg-gray-100 text-gray-600"}`,children:[e.jsx(ct,{className:`w-4 h-4 mx-auto mb-1 ${y.mixerToSetlist?"text-green-600":"text-gray-400"}`}),"MixerSetlist"]})]}),e.jsxs("div",{className:"mb-4 p-3 bg-blue-50 border border-blue-200 rounded-lg",children:[e.jsxs("h4",{className:"font-medium mb-2 text-blue-800 flex items-center gap-2",children:[" Assigned Talent (",(F==null?void 0:F.length)||0,") - Booking ID: ",r]}),K?e.jsx("p",{className:"text-sm text-blue-600",children:"Loading talent information..."}):D?e.jsxs("p",{className:"text-sm text-red-600",children:[" Error loading talent: ",D.message]}):F&&F.length>0?e.jsx("div",{className:"space-y-2",children:F.map((oe,ye)=>e.jsxs("div",{className:"flex items-center justify-between p-2 bg-white rounded border border-blue-100",children:[e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-blue-800",children:oe.name}),e.jsxs("span",{className:"text-sm text-blue-600 ml-2",children:["(",oe.role||oe.type,")"]}),oe.isPrimary&&e.jsx(X,{variant:"outline",className:"ml-2 text-xs border-emerald-500 text-emerald-700",children:"Main Booked"})]}),e.jsx("div",{className:"text-xs text-blue-500",children:oe.instruments&&oe.instruments.length>0?`${oe.instruments.length} instruments`:"No instruments"})]},oe.id||ye))}):e.jsx("p",{className:"text-sm text-orange-600",children:" No talent assigned to booking. This booking should have a main booked talent."})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-4 lg:gap-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"font-semibold text-emerald-800 flex items-center gap-2",children:" Stage Configuration"}),e.jsxs(E,{size:"sm",variant:"outline",onClick:()=>k(!0),className:"text-xs",children:[e.jsx(Xs,{className:"w-3 h-3 mr-1"}),"Templates"]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-700 mb-1 block",children:" Stage Width (ft)"}),e.jsx($,{type:"number",value:u.width,onChange:oe=>m({...u,width:oe.target.value}),className:"mobile-input",placeholder:"40"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-700 mb-1 block",children:" Stage Depth (ft)"}),e.jsx($,{type:"number",value:u.height,onChange:oe=>m({...u,height:oe.target.value}),className:"mobile-input",placeholder:"30"})]})]}),e.jsx("h3",{className:"font-semibold text-emerald-800 flex items-center gap-2 mt-6",children:" Add Stage Plot Item"}),e.jsxs("div",{className:"grid grid-cols-1 gap-2",children:[e.jsx(E,{size:"sm",variant:"outline",onClick:()=>A(!0),className:"justify-start bg-gradient-to-r from-amber-50 to-orange-50 hover:from-amber-100 hover:to-orange-100 border-amber-200 text-amber-800 hover:animate-cart-bounce transition-all duration-300",children:" Add Instrument"}),e.jsxs(E,{size:"sm",variant:"outline",onClick:()=>te("mic"),className:"justify-start bg-gradient-to-r from-blue-50 to-cyan-50 hover:from-blue-100 hover:to-cyan-100 border-blue-200 text-blue-800 hover:animate-cart-bounce transition-all duration-300",children:[e.jsx(yn,{className:"w-4 h-4 mr-2"})," Add Microphone"]}),e.jsx(E,{size:"sm",variant:"outline",onClick:()=>j(!0),className:"justify-start bg-gradient-to-r from-purple-50 to-pink-50 hover:from-purple-100 hover:to-pink-100 border-purple-200 text-purple-800 hover:animate-cart-bounce transition-all duration-300",children:" Add Monitor"}),e.jsx(E,{size:"sm",variant:"outline",onClick:()=>w(!0),className:"justify-start bg-gradient-to-r from-gray-50 to-slate-50 hover:from-gray-100 hover:to-slate-100 border-gray-200 text-gray-800 hover:animate-cart-bounce transition-all duration-300",children:" Add Stage Plot Item"}),e.jsx(E,{size:"sm",variant:"outline",onClick:()=>M(!0),className:"justify-start bg-gradient-to-r from-green-50 to-emerald-50 hover:from-green-100 hover:to-emerald-100 border-green-200 text-green-800 hover:animate-cart-bounce transition-all duration-300",children:" Add Talent"}),e.jsx(E,{size:"sm",variant:"outline",onClick:()=>W(!0),className:"justify-start bg-gradient-to-r from-blue-50 to-indigo-50 hover:from-blue-100 hover:to-indigo-100 border-blue-200 text-blue-800 hover:animate-cart-bounce transition-all duration-300",children:" Add Professional"}),e.jsx(E,{size:"sm",variant:"outline",onClick:()=>te("other"),className:"justify-start bg-gradient-to-r from-slate-50 to-zinc-50 hover:from-slate-100 hover:to-zinc-100 border-slate-200 text-slate-800 hover:animate-cart-bounce transition-all duration-300",children:" Add Other"})]}),e.jsxs("div",{className:"mt-4",children:[e.jsxs("h4",{className:"font-medium mb-2 text-emerald-800 flex items-center gap-2",children:[" Stage Plot List (",i.length,")"]}),e.jsx("div",{className:"space-y-1 max-h-40 overflow-y-auto",children:i.length===0?e.jsxs("div",{className:"text-center py-4 text-gray-500",children:[e.jsx(Ue,{className:"w-6 h-6 mx-auto mb-1 animate-music-note"}),e.jsx("p",{className:"text-xs",children:"No equipment added yet"})]}):i.map((oe,ye)=>e.jsxs("div",{className:"flex items-center justify-between p-2 bg-white rounded border border-emerald-100 shadow-sm animate-fade-in-up hover:shadow-md transition-all duration-300",style:{animationDelay:`${ye*50}ms`},children:[e.jsxs("div",{className:"flex items-center gap-2 flex-1",children:[e.jsx("div",{className:"w-3 h-3 rounded-full animate-pulse-slow",style:{backgroundColor:oe.color}}),oe.editable?e.jsx($,{value:oe.name,onChange:Te=>{const et=i.map(cs=>cs.id===oe.id?{...cs,name:Te.target.value}:cs);l(et)},onBlur:()=>{const Te=i.map(et=>et.id===oe.id?{...et,editable:!1}:et);l(Te)},className:"text-sm font-medium h-6 px-1",autoFocus:!0}):e.jsx("span",{className:"text-sm font-medium cursor-pointer hover:text-emerald-600 flex-1",onClick:()=>{const Te=i.map(et=>et.id===oe.id?{...et,editable:!0}:et);l(Te)},children:oe.name})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(X,{variant:"outline",className:"text-xs",children:oe.type}),e.jsx(E,{variant:"ghost",size:"sm",onClick:()=>l(i.filter(Te=>Te.id!==oe.id)),className:"h-6 w-6 p-0 text-red-600 hover:text-red-800 hover:bg-red-50",children:""})]})]},oe.id))})]})]}),e.jsx("div",{className:"lg:col-span-2",children:e.jsxs("div",{className:"border-2 border-dashed border-emerald-300 rounded-lg p-2 sm:p-4 bg-gradient-to-br from-emerald-25 to-teal-25 shadow-inner",children:[e.jsx("h3",{className:"font-semibold mb-4 text-emerald-800 flex items-center gap-2",children:" Interactive Stage Layout"}),e.jsx("canvas",{ref:s,width:600,height:400,className:"border-2 border-emerald-200 bg-white rounded-lg cursor-crosshair shadow-lg hover:shadow-xl transition-shadow duration-300",style:{width:"100%",maxWidth:"600px",display:"block",margin:"0 auto"}}),e.jsxs("div",{className:"mt-3 text-center",children:[e.jsxs("div",{className:"text-sm text-emerald-700 font-medium mb-1",children:["Stage Dimensions: ",u.width,"'  ",u.height,"'  Equipment: ",i.length," items"]}),e.jsx("div",{className:"text-xs text-gray-600",children:" Add equipment using buttons above   Optimized for mobile and tablet   Drag elements to reposition"})]})]})})]})]})]})}),e.jsx(ge,{value:"mixer",className:"space-y-6",children:e.jsxs(R,{children:[e.jsxs(Y,{children:[e.jsx(Q,{children:"32-Channel Mixer Configuration"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Configure input channels and routing for your performance"})]}),e.jsxs(L,{children:[e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full min-w-[1200px] text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b",children:[e.jsx("th",{className:"text-left p-2",children:"Ch"}),e.jsx("th",{className:"text-left p-2",children:"Instrument"}),e.jsx("th",{className:"text-left p-2",children:"Input"}),e.jsx("th",{className:"text-left p-2",children:"+48V"}),e.jsx("th",{className:"text-left p-2",children:"Gain"}),e.jsx("th",{className:"text-left p-2",children:"High"}),e.jsx("th",{className:"text-left p-2",children:"Mid"}),e.jsx("th",{className:"text-left p-2",children:"Low"}),e.jsx("th",{className:"text-left p-2",children:"Aux 1"}),e.jsx("th",{className:"text-left p-2",children:"Aux 2"}),e.jsx("th",{className:"text-left p-2",children:"Assigned"})]})}),e.jsx("tbody",{children:c.slice(0,16).map((oe,ye)=>e.jsxs("tr",{className:"border-b",children:[e.jsx("td",{className:"p-2 font-medium",children:oe.channel}),e.jsx("td",{className:"p-2",children:e.jsx($,{value:oe.instrument,onChange:Te=>Ge(ye,"instrument",Te.target.value),placeholder:"Instrument name",className:"w-32"})}),e.jsx("td",{className:"p-2",children:e.jsxs("select",{value:oe.inputType,onChange:Te=>Ge(ye,"inputType",Te.target.value),className:"w-20 p-1 border rounded",children:[e.jsx("option",{value:"XLR",children:"XLR"}),e.jsx("option",{value:"TRS",children:"TRS"}),e.jsx("option",{value:"RCA",children:"RCA"}),e.jsx("option",{value:"DI",children:"DI"})]})}),e.jsx("td",{className:"p-2",children:e.jsx("input",{type:"checkbox",checked:oe.phantom,onChange:Te=>Ge(ye,"phantom",Te.target.checked)})}),e.jsx("td",{className:"p-2",children:e.jsx($,{value:oe.gain,onChange:Te=>Ge(ye,"gain",Te.target.value),className:"w-16",placeholder:"0dB"})}),e.jsx("td",{className:"p-2",children:e.jsx($,{value:oe.eq.high,onChange:Te=>Ge(ye,"eq",{high:Te.target.value}),className:"w-16",placeholder:"0dB"})}),e.jsx("td",{className:"p-2",children:e.jsx($,{value:oe.eq.mid,onChange:Te=>Ge(ye,"eq",{mid:Te.target.value}),className:"w-16",placeholder:"0dB"})}),e.jsx("td",{className:"p-2",children:e.jsx($,{value:oe.eq.low,onChange:Te=>Ge(ye,"eq",{low:Te.target.value}),className:"w-16",placeholder:"0dB"})}),e.jsx("td",{className:"p-2",children:e.jsx($,{value:oe.aux[0],onChange:Te=>{const et=[...oe.aux];et[0]=Te.target.value,Ge(ye,"aux",et)},className:"w-12",placeholder:"0"})}),e.jsx("td",{className:"p-2",children:e.jsx($,{value:oe.aux[1],onChange:Te=>{const et=[...oe.aux];et[1]=Te.target.value,Ge(ye,"aux",et)},className:"w-12",placeholder:"0"})}),e.jsx("td",{className:"p-2",children:e.jsx("input",{type:"checkbox",checked:oe.assigned,onChange:Te=>Ge(ye,"assigned",Te.target.checked)})})]},oe.channel))})]})}),e.jsx("div",{className:"mt-4 p-4 bg-blue-50 rounded-lg",children:e.jsxs("p",{className:"text-sm text-blue-800",children:[e.jsx("strong",{children:"Channels 17-32:"})," Available for expansion. Only showing first 16 channels for interface simplicity. Full 32-channel configuration is saved in the technical rider."]})})]})]})}),e.jsx(ge,{value:"setlist",className:"space-y-4 sm:space-y-6",children:e.jsxs(R,{className:"bg-gradient-to-br from-orange-50 to-red-50 border-orange-200 shadow-lg",children:[e.jsx(Y,{className:"bg-gradient-to-r from-orange-600 to-red-700 text-white rounded-t-lg",children:e.jsxs(Q,{className:"flex items-center justify-between",children:[e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"animate-music-note",children:""}),"Setlist Builder Studio"]}),e.jsxs(E,{onClick:be,size:"sm",className:"bg-white text-orange-600 hover:bg-orange-50 border border-orange-200",children:[e.jsx(Ue,{className:"w-4 h-4 mr-2"}),"Add Song"]})]})}),e.jsxs(L,{className:"p-4 space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-3 mb-4",children:[e.jsxs("div",{className:"bg-white p-3 rounded-lg border border-orange-200 text-center",children:[e.jsx("div",{className:"font-semibold text-orange-800",children:d.length}),e.jsx("div",{className:"text-sm text-gray-600",children:"Songs"})]}),e.jsxs("div",{className:"bg-white p-3 rounded-lg border border-orange-200 text-center",children:[e.jsxs("div",{className:"font-semibold text-orange-800",children:[Math.floor(d.reduce((oe,ye)=>{const[Te,et]=ye.duration.split(":").map(cs=>parseInt(cs||"0"));return oe+Te*60+et},0)/60),":",(d.reduce((oe,ye)=>{const[Te,et]=ye.duration.split(":").map(cs=>parseInt(cs||"0"));return oe+Te*60+et},0)%60).toString().padStart(2,"0")]}),e.jsx("div",{className:"text-sm text-gray-600",children:"Duration"})]}),e.jsxs("div",{className:"bg-white p-3 rounded-lg border border-orange-200 text-center",children:[e.jsx("div",{className:"font-semibold text-orange-800",children:[...new Set(d.map(oe=>oe.key))].length}),e.jsx("div",{className:"text-sm text-gray-600",children:"Keys"})]}),e.jsxs("div",{className:"bg-white p-3 rounded-lg border border-orange-200 text-center",children:[e.jsxs("div",{className:"font-semibold text-orange-800",children:["$",(d.length*15).toFixed(2)]}),e.jsx("div",{className:"text-sm text-gray-600",children:"Est. Cost"})]})]}),c.filter(oe=>oe.assigned).length>0&&e.jsxs("div",{className:"bg-gradient-to-r from-emerald-100 to-teal-100 p-4 rounded-lg border border-emerald-200",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(Qa,{className:"w-4 h-4 text-emerald-600"}),e.jsx("span",{className:"font-semibold text-emerald-800",children:"Auto-Populate from Artist Catalog"})]}),e.jsxs("p",{className:"text-sm text-emerald-700 mb-3",children:[c.filter(oe=>oe.assigned).length," instruments configured in mixer. Load songs that match these instruments."]}),e.jsxs(E,{size:"sm",onClick:()=>{c.filter(ye=>ye.assigned).map(ye=>ye.instrument).filter(Boolean);const oe=[{songTitle:"Opening Anthem",artist:"Featured Artist",key:"C",tempo:"120 BPM",duration:"4:15",notes:"High energy opener",transitions:"Strong opening"},{songTitle:"Acoustic Moment",artist:"Solo Artist",key:"G",tempo:"85 BPM",duration:"3:45",notes:"Intimate acoustic",transitions:"Smooth transition"},{songTitle:"Crowd Favorite",artist:"Main Act",key:"A",tempo:"140 BPM",duration:"3:20",notes:"Singalong moment",transitions:"Build energy"},{songTitle:"Grand Finale",artist:"All Artists",key:"E",tempo:"110 BPM",duration:"5:30",notes:"Epic closer",transitions:"Grand finale"}];oe.forEach(ye=>{const Te={id:Math.random().toString(36).substr(2,9),...ye};h(et=>[...et,Te])}),t({title:"Setlist Auto-Populated",description:`Added ${oe.length} songs based on mixer configuration`})},className:"bg-emerald-600 hover:bg-emerald-700 text-white",children:[e.jsx(Fj,{className:"w-4 h-4 mr-2"}),"Auto-Populate Setlist"]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"font-semibold text-orange-800 flex items-center gap-2",children:" Song Configuration"}),d.length>0&&e.jsxs(X,{className:"bg-orange-100 text-orange-800",children:[d.length," songs configured"]})]}),d.length===0?e.jsxs("div",{className:"text-center py-12 bg-white rounded-lg border border-orange-200",children:[e.jsx("div",{className:"animate-music-note mx-auto mb-4",children:e.jsx(Ue,{className:"w-12 h-12 text-orange-300"})}),e.jsx("p",{className:"text-lg mb-2 text-orange-800 font-semibold",children:"No songs in setlist yet"}),e.jsx("p",{className:"text-sm text-gray-600 mb-4",children:'Click "Add Song" above to start building your performance setlist'}),e.jsx("div",{className:"text-xs text-gray-500",children:" Tip: Use auto-populate after configuring your mixer for smart song suggestions"})]}):d.map((oe,ye)=>e.jsx(R,{className:"bg-white border border-orange-200 shadow-sm animate-fade-in-up hover:shadow-md transition-all duration-300",style:{animationDelay:`${ye*100}ms`},children:e.jsxs(L,{className:"p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-8 h-8 rounded-full bg-gradient-to-r from-orange-500 to-red-500 text-white font-bold text-sm flex items-center justify-center animate-pulse-slow",children:ye+1}),e.jsxs("span",{className:"font-semibold text-orange-800",children:["Song #",ye+1]})]}),e.jsx(E,{variant:"ghost",size:"sm",onClick:()=>ve(oe.id),className:"text-red-600 hover:text-red-800 hover:bg-red-50",children:""})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-medium text-gray-700 mb-1 block",children:" Song Title"}),e.jsx($,{value:oe.songTitle,onChange:Te=>Ie(oe.id,"songTitle",Te.target.value),placeholder:"Enter song title",className:"mobile-input"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-medium text-gray-700 mb-1 block",children:" Artist"}),e.jsx($,{value:oe.artist,onChange:Te=>Ie(oe.id,"artist",Te.target.value),placeholder:"Artist name",className:"mobile-input"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-medium text-gray-700 mb-1 block",children:" Key"}),e.jsx("select",{value:oe.key,onChange:Te=>Ie(oe.id,"key",Te.target.value),className:"w-full p-2 border rounded mobile-input bg-white",children:["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"].map(Te=>e.jsxs("option",{value:Te,children:[Te," Major"]},Te))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-medium text-gray-700 mb-1 block",children:" Tempo"}),e.jsx($,{value:oe.tempo,onChange:Te=>Ie(oe.id,"tempo",Te.target.value),placeholder:"120 BPM",className:"mobile-input"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-medium text-gray-700 mb-1 block",children:" Duration"}),e.jsx($,{value:oe.duration,onChange:Te=>Ie(oe.id,"duration",Te.target.value),placeholder:"3:30",className:"mobile-input"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-medium text-gray-700 mb-1 block",children:" Notes"}),e.jsx($,{value:oe.notes,onChange:Te=>Ie(oe.id,"notes",Te.target.value),placeholder:"Special notes or cues",className:"mobile-input"})]})]})]})},oe.id))]})]})]})}),e.jsx(ge,{value:"overview",className:"space-y-4 sm:space-y-6",children:e.jsxs(R,{className:"bg-gradient-to-br from-green-50 to-emerald-50 border-green-200 shadow-lg",children:[e.jsx(Y,{className:"bg-gradient-to-r from-green-600 to-emerald-700 text-white rounded-t-lg",children:e.jsxs(Q,{className:"flex items-center gap-2",children:[e.jsx("div",{className:"animate-music-note",children:""}),"Professional Technical Rider Document"]})}),e.jsxs(L,{className:"p-4 space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-3",children:[e.jsxs("div",{className:"bg-white p-3 rounded-lg border border-green-200 text-center",children:[e.jsx("div",{className:"font-semibold text-green-800",children:i.length}),e.jsx("div",{className:"text-sm text-gray-600",children:"Stage Items"})]}),e.jsxs("div",{className:"bg-white p-3 rounded-lg border border-green-200 text-center",children:[e.jsx("div",{className:"font-semibold text-green-800",children:c.filter(oe=>oe.assigned).length}),e.jsx("div",{className:"text-sm text-gray-600",children:"Channels"})]}),e.jsxs("div",{className:"bg-white p-3 rounded-lg border border-green-200 text-center",children:[e.jsx("div",{className:"font-semibold text-green-800",children:d.length}),e.jsx("div",{className:"text-sm text-gray-600",children:"Songs"})]}),e.jsxs("div",{className:"bg-white p-3 rounded-lg border border-green-200 text-center",children:[e.jsxs("div",{className:"font-semibold text-green-800",children:[Math.floor(d.reduce((oe,ye)=>{const[Te,et]=ye.duration.split(":").map(cs=>parseInt(cs)||0);return oe+Te*60+et},0)/60),":",(d.reduce((oe,ye)=>{const[Te,et]=ye.duration.split(":").map(cs=>parseInt(cs)||0);return oe+Te*60+et},0)%60).toString().padStart(2,"0")]}),e.jsx("div",{className:"text-sm text-gray-600",children:"Duration"})]})]}),e.jsxs(R,{className:"bg-white border border-green-200",children:[e.jsxs(Y,{className:"bg-gradient-to-r from-green-100 to-emerald-100 border-b",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"font-bold text-green-800 text-lg",children:"TECHNICAL RIDER CONTRACT"}),e.jsx(X,{className:"bg-green-600 text-white",children:"Professional"})]}),e.jsx("p",{className:"text-sm text-gray-600",children:"Performance Technical Requirements Document"})]}),e.jsxs(L,{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"grid md:grid-cols-2 gap-6 p-4 bg-gray-50 rounded-lg",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-gray-800 mb-2",children:" SERVICE PROVIDER"}),e.jsxs("div",{className:"text-sm space-y-1",children:[e.jsx("p",{className:"font-medium",children:"Wai'tuMusic"}),e.jsx("p",{children:"31 Bath Estate, Roseau"}),e.jsx("p",{children:"St George, 00152, Dominica"})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-gray-800 mb-2",children:" PERFORMANCE DETAILS"}),e.jsxs("div",{className:"text-sm space-y-1",children:[e.jsxs("p",{children:["Contract ID: WM-TR-",new Date().getFullYear(),"-",String(Math.floor(Math.random()*1e3)).padStart(3,"0")]}),e.jsxs("p",{children:["Stage Size: ",u.width,"'  ",u.height,"'"]}),e.jsxs("p",{children:["Total Channels: ",c.filter(oe=>oe.assigned).length]}),e.jsxs("p",{children:["Performance Duration: ",Math.floor(d.reduce((oe,ye)=>{const[Te,et]=ye.duration.split(":").map(cs=>parseInt(cs)||0);return oe+Te*60+et},0)/60)," minutes"]})]})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-green-800 mb-3 flex items-center gap-2",children:" BAND MAKEUP & INSTRUMENTATION"}),e.jsx("div",{className:"bg-green-50 p-4 rounded-lg",children:e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("h5",{className:"font-medium text-gray-700 mb-2",children:"Rhythm Section Requirements:"}),e.jsxs("div",{className:"space-y-1 text-sm",children:[i.filter(oe=>oe.type==="instrument").slice(0,6).map((oe,ye)=>e.jsxs("p",{className:"flex justify-between",children:[e.jsxs("span",{children:[" ",oe.name]}),e.jsx("span",{className:"text-gray-500",children:"1"})]},ye)),e.jsx("div",{className:"border-t pt-2 mt-2",children:e.jsxs("p",{className:"flex justify-between font-medium",children:[e.jsx("span",{children:"Total Musicians:"}),e.jsx("span",{children:Math.min(i.filter(oe=>oe.type==="instrument").length,7)})]})})]})]}),e.jsxs("div",{children:[e.jsx("h5",{className:"font-medium text-gray-700 mb-2",children:"Equipment Provided by CLIENT:"}),e.jsxs("div",{className:"space-y-1 text-sm",children:[e.jsxs("p",{children:[" Performance Stage (",u.width,"'  ",u.height,"')"]}),e.jsx("p",{children:" Sound Reinforcement System"}),e.jsx("p",{children:" Stage Lighting"}),e.jsx("p",{children:" Back-line Equipment (as specified)"}),e.jsx("p",{children:" Audio/Video Recording Setup"}),e.jsx("p",{children:" Dressing Room Facilities"})]})]})]})})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-green-800 mb-3 flex items-center gap-2",children:" MIXER INPUT PATCH LIST"}),e.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg overflow-hidden",children:[e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{className:"bg-gray-100",children:e.jsxs("tr",{children:[e.jsx("th",{className:"text-left p-3 font-semibold",children:"Channel"}),e.jsx("th",{className:"text-left p-3 font-semibold",children:"Instrument/Vocal Input"}),e.jsx("th",{className:"text-left p-3 font-semibold",children:"Input Type"}),e.jsx("th",{className:"text-left p-3 font-semibold",children:"48V Power"})]})}),e.jsxs("tbody",{children:[c.filter(oe=>oe.assigned&&oe.instrument).map((oe,ye)=>e.jsxs("tr",{className:ye%2===0?"bg-green-25":"bg-white",children:[e.jsxs("td",{className:"p-3 font-mono font-bold",children:["Ch ",oe.channel]}),e.jsx("td",{className:"p-3",children:oe.instrument}),e.jsx("td",{className:"p-3",children:oe.inputType}),e.jsx("td",{className:"p-3",children:oe.phantom?" Required":" Not Required"})]},ye)),c.filter(oe=>oe.assigned&&oe.instrument).length===0&&e.jsx("tr",{children:e.jsx("td",{colSpan:4,className:"p-6 text-center text-gray-500",children:"No channels assigned. Configure mixer to see patch list."})})]})]})}),e.jsx("div",{className:"bg-gray-50 p-3 text-xs text-gray-600",children:e.jsxs("p",{children:[e.jsx("strong",{children:"Note:"})," Only assigned channels are shown above. All equipment must be set-up and tested before first rehearsal."]})})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-green-800 mb-3 flex items-center gap-2",children:" PERFORMANCE SETLIST"}),e.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg overflow-hidden",children:[e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{className:"bg-gray-100",children:e.jsxs("tr",{children:[e.jsx("th",{className:"text-left p-3 font-semibold",children:"#"}),e.jsx("th",{className:"text-left p-3 font-semibold",children:"Song Title"}),e.jsx("th",{className:"text-left p-3 font-semibold",children:"Artist/Writer"}),e.jsx("th",{className:"text-left p-3 font-semibold",children:"Key"}),e.jsx("th",{className:"text-left p-3 font-semibold",children:"Tempo"}),e.jsx("th",{className:"text-left p-3 font-semibold",children:"Duration"}),e.jsx("th",{className:"text-left p-3 font-semibold",children:"Notes"})]})}),e.jsxs("tbody",{children:[d.map((oe,ye)=>e.jsxs("tr",{className:ye%2===0?"bg-green-25":"bg-white",children:[e.jsx("td",{className:"p-3 font-bold text-green-600",children:ye+1}),e.jsx("td",{className:"p-3 font-medium",children:oe.songTitle}),e.jsx("td",{className:"p-3",children:oe.artist}),e.jsx("td",{className:"p-3 font-mono",children:oe.key}),e.jsx("td",{className:"p-3",children:oe.tempo}),e.jsx("td",{className:"p-3",children:oe.duration}),e.jsx("td",{className:"p-3 text-gray-600",children:oe.notes})]},ye)),d.length===0&&e.jsx("tr",{children:e.jsx("td",{colSpan:7,className:"p-6 text-center text-gray-500",children:"No songs in setlist. Add songs to generate performance schedule."})})]})]})}),e.jsx("div",{className:"bg-gray-50 p-3 text-xs text-gray-600",children:e.jsxs("p",{children:[e.jsx("strong",{children:"Total Performance Time:"})," Approximately ",Math.floor(d.reduce((oe,ye)=>{const[Te,et]=ye.duration.split(":").map(cs=>parseInt(cs)||0);return oe+Te*60+et},0)/60)," minutes  ",e.jsx("strong",{children:"Songs:"})," ",d.length," tracks"]})})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-green-800 mb-3 flex items-center gap-2",children:" TECHNICAL REQUIREMENTS"}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg border border-blue-200",children:[e.jsx("h5",{className:"font-medium text-blue-800 mb-2",children:" Sound Reinforcement"}),e.jsxs("div",{className:"text-sm space-y-1",children:[e.jsx("p",{children:" High-quality PA system suitable for venue"}),e.jsx("p",{children:" Wireless microphones (Shure SM58 or equivalent)"}),e.jsx("p",{children:" Wedge monitors or in-ear monitor system"}),e.jsx("p",{children:" DI boxes for all direct inputs"}),e.jsx("p",{children:" Monitor engineer during performance"})]})]}),e.jsxs("div",{className:"bg-purple-50 p-4 rounded-lg border border-purple-200",children:[e.jsx("h5",{className:"font-medium text-purple-800 mb-2",children:" Lighting Requirements"}),e.jsxs("div",{className:"text-sm space-y-1",children:[e.jsx("p",{children:" General stage wash lighting"}),e.jsx("p",{children:" Follow spot for lead artist (if applicable)"}),e.jsx("p",{children:" Color gels and pattern variety"}),e.jsx("p",{children:" Pre-hung and tested before rehearsal"}),e.jsx("p",{children:" Lighting operator during performance"})]})]})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-green-800 mb-3 flex items-center gap-2",children:" RHYTHM SECTION BACK-LINE EQUIPMENT"}),e.jsx("div",{className:"bg-orange-50 p-4 rounded-lg border border-orange-200",children:e.jsxs("div",{className:"text-sm space-y-3",children:[e.jsxs("div",{children:[e.jsx("h5",{className:"font-medium text-orange-800 mb-1",children:"Bass Equipment:"}),e.jsx("p",{children:" Aguilar Tone Hammer 500 Bass Head with 8 x 10 cabinet (preferred) or equivalent"})]}),e.jsxs("div",{children:[e.jsx("h5",{className:"font-medium text-orange-800 mb-1",children:"Guitar Equipment:"}),e.jsx("p",{children:" Fender Twin Reverb guitar amp or equivalent"})]}),e.jsxs("div",{children:[e.jsx("h5",{className:"font-medium text-orange-800 mb-1",children:"Drum Set Requirements:"}),e.jsxs("div",{className:"ml-4 space-y-1",children:[e.jsx("p",{children:' DW fusion drum kit (14" snare; 10", 12", 16" toms)'}),e.jsx("p",{children:" DW 5000 kick pedal"}),e.jsx("p",{children:' Meinl Byzance cymbals (14" hi hat, 16" crash, 17/18" crash, 8" splash, ride)'}),e.jsx("p",{children:" Five (5) cymbal stands"})]})]}),e.jsxs("div",{children:[e.jsx("h5",{className:"font-medium text-orange-800 mb-1",children:"Additional Requirements:"}),e.jsx("p",{children:" Small table for artist's tambourine and shaker"}),e.jsx("p",{children:" In-ear Monitor XLR/TRS connection for artist"})]})]})})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-green-800 mb-3 flex items-center gap-2",children:" HOSPITALITY & DRESSING ROOMS"}),e.jsx("div",{className:"bg-yellow-50 p-4 rounded-lg border border-yellow-200",children:e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("h5",{className:"font-medium text-yellow-800 mb-2",children:"Dressing Room Requirements:"}),e.jsxs("div",{className:"text-sm space-y-1",children:[e.jsx("p",{children:" One (1) dressing room for artist and band"}),e.jsx("p",{children:" Clean towels or paper towels provided"}),e.jsx("p",{children:" Mirror and adequate lighting"}),e.jsx("p",{children:" Free internet access (if available)"}),e.jsx("p",{children:" Climate controlled environment"})]})]}),e.jsxs("div",{children:[e.jsx("h5",{className:"font-medium text-yellow-800 mb-2",children:"Refreshment Requirements:"}),e.jsxs("div",{className:"text-sm space-y-1",children:[e.jsx("p",{children:" Bottles of spring water (room temperature)"}),e.jsx("p",{children:" Variety of fruit juices (orange preferred)"}),e.jsx("p",{children:" Hot water, honey, and lemon for tea"}),e.jsx("p",{children:" Coffee and basic refreshments"}),e.jsx("p",{children:" Refreshment table near dressing room area"})]})]})]})})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-green-800 mb-3 flex items-center gap-2",children:" TRANSPORTATION & TIMING"}),e.jsx("div",{className:"bg-indigo-50 p-4 rounded-lg border border-indigo-200",children:e.jsxs("div",{className:"text-sm space-y-3",children:[e.jsxs("div",{children:[e.jsx("h5",{className:"font-medium text-indigo-800 mb-1",children:"Transportation Requirements:"}),e.jsx("p",{children:" Ground transportation for artist, band, and service provider"}),e.jsx("p",{children:" Arrival minimum 30 minutes before rehearsal begins"}),e.jsx("p",{children:" Arrival minimum 60 minutes before performance"})]}),e.jsxs("div",{children:[e.jsx("h5",{className:"font-medium text-indigo-800 mb-1",children:"Rehearsal Requirements:"}),e.jsx("p",{children:" One (1) 60-minute sound check/rehearsal required"}),e.jsx("p",{children:" All equipment must be operational before rehearsal"})]}),e.jsxs("div",{children:[e.jsx("h5",{className:"font-medium text-indigo-800 mb-1",children:"Merchandise Provision:"}),e.jsx("p",{children:" Space for artist merchandise sales (if possible)"}),e.jsx("p",{children:" Opportunity for audience interaction post-performance"}),e.jsx("p",{children:" Photo and autograph opportunities as schedule permits"})]})]})})]}),e.jsxs("div",{className:"border-t pt-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[e.jsxs(E,{className:"flex-1 bg-green-600 hover:bg-green-700 text-white",children:[e.jsx(Cs,{className:"w-4 h-4 mr-2"}),"Download Professional PDF"]}),e.jsxs(E,{variant:"outline",className:"flex-1 border-green-300 text-green-700 hover:bg-green-50",children:[e.jsx(xt,{className:"w-4 h-4 mr-2"}),"Email to Venue"]}),e.jsxs(E,{variant:"outline",className:"flex-1 border-green-300 text-green-700 hover:bg-green-50",children:[e.jsx(Dy,{className:"w-4 h-4 mr-2"}),"Share Technical Rider"]})]}),e.jsx("p",{className:"text-xs text-gray-500 mt-3 text-center",children:"This professional technical rider is generated based on your stage plot, mixer configuration, and setlist. All requirements must be confirmed 60 days prior to performance date per industry standards."})]})]})]})]})]})})]})]}),b&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-md w-full mx-4",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Select Monitor Type"}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(E,{onClick:()=>ee("wedge"),className:"w-full justify-start bg-gradient-to-r from-purple-50 to-pink-50 hover:from-purple-100 hover:to-pink-100 border border-purple-200 text-purple-800",variant:"outline",children:" Wedge Monitor"}),e.jsx(E,{onClick:()=>ee("wired-iem"),className:"w-full justify-start bg-gradient-to-r from-blue-50 to-cyan-50 hover:from-blue-100 hover:to-cyan-100 border border-blue-200 text-blue-800",variant:"outline",children:" Wired In-Ear Monitor"}),e.jsx(E,{onClick:()=>ee("wireless-iem"),className:"w-full justify-start bg-gradient-to-r from-green-50 to-emerald-50 hover:from-green-100 hover:to-emerald-100 border border-green-200 text-green-800",variant:"outline",children:" Wireless In-Ear Monitor"})]}),e.jsx("div",{className:"flex gap-2 mt-4",children:e.jsx(E,{onClick:()=>j(!1),variant:"outline",className:"flex-1",children:"Cancel"})})]})}),T&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-lg w-full mx-4 max-h-96 overflow-y-auto",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Select Instrument"}),F&&F.length>0&&e.jsxs(e.Fragment,{children:[e.jsx("h4",{className:"font-medium text-sm text-emerald-700 mb-2",children:"Assigned Talent Instruments"}),e.jsx("div",{className:"space-y-2 mb-4",children:F.map((oe,ye)=>oe.instruments&&oe.instruments.length>0?e.jsxs("div",{className:"border rounded p-2 bg-emerald-50",children:[e.jsx("div",{className:"text-xs text-emerald-600 mb-1",children:oe.name}),e.jsx("div",{className:"grid grid-cols-2 gap-1",children:oe.instruments.map(Te=>e.jsxs(E,{onClick:()=>Pe(Te,oe.name),size:"sm",variant:"outline",className:"text-xs justify-start bg-emerald-100 hover:bg-emerald-200 border-emerald-300",children:[We(Te)," ",Te]},`${oe.name}-${Te}`))})]},ye):null)})]}),e.jsx("h4",{className:"font-medium text-sm text-gray-700 mb-2",children:"Standard Instruments"}),e.jsx("div",{className:"grid grid-cols-2 gap-2",children:["Piano","Guitar","Bass Guitar","Drums","Keyboard","Saxophone","Trumpet","Violin","Cello","Flute","Microphone Stand","DJ Equipment","Turntables"].map(oe=>e.jsxs(E,{onClick:()=>Pe(oe),size:"sm",variant:"outline",className:"justify-start text-xs",children:[We(oe)," ",oe]},oe))}),e.jsx("div",{className:"flex gap-2 mt-4",children:e.jsx(E,{onClick:()=>A(!1),variant:"outline",className:"flex-1",children:"Cancel"})})]})}),C&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-lg w-full mx-4 max-h-96 overflow-y-auto",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Select Stage Plot Item"}),e.jsx("div",{className:"grid grid-cols-2 gap-2",children:["Lighting Rig","Camera Mount","Video Screen","Backdrop","Riser Platform","Stage Props","Power Distribution","Cable Management","Safety Barrier","Emergency Exit","FOH Console","Recording Equipment","Photography Setup"].map(oe=>e.jsxs(E,{onClick:()=>He(oe),size:"sm",variant:"outline",className:"justify-start text-xs",children:[re(oe)," ",oe]},oe))}),e.jsx("div",{className:"flex gap-2 mt-4",children:e.jsx(E,{onClick:()=>w(!1),variant:"outline",className:"flex-1",children:"Cancel"})})]})}),P&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-lg w-full mx-4 max-h-96 overflow-y-auto",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Select Talent"}),F&&F.length>0?e.jsxs(e.Fragment,{children:[e.jsx("h4",{className:"font-medium text-sm text-blue-700 mb-2",children:"Main Booked Talent"}),e.jsx("div",{className:"space-y-2 mb-4",children:F.map((oe,ye)=>e.jsxs(E,{onClick:()=>Ye(oe.name,"main"),variant:"outline",className:"w-full justify-start bg-blue-50 hover:bg-blue-100 border-blue-200",children:[" ",oe.name," ",oe.instruments&&oe.instruments.length>0&&`(${oe.instruments.join(", ")})`]},ye))}),e.jsx("h4",{className:"font-medium text-sm text-green-700 mb-2",children:"Musicians & Support"}),e.jsx("div",{className:"grid grid-cols-1 gap-2",children:["Session Musician","Backup Singer","Sound Engineer","Stage Manager","Music Director","Guest Artist"].map(oe=>e.jsxs(E,{onClick:()=>Ye(oe,"support"),size:"sm",variant:"outline",className:"justify-start text-xs",children:[" ",oe]},oe))})]}):e.jsxs("div",{className:"text-center py-4 text-gray-500",children:[e.jsx("p",{children:"No assigned talent found for this booking"}),e.jsx("p",{className:"text-xs mt-1",children:"Add generic talent positions instead"})]}),e.jsx("div",{className:"flex gap-2 mt-4",children:e.jsx(E,{onClick:()=>M(!1),variant:"outline",className:"flex-1",children:"Cancel"})})]})}),I&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-lg w-full mx-4 max-h-96 overflow-y-auto",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Select Professional"}),e.jsx("div",{className:"grid grid-cols-2 gap-2",children:["Photographer","Videographer","Sound Engineer","Lighting Designer","Stage Manager","Production Manager","Marketing Specialist","Security","Medical Staff","Transportation Coordinator"].map(oe=>e.jsxs(E,{onClick:()=>Ke(oe),size:"sm",variant:"outline",className:"justify-start text-xs",children:[je(oe)," ",oe]},oe))}),e.jsx("div",{className:"flex gap-2 mt-4",children:e.jsx(E,{onClick:()=>W(!1),variant:"outline",className:"flex-1",children:"Cancel"})})]})}),S&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-lg w-full mx-4",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Stage Plot Templates"}),e.jsxs("div",{className:"mb-6",children:[e.jsx("h4",{className:"font-medium mb-2",children:"Save Current Setup"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx($,{placeholder:"Template name...",className:"flex-1",onKeyPress:oe=>{if(oe.key==="Enter"){const ye=oe.target;ye.value.trim()&&(ae(ye.value.trim()),ye.value="")}}}),e.jsxs(E,{onClick:()=>{const oe=document.querySelector('input[placeholder="Template name..."]');oe!=null&&oe.value.trim()&&(ae(oe.value.trim()),oe.value="")},size:"sm",children:[e.jsx(js,{className:"w-4 h-4 mr-1"}),"Save"]})]})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("h4",{className:"font-medium mb-2",children:"Load Template"}),e.jsx("div",{className:"space-y-2 max-h-40 overflow-y-auto",children:_.length===0?e.jsx("p",{className:"text-gray-500 text-sm",children:"No templates saved yet"}):_.map(oe=>e.jsxs("div",{className:"flex items-center justify-between p-2 border rounded",children:[e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:oe.name}),e.jsxs("div",{className:"text-xs text-gray-500",children:[oe.stageElements.length," items  ",new Date(oe.createdAt).toLocaleDateString()]})]}),e.jsxs("div",{className:"flex gap-1",children:[e.jsx(E,{onClick:()=>Se(oe),size:"sm",variant:"outline",children:"Load"}),e.jsx(E,{onClick:()=>B(_.filter(ye=>ye.id!==oe.id)),size:"sm",variant:"ghost",className:"text-red-600 hover:text-red-800",children:""})]})]},oe.id))})]}),e.jsx("div",{className:"flex gap-2",children:e.jsx(E,{onClick:()=>k(!1),variant:"outline",className:"flex-1",children:"Close"})})]})})]});function ee(oe){z(oe),te("monitor"),j(!1)}function ae(oe){const ye={id:Date.now().toString(),name:oe,stageSize:u,stageElements:i,assignedTalent:F,createdAt:new Date().toISOString()};B([..._,ye]),k(!1)}function Se(oe){m(oe.stageSize),l(oe.stageElements),k(!1)}function We(oe){const ye=oe.toLowerCase();return ye.includes("piano")||ye.includes("keyboard")?"":ye.includes("guitar")||ye.includes("bass")?"":ye.includes("drum")?"":ye.includes("sax")?"":ye.includes("trumpet")?"":ye.includes("violin")?"":ye.includes("mic")?"":ye.includes("dj")||ye.includes("turntable")?"":""}function re(oe){const ye=oe.toLowerCase();return ye.includes("light")?"":ye.includes("camera")?"":ye.includes("video")||ye.includes("screen")?"":ye.includes("power")?"":ye.includes("backdrop")||ye.includes("prop")?"":ye.includes("platform")||ye.includes("riser")?"":ye.includes("safety")||ye.includes("barrier")?"":ye.includes("console")||ye.includes("foh")?"":""}function je(oe){const ye=oe.toLowerCase();return ye.includes("photo")?"":ye.includes("video")?"":ye.includes("sound")||ye.includes("audio")?"":ye.includes("light")?"":ye.includes("stage")||ye.includes("production")?"":ye.includes("marketing")?"":ye.includes("security")?"":ye.includes("medical")?"":ye.includes("transport")?"":""}function Pe(oe,ye){const Te=ye?`${oe} (${ye})`:oe,et={id:Date.now().toString(),type:"instrument",name:Te,x:50+Math.random()*200,y:50+Math.random()*150,width:60,height:40,color:Ae("instrument"),editable:!1,talentId:ye,instrumentTypes:[oe]};l([...i,et]),A(!1)}function He(oe){const ye={id:Date.now().toString(),type:"equipment",name:oe,x:50+Math.random()*200,y:50+Math.random()*150,width:60,height:40,color:Ae("equipment"),editable:!1};l([...i,ye]),w(!1)}function Ye(oe,ye){const Te={id:Date.now().toString(),type:"talent",name:oe,x:50+Math.random()*200,y:50+Math.random()*150,width:50,height:50,color:ye==="main"?"#2ECC71":"#27AE60",editable:!1,talentId:oe};l([...i,Te]),M(!1)}function Ke(oe){const ye={id:Date.now().toString(),type:"other",name:oe,x:50+Math.random()*200,y:50+Math.random()*150,width:50,height:40,color:"#3498DB",editable:!1};l([...i,ye]),W(!1)}}const HZ=.05,KZ=.029;function YZ(){const{items:t,removeItem:s,updateQuantity:n,clearCart:a,getTotalPrice:r,getTotalItems:i}=Zo(),[l,c]=N.useState(!1),o=r(),d=o*HZ,h=o*KZ,u=o+d+h,m=g=>{switch(g){case"song":return e.jsx(Ue,{className:"w-4 h-4"});case"album":return e.jsx(g6,{className:"w-4 h-4"});case"merchandise":return e.jsx(Na,{className:"w-4 h-4"});default:return e.jsx(Ue,{className:"w-4 h-4"})}},p=async()=>{c(!0);try{await new Promise(g=>setTimeout(g,2e3)),alert("Payment successful! Your items will be available in your account."),a()}catch{alert("Payment failed. Please try again.")}finally{c(!1)}};return t.length===0?e.jsx("div",{className:"container mx-auto px-4 py-8",children:e.jsxs("div",{className:"max-w-2xl mx-auto text-center",children:[e.jsx(dp,{className:"w-16 h-16 mx-auto text-gray-400 mb-4"}),e.jsx("h1",{className:"text-2xl font-bold mb-2",children:"Your cart is empty"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"Browse our collection of music and merchandise to get started."}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 justify-center",children:[e.jsx(Lt,{href:"/store?filter=artists",children:e.jsx(E,{className:"w-full sm:w-auto",children:"Browse Artists"})}),e.jsx(Lt,{href:"/store?filter=music",children:e.jsx(E,{variant:"outline",className:"w-full sm:w-auto",children:"Browse Music"})}),e.jsx(Lt,{href:"/store?filter=merch",children:e.jsx(E,{variant:"outline",className:"w-full sm:w-auto",children:"Browse Merch"})})]}),e.jsx("div",{className:"flex justify-center",children:e.jsx(Lt,{href:"/store",children:e.jsx(E,{variant:"secondary",className:"w-full sm:w-auto",children:"Visit Store"})})})]})]})}):e.jsx("div",{className:"container mx-auto px-4 py-8",children:e.jsxs("div",{className:"max-w-4xl mx-auto",children:[e.jsxs("h1",{className:"text-3xl font-bold mb-8",children:["Shopping Cart (",i()," items)"]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[e.jsxs("div",{className:"lg:col-span-2 space-y-4",children:[t.map(g=>e.jsx(R,{children:e.jsx(L,{className:"p-6",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-16 h-16 bg-gray-200 rounded-lg flex items-center justify-center",children:g.imageUrl?e.jsx("img",{src:g.imageUrl,alt:g.title,className:"w-full h-full object-cover rounded-lg"}):m(g.type)}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("h3",{className:"font-medium",children:g.title}),e.jsx(X,{variant:"outline",children:g.type})]}),e.jsx("p",{className:"text-sm text-gray-600",children:g.artist}),e.jsxs("p",{className:"font-medium mt-1",children:["$",(Number(g.price)||0).toFixed(2)]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(E,{variant:"outline",size:"sm",onClick:()=>n(g.id,g.quantity-1),disabled:g.quantity<=1,children:e.jsx(lp,{className:"w-4 h-4"})}),e.jsx("span",{className:"w-8 text-center",children:g.quantity}),e.jsx(E,{variant:"outline",size:"sm",onClick:()=>n(g.id,g.quantity+1),children:e.jsx(st,{className:"w-4 h-4"})})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:"font-medium",children:["$",((Number(g.price)||0)*g.quantity).toFixed(2)]}),e.jsx(E,{variant:"ghost",size:"sm",onClick:()=>s(g.id),className:"text-red-600 hover:text-red-700 hover:bg-red-50",children:e.jsx(Vt,{className:"w-4 h-4"})})]})]})})},g.id)),e.jsx("div",{className:"flex justify-end",children:e.jsxs(E,{variant:"outline",onClick:a,className:"text-red-600 hover:text-red-700 hover:bg-red-50",children:[e.jsx(Vt,{className:"w-4 h-4 mr-2"}),"Clear Cart"]})})]}),e.jsx("div",{className:"lg:col-span-1",children:e.jsxs(R,{className:"sticky top-8",children:[e.jsx(Y,{children:e.jsx(Q,{children:"Order Summary"})}),e.jsxs(L,{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Subtotal"}),e.jsxs("span",{children:["$",o.toFixed(2)]})]}),e.jsxs("div",{className:"flex justify-between text-sm text-gray-600",children:[e.jsx("span",{children:"Platform Fee (5%)"}),e.jsxs("span",{children:["$",d.toFixed(2)]})]}),e.jsxs("div",{className:"flex justify-between text-sm text-gray-600",children:[e.jsx("span",{children:"Processing Fee (2.9%)"}),e.jsxs("span",{children:["$",h.toFixed(2)]})]}),e.jsx(ss,{}),e.jsxs("div",{className:"flex justify-between text-lg font-bold",children:[e.jsx("span",{children:"Total"}),e.jsxs("span",{children:["$",u.toFixed(2)]})]}),e.jsxs(E,{className:"w-full",onClick:p,disabled:l,children:[e.jsx(Il,{className:"w-4 h-4 mr-2"}),l?"Processing...":"Proceed to Checkout"]}),e.jsxs("div",{className:"text-xs text-gray-500 text-center",children:[e.jsx("p",{children:"Secure payment powered by Stripe"}),e.jsx("p",{className:"mt-1",children:"100% of base price goes to artists"})]})]})]})})]})]})})}function QZ({releaseType:t,releaseId:s,releaseName:n,artistName:a}){const{toast:r}=nt(),[i,l]=N.useState(!1),[c,o]=N.useState([]),[d,h]=N.useState([]),[u,m]=N.useState("curators"),[p,g]=N.useState(!1),[x,v]=N.useState({name:"",email:"",organization:"",website:"",socialMediaHandles:[],genres:[],regions:[],platforms:[],audienceSize:void 0,influenceScore:50,preferredContactMethod:"email",submissionGuidelines:"",relationshipStatus:"new"}),[y,f]=N.useState({releaseType:t==="songs"?"single":"album",submissionStrategy:"post_fan_release",daysSinceRelease:7,subject:"",message:"",personalizedNote:"",followUpCount:0,linkClicks:0});N.useEffect(()=>{i&&(b(),t&&s&&j())},[i,t,s]);const b=async()=>{g(!0);try{const P=await xe("/api/curators");o(P||[])}catch(P){console.error("Error loading curators:",P),r({title:"Error",description:"Failed to load curators",variant:"destructive"})}finally{g(!1)}},j=async()=>{if(!(!t||!s))try{const P=await xe(`/api/releases/${t}/${s}/curator-submissions`);h(P||[])}catch(P){console.error("Error loading submissions:",P),r({title:"Error",description:"Failed to load submissions",variant:"destructive"})}},S=async()=>{try{const P=await xe("/api/curators",{method:"POST",body:x});o(M=>[...M,P]),v({name:"",email:"",organization:"",website:"",socialMediaHandles:[],genres:[],regions:[],platforms:[],audienceSize:void 0,influenceScore:50,preferredContactMethod:"email",submissionGuidelines:"",relationshipStatus:"new"}),r({title:"Curator Added",description:"New curator has been added to the database"})}catch{r({title:"Error",description:"Failed to add curator",variant:"destructive"})}},k=async P=>{if(!t||!s){r({title:"No Release Selected",description:"Please select a specific release to submit to curators",variant:"destructive"});return}try{const M={...y,curatorId:P.id,submissionDate:new Date().toISOString(),subject:y.subject||`New ${t==="songs"?"Single":"Album"}: ${n} by ${a}`,message:y.message||T(P)};await xe(`/api/releases/${t}/${s}/curator-submissions`,{method:"POST",body:M}),await j(),r({title:"Submission Sent",description:`Submission sent to ${P.name}`})}catch{r({title:"Submission Failed",description:"Failed to submit to curator",variant:"destructive"})}},T=P=>{var M;return`Hello ${P.name},

I hope this email finds you well. I'm writing to introduce you to our latest ${t==="songs"?"single":"album"} "${n}" by ${a}.

${t==="songs"?"This track":"This album"} represents a unique blend of ${((M=P.genres)==null?void 0:M.slice(0,2).join(" and "))||"contemporary music"}, and I believe it would resonate well with your audience.

Key highlights:
- ${t==="songs"?"Single":"Album"}: ${n}
- Artist: ${a}
- Release Strategy: ${y.submissionStrategy==="post_fan_release"?"Post-fan release":"Pre-release exclusive"}

I've attached the ${t==="songs"?"track":"album"} for your consideration. If you'd like any additional materials or have specific requirements, please let me know.

Thank you for your time and consideration.

Best regards,
Wai'tuMusic Team`},A=P=>{switch(P){case"sent":return"bg-blue-100 text-blue-800";case"opened":return"bg-yellow-100 text-yellow-800";case"responded":return"bg-green-100 text-green-800";case"declined":return"bg-red-100 text-red-800";case"placed":return"bg-emerald-100 text-emerald-800";case"no_response":return"bg-gray-100 text-gray-800";default:return"bg-gray-100 text-gray-800"}},C=P=>{switch(P){case"sent":return e.jsx(vn,{className:"h-4 w-4"});case"opened":return e.jsx(on,{className:"h-4 w-4"});case"responded":return e.jsx(ct,{className:"h-4 w-4"});case"declined":return e.jsx(Fa,{className:"h-4 w-4"});case"placed":return e.jsx(Rt,{className:"h-4 w-4"});case"no_response":return e.jsx(Qt,{className:"h-4 w-4"});default:return e.jsx(vn,{className:"h-4 w-4"})}},w=P=>{switch(P){case"new":return"bg-blue-100 text-blue-800";case"contacted":return"bg-yellow-100 text-yellow-800";case"responsive":return"bg-green-100 text-green-800";case"partner":return"bg-emerald-100 text-emerald-800";case"inactive":return"bg-gray-100 text-gray-800";default:return"bg-gray-100 text-gray-800"}};return e.jsxs(kt,{open:i,onOpenChange:l,children:[e.jsx(ma,{asChild:!0,children:e.jsxs(E,{variant:"outline",children:[e.jsx(Ze,{className:"h-4 w-4 mr-2"}),"Curator Distribution"]})}),e.jsxs(wt,{className:"max-w-6xl max-h-[90vh] overflow-y-auto",children:[e.jsxs(St,{children:[e.jsx(Ct,{children:"Curator Distribution Management"}),n&&e.jsxs("p",{className:"text-sm text-gray-600",children:['Managing submissions for "',n,'" by ',a]})]}),e.jsxs(Ut,{value:u,onValueChange:m,className:"w-full",children:[e.jsxs(jt,{className:"grid w-full grid-cols-3",children:[e.jsxs(Ne,{value:"curators",children:[e.jsx(Ze,{className:"h-4 w-4 mr-2"}),"Curators"]}),e.jsxs(Ne,{value:"submissions",children:[e.jsx(gr,{className:"h-4 w-4 mr-2"}),"Submissions"]}),e.jsxs(Ne,{value:"campaigns",children:[e.jsx(wn,{className:"h-4 w-4 mr-2"}),"Campaigns"]})]}),e.jsxs(ge,{value:"curators",className:"space-y-4",children:[e.jsxs(R,{children:[e.jsx(Y,{children:e.jsxs(Q,{className:"text-lg flex items-center",children:[e.jsx(st,{className:"h-5 w-5 mr-2"}),"Add New Curator"]})}),e.jsxs(L,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx(q,{htmlFor:"curatorName",children:"Name/Company"}),e.jsx($,{id:"curatorName",value:x.name,onChange:P=>v(M=>({...M,name:P.target.value})),placeholder:"Curator or publication name"})]}),e.jsxs("div",{children:[e.jsx(q,{htmlFor:"curatorEmail",children:"Email"}),e.jsx($,{id:"curatorEmail",type:"email",value:x.email,onChange:P=>v(M=>({...M,email:P.target.value})),placeholder:"curator@example.com"})]}),e.jsxs("div",{children:[e.jsx(q,{htmlFor:"organization",children:"Organization"}),e.jsx($,{id:"organization",value:x.organization,onChange:P=>v(M=>({...M,organization:P.target.value})),placeholder:"Blog, Radio Station, etc."})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(q,{htmlFor:"website",children:"Website"}),e.jsx($,{id:"website",value:x.website,onChange:P=>v(M=>({...M,website:P.target.value})),placeholder:"https://example.com"})]}),e.jsxs("div",{children:[e.jsx(q,{htmlFor:"audienceSize",children:"Audience Size"}),e.jsx($,{id:"audienceSize",type:"number",value:x.audienceSize||"",onChange:P=>v(M=>({...M,audienceSize:parseInt(P.target.value)||void 0})),placeholder:"10000"})]})]}),e.jsxs("div",{children:[e.jsx(q,{htmlFor:"guidelines",children:"Submission Guidelines"}),e.jsx(mt,{id:"guidelines",value:x.submissionGuidelines,onChange:P=>v(M=>({...M,submissionGuidelines:P.target.value})),placeholder:"Special requirements, preferred formats, contact preferences...",rows:2})]}),e.jsx(E,{onClick:S,disabled:!x.name||!x.email,children:"Add Curator"})]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:c.map(P=>e.jsxs(R,{children:[e.jsx(Y,{children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{children:[e.jsx(Q,{className:"text-base",children:P.name}),P.organization&&e.jsxs("p",{className:"text-sm text-gray-600 flex items-center mt-1",children:[e.jsx(Ij,{className:"h-3 w-3 mr-1"}),P.organization]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(X,{className:w(P.relationshipStatus||"new"),children:P.relationshipStatus||"new"}),P.influenceScore&&e.jsxs(X,{variant:"outline",children:[e.jsx(Rt,{className:"h-3 w-3 mr-1"}),P.influenceScore]})]})]})}),e.jsxs(L,{children:[e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex items-center text-gray-600",children:[e.jsx(vn,{className:"h-3 w-3 mr-2"}),P.email]}),P.website&&e.jsxs("div",{className:"flex items-center text-gray-600",children:[e.jsx(is,{className:"h-3 w-3 mr-2"}),e.jsx("a",{href:P.website,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:underline",children:P.website})]}),P.audienceSize&&e.jsxs("div",{className:"flex items-center text-gray-600",children:[e.jsx(Ze,{className:"h-3 w-3 mr-2"}),P.audienceSize.toLocaleString()," audience"]})]}),e.jsxs("div",{className:"mt-3 pt-3 border-t grid grid-cols-3 gap-2 text-xs text-center",children:[e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:P.totalSubmissions||0}),e.jsx("div",{className:"text-gray-500",children:"Sent"})]}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:P.successfulPlacements||0}),e.jsx("div",{className:"text-gray-500",children:"Placed"})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"font-medium",children:[P.totalSubmissions?Math.round((P.successfulPlacements||0)/P.totalSubmissions*100):0,"%"]}),e.jsx("div",{className:"text-gray-500",children:"Success"})]})]}),t&&s&&e.jsx("div",{className:"mt-3 pt-3 border-t",children:e.jsxs(E,{size:"sm",className:"w-full",onClick:()=>k(P),children:[e.jsx(gr,{className:"h-3 w-3 mr-2"}),"Submit Release"]})})]})]},P.id))})]}),e.jsx(ge,{value:"submissions",className:"space-y-4",children:t&&s?e.jsxs("div",{className:"space-y-4",children:[e.jsxs(R,{children:[e.jsx(Y,{children:e.jsx(Q,{className:"text-lg",children:"Customize Submission"})}),e.jsxs(L,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(q,{htmlFor:"strategy",children:"Submission Strategy"}),e.jsxs(Re,{value:y.submissionStrategy,onValueChange:P=>f(M=>({...M,submissionStrategy:P})),children:[e.jsx(Me,{children:e.jsx(Oe,{})}),e.jsxs(_e,{children:[e.jsx(U,{value:"post_fan_release",children:"Post Fan Release"}),e.jsx(U,{value:"pre_release",children:"Pre-Release"}),e.jsx(U,{value:"exclusive",children:"Exclusive Preview"})]})]})]}),e.jsxs("div",{children:[e.jsx(q,{htmlFor:"daysSince",children:"Days Since Release"}),e.jsx($,{id:"daysSince",type:"number",value:y.daysSinceRelease,onChange:P=>f(M=>({...M,daysSinceRelease:parseInt(P.target.value)})),min:"0"})]})]}),e.jsxs("div",{children:[e.jsx(q,{htmlFor:"subject",children:"Email Subject"}),e.jsx($,{id:"subject",value:y.subject,onChange:P=>f(M=>({...M,subject:P.target.value})),placeholder:`New ${t==="songs"?"Single":"Album"}: ${n} by ${a}`})]}),e.jsxs("div",{children:[e.jsx(q,{htmlFor:"message",children:"Email Message"}),e.jsx(mt,{id:"message",value:y.message,onChange:P=>f(M=>({...M,message:P.target.value})),placeholder:"Write your personalized message here...",rows:6})]})]})]}),e.jsxs("div",{className:"space-y-3",children:[d.map(P=>e.jsx(R,{children:e.jsxs(L,{className:"pt-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium",children:P.curatorName}),e.jsx("p",{className:"text-sm text-gray-600",children:P.curatorOrganization})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs(X,{className:A(P.status),children:[C(P.status),e.jsx("span",{className:"ml-1",children:P.status})]}),e.jsxs("span",{className:"text-sm text-gray-500",children:[P.daysSinceRelease," days post-release"]})]})]}),e.jsxs("div",{className:"text-sm space-y-1 mb-3",children:[e.jsxs("div",{children:[e.jsx("strong",{children:"Subject:"})," ",P.subject]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Sent:"})," ",new Date(P.submissionDate).toLocaleDateString()]}),P.responseDate&&e.jsxs("div",{children:[e.jsx("strong",{children:"Responded:"})," ",new Date(P.responseDate).toLocaleDateString()]})]}),P.curatorResponse&&e.jsxs("div",{className:"mt-3 p-3 bg-gray-50 rounded",children:[e.jsx("strong",{children:"Response:"}),e.jsx("p",{className:"mt-1",children:P.curatorResponse})]}),P.placementUrl&&e.jsxs("div",{className:"mt-3 p-3 bg-green-50 rounded",children:[e.jsx("strong",{children:"Placement:"}),e.jsx("a",{href:P.placementUrl,target:"_blank",rel:"noopener noreferrer",className:"text-green-600 hover:underline ml-2",children:P.placementUrl})]}),e.jsxs("div",{className:"mt-3 flex items-center justify-between text-xs text-gray-500",children:[e.jsxs("span",{children:["Follow-ups: ",P.followUpCount]}),e.jsxs("span",{children:["Link clicks: ",P.linkClicks]})]})]})},P.id)),d.length===0&&e.jsx(R,{children:e.jsxs(L,{className:"pt-6 text-center text-gray-500",children:[e.jsx(gr,{className:"h-12 w-12 mx-auto mb-3 opacity-50"}),e.jsx("p",{children:"No submissions yet for this release"}),e.jsx("p",{className:"text-sm",children:"Use the Curators tab to submit to music curators"})]})})]})]}):e.jsx(R,{children:e.jsxs(L,{className:"pt-6 text-center text-gray-500",children:[e.jsx(on,{className:"h-12 w-12 mx-auto mb-3 opacity-50"}),e.jsx("p",{children:"No specific release selected"}),e.jsx("p",{className:"text-sm",children:"Please open this from a specific song or album to manage submissions"})]})})}),e.jsx(ge,{value:"campaigns",className:"space-y-4",children:e.jsx(R,{children:e.jsxs(L,{className:"pt-6 text-center text-gray-500",children:[e.jsx(dt,{className:"h-12 w-12 mx-auto mb-3 opacity-50"}),e.jsx("p",{children:"Email Campaigns"}),e.jsx("p",{className:"text-sm",children:"Bulk email campaign management coming soon"})]})})})]})]})]})}function ZZ(){var V,se,Z,le,ne,ue,te,Ae,Ge,be,Ie;const[t,s]=N.useState("USD"),[n,a]=N.useState("songs"),[r,i]=N.useState("random"),[l,c]=N.useState(""),[o,d]=N.useState("all"),[h,u]=N.useState("all"),[m,p]=N.useState(null),[g,x]=N.useState("content"),{addItem:v}=Zo(),{toast:y}=nt(),[f]=As(),{user:b}=_s(),j=(b==null?void 0:b.roleId)===1||(b==null?void 0:b.roleId)===2;N.useEffect(()=>{const ie=new URLSearchParams(window.location.search).get("filter");if(ie)switch(ie){case"music":a("songs");break;case"merch":case"merchandise":a("bundles");break;case"artist":case"artists":a("artists");break;default:a("songs")}},[f]);const S=ve=>{const ie=[...ve];for(let de=ie.length-1;de>0;de--){const ee=Math.floor(Math.random()*(de+1));[ie[de],ie[ee]]=[ie[ee],ie[de]]}return ie},k=(ve,ie)=>{const de=[...ve];if(ie==="artists")return de.sort((ee,ae)=>{const Se=W(ee.userId),We=W(ae.userId);if(Se&&!We)return-1;if(!Se&&We)return 1;switch(r){case"alphabetical":return ee.stageName.localeCompare(ae.stageName);case"popularity":return ee.stageName.localeCompare(ae.stageName);case"random":default:return Math.random()-.5}}),de;switch(r){case"alphabetical":return de.sort((ee,ae)=>{const Se=ie==="artists"?ee.stageName:ee.title||ee.name,We=ie==="artists"?ae.stageName:ae.title||ae.name;return Se.localeCompare(We)});case"price-low":return de.sort((ee,ae)=>{const Se=parseFloat(ee.price||"0"),We=parseFloat(ae.price||"0");return Se-We});case"price-high":return de.sort((ee,ae)=>{const Se=parseFloat(ee.price||"0");return parseFloat(ae.price||"0")-Se});case"popularity":return de.sort((ee,ae)=>{var re,je;const Se=((re=ee.artist)==null?void 0:re.stageName)||ee.stageName||"",We=((je=ae.artist)==null?void 0:je.stageName)||ae.stageName||"";return Se.localeCompare(We)});case"random":default:return S(de)}},T=(ve,ie)=>{let de=[...ve];return l&&(de=de.filter(ee=>{var Se;return(ie==="artists"?`${ee.stageName} ${ee.bio||""} ${ee.genre||""}`:`${ee.title||ee.name} ${((Se=ee.artist)==null?void 0:Se.stageName)||""} ${ee.description||""}`).toLowerCase().includes(l.toLowerCase())})),h!=="all"&&(de=de.filter(ee=>{var Se;return(ee.genre||((Se=ee.artist)==null?void 0:Se.genre)||"").toLowerCase().includes(h.toLowerCase())})),o!=="all"&&ie!=="artists"&&(de=de.filter(ee=>{const ae=parseFloat(ee.price||"0");switch(o){case"free":return ee.isFree||ae===0;case"under-10":return ae>0&&ae<10;case"under-25":return ae>=10&&ae<25;case"over-25":return ae>=25;default:return!0}})),de},A=()=>{var ie;const ve=new Set;return(ie=C==null?void 0:C.songs)==null||ie.forEach(de=>{var ee;(ee=de.artist)!=null&&ee.genre&&ve.add(de.artist.genre)}),M==null||M.forEach(de=>{de.genre&&ve.add(de.genre)}),Array.from(ve).sort()},{data:C,isLoading:w}=ke({queryKey:["/api/store-data"]}),{data:P=[]}=ke({queryKey:["/api/store-currencies"]}),{data:M=[]}=ke({queryKey:["/api/artists"]}),I=ve=>{var ee,ae;const ie=((ee=C==null?void 0:C.songs)==null?void 0:ee.filter(Se=>Se.artistUserId===ve))||[],de=((ae=C==null?void 0:C.bundles)==null?void 0:ae.filter(Se=>Se.artistUserId===ve))||[];return{songs:ie,bundles:de}},W=ve=>{const ie=I(ve);return ie.songs.length>0||ie.bundles.length>0},_=ve=>{W(ve.userId)&&(p(ve),x("content"),a("artist-detail"))},B=ve=>{p(ve),x("profile"),a("artist-detail")},O=()=>{p(null),a("artists")},z=(ve,ie)=>{if(ie==="USD")return parseFloat(ve);const de=P.find(ee=>ee.code===ie);return de?parseFloat(ve)*parseFloat(de.exchangeRate):parseFloat(ve)},F=(ve,ie)=>{const de=P.find(ae=>ae.code===ie);return`${(de==null?void 0:de.symbol)||"$"}${ve.toFixed(2)}`},K=(ve,ie)=>{const de=z(ve.price||"0",t);v({id:ve.id,name:ve.title||ve.name,price:de,type:ie,quantity:1,currency:t}),y({title:"Added to Cart",description:`${ve.title||ve.name} has been added to your cart`})},D=ve=>{if(!ve.items||ve.items.length===0)return 0;const ie=ve.items.reduce((ee,ae)=>{var Se;return(Se=ae.details)!=null&&Se.price?ee+parseFloat(ae.details.price):ee},0);let de=0;return ve.discountConditions.forEach(ee=>{ee.isActive&&(ee.discountType==="percentage"&&ee.percentageAmount?de+=ie*(parseFloat(ee.percentageAmount)/100):ee.discountType==="fixed"&&ee.fixedAmount&&(de+=parseFloat(ee.fixedAmount)))}),Math.min(de,ie*.9)},G=ve=>{if(!ve.items||ve.items.length===0)return 0;const ie=ve.items.reduce((ee,ae)=>{var Se;return(Se=ae.details)!=null&&Se.price?ee+parseFloat(ae.details.price):ee},0),de=D(ve);return Math.max(ie-de,0)},H=ve=>{if(!ve.items||ve.items.length===0)return 0;const ie=ve.items.reduce((ee,ae)=>{var Se;return(Se=ae.details)!=null&&Se.price?ee+parseFloat(ae.details.price):ee},0),de=D(ve);return ie>0?Math.round(de/ie*100):0};return w?e.jsx("div",{className:"min-h-screen bg-background",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 py-8",children:e.jsxs("div",{className:"animate-pulse",children:[e.jsx("div",{className:"h-8 bg-gray-200 rounded mb-4 w-1/4"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[...Array(6)].map((ve,ie)=>e.jsx("div",{className:"h-64 bg-gray-200 rounded-lg"},ie))})]})})}):e.jsxs("div",{className:"min-h-screen bg-background",children:[e.jsx("div",{className:"bg-gradient-to-r from-purple-900 via-blue-900 to-indigo-900 text-white",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 py-16",children:e.jsxs("div",{className:"text-center",children:[e.jsx("h1",{className:"text-4xl md:text-6xl font-bold mb-4",children:e.jsx("span",{className:"bg-gradient-to-r from-blue-400 to-purple-400 bg-clip-text text-transparent",children:"Wai'tuMusic Store"})}),e.jsx("p",{className:"text-xl text-gray-300 mb-8 max-w-2xl mx-auto",children:"Discover amazing music, exclusive merchandise, and special bundles from our talented artists"}),e.jsxs("div",{className:"flex items-center justify-center gap-4 mb-8",children:[e.jsx("span",{className:"text-sm text-gray-300",children:"Currency:"}),e.jsxs(Re,{value:t,onValueChange:s,children:[e.jsx(Me,{className:"w-32 bg-white/10 border-white/20 text-white",children:e.jsx(Oe,{})}),e.jsx(_e,{children:P.map(ve=>e.jsxs(U,{value:ve.code,children:[ve.symbol," ",ve.code]},ve.code))})]}),e.jsx(X,{variant:"secondary",className:"text-xs",children:"Payments processed in USD"})]})]})})}),e.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-8",children:[e.jsx("div",{className:"mb-8 p-6 bg-white/50 backdrop-blur-sm rounded-lg border",children:e.jsxs("div",{className:"flex flex-col lg:flex-row gap-4 items-start lg:items-center",children:[e.jsx("div",{className:"flex-1 min-w-[300px]",children:e.jsxs("div",{className:"relative",children:[e.jsx(Bs,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),e.jsx($,{placeholder:"Search songs, artists, bundles...",value:l,onChange:ve=>c(ve.target.value),className:"pl-10"})]})}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(h6,{className:"w-4 h-4 text-gray-600"}),e.jsxs(Re,{value:r,onValueChange:i,children:[e.jsx(Me,{className:"w-40",children:e.jsx(Oe,{placeholder:"Sort by"})}),e.jsxs(_e,{children:[e.jsx(U,{value:"random",children:"Random"}),e.jsx(U,{value:"alphabetical",children:"A-Z"}),e.jsx(U,{value:"popularity",children:"Popularity"}),e.jsx(U,{value:"price-low",children:"Price: Low to High"}),e.jsx(U,{value:"price-high",children:"Price: High to Low"})]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(to,{className:"w-4 h-4 text-gray-600"}),e.jsxs(Re,{value:h,onValueChange:u,children:[e.jsx(Me,{className:"w-40",children:e.jsx(Oe,{placeholder:"All Genres"})}),e.jsxs(_e,{children:[e.jsx(U,{value:"all",children:"All Genres"}),A().map(ve=>e.jsx(U,{value:ve,children:ve},ve))]})]})]}),n!=="artists"&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(It,{className:"w-4 h-4 text-gray-600"}),e.jsxs(Re,{value:o,onValueChange:d,children:[e.jsx(Me,{className:"w-40",children:e.jsx(Oe,{placeholder:"All Prices"})}),e.jsxs(_e,{children:[e.jsx(U,{value:"all",children:"All Prices"}),e.jsx(U,{value:"free",children:"Free"}),e.jsx(U,{value:"under-10",children:"Under $10"}),e.jsx(U,{value:"under-25",children:"$10 - $25"}),e.jsx(U,{value:"over-25",children:"Over $25"})]})]})]})]})}),e.jsxs(Ut,{value:n,onValueChange:a,className:"w-full",children:[e.jsxs(jt,{className:`grid w-full ${n==="artist-detail"?j?"grid-cols-6":"grid-cols-5":j?"grid-cols-5":"grid-cols-4"} mb-8`,children:[e.jsxs(Ne,{value:"songs",className:"flex items-center gap-2",children:[e.jsx(Ue,{className:"w-4 h-4"}),"Songs (",((V=C==null?void 0:C.songs)==null?void 0:V.length)||0,")"]}),e.jsxs(Ne,{value:"bundles",className:"flex items-center gap-2",children:[e.jsx(Na,{className:"w-4 h-4"}),"Bundles (",((se=C==null?void 0:C.bundles)==null?void 0:se.length)||0,")"]}),e.jsxs(Ne,{value:"artists",className:"flex items-center gap-2",children:[e.jsx(Ze,{className:"w-4 h-4"}),"Artists (",(M==null?void 0:M.length)||0,")"]}),e.jsxs(Ne,{value:"featured",className:"flex items-center gap-2",children:[e.jsx(Rt,{className:"w-4 h-4"}),"Featured"]}),j&&e.jsxs(Ne,{value:"curator-management",className:"flex items-center gap-2",children:[e.jsx(zn,{className:"w-4 h-4"}),"Curator Network"]}),n==="artist-detail"&&m&&e.jsxs(Ne,{value:"artist-detail",className:"flex items-center gap-2",children:[e.jsx(Ze,{className:"w-4 h-4"}),m.stageName]})]}),e.jsxs(ge,{value:"songs",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h2",{className:"text-2xl font-bold mb-2",children:"Music Catalog"}),e.jsx("p",{className:"text-gray-600",children:"Discover individual tracks from our amazing artists"}),e.jsxs("p",{className:"text-sm text-gray-500 mt-1",children:["Showing ",k(T((C==null?void 0:C.songs)||[],"songs"),"songs").length," of ",((Z=C==null?void 0:C.songs)==null?void 0:Z.length)||0," songs"]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:k(T((C==null?void 0:C.songs)||[],"songs"),"songs").map(ve=>{var ie,de;return e.jsxs(R,{className:"group hover:shadow-lg transition-all duration-300 hover:-translate-y-1",children:[e.jsxs(Y,{className:"p-4",children:[e.jsxs("div",{className:"aspect-square bg-gradient-to-br from-purple-400 to-blue-500 rounded-lg mb-3 flex items-center justify-center relative overflow-hidden",children:[ve.coverArtUrl?e.jsx("img",{src:ve.coverArtUrl,alt:ve.title,className:"w-full h-full object-cover"}):e.jsx(Ue,{className:"w-12 h-12 text-white"}),e.jsx("div",{className:"absolute inset-0 bg-black/40 opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center",children:e.jsx(E,{size:"sm",variant:"secondary",className:"rounded-full w-12 h-12 p-0",children:e.jsx(Gn,{className:"w-4 h-4"})})})]}),e.jsx(Q,{className:"text-sm font-medium line-clamp-2",children:ve.title}),e.jsx("p",{className:"text-xs text-gray-500",children:(ie=ve.artist)==null?void 0:ie.stageName}),((de=ve.artist)==null?void 0:de.genre)&&e.jsx(X,{variant:"outline",className:"text-xs w-fit",children:ve.artist.genre})]}),e.jsx(L,{className:"p-4 pt-0",children:e.jsxs("div",{className:"flex items-center justify-between",children:[ve.isFree?e.jsx(X,{className:"bg-green-100 text-green-800 border-green-200",children:"FREE"}):e.jsx("span",{className:"font-bold text-lg",children:F(z(ve.price,t),t)}),e.jsxs(E,{size:"sm",onClick:()=>K(ve,"song"),className:"flex items-center gap-1",children:[e.jsx(Fs,{className:"w-3 h-3"}),"Add"]})]})})]},ve.id)})})]}),e.jsxs(ge,{value:"bundles",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h2",{className:"text-2xl font-bold mb-2",children:"Special Bundles"}),e.jsx("p",{className:"text-gray-600",children:"Amazing deals combining songs and merchandise"}),e.jsxs("p",{className:"text-sm text-gray-500 mt-1",children:["Showing ",k(T((C==null?void 0:C.bundles)||[],"bundles"),"bundles").length," of ",((le=C==null?void 0:C.bundles)==null?void 0:le.length)||0," bundles"]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:k(T((C==null?void 0:C.bundles)||[],"bundles"),"bundles").map(ve=>{var ae,Se,We,re,je,Pe;const ie=((ae=ve.items)==null?void 0:ae.reduce((He,Ye)=>{var Ke;return(Ke=Ye.details)!=null&&Ke.price?He+parseFloat(Ye.details.price):He},0))||0,de=G(ve),ee=H(ve);return e.jsxs(R,{className:"group hover:shadow-lg transition-all duration-300",children:[e.jsxs(Y,{className:"p-4",children:[e.jsxs("div",{className:"aspect-video bg-gradient-to-br from-orange-400 to-pink-500 rounded-lg mb-3 flex items-center justify-center relative overflow-hidden",children:[ve.imageUrl?e.jsx("img",{src:ve.imageUrl,alt:ve.name,className:"w-full h-full object-cover"}):e.jsx(Na,{className:"w-12 h-12 text-white"}),ee>0&&e.jsx("div",{className:"absolute top-2 right-2",children:e.jsxs(X,{className:"bg-red-500 text-white",children:[ee,"% OFF"]})})]}),e.jsx(Q,{className:"text-lg font-bold",children:ve.name}),e.jsx("p",{className:"text-sm text-gray-600 line-clamp-2",children:ve.description}),e.jsxs("p",{className:"text-xs text-gray-500",children:["by ",(Se=ve.artist)==null?void 0:Se.stageName]})]}),e.jsx(L,{className:"p-4 pt-0",children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"text-sm",children:[e.jsxs("p",{className:"font-medium mb-1",children:["Includes ",((We=ve.items)==null?void 0:We.length)||0," items:"]}),e.jsxs("ul",{className:"text-xs text-gray-600",children:[(re=ve.items)==null?void 0:re.slice(0,3).map((He,Ye)=>{var Ke,oe;return e.jsxs("li",{children:[" ",((Ke=He.details)==null?void 0:Ke.title)||((oe=He.details)==null?void 0:oe.name)||"Item"]},Ye)}),((je=ve.items)==null?void 0:je.length)>3&&e.jsxs("li",{children:[" And ",ve.items.length-3," more..."]})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[ee>0&&e.jsx("p",{className:"text-xs text-gray-400 line-through",children:F(z(ie.toString(),t),t)}),e.jsx("p",{className:"font-bold text-lg",children:F(z(de.toString(),t),t)})]}),e.jsxs(E,{onClick:()=>K({...ve,price:de.toString()},"bundle"),className:"flex items-center gap-1",children:[e.jsx(zf,{className:"w-4 h-4"}),"Add Bundle"]})]}),((Pe=ve.discountConditions)==null?void 0:Pe.some(He=>He.isActive&&He.conditionType))&&e.jsx("div",{className:"mt-2",children:e.jsxs(X,{variant:"outline",className:"text-xs",children:[e.jsx(ld,{className:"w-3 h-3 mr-1"}),"Special Conditions Apply"]})})]})})]},ve.id)})})]}),e.jsxs(ge,{value:"artists",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h2",{className:"text-2xl font-bold mb-2",children:"Our Artists"}),e.jsx("p",{className:"text-gray-600",children:"Managed artists with content appear first. Click on managed artist cards to view their catalog."}),e.jsxs("p",{className:"text-sm text-gray-500 mt-1",children:["Showing ",k(T(M,"artists"),"artists").length," of ",(M==null?void 0:M.length)||0," artists"]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:k(T(M,"artists"),"artists").map(ve=>{var ie,de;return e.jsxs(R,{className:`group transition-all duration-300 hover:-translate-y-1 ${W(ve.userId)?"hover:shadow-lg cursor-pointer hover:border-blue-300":"hover:shadow-md"}`,onClick:()=>W(ve.userId)&&_(ve),children:[e.jsxs(Y,{className:"p-4",children:[e.jsxs("div",{className:"aspect-square bg-gradient-to-br from-gray-200 to-gray-300 rounded-lg mb-3 flex items-center justify-center relative overflow-hidden",children:[(ie=ve.profile)!=null&&ie.avatarUrl?e.jsx("img",{src:ve.profile.avatarUrl,alt:ve.stageName,className:"w-full h-full object-cover"}):e.jsx(Ze,{className:"w-12 h-12 text-gray-500"}),W(ve.userId)&&e.jsx("div",{className:"absolute inset-0 bg-black/20 opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center",children:e.jsx("div",{className:"bg-white/90 rounded-full p-3",children:e.jsx(Gn,{className:"w-5 h-5 text-gray-800"})})})]}),e.jsx(Q,{className:"text-sm font-medium line-clamp-2",children:ve.stageName}),ve.primaryGenre&&e.jsx(X,{variant:"outline",className:"text-xs w-fit",children:ve.primaryGenre}),((de=ve.profile)==null?void 0:de.bio)&&e.jsx("p",{className:"text-xs text-gray-500 line-clamp-2 mt-1",children:ve.profile.bio})]}),e.jsx(L,{className:"p-4 pt-0",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(E,{size:"sm",variant:"outline",className:"flex items-center gap-1 flex-1",onClick:ee=>{ee.stopPropagation(),B(ve)},children:[e.jsx(Ze,{className:"w-3 h-3"}),"View Profile"]}),e.jsxs(E,{size:"sm",variant:W(ve.userId)?"default":"outline",className:"flex items-center gap-1 flex-1",onClick:ee=>{ee.stopPropagation(),_(ve)},disabled:!W(ve.userId),children:[e.jsx(Ue,{className:"w-3 h-3"}),W(ve.userId)?"View Content":"No Content"]})]})})]},ve.userId)})})]}),m&&e.jsxs(ge,{value:"artist-detail",children:[e.jsxs("div",{className:"mb-6",children:[e.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[e.jsxs(E,{variant:"outline",size:"sm",onClick:O,className:"flex items-center gap-2",children:[e.jsx(Rn,{className:"w-4 h-4"}),"Back to Artists"]}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold",children:m.stageName}),e.jsxs("p",{className:"text-gray-600",children:[m.genre&&e.jsx(X,{variant:"outline",className:"mr-2",children:m.genre}),g==="content"?"Complete catalog and merchandise":"Artist profile and information"]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(E,{variant:g==="profile"?"default":"outline",size:"sm",onClick:()=>x("profile"),className:"flex items-center gap-2",children:[e.jsx(Ze,{className:"w-4 h-4"}),"Profile"]}),W(m.userId)&&e.jsxs(E,{variant:g==="content"?"default":"outline",size:"sm",onClick:()=>x("content"),className:"flex items-center gap-2",children:[e.jsx(Ue,{className:"w-4 h-4"}),"Content"]})]})]}),m.bio&&e.jsx("p",{className:"text-gray-600 mb-4 max-w-2xl",children:m.bio}),(()=>{const ve=I(m.userId);return e.jsxs("p",{className:"text-sm text-gray-500",children:[ve.songs.length," songs  ",ve.bundles.length," bundles available"]})})()]}),g==="profile"?e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"bg-gradient-to-r from-blue-50 to-purple-50 rounded-lg p-6",children:e.jsxs("div",{className:"flex flex-col md:flex-row gap-6",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:"w-32 h-32 bg-gradient-to-br from-gray-200 to-gray-300 rounded-lg flex items-center justify-center overflow-hidden",children:(ne=m.profile)!=null&&ne.avatarUrl?e.jsx("img",{src:m.profile.avatarUrl,alt:m.stageName,className:"w-full h-full object-cover"}):e.jsx(Ze,{className:"w-16 h-16 text-gray-500"})})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-xl font-bold mb-2",children:m.stageName}),m.primaryGenre&&e.jsx(X,{variant:"secondary",className:"mb-3",children:m.primaryGenre}),e.jsx("p",{className:"text-gray-700 mb-4",children:((ue=m.profile)==null?void 0:ue.bio)||m.bio||"Artist profile information not available."}),(()=>{const ve=I(m.userId);return e.jsxs("div",{className:"flex gap-4 text-sm text-gray-600",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(Ue,{className:"w-4 h-4"}),ve.songs.length," Songs"]}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(Na,{className:"w-4 h-4"}),ve.bundles.length," Bundles"]}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(Rt,{className:"w-4 h-4"}),W(m.userId)?"Managed Artist":"Independent Artist"]})]})})()]})]})}),m.socialMediaHandles&&m.socialMediaHandles.length>0&&e.jsxs("div",{className:"bg-white rounded-lg p-4 border",children:[e.jsxs("h4",{className:"font-medium text-gray-800 mb-3 flex items-center gap-2",children:[e.jsx(Ze,{className:"w-4 h-4"}),"Connect with ",m.stageName]}),e.jsx("div",{className:"flex flex-wrap gap-2",children:m.socialMediaHandles.map((ve,ie)=>e.jsxs("a",{href:ve.url,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-1 px-3 py-1 bg-gray-100 hover:bg-gray-200 rounded-full text-sm transition-colors",children:[e.jsx("span",{className:"capitalize",children:ve.platform}),e.jsx(zn,{className:"w-3 h-3"})]},ie))})]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[e.jsxs(R,{children:[e.jsx(Y,{children:e.jsxs(Q,{className:"flex items-center gap-2",children:[e.jsx(Ue,{className:"w-5 h-5"}),"Musical Style"]})}),e.jsx(L,{children:e.jsxs("div",{className:"space-y-3",children:[m.primaryGenre&&e.jsxs("div",{children:[e.jsx(X,{variant:"default",className:"font-bold text-base px-3 py-1 bg-blue-600 text-white",children:m.primaryGenre}),e.jsx("span",{className:"text-xs text-gray-500 ml-2",children:"Primary Genre"})]}),m.topGenres&&m.topGenres.length>0&&e.jsxs("div",{children:[e.jsx("div",{className:"flex flex-wrap gap-2 mb-1",children:m.topGenres.map((ve,ie)=>e.jsx(X,{variant:"secondary",className:"font-semibold text-sm px-2 py-1 bg-blue-100 text-blue-800",children:typeof ve=="string"?ve:ve.name},ie))}),e.jsx("span",{className:"text-xs text-gray-500",children:"Strong Genres"})]}),m.secondaryGenres&&m.secondaryGenres.length>0&&e.jsxs("div",{children:[e.jsx("div",{className:"flex flex-wrap gap-1 mb-1",children:m.secondaryGenres.map((ve,ie)=>e.jsxs(X,{variant:"outline",className:"text-xs font-normal",children:[typeof ve=="string"?ve:ve.name,typeof ve=="object"&&ve.isCustom&&e.jsx("span",{className:"ml-1",children:""})]},ie))}),e.jsx("span",{className:"text-xs text-gray-500",children:"Other Genres"})]}),!m.primaryGenre&&!((te=m.topGenres)!=null&&te.length)&&!((Ae=m.secondaryGenres)!=null&&Ae.length)&&e.jsx("div",{className:"text-center py-2",children:e.jsx("span",{className:"text-gray-400 text-xs italic",children:"No genre information available"})})]})})]}),e.jsxs(R,{children:[e.jsx(Y,{children:e.jsxs(Q,{className:"flex items-center gap-2",children:[e.jsx(Ze,{className:"w-5 h-5"}),"Artist Status"]})}),e.jsx(L,{children:e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Artist Type:"}),e.jsx(X,{variant:m.isManaged||W(m.userId)?"default":"outline",children:m.isManaged||W(m.userId)?"Managed by Wai'tuMusic":"Independent Artist"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Store Content:"}),e.jsx(X,{variant:(()=>{const ve=I(m.userId);return ve.songs.length>0||ve.bundles.length>0?"default":"secondary"})(),children:(()=>{const ve=I(m.userId),ie=ve.songs.length,de=ve.bundles.length;return ie>0&&de>0?`${ie} songs, ${de} bundles`:ie>0?`${ie} songs available`:de>0?`${de} bundles available`:"No content yet"})()})]}),(m.isManaged||W(m.userId))&&m.managementTierId&&e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Management Tier:"}),e.jsxs(X,{variant:"secondary",children:["Tier ",m.managementTierId]})]}),m.primaryGenre&&e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Primary Genre:"}),e.jsx(X,{variant:"outline",children:m.primaryGenre})]})]})})]})]}),W(m.userId)&&e.jsx(R,{className:"bg-gradient-to-r from-purple-50 to-blue-50",children:e.jsx(L,{className:"p-6",children:e.jsxs("div",{className:"text-center",children:[e.jsxs("h3",{className:"text-lg font-semibold mb-2",children:["Explore ",m.stageName,"'s Music"]}),e.jsx("p",{className:"text-gray-600 mb-4",children:(()=>{const ve=I(m.userId),ie=ve.songs.length,de=ve.bundles.length;return ie>0&&de>0?`Browse ${ie} songs and ${de} special bundles from ${m.stageName}`:ie>0?`Browse ${ie} songs from ${m.stageName}`:de>0?`Browse ${de} special bundles from ${m.stageName}`:`Explore ${m.stageName}'s music catalog`})()}),e.jsxs(E,{onClick:()=>x("content"),className:"flex items-center gap-2",children:[e.jsx(Ue,{className:"w-4 h-4"}),"View Music Catalog"]})]})})}),!W(m.userId)&&e.jsx(R,{className:"bg-gray-50",children:e.jsx(L,{className:"p-6",children:e.jsxs("div",{className:"text-center",children:[e.jsx(Ze,{className:"w-12 h-12 mx-auto text-gray-400 mb-3"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-600 mb-2",children:m.stageName}),e.jsx("p",{className:"text-gray-500",children:((Ge=m.profile)==null?void 0:Ge.bio)||m.bio||"This artist's content is not currently available in our store."})]})})})]}):(()=>{const ve=I(m.userId);return e.jsxs("div",{className:"space-y-8",children:[ve.songs.length>0&&e.jsxs("div",{children:[e.jsxs("h3",{className:"text-xl font-semibold mb-4 flex items-center gap-2",children:[e.jsx(Ue,{className:"w-5 h-5"}),"Songs (",ve.songs.length,")"]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:ve.songs.map(ie=>e.jsxs(R,{className:"group hover:shadow-lg transition-all duration-300 hover:-translate-y-1",children:[e.jsxs(Y,{className:"p-4",children:[e.jsxs("div",{className:"aspect-square bg-gradient-to-br from-purple-400 to-blue-500 rounded-lg mb-3 flex items-center justify-center relative overflow-hidden",children:[ie.coverArtUrl?e.jsx("img",{src:ie.coverArtUrl,alt:ie.title,className:"w-full h-full object-cover"}):e.jsx(Ue,{className:"w-12 h-12 text-white"}),e.jsx("div",{className:"absolute inset-0 bg-black/40 opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center",children:e.jsx(E,{size:"sm",variant:"secondary",className:"rounded-full w-12 h-12 p-0",children:e.jsx(Gn,{className:"w-4 h-4"})})})]}),e.jsx(Q,{className:"text-sm font-medium line-clamp-2",children:ie.title}),e.jsx("p",{className:"text-xs text-gray-500",children:m.stageName}),m.genre&&e.jsx(X,{variant:"outline",className:"text-xs w-fit",children:m.genre})]}),e.jsx(L,{className:"p-4 pt-0",children:e.jsxs("div",{className:"flex items-center justify-between",children:[ie.isFree?e.jsx(X,{className:"bg-green-100 text-green-800 border-green-200",children:"FREE"}):e.jsx("span",{className:"font-bold text-lg",children:F(z(ie.price,t),t)}),e.jsxs(E,{size:"sm",onClick:()=>K(ie,"song"),className:"flex items-center gap-1",children:[e.jsx(Fs,{className:"w-3 h-3"}),"Add"]})]})})]},ie.id))})]}),ve.bundles.length>0&&e.jsxs("div",{children:[e.jsxs("h3",{className:"text-xl font-semibold mb-4 flex items-center gap-2",children:[e.jsx(Na,{className:"w-5 h-5"}),"Bundles & Merchandise (",ve.bundles.length,")"]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:ve.bundles.map(ie=>{var ae,Se,We;const de=G(ie),ee=H(ie);return e.jsxs(R,{className:"group hover:shadow-lg transition-all duration-300",children:[e.jsxs(Y,{className:"p-4",children:[e.jsxs("div",{className:"aspect-video bg-gradient-to-br from-orange-400 to-pink-500 rounded-lg mb-3 flex items-center justify-center relative overflow-hidden",children:[ie.imageUrl?e.jsx("img",{src:ie.imageUrl,alt:ie.name,className:"w-full h-full object-cover"}):e.jsx(Na,{className:"w-12 h-12 text-white"}),ee>0&&e.jsx("div",{className:"absolute top-2 right-2",children:e.jsxs(X,{className:"bg-red-500 text-white",children:[ee,"% OFF"]})})]}),e.jsx(Q,{className:"text-lg font-bold",children:ie.name}),e.jsx("p",{className:"text-sm text-gray-600 line-clamp-2",children:ie.description}),e.jsxs("p",{className:"text-xs text-gray-500",children:["by ",m.stageName]})]}),e.jsx(L,{className:"p-4 pt-0",children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"text-sm",children:[e.jsxs("p",{className:"font-medium mb-1",children:["Includes ",((ae=ie.items)==null?void 0:ae.length)||0," items:"]}),e.jsxs("ul",{className:"text-xs text-gray-600",children:[(Se=ie.items)==null?void 0:Se.slice(0,3).map((re,je)=>{var Pe,He;return e.jsxs("li",{children:[" ",((Pe=re.details)==null?void 0:Pe.title)||((He=re.details)==null?void 0:He.name)||"Item"]},je)}),((We=ie.items)==null?void 0:We.length)>3&&e.jsxs("li",{children:[" And ",ie.items.length-3," more..."]})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{children:e.jsx("p",{className:"font-bold text-lg",children:F(z(de.toString(),t),t)})}),e.jsxs(E,{onClick:()=>K({...ie,price:de.toString()},"bundle"),className:"flex items-center gap-1",children:[e.jsx(zf,{className:"w-4 h-4"}),"Add Bundle"]})]})]})})]},ie.id)})})]}),ve.songs.length===0&&ve.bundles.length===0&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx(Ze,{className:"w-16 h-16 mx-auto text-gray-400 mb-4"}),e.jsx("h3",{className:"text-xl font-semibold text-gray-600 mb-2",children:"No Content Available"}),e.jsx("p",{className:"text-gray-500",children:"This artist doesn't have any songs or merchandise in the store yet."})]})]})})()]}),e.jsxs(ge,{value:"featured",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h2",{className:"text-2xl font-bold mb-2",children:"Featured Items"}),e.jsx("p",{className:"text-gray-600",children:"Handpicked favorites and trending content"})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[(be=C==null?void 0:C.songs)==null?void 0:be.slice(0,1).map(ve=>{var ie;return e.jsxs(R,{className:"relative overflow-hidden",children:[e.jsx("div",{className:"absolute top-4 left-4 z-10",children:e.jsxs(X,{className:"bg-yellow-500 text-yellow-900",children:[e.jsx(Rt,{className:"w-3 h-3 mr-1"}),"Featured"]})}),e.jsx("div",{className:"aspect-video bg-gradient-to-br from-purple-600 to-blue-600 flex items-center justify-center",children:e.jsx(Ue,{className:"w-16 h-16 text-white"})}),e.jsxs(L,{className:"p-6",children:[e.jsx("h3",{className:"text-xl font-bold mb-2",children:ve.title}),e.jsxs("p",{className:"text-gray-600 mb-4",children:["by ",(ie=ve.artist)==null?void 0:ie.stageName]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-2xl font-bold",children:ve.isFree?"FREE":F(z(ve.price,t),t)}),e.jsxs(E,{size:"lg",onClick:()=>K(ve,"song"),className:"flex items-center gap-2",children:[e.jsx(gn,{className:"w-4 h-4"}),"Add to Cart"]})]})]})]},ve.id)}),(Ie=C==null?void 0:C.bundles)==null?void 0:Ie.slice(0,1).map(ve=>{const ie=G(ve),de=H(ve);return e.jsxs(R,{className:"relative overflow-hidden",children:[e.jsx("div",{className:"absolute top-4 left-4 z-10",children:e.jsxs(X,{className:"bg-orange-500 text-orange-900",children:[e.jsx(Is,{className:"w-3 h-3 mr-1"}),"Hot Deal"]})}),e.jsx("div",{className:"aspect-video bg-gradient-to-br from-orange-600 to-pink-600 flex items-center justify-center",children:e.jsx(Na,{className:"w-16 h-16 text-white"})}),e.jsxs(L,{className:"p-6",children:[e.jsx("h3",{className:"text-xl font-bold mb-2",children:ve.name}),e.jsx("p",{className:"text-gray-600 mb-4",children:ve.description}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[de>0&&e.jsxs(X,{className:"bg-red-100 text-red-800 mb-2",children:[de,"% OFF"]}),e.jsx("p",{className:"text-2xl font-bold",children:F(z(ie.toString(),t),t)})]}),e.jsxs(E,{size:"lg",onClick:()=>K({...ve,price:ie.toString()},"bundle"),className:"flex items-center gap-2",children:[e.jsx(zf,{className:"w-4 h-4"}),"Get Bundle"]})]})]})]},ve.id)})]})]}),j&&e.jsxs(ge,{value:"curator-management",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h2",{className:"text-2xl font-bold mb-2",children:"Curator Distribution Network"}),e.jsx("p",{className:"text-gray-600",children:"Manage curator outreach and distribution campaigns for post-release promotion"})]}),e.jsx(QZ,{})]})]})]})]})}function bg(){return e.jsxs("div",{className:"container mx-auto p-6",children:[e.jsx("h1",{className:"text-3xl font-bold mb-6",children:"Admin Panel"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[e.jsxs(R,{children:[e.jsxs(Y,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(Q,{className:"text-sm font-medium",children:"User Management"}),e.jsx(Ze,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsx(L,{children:e.jsx(E,{variant:"outline",className:"w-full",children:"Manage Users"})})]}),e.jsxs(R,{children:[e.jsxs(Y,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(Q,{className:"text-sm font-medium",children:"System Settings"}),e.jsx(Gt,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsx(L,{children:e.jsx(E,{variant:"outline",className:"w-full",children:"System Config"})})]}),e.jsxs(R,{children:[e.jsxs(Y,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(Q,{className:"text-sm font-medium",children:"Database"}),e.jsx(Jn,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsx(L,{children:e.jsx(E,{variant:"outline",className:"w-full",children:"Database Tools"})})]}),e.jsxs(R,{children:[e.jsxs(Y,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(Q,{className:"text-sm font-medium",children:"Security"}),e.jsx(Bt,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsx(L,{children:e.jsx(E,{variant:"outline",className:"w-full",children:"Security Audit"})})]})]})]})}const wg=({recommendation:t,song:s,artist:n,onInteraction:a})=>{const r=async c=>{try{await xe(`/api/recommendations/${t.id}/engage`,{method:"POST",body:{engagementType:c}})}catch(o){console.error("Failed to track engagement:",o)}},i=c=>{switch(c){case"trending":return e.jsx(Is,{className:"h-4 w-4"});case"genre_based":return e.jsx(Ue,{className:"h-4 w-4"});case"similar_artist":return e.jsx(ld,{className:"h-4 w-4"});case"collaborative":return e.jsx(gn,{className:"h-4 w-4"});case"cross_promotion":return e.jsx(Ns,{className:"h-4 w-4"});default:return e.jsx(Ue,{className:"h-4 w-4"})}},l=c=>{switch(c){case"trending":return"bg-red-500/20 text-red-300 border-red-500/30";case"genre_based":return"bg-blue-500/20 text-blue-300 border-blue-500/30";case"similar_artist":return"bg-purple-500/20 text-purple-300 border-purple-500/30";case"collaborative":return"bg-pink-500/20 text-pink-300 border-pink-500/30";case"cross_promotion":return"bg-green-500/20 text-green-300 border-green-500/30";default:return"bg-gray-500/20 text-gray-300 border-gray-500/30"}};return e.jsxs(R,{className:"group hover:scale-105 transition-all duration-300 bg-black/40 backdrop-blur-lg border-white/10 hover:border-purple-500/30 hover:shadow-xl hover:shadow-purple-500/20",onMouseEnter:()=>r("viewed"),children:[e.jsx(Y,{className:"pb-3",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs(X,{variant:"outline",className:`${l(t.recommendationType)} flex items-center gap-1`,children:[i(t.recommendationType),t.recommendationType.replace("_"," ")]}),e.jsxs("div",{className:"text-sm text-gray-400",children:[Math.round(t.score*100),"% match"]})]})}),e.jsxs(L,{className:"space-y-4",children:[s&&e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"relative",children:s.coverArtUrl?e.jsx("img",{src:s.coverArtUrl,alt:s.title,className:"w-16 h-16 rounded-lg object-cover"}):e.jsx("div",{className:"w-16 h-16 rounded-lg bg-gradient-to-br from-purple-600 to-pink-600 flex items-center justify-center",children:e.jsx(Ue,{className:"h-8 w-8 text-white"})})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h3",{className:"font-semibold text-white truncate group-hover:text-purple-300 transition-colors",children:s.title}),n&&e.jsxs("p",{className:"text-sm text-gray-400 truncate",children:[n.stageName,n.genre&&e.jsx("span",{className:"ml-2 text-xs bg-white/10 px-2 py-1 rounded-full",children:n.genre})]}),e.jsx("p",{className:"text-xs text-purple-300 mt-1",children:t.reasonCode})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(E,{size:"sm",variant:"outline",className:"flex-1 bg-purple-600/20 border-purple-500/30 hover:bg-purple-600/40 text-purple-200",onClick:()=>{r("clicked"),a("play",s==null?void 0:s.id,n==null?void 0:n.userId)},children:[e.jsx(Gn,{className:"h-4 w-4 mr-2"}),"Play"]}),e.jsx(E,{size:"sm",variant:"outline",className:"bg-pink-600/20 border-pink-500/30 hover:bg-pink-600/40 text-pink-200",onClick:()=>{r("clicked"),a("like",s==null?void 0:s.id,n==null?void 0:n.userId)},children:e.jsx(gn,{className:"h-4 w-4"})}),(s==null?void 0:s.price)&&!(s!=null&&s.isFree)&&e.jsx(E,{size:"sm",variant:"outline",className:"bg-green-600/20 border-green-500/30 hover:bg-green-600/40 text-green-200",onClick:()=>{r("clicked"),a("download",s==null?void 0:s.id,n==null?void 0:n.userId)},children:e.jsx(Cs,{className:"h-4 w-4"})})]})]})]})};function XZ(){const t=Tt(),{data:s=[],isLoading:n,refetch:a}=ke({queryKey:["/api/recommendations"],enabled:!0}),{data:r=[]}=ke({queryKey:["/api/songs"],enabled:s.length>0}),{data:i=[]}=ke({queryKey:["/api/artists"],enabled:s.length>0}),{data:l=[]}=ke({queryKey:["/api/trending","weekly"],queryFn:async()=>(await xe("/api/trending?timeframe=weekly")).json()}),c=Xe({mutationFn:x=>xe("/api/interactions",{method:"POST",body:x}),onSuccess:()=>{t.invalidateQueries({queryKey:["/api/recommendations"]})}}),o=Xe({mutationFn:()=>xe("/api/recommendations/generate",{method:"POST"}),onSuccess:()=>{t.invalidateQueries({queryKey:["/api/recommendations"]}),a()}}),d=(x,v,y)=>{c.mutate({interactionType:x,songId:v,artistId:y,metadata:{source:"recommendations_page"}})},h=x=>r.find(v=>v.id===x),u=x=>i.find(v=>v.userId===x),m=s.filter(x=>["genre_based","similar_artist","collaborative"].includes(x.recommendationType)),p=s.filter(x=>x.recommendationType==="trending"),g=s.filter(x=>x.recommendationType==="cross_promotion");return n?e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-gray-900 via-purple-900/20 to-pink-900/20 p-6",children:e.jsx("div",{className:"max-w-7xl mx-auto",children:e.jsxs("div",{className:"animate-pulse space-y-6",children:[e.jsx("div",{className:"h-8 bg-white/10 rounded w-1/3"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[...Array(6)].map((x,v)=>e.jsx("div",{className:"h-48 bg-white/10 rounded-lg"},v))})]})})}):e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-gray-900 via-purple-900/20 to-pink-900/20 p-6",children:e.jsxs("div",{className:"max-w-7xl mx-auto space-y-8",children:[e.jsxs("div",{className:"text-center space-y-4",children:[e.jsx("h1",{className:"text-4xl font-bold bg-gradient-to-r from-purple-400 via-pink-400 to-blue-400 bg-clip-text text-transparent",children:"AI Music Recommendations"}),e.jsx("p",{className:"text-gray-300 text-lg max-w-2xl mx-auto",children:"Discover new music tailored to your taste with our advanced recommendation engine"}),e.jsx(E,{onClick:()=>o.mutate(),disabled:o.isPending,className:"bg-gradient-to-r from-purple-600 to-pink-600 hover:from-purple-700 hover:to-pink-700 text-white",children:o.isPending?e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Generating..."]}):e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ld,{className:"h-4 w-4"}),"Get Fresh Recommendations"]})})]}),e.jsxs(Ut,{defaultValue:"personalized",className:"w-full",children:[e.jsxs(jt,{className:"grid w-full grid-cols-3 bg-black/40 backdrop-blur-lg border-white/10",children:[e.jsxs(Ne,{value:"personalized",className:"data-[state=active]:bg-purple-600/30",children:["For You (",m.length,")"]}),e.jsxs(Ne,{value:"trending",className:"data-[state=active]:bg-red-600/30",children:["Trending (",Math.max(p.length,Array.isArray(l)?l.length:0),")"]}),e.jsxs(Ne,{value:"featured",className:"data-[state=active]:bg-green-600/30",children:["Featured (",g.length,")"]})]}),e.jsx(ge,{value:"personalized",className:"space-y-6",children:m.length>0?e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:m.map(x=>e.jsx(wg,{recommendation:x,song:x.songId?h(x.songId):void 0,artist:x.artistId?u(x.artistId):void 0,onInteraction:d},x.id))}):e.jsxs("div",{className:"text-center py-12",children:[e.jsx(Ue,{className:"h-16 w-16 mx-auto text-gray-400 mb-4"}),e.jsx("h3",{className:"text-xl font-semibold text-gray-300 mb-2",children:"No personalized recommendations yet"}),e.jsx("p",{className:"text-gray-400 mb-4",children:"Start listening to music to get personalized recommendations!"}),e.jsx(E,{onClick:()=>o.mutate(),className:"bg-purple-600 hover:bg-purple-700 text-white",children:"Generate Recommendations"})]})}),e.jsx(ge,{value:"trending",className:"space-y-6",children:Array.isArray(l)&&l.length>0?e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:l.map(x=>{const v=u(x.artistUserId),y={id:Date.now()+x.id,songId:x.id,artistId:x.artistUserId,recommendationType:"trending",score:.9,reasonCode:"Popular in store",isActive:!0,viewedAt:null,clickedAt:null,createdAt:new Date};return e.jsx(wg,{recommendation:y,song:x,artist:v,onInteraction:d},x.id)})}):e.jsxs("div",{className:"text-center py-12",children:[e.jsx(Is,{className:"h-16 w-16 mx-auto text-gray-400 mb-4"}),e.jsx("h3",{className:"text-xl font-semibold text-gray-300 mb-2",children:"No trending content yet"}),e.jsx("p",{className:"text-gray-400",children:"Check back later for trending music and artists!"})]})}),e.jsx(ge,{value:"featured",className:"space-y-6",children:g.length>0?e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:g.map(x=>e.jsx(wg,{recommendation:x,song:x.songId?h(x.songId):void 0,artist:x.artistId?u(x.artistId):void 0,onInteraction:d},x.id))}):e.jsxs("div",{className:"text-center py-12",children:[e.jsx(Ns,{className:"h-16 w-16 mx-auto text-gray-400 mb-4"}),e.jsx("h3",{className:"text-xl font-semibold text-gray-300 mb-2",children:"No featured content available"}),e.jsx("p",{className:"text-gray-400",children:"Check back later for featured artists and promotional content!"})]})})]})]})})}function JZ(){return e.jsx(XZ,{})}function eX({bookingId:t,onSave:s}){const[n,a]=N.useState("stage"),[r,i]=N.useState([]),[l,c]=N.useState([]),[o,d]=N.useState([]),[h,u]=N.useState([]),[m,p]=N.useState([]),[g,x]=N.useState(!1),[v,y]=N.useState(!1),[f,b]=N.useState(""),[j,S]=N.useState("19:00"),[k,T]=N.useState("20:30");N.useEffect(()=>{if(l.length===0){const D=Array.from({length:32},(G,H)=>({channel:H+1,instrument:"",input:"XLR",phantomPower:!1,assignedTo:""}));c(D)}},[]),N.useEffect(()=>{const D=[...l];let G=0;r.forEach(H=>{(H.type==="instrument"||H.type==="vocal")&&G<32&&(D[G]={...D[G],instrument:H.name,assignedTo:H.assignedTo||"",stageItemId:H.id,phantomPower:H.type==="vocal"},G++)}),c(D)},[r]);const A=(D,G,H)=>{const V={id:`${D}-${Date.now()}`,type:D,name:G,position:{x:Math.random()*400,y:Math.random()*300},assignedTo:H,icon:z(D)};i([...r,V]),x(!1)},C=(D,G,H,V,se)=>{const Z={id:`${D}-${Date.now()}`,type:D,name:G,email:H,transferUrl:V,uploadedFiles:[],equipment:[]};u([...h,Z]),w(Z),y(!1)},w=D=>{const G=parseInt(j.split(":")[0]),H=parseInt(k.split(":")[0]);let V="stage_lights";G>=6&&G<18?V="daylight":G>=18&&G<22?V="mixed":V="low_light";let se={};D.type==="photographer"?se=P(V,H):D.type==="videographer"?se=M(V,H):D.type==="dj"&&(se=I(V,H));const Z={professional:D.name,eventTime:j,artistPerformanceTime:k,lighting:V,recommendations:se};p(le=>[...le.filter(ne=>ne.professional!==D.name),Z])},P=(D,G)=>{const H={daylight:"ISO 100-400, f/2.8-5.6, 1/125-1/250s",stage_lights:"ISO 800-3200, f/1.4-2.8, 1/60-1/125s",low_light:"ISO 1600-6400, f/1.4-2.0, 1/30-1/60s",mixed:"ISO 400-1600, f/2.0-4.0, 1/60-1/125s"},V=["70-200mm f/2.8 lens for stage distance","24-70mm f/2.8 for crowd and wide shots","External flash with diffuser","Monopod for stability during long performances"];return G>=20&&V.push("High ISO capable camera body","Fast prime lenses (50mm f/1.4, 85mm f/1.8)"),{camera:"Full-frame DSLR/Mirrorless recommended for low light performance",settings:H[D],equipment:V,notes:`Performance at ${G}:00 - ${D.replace("_"," ")} conditions expected. Consider venue size for lens selection.`}},M=(D,G)=>{const H={daylight:"24-30fps standard, 60fps for slow motion",stage_lights:"24-30fps, avoid 60fps in low light",low_light:"24fps preferred for better light gathering",mixed:"24-30fps, adjust based on primary lighting"},V=["Tripod with fluid head for smooth pans","External audio recorder for better sound","Extra batteries (cold weather drains faster)","Multiple memory cards (64GB+ recommended)"];return G>=20&&V.push("Camera with good low-light video performance","Fast zoom lens (24-70mm f/2.8)"),{camera:"4K capable camera with good low-light video performance",settings:`${H[D]}. Manual focus for consistent shots.`,equipment:V,notes:`Performance at ${G}:00 - Plan multiple camera angles. Coordinate with lighting team for optimal exposure.`}},I=(D,G)=>{const H=["CDJ/Controller with USB and SD card backup","Professional headphones (closed-back)","Audio interface for laptop connection","Backup laptop with identical software setup"];return G>=22&&H.push("Extended battery pack for mobile setups","Portable lighting for equipment visibility"),{equipment:H,settings:"BPM matching for smooth transitions. Prepare setlist based on artist performance schedule.",notes:`Performance at ${G}:00 - Coordinate with sound engineer for optimal monitor mix. Prepare opening and closing music.`}},W=D=>{const G={id:`song-${Date.now()}`,title:D.title||"",artist:D.artist||"",key:D.key||"C",tempo:D.tempo||120,duration:D.duration||240,hasVocalRemoval:D.hasVocalRemoval||!1,audioFile:D.audioFile,youtubeUrl:D.youtubeUrl};d([...o,G])},_=async D=>{const G=o.find(H=>H.id===D);if(G)try{if((await fetch("/api/vocal-separation",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({songId:D,audioFile:G.audioFile,youtubeUrl:G.youtubeUrl})})).ok){const V=o.map(se=>se.id===D?{...se,hasVocalRemoval:!0}:se);d(V)}}catch(H){console.error("Vocal removal failed:",H)}},B=()=>{const D=[...o].sort((G,H)=>{const V=O(G.tempo,G.key),se=O(H.tempo,H.key);return V-se});d(D)},O=(D,G)=>{const H=D/200*50,V=["C","G","D","A","E"].includes(G)?25:["F","Bb","Eb","Ab","Db"].includes(G)?15:20;return H+V},z=D=>({instrument:"",vocal:"",monitor:"",equipment:""})[D]||"",F=()=>{const D=r.filter(H=>H.assignedTo).length,G=h.length;return D+G},K=async()=>{const D={bookingId:t,stageItems:r,mixerChannels:l,setlist:o,professionals:h,monitorMixes:F(),generatedAt:new Date().toISOString()};try{(await fetch("/api/technical-riders",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(D)})).ok&&s&&s(D)}catch(G){console.error("Failed to save technical rider:",G)}};return e.jsxs("div",{className:"w-full max-w-6xl mx-auto p-6 space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("h2",{className:"text-2xl font-bold flex items-center gap-2",children:[e.jsx(Ue,{className:"h-6 w-6"}),"Unified Technical Rider System"]}),e.jsx(E,{onClick:K,className:"bg-purple-600 hover:bg-purple-700",children:"Save Technical Rider"})]}),e.jsxs(Ut,{value:n,onValueChange:a,className:"w-full",children:[e.jsxs(jt,{className:"grid w-full grid-cols-4",children:[e.jsx(Ne,{value:"stage",children:"Stage Plot"}),e.jsx(Ne,{value:"mixer",children:"32-Channel Mixer"}),e.jsx(Ne,{value:"setlist",children:"Setlist Manager"}),e.jsx(Ne,{value:"professionals",children:"Media Team"})]}),e.jsx(ge,{value:"stage",className:"space-y-4",children:e.jsxs(R,{children:[e.jsx(Y,{children:e.jsxs(Q,{className:"flex items-center gap-2",children:[e.jsx(Ze,{className:"h-5 w-5"}),"Stage Plot Designer",e.jsxs(X,{variant:"outline",children:[r.length," Items"]})]})}),e.jsx(L,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs(E,{onClick:()=>x(!0),className:"mb-4",children:[e.jsx(st,{className:"h-4 w-4 mr-2"}),"Add Stage Item"]}),e.jsxs("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-4 min-h-[400px] relative bg-gray-50",children:[e.jsx("div",{className:"text-center text-gray-500 mb-4",children:"Stage View"}),r.map(D=>e.jsxs("div",{className:"absolute bg-white border rounded-lg p-2 shadow-sm cursor-move",style:{left:D.position.x,top:D.position.y},children:[e.jsxs("div",{className:"text-sm font-medium",children:[D.icon," ",D.name]}),D.assignedTo&&e.jsx("div",{className:"text-xs text-gray-600",children:D.assignedTo})]},D.id))]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(q,{children:"Instruments on Stage"}),e.jsx("div",{className:"space-y-1",children:r.filter(D=>D.type==="instrument").map(D=>e.jsxs("div",{className:"text-sm",children:[D.icon," ",D.name," - ",D.assignedTo]},D.id))})]}),e.jsxs("div",{children:[e.jsxs(q,{children:["Monitor Mixes Required: ",F()]}),e.jsx("div",{className:"text-sm text-gray-600",children:"Based on talent and professionals on stage"})]})]})]})})]})}),e.jsx(ge,{value:"mixer",className:"space-y-4",children:e.jsxs(R,{children:[e.jsx(Y,{children:e.jsxs(Q,{className:"flex items-center gap-2",children:[e.jsx(qa,{className:"h-5 w-5"}),"32-Channel Mixer & Patch List",e.jsxs(X,{variant:"outline",children:[l.filter(D=>D.instrument).length,"/32 Channels"]})]})}),e.jsx(L,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-2 max-h-96 overflow-y-auto",children:l.map(D=>e.jsxs("div",{className:"border rounded p-2 bg-gray-50",children:[e.jsxs("div",{className:"text-xs font-medium",children:["CH ",D.channel]}),e.jsx($,{placeholder:"Instrument",value:D.instrument,onChange:G=>{const H=[...l];H[D.channel-1].instrument=G.target.value,c(H)},className:"text-xs h-8 mb-1"}),e.jsx("div",{className:"text-xs text-gray-600",children:D.assignedTo}),D.phantomPower&&e.jsx(X,{variant:"secondary",className:"text-xs",children:"48V"})]},D.channel))}),e.jsxs("div",{className:"border-t pt-4",children:[e.jsx(q,{children:"Monitor Configuration"}),e.jsxs("div",{className:"grid grid-cols-3 gap-4 mt-2",children:[e.jsxs("div",{className:"text-center p-4 border rounded",children:[e.jsx(jn,{className:"h-8 w-8 mx-auto mb-2"}),e.jsx("div",{className:"text-sm font-medium",children:"Wedge Monitors"}),e.jsx("div",{className:"text-xs text-gray-600",children:Math.ceil(F()*.6)})]}),e.jsxs("div",{className:"text-center p-4 border rounded",children:[e.jsx(jn,{className:"h-8 w-8 mx-auto mb-2"}),e.jsx("div",{className:"text-sm font-medium",children:"Wired IEM"}),e.jsx("div",{className:"text-xs text-gray-600",children:Math.ceil(F()*.3)})]}),e.jsxs("div",{className:"text-center p-4 border rounded",children:[e.jsx(jn,{className:"h-8 w-8 mx-auto mb-2"}),e.jsx("div",{className:"text-sm font-medium",children:"Wireless IEM"}),e.jsx("div",{className:"text-xs text-gray-600",children:Math.ceil(F()*.1)})]})]})]})]})})]})}),e.jsx(ge,{value:"setlist",className:"space-y-4",children:e.jsxs(R,{children:[e.jsx(Y,{children:e.jsxs(Q,{className:"flex items-center gap-2",children:[e.jsx(Gn,{className:"h-5 w-5"}),"Setlist Manager",e.jsxs(X,{variant:"outline",children:[o.length," Songs"]})]})}),e.jsx(L,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(E,{onClick:()=>{const D=prompt("Song Title:"),G=prompt("Artist:");D&&G&&W({title:D,artist:G})},children:[e.jsx(st,{className:"h-4 w-4 mr-2"}),"Add Song"]}),e.jsx(E,{onClick:B,variant:"outline",children:"Generate Energy Flow"})]}),e.jsx("div",{className:"space-y-2",children:o.map((D,G)=>e.jsx("div",{className:"border rounded p-3 bg-gray-50",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"font-medium",children:[G+1,". ",D.title]}),e.jsxs("div",{className:"text-sm text-gray-600",children:[D.artist,"  ",D.key,"  ",D.tempo," BPM  ",Math.floor(D.duration/60),":",(D.duration%60).toString().padStart(2,"0")]})]}),e.jsxs("div",{className:"flex gap-2",children:[!D.hasVocalRemoval&&e.jsx(E,{size:"sm",variant:"outline",onClick:()=>_(D.id),children:"Remove Vocals (DJ)"}),D.hasVocalRemoval&&e.jsx(X,{variant:"secondary",children:"Vocal Removed"})]})]})},D.id))}),o.length>0&&e.jsxs("div",{className:"border-t pt-4",children:[e.jsx(q,{children:"Setlist Statistics"}),e.jsxs("div",{className:"grid grid-cols-3 gap-4 mt-2",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-lg font-bold",children:Math.floor(o.reduce((D,G)=>D+G.duration,0)/60)}),e.jsx("div",{className:"text-xs text-gray-600",children:"Total Minutes"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-lg font-bold",children:Math.round(o.reduce((D,G)=>D+G.tempo,0)/o.length)}),e.jsx("div",{className:"text-xs text-gray-600",children:"Avg BPM"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-lg font-bold",children:o.filter(D=>D.hasVocalRemoval).length}),e.jsx("div",{className:"text-xs text-gray-600",children:"Vocal Removed"})]})]})]})]})})]})}),e.jsxs(ge,{value:"professionals",className:"space-y-4",children:[e.jsxs(R,{children:[e.jsx(Y,{children:e.jsxs(Q,{className:"flex items-center gap-2",children:[e.jsx(Qt,{className:"h-5 w-5"}),"Event Timing & Schedule"]})}),e.jsx(L,{children:e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(q,{htmlFor:"event-time",children:"Event Start Time"}),e.jsx($,{id:"event-time",type:"time",value:j,onChange:D=>{S(D.target.value),h.forEach(G=>w(G))}})]}),e.jsxs("div",{children:[e.jsx(q,{htmlFor:"performance-time",children:"Artist Performance Time"}),e.jsx($,{id:"performance-time",type:"time",value:k,onChange:D=>{T(D.target.value),h.forEach(G=>w(G))}})]})]})})]}),e.jsxs(R,{children:[e.jsx(Y,{children:e.jsxs(Q,{className:"flex items-center gap-2",children:[e.jsx(Vi,{className:"h-5 w-5"}),"Media Team & Professionals",e.jsxs(X,{variant:"outline",children:[h.length," Team Members"]})]})}),e.jsx(L,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs(E,{onClick:()=>y(!0),children:[e.jsx(st,{className:"h-4 w-4 mr-2"}),"Add Team Member"]}),e.jsx("div",{className:"grid gap-4",children:h.map(D=>e.jsx("div",{className:"border rounded p-4 bg-gray-50",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2",children:[D.type==="photographer"&&e.jsx(Vi,{className:"h-4 w-4"}),D.type==="videographer"&&e.jsx(ca,{className:"h-4 w-4"}),D.type==="dj"&&e.jsx(jn,{className:"h-4 w-4"}),e.jsx("span",{className:"font-medium",children:D.name}),e.jsx(X,{variant:"outline",children:D.type})]}),e.jsx("div",{className:"text-sm text-gray-600 mt-1",children:D.email}),D.transferUrl&&e.jsxs("div",{className:"flex items-center gap-1 mt-1",children:[e.jsx(zn,{className:"h-3 w-3"}),e.jsx("a",{href:D.transferUrl,target:"_blank",rel:"noopener noreferrer",className:"text-xs text-blue-600 hover:underline",children:"Transfer Link"})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(E,{size:"sm",variant:"outline",onClick:()=>{const G=m.find(H=>H.professional===D.name);G&&alert(`Equipment Recommendations for ${D.name}:

${JSON.stringify(G.recommendations,null,2)}`)},children:[e.jsx(Gt,{className:"h-3 w-3 mr-1"}),"View Recommendations"]}),e.jsxs(E,{size:"sm",variant:"outline",children:[e.jsx(Xs,{className:"h-3 w-3 mr-1"}),"Upload Files"]})]})]})},D.id))}),m.length>0&&e.jsxs(R,{children:[e.jsx(Y,{children:e.jsxs(Q,{className:"flex items-center gap-2",children:[e.jsx(Bl,{className:"h-5 w-5"}),"Equipment & Settings Guidance"]})}),e.jsx(L,{children:e.jsx("div",{className:"space-y-4",children:m.map((D,G)=>e.jsxs("div",{className:"border rounded p-4 bg-blue-50",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(X,{variant:"secondary",children:D.professional}),e.jsxs(X,{variant:"outline",children:["Event: ",D.eventTime]}),e.jsxs(X,{variant:"outline",children:["Performance: ",D.artistPerformanceTime]}),e.jsx(X,{variant:"outline",children:D.lighting.replace("_"," ")})]}),D.recommendations.camera&&e.jsxs("div",{className:"mb-2",children:[e.jsx("strong",{children:"Camera:"})," ",D.recommendations.camera]}),D.recommendations.settings&&e.jsxs("div",{className:"mb-2",children:[e.jsx("strong",{children:"Settings:"})," ",D.recommendations.settings]}),D.recommendations.equipment&&e.jsxs("div",{className:"mb-2",children:[e.jsx("strong",{children:"Equipment:"}),e.jsx("ul",{className:"list-disc list-inside ml-4 text-sm",children:D.recommendations.equipment.map((H,V)=>e.jsx("li",{children:H},V))})]}),D.recommendations.notes&&e.jsxs("div",{className:"text-sm text-gray-600 bg-white p-2 rounded border-l-4 border-blue-400",children:[e.jsx("strong",{children:"Notes:"})," ",D.recommendations.notes]})]},G))})})]})]})})]})]})]}),e.jsx(kt,{open:g,onOpenChange:x,children:e.jsxs(wt,{children:[e.jsx(St,{children:e.jsx(Ct,{children:"Add Stage Item"})}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(q,{children:"Type"}),e.jsxs(Re,{value:f,onValueChange:b,children:[e.jsx(Me,{children:e.jsx(Oe,{placeholder:"Select type"})}),e.jsxs(_e,{children:[e.jsx(U,{value:"instrument",children:" Instrument"}),e.jsx(U,{value:"vocal",children:" Vocal"}),e.jsx(U,{value:"monitor",children:" Monitor"}),e.jsx(U,{value:"equipment",children:" Equipment"})]})]})]}),e.jsxs("div",{children:[e.jsx(q,{children:"Name"}),e.jsx($,{id:"itemName",placeholder:"e.g., Electric Guitar, Lead Vocal"})]}),e.jsxs("div",{children:[e.jsx(q,{children:"Assigned To"}),e.jsx($,{id:"assignedTo",placeholder:"Artist/Musician name"})]}),e.jsx(E,{onClick:()=>{var H,V;const D=(H=document.getElementById("itemName"))==null?void 0:H.value,G=(V=document.getElementById("assignedTo"))==null?void 0:V.value;f&&D&&A(f,D,G)},children:"Add Item"})]})]})}),e.jsx(kt,{open:v,onOpenChange:y,children:e.jsxs(wt,{children:[e.jsx(St,{children:e.jsx(Ct,{children:"Add Team Member"})}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(q,{children:"Type"}),e.jsxs(Re,{value:f,onValueChange:b,children:[e.jsx(Me,{children:e.jsx(Oe,{placeholder:"Select type"})}),e.jsxs(_e,{children:[e.jsx(U,{value:"photographer",children:" Photographer"}),e.jsx(U,{value:"videographer",children:" Videographer"}),e.jsx(U,{value:"dj",children:" DJ"})]})]})]}),e.jsxs("div",{children:[e.jsx(q,{children:"Name"}),e.jsx($,{id:"professionalName",placeholder:"Professional name"})]}),e.jsxs("div",{children:[e.jsx(q,{children:"Email"}),e.jsx($,{id:"professionalEmail",type:"email",placeholder:"contact@example.com"})]}),e.jsxs("div",{children:[e.jsx(q,{children:"Transfer URL (Optional)"}),e.jsx($,{id:"transferUrl",placeholder:"swisstransfer.com/... or wetransfer.com/..."})]}),e.jsx(E,{onClick:()=>{var V,se,Z;const D=(V=document.getElementById("professionalName"))==null?void 0:V.value,G=(se=document.getElementById("professionalEmail"))==null?void 0:se.value,H=(Z=document.getElementById("transferUrl"))==null?void 0:Z.value;f&&D&&G&&C(f,D,G,H||void 0)},children:"Add Team Member"})]})]})})]})}function tX({bookingId:t,onStatusChange:s}){var A;const{toast:n}=nt(),[a,r]=N.useState(null),[i,l]=N.useState(!0),[c,o]=N.useState([]),[d,h]=N.useState(!1),u=C=>{switch(C){case"approval":return"Click the action button to approve this booking. Once approved, you can assign musicians.";case"assignment":return"After approval, click to open the musician assignment interface to select performers.";case"technical_rider":return"Generates a technical specifications document using artist and musician profile data.";case"contracts":return"Creates Booking Agreement and Performance Agreement documents with all booking details.";case"signatures":return"Initiates the digital signature collection process for all parties involved.";case"payment":return"Processes the final payment for the booking after all signatures are collected.";case"receipt":return"Generates final receipt and completion documents for the booking.";default:return""}};N.useEffect(()=>{m()},[t]);const m=async()=>{try{const C=await xe(`/api/bookings/${t}/workflow`);if(C.ok){const w=await C.json();r(w),p(w)}}catch{n({title:"Error",description:"Failed to load booking workflow data.",variant:"destructive"})}finally{l(!1)}},p=C=>{var P,M,I,W,_,B,O,z,F,K,D,G,H,V,se;const w=[{id:"approval",title:"Admin Approval",description:"Booking reviewed and approved by administrator",status:C.status==="pending"?"pending":"completed",icon:e.jsx(ct,{className:"h-5 w-5"}),action:C.status==="pending"?()=>g():void 0},{id:"assignment",title:"Musician Assignment",description:"Assign managed musicians to the booking",status:((P=C.assignedMusicians)==null?void 0:P.length)>0?"completed":C.status==="approved"?"in_progress":"pending",icon:e.jsx(Ze,{className:"h-5 w-5"}),action:C.status==="approved"?()=>x():void 0},{id:"technical_rider",title:"Technical Rider Creation",description:"Auto-generate technical specifications from profiles",status:(M=C.contracts)!=null&&M.some(Z=>Z.documentType==="technical_rider")?"completed":((I=C.assignedMusicians)==null?void 0:I.length)>0?"in_progress":"pending",icon:e.jsx(xt,{className:"h-5 w-5"}),action:((W=C.assignedMusicians)==null?void 0:W.length)>0?()=>v():void 0},{id:"contracts",title:"Contract Generation",description:"Generate artist-specific Booking Agreement",status:((_=C.contracts)==null?void 0:_.length)>=2?"completed":(B=C.contracts)!=null&&B.some(Z=>Z.documentType==="technical_rider")?"in_progress":"pending",icon:e.jsx(xt,{className:"h-5 w-5"}),action:(O=C.contracts)!=null&&O.some(Z=>Z.documentType==="technical_rider")?()=>f():void 0},{id:"signatures",title:"Signature Collection",description:"Collect signatures from all parties",status:((z=C.signatures)==null?void 0:z.length)>=3?"completed":((F=C.contracts)==null?void 0:F.length)>=3?"in_progress":"pending",icon:e.jsx(go,{className:"h-5 w-5"}),action:((K=C.contracts)==null?void 0:K.length)>=3?()=>b():void 0},{id:"payment",title:"Payment Processing",description:"Process final payment for the booking",status:(D=C.payments)!=null&&D.some(Z=>Z.paymentStatus==="completed")?"completed":((G=C.signatures)==null?void 0:G.length)>=3?"in_progress":"pending",icon:e.jsx(Il,{className:"h-5 w-5"}),action:((H=C.signatures)==null?void 0:H.length)>=3?()=>j():void 0},{id:"receipt",title:"Receipt Generation",description:"Generate final receipt and completion documents",status:(V=C.payments)!=null&&V.some(Z=>Z.paymentStatus==="completed")?"completed":"pending",icon:e.jsx(Cs,{className:"h-5 w-5"}),action:(se=C.payments)!=null&&se.some(Z=>Z.paymentStatus==="completed")?()=>S():void 0}];o(w)},g=async()=>{try{(await xe(`/api/bookings/${t}/approve`,{method:"POST"})).ok&&(n({title:"Booking Approved",description:"The booking has been approved and is ready for musician assignment."}),m(),s==null||s("approved"))}catch{n({title:"Error",description:"Failed to approve booking.",variant:"destructive"})}},x=async()=>{try{n({title:"Musician Assignment",description:"Opening musician assignment interface..."})}catch{n({title:"Error",description:"Failed to open musician assignment.",variant:"destructive"})}},v=()=>{h(!0)},y=async C=>{try{(await xe(`/api/bookings/${t}/save-technical-rider`,{method:"POST",body:JSON.stringify(C)})).ok&&(n({title:"Technical Rider Saved",description:"Unified technical rider configuration has been saved successfully."}),h(!1),m())}catch{n({title:"Error",description:"Failed to save technical rider.",variant:"destructive"})}},f=async()=>{try{const C=await xe(`/api/bookings/${t}/booking-agreement`);if(C.ok){const w=await C.blob(),P=window.URL.createObjectURL(w),M=document.createElement("a");M.href=P,M.download=`booking-agreement-${t}.pdf`,M.click(),window.URL.revokeObjectURL(P),n({title:"Booking Agreement Generated",description:"Artist-specific booking agreement has been created and downloaded."}),m()}}catch{n({title:"Error",description:"Failed to generate booking agreement.",variant:"destructive"})}},b=async()=>{try{(await xe(`/api/bookings/${t}/initiate-signatures`,{method:"POST"})).ok&&(n({title:"Signatures Initiated",description:"Signature requests have been sent to all parties."}),m())}catch{n({title:"Error",description:"Failed to initiate signatures.",variant:"destructive"})}},j=async()=>{try{n({title:"Payment Processing",description:"Opening payment interface..."})}catch{n({title:"Error",description:"Failed to process payment.",variant:"destructive"})}},S=async()=>{try{const C=await xe(`/api/bookings/${t}/generate-receipt`,{method:"POST"});if(C.ok){const w=await C.blob(),P=window.URL.createObjectURL(w),M=document.createElement("a");M.href=P,M.download=`booking-${t}-receipt.pdf`,M.click(),n({title:"Receipt Generated",description:"Final receipt has been generated and downloaded."}),m()}}catch{n({title:"Error",description:"Failed to generate receipt.",variant:"destructive"})}},k=C=>{switch(C){case"completed":return"bg-green-100 text-green-800";case"in_progress":return"bg-blue-100 text-blue-800";case"failed":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},T=()=>c.filter(w=>w.status==="completed").length/c.length*100;return i?e.jsx(R,{children:e.jsx(L,{className:"flex items-center justify-center p-8",children:e.jsx("div",{className:"animate-spin w-8 h-8 border-4 border-primary border-t-transparent rounded-full"})})}):a?e.jsxs("div",{className:"space-y-6",children:[e.jsxs(R,{children:[e.jsx(Y,{children:e.jsxs(Q,{className:"flex items-center justify-between",children:[e.jsx("span",{children:"Booking Workflow"}),e.jsx(X,{className:k(a.status),children:a.status.replace("_"," ").toUpperCase()})]})}),e.jsx(L,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(dt,{className:"h-4 w-4 text-muted-foreground"}),e.jsx("span",{className:"text-sm",children:a.eventName})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Qt,{className:"h-4 w-4 text-muted-foreground"}),e.jsx("span",{className:"text-sm",children:new Date(a.eventDate).toLocaleDateString()})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ue,{className:"h-4 w-4 text-muted-foreground"}),e.jsx("span",{className:"text-sm",children:(A=a.primaryArtist)==null?void 0:A.stageName})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{children:"Overall Progress"}),e.jsxs("span",{children:[Math.round(T()),"%"]})]}),e.jsx(qs,{value:T(),className:"h-2"})]})]})})]}),e.jsx("div",{className:"space-y-4",children:c.map((C,w)=>e.jsx(R,{className:C.status==="completed"?"bg-green-50":"",children:e.jsxs(L,{className:"p-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:`p-2 rounded-full ${C.status==="completed"?"bg-green-100 text-green-600":C.status==="in_progress"?"bg-blue-100 text-blue-600":C.status==="failed"?"bg-red-100 text-red-600":"bg-gray-100 text-gray-600"}`,children:C.icon}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium",children:C.title}),e.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:C.description}),e.jsx("div",{className:"bg-blue-50 border-l-4 border-blue-400 p-2 rounded-r-lg",children:e.jsx("p",{className:"text-xs text-blue-700",children:u(C.id)})})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(X,{className:k(C.status),children:C.status.replace("_"," ")}),C.action&&C.status!=="completed"&&e.jsx(E,{size:"sm",onClick:C.action,children:C.status==="pending"?"Start":"Continue"})]})]}),w<c.length-1&&e.jsx("div",{className:"ml-6 mt-4",children:e.jsx(ss,{orientation:"vertical",className:"h-6"})})]})},C.id))}),a.contracts&&a.contracts.length>0&&e.jsxs(R,{children:[e.jsx(Y,{children:e.jsx(Q,{children:"Generated Documents"})}),e.jsx(L,{children:e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:a.contracts.map(C=>e.jsxs("div",{className:"border rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(xt,{className:"h-4 w-4"}),e.jsx("span",{className:"font-medium text-sm",children:C.documentType.replace("_"," ").replace(/\b\w/g,w=>w.toUpperCase())})]}),e.jsx(X,{className:k(C.status),children:C.status})]}),e.jsxs(E,{size:"sm",variant:"outline",className:"w-full",children:[e.jsx(Cs,{className:"h-3 w-3 mr-1"}),"Download PDF"]})]},C.id))})})]}),e.jsx(kt,{open:d,onOpenChange:h,children:e.jsxs(wt,{className:"max-w-7xl h-[90vh] overflow-y-auto",children:[e.jsx(St,{children:e.jsx(Ct,{children:"Unified Technical Rider Designer"})}),e.jsx(eX,{bookingId:t.toString(),onSave:y})]})})]}):e.jsx(R,{children:e.jsx(L,{className:"flex items-center justify-center p-8",children:e.jsxs("div",{className:"text-center",children:[e.jsx(on,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),e.jsx("p",{className:"text-muted-foreground",children:"Booking not found or access denied."})]})})})}const Aa=()=>{try{return NL().toast.duration||500}catch{return 500}},Ci={SUCCESS:{SAVE:{title:"Success",description:"Technical rider saved successfully",get duration(){return Aa()}},EXPORT:{title:"Success",description:"Technical rider PDF exported successfully",get duration(){return Aa()}},LOAD:{title:"Technical Rider Loaded",description:"Enhanced technical rider loaded successfully",get duration(){return Aa()}},SETLIST_LOAD:{title:"Setlist Loaded",description:"Setlist template loaded successfully",get duration(){return Aa()}},ASSIGNMENT_CREATED:{title:"Assignment Created",description:"Talent assigned successfully",get duration(){return Aa()}},BOOKING_UPDATED:{title:"Booking Updated",description:"Booking information updated successfully",get duration(){return Aa()}}},ERROR:{CANNOT_REMOVE:{title:"Cannot Remove",description:"Main Booked Talent cannot be removed from the technical rider",variant:"destructive",get duration(){return Aa()}},SAVE_FAILED:{title:"Save Failed",description:"Failed to save technical rider",variant:"destructive",get duration(){return Aa()}},EXPORT_FAILED:{title:"Export Failed",description:"Failed to export technical rider PDF",variant:"destructive",get duration(){return Aa()}},EXPORT_FAILED_WITH_MESSAGE:t=>({title:"Export Failed",description:t||"Failed to export PDF",variant:"destructive",duration:Aa()}),ASSIGNMENT_FAILED:{title:"Assignment Failed",description:"Failed to assign talent to booking",variant:"destructive",get duration(){return Aa()}},BOOKING_UPDATE_FAILED:{title:"Update Failed",description:"Failed to update booking information",variant:"destructive",get duration(){return Aa()}}},INFO:{MANUAL_SETUP:{title:"Manual Setup Recommended",description:"Use the tabs below to configure your technical rider sections manually for precise control.",get duration(){return Aa()}},LOADING:{title:"Loading",description:"Please wait while we process your request",get duration(){return Aa()}}}},al={TABS:{OVERVIEW:"overview",BAND_MAKEUP:"band-makeup",STAGE_PLOT:"stage-plot",MIXER_PATCH:"mixer-patch",SETLIST:"setlist",REQUIREMENTS:"requirements",CONTRACTS:"contracts"},MEMBERSHIP_TYPES:{BAND:"BAND",TEAM:"TEAM",MANAGEMENT:"MANAGEMENT"},ROLE_PRIORITIES:{PRIMARY:1,ASSIGNED:2,ASSIGNMENT:3,AVAILABLE:4,GENERIC:5}},A1=[{id:"kick",name:"Kick Drum",type:"acoustic",requiresMic:!0,requiresChannel:!0,requiresDI:!1,isSelected:!0,channelName:"Kick",micType:"dynamic"},{id:"kick-inner",name:"Kick Mic Inner",type:"acoustic",requiresMic:!0,requiresChannel:!0,requiresDI:!1,isSelected:!1,channelName:"Kick In",micType:"dynamic"},{id:"snare-top",name:"Snare Top",type:"acoustic",requiresMic:!0,requiresChannel:!0,requiresDI:!1,isSelected:!0,channelName:"Snare",micType:"dynamic"},{id:"snare-bottom",name:"Snare Bottom",type:"acoustic",requiresMic:!0,requiresChannel:!0,requiresDI:!1,isSelected:!1,channelName:"Snare Btm",micType:"condenser"},{id:"hi-hat",name:"Hi-Hat",type:"acoustic",requiresMic:!0,requiresChannel:!0,requiresDI:!1,isSelected:!0,channelName:"Hi-Hat",micType:"condenser"},{id:"high-tom",name:"High Tom",type:"acoustic",requiresMic:!0,requiresChannel:!0,requiresDI:!1,isSelected:!0,channelName:"Tom 1",micType:"dynamic"},{id:"mid-tom",name:"Mid Tom",type:"acoustic",requiresMic:!0,requiresChannel:!0,requiresDI:!1,isSelected:!0,channelName:"Tom 2",micType:"dynamic"},{id:"floor-tom",name:"Floor Tom",type:"acoustic",requiresMic:!0,requiresChannel:!0,requiresDI:!1,isSelected:!0,channelName:"Floor Tom",micType:"dynamic"},{id:"overhead-l",name:"Overhead L",type:"acoustic",requiresMic:!0,requiresChannel:!0,requiresDI:!1,isSelected:!0,channelName:"OH L",micType:"condenser"},{id:"overhead-r",name:"Overhead R",type:"acoustic",requiresMic:!0,requiresChannel:!0,requiresDI:!1,isSelected:!0,channelName:"OH R",micType:"condenser"},{id:"crash",name:"Crash Cymbal",type:"acoustic",requiresMic:!1,requiresChannel:!1,requiresDI:!1,isSelected:!1,channelName:"",notes:"Picked up by overheads"},{id:"ride",name:"Ride Cymbal",type:"acoustic",requiresMic:!1,requiresChannel:!1,requiresDI:!1,isSelected:!1,channelName:"",notes:"Picked up by overheads"},{id:"ride-bell",name:"Ride Bell",type:"acoustic",requiresMic:!0,requiresChannel:!0,requiresDI:!1,isSelected:!1,channelName:"Ride Bell",micType:"condenser"}];function sX({isOpen:t,onClose:s,onConfirm:n,performerName:a,performerId:r,existingConfig:i,userInstruments:l=[]}){const{toast:c}=nt(),[o,d]=N.useState({id:(i==null?void 0:i.id)||Date.now().toString(),performerName:a,performerId:r,kitType:(i==null?void 0:i.kitType)||"acoustic",components:(i==null?void 0:i.components)||[...A1],totalChannels:0,setupNotes:(i==null?void 0:i.setupNotes)||""}),[h,u]=N.useState([]),[m,p]=N.useState([]);N.useEffect(()=>{t&&(async()=>{try{const S=await fetch("/api/instruments");if(S.ok){const T=(await S.json()).filter(w=>w.mixer_group==="DRUMS"||w.mixer_group==="PERCUSSION");p(T);const C=l.filter(w=>T.some(P=>P.name.toLowerCase().includes(w.toLowerCase())||w.toLowerCase().includes(P.name.toLowerCase()))).filter(w=>!A1.some(P=>P.name.toLowerCase().includes(w.toLowerCase()))).map(w=>({id:`user-${w.replace(/\s+/g,"-").toLowerCase()}`,name:w,type:"acoustic",requiresMic:!0,requiresChannel:!0,requiresDI:!1,isSelected:!0,channelName:w,micType:"dynamic"}));u(C)}}catch(S){console.error("Error fetching drum instruments:",S)}})()},[t,l]),N.useEffect(()=>{const j=[...o.components,...h].filter(S=>S.isSelected&&S.requiresChannel).length;d(S=>({...S,totalChannels:j}))},[o.components,h]);const g=(j,S)=>{d(k=>({...k,components:k.components.map(T=>T.id===j?{...T,...S}:T)}))},x=(j,S)=>{u(k=>k.map(T=>T.id===j?{...T,...S}:T))},v=()=>{const j={id:`custom-${Date.now()}`,name:"Custom Component",type:"acoustic",requiresMic:!0,requiresChannel:!0,requiresDI:!1,isSelected:!0,channelName:"Custom",micType:"dynamic"};u(S=>[...S,j])},y=j=>{u(S=>S.filter(k=>k.id!==j))},f=()=>{const j={...o,components:[...o.components,...h]};n(j),c({title:"Drum Kit Configured",description:`${j.totalChannels} channels configured for ${a}`}),s()},b=[...o.components,...h].filter(j=>j.isSelected&&j.requiresChannel).length;return e.jsx(kt,{open:t,onOpenChange:s,children:e.jsxs(wt,{className:"max-w-4xl max-h-[90vh] overflow-y-auto",children:[e.jsx(St,{children:e.jsxs(Ct,{className:"flex items-center gap-2",children:[e.jsx(Ue,{className:"h-5 w-5"}),"Configure Drum Kit - ",a]})}),e.jsxs(Ut,{defaultValue:"standard",className:"mt-4",children:[e.jsxs(jt,{className:"grid w-full grid-cols-3",children:[e.jsx(Ne,{value:"standard",children:"Standard Kit"}),e.jsx(Ne,{value:"additional",children:"Additional/Custom"}),e.jsx(Ne,{value:"summary",children:"Summary"})]}),e.jsx(ge,{value:"standard",className:"space-y-4",children:e.jsxs(R,{children:[e.jsx(Y,{children:e.jsxs(Q,{className:"flex items-center gap-2",children:[e.jsx(Gt,{className:"h-4 w-4"}),"Standard Drum Kit Components"]})}),e.jsx(L,{className:"space-y-3",children:o.components.map(j=>e.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(hs,{checked:j.isSelected,onCheckedChange:S=>g(j.id,{isSelected:!!S})}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:j.name}),e.jsxs("div",{className:"text-sm text-muted-foreground",children:[j.requiresMic&&e.jsx(X,{variant:"outline",className:"mr-1",children:"Mic"}),j.requiresChannel&&e.jsx(X,{variant:"outline",className:"mr-1",children:"Channel"}),j.requiresDI&&e.jsx(X,{variant:"outline",children:"DI"})]})]})]}),j.isSelected&&j.requiresChannel&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(q,{className:"text-sm",children:"Channel:"}),e.jsx($,{value:j.channelName||"",onChange:S=>g(j.id,{channelName:S.target.value}),className:"w-24 h-8",placeholder:"Name"}),j.requiresMic&&e.jsxs("select",{value:j.micType||"dynamic",onChange:S=>g(j.id,{micType:S.target.value}),className:"text-sm border rounded px-2 py-1",children:[e.jsx("option",{value:"dynamic",children:"Dynamic"}),e.jsx("option",{value:"condenser",children:"Condenser"}),e.jsx("option",{value:"contact",children:"Contact"})]})]})]},j.id))})]})}),e.jsx(ge,{value:"additional",className:"space-y-4",children:e.jsxs(R,{children:[e.jsx(Y,{children:e.jsxs(Q,{className:"flex items-center justify-between",children:[e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx(qa,{className:"h-4 w-4"}),"Performer's Additional Instruments"]}),e.jsx(E,{onClick:v,size:"sm",children:"Add Custom"})]})}),e.jsxs(L,{className:"space-y-3",children:[h.map(j=>e.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg bg-blue-50 dark:bg-blue-900/20",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(hs,{checked:j.isSelected,onCheckedChange:S=>x(j.id,{isSelected:!!S})}),e.jsxs("div",{children:[e.jsx($,{value:j.name,onChange:S=>x(j.id,{name:S.target.value}),className:"font-medium mb-1"}),e.jsxs("div",{className:"flex gap-1",children:[e.jsxs("label",{className:"flex items-center gap-1 text-sm",children:[e.jsx(hs,{checked:j.requiresMic,onCheckedChange:S=>x(j.id,{requiresMic:!!S})}),"Mic Required"]}),e.jsxs("label",{className:"flex items-center gap-1 text-sm",children:[e.jsx(hs,{checked:j.requiresChannel,onCheckedChange:S=>x(j.id,{requiresChannel:!!S})}),"Dedicated Channel"]})]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[j.isSelected&&j.requiresChannel&&e.jsx($,{value:j.channelName||"",onChange:S=>x(j.id,{channelName:S.target.value}),className:"w-24 h-8",placeholder:"Channel"}),e.jsx(E,{onClick:()=>y(j.id),size:"sm",variant:"outline",children:e.jsx(Xt,{className:"h-4 w-4"})})]})]},j.id)),h.length===0&&e.jsx("div",{className:"text-center text-muted-foreground py-8",children:'No additional instruments found for this performer. Click "Add Custom" to add custom components.'})]})]})}),e.jsx(ge,{value:"summary",className:"space-y-4",children:e.jsxs(R,{children:[e.jsx(Y,{children:e.jsx(Q,{children:"Configuration Summary"})}),e.jsxs(L,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(q,{children:"Kit Type"}),e.jsxs("select",{value:o.kitType,onChange:j=>d(S=>({...S,kitType:j.target.value})),className:"w-full border rounded px-3 py-2",children:[e.jsx("option",{value:"acoustic",children:"Acoustic"}),e.jsx("option",{value:"electronic",children:"Electronic"}),e.jsx("option",{value:"hybrid",children:"Hybrid"})]})]}),e.jsxs("div",{children:[e.jsx(q,{children:"Total Channels Required"}),e.jsx("div",{className:"text-2xl font-bold text-blue-600",children:b})]})]}),e.jsxs("div",{children:[e.jsx(q,{children:"Setup Notes"}),e.jsx("textarea",{value:o.setupNotes,onChange:j=>d(S=>({...S,setupNotes:j.target.value})),className:"w-full border rounded px-3 py-2 h-20",placeholder:"Additional setup requirements, preferences, or notes..."})]}),e.jsx(R,{className:"bg-gray-50 dark:bg-gray-800",children:e.jsxs(L,{className:"pt-4",children:[e.jsxs("h4",{className:"font-medium mb-2",children:["Selected Components (",b," channels):"]}),e.jsx("div",{className:"space-y-1",children:[...o.components,...h].filter(j=>j.isSelected&&j.requiresChannel).map(j=>e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{children:j.name}),e.jsx("span",{className:"text-muted-foreground",children:j.channelName})]},j.id))})]})})]})]})})]}),e.jsxs("div",{className:"flex justify-end gap-2 pt-4 border-t",children:[e.jsx(E,{variant:"outline",onClick:s,children:"Cancel"}),e.jsxs(E,{onClick:f,children:[e.jsx(js,{className:"h-4 w-4 mr-2"}),"Configure Drum Kit (",b," channels)"]})]})]})})}function nX({bookingId:t,assignedTalent:s=[],eventDetails:n,onSave:a}){const{toast:r}=nt(),[i,l]=N.useState([]),[c,o]=N.useState(""),[d,h]=N.useState([]),[u,m]=N.useState(!1),[p,g]=N.useState(null),[x,v]=N.useState(""),[y,f]=N.useState(!1),[b,j]=N.useState([]),[S,k]=N.useState("search");N.useState(!1),N.useEffect(()=>{n!=null&&n.eventName&&v(`${n.eventName} Setlist`),T()},[n]);const T=async()=>{try{const B=localStorage.getItem("token"),O=await fetch("/api/coded-songs",{headers:{...B&&{Authorization:`Bearer ${B}`}}});if(O.ok){const F=(await O.json()).sort((K,D)=>{const G=s.some(Z=>Z.name===K.codedBy&&Z.role.includes("main")),H=s.some(Z=>Z.name===D.codedBy&&Z.role.includes("main")),V=K.codedByRole.includes("managed"),se=D.codedByRole.includes("managed");return G&&!H?-1:!G&&H?1:V&&!se?-1:!V&&se?1:0});j(F)}}catch(B){console.error("Failed to load coded songs:",B)}},A=async()=>{if(c.trim()){m(!0);try{const B=await fetch("/api/youtube/search",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({query:c,maxResults:10})});if(B.ok){const O=await B.json();h(O.items||[])}else r({title:"Search Failed",description:"Unable to search YouTube. Please try again.",variant:"destructive"})}catch{r({title:"Search Error",description:"YouTube search service unavailable",variant:"destructive"})}finally{m(!1)}}},C=async B=>{const O={title:B.snippet.title,artist:B.snippet.channelTitle,duration:180,key:"C",bpm:120,energy:"medium"},z={id:Date.now().toString(),title:O.title,artist:O.artist,duration:O.duration,key:O.key,bpm:O.bpm,energy:O.energy,notes:"",youtubeUrl:`https://www.youtube.com/watch?v=${B.id.videoId}`,source:"youtube"};l(F=>[...F,z]),h([]),o("")},w=B=>{const O={id:Date.now().toString(),title:B.title,artist:B.artist,duration:B.duration,key:"C",bpm:120,energy:"medium",notes:"",source:"coded",codedBy:B.codedBy,isrcCode:B.isrcCode};l(z=>[...z,O])},P=B=>{l(O=>O.filter(z=>z.id!==B)),(p==null?void 0:p.id)===B&&g(null)},M=()=>{f(!0),setTimeout(()=>{const B=[...i].sort((O,z)=>{const F={medium:1,high:2,low:3};return F[O.energy]-F[z.energy]});l(B),f(!1),r({title:"Setlist Optimized",description:"Songs arranged for optimal energy flow"})},2e3)},I=async()=>{try{const B={name:x,songs:i,bookingId:t,totalDuration:i.reduce((O,z)=>O+z.duration,0),assignedTalent:s,generatedAt:new Date().toISOString()};if(t){const O=localStorage.getItem("token");if((await fetch(`/api/bookings/${t}/setlist`,{method:"POST",headers:{"Content-Type":"application/json",...O&&{Authorization:`Bearer ${O}`}},body:JSON.stringify({setlist:B})})).ok)r({title:"Setlist Saved",description:"Performance setlist saved successfully"}),a==null||a(B);else throw new Error("Failed to save setlist")}else a==null||a(B),r({title:"Setlist Ready",description:"Setlist data prepared for technical rider"})}catch{r({title:"Save Failed",description:"Could not save setlist. Please try again.",variant:"destructive"})}},W=B=>{const O=Math.floor(B/60),z=B%60;return`${O}:${z.toString().padStart(2,"0")}`},_=B=>{switch(B){case"low":return"bg-blue-500";case"medium":return"bg-yellow-500";case"high":return"bg-red-500";default:return"bg-gray-500"}};return e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsx("div",{className:"space-y-4",children:e.jsxs(R,{children:[e.jsx(Y,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs(Q,{className:"flex items-center gap-2",children:[e.jsx(Ue,{className:"h-5 w-5"}),"Performance Setlist"]}),e.jsx($,{value:x,onChange:B=>v(B.target.value),placeholder:"Setlist name...",className:"mt-2 h-8"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(E,{variant:"outline",size:"sm",onClick:M,disabled:i.length===0||y,children:[e.jsx(ad,{className:"h-4 w-4 mr-1"}),y?"Optimizing...":"Smart Optimize"]}),e.jsxs(X,{variant:"outline",children:[i.filter(B=>B.assignedTo).length," Assigned"]})]})]})}),e.jsxs(L,{children:[e.jsx("div",{className:"space-y-2 max-h-96 overflow-y-auto",children:i.length===0?e.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[e.jsx(Ue,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),e.jsx("p",{children:"No songs in setlist yet"}),e.jsx("p",{className:"text-sm",children:"Search YouTube or add coded songs to get started"})]}):i.map((B,O)=>e.jsx("div",{className:`p-3 border rounded-lg cursor-pointer transition-all ${(p==null?void 0:p.id)===B.id?"border-blue-500 bg-blue-50 dark:bg-blue-950":"border-gray-300 hover:border-gray-400"}`,onClick:()=>g(B),children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"flex-1",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("span",{className:"text-sm font-medium",children:[O+1,"."]}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:B.title}),e.jsx("div",{className:"text-sm text-muted-foreground",children:B.artist})]})]})}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"text-sm text-muted-foreground",children:W(B.duration)}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(X,{variant:"outline",className:"text-xs",children:B.key}),e.jsxs(X,{variant:"outline",className:"text-xs",children:[B.bpm," BPM"]}),e.jsx("div",{className:`w-3 h-3 rounded-full ${_(B.energy)}`,title:`${B.energy} energy`})]}),B.assignedTo&&e.jsx(X,{variant:"secondary",className:"text-xs",children:B.assignedTo}),B.youtubeUrl&&e.jsx(H6,{className:"h-4 w-4 text-red-500"}),e.jsx(E,{variant:"ghost",size:"sm",onClick:z=>{z.stopPropagation(),P(B.id)},children:e.jsx(Vt,{className:"h-4 w-4"})})]})]})},B.id))}),e.jsxs("div",{className:"mt-4 pt-4 border-t",children:[e.jsxs("div",{className:"flex items-center justify-between text-sm text-muted-foreground",children:[e.jsxs("span",{children:["Total Songs: ",i.length]}),e.jsxs("span",{children:["Total Duration: ",W(i.reduce((B,O)=>B+O.duration,0))]})]}),e.jsxs(E,{onClick:I,className:"w-full mt-2",disabled:i.length===0,children:[e.jsx(js,{className:"h-4 w-4 mr-2"}),"Save to Technical Rider"]})]})]})]})}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs(R,{children:[e.jsx(Y,{className:"pb-3",children:e.jsx(Q,{className:"text-lg",children:"Add Songs"})}),e.jsx(L,{children:e.jsxs(Ut,{value:S,onValueChange:B=>k(B),className:"space-y-4",children:[e.jsxs(jt,{className:"grid w-full grid-cols-3",children:[e.jsx(Ne,{value:"search",className:"text-xs",children:" YouTube"}),e.jsx(Ne,{value:"coded",className:"text-xs",children:" Coded"}),e.jsx(Ne,{value:"custom",className:"text-xs",children:" Upload"})]}),e.jsxs(ge,{value:"search",className:"space-y-4",children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsx($,{value:c,onChange:B=>o(B.target.value),placeholder:"Search songs...",className:"h-8",onKeyPress:B=>B.key==="Enter"&&A()}),e.jsx(E,{onClick:A,disabled:u||!c.trim(),size:"sm",children:e.jsx(Bs,{className:"h-4 w-4"})})]}),u&&e.jsxs("div",{className:"text-center py-4",children:[e.jsx("div",{className:"animate-spin w-6 h-6 border-2 border-primary border-t-transparent rounded-full mx-auto"}),e.jsx("p",{className:"text-sm text-muted-foreground mt-2",children:"Searching YouTube..."})]}),d.length>0&&e.jsx("div",{className:"space-y-2 max-h-64 overflow-y-auto",children:d.map((B,O)=>e.jsxs("div",{className:"p-2 border rounded cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-800",onClick:()=>C(B),children:[e.jsx("div",{className:"text-sm font-medium truncate",children:B.snippet.title}),e.jsx("div",{className:"text-xs text-muted-foreground truncate",children:B.snippet.channelTitle})]},O))})]}),e.jsxs(ge,{value:"coded",className:"space-y-4",children:[e.jsx("div",{className:"text-xs text-muted-foreground mb-2",children:"Songs from booked talent, managed artists & musicians"}),e.jsx("div",{className:"space-y-2 max-h-64 overflow-y-auto",children:b.length===0?e.jsxs("div",{className:"text-center py-4 text-muted-foreground",children:[e.jsx(k6,{className:"h-8 w-8 mx-auto mb-2 opacity-50"}),e.jsx("p",{className:"text-sm",children:"No coded songs available"})]}):b.map((B,O)=>e.jsxs("div",{className:"p-2 border rounded cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-800",onClick:()=>w(B),children:[e.jsx("div",{className:"text-sm font-medium",children:B.title}),e.jsxs("div",{className:"text-xs text-muted-foreground",children:[B.artist,"  ",B.codedBy," (",B.codedByRole,")"]})]},B.id))})]}),e.jsx(ge,{value:"custom",className:"space-y-4",children:e.jsxs("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-8 text-center",children:[e.jsx(Xs,{className:"h-8 w-8 mx-auto mb-2 text-muted-foreground"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Upload custom audio files"}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"MP3, WAV, FLAC supported"})]})})]})})]}),p&&e.jsxs(R,{children:[e.jsx(Y,{children:e.jsx(Q,{className:"text-lg",children:"Song Details"})}),e.jsxs(L,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(q,{children:"Key"}),e.jsxs(Re,{value:p.key,onValueChange:B=>{g({...p,key:B}),l(O=>O.map(z=>z.id===p.id?{...z,key:B}:z))},children:[e.jsx(Me,{className:"h-8",children:e.jsx(Oe,{})}),e.jsx(_e,{children:["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"].map(B=>e.jsx(U,{value:B,children:B},B))})]})]}),e.jsxs("div",{children:[e.jsx(q,{children:"BPM"}),e.jsx($,{type:"number",value:p.bpm,onChange:B=>{const O=parseInt(B.target.value)||120;g({...p,bpm:O}),l(z=>z.map(F=>F.id===p.id?{...F,bpm:O}:F))},className:"h-8"})]})]}),e.jsxs("div",{children:[e.jsx(q,{children:"Assigned To"}),e.jsxs(Re,{value:p.assignedTo||"",onValueChange:B=>{g({...p,assignedTo:B}),l(O=>O.map(z=>z.id===p.id?{...z,assignedTo:B}:z))},children:[e.jsx(Me,{className:"h-8",children:e.jsx(Oe,{placeholder:"Select performer"})}),e.jsxs(_e,{children:[e.jsx(U,{value:"",children:"Unassigned"}),s.map(B=>e.jsxs(U,{value:B.name,children:[B.name," (",B.role,")"]},B.id))]})]})]}),e.jsxs("div",{children:[e.jsx(q,{children:"Performance Notes"}),e.jsx(mt,{value:p.notes,onChange:B=>{g({...p,notes:B.target.value}),l(O=>O.map(z=>z.id===p.id?{...z,notes:B.target.value}:z))},placeholder:"Add performance notes, key changes, etc.",className:"h-20"})]})]})]})]})]})}function D5({bookingId:t,assignedMusicians:s=[],eventDetails:n,canEdit:a=!0,userRole:r="user",onSave:i,onLoad:l}){var Sr,vi,Lm,J0,eN,tN;const{toast:c}=iI();N.useRef(null);const{data:o,isLoading:d}=ke({queryKey:[`/api/bookings/${t}/assigned-talent`],enabled:!!t}),h=o||s,u=({member:J})=>{var he;const{data:ce=[]}=ke({queryKey:[`/api/users/${J.userId}/hospitality-requirements`],enabled:!!J.userId});return console.log(` HOSPITALITY: Member ${J.fullName} (ID: ${J.userId}) - Found ${ce.length} requirements`),e.jsxs(R,{className:"border-l-4 border-l-blue-500",children:[e.jsx(Y,{className:"pb-2",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-8 h-8 rounded-full bg-blue-100 flex items-center justify-center text-sm font-semibold",children:((he=J.fullName)==null?void 0:he.charAt(0))||"B"}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium",children:J.fullName}),J.stageName&&e.jsxs("p",{className:"text-sm text-muted-foreground",children:["(",J.stageName,")"]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:"Role"}),e.jsx("p",{className:"text-sm font-medium",children:J.selectedTalent||"Performer"})]})]})}),e.jsx(L,{className:"pt-2",children:ce.length>0?e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:"Specific requirements from profile:"}),ce.map((me,we)=>e.jsxs("div",{className:"flex items-center gap-2 p-2 bg-green-50 rounded",children:[e.jsx(X,{variant:"outline",className:"text-xs",children:me.category}),e.jsx("span",{className:"text-sm",children:me.item||me.requirement}),me.specifications&&e.jsxs("span",{className:"text-xs text-muted-foreground",children:["(",me.specifications,")"]}),me.priority==="critical"&&e.jsx(X,{variant:"destructive",className:"text-xs",children:"Critical"})]},me.id||we))]}):e.jsxs("div",{className:"text-center py-3 text-muted-foreground",children:[e.jsxs("p",{className:"text-sm",children:["No hospitality requirements found for ",J.fullName]}),e.jsx("p",{className:"text-xs",children:"Standard requirements will apply"})]})})]})},m=({member:J})=>{var he;const{data:ce=[]}=ke({queryKey:[`/api/users/${J.userId}/technical-requirements`],enabled:!!J.userId});return console.log(` TECHNICAL: Member ${J.fullName} (ID: ${J.userId}) - Found ${ce.length} requirements`),e.jsxs(R,{className:"border-l-4 border-l-orange-500",children:[e.jsx(Y,{className:"pb-2",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-8 h-8 rounded-full bg-orange-100 flex items-center justify-center text-sm font-semibold",children:((he=J.fullName)==null?void 0:he.charAt(0))||"T"}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium",children:J.fullName}),J.stageName&&e.jsxs("p",{className:"text-sm text-muted-foreground",children:["(",J.stageName,")"]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:"Role"}),e.jsx("p",{className:"text-sm font-medium",children:J.selectedTalent||"Performer"})]})]})}),e.jsx(L,{className:"pt-2",children:ce.length>0?e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:"Technical requirements from profile:"}),ce.map((me,we)=>e.jsxs("div",{className:"flex items-center gap-2 p-2 bg-orange-50 rounded",children:[e.jsx(X,{variant:"outline",className:"text-xs",children:me.requirementType}),e.jsx("span",{className:"text-sm",children:me.requirementName}),me.specifications&&e.jsxs("span",{className:"text-xs text-muted-foreground",children:["(",me.specifications,")"]}),me.priority==="critical"&&e.jsx(X,{variant:"destructive",className:"text-xs",children:"Critical"})]},me.id||we))]}):e.jsxs("div",{className:"text-center py-3 text-muted-foreground",children:[e.jsxs("p",{className:"text-sm",children:["No technical requirements found for ",J.fullName]}),e.jsx("p",{className:"text-xs",children:"Standard equipment will apply"})]})})]})},p=({member:J})=>{var he;const{data:ce=[]}=ke({queryKey:[`/api/users/${J.userId}/performance-specs`],enabled:!!J.userId});return console.log(` PERFORMANCE: Member ${J.fullName} (ID: ${J.userId}) - Found ${ce.length} specifications`),e.jsxs(R,{className:"border-l-4 border-l-green-500",children:[e.jsx(Y,{className:"pb-2",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-8 h-8 rounded-full bg-green-100 flex items-center justify-center text-sm font-semibold",children:((he=J.fullName)==null?void 0:he.charAt(0))||"P"}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium",children:J.fullName}),J.stageName&&e.jsxs("p",{className:"text-sm text-muted-foreground",children:["(",J.stageName,")"]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:"Role"}),e.jsx("p",{className:"text-sm font-medium",children:J.selectedTalent||"Performer"})]})]})}),e.jsx(L,{className:"pt-2",children:ce.length>0?e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:"Performance specifications from profile:"}),ce.map((me,we)=>e.jsxs("div",{className:"flex items-center gap-2 p-2 bg-green-50 rounded",children:[e.jsx(X,{variant:"outline",className:"text-xs",children:me.specType}),e.jsxs("span",{className:"text-sm",children:[me.specName,": ",me.specValue]}),me.notes&&e.jsxs("span",{className:"text-xs text-muted-foreground",children:["(",me.notes,")"]}),me.priority==="critical"&&e.jsx(X,{variant:"destructive",className:"text-xs",children:"Critical"})]},me.id||we))]}):e.jsxs("div",{className:"text-center py-3 text-muted-foreground",children:[e.jsxs("p",{className:"text-sm",children:["No performance specifications found for ",J.fullName]}),e.jsx("p",{className:"text-xs",children:"Standard performance setup will apply"})]})})]})},g=({bandMembers:J})=>{const[ce,he]=N.useState([]),[me,we]=N.useState([{id:1,item:"Towels or paper towels",checked:!0,editable:!1},{id:2,item:"Free access to the internet (if available)",checked:!0,editable:!1},{id:3,item:"Mirrors and adequate lighting",checked:!0,editable:!1},{id:4,item:"Electrical outlets for equipment",checked:!0,editable:!1}]),[Qe,Be]=N.useState("");N.useEffect(()=>{(async()=>{const At=[];for(const Et of J)if(Et.userId)try{const ps=await fetch(`/api/users/${Et.userId}/hospitality-requirements`);if(ps.ok){const ks=(await ps.json()).filter(Zt=>Zt.requirementType==="dressing_room"||Zt.requirementType==="green_room");At.push(...ks.map(Zt=>({...Zt,memberName:Et.fullName,checked:!0,editable:!0})))}}catch(ps){console.log(`Failed to fetch dressing room requirements for ${Et.fullName}:`,ps)}he(At)})()},[J]);const ot=()=>{if(Qe.trim()){const ht=Math.max(...me.map(At=>At.id),0)+1;we(At=>[...At,{id:ht,item:Qe.trim(),checked:!0,editable:!0}]),Be("")}},Ot=ht=>{we(At=>At.filter(Et=>Et.id!==ht))},Ft=ht=>{we(At=>At.map(Et=>Et.id===ht?{...Et,checked:!Et.checked}:Et))};return e.jsxs(R,{children:[e.jsx(Y,{children:e.jsx(Q,{className:"text-lg",children:"Dressing Room Requirements"})}),e.jsxs(L,{className:"space-y-3",children:[e.jsx("div",{className:"p-3 border rounded",children:e.jsx(q,{className:"text-sm font-medium",children:"SERVICE PROVIDER requests dressing room accommodation based on band composition and individual needs."})}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("h4",{className:"font-medium text-sm",children:"Dressing Room Amenities:"}),ce.map((ht,At)=>e.jsxs("div",{className:"flex items-center gap-2 p-2 bg-blue-50 rounded",children:[e.jsx(hs,{id:`custom-${ht.id||At}`,checked:ht.checked}),e.jsxs(q,{htmlFor:`custom-${ht.id||At}`,className:"text-sm flex-1",children:[ht.requirementName,ht.specifications&&` (${ht.specifications})`,e.jsxs("span",{className:"text-xs text-muted-foreground ml-1",children:["- ",ht.memberName]})]})]},ht.id||At)),me.map(ht=>e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(hs,{id:`amenity-${ht.id}`,checked:ht.checked,onCheckedChange:()=>Ft(ht.id)}),e.jsx(q,{htmlFor:`amenity-${ht.id}`,className:"text-sm flex-1",children:ht.item}),ht.editable&&e.jsx(E,{variant:"ghost",size:"sm",onClick:()=>Ot(ht.id),children:e.jsx(Xt,{className:"h-3 w-3"})})]},ht.id)),e.jsxs("div",{className:"flex gap-2 mt-4",children:[e.jsx($,{placeholder:"Add custom dressing room requirement",value:Qe,onChange:ht=>Be(ht.target.value),onKeyPress:ht=>ht.key==="Enter"&&ot(),className:"flex-1"}),e.jsx(E,{onClick:ot,size:"sm",children:e.jsx(st,{className:"h-4 w-4"})})]})]})]})]})},x=({bandMembers:J})=>{const[ce,he]=N.useState([]),[me,we]=N.useState([{id:1,item:"Bottle(s) of spring water (room temperature)",checked:!0,editable:!1},{id:2,item:"A variety of fruit juices (orange is preferred)",checked:!0,editable:!1},{id:3,item:"Hot water, honey and lemon for tea",checked:!0,editable:!1},{id:4,item:"Coffee",checked:!0,editable:!1}]),[Qe,Be]=N.useState("");N.useEffect(()=>{(async()=>{const At=[];for(const Et of J)if(Et.userId)try{const ps=await fetch(`/api/users/${Et.userId}/hospitality-requirements`);if(ps.ok){const ks=(await ps.json()).filter(Zt=>Zt.requirementType==="catering"||Zt.requirementType==="beverages"||Zt.requirementType==="refreshments");At.push(...ks.map(Zt=>({...Zt,memberName:Et.fullName,checked:!0,editable:!0})))}}catch(ps){console.log(`Failed to fetch refreshment requirements for ${Et.fullName}:`,ps)}he(At)})()},[J]);const ot=()=>{if(Qe.trim()){const ht=Math.max(...me.map(At=>At.id),0)+1;we(At=>[...At,{id:ht,item:Qe.trim(),checked:!0,editable:!0}]),Be("")}},Ot=ht=>{we(At=>At.filter(Et=>Et.id!==ht))},Ft=ht=>{we(At=>At.map(Et=>Et.id===ht?{...Et,checked:!Et.checked}:Et))};return e.jsxs(R,{children:[e.jsx(Y,{children:e.jsx(Q,{className:"text-lg",children:"Refreshment Requirements"})}),e.jsxs(L,{className:"space-y-3",children:[ce.length>0&&e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Band member specific requirements:"}),ce.map((ht,At)=>e.jsxs("div",{className:"flex items-center gap-2 p-2 bg-green-50 rounded",children:[e.jsx(hs,{id:`custom-refreshment-${ht.id||At}`,checked:ht.checked}),e.jsxs(q,{htmlFor:`custom-refreshment-${ht.id||At}`,className:"text-sm flex-1",children:[ht.requirementName,ht.specifications&&` (${ht.specifications})`,e.jsxs("span",{className:"text-xs text-muted-foreground ml-1",children:["- ",ht.memberName]})]})]},ht.id||At))]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("h4",{className:"font-medium text-sm",children:"Standard Refreshments:"}),me.map(ht=>e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(hs,{id:`refreshment-${ht.id}`,checked:ht.checked,onCheckedChange:()=>Ft(ht.id)}),e.jsx(q,{htmlFor:`refreshment-${ht.id}`,className:"text-sm flex-1",children:ht.item}),ht.editable&&e.jsx(E,{variant:"ghost",size:"sm",onClick:()=>Ot(ht.id),children:e.jsx(Xt,{className:"h-3 w-3"})})]},ht.id)),e.jsxs("div",{className:"flex gap-2 mt-4",children:[e.jsx($,{placeholder:"Add custom refreshment requirement",value:Qe,onChange:ht=>Be(ht.target.value),onKeyPress:ht=>ht.key==="Enter"&&ot(),className:"flex-1"}),e.jsx(E,{onClick:ot,size:"sm",children:e.jsx(st,{className:"h-4 w-4"})})]})]})]})]})},[v,y]=N.useState({eventInfo:n||{},technicalRequirements:[],equipmentRequests:[],stageLayout:{stageWidth:20,stageHeight:16,stageType:"indoor",riser:!1,backdrop:!1,backstageAccess:!0,loadInAccess:"rear",elements:[]},audioConfig:{mainPA:"Line Array System",monitors:[],mixerChannels:32,inputList:[],effectsRack:[]},lighting:{generalWash:!0,spotlights:4,specialEffects:[],dimmingControl:!0,lightingConsole:"Professional"},power:{totalLoad:0,distributionBoxes:2,singlePhase:!0,threePhase:!1,groundedOutlets:12},schedule:{loadIn:"",soundcheck:"",doors:"",showtime:"",curfew:"",loadOut:""},contacts:{production:{name:"",phone:"",email:""},technical:{name:"",phone:"",email:""},venue:{name:"",phone:"",email:""}},additionalNotes:"",emergencyProcedures:""}),[f,b]=N.useState("requirements"),[j,S]=N.useState(!1),k=N.useRef(null),[T,A]=N.useState([]),[C,w]=N.useState({overview:!1,requirements:!1,stage:!1,audio:!1,lighting:!1,schedule:!1}),[P,M]=N.useState({isDragging:!1,elementId:null,startX:0,startY:0}),[I,W]=N.useState(null),[_,B]=N.useState(null),[O,z]=N.useState({}),[F,K]=N.useState([]),[D,G]=N.useState({drums:[],percussion:[],bass:[],guitars:[],keyboards:[],brass:[],strings:[],woodwind:[],world:[],electronic:[],technical:[],vocals:[]}),[H,V]=N.useState(["drums","percussion","bass","guitars","keyboards","vocals","brass","strings","woodwind","world","electronic","technical"]),[se,Z]=N.useState({isDragging:!1,draggedGroup:null,dragOverGroup:null}),le=J=>{console.log(" Opening drum kit configuration for:",J.fullName||J.stageName),Us(J),Ts(!0)},ne=J=>{console.log(" Saving drum kit configuration:",J),vt(ce=>({...ce,[J.performerId||J.id]:J})),setTimeout(()=>{ue()},100)},ue=async()=>{console.log(" REBUILDING MIXER - QUERYING DATABASE DIRECTLY"),console.log(" Current band members count:",T.length);try{const J={drums:[],percussion:[],bass:[],guitars:[],keyboards:[],brass:[],strings:[],woodwind:[],world:[],electronic:[],technical:[],vocals:[]};let ce=1;const he=Ot=>({"Lead Vocalist":144,"Bass Player":6,Drummer:10,"Lead Guitarist":21,Keyboardist:27,Violinist:43,Saxophonist:36,"Singer-Songwriter":144,Guitarist:22,Pianist:159,Vocalist:144,"Background Vocalist":145,"Backing Vocalist":2})[Ot]||null;for(const Ot of T){const Ft=Ot.stageName||Ot.fullName||"Unknown",ht=Ot.selectedTalent||"",At=ht?he(ht):null;if(!At||Ot.membership==="MANAGEMENT"){console.log(` Skipping ${Ft}: no valid instrument ID found for talent "${ht}"`);continue}console.log(` Processing: ${Ft} with talent "${ht}"  instrument ID: ${At}`);const Et=await fetch(`/api/instruments/${At}`);if(!Et.ok){console.log(` Could not find instrument with ID ${At} for ${Ft}`);continue}const ps=await Et.json(),hn=ps.name,ks=ps.mixer_group||ps.mixerGroup;console.log(` Found instrument: ${hn} (${ks}) for ${Ft}`);let Zt="vocals";switch(ks){case"DRUMS":Zt="drums";break;case"PERCUSSION":case"ORCHESTRAL_PERCUSSION":case"WORLD_PERCUSSION":Zt="percussion";break;case"BASS":Zt="bass";break;case"GUITARS":Zt="guitars";break;case"KEYBOARDS":case"KEYS":Zt="keyboards";break;case"BRASS":Zt="brass";break;case"STRINGS":case"ORCHESTRAL_STRINGS":Zt="strings";break;case"WOODWIND":case"WOODWINDS":Zt="woodwind";break;case"WORLD_INSTRUMENTS":case"STEEL_PAN":Zt="world";break;case"ELECTRONIC":case"DJ":Zt="electronic";break;case"TECHNICAL":Zt="technical";break;case"VOCALS":case"LEAD_VOCALS":case"BACKGROUND_VOCALS":case"CHOIR":Zt="vocals";break}if(Zt==="drums"){const Cr=Ls[Ot.id];if(Cr&&Cr.components){const Zi=Cr.components.filter(kr=>kr.isSelected&&kr.requiresChannel);Zi.forEach(kr=>{J.drums.push({id:`drums-${ce++}`,input:kr.channelName||kr.name,applicable:!0,notes:kr.notes||"",assignedTo:Ft,drumKitComponent:!0})}),console.log(` Created ${Zi.length} drum channels for ${Ft} from stage plot`)}else{const Zi=["Kick","Snare","Hi-Hat","Tom 1","Tom 2","Floor Tom","OH L","OH R"];Zi.forEach(kr=>{J.drums.push({id:`drums-${ce++}`,input:kr,applicable:!0,notes:`${Ft} - ${hn}`,assignedTo:Ft,drumKitComponent:!0})}),console.log(` Created ${Zi.length} default drum channels for ${Ft}`)}}else J[Zt].push({id:`${Zt}-${ce++}`,input:hn,applicable:!0,notes:"",assignedTo:Ft}),console.log(` Created ${hn} channel for ${Ft} in ${Zt} section`)}const me=Object.values(J).reduce((Ot,Ft)=>Ot+Ft.length,0),we=37,Qe=we-me;if(console.log(` Current channels: ${me}, Need ${Qe} more to reach ${we}`),Qe>0){const Ot=["percussion","bass","guitars","keyboards","brass","strings","woodwind","world","electronic","vocals"],Ft=Math.floor(Qe/Ot.length);Ot.forEach(At=>{for(let Et=0;Et<Ft;Et++)J[At].push({id:`${At}-extra-${ce}`,input:`Channel ${ce++}`,applicable:!1,notes:"",assignedTo:"auto-assign"})});const ht=Qe-Ft*Ot.length;for(let At=0;At<ht;At++)J.vocals.push({id:`vocals-extra-${ce}`,input:`Channel ${ce++}`,applicable:!1,notes:"",assignedTo:"auto-assign"})}const Be=Object.values(J).reduce((Ot,Ft)=>Ot+Ft.length,0);console.log(` MIXER REBUILT: ${Be} total channels created (database-driven, stage plot aware)`),G(J);const ot=["drums","percussion","bass","guitars","keyboards","brass","strings","woodwind","world","electronic","technical","vocals"];V(ot),console.log(` Set correct group order: ${ot.join("  ")}`)}catch(J){console.error(" Error querying database for instruments:",J),G({drums:[],percussion:[],bass:[],guitars:[],keyboards:[],brass:[],strings:[],woodwind:[],world:[],electronic:[],technical:[],vocals:[]})}},te=()=>{console.log(" RESETTING MIXER TO DEFAULTS"),ue()},Ae=J=>{const ce=String(J),me={id:`${ce}-${Date.now()}`,input:`New ${ce.charAt(0).toUpperCase()+ce.slice(1)} Input`,applicable:!1,notes:"",assignedTo:"auto-assign"};G(we=>({...we,[J]:[...we[J],me]})),console.log(` Added new channel to ${ce} section with auto-assign default`)},Ge=(J,ce,he)=>{G(me=>({...me,[J]:me[J].map(we=>we.id===ce?{...we,assignedTo:he}:we)})),console.log(` Assigned channel ${ce} to ${he}`)},be=(J,ce)=>{G(he=>({...he,[J]:he[J].filter(me=>me.id!==ce)})),console.log(` Removed channel ${ce} from ${J} section`)},Ie=(J,ce,he)=>{G(me=>({...me,[J]:me[J].map(we=>we.id===ce?{...we,input:he}:we)}))},ve=(J,ce,he)=>{G(me=>({...me,[J]:me[J].map(we=>we.id===ce?{...we,applicable:he}:we)}))},ie=(J,ce,he)=>{G(me=>({...me,[J]:me[J].map(we=>we.id===ce?{...we,notes:he}:we)}))},de=(J,ce)=>{let he=1;for(const me of H){if(me===J)return he+ce;D[me]&&(he+=D[me].length)}return he},ee=(J,ce)=>{J.dataTransfer.effectAllowed="move",J.dataTransfer.setData("text/plain",ce),Z({isDragging:!0,draggedGroup:ce,dragOverGroup:null}),console.log(` DRAG START: Group "${ce}"`)},ae=(J,ce)=>{J.preventDefault(),J.dataTransfer.dropEffect="move",Z(he=>({...he,dragOverGroup:ce}))},Se=J=>{J.currentTarget.contains(J.relatedTarget)||Z(ce=>({...ce,dragOverGroup:null}))},We=(J,ce)=>{J.preventDefault();const he=J.dataTransfer.getData("text/plain");if(he&&he!==ce){const me=[...H],we=me.indexOf(he),Qe=me.indexOf(ce);me.splice(we,1),me.splice(Qe,0,he),V(me),console.log(` REORDER: Moved "${he}" to position of "${ce}"`),console.log(" NEW ORDER:",me)}Z({isDragging:!1,draggedGroup:null,dragOverGroup:null})},re=()=>{Z({isDragging:!1,draggedGroup:null,dragOverGroup:null})},je=J=>{const ce=H.indexOf(J);if(ce>0){const he=[...H];[he[ce-1],he[ce]]=[he[ce],he[ce-1]],V(he),console.log(` MOVE UP: Moved "${J}" up in order`),console.log(" NEW ORDER:",he)}},Pe=J=>{const ce=H.indexOf(J);if(ce<H.length-1){const he=[...H];[he[ce],he[ce+1]]=[he[ce+1],he[ce]],V(he),console.log(` MOVE DOWN: Moved "${J}" down in order`),console.log(" NEW ORDER:",he)}},He=()=>{k.current?k.current.scrollIntoView({behavior:"smooth",block:"start"}):window.scrollTo({top:0,left:0,behavior:"smooth"})},Ye=["Vocalist","Lead Vocalist","Backing Vocalist","Lead Guitar","Rhythm Guitar","Electric Guitar","Acoustic Guitar","Bass Guitar","Electric Bass","Upright Bass","Drummer","Percussion","Congas","Bongos","Pianist","Keyboardist","Synthesizer","Organ","Violinist","Cellist","Violist","Double Bass","Saxophonist","Alto Sax","Tenor Sax","Baritone Sax","Trumpeter","Trombonist","French Horn","Tuba","Flutist","Clarinetist","Oboist","Bassoonist","Singer-Songwriter","Multi-Instrumentalist","Session Musician"],Ke=["Sound Engineer","FOH Engineer","Monitor Engineer","System Engineer","Lighting Technician","Lighting Designer","Lighting Operator","Stage Manager","Production Manager","Tour Manager","Guitar Tech","Bass Tech","Drum Tech","Keyboard Tech","Backline Tech","Instrument Tech","Audio Tech","Video Engineer","Camera Operator","Video Director","Security","Stage Security","Venue Security","Roadie","Crew Chief","Load-In Supervisor","Merchandiser","Vendor Coordinator","Catering Coordinator"],oe=J=>{var Qe;const ce=[],he=new Set;if(J.primaryTalent){const Be=J.primaryTalent;ce.push({value:Be,label:`${Be} `,color:"blue",icon:"",tier:1,type:"Primary"}),he.add(Be)}J.secondaryTalents&&Array.isArray(J.secondaryTalents)&&J.secondaryTalents.length>0&&J.secondaryTalents.forEach(Be=>{Be&&!he.has(Be)&&(ce.push({value:Be,label:Be,color:"gray",icon:"",tier:2,type:"Secondary"}),he.add(Be))}),ce.length>0&&ce.push({value:"__divider__",label:"",color:"gray",icon:"",tier:3,type:"Divider"});const me=J.type==="Professional"||((Qe=J.talentType)==null?void 0:Qe.includes("Professional"))||J.roleId===7||J.roleId===8;return(me?Ke:Ye).forEach(Be=>{he.has(Be)||ce.push({value:Be,label:Be,color:me?"purple":"green",icon:me?"":"",tier:4,type:"Generic"})}),(ce.length===0||ce.length===1&&ce[0].type==="Divider")&&ce.push({value:"No talent assigned",label:"No talent assigned",color:"gray",icon:"",tier:99,type:"Unassigned"}),ce};N.useEffect(()=>{K(J=>J.map(ce=>{const he=T.find(me=>{const we=me.fullName,Qe=me.stageName,Be=ce.assignedTo;return Be===we||Be===Qe||we&&(Be==null?void 0:Be.includes(we))||Qe&&(Be==null?void 0:Be.includes(Qe))||we&&we.includes(Be||"")||Qe&&Qe.includes(Be||"")});if(he){let me=he.selectedTalent;return me=ye(me||""),ce.role!==me&&console.log(` STAGE LEGEND SYNC: Updating ${ce.assignedTo} role from "${ce.role}" to "${me}"`),{...ce,role:me}}return ce})),console.log("DEBUG: Syncing stage legend talent/skills with band members")},[T,JSON.stringify(T.map(J=>J.selectedTalent))]);const ye=J=>({Guitar:"Guitarist",Bass:"Bass Player",Piano:"Pianist",Keyboard:"Keyboardist",Drums:"Drummer",Percussion:"Percussionist",Vocals:"Vocalist",Violin:"Violinist",Saxophone:"Saxophonist",Trumpet:"Trumpeter",Flute:"Flutist",Cello:"Cellist","Electric Guitar":"Electric Guitarist","Acoustic Guitar":"Acoustic Guitarist","Electric Bass":"Bass Player",Congas:"Conga Player",Trombone:"Trombonist",Clarinet:"Clarinetist",Oboe:"Oboist","French Horn":"French Horn Player",Tuba:"Tuba Player",Harmonica:"Harmonica Player",Mandolin:"Mandolinist",Banjo:"Banjo Player",Ukulele:"Ukulele Player",Harp:"Harpist",Organ:"Organist",Synthesizer:"Keyboardist","Electric Piano":"Pianist","Bass Guitar":"Bass Player"})[J]||J;N.useEffect(()=>{(()=>{console.log(" TECHNICAL RIDER: Initializing band members"),console.log(" Assigned musicians (props) count:",Array.isArray(s)?s.length:0),console.log(" Final assigned musicians (API) count:",Array.isArray(h)?h.length:0),console.log(" Will use:",s&&s.length>0?"assignedMusicians (props)":"finalAssignedMusicians (API)");const ce=[],he=s&&s.length>0?s:h;console.log(" Using musician data source:",Array.isArray(he)&&he.length>0?"assignedMusicians (props)":"finalAssignedMusicians (API)"),he&&Array.isArray(he)?he.forEach((we,Qe)=>{var At,Et,ps,hn;const Be=we.talentType,ot=we.roleId===7||we.roleId===8||((At=we.talentType)==null?void 0:At.includes("Professional"))||we.type==="Professional"||we.assignedRole==="Audio Engineer"||we.assignedRole==="Legal Counsel"||((Et=we.assignedRole)==null?void 0:Et.includes("Engineer"))||((ps=we.assignedRole)==null?void 0:ps.includes("Counsel"))||((hn=we.assignedRole)==null?void 0:hn.includes("Manager"))||we.professionalProfile&&Object.keys(we.professionalProfile).length>0||we.role==="professional",Ot=ot?al.MEMBERSHIP_TYPES.TEAM:al.MEMBERSHIP_TYPES.BAND,Ft=we.primaryTalent||null,ht={id:`musician-${we.userId||Qe}`,membership:Ot,role:Ft,fullName:we.name||we.fullName||"Unknown Musician",stageName:we.stageName||"",userId:we.userId,roleId:we.roleId,isManual:!1,primaryRole:Ft,assignedRole:we.assignedRole,selectedRoles:we.selectedRoles||[],isMainBookedTalent:we.isMainBookedTalent||we.isPrimary||!1,assignmentRole:we.type||(we.isMainBookedTalent?"Main Booked Talent":we.assignmentRole||"Supporting Musician"),talentType:we.talentType||we.type||"Artist",type:ot?"Professional":we.type||"Artist",selectedTalent:Ft,roleBadge:Be,artistProfile:we.artistProfile,musicianProfile:we.musicianProfile,professionalProfile:we.professionalProfile,primaryTalent:we.primaryTalent,secondaryTalents:we.secondaryTalents,hasPrimaryTalent:!!we.primaryTalent,hasSecondaryTalents:!!(we.secondaryTalents&&we.secondaryTalents.length>0)};ce.push(ht)}):console.log(" No assigned musicians found or data is not an array"),console.log(` Total members added from API: ${ce.length}`),(!h||!Array.isArray(h)||!h.some(we=>we.role==="admin"))&&ce.push({id:"mgmt-ceo",membership:al.MEMBERSHIP_TYPES.MANAGEMENT,role:"CEO",fullName:"Mr Lindsay George",stageName:"",isManual:!1,isMainBookedTalent:!1,type:"Management",selectedTalent:"CEO",roleBadge:al.MEMBERSHIP_TYPES.MANAGEMENT,talentType:al.MEMBERSHIP_TYPES.MANAGEMENT,dropdownOptions:[]},{id:"mgmt-cfo",membership:al.MEMBERSHIP_TYPES.MANAGEMENT,role:"CFO",fullName:"Ms Joyette Pascal",stageName:"",isManual:!1,isMainBookedTalent:!1,type:"Management",selectedTalent:"CFO",roleBadge:al.MEMBERSHIP_TYPES.MANAGEMENT,talentType:al.MEMBERSHIP_TYPES.MANAGEMENT,dropdownOptions:[]});const me=ce.sort((we,Qe)=>{const Be={"Managed Artist":1,"Managed Musician":2,"Managed Professional":3,Professional:4,TEAM:5,MANAGEMENT:999,Unknown:1e3},ot=we.roleBadge||we.talentType||(we.membership==="MANAGEMENT"?"MANAGEMENT":we.membership==="TEAM"?"TEAM":"Unknown"),Ot=Qe.roleBadge||Qe.talentType||(Qe.membership==="MANAGEMENT"?"MANAGEMENT":Qe.membership==="TEAM"?"TEAM":"Unknown"),Ft=Be[ot]||7,ht=Be[Ot]||7;return console.log("Sorting:",we.fullName,"badge:",we.roleBadge,"order:",Ft,"vs",Qe.fullName,"badge:",Qe.roleBadge,"order:",ht),Ft-ht});console.log(` FINAL: Setting ${me.length} band members`),A(me),me.length>0&&(console.log(" REBUILDING MIXER for",me.length,"band members on page load"),setTimeout(()=>{ue()},500))})()},[h,d]);const Te=(J="BAND")=>{const ce={id:`${J.toLowerCase()}-${Date.now()}`,membership:J,role:J==="BAND"?"Performer":J==="TEAM"?"Team Member":"Manager",fullName:"",stageName:"",isManual:!0,dropdownOptions:[]};A(he=>{if(J==="BAND"){const me=he.findIndex(we=>we.membership!=="BAND");if(me===-1)return[...he,ce];{const we=[...he];return we.splice(me,0,ce),we}}else if(J==="TEAM"){const me=he.findIndex(we=>we.membership==="MANAGEMENT");if(me===-1)return[...he,ce];{const we=[...he];return we.splice(me,0,ce),we}}else return[...he,ce]}),He()},et=(J,ce)=>{A(he=>he.map(me=>me.id===J?{...me,...ce}:me))},cs=J=>{const ce=T.find(he=>he.id===J);if(ce!=null&&ce.isMainBookedTalent){c(Ci.ERROR.CANNOT_REMOVE);return}A(he=>he.filter(me=>me.id!==J)),He()},ws=()=>{c(Ci.INFO.MANUAL_SETUP),He()},fe=(J,ce,he)=>{var Ot,Ft;if(he!=null&&he.userId&&v.stageLayout.elements.some(At=>At.assignedTo===he.fullName||At.assignedTo===he.name)){c({title:"User Already on Stage",description:`${he.fullName||he.name} is already placed on the stage plot.`,variant:"destructive"});return}const we=(O[ce]||0)+1;z(ht=>({...ht,[ce]:we}));const Qe=`${ce} ${we}`,Be={id:`element-${Date.now()}`,type:"equipment",name:Qe,displayName:Qe,x:Math.random()*70+10,y:Math.random()*60+20,rotation:0,equipmentType:ce,icon:J,assignedTo:(he==null?void 0:he.fullName)||(he==null?void 0:he.name)||"",assignedRole:(he==null?void 0:he.role)||((Ot=he==null?void 0:he.selectedRoles)==null?void 0:Ot[0])||"",userId:he==null?void 0:he.userId,color:Ve(ce)};y(ht=>({...ht,stageLayout:{...ht.stageLayout,elements:[...ht.stageLayout.elements,Be]}}));let ot=(he==null?void 0:he.selectedTalent)||(he==null?void 0:he.role)||((Ft=he==null?void 0:he.selectedRoles)==null?void 0:Ft[0]);ot&&(ot=ye(ot)),K(ht=>[...ht,{id:Be.id,name:Qe,type:ce,color:Ve(ce),assignedTo:(he==null?void 0:he.fullName)||(he==null?void 0:he.name),role:ot}])},Ve=J=>({Piano:"#8B5CF6",Guitar:"#EF4444",Drums:"#F59E0B","Mic Stand":"#10B981",Monitor:"#3B82F6",Screen:"#6B7280"})[J]||"#9CA3AF",zt=J=>{const ce=v.stageLayout.elements.find(me=>me.id===J);ce!=null&&ce.assignedTo&&T.some(me=>me.fullName===ce.assignedTo)&&!window.confirm(`Are you sure you want to remove "${ce.name}" assigned to ${ce.assignedTo}? This will remove them from the stage plot.`)||(y(me=>({...me,stageLayout:{...me.stageLayout,elements:me.stageLayout.elements.filter(we=>we.id!==J)}})),K(me=>me.filter(we=>we.id!==J)),I===J&&W(null),console.log(` STAGE REMOVAL: Removed ${ce==null?void 0:ce.name} for ${ce==null?void 0:ce.assignedTo}`),He())},gs=(J,ce)=>{y(he=>({...he,stageLayout:{...he.stageLayout,elements:he.stageLayout.elements.map(me=>me.id===J?{...me,name:ce,displayName:ce}:me)}})),K(he=>he.map(me=>me.id===J?{...me,name:ce}:me))},pt=J=>{const ce=J.selectedTalent||J.primaryRole,he=J.skillsAndInstruments||J.instruments||J.profileRoles||[],me=new Set,we=[];if(ce){const Be=Ps(ce);we.push(Be),me.add(Be.name)}let Qe=ce&&(ce.toLowerCase().includes("vocal")||ce.toLowerCase().includes("singer"));return he.forEach(Be=>{const ot=Ps(Be);if((Be.toLowerCase().includes("vocal")||Be.toLowerCase().includes("singer"))&&Qe)return;const Ot=ot.name;me.has(Ot)||(me.add(Ot),we.push(ot),(Be.toLowerCase().includes("vocal")||Be.toLowerCase().includes("singer"))&&(Qe=!0))}),we},Js=J=>({1:"SuperAdmin",2:"Admin",3:"Managed Artist",4:"Artist",5:"Managed Musician",6:"Musician",7:"Managed Professional",8:"Professional",9:"Fan"})[J]||"Unknown Role",Ps=J=>{const ce=J.toLowerCase();return ce.includes("piano")||ce.includes("pianist")?{type:"",name:"Piano"}:ce.includes("keyboard")||ce.includes("keyboardist")?{type:"",name:"Piano"}:ce.includes("guitar")||ce.includes("guitarist")?{type:"",name:"Guitar"}:ce.includes("drum")||ce.includes("drummer")?{type:"",name:"Drums"}:ce.includes("bass")||ce.includes("bass player")?{type:"",name:"Bass"}:ce.includes("vocal")||ce.includes("singer")||ce.includes("vocalist")?{type:"",name:"Mic Stand"}:ce.includes("saxophone")||ce.includes("saxophonist")?{type:"",name:"Saxophone"}:ce.includes("trumpet")||ce.includes("trumpeter")?{type:"",name:"Trumpet"}:ce.includes("violin")||ce.includes("violinist")?{type:"",name:"Violin"}:{type:"",name:J}},ts=()=>{const J=document.createElement("canvas"),ce=J.getContext("2d");if(!ce)return;J.width=800,J.height=600,ce.fillStyle="#ffffff",ce.fillRect(0,0,J.width,J.height),ce.strokeStyle="#cccccc",ce.strokeRect(50,50,500,300),ce.fillStyle="#666666",ce.font="12px Arial",ce.textAlign="center",ce.fillText("AUDIENCE",300,30),ce.fillText("BACKSTAGE",300,370),v.stageLayout.elements.forEach(me=>{const we=50+me.x/100*500,Qe=50+me.y/100*300;ce.fillStyle=me.color||"#3B82F6",ce.fillRect(we-20,Qe-10,40,20),ce.fillStyle="#ffffff",ce.font="10px Arial",ce.textAlign="center",ce.fillText(me.name,we,Qe+3)}),ce.fillStyle="#000000",ce.font="14px Arial",ce.textAlign="left",ce.fillText("LEGEND",580,70),F.forEach((me,we)=>{const Qe=90+we*25;ce.fillStyle=me.color,ce.fillRect(580,Qe-8,12,12),ce.fillStyle="#000000",ce.font="10px Arial",ce.fillText(me.name,600,Qe),me.assignedTo&&(ce.font="8px Arial",ce.fillStyle="#666666",ce.fillText(`${me.assignedTo} (${me.role})`,600,Qe+12))});const he=document.createElement("a");he.download=`stage-plot-${t||"design"}.png`,he.href=J.toDataURL(),he.click(),He()},ds=J=>{if(!I)return;const ce=5;y(he=>({...he,stageLayout:{...he.stageLayout,elements:he.stageLayout.elements.map(me=>{if(me.id!==I)return me;let we=me.x,Qe=me.y;switch(J){case"up":Qe=Math.max(0,me.y-ce);break;case"down":Qe=Math.min(100,me.y+ce);break;case"left":we=Math.max(0,me.x-ce);break;case"right":we=Math.min(100,me.x+ce);break}return{...me,x:we,y:Qe}})}}))},Ws=(J,ce)=>{const he=ce==="left"?-15:15;y(me=>({...me,stageLayout:{...me.stageLayout,elements:me.stageLayout.elements.map(we=>we.id===J?{...we,rotation:(we.rotation+he)%360}:we)}}))},un=(J,ce)=>{ce.preventDefault(),W(J);const he="touches"in ce?ce.touches[0].clientX:ce.clientX,me="touches"in ce?ce.touches[0].clientY:ce.clientY;M({isDragging:!0,elementId:J,startX:he,startY:me})},mn=J=>{if(!P.isDragging||!P.elementId)return;const ce="touches"in J?J.touches[0].clientX:J.clientX,he="touches"in J?J.touches[0].clientY:J.clientY,me=ce-P.startX,we=he-P.startY,Qe=me/400*100,Be=we/400*100;Ee(P.elementId,Qe,Be),M(ot=>({...ot,startX:ce,startY:he}))},Wn=()=>{M({isDragging:!1,elementId:null,startX:0,startY:0})},Ee=(J,ce,he)=>{y(me=>({...me,stageLayout:{...me.stageLayout,elements:me.stageLayout.elements.map(we=>{if(we.id===J){const Qe=Math.max(0,Math.min(90,we.x+ce)),Be=Math.max(5,Math.min(85,we.y+he));return{...we,x:Qe,y:Be}}return we})}}))};lt.useEffect(()=>{const J=we=>mn(we),ce=()=>Wn(),he=we=>{we.preventDefault(),mn(we)},me=()=>Wn();return P.isDragging&&(document.addEventListener("mousemove",J),document.addEventListener("mouseup",ce),document.addEventListener("touchmove",he,{passive:!1}),document.addEventListener("touchend",me)),()=>{document.removeEventListener("mousemove",J),document.removeEventListener("mouseup",ce),document.removeEventListener("touchmove",he),document.removeEventListener("touchend",me)}},[P.isDragging,P.startX,P.startY,P.elementId]);const es=(J,ce)=>{console.log(" TALENT SYNC: Handling talent change for member:",J,"to:",ce),A(he=>he.map(me=>{if(me.id===J){const we={...me,selectedTalent:ce};if(v.stageLayout.elements.some(Be=>Be.assignedTo===me.fullName||Be.assignedTo===me.fullName)){console.log(" SYNC: Member is in stage plot, updating stage elements and mixer assignments"),y(ot=>{const Ot=ot.stageLayout.elements.map(Ft=>Ft.assignedTo===me.fullName||Ft.assignedTo===me.fullName?{...Ft,assignedRole:ce,equipmentType:ce}:Ft);return{...ot,stageLayout:{...ot.stageLayout,elements:Ot}}}),K(ot=>ot.map(Ot=>Ot.assignedTo===me.fullName?{...Ot,role:ye(ce)}:Ot));const Be=v.audioConfig.inputList.map(ot=>{if(ot.assignedTo===me.fullName){const Ot=ot.instrument.toLowerCase(),Ft=ce.toLowerCase();if(!Ot.includes(Ft)&&!Ft.includes(Ot.split(" ")[0]))return{...ot,assignedTo:""}}return ot});y(ot=>({...ot,audioConfig:{...ot.audioConfig,inputList:Be}})),en()}return we}return me}))},[Ls,vt]=N.useState({}),[ms,Ts]=N.useState(!1),[Mt,Us]=N.useState(null);N.useEffect(()=>{T.some(ce=>ce.selectedTalent)&&(console.log(" Band members changed with assigned instruments, rebuilding mixer..."),ue())},[T,Ls]);const en=N.useCallback(()=>{try{if(console.log(" AUTO-ASSIGNMENT: Using bandMembers like stage plot"),!T||T.length===0){console.log(" No band members available for auto-assignment");return}console.log(` Processing ${T.length} band members for auto-assignment`);const J=new Set;G(ce=>{const he={...ce};return Object.keys(he).forEach(me=>{he[me].forEach(we=>{we.assignedTo=""})}),console.log(" CLEARED all existing channel assignments before re-assigning"),T.forEach((me,we)=>{if(J.has(me.userId))return;const Qe=me.selectedTalent;if(!Qe){console.log("    SKIPPING: No talent data found. Available fields:",Object.keys(me));return}console.log(`
 PROCESSING BAND MEMBER ${we+1}/${T.length}:`),console.log(`   Name: ${me.fullName}`),console.log(`   Stage Name: ${me.stageName}`),console.log(`   Current Talent: "${Qe}"`),(me.fullName==="Phoenix"||me.stageName==="Phoenix")&&(console.log(`    PHOENIX DEBUG: Talent="${Qe}", Lowercase="${Qe==null?void 0:Qe.toLowerCase()}"`),console.log("    PHOENIX DEBUG: Contains 'drum'?",Qe==null?void 0:Qe.toLowerCase().includes("drum")),console.log("    PHOENIX DEBUG: Contains 'percussion'?",Qe==null?void 0:Qe.toLowerCase().includes("percussion")));const Be=Qe.toLowerCase();let ot="OTHER",Ot="SINGLE";if(Be.includes("vocal")||Be.includes("singer")||Be.includes("voice")){ot="VOCALS",Ot="SINGLE",console.log(`    VOCAL DETECTION: "${Be}" mapped to VOCALS`);const At=Be.includes("lead vocalist")||Be.includes("lead singer")||Be.includes("main vocalist")||Be.includes("lead vocal")||Be.includes("lead")||Be.includes("main"),Et=Be.includes("background vocalist")||Be.includes("backing vocalist")||Be.includes("background vocal")||Be.includes("backing vocal")||Be.includes("background singer")||Be.includes("backing singer");console.log(At?`    LEAD VOCALIST DETECTED: "${Qe}"`:Et?`    BACKGROUND VOCALIST DETECTED: "${Qe}"`:`    GENERAL VOCALIST DETECTED: "${Qe}"`)}else Be.includes("guitar")&&!Be.includes("bass")?(ot="GUITAR",Ot="SINGLE"):Be.includes("bass")?(ot="BASS",Ot="SINGLE"):Be.includes("keyboard")||Be.includes("piano")?(ot="KEYBOARD",Ot="STEREO_PAIR"):Be.includes("drum")||Be.includes("percussion")||Be.includes("beat")||Be.includes("drummer")||Be.includes("percussionist")?(ot="DRUMS",Ot="FULL_GROUP",console.log(`    DRUM DETECTION: "${Be}" mapped to DRUMS`),Be.includes("jazz drum")||Be.includes("jazz kit")?console.log(`    JAZZ DRUM KIT DETECTED: "${Qe}"`):Be.includes("rock drum")||Be.includes("rock kit")?console.log(`    ROCK DRUM KIT DETECTED: "${Qe}"`):Be.includes("electronic drum")||Be.includes("e-drum")?console.log(`    ELECTRONIC DRUM KIT DETECTED: "${Qe}"`):console.log(`    GENERAL DRUM KIT DETECTED: "${Qe}"`)):Be.includes("brass")||Be.includes("trumpet")||Be.includes("sax")?(ot="BRASS",Ot="SINGLE"):Be.includes("string")||Be.includes("violin")?(ot="STRINGS",Ot="SINGLE"):Be.includes("percussion")&&(ot="PERCUSSION",Ot="SINGLE");console.log(`   Mapped to: ${ot} (${Ot})`);let Ft=!1;if(Object.keys(he).sort((At,Et)=>{const ps=At.toLowerCase(),hn=Et.toLowerCase();if(ot==="VOCALS"){const ks=Be.includes("lead vocalist")||Be.includes("lead singer")||Be.includes("main vocalist")||Be.includes("lead vocal")||Be.includes("lead")||Be.includes("main"),Zt=Be.includes("background vocalist")||Be.includes("backing vocalist")||Be.includes("background vocal")||Be.includes("backing vocal")||Be.includes("background singer")||Be.includes("backing singer"),Cr=ps.includes("lead")||ps.includes("main")||ps.includes("vocal")&&!ps.includes("background")&&!ps.includes("backing"),Zi=hn.includes("lead")||hn.includes("main")||hn.includes("vocal")&&!hn.includes("background")&&!hn.includes("backing");if(ks){if(console.log("    LEAD VOCALIST - Prioritizing lead vocal sections"),Cr&&!Zi)return-1;if(!Cr&&Zi)return 1}else if(Zt){console.log("    BACKGROUND VOCALIST - Prioritizing background vocal sections");const kr=ps.includes("background")||ps.includes("backing"),sN=hn.includes("background")||hn.includes("backing");if(kr&&!sN)return-1;if(!kr&&sN)return 1}}return 0}).forEach(At=>{if(Ft)return;const Et=At.toLowerCase();let ps=!1;switch(ot){case"VOCALS":const hn=Et.includes("lead")||Et.includes("main")||Et.includes("vocal")&&!Et.includes("background")&&!Et.includes("backing"),ks=Et.includes("vocal")||Et.includes("vox");ps=ks,console.log(`    VOCAL SECTION CHECK: "${At}" - Lead: ${hn}, Any: ${ks}`);const Zt=Be.includes("lead vocalist")||Be.includes("lead singer")||Be.includes("main vocalist")||Be.includes("lead vocal")||Be.includes("lead")||Be.includes("main"),Cr=Be.includes("background vocalist")||Be.includes("backing vocalist")||Be.includes("background vocal")||Be.includes("backing vocal")||Be.includes("background singer")||Be.includes("backing singer");Zt&&hn?console.log(`    LEAD VOCALIST  LEAD VOCALS SECTION: ${At}`):Zt&&!hn?console.log(`    LEAD VOCALIST but non-lead section: ${At} - will try lead sections first`):Cr&&Et.includes("background")?console.log(`    BACKGROUND VOCALIST  BACKGROUND VOCALS SECTION: ${At}`):Cr&&!Et.includes("background")&&console.log(`    BACKGROUND VOCALIST but non-background section: ${At} - will try background sections first`);break;case"GUITAR":ps=(Et.includes("guitar")||Et.includes("gtr"))&&!Et.includes("bass");break;case"BASS":ps=Et.includes("bass")&&!Et.includes("drum");break;case"KEYBOARD":ps=Et.includes("key")||Et.includes("piano")||Et.includes("synth");break;case"DRUMS":ps=Et.includes("drum")||Et.includes("percussion")||At==="DRUMS",console.log(`    DRUM SECTION CHECK: "${At}" - Match: ${ps}`);break;case"BRASS":ps=Et.includes("sax")||Et.includes("trumpet")||Et.includes("brass");break;case"STRINGS":ps=Et.includes("string")||Et.includes("violin")||Et.includes("orchestral");break;case"PERCUSSION":ps=Et.includes("percussion");break}if(ps){const ks=he[At].filter(Zt=>!Zt.assignedTo||Zt.assignedTo.trim()==="");if(console.log(`   Found matching section: ${At} (${ks.length} available channels)`),ks.length>0){const Zt=me.stageName||me.fullName;switch(Ot){case"SINGLE":ks[0].assignedTo=Zt,console.log(`    SINGLE ASSIGNMENT: ${Zt}  Channel ${ks[0].number||ks[0].channel||"N/A"}`),Ft=!0;break;case"STEREO_PAIR":ks.length>=2?(ks[0].assignedTo=`${Zt} (L)`,ks[1].assignedTo=`${Zt} (R)`,console.log(`    STEREO PAIR: ${Zt}  Channels ${ks[0].number||ks[0].channel||"N/A"}-${ks[1].number||ks[1].channel||"N/A"} (L/R)`),Ft=!0):ks.length===1?(ks[0].assignedTo=Zt,console.log(`    FALLBACK SINGLE: ${Zt}  Channel ${ks[0].number||ks[0].channel||"N/A"} (only 1 available for stereo)`),Ft=!0):console.log(`    NO CHANNELS AVAILABLE for stereo pair: ${Zt}`);break;case"FULL_GROUP":ks.length>0?(ks.forEach(Cr=>{Cr.assignedTo=Zt}),console.log(`    FULL GROUP: ${Zt}  ALL ${ks.length} channels in ${At}`),Ft=!0):console.log(`    NO CHANNELS AVAILABLE for full group: ${Zt}`);break}}}}),!Ft&&(console.log(`    NO SUITABLE CHANNELS FOUND FOR ${me.fullName} (${ot})`),ot==="STRINGS")){console.log(`    CREATING STRINGS SECTION for ${me.fullName}`);const At=me.stageName||me.fullName;he.strings=[{number:1,name:"Strings L",assignedTo:`${At} (L)`},{number:2,name:"Strings R",assignedTo:`${At} (R)`}],console.log(`    STRINGS SECTION CREATED: ${At}  Channels 1-2 (L/R)`),Ft=!0}Ft&&(console.log("    MUSICIAN ASSIGNED AND MARKED AS PROCESSED"),J.add(me.userId))}),console.log(`
 AUTO-ASSIGNMENT COMPLETE`),console.log(` Total band members processed: ${T.length}`),console.log(` Total musicians assigned: ${J.size}`),console.log(` Unassigned musicians: ${T.length-J.size}`),he}),console.log(" AUTO-ASSIGNMENT: Channels updated successfully")}catch(J){console.error(" AUTO-ASSIGNMENT ERROR:",J)}},[T,D]),An=()=>{const J=Object.keys(C).length;return Object.values(C).filter(Boolean).length/J*100},ha=async()=>{try{S(!0);const J={booking_id:t,band_members:T,equipment_requests:v.equipmentRequests||[],stage_layout:v.stageLayout,audio_config:v.audioConfig,event_details:n,mixer_channels:D,generated_at:new Date().toISOString()},ce=await fetch("/api/technical-rider/export",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("authToken")||"temp-token"}`},body:JSON.stringify(J)});if(ce.ok){const he=await ce.blob(),me=URL.createObjectURL(he),we=document.createElement("a");we.href=me,we.download=`technical-rider-booking-${t}.pdf`,we.click(),URL.revokeObjectURL(me),c(Ci.SUCCESS.EXPORT),He()}else{const he=await ce.json();c(Ci.ERROR.EXPORT_FAILED_WITH_MESSAGE(he.message))}}catch(J){console.error("Export error:",J),c(Ci.ERROR.EXPORT_FAILED)}finally{S(!1)}},Ga=async()=>{try{S(!0);const J={booking_id:t,band_members:T,equipment_requests:v.equipmentRequests||[],stage_layout:v.stageLayout,audio_config:v.audioConfig,completion_status:C,saved_at:new Date().toISOString()};(await fetch(`/api/bookings/${t}/enhanced-technical-rider`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(J)})).ok?(i==null||i(v),c(Ci.SUCCESS.SAVE),He()):c(Ci.ERROR.SAVE_FAILED)}catch(J){console.error("Save error:",J),c(Ci.ERROR.SAVE_FAILED)}finally{S(!1)}};return e.jsxs("div",{ref:k,className:"space-y-6",children:[e.jsx(R,{children:e.jsxs(Y,{children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs(Q,{className:"flex items-center gap-3",children:[e.jsx(Es,{className:"h-6 w-6 text-primary"}),"Professional Technical Rider System"]}),e.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"Enhanced technical rider with real-time collaboration and professional export"})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-2",children:[e.jsxs(E,{onClick:ws,disabled:j,variant:"outline",size:"sm",className:"mobile-button w-full sm:w-auto",children:[e.jsx(Fj,{className:"h-4 w-4 mr-2"}),e.jsx("span",{className:"hidden sm:inline",children:j?"Generating...":"Auto Generate"}),e.jsxs("span",{className:"sm:hidden",children:[" ",j?"Creating...":"Auto Magic"]})]}),e.jsxs(E,{onClick:ha,variant:"outline",size:"sm",className:"mobile-button w-full sm:w-auto",children:[e.jsx(Cs,{className:"h-4 w-4 mr-2"}),e.jsx("span",{className:"hidden sm:inline",children:"Export PDF"}),e.jsx("span",{className:"sm:hidden",children:" Export"})]}),e.jsxs(E,{onClick:Ga,size:"sm",disabled:j,className:"mobile-button w-full sm:w-auto",children:[e.jsx(js,{className:"h-4 w-4 mr-2"}),e.jsx("span",{className:"hidden sm:inline",children:j?"Saving...":"Save Rider"}),e.jsxs("span",{className:"sm:hidden",children:[" ",j?"Saving...":"Save"]})]})]})]}),e.jsxs("div",{className:"mt-4",children:[e.jsxs("div",{className:"flex items-center justify-between text-sm mb-2",children:[e.jsx("span",{children:"Completion Progress"}),e.jsxs("span",{children:[Math.round(An()),"%"]})]}),e.jsx(qs,{value:An(),className:"h-2"})]})]})}),e.jsxs(Ut,{value:f,onValueChange:J=>b(J),children:[e.jsxs(jt,{className:"musical-tabs-list",children:[e.jsxs(Ne,{value:"requirements",className:"musical-tab-trigger musical-tab",children:[e.jsx("div",{className:"mobile-tab-icon",children:""}),e.jsx("div",{className:"mobile-tab-text",children:"Requirements"})]}),e.jsxs(Ne,{value:"stage",className:"musical-tab-trigger musical-tab",children:[e.jsx("div",{className:"mobile-tab-icon",children:""}),e.jsx("div",{className:"mobile-tab-text",children:"Stage Plot"})]}),e.jsxs(Ne,{value:"audio",className:"musical-tab-trigger musical-tab",children:[e.jsx("div",{className:"mobile-tab-icon",children:""}),e.jsx("div",{className:"mobile-tab-text",children:"Mixer & Patch"})]}),e.jsxs(Ne,{value:"schedule",className:"musical-tab-trigger musical-tab",children:[e.jsx("div",{className:"mobile-tab-icon",children:""}),e.jsx("div",{className:"mobile-tab-text",children:"Setlist Builder"})]}),e.jsxs(Ne,{value:"hospitality",className:"musical-tab-trigger musical-tab",children:[e.jsx("div",{className:"mobile-tab-icon",children:""}),e.jsx("div",{className:"mobile-tab-text",children:"Hospitality & Dressing"})]}),e.jsxs(Ne,{value:"overview",className:"musical-tab-trigger musical-tab",children:[e.jsx("div",{className:"mobile-tab-icon",children:""}),e.jsx("div",{className:"mobile-tab-text",children:"Overview"})]})]}),e.jsxs(ge,{value:"overview",className:"space-y-6 animate-fade-in-up",children:[e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4 lg:gap-6 mobile-container",children:[e.jsxs(R,{children:[e.jsx(Y,{children:e.jsxs(Q,{className:"flex items-center gap-2",children:[e.jsx(dt,{className:"h-5 w-5"}),"Event Information"]})}),e.jsxs(L,{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(q,{children:"Event Name"}),e.jsx($,{value:((Sr=v.eventInfo)==null?void 0:Sr.eventName)||"",onChange:J=>y(ce=>({...ce,eventInfo:{...ce.eventInfo,eventName:J.target.value}})),disabled:!a,className:"mobile-input",placeholder:" Enter event name..."})]}),e.jsxs("div",{children:[e.jsx(q,{children:"Venue"}),e.jsx($,{value:((vi=v.eventInfo)==null?void 0:vi.venueName)||"",onChange:J=>y(ce=>({...ce,eventInfo:{...ce.eventInfo,venueName:J.target.value}})),disabled:!a,className:"mobile-input",placeholder:" Venue name..."})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(q,{children:"Event Date"}),e.jsx($,{type:"date",value:((Lm=v.eventInfo)==null?void 0:Lm.eventDate)||"",onChange:J=>y(ce=>({...ce,eventInfo:{...ce.eventInfo,eventDate:J.target.value}})),disabled:!a})]}),e.jsxs("div",{children:[e.jsx(q,{children:"Duration (minutes)"}),e.jsx($,{type:"number",value:((J0=v.eventInfo)==null?void 0:J0.duration)||"",onChange:J=>y(ce=>({...ce,eventInfo:{...ce.eventInfo,duration:parseInt(J.target.value)}})),disabled:!a})]})]})]})]}),e.jsxs(R,{children:[e.jsx(Y,{children:e.jsxs(Q,{className:"flex items-center gap-2",children:[e.jsx(Ze,{className:"h-5 w-5"}),"Artist Lineup"]})}),e.jsx(L,{children:e.jsxs("div",{className:"space-y-3",children:[s.map((J,ce)=>{var he;return e.jsxs("div",{className:"p-3 border rounded-lg",children:[e.jsx("div",{className:"font-medium",children:J.name}),e.jsx("div",{className:"text-sm text-muted-foreground",children:((he=J.instruments)==null?void 0:he.join(", "))||"No instruments specified"}),J.role&&e.jsx(X,{variant:"outline",className:"mt-1",children:J.role})]},ce)}),s.length===0&&e.jsxs("div",{className:"text-center py-4 text-muted-foreground",children:[e.jsx(Ze,{className:"h-8 w-8 mx-auto mb-2 opacity-50"}),e.jsx("p",{children:"No musicians assigned yet"})]})]})})]})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsx(R,{children:e.jsxs(L,{className:"p-4 text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-primary",children:v.technicalRequirements.length}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Total Requirements"})]})}),e.jsx(R,{children:e.jsxs(L,{className:"p-4 text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-green-600",children:v.technicalRequirements.filter(J=>J.status==="confirmed").length}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Confirmed"})]})}),e.jsx(R,{children:e.jsxs(L,{className:"p-4 text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-yellow-600",children:v.technicalRequirements.filter(J=>J.status==="pending").length}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Pending"})]})}),e.jsx(R,{children:e.jsxs(L,{className:"p-4 text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-red-600",children:v.technicalRequirements.filter(J=>J.priority==="critical").length}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Critical Items"})]})})]})]}),e.jsxs(ge,{value:"requirements",className:"space-y-4 lg:space-y-6 animate-fade-in-up mobile-container",children:[e.jsxs(R,{children:[e.jsxs(Y,{children:[e.jsxs(Q,{className:"flex items-center gap-2",children:[e.jsx(Ze,{className:"h-5 w-5"}),"Band Makeup & Instrumentation"]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Professional band configuration matching your technical rider format"})]}),e.jsxs(L,{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold mb-3",children:"MANAGEMENT TEAM and BAND members are:"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"grid grid-cols-5 gap-4 font-semibold text-sm bg-gray-100 p-3 rounded",children:[e.jsx("div",{className:"col-span-1",children:"Membership"}),e.jsx("div",{className:"col-span-1",children:"Talent/Skill"}),e.jsx("div",{className:"col-span-2",children:"Full Name (Stage Name)"}),e.jsx("div",{className:"col-span-1",children:"Role"})]}),T.map((J,ce)=>e.jsxs("div",{className:"grid grid-cols-5 gap-4 p-3 border rounded items-center",children:[e.jsx(X,{variant:J.membership==="BAND"?"default":J.membership==="TEAM"?"outline":"secondary",className:`text-xs ${J.membership==="TEAM"?"border-orange-500 text-orange-700":""}`,children:J.membership}),e.jsxs(Re,{value:J.selectedTalent||"",onValueChange:he=>{he!=="__divider__"&&(console.log(` TALENT/SKILL CHANGE: ${J.fullName} selected "${he}"`),es(J.id,he),et(J.id,{selectedTalent:he}))},children:[e.jsx(Me,{className:"h-8 text-xs",children:e.jsx(Oe,{})}),e.jsx(_e,{children:oe(J).map((he,me)=>he.type==="Divider"?e.jsx("div",{className:"px-2 py-1 text-center text-gray-400 text-xs border-b",children:he.label},me):e.jsx(U,{value:he.value,className:he.type==="Primary"?"bg-blue-50 font-medium":he.type==="Secondary"?"bg-gray-50":he.type==="Generic"?"bg-green-50":"",children:e.jsxs("div",{className:"flex items-center justify-between w-full",children:[e.jsx("span",{style:{color:he.color==="blue"?"#3b82f6":he.color==="green"?"#16a34a":he.color==="orange"?"#ea580c":he.color==="purple"?"#9333ea":"#6b7280"},children:he.label}),e.jsxs("span",{className:"text-xs text-muted-foreground ml-2",children:[he.icon," ",he.type]})]})},me))})]}),e.jsxs("div",{className:"col-span-2 flex items-center gap-2",children:[e.jsx("div",{className:"flex-1 flex items-center gap-2",children:e.jsx($,{value:J.stageName?`${J.fullName} (${J.stageName})`:J.fullName,onChange:he=>{const me=he.target.value;if(me.includes("(")&&me.includes(")")){const Qe=me.split("(")[0].trim(),Be=me.split("(")[1].replace(")","").trim();et(J.id,{fullName:Qe,stageName:Be})}else et(J.id,{fullName:me,stageName:""})},className:"h-8 flex-1"})}),e.jsx(E,{variant:"ghost",size:"sm",onClick:()=>cs(J.id),className:"h-8 w-8 p-0 text-red-500 hover:text-red-700",children:""})]}),e.jsxs("div",{className:"flex flex-col gap-1",children:[J.membership!=="MANAGEMENT"&&e.jsx("div",{className:"flex flex-wrap gap-1",children:(()=>{const he=new Set,me=[];if(J.type==="Professional"&&J.assignedRole&&!he.has(J.assignedRole)&&(he.add(J.assignedRole),me.push(e.jsxs(X,{variant:"default",className:"text-xs bg-red-600 text-white",children:[" ",J.assignedRole]},"assigned"))),J.roleId){const we=Js(J.roleId);we&&!he.has(we)&&(he.add(we),me.push(e.jsxs(X,{variant:"default",className:"text-xs bg-blue-600 text-white",children:[" ",we]},"primary")))}return me})()}),J.membership!=="MANAGEMENT"&&e.jsx("div",{className:"flex flex-wrap gap-1",children:(()=>{const he=[];return J.assignmentRole==="Main Booked Talent"&&he.push(e.jsx(X,{variant:"secondary",className:"text-xs bg-purple-600 text-white",children:"Main Booked Talent"},"main-talent")),J.assignmentRole&&J.assignmentRole!=="Main Booked Talent"&&he.push(e.jsx(X,{variant:"outline",className:"text-xs",children:J.assignmentRole},"assignment")),he})()}),J.membership!=="MANAGEMENT"&&J.availableRoles&&J.availableRoles.length>0&&e.jsxs("div",{className:"flex flex-wrap gap-1",children:[e.jsx("span",{className:"text-xs text-muted-foreground",children:"Available:"}),J.availableRoles.slice(0,2).map((he,me)=>e.jsx(X,{variant:"outline",className:"text-xs",children:he},me)),J.availableRoles.length>2&&e.jsxs("span",{className:"text-xs text-muted-foreground",children:["+",J.availableRoles.length-2]})]}),J.membership==="MANAGEMENT"&&e.jsx("div",{className:"flex gap-1 mt-1",children:e.jsx($,{value:J.selectedTalent||"",onChange:he=>et(J.id,{selectedTalent:he.target.value}),className:"h-6 text-xs",placeholder:"Add roles..."})})]})]},J.id)),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(E,{variant:"outline",className:"flex-1",onClick:()=>Te("BAND"),children:[e.jsx(st,{className:"h-4 w-4 mr-2"}),"Add Band Member"]}),e.jsxs(E,{variant:"outline",className:"flex-1",onClick:()=>Te("TEAM"),children:[e.jsx(st,{className:"h-4 w-4 mr-2"}),"+ Add Team Member"]}),e.jsxs(E,{variant:"outline",className:"flex-1",onClick:()=>Te("MANAGEMENT"),children:[e.jsx(st,{className:"h-4 w-4 mr-2"}),"Add Management"]})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs(R,{children:[e.jsx(Y,{children:e.jsx(Q,{className:"text-lg",children:"Band Makeup Summary"})}),e.jsx(L,{children:e.jsx("div",{className:"space-y-2",children:(()=>{const J=T.reduce((he,me)=>{if(me.membership==="BAND"){const we=me.selectedTalent||"Performer";he[we]=(he[we]||0)+1}return he},{}),ce=Object.values(J).reduce((he,me)=>he+me,0);return e.jsxs(e.Fragment,{children:[Object.entries(J).map(([he,me])=>e.jsxs("div",{className:"flex justify-between items-center p-2 border rounded",children:[e.jsx("span",{className:"text-sm",children:he}),e.jsx(X,{variant:"outline",children:me})]},he)),e.jsx("div",{className:"border-t pt-2 mt-2",children:e.jsxs("div",{className:"flex justify-between items-center font-semibold",children:[e.jsx("span",{children:"Total Band Members"}),e.jsx(X,{children:ce})]})})]})})()})})]}),e.jsxs(R,{children:[e.jsx(Y,{children:e.jsx(Q,{className:"text-lg",children:"Equipment Responsibilities"})}),e.jsx(L,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-green-700 mb-2",children:"MANAGEMENT TEAM Provides:"}),e.jsxs("ul",{className:"text-sm space-y-1 text-green-600",children:[e.jsx("li",{children:" ARTIST"}),e.jsx("li",{children:" BAND MAKEUP as aforementioned"})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-blue-700 mb-2",children:"CLIENT Provides:"}),e.jsxs("ul",{className:"text-sm space-y-1 text-blue-600",children:[e.jsx("li",{children:" One (1) small table for ARTIST's Tambourine and shaker"}),e.jsx("li",{children:" One (1) Performance Stage"}),e.jsx("li",{children:" Stage Lighting"}),e.jsx("li",{children:" Sound Reinforcement System"}),e.jsx("li",{children:" Audio/Video Recording"}),e.jsx("li",{children:" Audio/Video Streaming"}),e.jsx("li",{children:" Photography"})]})]})]})})]})]})]})]}),e.jsxs(R,{children:[e.jsxs(Y,{children:[e.jsxs(Q,{className:"flex items-center gap-2",children:[e.jsx(Gt,{className:"h-5 w-5"}),"Equipment Request"]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"CLIENT shall provide the following equipment, or equivalent. Includes lighting requirements."}),e.jsxs("div",{className:"p-3 bg-yellow-50 border border-yellow-200 rounded text-sm text-yellow-800",children:[e.jsx("strong",{children:"Lighting Note:"})," All lighting equipment must be pre-hung prior to arrival for rehearsal."]})]}),e.jsx(L,{children:e.jsxs("div",{className:"space-y-4",children:[((eN=v.equipmentRequests)==null?void 0:eN.map((J,ce)=>e.jsxs("div",{className:"flex items-center gap-3 p-3 border rounded",children:[e.jsx(hs,{id:`equipment-${ce}`,checked:J.required,onCheckedChange:he=>{y(me=>{var we;return{...me,equipmentRequests:((we=me.equipmentRequests)==null?void 0:we.map((Qe,Be)=>Be===ce?{...Qe,required:!!he}:Qe))||[]}})}}),e.jsx($,{value:J.item,onChange:he=>{y(me=>{var we;return{...me,equipmentRequests:((we=me.equipmentRequests)==null?void 0:we.map((Qe,Be)=>Be===ce?{...Qe,item:he.target.value}:Qe))||[]}})},className:"flex-1 text-sm"}),e.jsx(E,{variant:"ghost",size:"sm",onClick:()=>{const he=[...v.equipmentRequests||[]];he[ce]={...J,required:!J.required},y(me=>({...me,equipmentRequests:he}))},className:"h-8 px-2",children:e.jsx(X,{variant:J.required?"default":"outline",children:J.required?"Required":"Optional"})}),e.jsx(E,{variant:"ghost",size:"sm",onClick:()=>{y(he=>{var me;return{...he,equipmentRequests:((me=he.equipmentRequests)==null?void 0:me.filter((we,Qe)=>Qe!==ce))||[]}})},className:"h-8 w-8 p-0 text-red-500 hover:text-red-700",children:""})]},ce)))||["Aguilar Tone Hammer 500 Bass Head with 8 X 10 cabinet (preferred) or equivalent","Fender twin reverb guitar amp or equivalent",`DW fusion drum kit (14'' snare; 10", 12", 16" toms)`,"DW 5000 kick pedal",`Meinl byzance cymbals (14" hi hat, 16'' crash, 17/18" crash, 8" splash, splash stack, ride)`,"Five (5) cymbal stands","One (1) wireless mic for ARTIST (Shure SM58 or equivalent)","Shure SM58 microphones (vocals) - additional as needed","DI boxes for instruments","Wedge monitors (sufficient for stage size) or in-ear monitors for BAND","In-ear Monitor XLR/TRS connection for ARTIST","Floor monitors for background vocals","Small table upon which to rest ARTIST's Tambourine and shaker","Music stands (as needed)","Power distribution and cable management"].map((J,ce)=>{var he,me,we,Qe;return e.jsxs("div",{className:"flex items-center gap-3 p-3 border rounded",children:[e.jsx(hs,{id:`equipment-${ce}`,defaultChecked:!0}),e.jsx($,{defaultValue:J,className:"flex-1 text-sm",onChange:Be=>{const ot=v.equipmentRequests||[];ot[ce]={id:`eq-${ce}`,item:Be.target.value,required:!0,category:"Equipment"},y(Ot=>({...Ot,equipmentRequests:ot}))}}),e.jsx(E,{variant:"ghost",size:"sm",onClick:()=>{const Be=v.equipmentRequests||[];Be[ce]?Be[ce].required=!Be[ce].required:Be[ce]={id:`eq-${ce}`,item:J,required:!1,category:"Equipment"},y(ot=>({...ot,equipmentRequests:Be}))},className:"h-8 px-2",children:e.jsx(X,{variant:((me=(he=v.equipmentRequests)==null?void 0:he[ce])==null?void 0:me.required)!==!1?"default":"outline",children:((Qe=(we=v.equipmentRequests)==null?void 0:we[ce])==null?void 0:Qe.required)!==!1?"Required":"Optional"})}),e.jsx(E,{variant:"ghost",size:"sm",onClick:()=>{y(Be=>{var ot;return{...Be,equipmentRequests:((ot=Be.equipmentRequests)==null?void 0:ot.filter((Ot,Ft)=>Ft!==ce))||[]}})},className:"h-8 w-8 p-0 text-red-500 hover:text-red-700",children:""})]},ce)}),e.jsxs(E,{variant:"outline",className:"w-full",onClick:()=>{y(J=>({...J,equipmentRequests:[...J.equipmentRequests||[],{id:`eq-${Date.now()}`,item:"",required:!1,category:"Equipment"}]}))},children:[e.jsx(st,{className:"h-4 w-4 mr-2"}),"Add Equipment Requirement"]})]})})]}),e.jsxs(R,{children:[e.jsxs(Y,{children:[e.jsxs(Q,{className:"flex items-center gap-2",children:[e.jsx(Bl,{className:"h-5 w-5"}),"Lighting Requirements"]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Professional lighting specifications and requirements"}),e.jsxs("div",{className:"p-3 bg-blue-50 border border-blue-200 rounded text-sm text-blue-800",children:[e.jsx("strong",{children:"Pre-Hanging Required:"})," All lighting equipment must be pre-hung and tested prior to arrival for rehearsal."]})]}),e.jsx(L,{children:e.jsxs("div",{className:"space-y-4",children:[["One-two (1-2) follow spots/spotlights for the ARTIST (as applicable)","Gels for Pops lighting (variety of colors and patterns) (as applicable)","General stage wash lighting","Front lighting for performance area","Color changing capability","Backlighting for band/musicians","Side lighting for depth and dimension","Haze machine for atmospheric effects (optional)","LED strip lighting for stage perimeter","Lighting control board/operator"].map((J,ce)=>e.jsxs("div",{className:"flex items-center gap-3 p-3 border rounded bg-gradient-to-r from-blue-50 to-purple-50",children:[e.jsx(hs,{id:`lighting-${ce}`,defaultChecked:ce<5}),e.jsx($,{defaultValue:J,className:"flex-1 text-sm"}),e.jsx(X,{variant:ce<5?"default":"outline",children:ce<5?"Required":"Optional"}),e.jsx(E,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0 text-red-500 hover:text-red-700",children:""})]},ce)),e.jsxs(E,{variant:"outline",className:"w-full",onClick:()=>{},children:[e.jsx(st,{className:"h-4 w-4 mr-2"}),"Add Lighting Requirement"]})]})})]})]}),e.jsx(ge,{value:"stage",className:"space-y-4 lg:space-y-6 animate-fade-in-up mobile-container",children:e.jsxs(R,{children:[e.jsxs(Y,{children:[e.jsxs(Q,{className:"flex items-center gap-2",children:[e.jsx(To,{className:"h-5 w-5"}),"Interactive Stage Plot Designer"]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Drag and drop instruments and equipment to design your stage layout"})]}),e.jsx(L,{children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(q,{children:"Stage Width (ft)"}),e.jsx($,{type:"number",value:v.stageLayout.stageWidth,onChange:J=>y(ce=>({...ce,stageLayout:{...ce.stageLayout,stageWidth:parseInt(J.target.value)||20}})),disabled:!a})]}),e.jsxs("div",{children:[e.jsx(q,{children:"Stage Height (ft)"}),e.jsx($,{type:"number",value:v.stageLayout.stageHeight,onChange:J=>y(ce=>({...ce,stageLayout:{...ce.stageLayout,stageHeight:parseInt(J.target.value)||16}})),disabled:!a})]}),e.jsxs("div",{children:[e.jsx(q,{children:"Stage Type"}),e.jsxs(Re,{value:v.stageLayout.stageType,onValueChange:J=>y(ce=>({...ce,stageLayout:{...ce.stageLayout,stageType:J}})),disabled:!a,children:[e.jsx(Me,{children:e.jsx(Oe,{})}),e.jsxs(_e,{children:[e.jsx(U,{value:"indoor",children:"Indoor"}),e.jsx(U,{value:"outdoor",children:"Outdoor"}),e.jsx(U,{value:"amphitheater",children:"Amphitheater"}),e.jsx(U,{value:"arena",children:"Arena"}),e.jsx(U,{value:"club",children:"Club"})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(q,{children:"Add Equipment"}),e.jsx("div",{className:"grid grid-cols-2 gap-2 mt-2",children:[{type:"",name:"Piano"},{type:"",name:"Guitar"},{type:"",name:"Drums"},{type:"",name:"Mic"},{type:"",name:"Monitor"},{type:"",name:"Screen"},{type:"",name:"Computer"},{type:"",name:"DJ Setup"}].map(J=>e.jsxs(E,{variant:"outline",size:"sm",onClick:()=>fe(J.type,J.name),disabled:!a,className:"text-xs",children:[J.type," ",J.name]},J.name))})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx(q,{children:"Band Member Placement"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(X,{variant:"outline",className:"text-xs",children:(()=>{const J=T.filter(he=>he.membership==="BAND").length;return`${F.filter(he=>T.some(me=>me.membership==="BAND"&&(he.assignedTo===me.fullName||he.assignedTo===me.stageName))).length} / ${J} Placed`})()}),e.jsx(E,{variant:"outline",size:"sm",onClick:()=>{T.filter(ce=>ce.membership!=="BAND"?!1:!F.some(he=>he.assignedTo===ce.fullName||he.assignedTo===ce.stageName)).forEach((ce,he)=>{const me=pt(ce);me.length>0?fe(me[0].type,me[0].name,ce):fe("","Mic",ce)})},disabled:!a,className:"text-xs h-7",children:"Place All"})]})]}),e.jsx("div",{className:"space-y-2 mt-2 max-h-40 overflow-y-auto",children:(()=>{const J=T.filter(me=>me.membership==="BAND"),ce=[],he=[];return J.forEach(me=>{F.some(Qe=>Qe.assignedTo===me.fullName||Qe.assignedTo===me.stageName)?ce.push(me):he.push(me)}),[...he,...ce]})().map((J,ce)=>{const he=pt(J),me=F.some(we=>we.assignedTo===J.fullName||we.assignedTo===J.stageName);return e.jsxs("div",{className:`border rounded p-2 transition-all duration-200 ${me?"bg-green-50 border-green-200 opacity-75":"bg-white border-gray-200 hover:border-blue-300"}`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-1",children:[e.jsxs("div",{className:"text-xs font-medium text-muted-foreground",children:[J.fullName," (",J.selectedTalent||J.role,")"]}),me&&e.jsx(X,{variant:"secondary",className:"text-xs bg-green-600 text-white",children:" Placed"})]}),e.jsx("div",{className:"grid grid-cols-2 gap-1",children:he.length>0?he.map((we,Qe)=>e.jsxs(E,{variant:me?"secondary":"outline",size:"sm",onClick:()=>fe(we.type,we.name,J),disabled:!a||me,className:`text-xs h-7 ${me?"bg-green-100 text-green-700 cursor-not-allowed":"hover:bg-blue-50"}`,children:[we.type," ",we.name,me&&" "]},Qe)):e.jsxs(E,{variant:me?"secondary":"outline",size:"sm",onClick:()=>fe("","Mic",J),disabled:!a||me,className:`text-xs h-7 col-span-2 ${me?"bg-green-100 text-green-700 cursor-not-allowed":"hover:bg-blue-50"}`,children:[" Add ",J.fullName,me&&" "]})})]},J.id)})}),(()=>{const J=T.filter(me=>me.membership==="BAND").length,ce=F.filter(me=>T.some(we=>we.membership==="BAND"&&(me.assignedTo===we.fullName||me.assignedTo===we.stageName))).length,he=J-ce;return he>0?e.jsxs("div",{className:"mt-2 p-2 bg-yellow-50 border border-yellow-200 rounded text-center",children:[e.jsxs("p",{className:"text-sm text-yellow-800",children:[" ",he," band member",he===1?"":"s"," not placed on stage plot"]}),e.jsx("p",{className:"text-xs text-yellow-600",children:'Click instruments above or use "Place All" to add missing members'})]}):null})()]})]})]}),e.jsxs("div",{className:"lg:col-span-3 space-y-4",children:[e.jsxs("div",{className:"relative border-2 border-gray-300 rounded-lg bg-gradient-to-b from-gray-50 to-gray-100 overflow-hidden",style:{height:"400px",width:"100%"},children:[e.jsxs("div",{className:"absolute inset-0 bg-gradient-to-b from-gray-200 to-gray-100",children:[e.jsx("div",{className:"absolute top-2 left-1/2 transform -translate-x-1/2 text-xs text-gray-600 font-medium",children:"AUDIENCE"}),e.jsx("div",{className:"absolute bottom-2 left-1/2 transform -translate-x-1/2 text-xs text-gray-600 font-medium",children:"BACKSTAGE"})]}),v.stageLayout.elements.map(J=>e.jsxs("div",{className:`absolute cursor-move bg-white border-2 rounded-lg shadow-md select-none hover:shadow-lg stage-plot-element ${P.isDragging&&P.elementId===J.id?"dragging":""} ${I===J.id?"border-green-500 ring-2 ring-green-200":"border-blue-400"}`,style:{left:`${J.x}%`,top:`${J.y}%`,transform:`rotate(${J.rotation}deg)`,borderColor:J.color||"#3B82F6"},onMouseDown:ce=>un(J.id,ce),onTouchStart:ce=>un(J.id,ce),onClick:()=>W(J.id),title:`${J.name}${J.assignedTo?` - Assigned to ${J.assignedTo}`:""}`,children:[e.jsx("div",{className:"stage-plot-icon",children:J.icon||""}),e.jsx("div",{className:"stage-plot-text",children:J.name}),J.assignedRole&&e.jsx("div",{className:"stage-plot-text text-muted-foreground",children:J.assignedRole}),J.assignedTo&&e.jsx("div",{className:"stage-plot-text text-gray-600",children:J.assignedTo}),e.jsx(E,{variant:"ghost",size:"sm",className:"absolute -top-1 -right-1 h-4 w-4 p-0 text-red-500 hover:text-red-700",onClick:ce=>{ce.stopPropagation(),zt(J.id)},disabled:!a,children:""})]},J.id)),v.stageLayout.elements.length===0&&e.jsx("div",{className:"absolute inset-0 flex items-center justify-center text-gray-500",children:e.jsxs("div",{className:"text-center",children:[e.jsx(To,{className:"h-8 w-8 mx-auto mb-2 opacity-50"}),e.jsx("p",{className:"text-sm",children:"Click equipment buttons to add to stage"})]})})]}),I&&e.jsxs("div",{className:"bg-white border rounded-lg p-4",children:[e.jsxs("div",{className:"text-sm font-medium mb-3 text-center",children:["Control Selected: ",(tN=v.stageLayout.elements.find(J=>J.id===I))==null?void 0:tN.name]}),e.jsxs("div",{className:"grid grid-cols-3 gap-2 max-w-48 mx-auto mb-4",children:[e.jsx("div",{}),e.jsx(E,{variant:"outline",size:"sm",onClick:()=>ds("up"),disabled:!a,className:"h-10 w-10 p-0",children:""}),e.jsx("div",{}),e.jsx(E,{variant:"outline",size:"sm",onClick:()=>ds("left"),disabled:!a,className:"h-10 w-10 p-0",children:""}),e.jsx(E,{variant:"outline",size:"sm",onClick:()=>W(null),className:"h-10 w-10 p-0 text-xs",children:""}),e.jsx(E,{variant:"outline",size:"sm",onClick:()=>ds("right"),disabled:!a,className:"h-10 w-10 p-0",children:""}),e.jsx("div",{}),e.jsx(E,{variant:"outline",size:"sm",onClick:()=>ds("down"),disabled:!a,className:"h-10 w-10 p-0",children:""}),e.jsx("div",{})]}),e.jsxs("div",{className:"flex gap-2 justify-center",children:[e.jsx(E,{variant:"outline",size:"sm",onClick:()=>I&&Ws(I,"left"),disabled:!a,className:"flex items-center gap-1",children:" Left"}),e.jsx(E,{variant:"outline",size:"sm",onClick:()=>I&&Ws(I,"right"),disabled:!a,className:"flex items-center gap-1",children:"Right "})]})]}),e.jsxs("div",{id:"stage-legend",className:"bg-white border rounded p-3 mt-4",style:{width:"400px"},children:[e.jsxs("h4",{className:"font-semibold text-sm mb-2 leading-tight",children:["Legend (",F.length," items)"]}),e.jsxs("div",{className:"space-y-2",children:[F.map(J=>e.jsxs("div",{className:"flex items-center gap-3 p-2 border rounded bg-gray-50",children:[e.jsx("div",{className:"w-4 h-4 rounded border flex-shrink-0",style:{backgroundColor:J.color}}),e.jsxs("div",{className:"flex-1 min-w-0",children:[_===J.id&&a?e.jsx($,{className:"h-6 text-sm font-medium border-0 p-1 bg-transparent",value:J.name,onChange:ce=>gs(J.id,ce.target.value),onBlur:()=>B(null),onKeyDown:ce=>{ce.key==="Enter"&&B(null)},autoFocus:!0}):e.jsx("div",{className:"text-sm font-medium cursor-pointer hover:bg-gray-100 px-2 py-1 rounded",title:J.name,onClick:()=>a&&B(J.id),children:J.name}),J.assignedTo&&e.jsxs("div",{className:"text-xs text-muted-foreground mt-1 flex items-center gap-2",children:[e.jsxs("span",{children:["Assigned to: ",J.assignedTo]}),J.role&&e.jsx("span",{className:"px-2 py-0.5 bg-blue-100 text-blue-800 rounded text-xs font-medium",children:J.role}),J.role&&J.role.toLowerCase().includes("drum")&&a&&e.jsx(E,{variant:"ghost",size:"sm",onClick:()=>{const ce=T.find(he=>he.fullName===J.assignedTo||he.stageName===J.assignedTo);ce&&le(ce)},className:"h-4 w-4 p-0 text-blue-600 hover:text-blue-800",title:"Configure drum kit",children:e.jsx(u4,{className:"h-3 w-3"})})]})]})]},J.id)),F.length===0&&e.jsx("div",{className:"text-muted-foreground text-center py-2",style:{fontSize:"8px"},children:"Add equipment"})]})]}),e.jsxs(E,{variant:"outline",size:"sm",onClick:()=>ts(),className:"w-full mt-2",disabled:F.length===0,children:[e.jsx(Cs,{className:"w-4 h-4 mr-2"}),"Export Stage Plot with Legend"]})]})]})})]})}),e.jsxs(ge,{value:"audio",className:"space-y-4 lg:space-y-6 animate-fade-in-up mobile-container",children:[e.jsxs(R,{children:[e.jsx(Y,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs(Q,{className:"flex items-center gap-2",children:[e.jsx(yn,{className:"h-5 w-5"}),"Mixer Input Patch List"]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Professional mixer configuration matching industry technical rider standards"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(E,{variant:"outline",size:"sm",onClick:en,className:"h-8",disabled:v.stageLayout.elements.filter(J=>J.assignedTo&&J.assignedTo.trim()!=="").length===0,children:[e.jsx(In,{className:"w-4 h-4 mr-1"}),"Auto-Assign"]}),e.jsxs(E,{variant:"outline",size:"sm",onClick:()=>te(),className:"h-8",children:[e.jsx(Oy,{className:"w-4 h-4 mr-1"}),"Reset to Defaults"]})]})]})}),e.jsx(L,{children:e.jsxs("div",{className:"space-y-4",children:[H.filter(J=>D[J]).map(J=>{const ce=D[J],he=se.draggedGroup===J,me=se.dragOverGroup===J;return e.jsxs("div",{className:`space-y-2 transition-all duration-200 ${he?"opacity-50 scale-95":""} ${me?"ring-2 ring-blue-400 bg-blue-50":""}`,draggable:a,onDragStart:we=>ee(we,J),onDragOver:we=>ae(we,J),onDragLeave:Se,onDrop:we=>We(we,J),onDragEnd:re,children:[e.jsxs("div",{className:`flex items-center justify-between cursor-move ${a?"hover:bg-gray-50":""} p-2 rounded border ${me?"border-blue-400":"border-gray-200"}`,children:[e.jsxs("div",{className:"flex items-center gap-2",children:[a&&e.jsxs("div",{className:"flex flex-col gap-1 text-gray-400",children:[e.jsx("div",{className:"w-1 h-1 bg-current rounded-full"}),e.jsx("div",{className:"w-1 h-1 bg-current rounded-full"}),e.jsx("div",{className:"w-1 h-1 bg-current rounded-full"}),e.jsx("div",{className:"w-1 h-1 bg-current rounded-full"}),e.jsx("div",{className:"w-1 h-1 bg-current rounded-full"}),e.jsx("div",{className:"w-1 h-1 bg-current rounded-full"})]}),e.jsxs("h4",{className:`font-semibold text-sm p-2 rounded capitalize ${J==="drums"?"bg-yellow-100":J==="bass"?"bg-blue-100":J==="guitar"?"bg-green-100":J==="keyboards"?"bg-purple-100":J==="percussion"?"bg-orange-100":J==="brass"?"bg-red-100":J==="vocals"?"bg-pink-100":"bg-gray-100"}`,children:[J.toUpperCase(),e.jsxs("span",{className:"ml-2 text-xs text-muted-foreground",children:["(",(ce==null?void 0:ce.length)||0," channels)"]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[a&&e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsx(E,{variant:"outline",size:"sm",onClick:we=>{we.stopPropagation(),je(J)},className:"h-6 w-6 p-0",disabled:H.indexOf(J)===0,title:"Move group up",children:e.jsx(n4,{className:"w-3 h-3"})}),e.jsx(E,{variant:"outline",size:"sm",onClick:we=>{we.stopPropagation(),Pe(J)},className:"h-6 w-6 p-0",disabled:H.indexOf(J)===H.length-1,title:"Move group down",children:e.jsx(My,{className:"w-3 h-3"})})]}),e.jsxs(E,{variant:"outline",size:"sm",onClick:()=>Ae(J),className:"h-8",children:[e.jsx(st,{className:"w-4 h-4 mr-1"}),"Add Channel"]})]})]}),e.jsxs("div",{className:"grid grid-cols-6 gap-3 items-center p-2 bg-gray-50 rounded text-xs font-medium text-muted-foreground",children:[e.jsx("div",{children:"Channel"}),e.jsx("div",{children:"Input"}),e.jsx("div",{children:"Assigned To"}),e.jsx("div",{children:"Applicable"}),e.jsx("div",{children:"Notes"}),e.jsx("div",{children:"Actions"})]}),ce.map((we,Qe)=>{const Be=de(J,Qe);return e.jsxs("div",{className:"grid grid-cols-6 gap-3 items-center p-2 border rounded",children:[e.jsxs("div",{className:"font-mono text-sm font-semibold",children:["Ch ",Be]}),e.jsx($,{value:we.input,onChange:ot=>Ie(J,we.id,ot.target.value),className:"h-8 text-sm",placeholder:"Input name"}),e.jsxs(Re,{value:we.assignedTo||"unassigned",onValueChange:ot=>{ot==="unassigned"?Ge(J,we.id,""):Ge(J,we.id,ot)},children:[e.jsx(Me,{className:"h-8 text-xs",children:e.jsx(Oe,{placeholder:"Assign to..."})}),e.jsxs(_e,{children:[e.jsx(U,{value:"unassigned",children:"- Unassigned -"}),T.map(ot=>e.jsxs(U,{value:ot.fullName,children:[ot.fullName,ot.selectedTalent&&e.jsxs("span",{className:"text-xs text-muted-foreground ml-1",children:["(",ot.selectedTalent,")"]})]},ot.id))]})]}),e.jsxs("div",{children:[e.jsx(hs,{id:`${we.id}-applicable`,checked:we.applicable,onCheckedChange:ot=>ve(J,we.id,ot)}),e.jsx(q,{htmlFor:`${we.id}-applicable`,className:"ml-2 text-xs",children:"Applicable"})]}),e.jsx($,{placeholder:"Notes",className:"h-8 text-sm",value:we.notes,onChange:ot=>ie(J,we.id,ot.target.value)}),e.jsx(E,{variant:"outline",size:"sm",onClick:()=>be(J,we.id),className:"h-8 w-8 p-0",disabled:ce.length<=1,children:e.jsx(Xt,{className:"w-4 h-4"})})]},we.id)})]},J)}),a&&e.jsxs("div",{className:"mt-4 p-3 bg-blue-50 border border-blue-200 rounded",children:[e.jsxs("p",{className:"text-sm font-medium text-blue-800 flex items-center gap-2",children:[e.jsx(M6,{className:"w-4 h-4"}),"Professional Mixer Workflow"]}),e.jsxs("p",{className:"text-xs text-blue-700 mt-1",children:[e.jsx("strong",{children:"Reorder channel groups:"})," Drag and drop headers OR use the up/down arrow buttons on each group. ",e.jsx("br",{}),"Channel numbers automatically update to help mixing engineers organize their workflow professionally."]})]}),e.jsxs("div",{className:"mt-6 p-4 bg-yellow-50 border border-yellow-200 rounded",children:[e.jsx("p",{className:"text-sm font-medium text-yellow-800",children:"Note: Only Channels Highlighted/Checked are Applicable"}),e.jsx("p",{className:"text-xs text-yellow-700 mt-1",children:"This matches the professional mixer input patch list format from your technical rider document."})]})]})})]}),e.jsxs(R,{children:[e.jsxs(Y,{children:[e.jsxs(Q,{className:"flex items-center gap-2",children:[e.jsx(qr,{className:"h-5 w-5"}),"BAND Monitor Mix"]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Individual monitor mix configuration for each assigned band member"})]}),e.jsx(L,{children:e.jsxs("div",{className:"space-y-6",children:[T.filter(J=>J.talentType!=="Professional"&&J.talentType!=="Management"&&J.talentType!=="Admin"&&J.talentType!=="Superadmin"&&J.talentType!=="Fan").map((J,ce)=>e.jsxs(R,{className:"border-l-4 border-l-blue-500",children:[e.jsx(Y,{className:"pb-3",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(X,{variant:"outline",className:"bg-blue-50",children:J.talentType}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold",children:J.fullName}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:[J.stageName&&`(${J.stageName})`,"  ",J.selectedTalent||J.primaryRole]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:"Monitor Type"}),e.jsxs(Re,{value:J.monitorType||"wedge",onValueChange:he=>{et(J.id,{monitorType:he})},children:[e.jsx(Me,{className:"w-32 h-8",children:e.jsx(Oe,{})}),e.jsxs(_e,{children:[e.jsx(U,{value:"wedge",children:" Wedge"}),e.jsx(U,{value:"iem-wired",children:" Wired IEM"}),e.jsx(U,{value:"iem-wireless",children:" Wireless IEM"})]})]})]})]})}),e.jsx(L,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("div",{className:"text-sm font-medium text-muted-foreground",children:"Personal Monitor Mix (Add channels they want to hear)"}),e.jsxs(Re,{onValueChange:he=>{if(he){let me=null,we="";if(Object.entries(D).forEach(([Qe,Be])=>{const ot=Be.find(Ot=>Ot.id===he);ot&&(me=ot,we=Qe)}),me){const Be={...J.monitorMix||{},[he]:{selected:!0,volume:70,sectionName:we,channelName:me.input}};et(J.id,{monitorMix:Be})}}},children:[e.jsx(Me,{className:"w-48",children:e.jsx(Oe,{placeholder:"+ Add Channel to Mix"})}),e.jsx(_e,{children:Object.entries(D).map(([he,me])=>e.jsxs("div",{children:[e.jsx("div",{className:"px-2 py-1 text-xs font-semibold text-muted-foreground uppercase",children:he}),me.filter(we=>{var Qe,Be;return!((Be=(Qe=J.monitorMix)==null?void 0:Qe[we.id])!=null&&Be.selected)}).map((we,Qe)=>{const Be=de(he,Qe);return e.jsxs(U,{value:we.id,children:["Ch ",Be," - ",we.input]},we.id)})]},he))})]})]}),e.jsxs("div",{className:"space-y-2",children:[Object.entries(J.monitorMix||{}).filter(([he,me])=>me.selected).map(([he,me])=>{let we=0,Qe=me.sectionName||"";if(Qe){const ot=D[Qe].findIndex(Ot=>Ot.id===he);ot>=0&&(we=de(Qe,ot))}return e.jsxs("div",{className:`flex items-center gap-3 p-3 rounded border ${Qe==="drums"?"bg-yellow-50 border-yellow-200":Qe==="bass"?"bg-blue-50 border-blue-200":Qe==="guitar"?"bg-green-50 border-green-200":Qe==="keyboards"?"bg-purple-50 border-purple-200":Qe==="vocals"?"bg-pink-50 border-pink-200":"bg-orange-50 border-orange-200"}`,children:[e.jsx("div",{className:"flex-1",children:e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsxs("span",{className:"font-mono text-sm font-semibold",children:["Ch ",we]}),e.jsx("span",{className:"text-sm font-medium",children:me.channelName}),e.jsx(X,{variant:"outline",className:"text-xs capitalize",children:Qe})]})}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-xs text-muted-foreground w-8",children:"Vol:"}),e.jsx($,{type:"range",min:"0",max:"100",value:me.volume||70,onChange:Be=>{const Ot={...J.monitorMix||{},[he]:{...me,volume:parseInt(Be.target.value)}};et(J.id,{monitorMix:Ot})},className:"w-20 h-6"}),e.jsx("span",{className:"text-sm font-medium w-8 text-center",children:me.volume||70})]}),e.jsx(E,{variant:"ghost",size:"sm",onClick:()=>{const ot={...J.monitorMix||{}};delete ot[he],et(J.id,{monitorMix:ot})},className:"h-8 w-8 p-0 text-muted-foreground hover:text-destructive",children:e.jsx(Xt,{className:"w-4 h-4"})})]},he)}),Object.keys(J.monitorMix||{}).filter(he=>{var me,we;return(we=(me=J.monitorMix)==null?void 0:me[he])==null?void 0:we.selected}).length===0&&e.jsxs("div",{className:"text-center py-6 text-muted-foreground",children:[e.jsx(qr,{className:"h-8 w-8 mx-auto mb-2 opacity-50"}),e.jsx("p",{className:"text-sm",children:"No channels added to monitor mix yet"}),e.jsx("p",{className:"text-xs",children:"Use the dropdown above to add channels"})]})]}),e.jsx("div",{className:"pt-3 border-t",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(q,{className:"text-sm font-medium",children:"Overall Monitor Level"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx($,{type:"range",min:"0",max:"100",value:J.overallMonitorLevel||75,onChange:he=>{et(J.id,{overallMonitorLevel:parseInt(he.target.value)})},className:"w-24 h-6"}),e.jsxs("span",{className:"text-sm font-mono w-12 text-center",children:[J.overallMonitorLevel||75,"%"]})]})]})})]})})]},J.id)),T.filter(J=>J.talentType!=="Professional"&&J.talentType!=="Management"&&J.talentType!=="Admin"&&J.talentType!=="Superadmin"&&J.talentType!=="Fan").length===0&&e.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[e.jsx(qr,{className:"h-12 w-12 mx-auto mb-3 opacity-50"}),e.jsx("p",{className:"font-medium",children:"No Band Members for Monitor Mixing"}),e.jsx("p",{className:"text-sm",children:"Assign band members to the booking to configure their monitor mixes"})]})]})})]})]}),e.jsx(ge,{value:"schedule",className:"space-y-4 lg:space-y-6 animate-fade-in-up mobile-container",children:e.jsx(nX,{bookingId:t,assignedTalent:h.map(J=>({id:J.userId,name:J.fullName||J.stageName||"Band Member",role:J.selectedTalent||J.assignedRole||"Performer",instruments:J.selectedTalent?[J.selectedTalent]:[]})),eventDetails:{eventName:`Booking ${t} Performance`,eventType:"Live Performance"},onSave:J=>{console.log(" SETLIST SAVED:",J),c({title:"Setlist Saved",description:"Performance setlist saved to technical rider"})}})}),e.jsx(ge,{value:"hospitality",className:"space-y-4 lg:space-y-6 animate-fade-in-up mobile-container",children:e.jsxs(R,{children:[e.jsxs(Y,{children:[e.jsxs(Q,{className:"flex items-center gap-2",children:[e.jsx(Ze,{className:"h-5 w-5"}),"Hospitality and Dressing Rooms"]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Professional hospitality requirements for artist and band"})]}),e.jsxs(L,{className:"space-y-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Individual Band Member Requirements"}),e.jsxs(X,{variant:"outline",className:"bg-blue-50",children:[T.filter(J=>J.membership==="BAND").length," Band Members"]})]}),T.filter(J=>J.membership==="BAND").map((J,ce)=>e.jsx(u,{member:J},J.id))]}),e.jsxs("div",{className:"mt-6 space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("h3",{className:"text-lg font-semibold flex items-center gap-2",children:[e.jsx(Gt,{className:"h-5 w-5"}),"Technical Requirements from Band Members"]}),e.jsx(X,{variant:"outline",className:"bg-orange-50",children:"Individual Requirements"})]}),T.filter(J=>J.membership==="BAND").map((J,ce)=>e.jsx(m,{member:J},`tech-${J.id}`))]}),e.jsxs("div",{className:"mt-6 space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("h3",{className:"text-lg font-semibold flex items-center gap-2",children:[e.jsx(Qt,{className:"h-5 w-5"}),"Performance Specifications from Band Members"]}),e.jsx(X,{variant:"outline",className:"bg-green-50",children:"Individual Specifications"})]}),T.filter(J=>J.membership==="BAND").map((J,ce)=>e.jsx(p,{member:J},`perf-${J.id}`))]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsx(g,{bandMembers:T.filter(J=>J.membership==="BAND")}),e.jsx(x,{bandMembers:T.filter(J=>J.membership==="BAND")})]})]})]})}),e.jsx(ge,{value:"end-placeholder",className:"hidden"})]}),Mt&&e.jsx(sX,{isOpen:ms,onClose:()=>{Ts(!1),Us(null)},onConfirm:ne,performerName:Mt.fullName||Mt.stageName||"Drummer",performerId:Mt.id,existingConfig:Ls[Mt.id],userInstruments:Mt.skillsAndInstruments||[]})]})}function aX({bookingId:t,contractType:s,onGenerated:n}){var le,ne,ue;const{toast:a}=nt(),[r,i]=N.useState(null),[l,c]=N.useState(null),[o,d]=N.useState(!1),[h,u]=N.useState(!0),[m,p]=N.useState(null),[g,x]=N.useState(""),[v,y]=N.useState(""),[f,b]=N.useState(0),[j,S]=N.useState(""),[k,T]=N.useState(!1),[A,C]=N.useState([]),[w,P]=N.useState(null),[M,I]=N.useState(null),[W,_]=N.useState(null);N.useState("idle"),N.useState("idle"),N.useState("idle"),N.useEffect(()=>{B()},[t,s]);const B=async()=>{try{u(!0),p(null);const te=await xe(`/api/bookings/${t}`);if(console.log("Booking data received:",te),te&&typeof te=="object"&&te.id)i(te),s==="technical_rider"&&await Promise.all([O(),z()]);else throw console.error("Invalid booking data structure:",te),new Error("Invalid booking data received")}catch(te){console.error("Failed to load booking details:",te),p("Failed to load booking details. Please try refreshing the page.")}finally{u(!1)}},O=async()=>{try{const te=await xe(`/api/bookings/${t}/technical-specs`);c(te)}catch{console.log("Technical specs not available or unauthorized")}},z=async()=>{try{const te=await xe(`/api/bookings/${t}/assigned-talent`);console.log("Contract Generator - Assigned musicians:",te),te&&Array.isArray(te)?C(te.map(Ae=>({id:Ae.userId||Ae.id,name:Ae.name||Ae.fullName,instruments:Ae.instruments||[]}))):(console.log("No assigned musicians found"),C([]))}catch(te){console.error("Failed to load assigned musicians:",te),C([])}},F=async te=>{try{await xe(`/api/bookings/${t}/enhanced-technical-rider`,{method:"POST",body:JSON.stringify(te)}),a({title:"Technical Rider Saved",description:"Enhanced technical rider saved successfully"})}catch{a({title:"Save Failed",description:"Failed to save technical rider",variant:"destructive"})}},K=async()=>{try{const te=await xe(`/api/bookings/${t}/enhanced-technical-rider`);return a({title:"Technical Rider Loaded",description:"Enhanced technical rider loaded successfully"}),te}catch{return console.log("No existing technical rider found"),null}},D=async(te,Ae)=>{const Ge=te/Ae.length;for(let be=0;be<Ae.length;be++){S(Ae[be]);const Ie=(be+1)/Ae.length*100,ve=be/Ae.length*100,ie=Ie-ve,de=Ge*.8,ee=50,ae=de/ee,Se=ie/ae;for(let We=0;We<ae;We++)await new Promise(re=>setTimeout(re,ee)),b(ve+Se*We);b(Ie),await new Promise(We=>setTimeout(We,Ge*.2))}},G=async()=>{try{if(d(!0),b(0),S("Initializing..."),s==="technical_rider")return await H();const Ae=D(3e3,["Validating booking data...","Processing contract template...","Inserting contract details...","Generating terms and clauses...","Formatting document structure...","Finalizing contract..."]),Ge={contractType:s,customClauses:g,additionalNotes:v};let be="";s==="booking_agreement"?be=`/api/bookings/${t}/generate-booking-contract`:s==="performance_agreement"?be=`/api/bookings/${t}/generate-performance-contract`:be=`/api/bookings/${t}/generate-contract`;const Ie=await xe(be,{method:"POST",body:JSON.stringify(Ge)});await Ae,S("Complete!"),b(100),a({title:"Contract Generated",description:`${se()} has been successfully generated.`}),n==null||n(),await new Promise(ve=>setTimeout(ve,500)),V()}catch(te){console.error("Generate contract error:",te),S("Error occurred"),a({title:"Generation Failed",description:"Failed to generate contract. Please try again.",variant:"destructive"})}finally{d(!1),b(0),S("")}},H=async()=>{var te;if(!w||!M){a({title:"Missing Components",description:"Please save both stage plot and mixer patch list before generating technical rider",variant:"destructive"}),d(!1);return}try{const Ge=D(4e3,["Validating technical components...","Processing stage plot data...","Integrating mixer patch list...","Including setlist information...","Generating comprehensive rider...","Finalizing PDF document..."]),be=await xe(`/api/bookings/${t}/complete-technical-rider`,{method:"POST",body:JSON.stringify({stagePlot:w,patchList:M,setlist:W,assignedMusicians:A,customClauses:g,additionalNotes:v})});if(await Ge,S("Complete!"),b(100),be instanceof Blob){const Ie=URL.createObjectURL(be),ve=document.createElement("a");ve.href=Ie,ve.download=`Complete_Technical_Rider_${((te=r==null?void 0:r.primaryArtist)==null?void 0:te.stageName)||"Artist"}_${new Date().toISOString().split("T")[0]}.pdf`,ve.click(),URL.revokeObjectURL(Ie)}a({title:"Technical Rider Generated",description:"Complete technical rider with stage plot and components downloaded successfully"}),n==null||n()}catch(Ae){console.error("Technical rider generation error:",Ae),S("Error occurred"),a({title:"Generation Failed",description:"Failed to generate complete technical rider",variant:"destructive"})}finally{d(!1),b(0),S("")}},V=async()=>{var te,Ae,Ge,be,Ie;try{T(!0);let ve="";s==="technical_rider"?ve=`/api/bookings/${t}/technical-rider`:s==="booking_agreement"?ve=`/api/bookings/${t}/booking-agreement`:s==="performance_agreement"?ve=`/api/bookings/${t}/performance-engagement/${((te=r==null?void 0:r.primaryArtist)==null?void 0:te.id)||((Ae=r==null?void 0:r.primaryArtist)==null?void 0:Ae.userId)||"1"}`:ve=`/api/bookings/${t}/download-contract/${s}`;const ie=await xe(ve);if(ie.ok){const de=await ie.blob(),ee=window.URL.createObjectURL(de),ae=document.createElement("a");let Se=`${s}_booking_${t}.pdf`;s==="technical_rider"?Se=`Technical_Rider_${((Ge=r==null?void 0:r.primaryArtist)==null?void 0:Ge.stageName)||"Artist"}_${t}.pdf`:s==="booking_agreement"?Se=`Booking_Agreement_${((be=r==null?void 0:r.primaryArtist)==null?void 0:be.stageName)||"Artist"}_${t}.pdf`:s==="performance_agreement"&&(Se=`Performance_Agreement_${((Ie=r==null?void 0:r.primaryArtist)==null?void 0:Ie.stageName)||"Artist"}_${t}.pdf`),ae.href=ee,ae.download=Se,ae.click(),window.URL.revokeObjectURL(ee),a({title:"Download Complete",description:`${se()} has been downloaded successfully.`})}}catch{a({title:"Error",description:"Failed to download contract.",variant:"destructive"})}finally{T(!1)}},se=()=>{switch(s){case"booking_agreement":return"Booking Agreement";case"performance_agreement":return"Performance Agreement";case"technical_rider":return"Technical Rider";default:return"Contract"}},Z=()=>{switch(s){case"booking_agreement":return"Legal agreement between booker and artist/management outlining event details, payment terms, and responsibilities.";case"performance_agreement":return"Detailed agreement covering performance specifications, deliverables, and technical requirements.";case"technical_rider":return"Technical specifications document with equipment, stage, lighting, and sound requirements auto-populated from user profiles.";default:return""}};return h?e.jsx(R,{children:e.jsx(L,{className:"flex items-center justify-center p-8",children:e.jsxs("div",{className:"flex flex-col items-center space-y-4",children:[e.jsx("div",{className:"animate-spin w-8 h-8 border-4 border-primary border-t-transparent rounded-full"}),e.jsx("p",{className:"text-muted-foreground",children:"Loading contract details..."})]})})}):m?e.jsx(R,{children:e.jsx(L,{className:"flex items-center justify-center p-8",children:e.jsxs("div",{className:"text-center space-y-4",children:[e.jsx("p",{className:"text-red-600",children:m}),e.jsx(E,{onClick:B,variant:"outline",children:"Try Again"})]})})}):r?e.jsxs("div",{className:"space-y-6",children:[e.jsxs(R,{children:[e.jsx(Y,{children:e.jsxs(Q,{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(xt,{className:"h-5 w-5"}),e.jsx("span",{children:se()})]}),e.jsxs(X,{variant:"outline",children:["Booking #",t]})]})}),e.jsxs(L,{children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("p",{className:"text-muted-foreground mb-2",children:Z()}),e.jsxs("div",{className:"bg-blue-50 border-l-4 border-blue-400 p-4 rounded-r-lg",children:[e.jsx("h4",{className:"font-semibold text-blue-800 mb-2",children:"Instructions:"}),e.jsxs("ol",{className:"text-sm text-blue-700 space-y-1",children:[e.jsx("li",{children:"1. Review the booking details below to ensure accuracy"}),e.jsx("li",{children:"2. Add any custom clauses or special terms in the text area"}),e.jsx("li",{children:"3. Include additional notes or requirements"}),e.jsx("li",{children:'4. Click "Generate Contract" to create the document'}),e.jsx("li",{children:'5. Once generated, use "Download" to save the PDF'})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(dt,{className:"h-4 w-4 text-muted-foreground"}),e.jsx("span",{className:"text-sm font-medium",children:"Event Details"})]}),e.jsxs("div",{className:"ml-6 space-y-1",children:[e.jsx("p",{className:"text-sm",children:r.eventName}),e.jsx("p",{className:"text-sm text-muted-foreground",children:new Date(r.eventDate).toLocaleDateString()})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Dn,{className:"h-4 w-4 text-muted-foreground"}),e.jsx("span",{className:"text-sm font-medium",children:"Venue"})]}),e.jsxs("div",{className:"ml-6 space-y-1",children:[e.jsx("p",{className:"text-sm",children:r.venueName}),e.jsx("p",{className:"text-sm text-muted-foreground",children:r.venueAddress})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ue,{className:"h-4 w-4 text-muted-foreground"}),e.jsx("span",{className:"text-sm font-medium",children:"Primary Artist"})]}),e.jsx("div",{className:"ml-6",children:e.jsx("p",{className:"text-sm",children:(le=r.primaryArtist)==null?void 0:le.stageName})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(cn,{className:"h-4 w-4 text-muted-foreground"}),e.jsx("span",{className:"text-sm font-medium",children:"Booker"})]}),e.jsx("div",{className:"ml-6",children:e.jsx("p",{className:"text-sm",children:((ne=r.booker)==null?void 0:ne.fullName)||((ue=r.booker)==null?void 0:ue.guestName)})})]})]})]})]}),s==="technical_rider"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs(Ua,{className:"border-green-200 bg-green-50 text-green-800",children:[e.jsx(ct,{className:"h-4 w-4"}),e.jsxs(sr,{children:[" ",e.jsx("strong",{children:"NEW ENHANCED TECHNICAL RIDER SYSTEM"})," - The old jumbled interface has been completely destroyed and rebuilt with professional-grade functionality."]})]}),e.jsx(D5,{bookingId:t,assignedMusicians:A,eventDetails:{eventName:(r==null?void 0:r.eventName)||"",venueName:(r==null?void 0:r.venueName)||"",eventDate:(r==null?void 0:r.eventDate)||"",eventType:"Performance",duration:120},canEdit:!0,userRole:"superadmin",onSave:F,onLoad:K})]}),o&&e.jsx(R,{className:"border-primary/20 bg-primary/5",children:e.jsx(L,{className:"p-6",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(oa,{className:"w-5 h-5 animate-spin text-primary"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"text-sm font-medium text-primary",children:"Generating Contract"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:j})]}),e.jsxs("span",{className:"text-sm font-medium text-primary",children:[Math.round(f),"%"]})]}),e.jsx(qs,{value:f,className:"w-full h-2"}),e.jsxs("div",{className:"flex items-center justify-between text-xs text-muted-foreground",children:[e.jsx("span",{children:"Processing..."}),e.jsx("span",{children:"Please wait while we generate your contract"})]})]})})}),e.jsx(R,{children:e.jsx(L,{className:"pt-6",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium",children:"Generate Contract"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"This will create a PDF document with all the specified terms and requirements."})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[e.jsx(E,{onClick:G,disabled:o||k,className:"flex-1",children:o?e.jsxs(e.Fragment,{children:[e.jsx(oa,{className:"w-4 h-4 animate-spin mr-2"}),"Generating..."]}):e.jsxs(e.Fragment,{children:[e.jsx(xt,{className:"w-4 h-4 mr-2"}),"Generate Contract"]})}),e.jsx(E,{onClick:V,variant:"outline",disabled:o||k,className:"flex-1",children:k?e.jsxs(e.Fragment,{children:[e.jsx(oa,{className:"w-4 h-4 animate-spin mr-2"}),"Downloading..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Cs,{className:"w-4 h-4 mr-2"}),"Download PDF"]})})]})]})})})]}):e.jsx(R,{children:e.jsx(L,{className:"flex items-center justify-center p-8",children:e.jsxs("div",{className:"text-center space-y-4",children:[e.jsx("p",{className:"text-muted-foreground",children:"Booking details not found."}),e.jsx(E,{onClick:B,variant:"outline",children:"Refresh"})]})})})}function rX({userId:t,userRole:s,isOwner:n,isAuthorized:a}){const{toast:r}=nt(),[i,l]=N.useState([]),[c,o]=N.useState([]),[d,h]=N.useState([]),[u,m]=N.useState(!1);if(!a)return e.jsx(R,{className:"mt-6",children:e.jsx(L,{className:"flex items-center justify-center p-8",children:e.jsxs("div",{className:"text-center",children:[e.jsx(Ul,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),e.jsx("p",{className:"text-muted-foreground",children:"Private profile sections are only visible to assigned administrators and the user."})]})})});const p=()=>{const f={id:Date.now().toString(),category:"Equipment",item:"",specifications:"",priority:"essential"};l([...i,f])},g=()=>{const f={id:Date.now().toString(),category:"Catering",item:"",details:"",priority:"essential"};o([...c,f])},x=()=>{const f={id:Date.now().toString(),category:"Set Duration",specification:"",value:"",notes:""};h([...d,f])},v=async()=>{try{if((await xe(`/api/users/${t}/private-profile`,{method:"PUT",body:JSON.stringify({technicalRequirements:i,hospitalityRequirements:c,performanceSpecs:d})})).ok)r({title:"Profile Updated",description:"Private profile sections have been saved successfully."}),m(!1);else throw new Error("Failed to save profile")}catch{r({title:"Error",description:"Failed to update profile. Please try again.",variant:"destructive"})}},y=f=>{switch(f){case"essential":return"bg-red-100 text-red-800";case"preferred":return"bg-yellow-100 text-yellow-800";case"optional":return"bg-green-100 text-green-800";default:return"bg-gray-100 text-gray-800"}};return e.jsxs("div",{className:"space-y-6 mt-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Private Profile Sections"}),e.jsx("p",{className:"text-sm text-muted-foreground mb-3",children:"Technical and hospitality requirements used for contract generation"}),e.jsxs("div",{className:"bg-amber-50 border-l-4 border-amber-400 p-3 rounded-r-lg",children:[e.jsx("h4",{className:"font-semibold text-amber-800 mb-1",children:"Instructions:"}),e.jsx("p",{className:"text-sm text-amber-700",children:'Click "Edit" to add technical equipment, hospitality needs, and performance specifications. These details will automatically populate in contract generation and technical riders.'})]})]}),n&&e.jsxs(E,{onClick:()=>m(!u),variant:u?"outline":"default",children:[e.jsx($s,{className:"h-4 w-4 mr-2"}),u?"Cancel":"Edit"]})]}),e.jsxs(R,{children:[e.jsx(Y,{children:e.jsxs(Q,{className:"flex items-center justify-between",children:[e.jsx("span",{children:"Technical Requirements"}),u&&e.jsxs(E,{size:"sm",onClick:p,children:[e.jsx(st,{className:"h-4 w-4 mr-1"}),"Add"]})]})}),e.jsx(L,{children:i.length===0?e.jsx("p",{className:"text-muted-foreground",children:"No technical requirements specified."}):e.jsx("div",{className:"space-y-4",children:i.map(f=>e.jsxs("div",{className:"border rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-start justify-between mb-2",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(X,{variant:"outline",children:f.category}),e.jsx(X,{className:y(f.priority),children:f.priority})]}),u&&e.jsx(E,{size:"sm",variant:"ghost",onClick:()=>l(i.filter(b=>b.id!==f.id)),children:e.jsx(Vt,{className:"h-4 w-4"})})]}),u?e.jsxs("div",{className:"space-y-2",children:[e.jsx($,{placeholder:"Item/Equipment",value:f.item,onChange:b=>l(i.map(j=>j.id===f.id?{...j,item:b.target.value}:j))}),e.jsx(mt,{placeholder:"Specifications and details",value:f.specifications,onChange:b=>l(i.map(j=>j.id===f.id?{...j,specifications:b.target.value}:j))})]}):e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:f.item}),e.jsx("p",{className:"text-sm text-muted-foreground",children:f.specifications})]})]},f.id))})})]}),e.jsxs(R,{children:[e.jsx(Y,{children:e.jsxs(Q,{className:"flex items-center justify-between",children:[e.jsx("span",{children:"Hospitality Requirements"}),u&&e.jsxs(E,{size:"sm",onClick:g,children:[e.jsx(st,{className:"h-4 w-4 mr-1"}),"Add"]})]})}),e.jsx(L,{children:c.length===0?e.jsx("p",{className:"text-muted-foreground",children:"No hospitality requirements specified."}):e.jsx("div",{className:"space-y-4",children:c.map(f=>e.jsxs("div",{className:"border rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-start justify-between mb-2",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(X,{variant:"outline",children:f.category}),e.jsx(X,{className:y(f.priority),children:f.priority})]}),u&&e.jsx(E,{size:"sm",variant:"ghost",onClick:()=>o(c.filter(b=>b.id!==f.id)),children:e.jsx(Vt,{className:"h-4 w-4"})})]}),u?e.jsxs("div",{className:"space-y-2",children:[e.jsx($,{placeholder:"Hospitality item",value:f.item,onChange:b=>o(c.map(j=>j.id===f.id?{...j,item:b.target.value}:j))}),e.jsx(mt,{placeholder:"Details and requirements",value:f.details,onChange:b=>o(c.map(j=>j.id===f.id?{...j,details:b.target.value}:j))})]}):e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:f.item}),e.jsx("p",{className:"text-sm text-muted-foreground",children:f.details})]})]},f.id))})})]}),e.jsxs(R,{children:[e.jsx(Y,{children:e.jsxs(Q,{className:"flex items-center justify-between",children:[e.jsx("span",{children:"Performance Specifications"}),u&&e.jsxs(E,{size:"sm",onClick:x,children:[e.jsx(st,{className:"h-4 w-4 mr-1"}),"Add"]})]})}),e.jsx(L,{children:d.length===0?e.jsx("p",{className:"text-muted-foreground",children:"No performance specifications defined."}):e.jsx("div",{className:"space-y-4",children:d.map(f=>e.jsxs("div",{className:"border rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-start justify-between mb-2",children:[e.jsx(X,{variant:"outline",children:f.category}),u&&e.jsx(E,{size:"sm",variant:"ghost",onClick:()=>h(d.filter(b=>b.id!==f.id)),children:e.jsx(Vt,{className:"h-4 w-4"})})]}),u?e.jsxs("div",{className:"space-y-2",children:[e.jsx($,{placeholder:"Specification",value:f.specification,onChange:b=>h(d.map(j=>j.id===f.id?{...j,specification:b.target.value}:j))}),e.jsx($,{placeholder:"Value",value:f.value,onChange:b=>h(d.map(j=>j.id===f.id?{...j,value:b.target.value}:j))}),e.jsx(mt,{placeholder:"Additional notes",value:f.notes,onChange:b=>h(d.map(j=>j.id===f.id?{...j,notes:b.target.value}:j))})]}):e.jsxs("div",{children:[e.jsxs("p",{className:"font-medium",children:[f.specification,": ",f.value]}),f.notes&&e.jsx("p",{className:"text-sm text-muted-foreground",children:f.notes})]})]},f.id))})})]}),u&&e.jsxs("div",{className:"flex justify-end space-x-2",children:[e.jsx(E,{variant:"outline",onClick:()=>m(!1),children:"Cancel"}),e.jsx(E,{onClick:v,children:"Save Changes"})]})]})}function iX(){const{toast:t}=nt(),[,s]=As(),[n,a]=N.useState(null),[r,i]=N.useState(16),[l,c]=N.useState("technical_rider"),{data:o=[],isLoading:d}=ke({queryKey:["/api/bookings/all"],enabled:!0}),{data:h}=ke({queryKey:["/api/users",r],enabled:r>0}),u=async()=>{try{const m=await xe("/api/bookings/guest",{method:"POST",body:JSON.stringify({guestName:"Test User",guestEmail:"test@example.com",guestPhone:"555-0123",primaryArtistUserId:16,eventName:"Test Event for Workflow",eventType:"Concert",eventDate:new Date(Date.now()+2592e6).toISOString(),venueName:"Test Venue",venueAddress:"123 Test Street, Test City",requirements:"Full sound system, lighting rig, professional setup",totalBudget:5e3,createAccount:!1})});if(m.ok){const p=await m.json();t({title:"Test Booking Created",description:`Booking ID: ${p.id} created successfully for testing.`}),a(p.id),window.location.reload()}else throw new Error("Failed to create test booking")}catch{t({title:"Error",description:"Failed to create test booking.",variant:"destructive"})}};return e.jsxs("div",{className:"container mx-auto p-6 space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold",children:"Booking Management"}),e.jsx("p",{className:"text-muted-foreground",children:"Complete booking workflow from creation to contract generation and payment processing"}),e.jsx("div",{className:"mt-2",children:e.jsx(E,{variant:"outline",size:"sm",onClick:()=>s("/dashboard"),className:"text-blue-600 hover:text-blue-700",children:" Back to Dashboard"})})]}),e.jsxs(E,{onClick:u,children:[e.jsx(dt,{className:"h-4 w-4 mr-2"}),"Create Test Booking"]})]}),e.jsxs(Ut,{defaultValue:"workflow",className:"space-y-6",children:[e.jsxs(jt,{className:"grid w-full grid-cols-4",children:[e.jsx(Ne,{value:"workflow",children:"Booking Workflow"}),e.jsx(Ne,{value:"contracts",children:"Contract Generator"}),e.jsx(Ne,{value:"profiles",children:"Private Profiles"}),e.jsx(Ne,{value:"testing",children:"Test Controls"})]}),e.jsxs(ge,{value:"workflow",className:"space-y-6",children:[e.jsxs(R,{children:[e.jsx(Y,{children:e.jsx(Q,{children:"Select Test Booking"})}),e.jsx(L,{children:d?e.jsx("div",{className:"animate-spin w-6 h-6 border-2 border-primary border-t-transparent rounded-full"}):e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:o.map(m=>e.jsx(R,{className:`cursor-pointer transition-colors ${n===m.id?"ring-2 ring-primary":"hover:bg-gray-50"}`,onClick:()=>a(m.id),children:e.jsx(L,{className:"p-4",children:e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("span",{className:"font-medium",children:["#",m.id]}),e.jsx(X,{variant:"outline",children:m.status||"pending"})]}),e.jsx("p",{className:"text-sm font-medium",children:m.eventName}),e.jsx("p",{className:"text-xs text-muted-foreground",children:new Date(m.eventDate).toLocaleDateString()}),e.jsx("p",{className:"text-xs text-muted-foreground",children:m.venueName})]})})},m.id))}),o.length===0&&e.jsx("p",{className:"text-center text-muted-foreground py-8",children:"No bookings found. Create a test booking to get started."})]})})]}),n&&e.jsx(tX,{bookingId:n,onStatusChange:m=>{t({title:"Booking Status Updated",description:`Booking status changed to: ${m}`})}})]}),e.jsxs(ge,{value:"contracts",className:"space-y-6",children:[e.jsxs(R,{children:[e.jsx(Y,{children:e.jsx(Q,{children:"Contract Type Selection"})}),e.jsx(L,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"grid grid-cols-3 gap-4",children:["booking_agreement","performance_agreement","technical_rider"].map(m=>e.jsxs(E,{variant:l===m?"default":"outline",onClick:()=>c(m),className:"h-20 flex flex-col items-center justify-center",children:[e.jsx(xt,{className:"h-6 w-6 mb-2"}),e.jsx("span",{className:"text-sm",children:m.replace("_"," ").replace(/\b\w/g,p=>p.toUpperCase())})]},m))}),!n&&e.jsx("div",{className:"text-center py-4 text-muted-foreground",children:"Please select a booking from the Workflow tab first."})]})})]}),n&&e.jsx(aX,{bookingId:n,contractType:l,onGenerated:()=>{t({title:"Contract Generated",description:`${l.replace("_"," ")} has been successfully generated.`})}})]}),e.jsxs(ge,{value:"profiles",className:"space-y-6",children:[e.jsxs(R,{children:[e.jsx(Y,{children:e.jsx(Q,{children:"Test User Selection"})}),e.jsx(L,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(q,{htmlFor:"userId",children:"User ID"}),e.jsx($,{id:"userId",type:"number",value:r,onChange:m=>i(parseInt(m.target.value)),placeholder:"Enter user ID to test"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(q,{children:"Quick Select"}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx(E,{size:"sm",variant:"outline",onClick:()=>i(16),children:"L-L Octave (16)"}),e.jsx(E,{size:"sm",variant:"outline",onClick:()=>i(17),children:"JCro (17)"}),e.jsx(E,{size:"sm",variant:"outline",onClick:()=>i(1),children:"Superadmin (1)"})]})]})]}),h&&e.jsxs("div",{className:"p-4 border rounded-lg bg-gray-50",children:[e.jsx("p",{className:"font-medium",children:h.fullName}),e.jsx("p",{className:"text-sm text-muted-foreground",children:h.email})]})]})})]}),e.jsx(rX,{userId:r,userRole:"managed_artist",isOwner:!0,isAuthorized:!0})]}),e.jsx(ge,{value:"testing",className:"space-y-6",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs(R,{children:[e.jsx(Y,{children:e.jsx(Q,{children:"Workflow Actions"})}),e.jsx(L,{className:"space-y-4",children:e.jsxs("div",{className:"space-y-2",children:[e.jsx(E,{className:"w-full",disabled:!n,onClick:()=>{n&&xe(`/api/bookings/${n}/approve`,{method:"POST"}).then(m=>m.json()).then(()=>t({title:"Success",description:"Booking approved"})).catch(()=>t({title:"Error",description:"Failed to approve",variant:"destructive"}))},children:"Approve Booking"}),e.jsx(E,{className:"w-full",variant:"outline",disabled:!n,onClick:()=>{n&&xe(`/api/bookings/${n}/generate-technical-rider`,{method:"POST"}).then(m=>m.json()).then(()=>t({title:"Success",description:"Technical rider generated"})).catch(()=>t({title:"Error",description:"Failed to generate",variant:"destructive"}))},children:"Generate Technical Rider"}),e.jsx(E,{className:"w-full",variant:"outline",disabled:!n,onClick:()=>{n&&fetch(`/api/bookings/${n}/generate-contracts`,{method:"POST"}).then(m=>m.json()).then(()=>t({title:"Success",description:"Contracts generated"})).catch(()=>t({title:"Error",description:"Failed to generate",variant:"destructive"}))},children:"Generate All Contracts"})]})})]}),e.jsxs(R,{children:[e.jsx(Y,{children:e.jsx(Q,{children:"Test Information"})}),e.jsx(L,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(q,{className:"text-sm font-medium",children:"Selected Booking"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:n?`Booking ID: ${n}`:"No booking selected"})]}),e.jsxs("div",{children:[e.jsx(q,{className:"text-sm font-medium",children:"Test User"}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["User ID: ",r," (",(h==null?void 0:h.fullName)||"Loading...",")"]})]}),e.jsxs("div",{children:[e.jsx(q,{className:"text-sm font-medium",children:"Contract Type"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:l.replace("_"," ").replace(/\b\w/g,m=>m.toUpperCase())})]}),e.jsxs("div",{className:"pt-4 border-t",children:[e.jsx(q,{className:"text-sm font-medium",children:"Features Tested"}),e.jsxs("ul",{className:"text-sm text-muted-foreground mt-2 space-y-1",children:[e.jsx("li",{children:" Booking workflow visualization"}),e.jsx("li",{children:" Contract generation (3 types)"}),e.jsx("li",{children:" Private profile management"}),e.jsx("li",{children:" Technical rider auto-population"}),e.jsx("li",{children:" PDF receipt generation"}),e.jsx("li",{children:" Admin approval workflow"})]})]})]})})]})]})})]})]})}function lX(){const{toast:t}=nt(),[s,n]=N.useState(1),[a,r]=N.useState(null),[i,l]=N.useState(null),c=[{id:1,title:"Application Submission",status:"pending",icon:xt},{id:2,title:"Admin Review",status:"pending",icon:Ze},{id:3,title:"Professional Assignment",status:"pending",icon:zb},{id:4,title:"Contract Generation",status:"pending",icon:xt},{id:5,title:"Multi-Party Signing",status:"pending",icon:ta},{id:6,title:"Role Transition",status:"pending",icon:ns}],[o,d]=N.useState(c.reduce((x,v)=>({...x,[v.id]:"pending"}),{})),h=async()=>{try{const v=await(await xe("POST","/api/management-applications",{requestedManagementTierId:1,businessDescription:"Multi-genre artist specializing in Caribbean Neo Soul with international tour experience",expectedRevenue:"50000",portfolioLinks:{website:"https://demo-artist.waitumusic.com",streaming:"https://open.spotify.com/artist/demo"},socialMediaMetrics:{instagram:15e3,youtube:8500,tiktok:25e3},contractTerms:{tier:"Full Management",discountLevel:"up to 100%",benefits:["Dedicated team","Comprehensive marketing","Priority booking"],duration:"2 years renewable"}})).json();r(v.id),l(v),d(y=>({...y,1:"completed"})),n(2),t({title:"Application Submitted",description:"Management application created successfully"})}catch{t({title:"Submission Failed",description:"Failed to create application",variant:"destructive"})}},u=async()=>{if(a)try{await xe("POST",`/api/management-applications/${a}/review`,{reviewStatus:"approved",reviewComments:"Application demonstrates strong potential for Full Management tier. Applicant shows excellent growth metrics and professional presentation."}),d(x=>({...x,2:"completed"})),n(3),t({title:"Application Approved",description:"Application reviewed and approved by superadmin"})}catch{t({title:"Review Failed",description:"Failed to review application",variant:"destructive"})}},m=async()=>{var x;if(a)try{const y=await(await xe("GET","/api/available-lawyers-waitumusic")).json();if(y.length===0){t({title:"No Professionals Available",description:"No non-performance professionals available to represent Wai'tuMusic",variant:"destructive"});return}const f=y.find(b=>b.conflictStatus==="clear");if(!f){t({title:"Conflict Alert",description:"All professionals have potential conflicts. Override would be required.",variant:"destructive"});return}await xe("POST",`/api/management-applications/${a}/assign-lawyer`,{lawyerUserId:f.id,assignmentRole:"waitumusic_representative",authorityLevel:"full_authority",canSignContracts:!0,canModifyTerms:!0,canFinalizeAgreements:!0}),d(b=>({...b,3:"completed"})),n(4),t({title:"Professional Assigned",description:`${f.fullName} (${f.specialty}) assigned to represent Wai'tuMusic (no conflicts)`})}catch(v){const y=await((x=v.response)==null?void 0:x.json());y!=null&&y.requiresOverride?t({title:"Conflict Detected",description:"Assignment requires superadmin conflict override",variant:"destructive"}):t({title:"Assignment Failed",description:"Failed to assign professional",variant:"destructive"})}},p=async()=>{if(a)try{await xe("POST",`/api/management-applications/${a}/generate-contract`),d(x=>({...x,4:"completed"})),n(5),t({title:"Contract Generated",description:"Management contract generated and ready for signing"})}catch{t({title:"Generation Failed",description:"Failed to generate contract",variant:"destructive"})}},g=async()=>{if(a)try{await xe("POST",`/api/management-applications/${a}/sign`,{signatureData:`applicant-signature-${Date.now()}`,signerRole:"applicant"}),await xe("POST",`/api/management-applications/${a}/sign`,{signatureData:`admin-signature-${Date.now()}`,signerRole:"assigned_admin"}),await xe("POST",`/api/management-applications/${a}/sign`,{signatureData:`lawyer-signature-${Date.now()}`,signerRole:"lawyer"}),await xe("POST",`/api/management-applications/${a}/sign`,{signatureData:`superadmin-signature-${Date.now()}`,signerRole:"superadmin"}),d(x=>({...x,5:"completed",6:"completed"})),n(6),t({title:"Contract Completed",description:"All parties have signed. Role transition executed!"})}catch{t({title:"Signing Failed",description:"Failed to complete contract signing process",variant:"destructive"})}};return e.jsxs("div",{className:"container mx-auto p-6 space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold",children:"Management Application Walkthrough"}),e.jsx("p",{className:"text-muted-foreground",children:"Interactive demonstration of the complete workflow"})]}),e.jsxs(X,{variant:"outline",className:"text-blue-600 border-blue-600",children:[e.jsx(Rt,{className:"h-3 w-3 mr-1"}),"Demo Mode"]})]}),e.jsxs(R,{children:[e.jsx(Y,{children:e.jsx(Q,{children:"Workflow Progress"})}),e.jsx(L,{children:e.jsx("div",{className:"flex items-center justify-between mb-6",children:c.map((x,v)=>{const y=x.icon,f=o[x.id]==="completed",b=s===x.id;return e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx("div",{className:`
                    w-12 h-12 rounded-full flex items-center justify-center border-2 mb-2
                    ${f?"bg-green-500 border-green-500 text-white":b?"bg-blue-500 border-blue-500 text-white":"bg-gray-100 border-gray-300 text-gray-500"}
                  `,children:f?e.jsx(ct,{className:"w-6 h-6"}):e.jsx(y,{className:"w-6 h-6"})}),e.jsx("span",{className:`text-sm font-medium text-center ${f?"text-green-600":b?"text-blue-600":"text-gray-500"}`,children:x.title}),v<c.length-1&&e.jsx(Qa,{className:"w-4 h-4 text-gray-400 mt-2"})]},x.id)})})})]}),e.jsxs(Ut,{value:s.toString(),children:[e.jsx(jt,{className:"grid w-full grid-cols-6",children:c.map(x=>e.jsxs(Ne,{value:x.id.toString(),disabled:x.id>s,children:["Step ",x.id]},x.id))}),e.jsx(ge,{value:"1",className:"space-y-4",children:e.jsxs(R,{children:[e.jsx(Y,{children:e.jsxs(Q,{className:"flex items-center gap-2",children:[e.jsx(xt,{className:"w-5 h-5"}),"Step 1: Application Submission"]})}),e.jsxs(L,{className:"space-y-4",children:[e.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg",children:[e.jsx("h4",{className:"font-medium mb-2",children:"What happens in this step:"}),e.jsxs("ul",{className:"space-y-1 text-sm text-muted-foreground",children:[e.jsx("li",{children:" User submits management application through ManagementApplicationModal"}),e.jsx("li",{children:" Application specifies Full Management or Administration tier"}),e.jsx("li",{children:" System validates business information and expected revenue"}),e.jsx("li",{children:' Application status set to "pending" for admin review'})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"border p-3 rounded",children:[e.jsx("span",{className:"font-medium",children:"Tier Requested:"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Full Management (up to 100% discounts)"})]}),e.jsxs("div",{className:"border p-3 rounded",children:[e.jsx("span",{className:"font-medium",children:"Expected Revenue:"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"$50,000 annually"})]})]}),e.jsx(E,{onClick:h,disabled:o[1]==="completed",children:o[1]==="completed"?"Application Submitted":"Submit Application"})]})]})}),e.jsx(ge,{value:"2",className:"space-y-4",children:e.jsxs(R,{children:[e.jsx(Y,{children:e.jsxs(Q,{className:"flex items-center gap-2",children:[e.jsx(Ze,{className:"w-5 h-5"}),"Step 2: Admin Review"]})}),e.jsxs(L,{className:"space-y-4",children:[e.jsxs("div",{className:"bg-green-50 p-4 rounded-lg",children:[e.jsx("h4",{className:"font-medium mb-2",children:"What happens in this step:"}),e.jsxs("ul",{className:"space-y-1 text-sm text-muted-foreground",children:[e.jsx("li",{children:" Assigned admin or superadmin reviews application details"}),e.jsx("li",{children:" Business case and revenue projections are evaluated"}),e.jsx("li",{children:" Decision made to approve, reject, or request changes"}),e.jsx("li",{children:" Review comments and reasoning documented"})]})]}),i&&e.jsxs("div",{className:"border p-4 rounded-lg",children:[e.jsx("h4",{className:"font-medium mb-2",children:"Application Details:"}),e.jsxs("p",{className:"text-sm text-muted-foreground mb-2",children:[e.jsx("strong",{children:"Business:"})," ",i.businessDescription]}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:[e.jsx("strong",{children:"Status:"})," ",e.jsx(X,{variant:"secondary",children:"Pending Review"})]})]}),e.jsx(E,{onClick:u,disabled:o[2]==="completed"||!a,children:o[2]==="completed"?"Application Approved":"Approve Application"})]})]})}),e.jsx(ge,{value:"3",className:"space-y-4",children:e.jsxs(R,{children:[e.jsx(Y,{children:e.jsxs(Q,{className:"flex items-center gap-2",children:[e.jsx(zb,{className:"w-5 h-5"}),"Step 3: Professional Assignment"]})}),e.jsxs(L,{className:"space-y-4",children:[e.jsxs("div",{className:"bg-purple-50 p-4 rounded-lg",children:[e.jsx("h4",{className:"font-medium mb-2",children:"What happens in this step:"}),e.jsxs("ul",{className:"space-y-1 text-sm text-muted-foreground",children:[e.jsx("li",{children:" Superadmin assigns non-performance professional to represent Wai'tuMusic"}),e.jsx("li",{children:" Only managed professionals can represent Wai'tuMusic without conflicts"}),e.jsx("li",{children:" Professional authority level configured (full, review-only, advisory)"}),e.jsx("li",{children:" Contract signing and modification permissions set"}),e.jsx("li",{children:" Professional can act on behalf of Wai'tuMusic in non-performance matters"})]})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{className:"border p-3 rounded",children:[e.jsx("span",{className:"font-medium",children:"Assignment Role:"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Wai'tuMusic Representative"})]}),e.jsxs("div",{className:"border p-3 rounded",children:[e.jsx("span",{className:"font-medium",children:"Authority Level:"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Full Authority"})]}),e.jsxs("div",{className:"border p-3 rounded",children:[e.jsx("span",{className:"font-medium",children:"Service Type:"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Non-Performance"})]})]}),e.jsxs("div",{className:"bg-amber-50 p-3 rounded border border-amber-200",children:[e.jsx("h5",{className:"font-medium text-amber-800 mb-1",children:"Conflict Prevention:"}),e.jsx("p",{className:"text-sm text-amber-700",children:"Professionals representing managed users cannot represent Wai'tuMusic unless they are managed professionals themselves. System automatically prevents conflicts of interest."})]}),e.jsx(E,{onClick:m,disabled:o[3]==="completed"||!a,children:o[3]==="completed"?"Professional Assigned":"Assign Professional"})]})]})}),e.jsx(ge,{value:"4",className:"space-y-4",children:e.jsxs(R,{children:[e.jsx(Y,{children:e.jsxs(Q,{className:"flex items-center gap-2",children:[e.jsx(xt,{className:"w-5 h-5"}),"Step 4: Contract Generation"]})}),e.jsxs(L,{className:"space-y-4",children:[e.jsxs("div",{className:"bg-orange-50 p-4 rounded-lg",children:[e.jsx("h4",{className:"font-medium mb-2",children:"What happens in this step:"}),e.jsxs("ul",{className:"space-y-1 text-sm text-muted-foreground",children:[e.jsx("li",{children:" Superadmin generates formal management contract"}),e.jsx("li",{children:" Contract includes tier-specific terms and benefits"}),e.jsx("li",{children:' Status changes to "contract_generated"'}),e.jsx("li",{children:" Contract becomes available for multi-party signing"})]})]}),e.jsxs("div",{className:"border p-4 rounded-lg",children:[e.jsx("h4",{className:"font-medium mb-2",children:"Contract Terms Preview:"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Management Tier:"}),e.jsx("p",{className:"text-muted-foreground",children:"Full Management"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Service Discounts:"}),e.jsx("p",{className:"text-muted-foreground",children:"Up to 100%"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Duration:"}),e.jsx("p",{className:"text-muted-foreground",children:"2 years renewable"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Benefits:"}),e.jsx("p",{className:"text-muted-foreground",children:"Dedicated team, Marketing"})]})]})]}),e.jsx(E,{onClick:p,disabled:o[4]==="completed"||!a,children:o[4]==="completed"?"Contract Generated":"Generate Contract"})]})]})}),e.jsx(ge,{value:"5",className:"space-y-4",children:e.jsxs(R,{children:[e.jsx(Y,{children:e.jsxs(Q,{className:"flex items-center gap-2",children:[e.jsx(ta,{className:"w-5 h-5"}),"Step 5: Multi-Party Signing"]})}),e.jsxs(L,{className:"space-y-4",children:[e.jsxs("div",{className:"bg-red-50 p-4 rounded-lg",children:[e.jsx("h4",{className:"font-medium mb-2",children:"What happens in this step:"}),e.jsxs("ul",{className:"space-y-1 text-sm text-muted-foreground",children:[e.jsx("li",{children:" Applicant signs contract digitally"}),e.jsx("li",{children:" Assigned admin signs on behalf of administrative oversight"}),e.jsx("li",{children:" Assigned lawyer signs representing Wai'tuMusic interests"}),e.jsx("li",{children:" Superadmin provides final confirmation signature"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("h4",{className:"font-medium",children:"Required Signatures:"}),e.jsxs("div",{className:"space-y-1 text-sm",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ct,{className:"w-4 h-4 text-green-500"}),e.jsx("span",{children:"Applicant"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ct,{className:"w-4 h-4 text-green-500"}),e.jsx("span",{children:"Assigned Admin"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ct,{className:"w-4 h-4 text-green-500"}),e.jsx("span",{children:"Wai'tuMusic Lawyer"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Qt,{className:"w-4 h-4 text-orange-500"}),e.jsx("span",{children:"Superadmin Confirmation"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("h4",{className:"font-medium",children:"Signing Order:"}),e.jsxs("div",{className:"space-y-1 text-sm text-muted-foreground",children:[e.jsx("p",{children:"1. Applicant reviews and signs"}),e.jsx("p",{children:"2. Admin administrative approval"}),e.jsx("p",{children:"3. Lawyer legal validation"}),e.jsx("p",{children:"4. Superadmin final confirmation"})]})]})]}),e.jsx(E,{onClick:g,disabled:o[5]==="completed"||!a,children:o[5]==="completed"?"Contract Signed":"Execute Signing Process"})]})]})}),e.jsx(ge,{value:"6",className:"space-y-4",children:e.jsxs(R,{children:[e.jsx(Y,{children:e.jsxs(Q,{className:"flex items-center gap-2",children:[e.jsx(ns,{className:"w-5 h-5"}),"Step 6: Role Transition Complete"]})}),e.jsxs(L,{className:"space-y-4",children:[e.jsxs("div",{className:"bg-green-100 p-4 rounded-lg border border-green-200",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(ct,{className:"w-5 h-5 text-green-600"}),e.jsx("h4",{className:"font-medium text-green-800",children:"Workflow Complete!"})]}),e.jsxs("ul",{className:"space-y-1 text-sm text-green-700",children:[e.jsx("li",{children:" User role upgraded to Managed Artist (roleId: 3)"}),e.jsx("li",{children:" Artist record created/updated with management tier"}),e.jsx("li",{children:" Service discounts activated (up to 100%)"}),e.jsx("li",{children:" Audit trail completed with all transitions recorded"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"border p-4 rounded-lg",children:[e.jsx("h4",{className:"font-medium mb-2",children:"New Status:"}),e.jsxs(X,{className:"bg-purple-600",children:[e.jsx(ns,{className:"w-3 h-3 mr-1"}),"Managed Artist"]})]}),e.jsxs("div",{className:"border p-4 rounded-lg",children:[e.jsx("h4",{className:"font-medium mb-2",children:"Management Tier:"}),e.jsxs(X,{variant:"outline",className:"text-gold border-gold",children:[e.jsx(Rt,{className:"w-3 h-3 mr-1"}),"Full Management"]})]})]}),e.jsxs("div",{className:"text-center pt-4",children:[e.jsx("h3",{className:"text-lg font-medium mb-2",children:" Application Process Complete!"}),e.jsx("p",{className:"text-muted-foreground",children:"The user now has full access to managed artist benefits and Wai'tuMusic's comprehensive service catalog."})]})]})]})})]}),e.jsx("div",{className:"flex justify-center pt-4",children:e.jsx(E,{variant:"outline",onClick:()=>{n(1),r(null),l(null),d(c.reduce((x,v)=>({...x,[v.id]:"pending"}),{}))},children:"Reset Walkthrough"})})]})}const Sg=[{name:"Instagram",icon:is,urlPrefix:"https://instagram.com/"},{name:"Twitter",icon:is,urlPrefix:"https://twitter.com/"},{name:"YouTube",icon:is,urlPrefix:"https://youtube.com/"},{name:"Spotify",icon:rd,urlPrefix:"https://spotify.com/"},{name:"Facebook",icon:is,urlPrefix:"https://facebook.com/"},{name:"TikTok",icon:is,urlPrefix:"https://tiktok.com/"},{name:"SoundCloud",icon:rd,urlPrefix:"https://soundcloud.com/"}];function oX({open:t,onOpenChange:s,userId:n,userRole:a,onProfileUpdated:r}){var le;const[i,l]=N.useState(!1),[c,o]=N.useState({}),[d,h]=N.useState({}),[u,m]=N.useState({stageName:"",stageNames:[],primaryGenre:"",secondaryGenres:[],topGenres:[],socialMediaHandles:[],instruments:[],biography:"",website:"",basePrice:"",idealPerformanceRate:"",idealServiceRate:"",minimumAcceptableRate:"",performanceRoles:[],professionalRoles:[],primaryRole:"",skillsAndInstruments:[],serviceCapabilities:[],specializations:[],topSpecializations:[],availability:{availabilityType:"weekdays",excludeHolidays:!1,country:"US",customDays:[],timeZone:"UTC",startTime:"09:00",endTime:"17:00"}}),[p,g]=N.useState(""),[x,v]=N.useState({platform:"",handle:"",url:""});N.useState([]);const[y,f]=N.useState([]),[b,j]=N.useState({category:"",name:"",description:""}),[S,k]=N.useState([]),[T,A]=N.useState([]),[C,w]=N.useState({category:"",name:"",description:""}),{toast:P}=nt(),M=a==="artist"||a==="managed_artist"||a==="musician"||a==="managed_musician",I=a==="professional"||a==="managed_professional";N.useEffect(()=>{t&&n&&(M||I)&&(W(),M&&_(),I&&B())},[t,n,a]);const W=async()=>{try{l(!0);let ne;if(a==="artist"||a==="managed_artist"?ne=`/api/artists/${n}`:a==="musician"||a==="managed_musician"?ne=`/api/musicians/${n}`:(a==="professional"||a==="managed_professional")&&(ne=`/api/professionals/${n}`),!ne)return;const te=await(await xe(ne)).json();m({stageName:te.stageName||"",stageNames:te.stageNames||[],primaryGenre:te.primaryGenre||"",secondaryGenres:te.secondaryGenres||[],topGenres:te.topGenres||[],socialMediaHandles:te.socialMediaHandles||[],instruments:te.instruments||[],biography:te.biography||"",website:te.website||"",basePrice:te.basePrice||"",idealPerformanceRate:te.idealPerformanceRate||te.idealServiceRate||"",idealServiceRate:te.idealServiceRate||"",minimumAcceptableRate:te.minimumAcceptableRate||"",performanceRoles:te.performanceRoles||[],professionalRoles:te.professionalRoles||[],primaryRole:te.primaryRole||"",skillsAndInstruments:te.skillsAndInstruments||te.instruments||[],serviceCapabilities:te.serviceCapabilities||[],specializations:te.specializations||[],topSpecializations:te.topSpecializations||[],availability:te.availability||{availabilityType:"weekdays",excludeHolidays:!1,country:"US",customDays:[],timeZone:"UTC",startTime:"09:00",endTime:"17:00"}}),f(te.topGenres||[]),A(te.topSpecializations||[])}catch(ne){console.error("Error fetching profile data:",ne),P({title:"Error",description:"Failed to load profile data",variant:"destructive"})}finally{l(!1)}},_=async()=>{try{const ue=await(await xe("/api/global-genres")).json();o(ue)}catch(ne){console.error("Error fetching global genres:",ne)}},B=async()=>{try{const ue=await(await xe("/api/global-professions")).json();h(ue)}catch(ne){console.error("Error fetching global professions:",ne)}},O=()=>{if(p.trim()){const ne=[...u.stageNames,{name:p.trim(),isPrimary:u.stageNames.length===0}];m({...u,stageNames:ne}),g("")}},z=ne=>{const ue=u.stageNames.filter((te,Ae)=>Ae!==ne);m({...u,stageNames:ue})},F=ne=>{const ue=u.stageNames.map((te,Ae)=>({...te,isPrimary:Ae===ne}));m({...u,stageNames:ue})},K=()=>{if(x.platform&&x.handle){const ne=Sg.find(Ae=>Ae.name===x.platform),ue=(ne==null?void 0:ne.urlPrefix)+x.handle,te=[...u.socialMediaHandles,{platform:x.platform,handle:x.handle,url:ue}];m({...u,socialMediaHandles:te}),v({platform:"",handle:"",url:""})}},D=ne=>{const ue=u.socialMediaHandles.filter((te,Ae)=>Ae!==ne);m({...u,socialMediaHandles:ue})},G=(ne,ue,te=!1)=>{if(!u.secondaryGenres.some(Ge=>Ge.category===ne&&Ge.name===ue)){const Ge=[...u.secondaryGenres,{category:ne,name:ue,isCustom:te}];m({...u,secondaryGenres:Ge})}},H=ne=>{const ue=u.secondaryGenres.filter((te,Ae)=>Ae!==ne);m({...u,secondaryGenres:ue})},V=async()=>{if(b.category&&b.name)try{const ue=await(await fetch("/api/global-genres/custom",{method:"POST",body:JSON.stringify(b),headers:{"Content-Type":"application/json"}})).json();G(b.category,b.name,!0),await _(),j({category:"",name:"",description:""}),P({title:"Success",description:"Custom genre added successfully"})}catch{P({title:"Error",description:"Failed to add custom genre",variant:"destructive"})}},se=ne=>{const ue=y.includes(ne)?y.filter(te=>te!==ne):[...y,ne];f(ue),m({...u,topGenres:ue})},Z=async()=>{try{l(!0);let ne,ue={...u};if(a==="artist"||a==="managed_artist"?(ne=`/api/artists/${n}`,ue.topGenres=y):a==="musician"||a==="managed_musician"?(ne=`/api/musicians/${n}`,ue.topGenres=y):(a==="professional"||a==="managed_professional")&&(ne=`/api/professionals/${n}`,ue.specializations=S,ue.topSpecializations=T,u.availability&&await fetch("/api/professional-availability",{method:"POST",body:JSON.stringify({userId:n,...u.availability}),headers:{"Content-Type":"application/json"}})),!ne)return;await fetch(ne,{method:"PATCH",body:JSON.stringify(ue),headers:{"Content-Type":"application/json"}}),P({title:"Success",description:"Profile updated successfully"}),r&&r(),s(!1)}catch{P({title:"Error",description:"Failed to update profile",variant:"destructive"})}finally{l(!1)}};return!M&&!I?null:e.jsx(kt,{open:t,onOpenChange:s,children:e.jsxs(wt,{className:"max-w-4xl max-h-[80vh] overflow-y-auto",children:[e.jsx(St,{children:e.jsx(Ct,{children:"Enhanced Profile Management"})}),e.jsxs(Ut,{defaultValue:M?"stage-names":"specializations",className:"w-full",children:[e.jsxs(jt,{className:`grid w-full ${M?"grid-cols-7":"grid-cols-6"}`,children:[M&&e.jsxs(e.Fragment,{children:[e.jsx(Ne,{value:"stage-names",children:"Stage Names"}),e.jsx(Ne,{value:"genres",children:"Genres"}),e.jsx(Ne,{value:"top-genres",children:"Top Genres"}),e.jsx(Ne,{value:"social",children:"Social Media"}),e.jsx(Ne,{value:"roles",children:"Roles"}),e.jsx(Ne,{value:"rates",children:"Booking Rates"}),e.jsx(Ne,{value:"basic",children:"Basic Info"})]}),I&&e.jsxs(e.Fragment,{children:[e.jsx(Ne,{value:"specializations",children:"Specializations"}),e.jsx(Ne,{value:"top-specializations",children:"Top Specializations"}),e.jsx(Ne,{value:"availability",children:"Availability"}),e.jsx(Ne,{value:"roles",children:"Roles"}),e.jsx(Ne,{value:"rates",children:"Service Rates"}),e.jsx(Ne,{value:"professional-info",children:"Professional Info"})]})]}),e.jsx(ge,{value:"stage-names",className:"space-y-4",children:e.jsxs(R,{children:[e.jsx(Y,{children:e.jsxs(Q,{className:"flex items-center gap-2",children:[e.jsx(Ue,{className:"w-5 h-5"}),"Stage Names"]})}),e.jsxs(L,{className:"space-y-4",children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsx($,{placeholder:"Enter stage name",value:p,onChange:ne=>g(ne.target.value),onKeyPress:ne=>ne.key==="Enter"&&O()}),e.jsx(E,{onClick:O,children:e.jsx(st,{className:"w-4 h-4"})})]}),e.jsx("div",{className:"space-y-2",children:u.stageNames.map((ne,ue)=>e.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"font-medium",children:ne.name}),ne.isPrimary&&e.jsx(X,{variant:"default",children:"Primary"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[!ne.isPrimary&&e.jsx(E,{variant:"outline",size:"sm",onClick:()=>F(ue),children:e.jsx(Rt,{className:"w-4 h-4"})}),e.jsx(E,{variant:"outline",size:"sm",onClick:()=>z(ue),children:e.jsx(Xt,{className:"w-4 h-4"})})]})]},ue))})]})]})}),e.jsx(ge,{value:"genres",className:"space-y-4",children:e.jsxs(R,{children:[e.jsx(Y,{children:e.jsxs(Q,{className:"flex items-center gap-2",children:[e.jsx(Ze,{className:"w-5 h-5"}),"Secondary Genres"]})}),e.jsxs(L,{className:"space-y-4",children:[e.jsx("div",{className:"grid grid-cols-2 gap-4",children:e.jsxs("div",{children:[e.jsx(q,{children:"Primary Genre"}),e.jsxs(Re,{value:u.primaryGenre,onValueChange:ne=>m({...u,primaryGenre:ne}),children:[e.jsx(Me,{children:e.jsx(Oe,{placeholder:"Select primary genre"})}),e.jsx(_e,{children:Object.entries(c).map(([ne,ue])=>e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold text-sm px-2 py-1 text-muted-foreground",children:ne}),ue.map(te=>e.jsx(U,{value:te.name,children:te.name},te.id))]},ne))})]})]})}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(q,{children:"Secondary Genres"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:u.secondaryGenres.map((ne,ue)=>e.jsxs(X,{variant:"secondary",className:"flex items-center gap-1",children:[ne.name,ne.isCustom&&e.jsx(Rt,{className:"w-3 h-3"}),e.jsx(E,{variant:"ghost",size:"sm",className:"h-4 w-4 p-0",onClick:()=>H(ue),children:e.jsx(Xt,{className:"w-3 h-3"})})]},ue))})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(q,{children:"Add from Global Genres"}),Object.entries(c).map(([ne,ue])=>e.jsxs("div",{className:"space-y-1",children:[e.jsx("div",{className:"font-medium text-sm text-muted-foreground",children:ne}),e.jsx("div",{className:"flex flex-wrap gap-1",children:ue.map(te=>e.jsxs("div",{className:"flex items-center gap-2 p-2 border rounded-lg",children:[e.jsxs(E,{variant:"outline",size:"sm",onClick:()=>G(ne,te.name),className:"flex items-center gap-1",children:[e.jsx(st,{className:"w-3 h-3"}),te.name]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(hs,{id:`top-genre-${te.id}`,checked:y.includes(te.name),onCheckedChange:Ae=>{f(Ae?[...y,te.name]:y.filter(Ge=>Ge!==te.name))}}),e.jsx(q,{htmlFor:`top-genre-${te.id}`,className:"text-xs text-muted-foreground",children:"Top"})]})]},te.id))})]},ne))]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(q,{children:"Add Custom Genre"}),e.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[e.jsxs(Re,{value:b.category,onValueChange:ne=>j({...b,category:ne}),children:[e.jsx(Me,{children:e.jsx(Oe,{placeholder:"Category"})}),e.jsx(_e,{children:Object.keys(c).map(ne=>e.jsx(U,{value:ne,children:ne},ne))})]}),e.jsx($,{placeholder:"Genre name",value:b.name,onChange:ne=>j({...b,name:ne.target.value})}),e.jsxs(E,{onClick:V,className:"flex items-center gap-2",children:[e.jsx(st,{className:"w-4 h-4"}),"Add"]})]})]})]})]})}),e.jsx(ge,{value:"top-genres",className:"space-y-4",children:e.jsxs(R,{children:[e.jsx(Y,{children:e.jsxs(Q,{className:"flex items-center gap-2",children:[e.jsx(Rt,{className:"w-5 h-5"}),"Top Genres (Publicly Displayed)"]})}),e.jsxs(L,{className:"space-y-4",children:[e.jsx("div",{className:"text-sm text-muted-foreground",children:"Select the genres you excel at most. These will be displayed publicly as your specialties."}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(q,{children:"Selected Top Genres"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:y.map((ne,ue)=>e.jsxs(X,{variant:"default",className:"flex items-center gap-1",children:[e.jsx(Rt,{className:"w-3 h-3"}),ne,e.jsx(E,{variant:"ghost",size:"sm",className:"h-4 w-4 p-0",onClick:()=>se(ne),children:e.jsx(Xt,{className:"w-3 h-3"})})]},ue))})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(q,{children:"Available Genres"}),Object.entries(c).map(([ne,ue])=>e.jsxs("div",{className:"space-y-1",children:[e.jsx("div",{className:"font-medium text-sm text-muted-foreground",children:ne}),e.jsx("div",{className:"flex flex-wrap gap-1",children:ue.map(te=>e.jsxs(E,{variant:y.includes(te.name)?"default":"outline",size:"sm",onClick:()=>se(te.name),className:"flex items-center gap-1",children:[y.includes(te.name)?e.jsx(Rt,{className:"w-3 h-3"}):e.jsx(st,{className:"w-3 h-3"}),te.name]},te.id))})]},ne))]})]})]})}),e.jsx(ge,{value:"social",className:"space-y-4",children:e.jsxs(R,{children:[e.jsx(Y,{children:e.jsxs(Q,{className:"flex items-center gap-2",children:[e.jsx(is,{className:"w-5 h-5"}),"Social Media Handles"]})}),e.jsxs(L,{className:"space-y-4",children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(Re,{value:x.platform,onValueChange:ne=>v({...x,platform:ne}),children:[e.jsx(Me,{className:"w-48",children:e.jsx(Oe,{placeholder:"Platform"})}),e.jsx(_e,{children:Sg.map(ne=>e.jsx(U,{value:ne.name,children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ne.icon,{className:"w-4 h-4"}),ne.name]})},ne.name))})]}),e.jsx($,{placeholder:"Handle (without @)",value:x.handle,onChange:ne=>v({...x,handle:ne.target.value}),onKeyPress:ne=>ne.key==="Enter"&&K()}),e.jsx(E,{onClick:K,children:e.jsx(st,{className:"w-4 h-4"})})]}),e.jsx("div",{className:"space-y-2",children:u.socialMediaHandles.map((ne,ue)=>{const te=Sg.find(Ae=>Ae.name===ne.platform);return e.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[te&&e.jsx(te.icon,{className:"w-4 h-4"}),e.jsx("span",{className:"font-medium",children:ne.platform}),e.jsxs("span",{className:"text-muted-foreground",children:["@",ne.handle]})]}),e.jsx(E,{variant:"outline",size:"sm",onClick:()=>D(ue),children:e.jsx(Xt,{className:"w-4 h-4"})})]},ue)})})]})]})}),e.jsx(ge,{value:"roles",className:"space-y-4",children:e.jsxs(R,{children:[e.jsx(Y,{children:e.jsxs(Q,{className:"flex items-center gap-2",children:[e.jsx(Ue,{className:"w-5 h-5"}),M?"Performance Roles":"Professional Roles"]})}),e.jsxs(L,{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(q,{htmlFor:"primaryRole",children:"Primary Role (for technical rider auto-population)"}),e.jsx($,{id:"primaryRole",placeholder:M?"e.g., Lead Vocalist, Guitarist, Songwriter":"e.g., DJ, Photographer, Sound Engineer",value:u.primaryRole||(a==="artist"||a==="managed_artist"?"Lead Vocalist":""),onChange:ne=>m({...u,primaryRole:ne.target.value})}),(a==="artist"||a==="managed_artist")&&!u.primaryRole&&e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Default: Lead Vocalist (uses vocal chords, no instrument required)"})]}),M&&e.jsxs("div",{children:[e.jsx(q,{children:"Skills & Instruments (for technical rider integration)"}),e.jsx(mt,{placeholder:"List your instruments and skills, separated by commas (e.g., Piano, Guitar, Vocals, Songwriting)",value:u.skillsAndInstruments?JSON.stringify(u.skillsAndInstruments).replace(/[\[\]"]/g,"").replace(/,/g,", "):a==="artist"||a==="managed_artist"?"Vocals":"",onChange:ne=>{const ue=ne.target.value.split(",").map(te=>te.trim()).filter(te=>te);m({...u,skillsAndInstruments:ue})}}),(a==="artist"||a==="managed_artist")&&!((le=u.skillsAndInstruments)!=null&&le.length)&&e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Default: Vocals (Lead vocalists use their vocal chords as their primary instrument)"})]}),I&&e.jsxs("div",{children:[e.jsx(q,{children:"Service Capabilities (for booking integration)"}),e.jsx(mt,{placeholder:"List your professional services and equipment owned, separated by commas",value:u.serviceCapabilities?JSON.stringify(u.serviceCapabilities).replace(/[\[\]"]/g,"").replace(/,/g,", "):"",onChange:ne=>{const ue=ne.target.value.split(",").map(te=>te.trim()).filter(te=>te);m({...u,serviceCapabilities:ue})}})]})]})]})}),e.jsx(ge,{value:"rates",className:"space-y-4",children:e.jsxs(R,{children:[e.jsx(Y,{children:e.jsxs(Q,{className:"flex items-center gap-2",children:[e.jsx(Rt,{className:"w-5 h-5"}),M?"Booking Rates":"Service Rates"]})}),e.jsxs(L,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx(q,{htmlFor:"basePrice",children:"Base Price"}),e.jsx($,{id:"basePrice",type:"number",placeholder:"0.00",value:u.basePrice||"",onChange:ne=>m({...u,basePrice:ne.target.value})})]}),e.jsxs("div",{children:[e.jsx(q,{htmlFor:"idealRate",children:M?"Ideal Performance Rate":"Ideal Service Rate"}),e.jsx($,{id:"idealRate",type:"number",placeholder:M?"500.00":"150.00",value:u.idealPerformanceRate||u.idealServiceRate||"",onChange:ne=>{m(M?{...u,idealPerformanceRate:ne.target.value}:{...u,idealServiceRate:ne.target.value})}})]}),e.jsxs("div",{children:[e.jsx(q,{htmlFor:"minimumRate",children:"Minimum Acceptable Rate"}),e.jsx($,{id:"minimumRate",type:"number",placeholder:M?"250.00":"75.00",value:u.minimumAcceptableRate||"",onChange:ne=>m({...u,minimumAcceptableRate:ne.target.value})})]})]}),e.jsxs("div",{className:"text-sm text-muted-foreground",children:[e.jsx("p",{children:"These rates will be used for:"}),e.jsxs("ul",{className:"list-disc list-inside mt-1 space-y-1",children:[e.jsx("li",{children:"Auto-populating booking forms and contracts"}),e.jsx("li",{children:"Technical rider rate calculations"}),e.jsx("li",{children:"Revenue optimization recommendations"}),e.jsx("li",{children:"Counter-offer calculations in booking workflows"})]})]})]})]})}),e.jsx(ge,{value:"basic",className:"space-y-4",children:e.jsxs(R,{children:[e.jsx(Y,{children:e.jsx(Q,{children:"Basic Information"})}),e.jsxs(L,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(q,{children:"Current Stage Name"}),e.jsx($,{value:u.stageName,onChange:ne=>m({...u,stageName:ne.target.value})})]}),e.jsxs("div",{children:[e.jsx(q,{children:"Website"}),e.jsx($,{value:u.website,onChange:ne=>m({...u,website:ne.target.value}),placeholder:"https://yourwebsite.com"})]})]}),e.jsxs("div",{children:[e.jsx(q,{children:"Biography"}),e.jsx(mt,{value:u.biography,onChange:ne=>m({...u,biography:ne.target.value}),placeholder:"Tell us about yourself...",rows:4})]})]})]})}),e.jsx(ge,{value:"specializations",className:"space-y-4",children:e.jsxs(R,{children:[e.jsx(Y,{children:e.jsxs(Q,{className:"flex items-center gap-2",children:[e.jsx(is,{className:"w-5 h-5"}),"Professional Specializations"]})}),e.jsxs(L,{className:"space-y-4",children:[e.jsx("div",{className:"text-sm text-muted-foreground",children:"Select your professional specializations from our comprehensive global catalog."}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(q,{children:"Selected Top Specializations"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:T.map((ne,ue)=>e.jsxs(X,{variant:"default",className:"flex items-center gap-1 bg-yellow-500 hover:bg-yellow-600",children:[e.jsx(Rt,{className:"w-3 h-3"}),ne,e.jsx(E,{variant:"ghost",size:"sm",className:"h-4 w-4 p-0",onClick:()=>A(T.filter(te=>te!==ne)),children:e.jsx(Xt,{className:"w-3 h-3"})})]},ue))})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(q,{children:"Selected Specializations"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:S.map((ne,ue)=>e.jsxs(X,{variant:"secondary",className:"flex items-center gap-1",children:[ne,e.jsx(E,{variant:"ghost",size:"sm",className:"h-4 w-4 p-0",onClick:()=>k(S.filter(te=>te!==ne)),children:e.jsx(Xt,{className:"w-3 h-3"})})]},ue))})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(q,{children:"Available Specializations"}),Object.entries(d).map(([ne,ue])=>e.jsxs("div",{className:"space-y-1",children:[e.jsx("div",{className:"font-medium text-sm text-muted-foreground",children:ne}),e.jsx("div",{className:"flex flex-wrap gap-1",children:ue.map(te=>e.jsxs("div",{className:"flex items-center gap-2 p-2 border rounded-lg",children:[e.jsxs(E,{variant:S.includes(te.name)?"default":"outline",size:"sm",onClick:()=>{S.includes(te.name)?k(S.filter(Ae=>Ae!==te.name)):k([...S,te.name])},className:"flex items-center gap-1",children:[!S.includes(te.name)&&e.jsx(st,{className:"w-3 h-3"}),te.name,te.isCustom&&e.jsx(Rt,{className:"w-3 h-3 ml-1"})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(hs,{id:`top-specialization-${te.id}`,checked:T.includes(te.name),onCheckedChange:Ae=>{A(Ae?[...T,te.name]:T.filter(Ge=>Ge!==te.name))}}),e.jsx(q,{htmlFor:`top-specialization-${te.id}`,className:"text-xs text-muted-foreground",children:"Top"})]})]},te.id))})]},ne))]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(q,{children:"Add Custom Specialization"}),e.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[e.jsxs(Re,{value:C.category,onValueChange:ne=>w({...C,category:ne}),children:[e.jsx(Me,{children:e.jsx(Oe,{placeholder:"Category"})}),e.jsx(_e,{children:Object.keys(d).map(ne=>e.jsx(U,{value:ne,children:ne},ne))})]}),e.jsx($,{placeholder:"Specialization name",value:C.name,onChange:ne=>w({...C,name:ne.target.value})}),e.jsxs(E,{onClick:()=>{C.name&&C.category&&(k([...S,C.name]),w({category:"",name:"",description:""}))},className:"flex items-center gap-2",children:[e.jsx(st,{className:"w-4 h-4"}),"Add"]})]})]})]})]})}),e.jsx(ge,{value:"top-specializations",className:"space-y-4",children:e.jsxs(R,{children:[e.jsx(Y,{children:e.jsxs(Q,{className:"flex items-center gap-2",children:[e.jsx(Rt,{className:"w-5 h-5"}),"Top Specializations (Publicly Displayed)"]})}),e.jsxs(L,{className:"space-y-4",children:[e.jsx("div",{className:"text-sm text-muted-foreground",children:"Select the specializations you excel at most. These will be displayed publicly as your expertise."}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(q,{children:"Selected Top Specializations"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:T.map((ne,ue)=>e.jsxs(X,{variant:"default",className:"flex items-center gap-1",children:[e.jsx(Rt,{className:"w-3 h-3"}),ne,e.jsx(E,{variant:"ghost",size:"sm",className:"h-4 w-4 p-0",onClick:()=>A(T.filter(te=>te!==ne)),children:e.jsx(Xt,{className:"w-3 h-3"})})]},ue))})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(q,{children:"Available Specializations"}),Object.entries(d).map(([ne,ue])=>e.jsxs("div",{className:"space-y-1",children:[e.jsx("div",{className:"font-medium text-sm text-muted-foreground",children:ne}),e.jsx("div",{className:"flex flex-wrap gap-1",children:ue.map(te=>e.jsxs(E,{variant:T.includes(te.name)?"default":"outline",size:"sm",onClick:()=>{T.includes(te.name)?A(T.filter(Ae=>Ae!==te.name)):A([...T,te.name])},className:"flex items-center gap-1",children:[!T.includes(te.name)&&e.jsx(st,{className:"w-3 h-3"}),te.name,te.isCustom&&e.jsx(Rt,{className:"w-3 h-3 ml-1"})]},te.id))})]},ne))]})]})]})}),e.jsx(ge,{value:"availability",className:"space-y-4",children:e.jsxs(R,{children:[e.jsx(Y,{children:e.jsxs(Q,{className:"flex items-center gap-2",children:[e.jsx(dt,{className:"w-5 h-5"}),"Availability Settings"]})}),e.jsxs(L,{className:"space-y-4",children:[e.jsx("div",{className:"text-sm text-muted-foreground",children:"Configure your availability for consultation bookings. These settings will impact your booking calendar."}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(q,{children:"Availability Type"}),e.jsxs(Re,{value:u.availability.availabilityType,onValueChange:ne=>m({...u,availability:{...u.availability,availabilityType:ne}}),children:[e.jsx(Me,{children:e.jsx(Oe,{placeholder:"Select availability type"})}),e.jsxs(_e,{children:[e.jsx(U,{value:"weekdays",children:"Weekdays Only"}),e.jsx(U,{value:"weekends",children:"Weekends Only"}),e.jsx(U,{value:"daily",children:"Daily"}),e.jsx(U,{value:"custom",children:"Custom Schedule"})]})]})]}),e.jsxs("div",{children:[e.jsx(q,{children:"Time Zone"}),e.jsxs(Re,{value:u.availability.timeZone,onValueChange:ne=>m({...u,availability:{...u.availability,timeZone:ne}}),children:[e.jsx(Me,{children:e.jsx(Oe,{placeholder:"Select time zone"})}),e.jsxs(_e,{children:[e.jsx(U,{value:"UTC",children:"UTC"}),e.jsx(U,{value:"EST",children:"EST"}),e.jsx(U,{value:"PST",children:"PST"}),e.jsx(U,{value:"GMT",children:"GMT"}),e.jsx(U,{value:"CET",children:"CET"})]})]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(q,{children:"Start Time"}),e.jsx($,{type:"time",value:u.availability.startTime,onChange:ne=>m({...u,availability:{...u.availability,startTime:ne.target.value}})})]}),e.jsxs("div",{children:[e.jsx(q,{children:"End Time"}),e.jsx($,{type:"time",value:u.availability.endTime,onChange:ne=>m({...u,availability:{...u.availability,endTime:ne.target.value}})})]})]}),e.jsx("div",{className:"space-y-2",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",id:"excludeHolidays",checked:u.availability.excludeHolidays,onChange:ne=>m({...u,availability:{...u.availability,excludeHolidays:ne.target.checked}})}),e.jsx(q,{htmlFor:"excludeHolidays",children:"Exclude Holidays"})]})}),e.jsxs("div",{children:[e.jsx(q,{children:"Country (for holiday detection)"}),e.jsxs(Re,{value:u.availability.country,onValueChange:ne=>m({...u,availability:{...u.availability,country:ne}}),children:[e.jsx(Me,{children:e.jsx(Oe,{placeholder:"Select country"})}),e.jsxs(_e,{children:[e.jsx(U,{value:"US",children:"United States"}),e.jsx(U,{value:"CA",children:"Canada"}),e.jsx(U,{value:"GB",children:"United Kingdom"}),e.jsx(U,{value:"AU",children:"Australia"}),e.jsx(U,{value:"DE",children:"Germany"}),e.jsx(U,{value:"FR",children:"France"}),e.jsx(U,{value:"IT",children:"Italy"}),e.jsx(U,{value:"ES",children:"Spain"}),e.jsx(U,{value:"NL",children:"Netherlands"}),e.jsx(U,{value:"SE",children:"Sweden"})]})]})]})]})]})}),e.jsx(ge,{value:"professional-info",className:"space-y-4",children:e.jsxs(R,{children:[e.jsx(Y,{children:e.jsxs(Q,{className:"flex items-center gap-2",children:[e.jsx(rd,{className:"w-5 h-5"}),"Professional Information"]})}),e.jsxs(L,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(q,{children:"Professional Name"}),e.jsx($,{value:u.stageName,onChange:ne=>m({...u,stageName:ne.target.value}),placeholder:"Your professional name"})]}),e.jsxs("div",{children:[e.jsx(q,{children:"Website"}),e.jsx($,{value:u.website,onChange:ne=>m({...u,website:ne.target.value}),placeholder:"https://yourwebsite.com"})]})]}),e.jsxs("div",{children:[e.jsx(q,{children:"Professional Biography"}),e.jsx(mt,{value:u.biography,onChange:ne=>m({...u,biography:ne.target.value}),placeholder:"Describe your professional background and expertise...",rows:4})]})]})]})})]}),e.jsxs("div",{className:"flex justify-end gap-2 pt-4",children:[e.jsx(E,{variant:"outline",onClick:()=>s(!1),children:"Cancel"}),e.jsx(E,{onClick:Z,disabled:i,children:i?"Saving...":"Save Profile"})]})]})})}function cX(){_s(),Tt(),nt();const[t,s]=N.useState(""),[n,a]=N.useState(""),[r,i]=N.useState(!1);N.useState(!1),N.useState({email:"",fullName:"",roleId:"",password:"test123"});const{data:l=[],isLoading:c}=ke({queryKey:["/api/artists"],queryFn:async()=>(await xe("/api/artists")).json()}),{data:o=[],isLoading:d}=ke({queryKey:["/api/musicians"],queryFn:async()=>(await xe("/api/musicians")).json()}),{data:h={},isLoading:u}=ke({queryKey:["/api/global-genres"],queryFn:async()=>(await xe("/api/global-genres")).json()});ke({queryKey:["/api/professionals"],queryFn:async()=>(await xe("/api/professionals")).json()}),ke({queryKey:["/api/global-professions"],queryFn:async()=>(await xe("/api/global-professions")).json()});const m=(x,v)=>{s(x),a(v),i(!0)},p=x=>x.topGenres&&x.topGenres.length>0?x.topGenres:[],g=x=>x.socialMediaHandles&&x.socialMediaHandles.length>0?x.socialMediaHandles:[];return c||d||u?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"})}):e.jsxs("div",{className:"container mx-auto p-6 space-y-6",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-6",children:[e.jsx(Rt,{className:"w-6 h-6 text-primary"}),e.jsx("h1",{className:"text-2xl font-bold",children:"Enhanced Profile Management Test"})]}),e.jsxs(R,{children:[e.jsx(Y,{children:e.jsx(Q,{children:"Global Genres Available"})}),e.jsx(L,{children:e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:Object.entries(h).map(([x,v])=>e.jsxs("div",{className:"space-y-2",children:[e.jsx("h3",{className:"font-semibold text-sm text-muted-foreground",children:x}),e.jsxs("div",{className:"flex flex-wrap gap-1",children:[v.slice(0,5).map(y=>e.jsx(X,{variant:"outline",className:"text-xs",children:y.name},y.id)),v.length>5&&e.jsxs(X,{variant:"outline",className:"text-xs",children:["+",v.length-5," more"]})]})]},x))})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs(R,{children:[e.jsx(Y,{children:e.jsxs(Q,{className:"flex items-center gap-2",children:[e.jsx(Ue,{className:"w-5 h-5"}),"Artists"]})}),e.jsx(L,{className:"space-y-4",children:l.map(x=>e.jsxs("div",{className:"p-4 border rounded-lg space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"font-semibold",children:x.stageName}),e.jsxs(E,{variant:"outline",size:"sm",onClick:()=>m(x.userId.toString(),"artist"),children:[e.jsx($s,{className:"w-4 h-4 mr-2"}),"Edit Profile"]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-sm font-medium",children:"Top Genres:"}),e.jsx("div",{className:"flex flex-wrap gap-1 mt-1",children:p(x).map((v,y)=>e.jsxs(X,{variant:"default",className:"text-xs",children:[e.jsx(Rt,{className:"w-3 h-3 mr-1"}),v]},y))})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-sm font-medium",children:"Social Media:"}),e.jsx("div",{className:"flex flex-wrap gap-1 mt-1",children:g(x).map((v,y)=>e.jsxs(X,{variant:"secondary",className:"text-xs",children:[e.jsx(is,{className:"w-3 h-3 mr-1"}),v.platform]},y))})]})]})]},x.userId))})]}),e.jsxs(R,{children:[e.jsx(Y,{children:e.jsxs(Q,{className:"flex items-center gap-2",children:[e.jsx(Ze,{className:"w-5 h-5"}),"Musicians"]})}),e.jsx(L,{className:"space-y-4",children:o.map(x=>e.jsxs("div",{className:"p-4 border rounded-lg space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"font-semibold",children:x.stageName||"Unnamed Musician"}),e.jsxs(E,{variant:"outline",size:"sm",onClick:()=>m(x.userId.toString(),"musician"),children:[e.jsx($s,{className:"w-4 h-4 mr-2"}),"Edit Profile"]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-sm font-medium",children:"Instruments:"}),e.jsx("div",{className:"flex flex-wrap gap-1 mt-1",children:(x.instruments||[]).map((v,y)=>e.jsx(X,{variant:"outline",className:"text-xs",children:v},y))})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-sm font-medium",children:"Top Genres:"}),e.jsx("div",{className:"flex flex-wrap gap-1 mt-1",children:p(x).map((v,y)=>e.jsxs(X,{variant:"default",className:"text-xs",children:[e.jsx(Rt,{className:"w-3 h-3 mr-1"}),v]},y))})]})]})]},x.userId))})]})]}),e.jsx(oX,{open:r,onOpenChange:i,userId:t,userRole:n,onProfileUpdated:()=>{window.location.reload()}})]})}function dX({open:t,onClose:s,currencies:n,currentRate:a,onSubmit:r}){const[i,l]=N.useState("USD"),[c,o]=N.useState(""),[d,h]=N.useState(""),[u,m]=N.useState({});lt.useEffect(()=>{const y={};n.forEach(f=>{y[f.code]=f.exchangeRate||1}),m(y)},[n]);const p=(y,f)=>{if(f==="USD")return y;const b=u[f]||1;return y/b},g=(y,f)=>{const b=n.find(j=>j.code===f);return`${(b==null?void 0:b.symbol)||"$"}${y.toFixed(2)}`},x=()=>{if(!c||!i||!d.trim())return;const y=parseFloat(c),f=p(y,i);r({currency:i,amount:y,usdEquivalent:f,message:d.trim()}),o(""),h(""),l("USD"),s()},v=c?p(parseFloat(c),i):0;return e.jsx(kt,{open:t,onOpenChange:s,children:e.jsxs(wt,{className:"max-w-md",children:[e.jsx(St,{children:e.jsxs(Ct,{className:"flex items-center gap-2",children:[e.jsx(MessageCircle,{className:"h-5 w-5"}),"Submit Counter Offer"]})}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[e.jsx("h4",{className:"font-medium text-gray-800 mb-2",children:"Current Offered Rate"}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-lg font-semibold",children:g(a.originalAmount,a.originalCurrency)}),e.jsx(Qa,{className:"h-4 w-4 text-gray-400"}),e.jsxs("span",{className:"text-lg font-semibold",children:[g(a.adminSetRate,"USD")," USD"]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"Currency"}),e.jsxs(Re,{value:i,onValueChange:l,children:[e.jsx(Me,{children:e.jsx(Oe,{placeholder:"Select currency"})}),e.jsx(_e,{children:n.map(y=>e.jsx(U,{value:y.code,children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(is,{className:"h-4 w-4"}),y.symbol," ",y.code]})},y.code))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"Your Rate"}),e.jsx($,{type:"number",step:"0.01",placeholder:"Enter amount",value:c,onChange:y=>o(y.target.value)})]})]}),c&&e.jsx("div",{className:"bg-blue-50 p-3 rounded-lg",children:e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{className:"text-blue-700",children:"Your Offer:"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"font-semibold",children:g(parseFloat(c),i)}),i!=="USD"&&e.jsxs(e.Fragment,{children:[e.jsx(Qa,{className:"h-3 w-3"}),e.jsxs("span",{className:"font-semibold",children:[g(v,"USD")," USD"]})]})]})]})}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"Explanation (Required)"}),e.jsx(mt,{placeholder:"Explain why you're proposing this rate...",value:d,onChange:y=>h(y.target.value),rows:3})]})]}),e.jsxs("div",{className:"flex gap-3 pt-4",children:[e.jsx(E,{onClick:x,disabled:!c||!i||!d.trim(),className:"flex-1",children:"Submit Counter Offer"}),e.jsx(E,{variant:"outline",onClick:s,children:"Cancel"})]})]})]})})}function P1({bookingId:t,musicianId:s,rateInfo:n,currencies:a,onResponseSubmitted:r}){var b,j;const[i,l]=N.useState(""),[c,o]=N.useState(""),[d,h]=N.useState(!1),[u,m]=N.useState(!1),{toast:p}=nt(),g=(S,k)=>{const T=a.find(A=>A.code===k);return`${(T==null?void 0:T.symbol)||"$"}${S.toFixed(2)}`},x=async S=>{if(!i){p({title:"Response Required",description:"Please select accept, decline, or counter offer",variant:"destructive"});return}if(i==="counter_offer"){m(!0);return}try{if(h(!0),(await xe(`/api/bookings/${t}/musicians/${s}/respond-rate`,{method:"POST",body:JSON.stringify({response:i,message:c||void 0,counterOffer:S})})).ok)p({title:"Response Submitted",description:`You have ${i==="counter_offer"?"submitted a counter offer for":i} the performance rate offer`}),r==null||r();else throw new Error("Failed to submit response")}catch{p({title:"Failed to Submit Response",description:"Please try again",variant:"destructive"})}finally{h(!1)}},v=S=>{o(`Counter offer: ${g(S.amount,S.currency)} (${g(S.usdEquivalent,"USD")} USD) - ${S.message}`),x(S)},y=S=>{switch(S){case"accepted":return e.jsxs(X,{className:"bg-green-100 text-green-800 border-green-200",children:[e.jsx(ct,{className:"h-3 w-3 mr-1"}),"Accepted"]});case"declined":return e.jsxs(X,{className:"bg-red-100 text-red-800 border-red-200",children:[e.jsx(Fa,{className:"h-3 w-3 mr-1"}),"Declined"]});case"counter_offer":return e.jsxs(X,{className:"bg-yellow-100 text-yellow-800 border-yellow-200",children:[e.jsx(Li,{className:"h-3 w-3 mr-1"}),"Counter Offer Submitted"]});case"admin_set":return e.jsxs(X,{className:"bg-blue-100 text-blue-800 border-blue-200",children:[e.jsx(Qt,{className:"h-3 w-3 mr-1"}),"Awaiting Response"]});default:return e.jsxs(X,{variant:"outline",children:[e.jsx(Qt,{className:"h-3 w-3 mr-1"}),"Pending"]})}},f=n.musicianResponse&&["accepted","declined","counter_offer"].includes(n.musicianResponse);return e.jsxs(R,{children:[e.jsx(Y,{children:e.jsxs(Q,{className:"flex items-center gap-2",children:[e.jsx(It,{className:"h-5 w-5"}),"Performance Rate Offer",y(n.rateStatus)]})}),e.jsxs(L,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-purple-50 p-4 rounded-lg border",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(is,{className:"h-4 w-4 text-blue-600"}),e.jsx("span",{className:"text-sm font-medium text-blue-800",children:"Original Currency"})]}),e.jsx("p",{className:"text-2xl font-bold text-blue-900",children:g(n.originalAmount,n.originalCurrency)}),e.jsx("p",{className:"text-xs text-blue-600",children:n.originalCurrency})]}),e.jsxs("div",{className:"bg-gradient-to-r from-green-50 to-emerald-50 p-4 rounded-lg border",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(It,{className:"h-4 w-4 text-green-600"}),e.jsx("span",{className:"text-sm font-medium text-green-800",children:"USD Equivalent"})]}),e.jsx("p",{className:"text-2xl font-bold text-green-900",children:g(n.adminSetRate,"USD")}),e.jsx("p",{className:"text-xs text-green-600",children:"Site Currency"})]})]}),n.rateNotes&&e.jsxs("div",{className:"bg-gray-50 p-3 rounded-lg",children:[e.jsx("h4",{className:"font-medium text-gray-800 mb-1",children:"Admin Notes"}),e.jsx("p",{className:"text-sm text-gray-600",children:n.rateNotes})]}),!f&&n.rateStatus==="admin_set"?e.jsxs("div",{className:"space-y-4 border-t pt-4",children:[e.jsx("h4",{className:"font-medium",children:"Your Response"}),e.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[e.jsxs(E,{variant:i==="accepted"?"default":"outline",onClick:()=>l("accepted"),className:i==="accepted"?"bg-green-600 hover:bg-green-700":"",children:[e.jsx(ct,{className:"h-4 w-4 mr-2"}),"Accept Rate"]}),e.jsxs(E,{variant:i==="counter_offer"?"default":"outline",onClick:()=>l("counter_offer"),className:i==="counter_offer"?"bg-yellow-600 hover:bg-yellow-700":"",children:[e.jsx(Li,{className:"h-4 w-4 mr-2"}),"Counter Offer"]}),e.jsxs(E,{variant:i==="declined"?"default":"outline",onClick:()=>l("declined"),className:i==="declined"?"bg-red-600 hover:bg-red-700":"",children:[e.jsx(Fa,{className:"h-4 w-4 mr-2"}),"Decline Rate"]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"Message (Optional)"}),e.jsx(mt,{placeholder:"Add a message about your response...",value:c,onChange:S=>o(S.target.value),rows:3})]}),e.jsx(E,{onClick:()=>x(),disabled:d||!i,className:"w-full",children:d?"Submitting...":i==="counter_offer"?"Proceed with Counter Offer":`Submit ${i?i.charAt(0).toUpperCase()+i.slice(1).replace("_"," "):"Response"}`})]}):f?e.jsxs("div",{className:"border-t pt-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(Li,{className:"h-4 w-4 text-blue-600"}),e.jsx("span",{className:"font-medium",children:"Your Response"}),e.jsx(X,{className:n.musicianResponse==="accepted"?"bg-green-100 text-green-800":n.musicianResponse==="declined"?"bg-red-100 text-red-800":n.musicianResponse==="counter_offer"?"bg-yellow-100 text-yellow-800":"bg-gray-100 text-gray-800",children:(b=n.musicianResponse)==null?void 0:b.replace("_"," ").toUpperCase()})]}),n.musicianResponse==="counter_offer"&&n.counterOfferAmount&&e.jsxs("div",{className:"bg-yellow-50 p-3 rounded-lg mb-3",children:[e.jsx("h5",{className:"font-medium text-yellow-800 mb-1",children:"Your Counter Offer"}),e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("span",{className:"text-lg font-semibold text-yellow-900",children:g(n.counterOfferAmount,n.counterOfferCurrency)}),n.counterOfferCurrency!=="USD"&&e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"text-yellow-600",children:""}),e.jsxs("span",{className:"text-yellow-900",children:[g(n.counterOfferUsdEquivalent,"USD")," USD"]})]})]}),n.counterOfferMessage&&e.jsxs("p",{className:"text-sm text-yellow-700 italic",children:['"',n.counterOfferMessage,'"']})]}),n.musicianResponseMessage&&e.jsxs("p",{className:"text-sm text-gray-600 bg-gray-50 p-3 rounded",children:['"',n.musicianResponseMessage,'"']}),n.musicianResponseAt&&e.jsxs("p",{className:"text-xs text-gray-500 mt-2",children:["Responded on ",new Date(n.musicianResponseAt).toLocaleDateString()]}),n.adminCounterResponse&&e.jsxs("div",{className:"mt-3 bg-blue-50 p-3 rounded-lg",children:[e.jsx("h5",{className:"font-medium text-blue-800 mb-1",children:"Admin Response"}),e.jsx(X,{className:n.adminCounterResponse==="accepted"?"bg-green-100 text-green-800":n.adminCounterResponse==="declined"?"bg-red-100 text-red-800":"bg-gray-100 text-gray-800",children:(j=n.adminCounterResponse)==null?void 0:j.toUpperCase()}),n.adminCounterResponseMessage&&e.jsxs("p",{className:"text-sm text-blue-700 mt-1",children:['"',n.adminCounterResponseMessage,'"']})]})]}):e.jsxs("div",{className:"text-center py-4 text-gray-500",children:[e.jsx(Qt,{className:"h-8 w-8 mx-auto mb-2 opacity-50"}),e.jsx("p",{children:"Waiting for admin to set performance rate"})]}),n.rateSetAt&&e.jsxs("p",{className:"text-xs text-gray-500",children:["Rate set on ",new Date(n.rateSetAt).toLocaleDateString()]}),e.jsx(dX,{open:u,onClose:()=>{m(!1),l("")},currencies:a,currentRate:{adminSetRate:n.adminSetRate,originalCurrency:n.originalCurrency,originalAmount:n.originalAmount},onSubmit:v})]})]})}function uX(){const[t,s]=N.useState([]),[n,a]=N.useState([]),[r,i]=N.useState(!0),{user:l}=_s(),{toast:c}=nt();N.useEffect(()=>{o()},[l]);const o=async()=>{if(l)try{i(!0);const g=await xe("/api/currencies");if(g.ok){const v=await g.json();a(v)}const x=await xe(`/api/musicians/${l.id}/booking-rates`);if(x.ok){const v=await x.json();s(v)}}catch(g){console.error("Error loading musician rate data:",g),c({title:"Error Loading Data",description:"Failed to load booking rate information",variant:"destructive"})}finally{i(!1)}},d=()=>{o()},h=g=>{switch(g){case"accepted":return"bg-green-100 text-green-800 border-green-200";case"declined":return"bg-red-100 text-red-800 border-red-200";case"admin_set":return"bg-blue-100 text-blue-800 border-blue-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}},u=t.filter(g=>{var x,v;return((x=g.rateInfo)==null?void 0:x.rateStatus)==="admin_set"&&!["accepted","declined"].includes(((v=g.rateInfo)==null?void 0:v.musicianResponse)||"")}),m=t.filter(g=>{var x;return g.rateInfo&&["accepted","declined","counter_offer"].includes(((x=g.rateInfo)==null?void 0:x.musicianResponse)||"")}),p=t.filter(g=>!g.rateInfo||g.rateInfo.rateStatus==="pending");return r?e.jsx("div",{className:"max-w-6xl mx-auto p-6",children:e.jsx("div",{className:"space-y-6",children:e.jsx(R,{children:e.jsxs(L,{className:"p-8 text-center",children:[e.jsx(Qt,{className:"h-8 w-8 mx-auto mb-4 animate-spin"}),e.jsx("p",{children:"Loading your performance rate information..."})]})})})}):e.jsxs("div",{className:"max-w-6xl mx-auto p-6 space-y-6",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(It,{className:"h-8 w-8 text-blue-600"}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold",children:"Performance Rate Management"}),e.jsx("p",{className:"text-gray-600",children:"Manage your booking rates and responses"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsx(R,{children:e.jsx(L,{className:"p-6",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Qt,{className:"h-8 w-8 text-blue-500"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold text-blue-600",children:u.length}),e.jsx("p",{className:"text-sm text-gray-600",children:"Pending Responses"})]})]})})}),e.jsx(R,{children:e.jsx(L,{className:"p-6",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(It,{className:"h-8 w-8 text-green-500"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold text-green-600",children:m.length}),e.jsx("p",{className:"text-sm text-gray-600",children:"Responded"})]})]})})}),e.jsx(R,{children:e.jsx(L,{className:"p-6",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Ue,{className:"h-8 w-8 text-gray-500"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold text-gray-600",children:p.length}),e.jsx("p",{className:"text-sm text-gray-600",children:"Awaiting Rate Setting"})]})]})})})]}),u.length>0&&e.jsxs("div",{className:"space-y-4",children:[e.jsx("h2",{className:"text-xl font-semibold text-red-600",children:"Action Required - Pending Rate Responses"}),e.jsx("div",{className:"space-y-4",children:u.map(g=>{var x,v,y;return e.jsx("div",{className:"border-2 border-red-200 rounded-lg p-1",children:e.jsxs(R,{children:[e.jsxs(Y,{className:"pb-4",children:[e.jsxs(Q,{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(cn,{className:"h-5 w-5"}),g.artistName]}),e.jsx(X,{className:h(((x=g.rateInfo)==null?void 0:x.rateStatus)||""),children:(y=(v=g.rateInfo)==null?void 0:v.rateStatus)==null?void 0:y.replace("_"," ").toUpperCase()})]}),e.jsx("div",{className:"text-sm text-gray-600",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(dt,{className:"h-4 w-4"}),new Date(g.eventDate).toLocaleDateString()]}),e.jsx("span",{children:g.eventLocation})]})})]}),e.jsx(L,{className:"pt-0",children:g.rateInfo&&e.jsx(P1,{bookingId:g.id,musicianId:(l==null?void 0:l.id)||0,rateInfo:g.rateInfo,currencies:n,onResponseSubmitted:d})})]})},g.id)})})]}),m.length>0&&e.jsxs("div",{className:"space-y-4",children:[e.jsx("h2",{className:"text-xl font-semibold",children:"Previous Rate Responses"}),e.jsx("div",{className:"grid gap-4",children:m.map(g=>{var x,v,y;return e.jsxs(R,{children:[e.jsxs(Y,{className:"pb-4",children:[e.jsxs(Q,{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(cn,{className:"h-5 w-5"}),g.artistName]}),e.jsx(X,{className:h(((x=g.rateInfo)==null?void 0:x.musicianResponse)||""),children:(y=(v=g.rateInfo)==null?void 0:v.musicianResponse)==null?void 0:y.toUpperCase()})]}),e.jsx("div",{className:"text-sm text-gray-600",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(dt,{className:"h-4 w-4"}),new Date(g.eventDate).toLocaleDateString()]}),e.jsx("span",{children:g.eventLocation})]})})]}),e.jsx(L,{className:"pt-0",children:g.rateInfo&&e.jsx(P1,{bookingId:g.id,musicianId:(l==null?void 0:l.id)||0,rateInfo:g.rateInfo,currencies:n,onResponseSubmitted:d})})]},g.id)})})]}),p.length>0&&e.jsxs("div",{className:"space-y-4",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-600",children:"Awaiting Rate Setting"}),e.jsx("div",{className:"grid gap-4",children:p.map(g=>e.jsx(R,{className:"bg-gray-50",children:e.jsx(L,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(cn,{className:"h-5 w-5 text-gray-500"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold",children:g.artistName}),e.jsxs("div",{className:"flex items-center gap-4 text-sm text-gray-600",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(dt,{className:"h-4 w-4"}),new Date(g.eventDate).toLocaleDateString()]}),e.jsx("span",{children:g.eventLocation})]})]})]}),e.jsxs(X,{variant:"outline",className:"text-gray-500",children:[e.jsx(Qt,{className:"h-3 w-3 mr-1"}),"Awaiting Admin"]})]})})},g.id))})]}),t.length===0&&e.jsx(R,{children:e.jsxs(L,{className:"p-8 text-center",children:[e.jsx(Ue,{className:"h-12 w-12 mx-auto mb-4 text-gray-400"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-600 mb-2",children:"No Booking Assignments"}),e.jsx("p",{className:"text-gray-500",children:"You don't have any booking assignments with rate information yet."})]})})]})}const mX={default:null,success:ct,warning:ys,error:on,info:gm},hX={default:"",success:"border-l-4 border-green-500",warning:"border-l-4 border-yellow-500",error:"border-l-4 border-red-500",info:"border-l-4 border-blue-500"},xX={sm:"max-w-md",md:"max-w-lg",lg:"max-w-2xl",xl:"max-w-4xl",full:"max-w-[95vw] max-h-[95vh]"},I5=({open:t,onOpenChange:s,title:n,description:a,children:r,type:i="default",size:l="md",showFooter:c=!0,primaryAction:o,secondaryAction:d,closeOnOutsideClick:h=!0,closeOnEscape:u=!0,preventScroll:m=!0,className:p,contentClassName:g,"aria-describedby":x})=>{const v=mX[i],y=lt.useCallback(f=>{f.key==="Escape"&&u&&s(!1)},[u,s]);return lt.useEffect(()=>(t&&(document.addEventListener("keydown",y),m&&(document.body.style.overflow="hidden")),()=>{document.removeEventListener("keydown",y),m&&(document.body.style.overflow="")}),[t,y,m]),e.jsx(e0,{open:t,onOpenChange:s,children:e.jsxs(t0,{children:[e.jsx(Ap,{className:Je("fixed inset-0 z-50 bg-black/80 backdrop-blur-sm","data-[state=open]:animate-in data-[state=closed]:animate-out","data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",p)}),e.jsxs(Pp,{className:Je("fixed left-1/2 top-1/2 z-50 w-full -translate-x-1/2 -translate-y-1/2","bg-white dark:bg-gray-900 rounded-lg border shadow-lg","data-[state=open]:animate-in data-[state=closed]:animate-out","data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0","data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95","data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%]","data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%]","duration-200",xX[l],hX[i],g),onPointerDownOutside:h?void 0:f=>f.preventDefault(),"aria-describedby":x,children:[e.jsxs("div",{className:"flex items-start justify-between p-6 pb-4",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[v&&e.jsx(v,{className:Je("h-6 w-6",i==="success"&&"text-green-600",i==="warning"&&"text-yellow-600",i==="error"&&"text-red-600",i==="info"&&"text-blue-600")}),e.jsxs("div",{children:[e.jsx(Tp,{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:n}),a&&e.jsx(Ep,{className:"mt-1 text-sm text-gray-600 dark:text-gray-400",children:a})]})]}),e.jsx(Mp,{asChild:!0,children:e.jsx("button",{className:Je("rounded-sm opacity-70 ring-offset-background transition-opacity","hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2","disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground"),"aria-label":"Close modal",children:e.jsx(Xt,{className:"h-4 w-4"})})})]}),r&&e.jsx("div",{className:"px-6 py-2 max-h-[60vh] overflow-y-auto",children:r}),c&&(o||d)&&e.jsxs("div",{className:"flex items-center justify-end space-x-3 p-6 pt-4 bg-gray-50 dark:bg-gray-800/50 rounded-b-lg",children:[d&&e.jsx($a,{variant:"outline",onClick:d.onClick,children:d.label}),o&&e.jsx($a,{variant:o.variant||"default",onClick:o.onClick,loading:o.loading,loadingText:"Processing...",children:o.label})]})]})]})})},pX={Drums:1,Drummer:1,Percussion:2,Percussionist:2,"Bass Player":3,Bass:3,"Upright Bass":3,"Lead Guitarist":4,"Rhythm Guitarist":5,Guitar:4,"Electric Guitar":4,"Acoustic Guitar":5,Keyboardist:6,Piano:6,Keyboard:6,Synth:6,Violinist:7,Violin:7,Saxophonist:8,Saxophone:8,Trumpet:9,Trombone:10,Flute:11,"Lead Vocalist":20,"Background Vocalist":21,"Backing Vocals":21,Vocalist:20,Singer:20},fX=t=>{const s=t.toLowerCase();return s.includes("keyboard")||s.includes("synth")||s.includes("piano")?"Line":s.includes("guitar")||s.includes("bass")?"Instrument":(s.includes("vocal")||s.includes("mic")||s.includes("singer")||s.includes("drum"),"XLR")},gX=t=>{const s=t.toLowerCase();return s.includes("vocal")||s.includes("condenser")||s.includes("overhead")||s.includes("acoustic")||s.includes("singer")};function jX({bookingId:t,assignedTalent:s=[],canEdit:n=!0,onSave:a}){const{toast:r}=nt(),[i,l]=N.useState([]),[c]=N.useState(32),[o,d]=N.useState(!1),[h,u]=N.useState(!1),[m,p]=N.useState(null),g=N.useMemo(()=>{if(!s.length)return[];const j=[];let S=1;for(s.map(A=>({...A,instruments:[A.primaryTalent,...A.secondaryTalents].filter(Boolean)})).flatMap(A=>A.instruments.map(C=>({talent:A,instrument:C,priority:pX[C]||15}))).sort((A,C)=>A.priority-C.priority).forEach(({talent:A,instrument:C,priority:w})=>{if(S<=c){const P=fX(C),M=gX(C);j.push({channel:S,instrument:C,inputType:P,phantom:M,gain:"0dB",eq:{high:"0dB",mid:"0dB",low:"0dB"},assignedTo:A.name,assignedUserId:A.userId,stageName:A.stageName,priority:w,assigned:!0,notes:`Stage Plot Assignment: ${A.stageName}`}),S++}});S<=c;)j.push({channel:S,instrument:"",inputType:"XLR",phantom:!1,gain:"0dB",eq:{high:"0dB",mid:"0dB",low:"0dB"},assignedTo:"",stageName:"",priority:999,assigned:!1}),S++;return j},[s,c]);N.useEffect(()=>{l(g)},[g]);const x=j=>{const S=j.toLowerCase();return S.includes("vocal")||S.includes("singer")?e.jsx(yn,{className:"h-4 w-4"}):S.includes("guitar")?e.jsx(Po,{className:"h-4 w-4"}):S.includes("drum")?e.jsx(_y,{className:"h-4 w-4"}):S.includes("keyboard")||S.includes("piano")?e.jsx(I6,{className:"h-4 w-4"}):S.includes("bass")?e.jsx(Ue,{className:"h-4 w-4"}):e.jsx(B6,{className:"h-4 w-4"})},v=j=>j.assigned?j.instrument.toLowerCase().includes("vocal")||j.instrument.toLowerCase().includes("singer")?"bg-red-50 dark:bg-red-900/20 border-red-200 dark:border-red-800":j.instrument.toLowerCase().includes("drum")?"bg-orange-50 dark:bg-orange-900/20 border-orange-200 dark:border-orange-800":j.instrument.toLowerCase().includes("guitar")?"bg-blue-50 dark:bg-blue-900/20 border-blue-200 dark:border-blue-800":j.instrument.toLowerCase().includes("bass")?"bg-purple-50 dark:bg-purple-900/20 border-purple-200 dark:border-purple-800":j.instrument.toLowerCase().includes("keyboard")||j.instrument.toLowerCase().includes("piano")?"bg-green-50 dark:bg-green-900/20 border-green-200 dark:border-green-800":"bg-yellow-50 dark:bg-yellow-900/20 border-yellow-200 dark:border-yellow-800":"bg-gray-50 dark:bg-gray-900",y=async()=>{d(!0);try{const j={bookingId:t,totalChannels:c,assignedChannels:i.filter(S=>S.assigned),stageAssignments:s,timestamp:new Date().toISOString(),generatedFromStagePlot:!0};a&&await a(j),r({title:"Mixer Patch List Saved",description:`Successfully saved ${j.assignedChannels.length} channel assignments from stage plot`})}catch{r({title:"Save Failed",description:"Could not save mixer patch list. Please try again."})}finally{d(!1)}},f=()=>{const j=i.filter(C=>C.assigned),S={bookingId:t,generatedAt:new Date().toISOString(),totalChannels:j.length,legend:j.map(C=>({channel:C.channel,instrument:C.instrument,assignedTo:C.assignedTo,stageName:C.stageName,inputType:C.inputType,phantom:C.phantom}))},k=new Blob([JSON.stringify(S,null,2)],{type:"application/json"}),T=URL.createObjectURL(k),A=document.createElement("a");A.href=T,A.download=`mixer-patch-list-booking-${t}.json`,A.click(),URL.revokeObjectURL(T),r({title:"Export Complete",description:"Mixer patch list exported successfully"})},b=i.filter(j=>j.assigned);return o?e.jsx($Q,{size:"lg",text:"Building mixer patch list from stage plot..."}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("h3",{className:"text-xl font-semibold flex items-center gap-2",children:[e.jsx(qa,{className:"h-5 w-5"}),"Mixer Input Patch List"]}),e.jsx(X,{variant:"outline",className:"bg-green-50 text-green-700 border-green-200",children:"Generated from Stage Plot"}),e.jsxs(X,{variant:"secondary",children:[b.length,"/",c," Channels"]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx($a,{onClick:y,icon:e.jsx(js,{className:"h-4 w-4"}),disabled:!n||o,children:"Save Patch List"}),e.jsx($a,{variant:"outline",onClick:f,icon:e.jsx(Cs,{className:"h-4 w-4"}),children:"Export"})]})]}),e.jsxs(R,{children:[e.jsx(Y,{children:e.jsxs(Q,{className:"text-lg flex items-center gap-2",children:[e.jsx(Gt,{className:"h-5 w-5"}),"Legend (",b.length," items)"]})}),e.jsx(L,{children:e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3",children:b.map(j=>e.jsxs("div",{className:`p-3 rounded-lg border ${v(j)}`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[x(j.instrument),e.jsx("span",{className:"font-medium",children:j.instrument})]}),e.jsxs(X,{variant:"outline",className:"text-xs",children:["Ch ",j.channel]})]}),e.jsxs("div",{className:"text-sm text-muted-foreground",children:[e.jsxs("div",{children:["Assigned to: ",e.jsx("span",{className:"font-medium",children:j.assignedTo})]}),e.jsxs("div",{children:["Stage Name: ",e.jsx("span",{className:"font-medium",children:j.stageName})]}),e.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[e.jsx(X,{variant:"outline",children:j.inputType}),j.phantom&&e.jsx(In,{className:"h-3 w-3 text-yellow-500"})]})]})]},j.channel))})})]}),e.jsxs(R,{children:[e.jsx(Y,{children:e.jsx(Q,{className:"text-lg",children:"Channel Assignments (Ordered: Drums  Percussion  Bass  Guitars  Keys  Other  Vocals)"})}),e.jsx(L,{children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b",children:[e.jsx("th",{className:"text-left p-3",children:"Ch"}),e.jsx("th",{className:"text-left p-3",children:"Instrument"}),e.jsx("th",{className:"text-left p-3",children:"Assigned To"}),e.jsx("th",{className:"text-left p-3",children:"Stage Name"}),e.jsx("th",{className:"text-left p-3",children:"Input"}),e.jsx("th",{className:"text-left p-3",children:"48V"}),e.jsx("th",{className:"text-left p-3",children:"Actions"})]})}),e.jsx("tbody",{children:b.map(j=>e.jsxs("tr",{className:`border-b hover:bg-gray-50 dark:hover:bg-gray-800 ${v(j)}`,children:[e.jsx("td",{className:"p-3 font-mono font-bold",children:j.channel}),e.jsx("td",{className:"p-3",children:e.jsxs("div",{className:"flex items-center gap-2",children:[x(j.instrument),e.jsx("span",{className:"font-medium",children:j.instrument})]})}),e.jsx("td",{className:"p-3 font-medium",children:j.assignedTo}),e.jsx("td",{className:"p-3",children:e.jsx(X,{variant:"secondary",children:j.stageName})}),e.jsx("td",{className:"p-3",children:e.jsx(X,{variant:"outline",children:j.inputType})}),e.jsx("td",{className:"p-3 text-center",children:j.phantom?e.jsx(In,{className:"h-4 w-4 text-yellow-500 mx-auto"}):e.jsx("span",{className:"text-muted-foreground",children:"-"})}),e.jsx("td",{className:"p-3",children:e.jsx($a,{variant:"ghost",size:"sm",onClick:()=>{p(j),u(!0)},icon:e.jsx(Gt,{className:"h-4 w-4"}),children:"Details"})})]},j.channel))})]})})})]}),e.jsx(I5,{open:h,onOpenChange:()=>u(!1),title:`Channel ${m==null?void 0:m.channel} - ${m==null?void 0:m.instrument}`,children:m&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium",children:"Assigned To"}),e.jsx($,{value:m.assignedTo,disabled:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium",children:"Stage Name"}),e.jsx($,{value:m.stageName,disabled:!0})]})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium",children:"Input Type"}),e.jsxs(Re,{value:m.inputType,disabled:!0,children:[e.jsx(Me,{children:e.jsx(Oe,{})}),e.jsxs(_e,{children:[e.jsx(U,{value:"XLR",children:"XLR"}),e.jsx(U,{value:"TRS",children:"TRS"}),e.jsx(U,{value:"Instrument",children:"Instrument"}),e.jsx(U,{value:"Line",children:"Line"})]})]})]}),e.jsxs("div",{className:"flex items-center space-x-2 pt-6",children:[e.jsx(hs,{checked:m.phantom,disabled:!0}),e.jsx("label",{className:"text-sm font-medium",children:"Phantom Power"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium",children:"Priority"}),e.jsx($,{value:m.priority.toString(),disabled:!0})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium",children:"Notes"}),e.jsx($,{value:m.notes||"Auto-generated from stage plot assignments",disabled:!0})]})]})})]})}function vX({bookingId:t,onStatusChange:s,userRole:n="admin",canEdit:a=!0}){var Ke,oe,ye,Te,et,cs,ws;const{toast:r}=nt(),i=Tt(),[l,c]=N.useState(1),[o,d]=N.useState(null),[h,u]=N.useState(!0),[m,p]=N.useState(!1),[g,x]=N.useState([]),[v,y]=N.useState(!1),[f,b]=N.useState({});N.useState(!1),N.useState({}),N.useState(!1),N.useState(!1),N.useState(!1),N.useState(!1);const j=[{id:"talent_assignment",title:"Talent Assignment",description:"Assign Artists, Musicians and Professionals to the booking",status:(((Ke=o==null?void 0:o.assignedMusicians)==null?void 0:Ke.length)||0)>0?"completed":l===1?"in_progress":"pending",icon:e.jsx(Ze,{className:"h-5 w-5"}),isActive:l===1,canProgress:v},{id:"contract_generation",title:"Contract Generation",description:"Generate booking agreements and performance contracts",status:(((oe=o==null?void 0:o.contracts)==null?void 0:oe.length)||0)>=2?"completed":l===2?"in_progress":"pending",icon:e.jsx(xt,{className:"h-5 w-5"}),isActive:l===2,canProgress:f[2]||!1},{id:"technical_rider",title:"Technical Rider Creation",description:"Create comprehensive technical requirements, stage plot, and setlist",status:o!=null&&o.technicalRider&&(o!=null&&o.stagePlot)?"completed":l===3?"in_progress":"pending",icon:e.jsx(Gt,{className:"h-5 w-5"}),isActive:l===3,canProgress:(o==null?void 0:o.technicalRider)&&(o==null?void 0:o.stagePlot)},{id:"signature_collection",title:"Signature Collection",description:"Collect signatures from all parties on contracts",status:(((ye=o==null?void 0:o.signatures)==null?void 0:ye.length)||0)>=2?"completed":l===4?"in_progress":"pending",icon:e.jsx(Ub,{className:"h-5 w-5"}),isActive:l===4,canProgress:(((Te=o==null?void 0:o.signatures)==null?void 0:Te.length)||0)>=2},{id:"payment_processing",title:"Payment Processing",description:"Process payments and generate receipts",status:(((et=o==null?void 0:o.payments)==null?void 0:et.length)||0)>0?"completed":l===5?"in_progress":"pending",icon:e.jsx(Il,{className:"h-5 w-5"}),isActive:l===5,canProgress:(((cs=o==null?void 0:o.payments)==null?void 0:cs.length)||0)>0}],{data:S,isLoading:k,refetch:T}=ke({queryKey:["booking-workflow",t],enabled:!!t,staleTime:5*60*1e3,gcTime:10*60*1e3,refetchOnWindowFocus:!1,refetchOnMount:"always",refetchOnReconnect:!1});ke({queryKey:["available-bookings"],queryFn:async()=>await xe("/api/bookings/all")});const{data:A=[]}=ke({queryKey:["available-users"],staleTime:10*60*1e3,gcTime:15*60*1e3,refetchOnWindowFocus:!1,refetchOnMount:!1,refetchOnReconnect:!1}),{data:C,isLoading:w,refetch:P}=ke({queryKey:["booking-assigned-talent",t],queryFn:async()=>{if(!t)return[];console.log(" FRONTEND: Fetching assigned talent for booking ID:",t);const fe=await xe(`/api/bookings/${t}/assigned-talent`);return console.log(" FRONTEND: Received assigned talent data:",fe),fe},enabled:!!t,staleTime:5*60*1e3,gcTime:10*60*1e3,refetchOnWindowFocus:!1,refetchOnMount:"always",refetchOnReconnect:!1}),{data:M=[]}=ke({queryKey:["/api/artists"]}),{data:I=[]}=ke({queryKey:["/api/musicians"]}),{data:W=[]}=ke({queryKey:["/api/professionals"]});N.useEffect(()=>{if(S&&typeof S=="object"){const fe=S;d(fe),u(!1),fe.primaryArtist&&C!==void 0&&Array.isArray(C)&&C.length===0&&(console.log(" AUTO-ASSIGNMENT TRIGGER: Primary artist exists, no assignments found"),_(fe.primaryArtist))}},[S,C]),N.useEffect(()=>{var fe,Ve;C&&(console.log(" UPDATING assigned talent state:",C),console.log(" DETAILED DATA CHECK - First talent object:",C[0]),console.log(" KEYS in first talent:",Object.keys(C[0]||{})),console.log(" PRIMARY TALENT field:",(fe=C[0])==null?void 0:fe.primaryTalent),console.log(" SECONDARY TALENTS field:",(Ve=C[0])==null?void 0:Ve.secondaryTalents),x(C))},[C]);const _=async fe=>{try{if(console.log(" AUTO-ASSIGNING primary artist as main booked talent:",fe),C==null?void 0:C.find(gs=>gs.userId===(fe.userId||fe.id)&&gs.role==="Main Booked Talent")){console.log(" Primary artist already assigned as main booked talent");return}const zt={userId:fe.userId||fe.id,roleId:fe.roleId||3,name:fe.stageName||fe.fullName,type:"Main Booked Talent",role:fe.primaryTalent||"Artist",selectedRoles:[fe.primaryTalent||"Artist"],availableRoles:[fe.primaryTalent,...fe.secondaryTalents||[]].filter(Boolean),isMainBookedTalent:!0,isPrimary:!0,talentType:fe.userType||"managed_artist",assignmentType:"auto"};console.log(" Creating main booked talent assignment:",zt),await O.mutateAsync(zt),console.log(" Primary artist auto-assigned successfully")}catch(Ve){console.error(" Failed to auto-assign primary artist:",Ve)}},B=Xe({mutationFn:async fe=>{const Ve=await xe(`/api/bookings/${t}`,{method:"PATCH",body:fe});if(!Ve.ok)throw new Error("Failed to update booking");return Ve.json()},onSuccess:()=>{i.invalidateQueries({queryKey:["booking-workflow",t]}),i.invalidateQueries({queryKey:["booking-assigned-talent",t]}),r({title:"Success",description:"Booking updated successfully"})},onError:()=>{r({title:"Error",description:"Failed to update booking",variant:"destructive"})}}),O=Xe({mutationFn:async fe=>{const Ve={userId:fe.userId,roleId:fe.roleId||5,selectedTalent:fe.primaryTalentId||fe.selectedTalent||null,isMainBookedTalent:fe.isMainBookedTalent||!1,assignmentType:fe.assignmentType||"workflow"};console.log(" SAVING TO DATABASE - Backend payload:",Ve);const zt=await xe(`/api/bookings/${t}/assign`,{method:"POST",body:JSON.stringify(Ve)});if(!zt.ok){let gs="Failed to create assignment";try{gs=(await zt.json()).message||gs}catch{gs=`${gs}: ${zt.status} ${zt.statusText}`}throw new Error(gs)}return zt.json()},onSuccess:(fe,Ve)=>{i.invalidateQueries({queryKey:["booking-workflow",t]}),i.invalidateQueries({queryKey:["booking-assigned-talent",t]}),r({title:"Assignment Created",description:`${Ve.name} has been assigned to the booking`})},onError:fe=>{console.error("Assignment mutation error:",fe);const Ve=typeof(fe==null?void 0:fe.message)=="string"?fe.message:"Failed to create assignment";r({title:"Assignment Failed",description:Ve,variant:"destructive"})}}),z=async()=>{p(!0);try{const fe={currentStep:l,assignedTalent:g,stagePlot:ee,mixerConfig:Se,setlist:re,technicalStep:Ie,selectedTemplate:ie,stepConfirmations:f,talentReviewConfirmed:v};if(!(await xe(`/api/bookings/${t}/workflow/save`,{method:"POST",body:{workflowData:fe}})).ok)throw new Error("Failed to save workflow");r({title:"Workflow Saved",description:"All workflow data has been saved successfully"})}catch(fe){console.error("Save workflow error:",fe),r({title:"Save Failed",description:"Failed to save workflow data",variant:"destructive"})}finally{p(!1)}},F=()=>{var zt,gs,pt,Js,Ps,ts,ds,Ws,un,mn,Wn;const fe=[...Array.isArray(M)?M:[],...Array.isArray(I)?I:[],...Array.isArray(W)?W:[]],Ve={managedArtists:fe.filter(Ee=>{var es;return Ee.roleId===3||((es=Ee.user)==null?void 0:es.roleId)===3}),artists:fe.filter(Ee=>{var es;return Ee.roleId===4||((es=Ee.user)==null?void 0:es.roleId)===4}),managedMusicians:fe.filter(Ee=>{var es;return Ee.roleId===5||((es=Ee.user)==null?void 0:es.roleId)===5}),musicians:fe.filter(Ee=>{var es;return Ee.roleId===6||((es=Ee.user)==null?void 0:es.roleId)===6}),managedProfessionals:fe.filter(Ee=>{var es;return Ee.roleId===7||((es=Ee.user)==null?void 0:es.roleId)===7}),professionals:fe.filter(Ee=>{var es;return Ee.roleId===8||((es=Ee.user)==null?void 0:es.roleId)===8})};return console.log(" TALENT GROUPED BY PRIMARY_TALENT_ID:",{totalTalent:fe.length,talentTypes:fe.map(Ee=>{var es;return{name:Ee.stageName||Ee.name||Ee.fullName,primaryTalentId:Ee.primaryTalentId,primaryTalent:Ee.primaryTalent,actualRoleId:Ee.roleId,userRoleId:(es=Ee.user)==null?void 0:es.roleId,isManaged:Ee.isManaged}}),categorizedCounts:{managedArtists:Ve.managedArtists.length,artists:Ve.artists.length,managedMusicians:Ve.managedMusicians.length,musicians:Ve.musicians.length,managedProfessionals:Ve.managedProfessionals.length,professionals:Ve.professionals.length}}),e.jsxs("div",{className:"space-y-6",children:[o&&e.jsxs(R,{children:[e.jsx(Y,{children:e.jsxs(Q,{className:"flex items-center gap-2",children:[e.jsx(cn,{className:"h-5 w-5"}),"Main Booked Talent"]})}),e.jsx(L,{children:e.jsxs("div",{className:"flex items-center space-x-4 p-4 border rounded bg-gradient-to-r from-emerald-50 to-cyan-50",children:[e.jsxs(Ln,{className:"w-16 h-16 border-2 border-emerald-500",children:[e.jsx(ga,{src:((gs=(zt=o.primaryArtist)==null?void 0:zt.profile)==null?void 0:gs.avatarUrl)||((pt=o.primaryArtist)==null?void 0:pt.avatarUrl)}),e.jsx(Fn,{className:"bg-emerald-500 text-white text-xl font-bold",children:((Ps=(Js=o.primaryArtist)==null?void 0:Js.stageName)==null?void 0:Ps[0])||((ds=(ts=o.primaryArtist)==null?void 0:ts.fullName)==null?void 0:ds[0])||"P"})]}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-xl font-bold text-emerald-800",children:((Ws=o.primaryArtist)==null?void 0:Ws.stageName)||((un=o.primaryArtist)==null?void 0:un.fullName)||"Primary Talent"}),e.jsxs("p",{className:"text-emerald-600 font-medium",children:[(mn=o.primaryArtist)!=null&&mn.isManaged?"Managed ":"",((Wn=o.primaryArtist)==null?void 0:Wn.userType)||"Artist"]}),e.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:["Event: ",o.eventName,"  ",o.eventDate?new Date(o.eventDate).toLocaleDateString():"Date TBD"]}),e.jsx(X,{variant:"default",className:"mt-2 bg-emerald-600",children:"Main Booked Talent"})]}),e.jsx("div",{className:"text-right",children:e.jsxs("div",{className:"flex flex-col items-end gap-2",children:[e.jsx(X,{variant:o.status==="approved"?"default":"secondary",children:o.status||"pending"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(E,{variant:"outline",size:"sm",className:"border-green-500 text-green-700 hover:bg-green-50",onClick:async()=>{try{await B.mutateAsync({status:"accepted",primaryArtistAccepted:!0}),r({title:"Booking Accepted",description:"The booking has been accepted by the primary artist"})}catch{r({title:"Error",description:"Failed to accept booking",variant:"destructive"})}},children:"Accept Booking"}),e.jsx(E,{variant:"outline",size:"sm",className:"border-red-500 text-red-700 hover:bg-red-50",onClick:async()=>{try{await B.mutateAsync({status:"declined",primaryArtistAccepted:!1}),r({title:"Booking Declined",description:"The booking has been declined by the primary artist"})}catch{r({title:"Error",description:"Failed to decline booking",variant:"destructive"})}},children:"Decline Booking"})]})]})})]})})]}),e.jsxs(R,{children:[e.jsx(Y,{children:e.jsxs(Q,{className:"flex items-center gap-2",children:[e.jsx(Ze,{className:"h-5 w-5"}),"Assigned Talent"]})}),e.jsx(L,{children:e.jsx("div",{className:"space-y-3",children:g.length>0?g.map(Ee=>{var es;return e.jsxs("div",{className:"flex items-center justify-between p-3 border rounded bg-blue-50",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsxs(Ln,{children:[e.jsx(ga,{src:Ee.avatarUrl}),e.jsx(Fn,{className:"bg-blue-500 text-white",children:((es=Ee.name)==null?void 0:es[0])||"T"})]}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-medium",children:Ee.assignmentName||Ee.name||"No name"}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:[Ee.type||"No type","  ",Ee.genre||Ee.role||"No role"]}),Ee.type==="Performance Professional"&&e.jsxs("div",{className:"mt-2 flex items-center gap-2",children:[e.jsx(q,{htmlFor:`rate-${Ee.id}`,className:"text-xs",children:"Rate:"}),e.jsx($,{id:`rate-${Ee.id}`,type:"number",placeholder:"$0.00",className:"w-24 h-6 text-xs",defaultValue:Ee.rate||"",onChange:Ls=>{const vt=g.map(ms=>ms.id===Ee.id?{...ms,rate:Ls.target.value}:ms);x(vt)}}),e.jsx("span",{className:"text-xs text-muted-foreground",children:"per hour"})]})]})]}),Ee.type==="Main Booked Talent"?e.jsxs("div",{className:"flex flex-col items-end gap-1",children:[e.jsx(X,{variant:"outline",className:"border-emerald-500 text-emerald-700 bg-emerald-50",children:"Main Booked Talent"}),e.jsxs("div",{className:"flex gap-1",children:[e.jsx(E,{variant:"outline",size:"sm",className:"border-green-500 text-green-700 hover:bg-green-50 text-xs px-2 py-1",children:"Accept"}),e.jsx(E,{variant:"outline",size:"sm",className:"border-red-500 text-red-700 hover:bg-red-50 text-xs px-2 py-1",children:"Decline"})]})]}):e.jsx(E,{variant:"outline",size:"sm",className:"border-red-300 text-red-600 hover:bg-red-50",onClick:()=>{x(g.filter(Ls=>Ls.id!==Ee.id)),r({title:"Unassigned",description:`${Ee.name} removed from booking`})},children:"Remove"})]},Ee.id)}):e.jsx("p",{className:"text-muted-foreground text-center py-8",children:"No talent assigned yet"})})})]}),e.jsxs(R,{children:[e.jsx(Y,{children:e.jsxs(Q,{className:"flex items-center gap-2",children:[e.jsx(hr,{className:"h-5 w-5"}),"Available Talent",e.jsx(X,{variant:"outline",className:"ml-auto",children:"Admin Access Only"})]})}),e.jsx(L,{children:e.jsxs("div",{className:"space-y-6",children:[Ve.managedArtists.length>0&&e.jsxs("div",{children:[e.jsxs("h4",{className:"font-semibold text-sm text-emerald-700 uppercase tracking-wide mb-3 flex items-center gap-2",children:[e.jsx(ns,{className:"w-4 h-4 text-emerald-600"}),"Managed Artists"]}),e.jsx("div",{className:"space-y-2",children:Ve.managedArtists.map(Ee=>{var es,Ls,vt,ms,Ts;return e.jsxs("div",{className:"flex items-center justify-between p-3 border rounded bg-emerald-50",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsxs(Ln,{children:[e.jsx(ga,{src:(es=Ee.profile)==null?void 0:es.avatarUrl}),e.jsx(Fn,{className:"bg-emerald-500 text-white",children:((Ls=Ee.stageName)==null?void 0:Ls[0])||((ms=(vt=Ee.user)==null?void 0:vt.fullName)==null?void 0:ms[0])||"A"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:Ee.stageName||((Ts=Ee.user)==null?void 0:Ts.fullName)}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Managed Artist  ",Ee.primaryTalent]})]})]}),g.some(Mt=>Mt.userId===Ee.userId)?e.jsx(X,{variant:"secondary",children:"Already Assigned"}):e.jsx(E,{variant:"outline",size:"sm",className:"border-emerald-300 hover:bg-emerald-100",onClick:async()=>{var ha,Ga;const Mt=g.length===0,Us=Ee.primaryRole||"Lead Vocalist",en=[Us,...Ee.skillsAndInstruments||[]].filter(Boolean),An={userId:Ee.userId,roleId:Ee.roleId||3,name:Ee.stageName||((ha=Ee.user)==null?void 0:ha.fullName),type:Mt?"Main Booked Talent":"Artist",role:Mt?"Main Booked Talent":Us,selectedRoles:Mt?["Main Booked Talent",...en]:en,availableRoles:en,avatarUrl:(Ga=Ee.profile)==null?void 0:Ga.avatarUrl,genre:Ee.genre,isPrimary:Mt,isMainBookedTalent:Mt,assignmentType:"manual"};console.log(" MANUAL ASSIGNMENT - Calling database mutation:",An),await O.mutateAsync(An)},children:"Assign"})]},Ee.userId)})})]}),Ve.artists.length>0&&e.jsxs("div",{children:[e.jsxs("h4",{className:"font-semibold text-sm text-blue-700 uppercase tracking-wide mb-3 flex items-center gap-2",children:[e.jsx(Ue,{className:"w-4 h-4 text-blue-600"}),"Artists"]}),e.jsx("div",{className:"space-y-2",children:Ve.artists.map(Ee=>{var es,Ls,vt,ms,Ts;return e.jsxs("div",{className:"flex items-center justify-between p-3 border rounded",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsxs(Ln,{children:[e.jsx(ga,{src:(es=Ee.profile)==null?void 0:es.avatarUrl}),e.jsx(Fn,{className:"bg-blue-500 text-white",children:((Ls=Ee.stageName)==null?void 0:Ls[0])||((ms=(vt=Ee.user)==null?void 0:vt.fullName)==null?void 0:ms[0])||"A"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:Ee.stageName||((Ts=Ee.user)==null?void 0:Ts.fullName)}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Artist  ",Ee.primaryTalent]})]})]}),g.some(Mt=>Mt.userId===Ee.userId)?e.jsx(X,{variant:"secondary",children:"Already Assigned"}):e.jsx(E,{variant:"outline",size:"sm",onClick:async()=>{var ha,Ga,Sr,vi;const Mt=g.length===0,Us=Ee.primaryRole||"Lead Vocalist",en=[Us,...Ee.skillsAndInstruments||[]].filter(Boolean),An={id:Date.now(),userId:Ee.userId,name:Ee.stageName||((ha=Ee.user)==null?void 0:ha.fullName),type:Mt?"Main Booked Talent":"Artist",role:Mt?"Main Booked Talent":Us,selectedRoles:Mt?["Main Booked Talent",...en]:en,availableRoles:en,avatarUrl:(Ga=Ee.profile)==null?void 0:Ga.avatarUrl,genre:Ee.genre,isPrimary:Mt,isMainBookedTalent:Mt};x([...g,An]),r({title:"Assignment",description:`${Ee.stageName||((Sr=Ee.user)==null?void 0:Sr.fullName)} assigned as ${Mt?"Main Booked Talent":"Supporting Talent"}`});try{await O.mutateAsync({...An,roleId:Ee.userId===((vi=o==null?void 0:o.primaryArtist)==null?void 0:vi.userId)?3:4}),console.log(" Assignment saved to database immediately")}catch(Lm){console.error(" Failed to save assignment:",Lm)}},children:"Assign"})]},Ee.userId)})})]}),Ve.managedMusicians.length>0&&e.jsxs("div",{children:[e.jsxs("h4",{className:"font-semibold text-sm text-purple-700 uppercase tracking-wide mb-3 flex items-center gap-2",children:[e.jsx(ns,{className:"w-4 h-4 text-purple-600"}),"Managed Musicians"]}),e.jsx("div",{className:"space-y-2",children:Ve.managedMusicians.map(Ee=>{var es,Ls,vt,ms,Ts;return e.jsxs("div",{className:"flex items-center justify-between p-3 border rounded bg-purple-50",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsxs(Ln,{children:[e.jsx(ga,{src:(es=Ee.profile)==null?void 0:es.avatarUrl}),e.jsx(Fn,{className:"bg-purple-500 text-white",children:((Ls=Ee.stageName)==null?void 0:Ls[0])||((ms=(vt=Ee.user)==null?void 0:vt.fullName)==null?void 0:ms[0])||"M"})]}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-medium",children:Ee.stageName||((Ts=Ee.user)==null?void 0:Ts.fullName)}),e.jsx("div",{className:"mt-1",children:e.jsxs("div",{className:"flex flex-wrap gap-1 items-center",children:[e.jsx("span",{className:"text-xs text-muted-foreground",children:"Talents/Skills:"}),Ee.primaryTalent&&e.jsx(X,{variant:"default",className:"text-xs bg-purple-600 text-white",children:Ee.primaryTalent}),Ee.secondaryTalents&&Ee.secondaryTalents.length>0?Ee.secondaryTalents.slice(0,3).map((Mt,Us)=>e.jsx(X,{variant:"outline",className:"text-xs border-purple-300 text-purple-700",children:Mt},Us)):e.jsx("span",{className:"text-xs text-muted-foreground italic",children:"No secondary talents listed"}),Ee.secondaryTalents&&Ee.secondaryTalents.length>3&&e.jsxs("span",{className:"text-xs text-muted-foreground",children:["+",Ee.secondaryTalents.length-3," more"]})]})})]})]}),e.jsx("div",{className:"flex flex-col gap-2 min-w-32",children:g.some(Mt=>Mt.userId===Ee.userId)?e.jsx(X,{variant:"secondary",children:"Already Assigned"}):e.jsx(E,{variant:"outline",size:"sm",className:"border-purple-300 hover:bg-purple-100",onClick:async()=>{var ha,Ga,Sr;const Mt=g.length===0,Us=Ee.primaryTalent||"Musician",en=[Us,...Ee.secondaryTalents||[]].filter(Boolean),An={id:Date.now(),userId:Ee.userId,name:Ee.stageName||((ha=Ee.user)==null?void 0:ha.fullName),type:Mt?"Main Booked Talent":"Musician",role:Mt?"Main Booked Talent":Us,selectedRoles:Mt?["Main Booked Talent",...en]:en,availableRoles:en,avatarUrl:(Ga=Ee.profile)==null?void 0:Ga.avatarUrl,isPrimary:Mt,isMainBookedTalent:Mt};x([...g,An]),r({title:"Assignment",description:`${Ee.stageName||((Sr=Ee.user)==null?void 0:Sr.fullName)} assigned as ${Mt?"Main Booked Talent":Us}`});try{await O.mutateAsync({...An,roleId:5}),console.log(" Managed musician assignment saved to database immediately")}catch(vi){console.error(" Failed to save managed musician assignment:",vi)}},children:"Assign"})})]},Ee.userId)})})]}),Ve.musicians.length>0&&e.jsxs("div",{children:[e.jsxs("h4",{className:"font-semibold text-sm text-indigo-700 uppercase tracking-wide mb-3 flex items-center gap-2",children:[e.jsx(Po,{className:"w-4 h-4 text-indigo-600"}),"Musicians"]}),e.jsx("div",{className:"space-y-2",children:Ve.musicians.map(Ee=>{var es,Ls,vt,ms,Ts;return e.jsxs("div",{className:"flex items-center justify-between p-3 border rounded",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsxs(Ln,{children:[e.jsx(ga,{src:(es=Ee.profile)==null?void 0:es.avatarUrl}),e.jsx(Fn,{className:"bg-indigo-500 text-white",children:((Ls=Ee.stageName)==null?void 0:Ls[0])||((ms=(vt=Ee.user)==null?void 0:vt.fullName)==null?void 0:ms[0])||"M"})]}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-medium",children:Ee.stageName||((Ts=Ee.user)==null?void 0:Ts.fullName)}),e.jsx("div",{className:"mt-1",children:e.jsxs("div",{className:"flex flex-wrap gap-1 items-center",children:[e.jsx("span",{className:"text-xs text-muted-foreground",children:"Talents/Skills:"}),Ee.primaryTalent&&e.jsx(X,{variant:"default",className:"text-xs bg-purple-600 text-white",children:Ee.primaryTalent}),Ee.secondaryTalents&&Ee.secondaryTalents.length>0?Ee.secondaryTalents.slice(0,3).map((Mt,Us)=>e.jsx(X,{variant:"outline",className:"text-xs border-indigo-300 text-indigo-700",children:Mt},Us)):e.jsx("span",{className:"text-xs text-muted-foreground italic",children:"No secondary talents listed"}),Ee.secondaryTalents&&Ee.secondaryTalents.length>3&&e.jsxs("span",{className:"text-xs text-muted-foreground",children:["+",Ee.secondaryTalents.length-3," more"]})]})})]})]}),e.jsx("div",{className:"flex flex-col gap-2 min-w-32",children:g.some(Mt=>Mt.userId===Ee.userId)?e.jsx(X,{variant:"secondary",children:"Already Assigned"}):e.jsx(E,{variant:"outline",size:"sm",onClick:async()=>{var ha,Ga,Sr;const Mt=g.length===0,Us=Ee.primaryTalent||"Musician",en=[Us,...Ee.secondaryTalents||[]].filter(Boolean),An={id:Date.now(),userId:Ee.userId,name:Ee.stageName||((ha=Ee.user)==null?void 0:ha.fullName),type:Mt?"Main Booked Talent":"Musician",role:Mt?"Main Booked Talent":Us,selectedRoles:Mt?["Main Booked Talent",...en]:en,availableRoles:en,avatarUrl:(Ga=Ee.profile)==null?void 0:Ga.avatarUrl,isPrimary:Mt,isMainBookedTalent:Mt};x([...g,An]),r({title:"Assignment",description:`${Ee.stageName||((Sr=Ee.user)==null?void 0:Sr.fullName)} assigned as ${Mt?"Main Booked Talent":Us}`});try{await O.mutateAsync({...An,roleId:6}),console.log(" Musician assignment saved to database immediately")}catch(vi){console.error(" Failed to save musician assignment:",vi)}},children:"Assign"})})]},Ee.userId)})})]}),Ve.managedProfessionals&&Ve.managedProfessionals.length>0&&e.jsxs("div",{children:[e.jsxs("h4",{className:"font-semibold text-sm text-purple-700 uppercase tracking-wide mb-3 flex items-center gap-2",children:[e.jsx(Os,{className:"w-4 h-4 text-purple-600"}),"Managed Professionals"]}),e.jsx("div",{className:"space-y-2",children:Ve.managedProfessionals.map(Ee=>{var es,Ls,vt,ms,Ts;return e.jsxs("div",{className:"flex items-center justify-between p-3 border rounded bg-purple-50",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsxs(Ln,{children:[e.jsx(ga,{src:(es=Ee.profile)==null?void 0:es.avatarUrl}),e.jsx(Fn,{className:"bg-purple-500 text-white",children:((Ls=Ee.stageName)==null?void 0:Ls[0])||((ms=(vt=Ee.user)==null?void 0:vt.fullName)==null?void 0:ms[0])||"P"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:Ee.stageName||((Ts=Ee.user)==null?void 0:Ts.fullName)}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Managed Professional  ",Ee.primaryTalent]})]})]}),g.some(Mt=>Mt.userId===Ee.userId)?e.jsx(X,{variant:"secondary",children:"Already Assigned"}):e.jsx(E,{variant:"outline",size:"sm",className:"border-purple-300 hover:bg-purple-100",onClick:async()=>{var Us,en,An;const Mt={id:Date.now(),userId:Ee.userId,name:Ee.stageName||((Us=Ee.user)==null?void 0:Us.fullName),type:"Professional",role:Ee.serviceType||"Professional",avatarUrl:(en=Ee.profile)==null?void 0:en.avatarUrl};x([...g,Mt]),r({title:"Assignment",description:`${Ee.stageName||((An=Ee.user)==null?void 0:An.fullName)} assigned as ${Ee.serviceType||"Professional"}`});try{await O.mutateAsync({...Mt,roleId:8}),console.log(" Professional assignment saved to database immediately")}catch(ha){console.error(" Failed to save professional assignment:",ha)}},children:"Assign"})]},Ee.userId)})})]}),Ve.professionals&&Ve.professionals.length>0&&e.jsxs("div",{children:[e.jsxs("h4",{className:"font-semibold text-sm text-slate-700 uppercase tracking-wide mb-3 flex items-center gap-2",children:[e.jsx(Os,{className:"w-4 h-4 text-slate-600"}),"Professionals"]}),e.jsx("div",{className:"space-y-2",children:Ve.professionals.map(Ee=>{var es,Ls,vt,ms,Ts;return e.jsxs("div",{className:"flex items-center justify-between p-3 border rounded",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsxs(Ln,{children:[e.jsx(ga,{src:(es=Ee.profile)==null?void 0:es.avatarUrl}),e.jsx(Fn,{className:"bg-slate-500 text-white",children:((Ls=Ee.stageName)==null?void 0:Ls[0])||((ms=(vt=Ee.user)==null?void 0:vt.fullName)==null?void 0:ms[0])||"P"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:Ee.stageName||((Ts=Ee.user)==null?void 0:Ts.fullName)}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Professional  ",Ee.primaryTalent]})]})]}),g.some(Mt=>Mt.userId===Ee.userId)?e.jsx(X,{variant:"secondary",children:"Already Assigned"}):e.jsx(E,{variant:"outline",size:"sm",onClick:()=>{var Us,en,An;const Mt={id:Date.now(),userId:Ee.userId,name:Ee.stageName||((Us=Ee.user)==null?void 0:Us.fullName),type:"Professional",role:Ee.serviceType||"Professional",avatarUrl:(en=Ee.profile)==null?void 0:en.avatarUrl};x([...g,Mt]),r({title:"Assignment",description:`${Ee.stageName||((An=Ee.user)==null?void 0:An.fullName)} assigned as ${Ee.serviceType||"Professional"}`})},children:"Assign"})]},Ee.userId)})})]}),(!M||!I||!W)&&e.jsxs("div",{className:"text-center py-4",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-gray-900 mx-auto mb-2"}),e.jsx("p",{className:"text-muted-foreground",children:"Loading available talent..."})]}),(Array.isArray(M)?M.length:0)===0&&(Array.isArray(I)?I.length:0)===0&&(Array.isArray(W)?W.length:0)===0&&e.jsx("p",{className:"text-muted-foreground text-center py-4",children:"No talent available for assignment"})]})})]}),e.jsx(R,{children:e.jsxs(L,{className:"pt-6",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(hs,{id:"talent-review-confirm",checked:v,onCheckedChange:Ee=>y(Ee===!0)}),e.jsx("label",{htmlFor:"talent-review-confirm",className:"text-sm font-medium text-gray-700",children:"I have reviewed the talent assignments and confirm they are ready for the next step"})]}),e.jsx("p",{className:"text-xs text-muted-foreground mt-2",children:"Check this box to enable the Next button and proceed to technical setup."})]})})]})},[K,D]=N.useState({bookingAgreement:null,performanceContract:null}),[G,H]=N.useState({counterOfferDeadline:"",paymentTerms:"50% deposit, 50% on completion",cancellationPolicy:"72 hours notice required",additionalTerms:"",waituMusicPlatformName:"Wai'tuMusic",labelAddress:`123 Music Lane
Nashville, TN 37203
United States`,totalBookingPrice:0}),V=()=>g.reduce((fe,Ve)=>{var zt,gs;return Ve.isMainBookedTalent?fe+(((zt=ne[Ve.id])==null?void 0:zt.price)||parseFloat(Z["Main Booked Talent"])||0):fe+(((gs=ne[Ve.id])==null?void 0:gs.price)||parseFloat(Z[Ve.type])||0)},0),se=()=>{const fe=new Set;return g.forEach(Ve=>{Ve.isMainBookedTalent?fe.add("Main Booked Talent"):fe.add(Ve.type)}),fe},[Z,le]=N.useState({"Main Booked Talent":"",Artist:"","Managed Musician":"","Managed Professional":"",Musician:"","Performance Professional":"",Professional:""}),[ne,ue]=N.useState({}),[te,Ae]=N.useState({received:!1,amount:0,deadline:"",notes:""}),Ge=async fe=>{try{const Ve={assignedTalent:g.map(pt=>{var Js,Ps,ts,ds,Ws;return{...pt,individualPrice:((Js=ne[pt.id])==null?void 0:Js.price)||parseFloat(Z[pt.type])||0,paymentTerms:((Ps=ne[pt.id])==null?void 0:Ps.paymentTerms)||G.paymentTerms,cancellationPolicy:((ts=ne[pt.id])==null?void 0:ts.cancellationPolicy)||G.cancellationPolicy,additionalTerms:((ds=ne[pt.id])==null?void 0:ds.additionalTerms)||"",counterOfferDeadline:((Ws=ne[pt.id])==null?void 0:Ws.counterOfferDeadline)||G.counterOfferDeadline}}),contractConfig:{...G,categoryPricing:Z,totalTalentCost:g.reduce((pt,Js)=>{var ts;const Ps=((ts=ne[Js.id])==null?void 0:ts.price)||Z[Js.type]||0;return pt+Ps},0),platformName:G.waituMusicPlatformName,labelAddress:G.labelAddress},counterOffer:te,booking:{...o,clientName:(o==null?void 0:o.bookerName)||(o==null?void 0:o.clientName)||"",eventName:(o==null?void 0:o.eventName)||"",eventDate:(o==null?void 0:o.eventDate)||"",venueName:(o==null?void 0:o.venueName)||(o==null?void 0:o.venueDetails)||"TBD"},totalBookingPrice:G.totalBookingPrice||V(),finalOfferPrice:G.totalBookingPrice||V(),talentAskingPrice:V()},zt=localStorage.getItem("token"),gs=await fetch(`/api/bookings/${t}/${fe}-agreement-preview`,{method:"POST",headers:{"Content-Type":"application/json",...zt&&{Authorization:`Bearer ${zt}`}},body:JSON.stringify(Ve),credentials:"include"});if(gs.ok){const pt=await gs.text();D(Js=>({...Js,[fe==="booking"?"bookingAgreement":"performanceContract"]:pt})),r({title:"Contract Preview Generated",description:`${fe==="booking"?"Booking Agreement":"Performance Contract"} preview with enhanced pricing`})}else{const pt=await gs.text();throw new Error(`${gs.status}: ${pt}`)}}catch(Ve){console.error("Contract preview error:",Ve),r({title:"Preview Error",description:"Unable to generate contract preview",variant:"destructive"})}},be=()=>e.jsxs("div",{className:"space-y-6",children:[e.jsxs(R,{children:[e.jsxs(Y,{children:[e.jsxs(Q,{className:"flex items-center gap-2",children:[e.jsx(Gt,{className:"h-5 w-5"}),"Contract Configuration"]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Configure contract terms, set category-based pricing, and customize individual talent terms"})]}),e.jsxs(L,{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium",children:"Counter-Offer Deadline"}),e.jsx("input",{type:"datetime-local",value:G.counterOfferDeadline,onChange:fe=>H(Ve=>({...Ve,counterOfferDeadline:fe.target.value})),className:"w-full mt-1 p-2 border rounded"})]}),e.jsxs("div",{children:[e.jsxs("h4",{className:"text-lg font-medium mb-3 flex items-center gap-2",children:[e.jsx("div",{className:"w-1 h-6 bg-gradient-to-b from-blue-500 to-indigo-600 rounded"}),"Category-Based Pricing"]}),e.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Set default asking prices for each talent category. Unassigned categories are readonly and set to zero."}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:Object.entries(Z).map(([fe,Ve])=>e.jsxs("div",{className:`p-3 rounded-lg border ${se().has(fe)?"bg-gradient-to-br from-green-50 to-emerald-50 border-green-200":"bg-gradient-to-br from-gray-50 to-slate-50 border-gray-200"}`,children:[e.jsxs("label",{className:`text-sm font-medium flex items-center gap-2 ${se().has(fe)?"text-green-800":"text-gray-600"}`,children:[e.jsx("div",{className:`w-2 h-2 rounded-full ${se().has(fe)?"bg-green-500":"bg-gray-400"}`}),fe]}),e.jsx("input",{type:"number",min:"0",value:Ve,onChange:zt=>{le(gs=>({...gs,[fe]:zt.target.value}))},className:`w-full mt-2 p-2 border rounded ${se().has(fe)?"bg-white focus:ring-2 focus:ring-green-500 focus:border-transparent":"bg-gray-100 text-gray-500"}`,placeholder:se().has(fe)?`Enter ${fe.toLowerCase()} rate`:"No talent assigned",readOnly:!se().has(fe)}),se().has(fe)?e.jsx("p",{className:"text-xs text-green-600 mt-1",children:"Active category"}):e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"No talent assigned"})]},fe))})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-lg font-medium mb-3",children:"Individual Talent Pricing"}),e.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Override category pricing and set individual terms for specific talent"}),e.jsx("div",{className:"space-y-4",children:g.map(fe=>{var Ve,zt,gs,pt,Js;return e.jsxs(R,{className:"p-4",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsxs(Ln,{className:"w-10 h-10",children:[e.jsx(ga,{src:fe.avatarUrl}),e.jsx(Fn,{children:fe.name.split(" ").map(Ps=>Ps[0]).join("")})]}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:fe.assignmentName||fe.name}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:[fe.isMainBookedTalent?"Main Booked Talent":fe.type," - ",fe.role]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium",children:"Individual Price ($)"}),e.jsx("input",{type:"number",min:"0",value:((Ve=ne[fe.id])==null?void 0:Ve.price)||parseFloat(Z[fe.type])||"",onChange:Ps=>{const ts=Math.max(0,parseFloat(Ps.target.value)||0);ue(ds=>{var Ws,un,mn,Wn;return{...ds,[fe.id]:{...ds[fe.id],price:ts,counterOfferDeadline:((Ws=ds[fe.id])==null?void 0:Ws.counterOfferDeadline)||"",paymentTerms:((un=ds[fe.id])==null?void 0:un.paymentTerms)||"50% deposit, 50% on completion",cancellationPolicy:((mn=ds[fe.id])==null?void 0:mn.cancellationPolicy)||"72 hours notice required",additionalTerms:((Wn=ds[fe.id])==null?void 0:Wn.additionalTerms)||""}}})},className:"w-full mt-1 p-2 border rounded",placeholder:"Individual rate"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium",children:"Counter-Offer Deadline"}),e.jsx("input",{type:"datetime-local",value:((zt=ne[fe.id])==null?void 0:zt.counterOfferDeadline)||"",onChange:Ps=>ue(ts=>{var ds,Ws,un,mn;return{...ts,[fe.id]:{...ts[fe.id],price:((ds=ts[fe.id])==null?void 0:ds.price)||parseFloat(Z[fe.type])||0,counterOfferDeadline:Ps.target.value,paymentTerms:((Ws=ts[fe.id])==null?void 0:Ws.paymentTerms)||"50% deposit, 50% on completion",cancellationPolicy:((un=ts[fe.id])==null?void 0:un.cancellationPolicy)||"72 hours notice required",additionalTerms:((mn=ts[fe.id])==null?void 0:mn.additionalTerms)||""}}}),className:"w-full mt-1 p-2 border rounded"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium",children:"Payment Terms"}),e.jsxs("select",{value:((gs=ne[fe.id])==null?void 0:gs.paymentTerms)||"50% deposit, 50% on completion",onChange:Ps=>ue(ts=>{var ds,Ws,un,mn;return{...ts,[fe.id]:{...ts[fe.id],price:((ds=ts[fe.id])==null?void 0:ds.price)||parseFloat(Z[fe.type])||0,counterOfferDeadline:((Ws=ts[fe.id])==null?void 0:Ws.counterOfferDeadline)||"",paymentTerms:Ps.target.value,cancellationPolicy:((un=ts[fe.id])==null?void 0:un.cancellationPolicy)||"72 hours notice required",additionalTerms:((mn=ts[fe.id])==null?void 0:mn.additionalTerms)||""}}}),className:"w-full mt-1 p-2 border rounded",children:[e.jsx("option",{value:"50% deposit, 50% on completion",children:"50% deposit, 50% on completion"}),e.jsx("option",{value:"100% upfront",children:"100% upfront"}),e.jsx("option",{value:"Payment on completion",children:"Payment on completion"}),e.jsx("option",{value:"Net 30 terms",children:"Net 30 terms"}),e.jsx("option",{value:"Payment within 7 days",children:"Payment within 7 days"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium",children:"Cancellation Policy"}),e.jsxs("select",{value:((pt=ne[fe.id])==null?void 0:pt.cancellationPolicy)||"72 hours notice required",onChange:Ps=>ue(ts=>{var ds,Ws,un,mn;return{...ts,[fe.id]:{...ts[fe.id],price:((ds=ts[fe.id])==null?void 0:ds.price)||parseFloat(Z[fe.type])||0,counterOfferDeadline:((Ws=ts[fe.id])==null?void 0:Ws.counterOfferDeadline)||"",paymentTerms:((un=ts[fe.id])==null?void 0:un.paymentTerms)||"50% deposit, 50% on completion",cancellationPolicy:Ps.target.value,additionalTerms:((mn=ts[fe.id])==null?void 0:mn.additionalTerms)||""}}}),className:"w-full mt-1 p-2 border rounded",children:[e.jsx("option",{value:"72 hours notice required",children:"72 hours notice required"}),e.jsx("option",{value:"7 days notice required",children:"7 days notice required"}),e.jsx("option",{value:"14 days notice required",children:"14 days notice required"}),e.jsx("option",{value:"30 days notice required",children:"30 days notice required"}),e.jsx("option",{value:"No cancellation allowed",children:"No cancellation allowed"})]})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsxs("label",{className:"text-sm font-medium",children:["Additional Terms for ",fe.name]}),e.jsx("textarea",{value:((Js=ne[fe.id])==null?void 0:Js.additionalTerms)||"",onChange:Ps=>ue(ts=>{var ds,Ws,un,mn;return{...ts,[fe.id]:{...ts[fe.id],price:((ds=ts[fe.id])==null?void 0:ds.price)||parseFloat(Z[fe.type])||0,counterOfferDeadline:((Ws=ts[fe.id])==null?void 0:Ws.counterOfferDeadline)||"",paymentTerms:((un=ts[fe.id])==null?void 0:un.paymentTerms)||"50% deposit, 50% on completion",cancellationPolicy:((mn=ts[fe.id])==null?void 0:mn.cancellationPolicy)||"72 hours notice required",additionalTerms:Ps.target.value}}}),rows:2,className:"w-full mt-1 p-2 border rounded",placeholder:"Special terms or requirements for this talent"})]})]})]},fe.id)})})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-lg font-medium mb-3",children:"Global Contract Terms"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium",children:"Total Booking Price ($)"}),e.jsx("input",{type:"number",min:"0",value:G.totalBookingPrice||V(),onChange:fe=>{const Ve=Math.max(0,parseFloat(fe.target.value)||0);H(zt=>({...zt,totalBookingPrice:Ve}))},className:"w-full mt-1 p-2 border rounded font-semibold text-green-700 bg-green-50",placeholder:"Set final booking price"}),e.jsxs("div",{className:"mt-2 p-3 bg-gradient-to-r from-blue-50 to-indigo-50 border border-blue-200 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full"}),e.jsx("p",{className:"text-sm font-medium text-blue-800",children:"Pricing Breakdown"})]}),e.jsxs("div",{className:"space-y-1 text-xs",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-blue-700",children:"Talent asking total:"}),e.jsxs("span",{className:"font-semibold text-blue-900",children:["$",V()]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-blue-700",children:"Your offer/counter:"}),e.jsxs("span",{className:"font-semibold text-green-700",children:["$",G.totalBookingPrice||V()]})]}),te.received&&e.jsxs("div",{className:"flex justify-between border-t pt-1",children:[e.jsx("span",{className:"text-orange-700",children:"Counter-offer received:"}),e.jsxs("span",{className:"font-semibold text-orange-900",children:["$",te.amount]})]}),e.jsxs("div",{className:"flex justify-between text-gray-600 pt-1 border-t",children:[e.jsx("span",{children:"Talent assigned:"}),e.jsx("span",{className:"font-semibold",children:g.length})]})]})]})]}),e.jsxs("div",{className:"bg-gradient-to-br from-emerald-50 to-cyan-50 p-4 rounded-lg border border-emerald-200",children:[e.jsxs("label",{className:"text-sm font-medium text-emerald-800 flex items-center gap-2",children:[e.jsx("div",{className:"w-2 h-2 bg-emerald-500 rounded-full"}),"Wai'tuMusic Platform Name"]}),e.jsx("input",{type:"text",value:G.waituMusicPlatformName,onChange:fe=>H(Ve=>({...Ve,waituMusicPlatformName:fe.target.value})),className:"w-full mt-2 p-3 border border-emerald-300 rounded-lg bg-white focus:ring-2 focus:ring-emerald-500 focus:border-transparent",placeholder:"Platform name for contracts"}),e.jsx("p",{className:"text-xs text-emerald-600 mt-1",children:"Used in all generated contracts"})]}),e.jsxs("div",{className:"bg-gradient-to-br from-purple-50 to-pink-50 p-4 rounded-lg border border-purple-200",children:[e.jsxs("label",{className:"text-sm font-medium text-purple-800 flex items-center gap-2",children:[e.jsx("div",{className:"w-2 h-2 bg-purple-500 rounded-full"}),"Label Address"]}),e.jsx("textarea",{value:G.labelAddress,onChange:fe=>H(Ve=>({...Ve,labelAddress:fe.target.value})),className:"w-full mt-2 p-3 border border-purple-300 rounded-lg bg-white focus:ring-2 focus:ring-purple-500 focus:border-transparent",rows:3,placeholder:"Complete address for inclusion in agreements"}),e.jsx("p",{className:"text-xs text-purple-600 mt-1",children:"Complete business address"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mt-6",children:[e.jsxs("div",{className:"bg-gradient-to-br from-amber-50 to-orange-50 p-4 rounded-lg border border-amber-200",children:[e.jsxs("label",{className:"text-sm font-medium text-amber-800 flex items-center gap-2",children:[e.jsx("div",{className:"w-2 h-2 bg-amber-500 rounded-full"}),"Payment Terms"]}),e.jsxs("select",{value:G.paymentTerms,onChange:fe=>H(Ve=>({...Ve,paymentTerms:fe.target.value})),className:"w-full mt-2 p-3 border border-amber-300 rounded-lg bg-white focus:ring-2 focus:ring-amber-500 focus:border-transparent",children:[e.jsx("option",{value:"50% deposit, 50% on completion",children:"50% deposit, 50% on completion"}),e.jsx("option",{value:"100% upfront",children:"100% upfront"}),e.jsx("option",{value:"Payment on completion",children:"Payment on completion"}),e.jsx("option",{value:"Net 30 terms",children:"Net 30 terms"})]})]}),e.jsxs("div",{className:"bg-gradient-to-br from-red-50 to-pink-50 p-4 rounded-lg border border-red-200",children:[e.jsxs("label",{className:"text-sm font-medium text-red-800 flex items-center gap-2",children:[e.jsx("div",{className:"w-2 h-2 bg-red-500 rounded-full"}),"Cancellation Policy"]}),e.jsxs("select",{value:G.cancellationPolicy,onChange:fe=>H(Ve=>({...Ve,cancellationPolicy:fe.target.value})),className:"w-full mt-2 p-3 border border-red-300 rounded-lg bg-white focus:ring-2 focus:ring-red-500 focus:border-transparent",children:[e.jsx("option",{value:"72 hours notice required",children:"72 hours notice required"}),e.jsx("option",{value:"7 days notice required",children:"7 days notice required"}),e.jsx("option",{value:"14 days notice required",children:"14 days notice required"}),e.jsx("option",{value:"No cancellation allowed",children:"No cancellation allowed"})]})]})]}),e.jsxs("div",{className:"mt-6 bg-gradient-to-br from-slate-50 to-gray-50 p-4 rounded-lg border border-slate-200",children:[e.jsxs("label",{className:"text-sm font-medium text-slate-800 flex items-center gap-2",children:[e.jsx("div",{className:"w-2 h-2 bg-slate-500 rounded-full"}),"Additional Terms"]}),e.jsx("textarea",{value:G.additionalTerms,onChange:fe=>H(Ve=>({...Ve,additionalTerms:fe.target.value})),className:"w-full mt-2 p-3 border border-slate-300 rounded-lg bg-white focus:ring-2 focus:ring-slate-500 focus:border-transparent",rows:4,placeholder:"Enter any additional contract terms or special requirements"}),e.jsx("p",{className:"text-xs text-slate-600 mt-1",children:"Special clauses and custom requirements"})]})]})]})]}),e.jsxs(R,{className:"border-orange-200",children:[e.jsxs(Y,{children:[e.jsxs(Q,{className:"flex items-center gap-2 text-orange-700",children:[e.jsx(ys,{className:"h-5 w-5"}),"Counter-Offer Management"]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Handle price negotiations from assigned talent"})]}),e.jsx(L,{className:"space-y-4",children:te.received?e.jsxs("div",{className:"space-y-4 bg-orange-50 p-4 rounded",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium",children:"Counter-Offer Amount ($)"}),e.jsx("input",{type:"number",min:"0",value:te.amount,onChange:fe=>{const Ve=Math.max(0,parseFloat(fe.target.value)||0);Ae(zt=>({...zt,amount:Ve}))},className:"w-full mt-1 p-2 border rounded",placeholder:"Proposed amount"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium",children:"Response Deadline"}),e.jsx("input",{type:"datetime-local",value:te.deadline,onChange:fe=>Ae(Ve=>({...Ve,deadline:fe.target.value})),className:"w-full mt-1 p-2 border rounded"})]}),e.jsxs("div",{className:"flex items-end gap-2",children:[e.jsx(E,{variant:"default",className:"bg-green-600 hover:bg-green-700",onClick:()=>{H(fe=>({...fe,proposedPrice:te.amount})),r({title:"Counter-Offer Approved",description:"Contract price updated"})},children:"Approve"}),e.jsx(E,{variant:"destructive",onClick:()=>{Ae({received:!1,amount:0,deadline:"",notes:""}),r({title:"Counter-Offer Declined",description:"Original terms maintained"})},children:"Decline"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium",children:"Notes"}),e.jsx("textarea",{value:te.notes,onChange:fe=>Ae(Ve=>({...Ve,notes:fe.target.value})),className:"w-full mt-1 p-2 border rounded",rows:2,placeholder:"Negotiation notes and reasoning"})]})]}):e.jsxs("div",{className:"text-center py-4",children:[e.jsx("p",{className:"text-muted-foreground",children:"No counter-offers received yet"}),e.jsx(E,{variant:"outline",className:"mt-2",onClick:()=>Ae(fe=>({...fe,received:!0})),children:"Simulate Counter-Offer"})]})})]}),e.jsxs(R,{children:[e.jsxs(Y,{children:[e.jsxs(Q,{className:"flex items-center gap-2",children:[e.jsx(xt,{className:"h-5 w-5"}),"Contract Generation & Preview"]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Preview and Generate contracts before proceeding to signatures"})]}),e.jsxs(L,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs(E,{className:"w-full flex items-center gap-2",onClick:()=>Ge("booking"),disabled:!1,children:[e.jsx(xt,{className:"h-4 w-4"}),"Preview Booking Agreement"]}),K.bookingAgreement&&e.jsxs("div",{className:"p-3 bg-gray-50 rounded border max-h-40 overflow-y-auto",children:[e.jsx("h4",{className:"font-medium text-sm mb-2",children:"Booking Agreement Preview:"}),e.jsxs("div",{className:"text-xs text-gray-700 whitespace-pre-line",children:[K.bookingAgreement.substring(0,500),"..."]}),e.jsxs(E,{size:"sm",variant:"outline",className:"mt-2",onClick:()=>{const fe=new Blob([K.bookingAgreement],{type:"text/plain"}),Ve=URL.createObjectURL(fe),zt=document.createElement("a");zt.href=Ve,zt.download="booking-agreement-preview.txt",zt.click(),URL.revokeObjectURL(Ve)},children:[e.jsx(Cs,{className:"h-3 w-3 mr-1"}),"Download Full Preview"]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(E,{className:"w-full flex items-center gap-2",onClick:()=>Ge("performance"),disabled:g.length===0,children:[e.jsx(xt,{className:"h-4 w-4"}),"Preview Performance Contracts"]}),K.performanceContract&&e.jsxs("div",{className:"p-3 bg-gray-50 rounded border max-h-40 overflow-y-auto",children:[e.jsx("h4",{className:"font-medium text-sm mb-2",children:"Performance Contract Preview:"}),e.jsxs("div",{className:"text-xs text-gray-700 whitespace-pre-line",children:[K.performanceContract.substring(0,500),"..."]}),e.jsxs(E,{size:"sm",variant:"outline",className:"mt-2",onClick:()=>{const fe=new Blob([K.performanceContract],{type:"text/plain"}),Ve=URL.createObjectURL(fe),zt=document.createElement("a");zt.href=Ve,zt.download="performance-contract-preview.txt",zt.click(),URL.revokeObjectURL(Ve)},children:[e.jsx(Cs,{className:"h-3 w-3 mr-1"}),"Download Full Preview"]})]})]})]}),e.jsx("div",{className:"mt-6 p-4 bg-blue-50 rounded border border-blue-200",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("input",{type:"checkbox",id:"contractConfirmation",className:"mt-1",checked:f[l]||!1,onChange:fe=>b(Ve=>({...Ve,[l]:fe.target.checked}))}),e.jsxs("label",{htmlFor:"contractConfirmation",className:"text-sm",children:[e.jsx("span",{className:"font-medium",children:"I confirm that:"}),e.jsxs("ul",{className:"mt-1 space-y-1 text-muted-foreground",children:[e.jsx("li",{children:" Contract terms and pricing have been reviewed and approved"}),e.jsx("li",{children:" Counter-offers (if any) have been properly handled"}),e.jsx("li",{children:" All assigned talent and contract previews are accurate"}),e.jsx("li",{children:" Ready to proceed to Technical Rider Creation"})]})]})]})})]})]})]}),[Ie,ve]=N.useState(1),[ie,de]=N.useState(""),[ee,ae]=N.useState({stageWidth:32,stageDepth:24,performers:[{id:1,name:"Lead Vocals",position:{x:16,y:4},instrument:"vocals",musician:""},{id:2,name:"Guitar",position:{x:8,y:8},instrument:"guitar",musician:""},{id:3,name:"Bass",position:{x:24,y:8},instrument:"bass",musician:""},{id:4,name:"Drums",position:{x:16,y:16},instrument:"drums",musician:""},{id:5,name:"Keyboards",position:{x:4,y:12},instrument:"keyboard",musician:""}],monitors:[{id:1,position:{x:14,y:2},mix:"Vocal Mix"},{id:2,position:{x:18,y:2},mix:"Vocal Mix"},{id:3,position:{x:6,y:6},mix:"Guitar Mix"},{id:4,position:{x:26,y:6},mix:"Bass Mix"},{id:5,position:{x:2,y:10},mix:"Keys Mix"}],lighting:!0,videoRecording:!1,photographyArea:!0,template:""}),[Se,We]=N.useState({inputs:[{channel:1,source:"Lead Vocal",mic:"SM58",location:"Center Stage",notes:"Main vocal microphone",musician:""},{channel:2,source:"Backup Vocal 1",mic:"SM57",location:"Stage Left",notes:"Harmony vocals",musician:""},{channel:3,source:"Backup Vocal 2",mic:"SM57",location:"Stage Right",notes:"Harmony vocals",musician:""},{channel:4,source:"Acoustic Guitar",mic:"DI + SM81",location:"Stage Left",notes:"Direct input + condenser mic",musician:""},{channel:5,source:"Electric Guitar",mic:"SM57",location:"Guitar Amp",notes:"Close mic on amp",musician:""},{channel:6,source:"Bass Guitar",mic:"DI",location:"Bass Amp",notes:"Direct input from bass",musician:""},{channel:7,source:"Kick Drum",mic:"Beta 52",location:"Drum Kit",notes:"Inside kick drum",musician:""},{channel:8,source:"Snare Drum",mic:"SM57",location:"Drum Kit",notes:"Top of snare",musician:""},{channel:9,source:"Hi-Hat",mic:"SM81",location:"Drum Kit",notes:"Condenser mic above hi-hat",musician:""},{channel:10,source:"Overhead L",mic:"SM81",location:"Drum Kit",notes:"Left overhead cymbal mic",musician:""},{channel:11,source:"Overhead R",mic:"SM81",location:"Drum Kit",notes:"Right overhead cymbal mic",musician:""},{channel:12,source:"Keyboard",mic:"DI (Stereo)",location:"Stage Left",notes:"Stereo direct input",musician:""}],monitors:[{mix:1,name:"Lead Vocal Mix",sends:"Vocal, Drums, Bass, Keys"},{mix:2,name:"Guitar Mix",sends:"Guitar, Drums, Bass, Vocal"},{mix:3,name:"Bass Mix",sends:"Bass, Drums, Vocal, Guitar"},{mix:4,name:"Drums Mix",sends:"Drums, Bass, Guitar, Vocal"},{mix:5,name:"Keys Mix",sends:"Keys, Vocal, Drums, Bass"}],effects:[{name:"Vocal Reverb",type:"Hall Reverb",settings:"Medium decay, warm tone"},{name:"Vocal Delay",type:"Digital Delay",settings:"1/8 note, 15% feedback"},{name:"Drum Compression",type:"Compressor",settings:"Fast attack, medium release"},{name:"Master EQ",type:"Graphic EQ",settings:"House curve adjustment"}]}),[re,je]=N.useState({songs:[{id:1,title:"Opening Song",key:"G",duration:"3:45",transition:"Direct",notes:"High energy opener, crowd interaction",chords:"G-D-Em-C"},{id:2,title:"Fan Favorite #1",key:"C",duration:"4:12",transition:"Guitar intro",notes:"Audience participation, clap along",chords:"C-Am-F-G"},{id:3,title:"Ballad",key:"Em",duration:"5:30",transition:"Acoustic",notes:"Stripped down, intimate moment",chords:"Em-C-G-D"},{id:4,title:"Dance Track",key:"A",duration:"3:55",transition:"Build up",notes:"Get the crowd moving, lights flash",chords:"A-D-E-A"},{id:5,title:"Cover Song",key:"D",duration:"4:20",transition:"Medley",notes:"Popular cover, sing-along moment",chords:"D-A-Bm-G"},{id:6,title:"New Single",key:"F",duration:"3:38",transition:"Direct",notes:"Promote new release, energy boost",chords:"F-C-Dm-Bb"},{id:7,title:"Instrumental Break",key:"Bb",duration:"2:45",transition:"Solo intro",notes:"Showcase musicians, guitar/drum solos",chords:"Bb-F-Gm-Eb"},{id:8,title:"Emotional Peak",key:"Am",duration:"4:55",transition:"Slow build",notes:"Powerful vocals, emotional connection",chords:"Am-F-C-G"},{id:9,title:"Party Anthem",key:"E",duration:"3:25",transition:"Immediate",notes:"High energy, crowd jumping",chords:"E-A-B-E"},{id:10,title:"Regional Hit",key:"G",duration:"4:05",transition:"Call back",notes:"Local crowd favorite, cultural moment",chords:"G-Em-C-D"},{id:11,title:"Closing Song",key:"C",duration:"5:15",transition:"Epic build",notes:"Big finish, confetti, thank you speech",chords:"C-G-Am-F"}],timing:{mainSet:"38:33",encore:"7:40",totalShow:"~54:00"},notes:"Energy flow: High  Mixed  Emotional peak  Party finish. Include 2-3 crowd interaction moments.",specialRequirements:"Confetti cannons for final song, backup wireless mics available, towels for performers"}),Pe=()=>e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"flex items-center justify-between mb-6",children:e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-semibold mb-2",children:"Enhanced Technical Rider System"}),e.jsx("p",{className:"text-muted-foreground",children:"Professional technical requirements management with stage plot, mixer configuration, and setlist integration"})]})}),e.jsxs(R,{className:"mb-6",children:[e.jsxs(Y,{children:[e.jsxs(Q,{className:"flex items-center gap-2",children:[e.jsx(qa,{className:"h-5 w-5"}),"Stage Plot & Mixer Patch System"]}),e.jsx(rt,{children:"Automatically generate mixer input patch list from assigned talent with proper instrument ordering"})]}),e.jsx(L,{children:e.jsx(jX,{bookingId:t,assignedTalent:g.map(fe=>{var Ve;return{id:fe.id||((Ve=fe.userId)==null?void 0:Ve.toString()),userId:fe.userId,name:fe.name||fe.fullName,stageName:fe.stageName||fe.name||fe.fullName,primaryTalent:fe.primaryTalent||fe.role||"Lead Vocalist",secondaryTalents:fe.secondaryTalents||[],assignedTo:fe.assignedTo||fe.name||fe.fullName,isMainBookedTalent:fe.isPrimary||fe.isMainBookedTalent||!1}}),canEdit:a,onSave:async fe=>{try{await xe(`/api/bookings/${t}/mixer-patch-list`,{method:"POST",body:JSON.stringify(fe)}),r({title:"Mixer Patch List Saved",description:"Stage plot assignments converted to mixer channels successfully"})}catch{r({title:"Save Failed",description:"Could not save mixer patch list",variant:"destructive"})}}})})]}),e.jsx(D5,{bookingId:t,assignedMusicians:g.map(fe=>{var ts;(A||[]).find(ds=>ds.id===fe.userId);const Ve=M.find(ds=>ds.userId===fe.userId),zt=I.find(ds=>ds.userId===fe.userId),gs=W.find(ds=>ds.userId===fe.userId),pt=Ve||zt||gs;let Js=fe.primaryTalent,Ps=fe.secondaryTalents;return!Js&&pt&&(pt.primaryTalent?Js=pt.primaryTalent:pt.primary_talent?Js=pt.primary_talent:pt.primaryRole&&(Js=pt.primaryRole)),!Ps&&pt&&(Ps=pt.secondaryTalents||pt.secondary_talents||[]),{id:fe.userId||fe.id,userId:fe.userId,roleId:fe.roleId,name:fe.stageName||fe.name||fe.fullName,fullName:fe.fullName,stageName:((ts=pt==null?void 0:pt.stageNames)==null?void 0:ts[0])||fe.stageName||"",role:fe.role,primaryRole:(pt==null?void 0:pt.primary_role)||(pt==null?void 0:pt.primaryRole)||"Lead Vocalist",skillsAndInstruments:(pt==null?void 0:pt.skills_and_instruments)||(pt==null?void 0:pt.skillsAndInstruments)||(pt==null?void 0:pt.instruments)||[],availableRoles:(pt==null?void 0:pt.performance_roles)||(pt==null?void 0:pt.performanceRoles)||[],instruments:(pt==null?void 0:pt.instruments)||[],selectedRoles:fe.selectedRoles||((pt==null?void 0:pt.performance_roles)||(pt==null?void 0:pt.performanceRoles)||[]).slice(0,2),isMainBookedTalent:fe.isPrimary||fe.isMainBookedTalent||!1,assignedRole:fe.role,type:fe.type||(fe.isPrimary?"Main Booked Talent":"Supporting Musician"),talentType:fe.talentType||"Artist",assignmentRole:fe.type||(fe.isPrimary?"Main Booked Talent":"Supporting Musician"),primaryTalent:Js,secondaryTalents:Ps||[],hasPrimaryTalent:!!Js,hasSecondaryTalents:!!(Ps&&Ps.length>0)}}),eventDetails:{eventName:(o==null?void 0:o.eventName)||"",venueName:(o==null?void 0:o.venueName)||"",eventDate:(o==null?void 0:o.eventDate)||"",eventType:(o==null?void 0:o.eventType)||"",duration:60},canEdit:a,userRole:n,onSave:async fe=>{try{await xe(`/api/bookings/${t}/enhanced-technical-rider`,{method:"POST",body:JSON.stringify(fe)}),r(Ci.SUCCESS.SAVE)}catch{r({title:"Error",description:"Failed to save technical rider",variant:"destructive"})}},onLoad:async()=>{try{return await xe(`/api/bookings/${t}/enhanced-technical-rider`)}catch{return null}}})]}),He=()=>e.jsx("div",{className:"space-y-6",children:e.jsxs(R,{children:[e.jsxs(Y,{children:[e.jsxs(Q,{className:"flex items-center gap-2",children:[e.jsx(Ub,{className:"h-5 w-5"}),"Signature Collection"]}),e.jsx(rt,{children:"Collect digital signatures from all parties on contracts and agreements"})]}),e.jsx(L,{children:e.jsxs("div",{className:"text-center py-8",children:[e.jsx(go,{className:"h-16 w-16 mx-auto text-gray-400 mb-4"}),e.jsx("p",{className:"text-gray-600",children:"Signature collection functionality will be implemented here"}),e.jsx(E,{variant:"outline",className:"mt-4",children:"Initiate Signature Process"})]})})]})}),Ye=()=>e.jsx("div",{className:"space-y-6",children:e.jsxs(R,{children:[e.jsxs(Y,{children:[e.jsxs(Q,{className:"flex items-center gap-2",children:[e.jsx(Il,{className:"h-5 w-5"}),"Payment Processing"]}),e.jsx(rt,{children:"Process payments and generate receipts for the booking"})]}),e.jsx(L,{children:e.jsxs("div",{className:"text-center py-8",children:[e.jsx(Il,{className:"h-16 w-16 mx-auto text-gray-400 mb-4"}),e.jsx("p",{className:"text-gray-600",children:"Payment processing functionality will be implemented here"}),e.jsx(E,{variant:"outline",className:"mt-4",children:"Process Payment"})]})})]})});return e.jsxs("div",{className:"max-w-6xl mx-auto p-6 space-y-8",children:[e.jsx(R,{className:"border-l-4 border-l-primary",children:e.jsx(Y,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(Q,{className:"text-2xl",children:"Comprehensive Booking Workflow"}),e.jsx(rt,{children:"Manage the complete booking process from assignment to completion"})]}),e.jsxs(X,{variant:"outline",className:"px-3 py-1",children:["Step ",l," of ",j.length]})]})})}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-8",children:j.map((fe,Ve)=>e.jsx(R,{className:`cursor-pointer transition-all ${fe.isActive?"ring-2 ring-primary shadow-lg":""} ${fe.status==="completed"?"bg-green-50 border-green-200":""}`,onClick:()=>c(Ve+1),children:e.jsx(L,{className:"p-4",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center ${fe.status==="completed"?"bg-green-500 text-white":fe.isActive?"bg-primary text-white":"bg-gray-200"}`,children:fe.status==="completed"?e.jsx(ct,{className:"w-5 h-5"}):fe.icon}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-medium text-sm",children:fe.title}),e.jsx("p",{className:"text-xs text-muted-foreground",children:fe.description})]})]})})},fe.id))}),e.jsxs("div",{className:"space-y-6",children:[l===1&&F(),l===2&&be(),l===3&&Pe(),l===4&&He(),l===5&&Ye()]}),e.jsxs("div",{className:"flex justify-between items-center pt-6 border-t",children:[e.jsxs(E,{variant:"outline",onClick:()=>c(Math.max(1,l-1)),disabled:l===1,children:[e.jsx(ju,{className:"w-4 h-4 mr-2"}),"Previous"]}),e.jsx("div",{className:"flex space-x-2",children:e.jsxs(E,{variant:"outline",onClick:z,disabled:m,children:[m?e.jsx(oa,{className:"w-4 h-4 mr-2 animate-spin"}):e.jsx(js,{className:"w-4 h-4 mr-2"}),m?"Saving...":"Save Progress"]})}),e.jsxs(E,{onClick:()=>c(Math.min(j.length,l+1)),disabled:l===j.length||!((ws=j[l-1])!=null&&ws.canProgress),children:["Next",e.jsx(qo,{className:"w-4 h-4 ml-2"})]})]})]})}function yX(){const[,t]=As(),{user:s,isLoading:n}=_s(),[a,r]=N.useState(null),{data:i=[],isLoading:l,error:c}=ke({queryKey:["/api/bookings/all"],enabled:!!s&&[1,2].includes(s.roleId)}),o=h=>{switch(h==null?void 0:h.toLowerCase()){case"confirmed":case"approved":return"bg-green-100 text-green-800 border-green-200";case"pending":return"bg-yellow-100 text-yellow-800 border-yellow-200";case"cancelled":return"bg-red-100 text-red-800 border-red-200";case"completed":return"bg-blue-100 text-blue-800 border-blue-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}},d=h=>{switch(h==null?void 0:h.toLowerCase()){case"confirmed":case"approved":case"completed":return e.jsx(ct,{className:"h-4 w-4"});case"pending":return e.jsx(Qt,{className:"h-4 w-4"});case"cancelled":return e.jsx(ys,{className:"h-4 w-4"});default:return e.jsx(dt,{className:"h-4 w-4"})}};return n?e.jsx("div",{className:"min-h-screen flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary mx-auto"}),e.jsx("p",{className:"mt-4 text-muted-foreground",children:"Loading authentication..."})]})}):c?e.jsx("div",{className:"min-h-screen flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx(ys,{className:"h-12 w-12 text-red-500 mx-auto mb-4"}),e.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Error Loading Bookings"}),e.jsx("p",{className:"text-muted-foreground mb-4",children:"Failed to load booking data"}),e.jsx(E,{onClick:()=>window.location.reload(),children:"Retry"})]})}):e.jsx(qt,{children:e.jsxs("div",{className:"container mx-auto px-4 py-8 space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs(E,{variant:"outline",size:"sm",onClick:()=>t("/dashboard"),children:[e.jsx(Rn,{className:"h-4 w-4 mr-2"}),"Back to Dashboard"]}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold",children:"Comprehensive Booking Workflow"}),e.jsx("p",{className:"text-muted-foreground",children:"Advanced 6-step booking management system"})]})]}),e.jsxs(X,{variant:"outline",className:"text-primary border-primary",children:[e.jsx(Gt,{className:"h-3 w-3 mr-1"}),(s==null?void 0:s.roleId)===1?"Superadmin":"Admin"," Access"]})]}),!a&&e.jsxs(R,{children:[e.jsxs(Y,{children:[e.jsxs(Q,{className:"flex items-center gap-2",children:[e.jsx(dt,{className:"h-5 w-5"}),"Select Booking for Workflow Management"]}),e.jsx("p",{className:"text-muted-foreground",children:"Choose a booking to begin the comprehensive 6-step workflow process"})]}),e.jsx(L,{children:l?e.jsx("div",{className:"text-center py-8",children:e.jsx("div",{className:"animate-pulse",children:"Loading available bookings..."})}):i.length>0?e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:i.map(h=>{var u,m;return e.jsx(R,{className:"cursor-pointer hover:shadow-md transition-shadow border-2 hover:border-primary/50",onClick:()=>r(h.id),children:e.jsx(L,{className:"p-4",children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"font-semibold text-lg truncate",children:h.eventName||"Untitled Event"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:((u=h.primaryArtist)==null?void 0:u.stageName)||"No artist assigned"})]}),e.jsxs(X,{className:o(h.status),children:[d(h.status),e.jsx("span",{className:"ml-1",children:h.status})]})]}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(hx,{className:"h-4 w-4 text-muted-foreground"}),e.jsxs("span",{className:"font-medium",children:["Booking #",h.id]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(dt,{className:"h-4 w-4 text-muted-foreground"}),e.jsx("span",{children:h.eventDate?new Date(h.eventDate).toLocaleDateString("en-US",{weekday:"short",year:"numeric",month:"short",day:"numeric"}):"Date TBD"})]}),h.venueName&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Dn,{className:"h-4 w-4 text-muted-foreground"}),e.jsx("span",{className:"truncate",children:h.venueName})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ze,{className:"h-4 w-4 text-muted-foreground"}),e.jsxs("span",{children:[(((m=h.assignedMusicians)==null?void 0:m.length)||0)+1," talent assigned"]})]}),h.totalBudget&&e.jsx("div",{className:"flex items-center gap-2",children:e.jsxs("span",{className:"text-lg font-semibold text-green-600",children:["$",parseFloat(h.totalBudget).toLocaleString()]})})]}),e.jsxs(E,{className:"w-full mt-3",onClick:p=>{p.stopPropagation(),r(h.id)},children:[e.jsx(Gt,{className:"h-4 w-4 mr-2"}),"Start Workflow"]})]})})},h.id)})}):e.jsxs("div",{className:"text-center py-12",children:[e.jsx(dt,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No Bookings Available"}),e.jsx("p",{className:"text-muted-foreground mb-4",children:"There are currently no bookings available for workflow management."}),e.jsxs(E,{onClick:()=>t("/booking"),children:[e.jsx(dt,{className:"h-4 w-4 mr-2"}),"Create New Booking"]})]})})]}),a&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs(R,{children:[e.jsx(Y,{children:e.jsxs(Q,{className:"flex items-center justify-between",children:[e.jsxs("span",{children:["Active Workflow - Booking #",a]}),e.jsxs(E,{variant:"outline",size:"sm",onClick:()=>r(null),children:[e.jsx(Rn,{className:"h-4 w-4 mr-2"}),"Change Booking"]})]})}),e.jsx(L,{children:(()=>{var u;const h=i.find(m=>m.id===a);return h?e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Event"}),e.jsx("p",{className:"font-semibold",children:h.eventName})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Artist"}),e.jsx("p",{className:"font-semibold",children:(u=h.primaryArtist)==null?void 0:u.stageName})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Date"}),e.jsx("p",{className:"font-semibold",children:new Date(h.eventDate).toLocaleDateString()})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Status"}),e.jsx(X,{className:o(h.status),children:h.status})]})]}):e.jsx("p",{className:"text-muted-foreground",children:"Loading booking details..."})})()})]}),e.jsx(vX,{bookingId:a,userRole:(s==null?void 0:s.roleId)===1?"superadmin":"admin",canEdit:!0,onStatusChange:h=>{console.log("Booking status changed to:",h)}})]})]})})}function NX({bookingId:t,workflowData:s}){const n=(s==null?void 0:s.setlist)||[],a=n.reduce((i,l)=>i+(l.duration||0),0),r=i=>{const l=Math.floor(i/60),c=i%60;return`${l}:${c.toString().padStart(2,"0")}`};return e.jsx("div",{className:"space-y-4",children:e.jsxs(R,{children:[e.jsx(Y,{children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsx(Q,{children:"Performance Setlist"}),e.jsxs(rt,{children:[n.length," songs  ",r(a)," total runtime"]})]}),e.jsxs(E,{variant:"outline",size:"sm",children:[e.jsx(Cs,{className:"h-4 w-4 mr-1"}),"Export PDF"]})]})}),e.jsx(L,{children:e.jsx("div",{className:"space-y-2",children:n.length===0?e.jsx("p",{className:"text-center py-8 text-muted-foreground",children:"No setlist created yet"}):n.map((i,l)=>e.jsx(R,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"text-2xl font-bold text-muted-foreground",children:String(l+1).padStart(2,"0")}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:i.songTitle}),e.jsx("p",{className:"text-sm text-muted-foreground",children:i.artist})]})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[i.key&&e.jsxs(X,{variant:"outline",children:["Key: ",i.key]}),i.tempo&&e.jsxs(X,{variant:"outline",children:[i.tempo," BPM"]}),e.jsxs("div",{className:"flex items-center gap-1 text-sm text-muted-foreground",children:[e.jsx(Qt,{className:"h-3 w-3"}),r(i.duration)]}),e.jsx(E,{size:"sm",variant:"ghost",children:e.jsx(Gn,{className:"h-4 w-4"})})]})]})},i.id))})})]})})}function T1({bookingId:t,songs:s}){const{toast:n}=nt(),[a,r]=N.useState(new Set),[i,l]=N.useState({}),c=Xe({mutationFn:async h=>(r(u=>new Set(u).add(h)),xe(`/api/songs/${h}/process-spleeter`,{method:"POST",body:{bookingId:t}})),onSuccess:(h,u)=>{r(m=>{const p=new Set(m);return p.delete(u),p}),n({title:"Track Separated",description:"Stems are ready for download"})},onError:(h,u)=>{r(m=>{const p=new Set(m);return p.delete(u),p}),n({title:"Processing Failed",description:"Unable to separate track. Please try again.",variant:"destructive"})}}),o=async(h,u)=>{var m;try{l(y=>({...y,[`${h}-${u}`]:0}));const p=await fetch(`/api/songs/${h}/stems/${u}`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});if(!p.ok)throw new Error("Download failed");const g=await p.blob(),x=window.URL.createObjectURL(g),v=document.createElement("a");v.href=x,v.download=`${(m=s.find(y=>y.id===h))==null?void 0:m.title}-${u}.wav`,document.body.appendChild(v),v.click(),window.URL.revokeObjectURL(x),document.body.removeChild(v),l(y=>{const f={...y};return delete f[`${h}-${u}`],f})}catch{n({title:"Download Failed",description:"Unable to download stem. Please try again.",variant:"destructive"})}},d=[{id:"vocals",label:"Vocals",icon:e.jsx(yn,{className:"h-4 w-4"})},{id:"drums",label:"Drums",icon:e.jsx(_y,{className:"h-4 w-4"})},{id:"bass",label:"Bass",icon:e.jsx(Po,{className:"h-4 w-4"})},{id:"other",label:"Other",icon:e.jsx(Ue,{className:"h-4 w-4"})}];return e.jsx("div",{className:"space-y-4",children:e.jsxs(R,{children:[e.jsxs(Y,{children:[e.jsx(Q,{children:"DJ Track Access"}),e.jsx(rt,{children:"Access original tracks and AI-separated stems for mixing"})]}),e.jsx(L,{children:s.length===0?e.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[e.jsx(jn,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),e.jsx("p",{children:"No tracks assigned for this booking"})]}):e.jsx("div",{className:"space-y-4",children:s.map(h=>e.jsx(R,{className:"p-4",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:h.title}),e.jsx("p",{className:"text-sm text-muted-foreground",children:h.artist})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(E,{size:"sm",variant:"outline",children:[e.jsx(Gn,{className:"h-4 w-4 mr-1"}),"Preview"]}),e.jsxs(E,{size:"sm",variant:"outline",children:[e.jsx(Cs,{className:"h-4 w-4 mr-1"}),"Original"]})]})]}),h.hasSpleeterTracks?e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2",children:d.map(u=>{const m=`${h.id}-${u.id}`,p=!!i[m];return e.jsxs(E,{size:"sm",variant:"secondary",onClick:()=>o(h.id,u.id),disabled:p,children:[p?e.jsx(oa,{className:"h-4 w-4 mr-1 animate-spin"}):u.icon,u.label]},u.id)})}):e.jsx("div",{className:"bg-muted rounded-lg p-4",children:a.has(h.id)?e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm",children:"Processing stems..."}),e.jsx(oa,{className:"h-4 w-4 animate-spin"})]}),e.jsx(qs,{value:33,className:"h-2"})]}):e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:"Stems not yet generated"}),e.jsxs(E,{size:"sm",onClick:()=>c.mutate(h.id),children:[e.jsx(qa,{className:"h-4 w-4 mr-1"}),"Generate Stems"]})]})})]})},h.id))})})]})})}function bX({open:t,onOpenChange:s,bookingId:n,currentPrice:a,onSuccess:r}){const{toast:i}=nt(),[l,c]=N.useState(a||""),[o,d]=N.useState(""),h=Xe({mutationFn:async()=>xe(`/api/bookings/${n}/talent-response`,{method:"POST",body:{action:"counter_offer",proposedPrice:parseFloat(l),reason:o}}),onSuccess:()=>{i({title:"Counter Offer Sent",description:"Your counter offer has been submitted for review."}),r()},onError:()=>{i({title:"Failed to Send",description:"Unable to submit counter offer. Please try again.",variant:"destructive"})}}),u=m=>{if(m.preventDefault(),!l||parseFloat(l)<=0){i({title:"Invalid Price",description:"Please enter a valid price amount.",variant:"destructive"});return}h.mutate()};return e.jsx(kt,{open:t,onOpenChange:s,children:e.jsx(wt,{children:e.jsxs("form",{onSubmit:u,children:[e.jsx(St,{children:e.jsx(Ct,{children:"Submit Counter Offer"})}),e.jsxs("div",{className:"space-y-4 py-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(q,{htmlFor:"current-price",children:"Current Offer"}),e.jsxs("div",{className:"relative",children:[e.jsx(It,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),e.jsx($,{id:"current-price",value:a||"TBD",disabled:!0,className:"pl-9"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(q,{htmlFor:"proposed-price",children:"Your Counter Offer"}),e.jsxs("div",{className:"relative",children:[e.jsx(It,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),e.jsx($,{id:"proposed-price",type:"number",step:"0.01",value:l,onChange:m=>c(m.target.value),placeholder:"Enter amount",className:"pl-9",required:!0})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(q,{htmlFor:"reason",children:"Reason for Counter Offer"}),e.jsx(mt,{id:"reason",value:o,onChange:m=>d(m.target.value),placeholder:"Explain your counter offer (optional)",rows:3})]})]}),e.jsxs(hi,{children:[e.jsx(E,{type:"button",variant:"outline",onClick:()=>s(!1),disabled:h.isPending,children:"Cancel"}),e.jsxs(E,{type:"submit",disabled:h.isPending,children:[h.isPending&&e.jsx(oa,{className:"h-4 w-4 mr-2 animate-spin"}),"Submit Counter Offer"]})]})]})})})}function wX({bookingId:t}){var S,k,T,A;const{user:s}=_s(),{toast:n}=nt(),a=Tt(),[r,i]=N.useState(!1),[l,c]=N.useState(null),[o,d]=N.useState(""),[h,u]=N.useState("admin_controlled"),{data:m=[],isLoading:p}=ke({queryKey:["booking-documents",t],queryFn:async()=>await xe(`/api/bookings/${t}/documents`)}),g=Xe({mutationFn:async C=>xe(`/api/bookings/${t}/documents`,{method:"POST",body:C}),onSuccess:()=>{n({title:"Document uploaded",description:"The document has been uploaded successfully."}),a.invalidateQueries({queryKey:["booking-documents",t]}),i(!1),c(null),d("")},onError:()=>{n({title:"Upload failed",description:"Failed to upload the document. Please try again.",variant:"destructive"})}}),x=Xe({mutationFn:async C=>xe(`/api/bookings/${t}/documents/${C}`,{method:"DELETE"}),onSuccess:()=>{n({title:"Document deleted",description:"The document has been removed."}),a.invalidateQueries({queryKey:["booking-documents",t]})}}),v=Xe({mutationFn:async({documentId:C,visibility:w})=>xe(`/api/bookings/${t}/documents/${C}/visibility`,{method:"PATCH",body:{visibility:w}}),onSuccess:()=>{n({title:"Visibility updated",description:"Document visibility has been updated."}),a.invalidateQueries({queryKey:["booking-documents",t]})}}),y=()=>{if(!l)return;const C=new FormData;C.append("file",l),C.append("description",o),C.append("visibility",h),g.mutate(C)},f=C=>C.startsWith("image/")?e.jsx(Vn,{className:"h-4 w-4"}):C.startsWith("video/")?e.jsx(ca,{className:"h-4 w-4"}):C.startsWith("audio/")?e.jsx(Ue,{className:"h-4 w-4"}):e.jsx(_h,{className:"h-4 w-4"}),b=C=>{switch(C){case"booker_only":return e.jsxs(X,{variant:"destructive",children:[e.jsx(Ul,{className:"h-3 w-3 mr-1"}),"Booker Only"]});case"admin_controlled":return e.jsxs(X,{variant:"secondary",children:[e.jsx(Bt,{className:"h-3 w-3 mr-1"}),"Admin Controlled"]});case"all_talent":return e.jsxs(X,{variant:"default",children:[e.jsx(l4,{className:"h-3 w-3 mr-1"}),"All Talent"]});default:return null}},j=(s==null?void 0:s.roleId)&&[1,2].includes(s.roleId);return(s==null?void 0:s.id)===((k=(S=m[0])==null?void 0:S.uploadedBy)==null?void 0:k.id)&&((A=(T=m[0])==null?void 0:T.uploadedBy)==null||A.roleName),e.jsxs(R,{children:[e.jsx(Y,{children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsx(Q,{children:"MediaHub - Document Sharing"}),e.jsx(rt,{children:"Share and manage documents, graphics, and videos for this booking"})]}),e.jsxs(E,{onClick:()=>i(!0),size:"sm",children:[e.jsx(Xs,{className:"h-4 w-4 mr-1"}),"Upload Document"]})]})}),e.jsxs(L,{children:[m.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx(xt,{className:"h-12 w-12 mx-auto text-muted-foreground mb-4"}),e.jsx("p",{className:"text-muted-foreground",children:"No documents uploaded yet"}),e.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"Upload contracts, technical specifications, stage plots, and other important files"})]}):e.jsx("div",{className:"space-y-4",children:m.map(C=>e.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"p-2 bg-muted rounded",children:f(C.fileType)}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("p",{className:"font-medium",children:C.fileName}),b(C.visibility)]}),C.description&&e.jsx("p",{className:"text-sm text-muted-foreground",children:C.description}),e.jsxs("div",{className:"flex items-center gap-4 text-xs text-muted-foreground mt-1",children:[e.jsxs("span",{children:["Uploaded by ",C.uploadedBy.fullName]}),e.jsx("span",{children:Mn(new Date(C.uploadedAt),"MMM d, yyyy")}),e.jsxs("span",{children:[(C.fileSize/1024/1024).toFixed(2)," MB"]})]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[j&&e.jsxs("select",{className:"text-xs border rounded px-2 py-1",value:C.visibility,onChange:w=>v.mutate({documentId:C.id,visibility:w.target.value}),"data-testid":`select-visibility-${C.id}`,children:[e.jsx("option",{value:"booker_only",children:"Booker Only"}),e.jsx("option",{value:"admin_controlled",children:"Admin Controlled"}),e.jsx("option",{value:"all_talent",children:"All Talent"})]}),e.jsx(E,{variant:"ghost",size:"sm",asChild:!0,children:e.jsxs("a",{href:C.url,target:"_blank",rel:"noopener noreferrer",children:[e.jsx(Ns,{className:"h-4 w-4 mr-1"}),"View"]})}),e.jsx(E,{variant:"ghost",size:"sm",asChild:!0,children:e.jsxs("a",{href:C.url,download:C.fileName,children:[e.jsx(Cs,{className:"h-4 w-4 mr-1"}),"Download"]})}),(j||C.uploadedBy.id===(s==null?void 0:s.id))&&e.jsx(E,{variant:"ghost",size:"sm",onClick:()=>{confirm("Are you sure you want to delete this document?")&&x.mutate(C.id)},"data-testid":`button-delete-${C.id}`,children:e.jsx(Vt,{className:"h-4 w-4 text-destructive"})})]})]},C.id))}),e.jsx(kt,{open:r,onOpenChange:i,children:e.jsxs(wt,{children:[e.jsx(St,{children:e.jsx(Ct,{children:"Upload Document"})}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(q,{children:"File"}),e.jsx($,{type:"file",onChange:C=>{var w;return c(((w=C.target.files)==null?void 0:w[0])||null)},accept:".pdf,.doc,.docx,.txt,.jpg,.jpeg,.png,.mp4,.mov"}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Supported: PDF, Word, Text, Images, Videos (max 50MB)"})]}),e.jsxs("div",{children:[e.jsx(q,{children:"Description (optional)"}),e.jsx($,{value:o,onChange:C=>d(C.target.value),placeholder:"Brief description of the document"})]}),e.jsxs("div",{children:[e.jsx(q,{children:"Visibility"}),e.jsxs("select",{className:"w-full border rounded px-3 py-2",value:h,onChange:C=>u(C.target.value),children:[e.jsx("option",{value:"booker_only",children:"Booker Only - Only the event organizer can view"}),e.jsx("option",{value:"admin_controlled",children:"Admin Controlled - Admins decide who can view"}),e.jsx("option",{value:"all_talent",children:"All Talent - All assigned talent can view"})]})]}),!j&&e.jsxs(Ua,{children:[e.jsx(on,{className:"h-4 w-4"}),e.jsxs(sr,{children:['Uploaded documents will be set to "',h,'" visibility. Admins can change this after upload if needed.']})]})]}),e.jsxs(hi,{children:[e.jsx(E,{variant:"outline",onClick:()=>i(!1),children:"Cancel"}),e.jsx(E,{onClick:y,disabled:!l||g.isPending,children:g.isPending?"Uploading...":"Upload"})]})]})})]})]})}function SX(){var b,j,S,k,T,A,C;const{user:t}=_s(),{config:s}=n0(),n=yd(),a=parseInt(n.id),{toast:r}=nt(),i=Tt(),[l,c]=N.useState("overview"),[o,d]=N.useState(!1),{data:h,isLoading:u,error:m}=ke({queryKey:["booking-details",a],queryFn:async()=>await xe(`/api/bookings/${a}/talent-view`),enabled:!!a&&!!t}),g=(()=>{var w,P,M,I;if(!t)return"unknown";if([3,4,5,6].includes(t.roleId))return"performer";if(t.roleId===7||t.roleId===8)return(P=(w=h==null?void 0:h.assignmentInfo)==null?void 0:w.selectedTalent)!=null&&P.toLowerCase().includes("dj")?"dj":"audio_professional";if(t.roleId===7||t.roleId===8){const W=((I=(M=h==null?void 0:h.assignmentInfo)==null?void 0:M.selectedTalent)==null?void 0:I.toLowerCase())||"";if(W.includes("photo")||W.includes("video")||W.includes("visual"))return"visual_professional"}return"professional"})(),x=Xe({mutationFn:async()=>xe(`/api/bookings/${a}/talent-response`,{method:"POST",body:{action:"accept"}}),onSuccess:()=>{r({title:"Booking Accepted",description:"You've successfully accepted this booking."}),i.invalidateQueries({queryKey:["booking-details",a]})}}),v=Xe({mutationFn:async w=>xe(`/api/bookings/${a}/talent-response`,{method:"POST",body:{action:"reject",reason:w}}),onSuccess:()=>{r({title:"Booking Declined",description:"You've declined this booking.",variant:"default"}),i.invalidateQueries({queryKey:["booking-details",a]})}});if(u)return e.jsx(W0,{message:"Loading gig details..."});if(m||!h)return e.jsx(R,{children:e.jsxs(L,{className:"text-center py-8",children:[e.jsx(on,{className:"h-12 w-12 mx-auto text-destructive mb-4"}),e.jsx("p",{className:"text-lg font-semibold",children:"Unable to load booking details"}),e.jsx("p",{className:"text-muted-foreground",children:"Please try again later"})]})});const y=()=>{const w=[{value:"overview",label:"Overview",icon:e.jsx(Os,{className:"h-4 w-4"})},{value:"mediahub",label:"MediaHub",icon:e.jsx(xt,{className:"h-4 w-4"})},{value:"contracts",label:"Contracts",icon:e.jsx(xt,{className:"h-4 w-4"})},{value:"payment",label:"Payment",icon:e.jsx(It,{className:"h-4 w-4"})}];switch(g){case"performer":return[...w.slice(0,1),{value:"setlist",label:"Setlist",icon:e.jsx(Ue,{className:"h-4 w-4"})},{value:"charts",label:"Chord Charts",icon:e.jsx(_a,{className:"h-4 w-4"})},{value:"technical",label:"Technical",icon:e.jsx(To,{className:"h-4 w-4"})},...w.slice(1)];case"dj":return[...w.slice(0,1),{value:"tracks",label:"Tracks",icon:e.jsx(jn,{className:"h-4 w-4"})},{value:"spleeter",label:"Stem Separation",icon:e.jsx(U6,{className:"h-4 w-4"})},...w.slice(1)];case"visual_professional":return[...w.slice(0,1),{value:"shooting-guide",label:"Shooting Guide",icon:e.jsx(Vi,{className:"h-4 w-4"})},{value:"stage-layout",label:"Stage Layout",icon:e.jsx(To,{className:"h-4 w-4"})},...w.slice(1)];default:return w}},f=()=>{var P,M,I;return((P=h.assignmentInfo)==null?void 0:P.status)==="pending"||h.status==="pending"?e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(E,{variant:"default",size:"sm",onClick:()=>x.mutate(),disabled:x.isPending,"data-testid":"button-accept-booking",children:[e.jsx(ct,{className:"h-4 w-4 mr-1"}),"Accept"]}),e.jsxs(E,{variant:"outline",size:"sm",onClick:()=>d(!0),"data-testid":"button-counter-offer",children:[e.jsx($s,{className:"h-4 w-4 mr-1"}),"Counter Offer"]}),e.jsxs(E,{variant:"ghost",size:"sm",onClick:()=>{confirm("Are you sure you want to decline this booking?")&&v.mutate("Declined by talent")},disabled:v.isPending,"data-testid":"button-decline-booking",children:[e.jsx(Fa,{className:"h-4 w-4 mr-1"}),"Decline"]})]}):e.jsx(X,{variant:((M=h.assignmentInfo)==null?void 0:M.status)==="active"?"default":"secondary",children:((I=h.assignmentInfo)==null?void 0:I.status)||h.status})};return e.jsxs("div",{className:"container mx-auto py-6 space-y-6",children:[e.jsxs(R,{children:[e.jsx(Y,{children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsx(Q,{className:"text-2xl",children:h.eventName}),e.jsx(rt,{className:"mt-2",children:h.assignmentInfo&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(X,{variant:"outline",children:h.assignmentInfo.roleInBooking}),e.jsxs(X,{variant:"secondary",children:[e.jsx(Ue,{className:"h-3 w-3 mr-1"}),h.assignmentInfo.selectedTalent]}),h.assignmentInfo.isMainBookedTalent&&e.jsx(X,{variant:"default",children:"Main Talent"})]})})]}),f()]})}),e.jsxs(L,{children:[e.jsxs("div",{className:"grid md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(dt,{className:"h-4 w-4 text-muted-foreground"}),e.jsx("span",{children:h.eventDate?Mn(new Date(h.eventDate),"PPP"):"Date TBD"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Dn,{className:"h-4 w-4 text-muted-foreground"}),e.jsx("span",{children:h.venueName||"Venue TBD"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(It,{className:"h-4 w-4 text-muted-foreground"}),e.jsx("span",{children:h.finalPrice?`$${h.finalPrice}`:"Price TBD"})]})]}),h.venueAddress&&e.jsx("p",{className:"text-sm text-muted-foreground mt-2",children:h.venueAddress})]})]}),e.jsxs(Ut,{value:l,onValueChange:c,children:[e.jsx(jt,{className:"grid w-full",style:{gridTemplateColumns:`repeat(${y().length}, 1fr)`},children:y().map(w=>e.jsxs(Ne,{value:w.value,className:"text-xs",children:[w.icon,e.jsx("span",{className:"ml-1",children:w.label})]},w.value))}),e.jsx(ge,{value:"overview",children:e.jsxs(R,{children:[e.jsx(Y,{children:e.jsx(Q,{children:"Booking Overview"})}),e.jsxs(L,{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(q,{children:"Event Type"}),e.jsx("p",{className:"text-sm",children:h.eventType})]}),h.requirements&&e.jsxs("div",{children:[e.jsx(q,{children:"Requirements"}),e.jsx("p",{className:"text-sm whitespace-pre-wrap",children:h.requirements})]}),h.assignmentInfo&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(q,{children:"Your Assignment Details"}),e.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Group:"})," ",h.assignmentInfo.assignedGroup]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Channel:"})," ",h.assignmentInfo.assignedChannel||"TBD"]})]})]})]})]})}),g==="performer"&&e.jsxs(e.Fragment,{children:[e.jsx(ge,{value:"setlist",children:e.jsx(NX,{bookingId:a,workflowData:h.workflowData})}),e.jsx(ge,{value:"charts",children:e.jsxs(R,{children:[e.jsxs(Y,{children:[e.jsx(Q,{children:"Chord Charts"}),e.jsx(rt,{children:"View chord charts for your setlist songs"})]}),e.jsx(L,{children:e.jsx("p",{className:"text-muted-foreground",children:"Chord charts will be displayed here for each song in your setlist."})})]})}),e.jsx(ge,{value:"technical",children:e.jsxs(R,{children:[e.jsx(Y,{children:e.jsx(Q,{children:"Technical Requirements"})}),e.jsx(L,{children:e.jsxs("div",{className:"space-y-4",children:[(b=s==null?void 0:s.technicalRider)!=null&&b.allowAssignedTalentAccess?e.jsxs(E,{variant:"outline",className:"w-full",children:[e.jsx(Cs,{className:"h-4 w-4 mr-2"}),"Download Technical Rider PDF"]}):e.jsx("div",{className:"p-4 bg-muted rounded-md",children:e.jsx("p",{className:"text-sm text-muted-foreground text-center",children:"Technical rider download is restricted. Contact the event organizer for technical requirements."})}),e.jsxs(E,{variant:"outline",className:"w-full",children:[e.jsx(To,{className:"h-4 w-4 mr-2"}),"View Stage Plot"]})]})})]})})]}),g==="dj"&&e.jsxs(e.Fragment,{children:[e.jsx(ge,{value:"tracks",children:e.jsx(T1,{bookingId:a,songs:((j=h.workflowData)==null?void 0:j.djSongs)||[]})}),e.jsx(ge,{value:"spleeter",children:e.jsxs(R,{children:[e.jsxs(Y,{children:[e.jsx(Q,{children:"Stem Separation Tools"}),e.jsx(rt,{children:"Use AI-powered Spleeter to separate tracks into stems for mixing"})]}),e.jsx(L,{children:e.jsx(T1,{bookingId:a,songs:((S=h.workflowData)==null?void 0:S.djSongs)||[]})})]})})]}),g==="visual_professional"&&e.jsxs(e.Fragment,{children:[e.jsx(ge,{value:"shooting-guide",children:e.jsxs(R,{children:[e.jsxs(Y,{children:[e.jsx(Q,{children:"Shooting Guide"}),e.jsx(rt,{children:"Photography and videography guidelines for this event"})]}),e.jsx(L,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(q,{children:"Key Moments to Capture"}),e.jsxs("ul",{className:"list-disc list-inside text-sm text-muted-foreground",children:[e.jsx("li",{children:"Artist entrances and exits"}),e.jsx("li",{children:"Crowd reactions during key songs"}),e.jsx("li",{children:"Special effects and lighting moments"}),e.jsx("li",{children:"Behind-the-scenes preparation"})]})]}),e.jsxs("div",{children:[e.jsx(q,{children:"Technical Settings"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Recommended camera settings and equipment list will be provided here."})]})]})})]})}),e.jsx(ge,{value:"stage-layout",children:e.jsxs(R,{children:[e.jsx(Y,{children:e.jsx(Q,{children:"Stage Layout & Positioning"})}),e.jsx(L,{children:e.jsx("img",{src:`/api/bookings/${a}/stage-plot`,alt:"Stage Plot",className:"w-full rounded-lg border"})})]})})]}),e.jsx(ge,{value:"mediahub",children:e.jsx(wX,{bookingId:a})}),e.jsx(ge,{value:"contracts",children:e.jsxs(R,{children:[e.jsxs(Y,{children:[e.jsx(Q,{children:"Contracts"}),e.jsx(rt,{children:"View and sign performance contracts"})]}),e.jsx(L,{children:e.jsx("div",{className:"space-y-4",children:((T=(k=h.workflowData)==null?void 0:k.contracts)==null?void 0:T.length)>0?h.workflowData.contracts.map((w,P)=>e.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium",children:w.type||"Performance Agreement"}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Status: ",w.status||"Pending"]})]}),e.jsxs(E,{variant:"outline",size:"sm",children:[e.jsx(Ns,{className:"h-4 w-4 mr-1"}),"View"]})]},P)):e.jsx("p",{className:"text-muted-foreground",children:"No contracts available yet."})})})]})}),e.jsx(ge,{value:"payment",children:e.jsxs(R,{children:[e.jsxs(Y,{children:[e.jsx(Q,{children:"Payment Details"}),e.jsx(rt,{children:"Track payment status and schedule"})]}),e.jsx(L,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx(q,{children:"Total Amount"}),e.jsx("p",{className:"text-2xl font-bold",children:h.finalPrice?`$${h.finalPrice}`:"TBD"})]}),e.jsx(X,{variant:((A=h.workflowData)==null?void 0:A.paymentStatus)==="paid"?"default":"secondary",children:((C=h.workflowData)==null?void 0:C.paymentStatus)||"Pending"})]}),e.jsx(ss,{}),e.jsxs("div",{children:[e.jsx(q,{children:"Payment Schedule"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"50% deposit upon contract signing, 50% on event day"})]})]})})]})})]}),e.jsx(bX,{open:o,onOpenChange:d,bookingId:a,currentPrice:h.finalPrice,onSuccess:()=>{d(!1),i.invalidateQueries({queryKey:["booking-details",a]})}})]})}const CX=t=>{switch(t){case 1:return e.jsx(ns,{className:"h-4 w-4 text-yellow-600"});case 2:return e.jsx(Bt,{className:"h-4 w-4 text-blue-600"});case 3:return e.jsx(Ue,{className:"h-4 w-4 text-purple-600"});case 4:return e.jsx(Ue,{className:"h-4 w-4 text-purple-400"});case 5:return e.jsx(jn,{className:"h-4 w-4 text-blue-600"});case 6:return e.jsx(jn,{className:"h-4 w-4 text-blue-400"});case 7:return e.jsx(Os,{className:"h-4 w-4 text-green-600"});case 8:return e.jsx(Os,{className:"h-4 w-4 text-green-400"});case 9:return e.jsx(gn,{className:"h-4 w-4 text-pink-500"});default:return e.jsx(Ze,{className:"h-4 w-4 text-gray-500"})}},kX=(t,s)=>{const n=Array.isArray(s)?s.find(a=>a.id===t):null;return n?n.name:"Unknown"},AX=t=>{switch(t){case 1:return"bg-yellow-100 text-yellow-800 border-yellow-200";case 2:return"bg-blue-100 text-blue-800 border-blue-200";case 3:return"bg-purple-100 text-purple-800 border-purple-200";case 4:return"bg-purple-50 text-purple-600 border-purple-200";case 5:return"bg-blue-100 text-blue-800 border-blue-200";case 6:return"bg-blue-50 text-blue-600 border-blue-200";case 7:return"bg-green-100 text-green-800 border-green-200";case 8:return"bg-green-50 text-green-600 border-green-200";case 9:return"bg-pink-100 text-pink-800 border-pink-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}};function PX(){var y;const[,t]=As(),{user:s}=_s(),[n,a]=N.useState(""),[r,i]=N.useState(""),[l,c]=N.useState(null),[o,d]=N.useState("view"),{data:h}=ke({queryKey:["/api/roles"]}),{data:u=[],isLoading:m,refetch:p}=ke({queryKey:["/api/users/all"],enabled:!!s&&[1,2].includes(s.roleId)}),g=u.filter(f=>{var S,k;const b=!n||((S=f.fullName)==null?void 0:S.toLowerCase().includes(n.toLowerCase()))||((k=f.email)==null?void 0:k.toLowerCase().includes(n.toLowerCase())),j=!r||r==="all"||f.roleId.toString()===r;return b&&j}),x=f=>{c(f),d("view")},v=f=>{c(f),d("edit")};return e.jsxs(qt,{children:[e.jsxs("div",{className:"container mx-auto px-4 py-8 space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs(E,{variant:"outline",size:"sm",onClick:()=>t("/dashboard"),children:[e.jsx(Rn,{className:"h-4 w-4 mr-2"}),"Back to Dashboard"]}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold",children:"Platform Users"}),e.jsx("p",{className:"text-muted-foreground",children:"Comprehensive user management system"})]})]}),e.jsxs(X,{variant:"outline",className:"text-primary border-primary",children:[e.jsx(Bt,{className:"h-3 w-3 mr-1"}),(s==null?void 0:s.roleId)===1?"Superadmin":"Admin"," Access"]})]}),e.jsxs(R,{children:[e.jsx(Y,{children:e.jsxs(Q,{className:"flex items-center gap-2",children:[e.jsx(to,{className:"h-5 w-5"}),"User Filters & Search"]})}),e.jsx(L,{children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx(Bs,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),e.jsx($,{placeholder:"Search by name or email...",value:n,onChange:f=>a(f.target.value),className:"pl-9"})]}),e.jsxs(Re,{value:r,onValueChange:i,children:[e.jsx(Me,{children:e.jsx(Oe,{placeholder:"Filter by role"})}),e.jsxs(_e,{children:[e.jsx(U,{value:"all",children:"All Roles"}),Array.isArray(h)&&h.map(f=>e.jsx(U,{value:f.id.toString(),children:f.name},f.id))]})]}),e.jsxs(E,{onClick:()=>t("/register"),className:"w-full",children:[e.jsx(ta,{className:"h-4 w-4 mr-2"}),"Create New User"]})]})})]}),e.jsxs(R,{children:[e.jsx(Y,{children:e.jsxs(Q,{className:"flex items-center gap-2",children:[e.jsx(Ze,{className:"h-5 w-5"}),"All Platform Users (",g.length,")"]})}),e.jsx(L,{children:m?e.jsx("div",{className:"text-center py-8",children:e.jsx("div",{className:"animate-pulse",children:"Loading users..."})}):g.length>0?e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:g.map(f=>e.jsx(R,{className:"hover:shadow-md transition-shadow",children:e.jsx(L,{className:"p-4",children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"font-semibold text-lg truncate",children:f.fullName||"No Name"}),e.jsx("p",{className:"text-sm text-muted-foreground truncate",children:f.email})]}),e.jsxs(X,{className:AX(f.roleId),children:[CX(f.roleId),e.jsx("span",{className:"ml-1",children:kX(f.roleId,h||[])})]})]}),e.jsxs("div",{className:"text-sm",children:[e.jsxs("p",{className:"text-muted-foreground",children:["Status: ",e.jsx("span",{className:f.status==="active"?"text-green-600":"text-red-600",children:f.status||"unknown"})]}),e.jsxs("p",{className:"text-muted-foreground",children:["ID: ",f.id]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(E,{size:"sm",variant:"outline",onClick:()=>x(f),className:"flex-1",children:[e.jsx(Ns,{className:"h-3 w-3 mr-1"}),"View"]}),((s==null?void 0:s.roleId)===1||(s==null?void 0:s.roleId)===2&&![1,2].includes(f.roleId))&&e.jsxs(E,{size:"sm",onClick:()=>v(f),className:"flex-1",children:[e.jsx($s,{className:"h-3 w-3 mr-1"}),"Edit"]})]})]})})},f.id))}):e.jsxs("div",{className:"text-center py-8",children:[e.jsx(Ze,{className:"h-12 w-12 mx-auto text-muted-foreground mb-4"}),e.jsx("p",{className:"text-muted-foreground",children:"No users match your current filters"})]})})]})]}),l&&e.jsx(Wp,{open:!!l,onOpenChange:f=>{f||c(null)},userId:(y=l.id)==null?void 0:y.toString(),mode:o})]})}function TX(){const[t,s]=N.useState({search:"",category:"",location:"",compensationType:"",isRemote:null}),[n,a]=N.useState(1),{data:r,isLoading:i}=ke({queryKey:["/api/marketplace/opportunities",t,n],queryFn:async()=>{const h=new URLSearchParams({page:n.toString(),limit:"12",...t.search&&{search:t.search},...t.category&&{category:t.category},...t.location&&{location:t.location},...t.compensationType&&{compensationType:t.compensationType},...t.isRemote!==null&&{isRemote:t.isRemote.toString()}}),u=await fetch(`/api/marketplace/opportunities?${h}`);if(!u.ok)throw new Error("Failed to fetch opportunities");return u.json()}}),{data:l}=ke({queryKey:["/api/marketplace/categories"],queryFn:async()=>{const h=await fetch("/api/marketplace/categories");if(!h.ok)throw new Error("Failed to fetch categories");return h.json()}}),c=(h,u)=>{s(m=>({...m,[h]:u})),a(1)},o=()=>{s({search:"",category:"",location:"",compensationType:"",isRemote:null}),a(1)},d=(h,u)=>{const m={paid:"bg-green-100 text-green-800",unpaid:"bg-gray-100 text-gray-800",revenue_share:"bg-blue-100 text-blue-800",experience:"bg-purple-100 text-purple-800"},p={paid:u?`$${u}`:"Paid",unpaid:"Unpaid",revenue_share:"Revenue Share",experience:"Experience"};return e.jsx(X,{className:m[h],children:p[h]})};return e.jsxs("div",{className:"container mx-auto px-4 py-8",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold mb-2",children:"OppHub Marketplace"}),e.jsx("p",{className:"text-gray-600",children:"Discover real opportunities in the music industry"})]}),e.jsxs(R,{className:"mb-6",children:[e.jsx(Y,{children:e.jsxs(Q,{className:"flex items-center gap-2",children:[e.jsx(to,{className:"h-5 w-5"}),"Search & Filter"]})}),e.jsxs(L,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx(Bs,{className:"absolute left-3 top-3 h-4 w-4 text-gray-400"}),e.jsx($,{placeholder:"Search opportunities...",value:t.search,onChange:h=>c("search",h.target.value),className:"pl-10"})]}),e.jsxs(Re,{value:t.category,onValueChange:h=>c("category",h),children:[e.jsx(Me,{children:e.jsx(Oe,{placeholder:"All Categories"})}),e.jsxs(_e,{children:[e.jsx(U,{value:"",children:"All Categories"}),l==null?void 0:l.map(h=>e.jsx(U,{value:h.id.toString(),children:h.name},h.id))]})]}),e.jsx($,{placeholder:"Location...",value:t.location,onChange:h=>c("location",h.target.value)}),e.jsxs(Re,{value:t.compensationType,onValueChange:h=>c("compensationType",h),children:[e.jsx(Me,{children:e.jsx(Oe,{placeholder:"All Types"})}),e.jsxs(_e,{children:[e.jsx(U,{value:"",children:"All Types"}),e.jsx(U,{value:"paid",children:"Paid"}),e.jsx(U,{value:"unpaid",children:"Unpaid"}),e.jsx(U,{value:"revenue_share",children:"Revenue Share"}),e.jsx(U,{value:"experience",children:"Experience"})]})]})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("label",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",checked:t.isRemote===!0,onChange:h=>c("isRemote",h.target.checked?!0:null),className:"rounded border-gray-300"}),"Remote Only"]}),e.jsx(E,{variant:"outline",onClick:o,children:"Clear Filters"})]})]})]}),e.jsxs("div",{className:"mb-6 flex justify-between items-center",children:[e.jsxs("div",{className:"text-sm text-gray-600",children:[(r==null?void 0:r.pagination.total)||0," opportunities found"]}),e.jsx(E,{asChild:!0,children:e.jsx(Lt,{href:"/submit-opportunity",children:"Submit Opportunity"})})]}),i?e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[...Array(6)].map((h,u)=>e.jsxs(R,{className:"animate-pulse",children:[e.jsxs(Y,{children:[e.jsx("div",{className:"h-4 bg-gray-200 rounded w-3/4"}),e.jsx("div",{className:"h-3 bg-gray-200 rounded w-1/2"})]}),e.jsx(L,{children:e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"h-3 bg-gray-200 rounded"}),e.jsx("div",{className:"h-3 bg-gray-200 rounded w-5/6"})]})})]},u))}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:r==null?void 0:r.opportunities.map(h=>e.jsxs(R,{className:"hover:shadow-lg transition-shadow",children:[e.jsxs(Y,{children:[e.jsx(Q,{className:"text-lg line-clamp-2",children:h.title}),e.jsxs(rt,{className:"flex items-center gap-1",children:[e.jsx(Fo,{className:"h-4 w-4"}),h.organizationName]})]}),e.jsxs(L,{className:"space-y-4",children:[e.jsx("p",{className:"text-sm text-gray-600 line-clamp-3",children:h.description}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx(Dn,{className:"h-4 w-4 text-gray-400"}),h.location,h.isRemote&&e.jsx(X,{variant:"secondary",children:"Remote"})]}),e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx(dt,{className:"h-4 w-4 text-gray-400"}),"Deadline: ",new Date(h.deadline).toLocaleDateString()]}),e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx(It,{className:"h-4 w-4 text-gray-400"}),d(h.compensationType,h.amount)]}),e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx(Ze,{className:"h-4 w-4 text-gray-400"}),h.applicationCount," applications"]})]}),e.jsxs("div",{className:"flex justify-between items-center pt-4",children:[e.jsx(X,{variant:"outline",children:h.categoryName}),e.jsx(E,{asChild:!0,size:"sm",children:e.jsx(Lt,{href:`/opportunities/${h.id}`,children:"View Details"})})]})]})]},h.id))}),(r==null?void 0:r.pagination)&&r.pagination.totalPages>1&&e.jsxs("div",{className:"mt-8 flex justify-center gap-2",children:[e.jsx(E,{variant:"outline",disabled:n===1,onClick:()=>a(n-1),children:"Previous"}),e.jsxs("span",{className:"flex items-center px-4",children:["Page ",n," of ",r.pagination.totalPages]}),e.jsx(E,{variant:"outline",disabled:n===r.pagination.totalPages,onClick:()=>a(n+1),children:"Next"})]})]})}const EX=({title:t,organization:s,location:n,deadline:a,compensationType:r,amount:i,description:l,category:c,isRemote:o,applicationCount:d,isFeatured:h=!1,tags:u=[],onApply:m,onView:p,onFavorite:g,onShare:x,className:v})=>{const y={paid:"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-300",unpaid:"bg-gray-100 text-gray-800 dark:bg-gray-900 dark:text-gray-300",revenue_share:"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-300",experience:"bg-purple-100 text-purple-800 dark:bg-purple-900 dark:text-purple-300"},f={paid:i||"Paid",unpaid:"Unpaid",revenue_share:"Revenue Share",experience:"Experience"};return e.jsxs(R,{className:Je("relative transition-all duration-200 hover:shadow-md cursor-pointer",h&&"ring-2 ring-yellow-400 shadow-lg",v),children:[h&&e.jsxs("div",{className:"absolute -top-2 -right-2 bg-yellow-400 text-yellow-900 px-2 py-1 rounded-full text-xs font-semibold flex items-center",children:[e.jsx(Rt,{className:"h-3 w-3 mr-1"}),"Featured"]}),e.jsx(Y,{className:"pb-3",children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx(Q,{className:"text-lg mb-1 line-clamp-2 hover:text-primary",children:t}),e.jsx("p",{className:"text-sm text-muted-foreground font-medium",children:s})]}),e.jsx(X,{variant:"outline",className:"ml-2 text-xs",children:c})]})}),e.jsxs(L,{className:"space-y-4",children:[e.jsx("p",{className:"text-sm text-muted-foreground line-clamp-3",children:l}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center text-sm text-muted-foreground",children:[e.jsx(Dn,{className:"h-4 w-4 mr-2 flex-shrink-0"}),e.jsx("span",{children:n}),o&&e.jsx(X,{variant:"secondary",className:"ml-2 text-xs",children:"Remote"})]}),e.jsxs("div",{className:"flex items-center text-sm text-muted-foreground",children:[e.jsx(dt,{className:"h-4 w-4 mr-2 flex-shrink-0"}),e.jsxs("span",{children:["Deadline: ",new Date(a).toLocaleDateString()]})]}),e.jsxs("div",{className:"flex items-center text-sm",children:[e.jsx(It,{className:"h-4 w-4 mr-2 flex-shrink-0"}),e.jsx(X,{className:Je("text-xs",y[r]),children:f[r]})]})]}),u.length>0&&e.jsxs("div",{className:"flex flex-wrap gap-1",children:[u.slice(0,3).map(b=>e.jsx(X,{variant:"outline",className:"text-xs",children:b},b)),u.length>3&&e.jsxs(X,{variant:"outline",className:"text-xs",children:["+",u.length-3," more"]})]}),e.jsxs("div",{className:"flex items-center justify-between pt-2 border-t",children:[e.jsxs("div",{className:"flex items-center text-xs text-muted-foreground",children:[e.jsx(Ze,{className:"h-3 w-3 mr-1"}),e.jsxs("span",{children:[d," applications"]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[g&&e.jsx(E,{variant:"ghost",size:"sm",onClick:g,children:e.jsx(gn,{className:"h-4 w-4"})}),x&&e.jsx(E,{variant:"ghost",size:"sm",onClick:x,children:e.jsx(Dy,{className:"h-4 w-4"})}),e.jsxs(E,{variant:"outline",size:"sm",onClick:p,children:[e.jsx(Ns,{className:"h-4 w-4 mr-1"}),"View"]}),e.jsx(E,{size:"sm",onClick:m,children:"Apply Now"})]})]})]})]})};function MX(){const[t,s]=lt.useState(""),[n,a]=lt.useState(""),[r,i]=lt.useState(""),[l,c]=lt.useState(""),[o,d]=lt.useState(""),[h,u]=lt.useState(null),[m,p]=lt.useState(!1);Tt();const{addToast:g}=cI(),{data:x,isLoading:v,error:y,refetch:f}=ke({queryKey:["/api/marketplace/opportunities",{search:t,category:n,compensation:r,location:l,remote:o}],queryFn:()=>xe(`/api/marketplace/opportunities?${new URLSearchParams({...t&&{search:t},...n&&{category:n},...r&&{compensationType:r},...l&&{location:l},...o&&{isRemote:o}}).toString()}`),staleTime:5*60*1e3}),{data:b}=ke({queryKey:["/api/marketplace/categories"],queryFn:()=>xe("/api/marketplace/categories"),staleTime:30*60*1e3}),j=Xe({mutationFn:w=>xe("/api/marketplace/applications",{method:"POST",body:JSON.stringify(w)}),onSuccess:()=>{g({type:"success",title:"Application Submitted!",description:"Your application has been submitted successfully. You will hear back soon."}),p(!1),f()},onError:w=>{g({type:"error",title:"Application Failed",description:w.message||"Failed to submit application. Please try again."})}});lt.useEffect(()=>{const w=setTimeout(()=>{f()},300);return()=>clearTimeout(w)},[t,n,r,l,o]);const S=(x==null?void 0:x.opportunities)||[],k=x==null?void 0:x.pagination,T=w=>{u(w),p(!0)},A=w=>{h&&j.mutate({opportunityId:h.id,...w})},C=[{title:"Active Opportunities",value:(k==null?void 0:k.total)||0,icon:Os,change:{value:12,period:"last month"},trend:"up"},{title:"New This Week",value:Math.floor(((k==null?void 0:k.total)||0)*.3),icon:Is,trend:"up"},{title:"Remote Available",value:S.filter(w=>w.isRemote).length,icon:Dn,trend:"stable"},{title:"Categories",value:(b==null?void 0:b.length)||0,icon:rd,trend:"stable"}];return e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 dark:from-gray-900 dark:to-gray-800",children:[e.jsx("div",{className:"bg-white dark:bg-gray-900 shadow-sm border-b",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 py-8",children:e.jsxs("div",{className:"text-center",children:[e.jsx("h1",{className:"text-4xl font-bold text-gray-900 dark:text-white mb-4",children:"OppHub Marketplace"}),e.jsx("p",{className:"text-xl text-gray-600 dark:text-gray-300 mb-8",children:"Discover your next music industry opportunity"}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 max-w-4xl mx-auto",children:C.map((w,P)=>e.jsx(R,{className:"text-center",children:e.jsxs(L,{className:"p-4",children:[e.jsx(w.icon,{className:"h-8 w-8 mx-auto mb-2 text-primary"}),e.jsx("div",{className:"text-2xl font-bold",children:w.value}),e.jsx("div",{className:"text-sm text-muted-foreground",children:w.title})]})},P))})]})})}),e.jsx("div",{className:"max-w-7xl mx-auto px-4 py-8",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-8",children:[e.jsx("div",{className:"lg:col-span-1",children:e.jsxs(R,{className:"sticky top-4",children:[e.jsx(Y,{children:e.jsxs(Q,{className:"flex items-center",children:[e.jsx(to,{className:"h-5 w-5 mr-2"}),"Filters"]})}),e.jsxs(L,{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Search"}),e.jsxs("div",{className:"relative",children:[e.jsx(Bs,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),e.jsx($,{placeholder:"Search opportunities...",value:t,onChange:w=>s(w.target.value),className:"pl-10"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Category"}),e.jsxs(Re,{value:n,onValueChange:a,children:[e.jsx(Me,{children:e.jsx(Oe,{placeholder:"All categories"})}),e.jsxs(_e,{children:[e.jsx(U,{value:"",children:"All Categories"}),b==null?void 0:b.map(w=>e.jsx(U,{value:w.id.toString(),children:w.name},w.id))]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Compensation"}),e.jsxs(Re,{value:r,onValueChange:i,children:[e.jsx(Me,{children:e.jsx(Oe,{placeholder:"Any compensation"})}),e.jsxs(_e,{children:[e.jsx(U,{value:"",children:"Any Compensation"}),e.jsx(U,{value:"paid",children:"Paid"}),e.jsx(U,{value:"unpaid",children:"Unpaid"}),e.jsx(U,{value:"revenue_share",children:"Revenue Share"}),e.jsx(U,{value:"experience",children:"Experience"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Location"}),e.jsxs("div",{className:"relative",children:[e.jsx(Dn,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),e.jsx($,{placeholder:"City, State, or Remote",value:l,onChange:w=>c(w.target.value),className:"pl-10"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Work Type"}),e.jsxs(Re,{value:o,onValueChange:d,children:[e.jsx(Me,{children:e.jsx(Oe,{placeholder:"Any work type"})}),e.jsxs(_e,{children:[e.jsx(U,{value:"",children:"Any Work Type"}),e.jsx(U,{value:"true",children:"Remote Only"}),e.jsx(U,{value:"false",children:"On-site Only"})]})]})]}),e.jsx($a,{variant:"outline",className:"w-full",onClick:()=>{s(""),a(""),i(""),c(""),d("")},children:"Clear Filters"})]})]})}),e.jsxs("div",{className:"lg:col-span-3",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h2",{className:"text-2xl font-semibold",children:v?"Loading...":`${(k==null?void 0:k.total)||0} Opportunities`}),k&&e.jsxs("div",{className:"text-sm text-muted-foreground",children:["Page ",k.page," of ",k.totalPages]})]}),y&&e.jsxs(R,{className:"p-8 text-center",children:[e.jsxs("div",{className:"text-red-500 mb-4",children:[e.jsx(Os,{className:"h-12 w-12 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-semibold",children:"Unable to Load Opportunities"}),e.jsx("p",{className:"text-sm text-muted-foreground mt-2",children:"We're having trouble connecting to our servers. Please try again."})]}),e.jsx($a,{onClick:()=>f(),children:"Try Again"})]}),v&&e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:Array.from({length:6}).map((w,P)=>e.jsx(BQ,{},P))}),!v&&!y&&S.length===0&&e.jsxs(R,{className:"p-12 text-center",children:[e.jsx(Bs,{className:"h-16 w-16 mx-auto text-muted-foreground mb-4"}),e.jsx("h3",{className:"text-xl font-semibold mb-2",children:"No Opportunities Found"}),e.jsx("p",{className:"text-muted-foreground mb-6",children:"Try adjusting your filters or search terms to find more opportunities."}),e.jsx($a,{onClick:()=>{s(""),a(""),i(""),c(""),d("")},children:"Clear All Filters"})]}),!v&&S.length>0&&e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:S.map(w=>e.jsx(EX,{id:w.id,title:w.title,organization:w.organizationName,location:w.location,deadline:w.deadline,compensationType:w.compensationType,amount:w.amount,description:w.description,category:w.categoryName,isRemote:w.isRemote,applicationCount:w.applicationCount,onApply:()=>T(w),onView:()=>{window.open(`/opportunities/${w.id}`,"_blank")},onFavorite:async()=>{try{if((await xe(`/api/opportunities/${w.id}/favorite`,{method:"POST"})).ok)g({type:"success",title:"Added to Favorites",description:"Opportunity saved to your favorites list."});else throw new Error("Failed to add to favorites")}catch(P){console.error("Error adding to favorites:",P),g({type:"error",title:"Error",description:"Failed to add to favorites. Please try again."})}},onShare:()=>{navigator.clipboard.writeText(window.location.origin+`/opportunities/${w.id}`),g({type:"success",title:"Link Copied",description:"Opportunity link copied to clipboard."})}},w.id))})]})]})}),e.jsx(I5,{open:m,onOpenChange:p,title:"Apply to Opportunity",description:h?`Submit your application for "${h.title}"`:"",size:"lg",children:h&&e.jsx(_X,{opportunity:h,onSubmit:A,isSubmitting:j.isPending})})]})}const _X=({opportunity:t,onSubmit:s,isSubmitting:n})=>{const[a,r]=lt.useState({coverLetter:"",portfolioLinks:"",experience:"",availability:"",additionalNotes:""}),i=l=>{l.preventDefault(),s(a)};return e.jsxs("form",{onSubmit:i,className:"space-y-6",children:[e.jsx(R,{children:e.jsxs(L,{className:"p-4",children:[e.jsx("h4",{className:"font-semibold",children:t.title}),e.jsx("p",{className:"text-sm text-muted-foreground",children:t.organizationName}),e.jsxs("div",{className:"flex items-center space-x-4 mt-2 text-xs text-muted-foreground",children:[e.jsxs("span",{className:"flex items-center",children:[e.jsx(Dn,{className:"h-3 w-3 mr-1"}),t.location]}),e.jsxs("span",{className:"flex items-center",children:[e.jsx(dt,{className:"h-3 w-3 mr-1"}),new Date(t.deadline).toLocaleDateString()]})]})]})}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Cover Letter *"}),e.jsx("textarea",{required:!0,className:"w-full min-h-[120px] p-3 border rounded-md resize-none",placeholder:"Tell us why you're perfect for this opportunity...",value:a.coverLetter,onChange:l=>r(c=>({...c,coverLetter:l.target.value}))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Portfolio Links"}),e.jsx($,{placeholder:"https://your-portfolio.com, https://soundcloud.com/yourprofile",value:a.portfolioLinks,onChange:l=>r(c=>({...c,portfolioLinks:l.target.value}))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Relevant Experience"}),e.jsx("textarea",{className:"w-full min-h-[80px] p-3 border rounded-md resize-none",placeholder:"Describe your relevant experience...",value:a.experience,onChange:l=>r(c=>({...c,experience:l.target.value}))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Availability"}),e.jsx($,{placeholder:"e.g., Weekends, Evenings, Full-time",value:a.availability,onChange:l=>r(c=>({...c,availability:l.target.value}))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Additional Notes"}),e.jsx("textarea",{className:"w-full min-h-[60px] p-3 border rounded-md resize-none",placeholder:"Any additional information...",value:a.additionalNotes,onChange:l=>r(c=>({...c,additionalNotes:l.target.value}))})]})]}),e.jsxs("div",{className:"flex justify-end space-x-3 pt-4 border-t",children:[e.jsx($a,{type:"button",variant:"outline",onClick:()=>r({coverLetter:"",portfolioLinks:"",experience:"",availability:"",additionalNotes:""}),children:"Clear Form"}),e.jsx($a,{type:"submit",loading:n,loadingText:"Submitting Application...",disabled:!a.coverLetter.trim(),children:"Submit Application"})]})]})},RX=pe.object({title:pe.string().min(10,"Title must be at least 10 characters").max(200,"Title must be under 200 characters"),description:pe.string().min(50,"Description must be at least 50 characters").max(2e3,"Description must be under 2000 characters"),organizationName:pe.string().min(2,"Organization name required").max(100,"Organization name must be under 100 characters"),contactEmail:pe.string().email("Valid email required"),contactPhone:pe.string().optional(),website:pe.string().url("Valid URL required").optional().or(pe.literal("")),location:pe.string().min(2,"Location required").max(100,"Location must be under 100 characters"),deadline:pe.string().min(1,"Deadline required"),compensationType:pe.enum(["paid","unpaid","revenue_share","experience"],{required_error:"Please select a compensation type"}),amount:pe.string().optional(),requirements:pe.string().min(20,"Requirements must be at least 20 characters").max(1e3,"Requirements must be under 1000 characters"),applicationProcess:pe.string().min(20,"Application process must be at least 20 characters").max(1e3,"Application process must be under 1000 characters"),categoryId:pe.number({required_error:"Please select a category"}),isRemote:pe.boolean().default(!1),submitterNotes:pe.string().optional()});function OX(){const[,t]=As(),{toast:s}=nt(),n=Tt(),{data:a,isLoading:r}=ke({queryKey:["/api/marketplace/categories"],queryFn:async()=>{const d=await fetch("/api/marketplace/categories");if(!d.ok)throw new Error("Failed to fetch categories");return d.json()}}),i=Cn({resolver:kn(RX),defaultValues:{title:"",description:"",organizationName:"",contactEmail:"",contactPhone:"",website:"",location:"",deadline:"",compensationType:"unpaid",amount:"",requirements:"",applicationProcess:"",isRemote:!1,submitterNotes:""}}),l=Xe({mutationFn:async d=>{const h=await fetch("/api/marketplace/opportunities",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(d)});if(!h.ok){const u=await h.json();throw new Error(u.message||"Failed to submit opportunity")}return h.json()},onSuccess:()=>{s({title:"Success!",description:"Your opportunity has been submitted and is pending review."}),n.invalidateQueries({queryKey:["/api/marketplace/opportunities"]}),t("/opphub")},onError:d=>{s({title:"Error",description:d.message,variant:"destructive"})}}),c=d=>{l.mutate(d)},o=i.watch("compensationType");return e.jsxs("div",{className:"container mx-auto px-4 py-8 max-w-4xl",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx(E,{variant:"ghost",asChild:!0,className:"mb-4",children:e.jsxs(Lt,{href:"/opphub",children:[e.jsx(Rn,{className:"h-4 w-4 mr-2"}),"Back to Marketplace"]})}),e.jsx("h1",{className:"text-3xl font-bold mb-2",children:"Submit an Opportunity"}),e.jsx("p",{className:"text-gray-600",children:"Share a music industry opportunity with the community. All submissions are reviewed before publication."})]}),e.jsxs(R,{children:[e.jsxs(Y,{children:[e.jsx(Q,{children:"Opportunity Details"}),e.jsx(rt,{children:"Provide detailed information about the opportunity you're sharing"})]}),e.jsx(L,{children:e.jsx(On,{...i,children:e.jsxs("form",{onSubmit:i.handleSubmit(c),className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsx($e,{control:i.control,name:"title",render:({field:d})=>e.jsxs(Fe,{className:"md:col-span-2",children:[e.jsx(qe,{children:"Opportunity Title *"}),e.jsx(Le,{children:e.jsx($,{placeholder:"e.g., Session Musician Needed for Recording Project",...d})}),e.jsx(ze,{})]})}),e.jsx($e,{control:i.control,name:"organizationName",render:({field:d})=>e.jsxs(Fe,{children:[e.jsx(qe,{children:"Organization/Company *"}),e.jsx(Le,{children:e.jsx($,{placeholder:"Organization name",...d})}),e.jsx(ze,{})]})}),e.jsx($e,{control:i.control,name:"categoryId",render:({field:d})=>{var h;return e.jsxs(Fe,{children:[e.jsx(qe,{children:"Category *"}),e.jsxs(Re,{onValueChange:u=>d.onChange(parseInt(u)),value:((h=d.value)==null?void 0:h.toString())||"",disabled:r,children:[e.jsx(Le,{children:e.jsx(Me,{children:e.jsx(Oe,{placeholder:"Select category"})})}),e.jsx(_e,{children:a==null?void 0:a.map(u=>e.jsx(U,{value:u.id.toString(),children:u.name},u.id))})]}),e.jsx(ze,{})]})}})]}),e.jsx($e,{control:i.control,name:"description",render:({field:d})=>e.jsxs(Fe,{children:[e.jsx(qe,{children:"Description *"}),e.jsx(Le,{children:e.jsx(mt,{placeholder:"Provide a detailed description of the opportunity...",className:"min-h-[120px]",...d})}),e.jsx(ze,{})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsx($e,{control:i.control,name:"location",render:({field:d})=>e.jsxs(Fe,{children:[e.jsx(qe,{children:"Location *"}),e.jsx(Le,{children:e.jsx($,{placeholder:"City, State/Country",...d})}),e.jsx(ze,{})]})}),e.jsx($e,{control:i.control,name:"isRemote",render:({field:d})=>e.jsxs(Fe,{className:"flex flex-row items-start space-x-3 space-y-0 rounded-md border p-4",children:[e.jsx(Le,{children:e.jsx(hs,{checked:d.value,onCheckedChange:d.onChange})}),e.jsxs("div",{className:"space-y-1 leading-none",children:[e.jsx(qe,{children:"Remote Work Available"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"This opportunity can be completed remotely"})]})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsx($e,{control:i.control,name:"compensationType",render:({field:d})=>e.jsxs(Fe,{children:[e.jsx(qe,{children:"Compensation Type *"}),e.jsxs(Re,{onValueChange:d.onChange,value:d.value,children:[e.jsx(Le,{children:e.jsx(Me,{children:e.jsx(Oe,{placeholder:"Select compensation type"})})}),e.jsxs(_e,{children:[e.jsx(U,{value:"paid",children:"Paid"}),e.jsx(U,{value:"unpaid",children:"Unpaid"}),e.jsx(U,{value:"revenue_share",children:"Revenue Share"}),e.jsx(U,{value:"experience",children:"Experience/Credit"})]})]}),e.jsx(ze,{})]})}),o==="paid"&&e.jsx($e,{control:i.control,name:"amount",render:({field:d})=>e.jsxs(Fe,{children:[e.jsx(qe,{children:"Amount"}),e.jsx(Le,{children:e.jsx($,{placeholder:"e.g., $500 or $50/hour",...d})}),e.jsx(ze,{})]})})]}),e.jsx($e,{control:i.control,name:"deadline",render:({field:d})=>e.jsxs(Fe,{children:[e.jsx(qe,{children:"Application Deadline *"}),e.jsx(Le,{children:e.jsx($,{type:"date",min:new Date().toISOString().split("T")[0],...d})}),e.jsx(ze,{})]})}),e.jsx($e,{control:i.control,name:"requirements",render:({field:d})=>e.jsxs(Fe,{children:[e.jsx(qe,{children:"Requirements *"}),e.jsx(Le,{children:e.jsx(mt,{placeholder:"List the skills, experience, or qualifications needed...",className:"min-h-[100px]",...d})}),e.jsx(ze,{})]})}),e.jsx($e,{control:i.control,name:"applicationProcess",render:({field:d})=>e.jsxs(Fe,{children:[e.jsx(qe,{children:"Application Process *"}),e.jsx(Le,{children:e.jsx(mt,{placeholder:"Explain how interested people should apply...",className:"min-h-[100px]",...d})}),e.jsx(ze,{})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsx($e,{control:i.control,name:"contactEmail",render:({field:d})=>e.jsxs(Fe,{children:[e.jsx(qe,{children:"Contact Email *"}),e.jsx(Le,{children:e.jsx($,{type:"email",placeholder:"contact@example.com",...d})}),e.jsx(ze,{})]})}),e.jsx($e,{control:i.control,name:"contactPhone",render:({field:d})=>e.jsxs(Fe,{children:[e.jsx(qe,{children:"Phone Number (Optional)"}),e.jsx(Le,{children:e.jsx($,{placeholder:"+1 (555) 123-4567",...d})}),e.jsx(ze,{})]})})]}),e.jsx($e,{control:i.control,name:"website",render:({field:d})=>e.jsxs(Fe,{children:[e.jsx(qe,{children:"Website (Optional)"}),e.jsx(Le,{children:e.jsx($,{placeholder:"https://yourwebsite.com",...d})}),e.jsx(ze,{})]})}),e.jsx($e,{control:i.control,name:"submitterNotes",render:({field:d})=>e.jsxs(Fe,{children:[e.jsx(qe,{children:"Additional Notes (Optional)"}),e.jsx(Le,{children:e.jsx(mt,{placeholder:"Any additional information for our review team...",className:"min-h-[80px]",...d})}),e.jsx(ze,{})]})}),e.jsxs("div",{className:"flex justify-end space-x-4",children:[e.jsx(E,{variant:"outline",type:"button",asChild:!0,children:e.jsx(Lt,{href:"/opphub",children:"Cancel"})}),e.jsx(E,{type:"submit",disabled:l.isPending,className:"min-w-[120px]",children:l.isPending?"Submitting...":e.jsxs(e.Fragment,{children:[e.jsx(gr,{className:"h-4 w-4 mr-2"}),"Submit Opportunity"]})})]})]})})})]})]})}const DX=pe.object({coverLetter:pe.string().min(100,"Cover letter must be at least 100 characters").max(2e3,"Cover letter must be under 2000 characters"),portfolioLinks:pe.string().optional(),experience:pe.string().min(50,"Experience description must be at least 50 characters").max(1e3,"Experience must be under 1000 characters"),availability:pe.string().min(10,"Availability must be at least 10 characters").max(500,"Availability must be under 500 characters"),additionalNotes:pe.string().optional()});function IX(){const{id:t}=yd();As();const{toast:s}=nt(),n=Tt(),[a,r]=N.useState(!1),{data:i,isLoading:l}=ke({queryKey:[`/api/marketplace/opportunities/${t}`],queryFn:async()=>{const g=await fetch(`/api/marketplace/opportunities/${t}`);if(!g.ok)throw g.status===404?new Error("Opportunity not found"):new Error("Failed to fetch opportunity");return g.json()},enabled:!!t}),{data:c}=ke({queryKey:["/api/marketplace/my-applications"],queryFn:async()=>{const g=await fetch("/api/marketplace/my-applications",{credentials:"include"});return g.ok?g.json():[]}}),o=Cn({resolver:kn(DX),defaultValues:{coverLetter:"",portfolioLinks:"",experience:"",availability:"",additionalNotes:""}}),d=Xe({mutationFn:async g=>{const x=g.portfolioLinks?g.portfolioLinks.split(",").map(y=>y.trim()).filter(y=>y):[],v=await fetch("/api/marketplace/applications",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({opportunityId:parseInt(t),...g,portfolioLinks:x})});if(!v.ok){const y=await v.json();throw new Error(y.message||"Failed to submit application")}return v.json()},onSuccess:()=>{s({title:"Application Submitted!",description:"Your application has been sent to the organization."}),r(!1),o.reset(),n.invalidateQueries({queryKey:["/api/marketplace/my-applications"]})},onError:g=>{s({title:"Error",description:g.message,variant:"destructive"})}}),h=g=>{d.mutate(g)},u=(g,x)=>{const v={paid:"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-300",unpaid:"bg-gray-100 text-gray-800 dark:bg-gray-800 dark:text-gray-300",revenue_share:"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-300",experience:"bg-purple-100 text-purple-800 dark:bg-purple-900 dark:text-purple-300"},y={paid:x?`$${x}`:"Paid",unpaid:"Unpaid",revenue_share:"Revenue Share",experience:"Experience"};return e.jsx(X,{className:v[g],children:y[g]})};if(l)return e.jsx("div",{className:"container mx-auto px-4 py-8 max-w-4xl",children:e.jsxs("div",{className:"animate-pulse space-y-6",children:[e.jsx("div",{className:"h-8 bg-gray-200 rounded w-1/4"}),e.jsx("div",{className:"h-12 bg-gray-200 rounded w-3/4"}),e.jsx("div",{className:"h-64 bg-gray-200 rounded"})]})});if(!i)return e.jsxs("div",{className:"container mx-auto px-4 py-8 max-w-4xl text-center",children:[e.jsx("h1",{className:"text-2xl font-bold mb-4",children:"Opportunity Not Found"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"The opportunity you're looking for doesn't exist or has been removed."}),e.jsx(E,{asChild:!0,children:e.jsx(Lt,{href:"/opphub",children:"Back to Marketplace"})})]});const m=c==null?void 0:c.some(g=>g.opportunityTitle===i.title),p=new Date(i.deadline)<new Date;return e.jsxs("div",{className:"container mx-auto px-4 py-8 max-w-4xl",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx(E,{variant:"ghost",asChild:!0,className:"mb-4",children:e.jsxs(Lt,{href:"/opphub",children:[e.jsx(Rn,{className:"h-4 w-4 mr-2"}),"Back to Marketplace"]})}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h1",{className:"text-3xl font-bold",children:i.title}),e.jsxs("div",{className:"flex flex-wrap items-center gap-4 text-sm text-gray-600",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(Fo,{className:"h-4 w-4"}),i.organizationName]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(Dn,{className:"h-4 w-4"}),i.location,i.isRemote&&e.jsx(X,{variant:"secondary",className:"ml-2",children:"Remote"})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(Qt,{className:"h-4 w-4"}),"Posted ",Ow(new Date(i.createdAt),{addSuffix:!0})]})]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(dt,{className:"h-4 w-4 text-gray-400"}),e.jsxs("span",{className:`font-medium ${p?"text-red-600":"text-green-600"}`,children:["Deadline: ",new Date(i.deadline).toLocaleDateString(),p&&" (Expired)"]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(It,{className:"h-4 w-4 text-gray-400"}),u(i.compensationType,i.amount)]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ze,{className:"h-4 w-4 text-gray-400"}),e.jsxs("span",{children:[i.applicationCount||0," applications"]})]})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[e.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[e.jsxs(R,{children:[e.jsx(Y,{children:e.jsx(Q,{children:"Description"})}),e.jsx(L,{children:e.jsx("p",{className:"whitespace-pre-wrap text-gray-700 dark:text-gray-300",children:i.description})})]}),e.jsxs(R,{children:[e.jsx(Y,{children:e.jsx(Q,{children:"Requirements"})}),e.jsx(L,{children:e.jsx("p",{className:"whitespace-pre-wrap text-gray-700 dark:text-gray-300",children:i.requirements})})]}),e.jsxs(R,{children:[e.jsx(Y,{children:e.jsx(Q,{children:"How to Apply"})}),e.jsx(L,{children:e.jsx("p",{className:"whitespace-pre-wrap text-gray-700 dark:text-gray-300",children:i.applicationProcess})})]}),a&&!m&&!p&&e.jsxs(R,{children:[e.jsxs(Y,{children:[e.jsx(Q,{children:"Apply for this Opportunity"}),e.jsx(rt,{children:"Fill out the form below to submit your application"})]}),e.jsx(L,{children:e.jsx(On,{...o,children:e.jsxs("form",{onSubmit:o.handleSubmit(h),className:"space-y-6",children:[e.jsx($e,{control:o.control,name:"coverLetter",render:({field:g})=>e.jsxs(Fe,{children:[e.jsx(qe,{children:"Cover Letter *"}),e.jsx(Le,{children:e.jsx(mt,{placeholder:"Explain why you're interested and what makes you a good fit...",className:"min-h-[120px]",...g})}),e.jsx(ze,{})]})}),e.jsx($e,{control:o.control,name:"experience",render:({field:g})=>e.jsxs(Fe,{children:[e.jsx(qe,{children:"Relevant Experience *"}),e.jsx(Le,{children:e.jsx(mt,{placeholder:"Describe your relevant experience and background...",className:"min-h-[100px]",...g})}),e.jsx(ze,{})]})}),e.jsx($e,{control:o.control,name:"portfolioLinks",render:({field:g})=>e.jsxs(Fe,{children:[e.jsx(qe,{children:"Portfolio Links (Optional)"}),e.jsx(Le,{children:e.jsx($,{placeholder:"Separate multiple links with commas",...g})}),e.jsx(ze,{})]})}),e.jsx($e,{control:o.control,name:"availability",render:({field:g})=>e.jsxs(Fe,{children:[e.jsx(qe,{children:"Availability *"}),e.jsx(Le,{children:e.jsx(mt,{placeholder:"When are you available to start? Any scheduling constraints?",className:"min-h-[80px]",...g})}),e.jsx(ze,{})]})}),e.jsx($e,{control:o.control,name:"additionalNotes",render:({field:g})=>e.jsxs(Fe,{children:[e.jsx(qe,{children:"Additional Notes (Optional)"}),e.jsx(Le,{children:e.jsx(mt,{placeholder:"Any additional information you'd like to share...",className:"min-h-[80px]",...g})}),e.jsx(ze,{})]})}),e.jsxs("div",{className:"flex justify-end space-x-4",children:[e.jsx(E,{variant:"outline",type:"button",onClick:()=>r(!1),children:"Cancel"}),e.jsx(E,{type:"submit",disabled:d.isPending,className:"min-w-[120px]",children:d.isPending?"Submitting...":e.jsxs(e.Fragment,{children:[e.jsx(gr,{className:"h-4 w-4 mr-2"}),"Submit Application"]})})]})]})})})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs(R,{children:[e.jsx(Y,{children:e.jsx(Q,{children:"Apply Now"})}),e.jsx(L,{className:"space-y-4",children:p?e.jsxs("div",{className:"text-center py-4",children:[e.jsx("p",{className:"text-red-600 font-medium mb-2",children:"This opportunity has expired"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Applications are no longer being accepted"})]}):m?e.jsxs("div",{className:"text-center py-4",children:[e.jsx(X,{className:"mb-2",children:"Applied"}),e.jsx("p",{className:"text-sm text-gray-500",children:"You have already applied to this opportunity"})]}):e.jsx(E,{className:"w-full",onClick:()=>r(!0),disabled:a,children:a?"Form Open Below":"Apply Now"})})]}),e.jsxs(R,{children:[e.jsx(Y,{children:e.jsx(Q,{children:"Contact"})}),e.jsxs(L,{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx(vn,{className:"h-4 w-4 text-gray-400"}),e.jsx("a",{href:`mailto:${i.contactEmail}`,className:"text-blue-600 hover:underline",children:i.contactEmail})]}),i.contactPhone&&e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx(op,{className:"h-4 w-4 text-gray-400"}),e.jsx("a",{href:`tel:${i.contactPhone}`,className:"text-blue-600 hover:underline",children:i.contactPhone})]}),i.website&&e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx(is,{className:"h-4 w-4 text-gray-400"}),e.jsx("a",{href:i.website,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:underline",children:"Visit Website"})]})]})]}),e.jsxs(R,{children:[e.jsx(Y,{children:e.jsx(Q,{children:"Details"})}),e.jsxs(L,{className:"space-y-3 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Posted:"}),e.jsx("br",{}),Ow(new Date(i.createdAt),{addSuffix:!0})]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Deadline:"}),e.jsx("br",{}),new Date(i.deadline).toLocaleDateString()]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Location:"}),e.jsx("br",{}),i.location,i.isRemote&&" (Remote possible)"]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Compensation:"}),e.jsx("br",{}),u(i.compensationType,i.amount)]})]})]})]})]})]})}function LX(){const{user:t}=N.useContext(s0);return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-slate-100 dark:from-slate-900 dark:to-slate-800",children:e.jsx("div",{className:"container mx-auto py-8",children:e.jsx(o5,{userId:t==null?void 0:t.id})})})}function FX(){const{toast:t}=nt(),[s,n]=N.useState("lilioctave"),{data:a,isLoading:r}=ke({queryKey:["/api/opphub/growth-metrics"],refetchInterval:3e4}),{data:i,isLoading:l}=ke({queryKey:["/api/opphub/opportunity-matching",s],queryFn:()=>xe("/api/opphub/opportunity-matching",{method:"POST",body:{artist_id:s}}).then(u=>u.json())}),c=Xe({mutationFn:u=>xe("/api/opphub/market-research",{method:"POST",body:u}).then(m=>m.json()),onSuccess:()=>{t({title:"Market Research Generated",description:"AI analysis complete. Check your dashboard for insights."}),MC.invalidateQueries({queryKey:["/api/opphub/growth-metrics"]})}}),o=Xe({mutationFn:u=>xe("/api/opphub/generate-pitch",{method:"POST",body:u}).then(m=>m.json()),onSuccess:()=>{t({title:"Pitch Generated",description:"AI-powered pitch ready for review and customization."})}}),d=u=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:0,maximumFractionDigits:0}).format(u),h=u=>new Intl.NumberFormat("en-US").format(u);return r?e.jsx("div",{className:"p-6 space-y-6",children:e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[...Array(4)].map((u,m)=>e.jsx(R,{className:"animate-pulse",children:e.jsxs(L,{className:"p-6",children:[e.jsx("div",{className:"h-4 bg-gray-300 rounded w-3/4 mb-2"}),e.jsx("div",{className:"h-6 bg-gray-300 rounded w-1/2"})]})},m))})}):e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:"OppHub Strategic Growth"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Multi-Million Dollar Growth Strategy Dashboard"})]}),e.jsxs(X,{variant:"secondary",className:"text-lg px-4 py-2",children:[e.jsx(Fu,{className:"h-4 w-4 mr-2"}),"12-Month Target: $2M+"]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsx(R,{children:e.jsxs(L,{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Total Revenue"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:d((a==null?void 0:a.total_revenue.current)||0)}),e.jsxs("p",{className:"text-sm text-gray-500",children:["Target: ",d((a==null?void 0:a.total_revenue.target)||2e6)]})]}),e.jsx(It,{className:"h-8 w-8 text-emerald-500"})]}),e.jsx(qs,{value:((a==null?void 0:a.total_revenue.progress)||0)*100,className:"mt-3"})]})}),e.jsx(R,{children:e.jsxs(L,{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"L-L Octave Bookings"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:d((a==null?void 0:a.artist_bookings.lili_octave.current)||0)}),e.jsxs("p",{className:"text-sm text-gray-500",children:["Target: ",d((a==null?void 0:a.artist_bookings.lili_octave.target)||3e5)]})]}),e.jsx(Ue,{className:"h-8 w-8 text-purple-500"})]}),e.jsx(qs,{value:((a==null?void 0:a.artist_bookings.lili_octave.progress)||0)*100,className:"mt-3"})]})}),e.jsx(R,{children:e.jsxs(L,{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Social Media Followers"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:h((a==null?void 0:a.social_media.total_followers)||0)}),e.jsxs("p",{className:"text-sm text-gray-500",children:["Target: ",h((a==null?void 0:a.social_media.target)||1e5)]})]}),e.jsx(Ze,{className:"h-8 w-8 text-blue-500"})]}),e.jsx(qs,{value:((a==null?void 0:a.social_media.progress)||0)*100,className:"mt-3"})]})}),e.jsx(R,{children:e.jsxs(L,{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Brand Partnerships"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:(a==null?void 0:a.brand_partnerships.secured)||0}),e.jsxs("p",{className:"text-sm text-gray-500",children:["Target: ",(a==null?void 0:a.brand_partnerships.target)||5]})]}),e.jsx(la,{className:"h-8 w-8 text-orange-500"})]}),e.jsxs("div",{className:"mt-3 text-sm text-gray-600",children:[(a==null?void 0:a.brand_partnerships.in_pipeline)||0," in pipeline"]})]})})]}),e.jsxs(Ut,{defaultValue:"opportunities",className:"space-y-6",children:[e.jsxs(jt,{className:"grid w-full grid-cols-4",children:[e.jsx(Ne,{value:"opportunities",children:"Revenue Opportunities"}),e.jsx(Ne,{value:"research",children:"Market Research"}),e.jsx(Ne,{value:"analytics",children:"Growth Analytics"}),e.jsx(Ne,{value:"automation",children:"AI Automation"})]}),e.jsx(ge,{value:"opportunities",className:"space-y-6",children:e.jsxs(R,{children:[e.jsx(Y,{children:e.jsxs(Q,{className:"flex items-center",children:[e.jsx(Es,{className:"h-5 w-5 mr-2"}),"Matched Revenue Opportunities"]})}),e.jsx(L,{children:l?e.jsx("div",{className:"space-y-4",children:[...Array(3)].map((u,m)=>e.jsxs("div",{className:"animate-pulse",children:[e.jsx("div",{className:"h-4 bg-gray-300 rounded w-3/4 mb-2"}),e.jsx("div",{className:"h-3 bg-gray-300 rounded w-1/2"})]},m))}):e.jsx("div",{className:"space-y-4",children:i==null?void 0:i.matched_opportunities.map(u=>e.jsxs("div",{className:"border rounded-lg p-4 space-y-3",children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-lg",children:u.title}),e.jsxs("p",{className:"text-sm text-gray-600",children:[u.category,"  Match Score: ",(u.match_score*100).toFixed(0),"%"]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"font-bold text-emerald-600",children:d(u.estimated_revenue)}),e.jsxs("p",{className:"text-sm text-gray-500",children:["Due: ",new Date(u.deadline).toLocaleDateString()]})]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium mb-2",children:"Requirements:"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:u.requirements.map((m,p)=>e.jsx(X,{variant:"outline",children:m},p))})]}),e.jsxs("div",{className:"flex items-center justify-between pt-2",children:[e.jsxs("div",{className:"text-sm text-gray-600",children:["Contact: ",u.contact_info]}),e.jsxs(E,{onClick:()=>o.mutate({artist_id:s,opportunity_id:u.id,pitch_type:u.category}),disabled:o.isPending,children:[e.jsx(Ob,{className:"h-4 w-4 mr-2"}),"Generate AI Pitch"]})]})]},u.id))})})]})}),e.jsx(ge,{value:"research",className:"space-y-6",children:e.jsxs(R,{children:[e.jsx(Y,{children:e.jsxs(Q,{className:"flex items-center",children:[e.jsx(wn,{className:"h-5 w-5 mr-2"}),"AI Market Research"]})}),e.jsx(L,{children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs(E,{onClick:()=>c.mutate({artist_id:s,research_type:"competitive_analysis"}),disabled:c.isPending,className:"p-6 h-auto flex-col space-y-2",children:[e.jsx(Is,{className:"h-8 w-8"}),e.jsx("span",{children:"Competitive Analysis"}),e.jsx("span",{className:"text-sm opacity-75",children:"Analyze similar artists' success"})]}),e.jsxs(E,{onClick:()=>c.mutate({artist_id:s,research_type:"trend_analysis"}),disabled:c.isPending,className:"p-6 h-auto flex-col space-y-2",children:[e.jsx(In,{className:"h-8 w-8"}),e.jsx("span",{children:"Trend Analysis"}),e.jsx("span",{className:"text-sm opacity-75",children:"Identify emerging opportunities"})]}),e.jsxs(E,{onClick:()=>c.mutate({artist_id:s,research_type:"brand_opportunities"}),disabled:c.isPending,className:"p-6 h-auto flex-col space-y-2",children:[e.jsx(gn,{className:"h-8 w-8"}),e.jsx("span",{children:"Brand Opportunities"}),e.jsx("span",{className:"text-sm opacity-75",children:"Find matching brand partnerships"})]})]})})]})}),e.jsx(ge,{value:"analytics",className:"space-y-6",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs(R,{children:[e.jsx(Y,{children:e.jsx(Q,{children:"Social Media Growth"})}),e.jsx(L,{children:e.jsx("div",{className:"space-y-4",children:Object.entries((a==null?void 0:a.social_media.platforms)||{}).map(([u,m])=>e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"capitalize font-medium",children:u}),e.jsx("span",{className:"font-bold",children:h(m)})]},u))})})]}),e.jsxs(R,{children:[e.jsx(Y,{children:e.jsx(Q,{children:"Sync Licensing Progress"})}),e.jsx(L,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{children:"Placements Secured"}),e.jsx("span",{className:"font-bold text-emerald-600",children:(a==null?void 0:a.sync_licensing.placements)||0})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{children:"Submissions Made"}),e.jsx("span",{className:"font-bold",children:(a==null?void 0:a.sync_licensing.submissions)||0})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{children:"Target Placements"}),e.jsx("span",{className:"font-bold text-gray-600",children:(a==null?void 0:a.sync_licensing.target)||10})]}),e.jsx(qs,{value:((a==null?void 0:a.sync_licensing.placements)||0)/((a==null?void 0:a.sync_licensing.target)||10)*100,className:"mt-2"})]})})]})]})}),e.jsx(ge,{value:"automation",className:"space-y-6",children:e.jsxs(R,{children:[e.jsx(Y,{children:e.jsxs(Q,{className:"flex items-center",children:[e.jsx(Ob,{className:"h-5 w-5 mr-2"}),"AI Automation Status"]})}),e.jsx(L,{children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"font-semibold",children:"Active Automation"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between p-3 bg-emerald-50 dark:bg-emerald-950 rounded-lg",children:[e.jsx("span",{children:"Opportunity Scanning"}),e.jsx(X,{variant:"secondary",className:"bg-emerald-100 text-emerald-800",children:"Active"})]}),e.jsxs("div",{className:"flex items-center justify-between p-3 bg-blue-50 dark:bg-blue-950 rounded-lg",children:[e.jsx("span",{children:"Market Research"}),e.jsx(X,{variant:"secondary",className:"bg-blue-100 text-blue-800",children:"Scheduled"})]}),e.jsxs("div",{className:"flex items-center justify-between p-3 bg-purple-50 dark:bg-purple-950 rounded-lg",children:[e.jsx("span",{children:"Pitch Generation"}),e.jsx(X,{variant:"secondary",className:"bg-purple-100 text-purple-800",children:"On-Demand"})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"font-semibold",children:"Next Actions"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"p-3 border rounded-lg",children:[e.jsx("p",{className:"font-medium",children:"Social Media Content"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Generate viral content strategy for L-L Octave"})]}),e.jsxs("div",{className:"p-3 border rounded-lg",children:[e.jsx("p",{className:"font-medium",children:"Brand Outreach"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Target ethical beauty and wellness brands"})]}),e.jsxs("div",{className:"p-3 border rounded-lg",children:[e.jsx("p",{className:"font-medium",children:"Festival Applications"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Submit to Caribbean and world music festivals"})]})]})]})]})})]})})]})]})}function qX(){const[t,s]=N.useState(null),[n,a]=N.useState(!0),[r,i]=N.useState(new Date),[l,c]=N.useState(""),o=async()=>{try{const m=await fetch("/api/opphub/health");if(m.ok){const p=await m.json();s(p),i(new Date)}}catch(m){console.error("Failed to fetch health data:",m)}finally{a(!1)}},d=async()=>{try{c("Testing error reporting...");const m=await fetch("/api/opphub/report-error",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({error:"Test error from health dashboard",context:"health_dashboard_test"})});if(m.ok){const p=await m.json();c(`Error reported successfully: ${p.pattern||"Pattern learned"}`),setTimeout(o,1e3)}}catch{c("Failed to report test error")}};N.useEffect(()=>{o();const m=setInterval(o,3e4);return()=>clearInterval(m)},[]);const h=m=>m>=99.9?"text-green-600":m>=99?"text-yellow-600":"text-red-600",u=m=>m===0?"text-green-600":m<1?"text-yellow-600":"text-red-600";return n?e.jsx("div",{className:"p-6 space-y-6",children:e.jsxs("div",{className:"text-center",children:[e.jsx(_n,{className:"w-8 h-8 animate-spin mx-auto mb-4"}),e.jsx("p",{children:"Loading OppHub Health Monitor..."})]})}):e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white flex items-center gap-2",children:[e.jsx(Bt,{className:"w-6 h-6 text-emerald-600"}),"OppHub Site Reliability Monitor"]}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Real-time platform health with proactive error prevention"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(E,{onClick:o,variant:"outline",size:"sm",children:[e.jsx(_n,{className:"w-4 h-4 mr-2"}),"Refresh"]}),e.jsxs(E,{onClick:d,variant:"outline",size:"sm",children:[e.jsx(ys,{className:"w-4 h-4 mr-2"}),"Test Error Reporting"]})]})]}),l&&e.jsxs(Ua,{children:[e.jsx(ys,{className:"w-4 h-4"}),e.jsx(sr,{children:l})]}),t&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsxs(R,{children:[e.jsx(Y,{className:"pb-2",children:e.jsx(Q,{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"System Uptime"})}),e.jsx(L,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("span",{className:`text-2xl font-bold ${h(t.uptime)}`,children:[t.uptime.toFixed(1),"%"]}),e.jsx(ct,{className:"w-8 h-8 text-green-500"})]})})]}),e.jsxs(R,{children:[e.jsx(Y,{className:"pb-2",children:e.jsx(Q,{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Error Rate"})}),e.jsx(L,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("span",{className:`text-2xl font-bold ${u(t.errorRate)}`,children:[t.errorRate.toFixed(2),"%"]}),e.jsx(Is,{className:"w-8 h-8 text-blue-500"})]})})]}),e.jsxs(R,{children:[e.jsx(Y,{className:"pb-2",children:e.jsx(Q,{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Active Users"})}),e.jsx(L,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-2xl font-bold text-blue-600",children:t.activeUsers}),e.jsx(Ze,{className:"w-8 h-8 text-purple-500"})]})})]}),e.jsxs(R,{children:[e.jsx(Y,{className:"pb-2",children:e.jsx(Q,{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Response Time"})}),e.jsx(L,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("span",{className:"text-2xl font-bold text-green-600",children:[t.responseTime,"ms"]}),e.jsx(Qt,{className:"w-8 h-8 text-green-500"})]})})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs(R,{children:[e.jsx(Y,{children:e.jsxs(Q,{className:"flex items-center gap-2",children:[e.jsx(Jn,{className:"w-5 h-5"}),"Error Pattern Analysis"]})}),e.jsxs(L,{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Total Patterns Learned:"}),e.jsx(X,{variant:"secondary",children:t.totalErrorPatterns})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Critical Errors (Last Hour):"}),e.jsx(X,{variant:t.criticalErrorsLastHour>0?"destructive":"default",children:t.criticalErrorsLastHour})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("h4",{className:"text-sm font-medium",children:"Top Error Types:"}),t.topErrorTypes.map(([m,p])=>e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm capitalize",children:m}),e.jsxs(X,{variant:"outline",children:[p," occurrences"]})]},m))]})]})]}),e.jsxs(R,{children:[e.jsx(Y,{children:e.jsxs(Q,{className:"flex items-center gap-2",children:[e.jsx(Bt,{className:"w-5 h-5"}),"Prevention Strategies"]})}),e.jsx(L,{children:e.jsx("div",{className:"space-y-3",children:t.preventionStrategies.map((m,p)=>e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(ct,{className:"w-4 h-4 text-green-500 mt-0.5 flex-shrink-0"}),e.jsx("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:m})]},p))})})]})]}),e.jsxs(R,{children:[e.jsx(Y,{children:e.jsx(Q,{children:"System Status"})}),e.jsxs(L,{children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"text-center p-4 bg-green-50 dark:bg-green-900/20 rounded-lg",children:[e.jsx(ct,{className:"w-8 h-8 text-green-500 mx-auto mb-2"}),e.jsx("h3",{className:"font-medium text-green-800 dark:text-green-200",children:"Healthy"}),e.jsx("p",{className:"text-sm text-green-600 dark:text-green-400",children:"All systems operational"})]}),e.jsxs("div",{className:"text-center p-4 bg-blue-50 dark:bg-blue-900/20 rounded-lg",children:[e.jsx(_n,{className:"w-8 h-8 text-blue-500 mx-auto mb-2"}),e.jsx("h3",{className:"font-medium text-blue-800 dark:text-blue-200",children:"Monitoring Active"}),e.jsx("p",{className:"text-sm text-blue-600 dark:text-blue-400",children:"Error learning enabled"})]}),e.jsxs("div",{className:"text-center p-4 bg-purple-50 dark:bg-purple-900/20 rounded-lg",children:[e.jsx(Bt,{className:"w-8 h-8 text-purple-500 mx-auto mb-2"}),e.jsx("h3",{className:"font-medium text-purple-800 dark:text-purple-200",children:"Protected"}),e.jsx("p",{className:"text-sm text-purple-600 dark:text-purple-400",children:"Proactive prevention active"})]})]}),e.jsxs("div",{className:"mt-4 text-center text-sm text-gray-500 dark:text-gray-400",children:["Last updated: ",r.toLocaleTimeString()]})]})]})]})]})}function $X(){return e.jsx("div",{className:"min-h-screen w-full flex items-center justify-center bg-gray-50",children:e.jsx(R,{className:"w-full max-w-md mx-4",children:e.jsxs(L,{className:"pt-6",children:[e.jsxs("div",{className:"flex mb-4 gap-2",children:[e.jsx(on,{className:"h-8 w-8 text-red-500"}),e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"404 Page Not Found"})]}),e.jsx("p",{className:"mt-4 text-sm text-gray-600",children:"Did you forget to add the page to the router?"})]})})})}const Im=pe.object({referenceNumber:pe.number(),name:pe.string().min(1,"Name is required"),address:pe.string().min(1,"Address is required"),phone:pe.string().optional(),proAffiliation:pe.string().optional(),nationalId:pe.string().optional(),dateOfBirth:pe.string().optional(),email:pe.string().email().optional(),ipiNumber:pe.string().optional()}),BX=Im.extend({proIpiNumber:pe.string().optional(),songwritingPercentage:pe.number().min(0).max(100).default(100),role:pe.string().optional()}),UX=Im.extend({proIpiNumber:pe.string().optional(),musicOwnership:pe.number().min(0).max(100).default(0),role:pe.string().optional()}),zX=Im.extend({labelName:pe.string().min(1,"Label name is required"),proIpiNumber:pe.string().optional(),artist:pe.string().min(1,"Artist name is required")}),VX=Im.extend({studioName:pe.string().min(1,"Studio name is required")}),GX=Im.extend({publisherName:pe.string().min(1,"Publisher name is required"),proIpiNumber:pe.string().optional(),publishingPercentage:pe.number().min(0).max(100)}),WX=pe.object({referenceNumber:pe.number(),name:pe.string().min(1,"Name is required"),email:pe.string().email().min(1,"Email is required"),notes:pe.string().optional(),workOwnership:pe.number().min(0).max(100)}),HX=pe.object({referenceNumber:pe.number(),name:pe.string().min(1,"Name is required"),email:pe.string().email().min(1,"Email is required"),roleNotes:pe.string().optional(),proIpiNumber:pe.string().optional(),workOwnership:pe.number().min(0).max(100).default(0)}),KX=pe.object({songTitle:pe.string().min(1,"Song title is required"),songReference:pe.string().min(1,"Song reference is required"),agreementDate:pe.string().optional(),writerComposers:pe.array(BX).min(1,"At least one writer/composer required"),recordingArtists:pe.array(UX).min(1,"At least one recording artist required"),labels:pe.array(zX).min(1,"At least one label required"),studios:pe.array(VX).min(1,"At least one studio required"),publishers:pe.array(GX).min(1,"At least one publisher required"),executiveProducers:pe.array(WX).optional(),otherContributors:pe.array(HX).optional()});function YX({onSuccess:t}){var C,w;const{toast:s}=nt(),n=Tt(),[a,r]=N.useState("overview"),i=P=>{var B,O,z,F,K;const M=[],I=(((B=P.writerComposers)==null?void 0:B.reduce((D,G)=>D+(G.songwritingPercentage||0),0))||0)+(((O=P.otherContributors)==null?void 0:O.filter(D=>{var G,H;return((G=D.roleNotes)==null?void 0:G.toLowerCase().includes("songwriter"))||((H=D.roleNotes)==null?void 0:H.toLowerCase().includes("author"))}).reduce((D,G)=>D+(G.workOwnership||0),0))||0),W=(((z=P.recordingArtists)==null?void 0:z.reduce((D,G)=>D+(G.musicOwnership||0),0))||0)+(((F=P.otherContributors)==null?void 0:F.filter(D=>{var G;return(G=D.roleNotes)==null?void 0:G.toLowerCase().includes("melody")}).reduce((D,G)=>D+(G.workOwnership||0),0))||0),_=((K=P.otherContributors)==null?void 0:K.filter(D=>{var G,H,V;return((G=D.roleNotes)==null?void 0:G.toLowerCase().includes("beat"))||((H=D.roleNotes)==null?void 0:H.toLowerCase().includes("production"))||((V=D.roleNotes)==null?void 0:V.toLowerCase().includes("producer"))}).reduce((D,G)=>D+(G.workOwnership||0),0))||0;return I>50&&M.push({type:"error",category:"Songwriting/Authors (50%)",message:`Songwriting percentages ${I}% of 50% total`,limit:50,current:I}),W>25&&M.push({type:"error",category:"Melody Creators (25%)",message:`Melody creation percentages ${W}% of 25% total`,limit:25,current:W}),_>25&&M.push({type:"error",category:"Music Composition (25%)",message:`Music composition percentages ${_}% of 25% total`,limit:25,current:_}),I>45&&I<=50&&M.push({type:"warning",category:"Songwriting/Authors (50%)",message:`Songwriting percentages ${I}% of 50% total (approaching limit)`,limit:50,current:I}),M},l=Cn({resolver:kn(KX),defaultValues:{songTitle:"",songReference:"",agreementDate:new Date().toISOString().split("T")[0],writerComposers:[{referenceNumber:1,name:"LIANNE MARILDA MARISA LETANG",address:`BATH ESTATE,
ROSEAU, DOMINICA`,proIpiNumber:"ASCAP/1057495241",songwritingPercentage:100,role:"Songwriter/Composer",email:"lilioctave@waitumusic.com",phone:"",nationalId:"",dateOfBirth:"",ipiNumber:"",proAffiliation:""}],recordingArtists:[{referenceNumber:1,name:"LI-LI OCTAVE",address:`BATH ESTATE,
ROSEAU, DOMINICA`,proIpiNumber:"ASCAP/1057495241",musicOwnership:100,role:"Recording Artist",email:"lilioctave@waitumusic.com",phone:"",nationalId:"",dateOfBirth:"",ipiNumber:"",proAffiliation:""}],labels:[{referenceNumber:1,name:"Wai'tuMusic",labelName:"Wai'tuMusic",address:`C/o Krystallion Incorporated
P.O. Box 1350
Roseau, Dominica`,phone:"+1 (767) 265-2833 / 315-1110",proIpiNumber:"ASCAP/1050116716",artist:"LI-LI OCTAVE",email:"admin@waitumusic.com",nationalId:"",dateOfBirth:"",ipiNumber:"",proAffiliation:""}],studios:[{referenceNumber:1,name:"FUNKI DATA MUSIC",studioName:"FUNKI DATA MUSIC",address:`19TH STREET,
CANEFIELD, DOMINICA`,phone:"",email:"",proAffiliation:"",nationalId:"",dateOfBirth:"",ipiNumber:""}],publishers:[{referenceNumber:1,name:"WAI'TUMUSIC",publisherName:"WAI'TUMUSIC",address:`C/O KRYSTALLION INCORPORATED
P.O. BOX 1350, ROSEAU, DOMINICA`,proIpiNumber:"ASCAP/1050116716",publishingPercentage:100,phone:"",email:"admin@waitumusic.com",nationalId:"",dateOfBirth:"",ipiNumber:"",proAffiliation:""}],executiveProducers:[],otherContributors:[]}}),c=cl({control:l.control,name:"writerComposers"}),o=cl({control:l.control,name:"recordingArtists"}),d=cl({control:l.control,name:"labels"}),h=cl({control:l.control,name:"studios"}),u=cl({control:l.control,name:"publishers"}),m=cl({control:l.control,name:"executiveProducers"}),p=cl({control:l.control,name:"otherContributors"}),g=l.watch(),x=i(g),v=Xe({mutationFn:P=>(localStorage.getItem("token"),xe("/api/splitsheet-create",{method:"POST",body:P})),onSuccess:P=>{s({title:"Splitsheet Created Successfully",description:"Your authentic splitsheet has been created and notifications sent."}),n.invalidateQueries({queryKey:["/api/user/splitsheets"]}),t==null||t()},onError:P=>{console.error("Mutation error:",P),s({title:"Failed to Create Splitsheet",description:P.message||"An error occurred while creating the splitsheet.",variant:"destructive"})}}),y=()=>{const P=l.watch("writerComposers");if(P&&P.length>0){const M=Math.floor(50/P.length),I=50-M*P.length;P.forEach((W,_)=>{const B=_===0?M+I:M;l.setValue(`writerComposers.${_}.songwritingPercentage`,B)}),s({title:"Percentages Auto-Divided",description:`Songwriting percentages automatically divided equally among ${P.length} writer(s). You can manually adjust if needed.`})}},f=()=>{const P=l.watch("recordingArtists");if(P&&P.length>0){const M=Math.floor(100/P.length),I=100-M*P.length;P.forEach((W,_)=>{const B=_===0?M+I:M;l.setValue(`recordingArtists.${_}.musicOwnership`,B)}),s({title:"Melody Percentages Auto-Divided",description:`Melody creation percentages automatically divided equally among ${P.length} recording artist(s).`})}},b=P=>{if(console.log("Form submission data:",P),console.log("Form validation errors:",l.formState.errors),console.log("Form is valid:",l.formState.isValid),console.log("Form is submitting:",l.formState.isSubmitting),!P.songTitle||!P.songReference){s({title:"Form Validation Error",description:"Song title and reference are required.",variant:"destructive"});return}v.mutate(P)},j=P=>{const M={writerComposers:c,recordingArtists:o,labels:d,studios:h,publishers:u,executiveProducers:m,otherContributors:p},I={writerComposers:{referenceNumber:(l.watch(P)||[]).length+1,name:"",address:"",proIpiNumber:"",songwritingPercentage:100,role:"",email:"",phone:"",nationalId:"",dateOfBirth:"",ipiNumber:"",proAffiliation:""},recordingArtists:{referenceNumber:(l.watch(P)||[]).length+1,name:"",address:"",proIpiNumber:"",musicOwnership:100,role:"",email:"",phone:"",nationalId:"",dateOfBirth:"",ipiNumber:"",proAffiliation:""},labels:{referenceNumber:(l.watch(P)||[]).length+1,name:"",labelName:"",address:"",artist:"",phone:"",proIpiNumber:"",email:"",nationalId:"",dateOfBirth:"",ipiNumber:"",proAffiliation:""},studios:{referenceNumber:(l.watch(P)||[]).length+1,name:"",studioName:"",address:"",phone:"",email:"",proAffiliation:"",nationalId:"",dateOfBirth:"",ipiNumber:""},publishers:{referenceNumber:(l.watch(P)||[]).length+1,name:"",publisherName:"",address:"",publishingPercentage:0,phone:"",proIpiNumber:"",email:"",nationalId:"",dateOfBirth:"",ipiNumber:"",proAffiliation:""},executiveProducers:{referenceNumber:(l.watch(P)||[]).length+1,name:"",email:"",notes:"",workOwnership:0},otherContributors:{referenceNumber:(l.watch(P)||[]).length+1,name:"",email:"",roleNotes:"",proIpiNumber:"",workOwnership:0}};M[P].append(I[P]),P==="writerComposers"?y():P==="recordingArtists"&&f()},S=(P,M)=>{const I={writerComposers:c,recordingArtists:o,labels:d,studios:h,publishers:u,executiveProducers:m,otherContributors:p},W=l.watch(P);W&&W.length>1&&(I[P].remove(M),P==="writerComposers"?setTimeout(()=>y(),100):P==="recordingArtists"&&setTimeout(()=>f(),100))},k=(P,M,I,W)=>e.jsxs(R,{children:[e.jsx(Y,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs(Q,{className:"text-sm",children:[W," - ",l.watch("songReference"),"-",M+1]}),e.jsx(E,{type:"button",variant:"destructive",size:"sm",onClick:()=>S(P,M),disabled:l.watch(P).length<=1,children:e.jsx(lp,{className:"h-4 w-4"})})]})}),e.jsx(L,{className:"space-y-4",children:e.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[e.jsx($e,{control:l.control,name:`${P}.${M}.name`,render:({field:_})=>e.jsxs(Fe,{children:[e.jsx(qe,{children:"Name"}),e.jsx(Le,{children:e.jsx($,{..._,placeholder:"Full legal name"})}),e.jsx(ze,{})]})}),P==="labels"&&e.jsx($e,{control:l.control,name:`${P}.${M}.labelName`,render:({field:_})=>e.jsxs(Fe,{children:[e.jsx(qe,{children:"Label Name"}),e.jsx(Le,{children:e.jsx($,{..._,placeholder:"Label business name"})}),e.jsx(ze,{})]})}),P==="studios"&&e.jsx($e,{control:l.control,name:`${P}.${M}.studioName`,render:({field:_})=>e.jsxs(Fe,{children:[e.jsx(qe,{children:"Studio Name"}),e.jsx(Le,{children:e.jsx($,{..._,placeholder:"Recording studio name",className:"mobile-input"})}),e.jsx(ze,{})]})}),P==="publishers"&&e.jsx($e,{control:l.control,name:`${P}.${M}.publisherName`,render:({field:_})=>e.jsxs(Fe,{children:[e.jsx(qe,{children:"Publisher Name"}),e.jsx(Le,{children:e.jsx($,{..._,placeholder:"Publishing company name",className:"mobile-input"})}),e.jsx(ze,{})]})}),e.jsx($e,{control:l.control,name:`${P}.${M}.address`,render:({field:_})=>e.jsxs(Fe,{children:[e.jsx(qe,{children:"Address"}),e.jsx(Le,{children:e.jsx($,{..._,placeholder:"Full address",className:"mobile-input"})}),e.jsx(ze,{})]})}),e.jsx($e,{control:l.control,name:`${P}.${M}.phone`,render:({field:_})=>e.jsxs(Fe,{children:[e.jsx(qe,{children:"Phone"}),e.jsx(Le,{children:e.jsx($,{..._,placeholder:"Phone number",className:"mobile-input"})}),e.jsx(ze,{})]})}),e.jsx($e,{control:l.control,name:`${P}.${M}.proAffiliation`,render:({field:_})=>e.jsxs(Fe,{children:[e.jsx(qe,{children:"PRO Affiliation"}),e.jsx(Le,{children:e.jsx($,{..._,placeholder:"e.g., ASCAP/1057495241",className:"mobile-input"})}),e.jsx(ze,{})]})}),P==="writerComposers"&&e.jsx($e,{control:l.control,name:`${P}.${M}.songwritingPercentage`,render:({field:_})=>e.jsxs(Fe,{children:[e.jsx(qe,{children:"Songwriting Percentage (%)"}),e.jsx(Le,{children:e.jsx($,{type:"number",min:"0",max:"100",..._,onChange:B=>_.onChange(Number(B.target.value)),placeholder:"Overall songwriting percentage",className:"mobile-input"})}),e.jsx(ze,{}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Total songwriting contribution (max 50% policy applies)"})]})}),P==="recordingArtists"&&e.jsx($e,{control:l.control,name:`${P}.${M}.musicOwnership`,render:({field:_})=>e.jsxs(Fe,{children:[e.jsx(qe,{children:"Melody Creation Percentage (%)"}),e.jsx(Le,{children:e.jsx($,{type:"number",min:"0",max:"100",..._,onChange:B=>_.onChange(Number(B.target.value)),placeholder:"Melody creation percentage",className:"mobile-input"})}),e.jsx(ze,{}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Melody creation contribution (max 25% policy applies)"})]})}),P==="labels"&&e.jsx($e,{control:l.control,name:`${P}.${M}.artist`,render:({field:_})=>e.jsxs(Fe,{children:[e.jsx(qe,{children:"Artist"}),e.jsx(Le,{children:e.jsx($,{..._,placeholder:"Artist represented"})}),e.jsx(ze,{})]})}),P==="publishers"&&e.jsx($e,{control:l.control,name:`${P}.${M}.publishingPercentage`,render:({field:_})=>e.jsxs(Fe,{children:[e.jsx(qe,{children:"Publishing Percentage (%)"}),e.jsx(Le,{children:e.jsx($,{type:"number",min:"0",max:"100",..._,onChange:B=>_.onChange(Number(B.target.value))})}),e.jsx(ze,{})]})})]})})]},M),T=(P,M)=>e.jsxs(R,{children:[e.jsx(Y,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs(Q,{className:"text-sm",children:["WM-SSA-EP - ",l.watch("songReference"),"-",P+1]}),e.jsx(E,{type:"button",variant:"ghost",size:"sm",onClick:()=>S("executiveProducers",P),className:"text-red-500 hover:text-red-700",children:e.jsx(Vt,{className:"h-4 w-4"})})]})}),e.jsx(L,{children:e.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[e.jsx($e,{control:l.control,name:`executiveProducers.${P}.name`,render:({field:I})=>e.jsxs(Fe,{children:[e.jsx(qe,{children:"Name"}),e.jsx(Le,{children:e.jsx($,{...I})}),e.jsx(ze,{})]})}),e.jsx($e,{control:l.control,name:`executiveProducers.${P}.email`,render:({field:I})=>e.jsxs(Fe,{children:[e.jsx(qe,{children:"Email"}),e.jsx(Le,{children:e.jsx($,{type:"email",...I})}),e.jsx(ze,{})]})}),e.jsx($e,{control:l.control,name:`executiveProducers.${P}.notes`,render:({field:I})=>e.jsxs(Fe,{children:[e.jsx(qe,{children:"Notes"}),e.jsx(Le,{children:e.jsx($,{...I})}),e.jsx(ze,{})]})}),e.jsx($e,{control:l.control,name:`executiveProducers.${P}.workOwnership`,render:({field:I})=>e.jsxs(Fe,{children:[e.jsx(qe,{children:"Work Ownership (%)"}),e.jsx(Le,{children:e.jsx($,{type:"number",min:"0",max:"100",...I,onChange:W=>I.onChange(Number(W.target.value))})}),e.jsx(ze,{})]})})]})})]},P),A=(P,M)=>e.jsxs(R,{children:[e.jsx(Y,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs(Q,{className:"text-sm",children:["WM-SSA-OC - ",l.watch("songReference"),"-",P+1]}),e.jsx(E,{type:"button",variant:"ghost",size:"sm",onClick:()=>S("otherContributors",P),className:"text-red-500 hover:text-red-700",children:e.jsx(Vt,{className:"h-4 w-4"})})]})}),e.jsx(L,{children:e.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[e.jsx($e,{control:l.control,name:`otherContributors.${P}.name`,render:({field:I})=>e.jsxs(Fe,{children:[e.jsx(qe,{children:"Name"}),e.jsx(Le,{children:e.jsx($,{...I})}),e.jsx(ze,{})]})}),e.jsx($e,{control:l.control,name:`otherContributors.${P}.email`,render:({field:I})=>e.jsxs(Fe,{children:[e.jsx(qe,{children:"Email"}),e.jsx(Le,{children:e.jsx($,{type:"email",...I})}),e.jsx(ze,{})]})}),e.jsx($e,{control:l.control,name:`otherContributors.${P}.roleNotes`,render:({field:I})=>e.jsxs(Fe,{children:[e.jsx(qe,{children:"Role/Notes"}),e.jsx(Le,{children:e.jsx($,{...I})}),e.jsx(ze,{})]})}),e.jsx($e,{control:l.control,name:`otherContributors.${P}.proIpiNumber`,render:({field:I})=>e.jsxs(Fe,{children:[e.jsx(qe,{children:"PRO/IPI Number"}),e.jsx(Le,{children:e.jsx($,{...I})}),e.jsx(ze,{})]})}),e.jsx($e,{control:l.control,name:`otherContributors.${P}.workOwnership`,render:({field:I})=>e.jsxs(Fe,{children:[e.jsx(qe,{children:"Work Ownership (%)"}),e.jsx(Le,{children:e.jsx($,{type:"number",min:"0",max:"100",...I,onChange:W=>I.onChange(Number(W.target.value)),placeholder:"Percentage ownership"})}),e.jsx(ze,{}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Specify role in notes: melody creator (25% max), music composition (25% max), or songwriter (part of 50% max)"})]})})]})})]},P);return e.jsx("div",{className:"w-full mobile-safe mobile-container mobile-scroll",children:e.jsx(On,{...l,children:e.jsx("form",{onSubmit:l.handleSubmit(b),className:"max-w-full space-y-4 sm:space-y-6 py-4 pb-20",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("h2",{className:"text-lg sm:text-xl font-bold",children:"Songwriter Split Sheet Agreement"}),e.jsx("p",{className:"text-xs sm:text-sm text-muted-foreground",children:"Authentic Wai'tuMusic Format"})]}),e.jsxs(R,{children:[e.jsx(Y,{children:e.jsxs(Q,{className:"flex items-center gap-2",children:[e.jsx(xt,{className:"h-5 w-5"}),"Song Information"]})}),e.jsx(L,{className:"space-y-4",children:e.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[e.jsx($e,{control:l.control,name:"songTitle",render:({field:P})=>e.jsxs(Fe,{children:[e.jsx(qe,{children:"Song Title"}),e.jsx(Le,{children:e.jsx($,{...P,placeholder:"e.g., WHAT DO WE DO",className:"mobile-input"})}),e.jsx(ze,{})]})}),e.jsx($e,{control:l.control,name:"songReference",render:({field:P})=>e.jsxs(Fe,{children:[e.jsx(qe,{className:"text-red-600 font-bold",children:"Song Reference Number * (CRITICAL - REQUIRED)"}),e.jsx(Le,{children:e.jsx($,{...P,placeholder:"DM-A0D-YY-NN-XXX",className:`mobile-input ${P.value?"border-green-500":"border-red-500 bg-red-50"}`})}),e.jsx(ze,{}),e.jsx("p",{className:"text-xs text-red-600 font-medium",children:'ISRC format: DM-A0D-YY-NN-XXX (replaces "Reference" in all form headers)'}),!P.value&&e.jsx("div",{className:"text-xs text-red-700 font-bold bg-red-100 p-2 rounded mt-1 border border-red-300",children:" BLOCKING: Nothing can proceed without this value being entered in correct ISRC format"})]})}),e.jsx($e,{control:l.control,name:"agreementDate",render:({field:P})=>e.jsxs(Fe,{children:[e.jsx(qe,{children:"Agreement Date"}),e.jsx(Le,{children:e.jsx($,{type:"date",...P,className:"mobile-input"})}),e.jsx(ze,{})]})})]})})]}),e.jsxs(Ut,{value:a,onValueChange:r,children:[e.jsxs(jt,{className:"hidden lg:grid grid-cols-7 w-full",children:[e.jsxs(Ne,{value:"composers",className:"text-xs",children:[e.jsx(cn,{className:"h-3 w-3 mr-1"}),"Writers/Composers"]}),e.jsxs(Ne,{value:"artists",className:"text-xs",children:[e.jsx(yn,{className:"h-3 w-3 mr-1"}),"Recording Artists"]}),e.jsxs(Ne,{value:"labels",className:"text-xs",children:[e.jsx(Fo,{className:"h-3 w-3 mr-1"}),"Labels"]}),e.jsxs(Ne,{value:"studios",className:"text-xs",children:[e.jsx(jn,{className:"h-3 w-3 mr-1"}),"Studios"]}),e.jsxs(Ne,{value:"publishers",className:"text-xs",children:[e.jsx(Os,{className:"h-3 w-3 mr-1"}),"Publishers"]}),e.jsxs(Ne,{value:"producers",className:"text-xs",children:[e.jsx(Ue,{className:"h-3 w-3 mr-1"}),"Executive Producers"]}),e.jsxs(Ne,{value:"others",className:"text-xs",children:[e.jsx(Ze,{className:"h-3 w-3 mr-1"}),"Other Contributors"]})]}),e.jsx("div",{className:"lg:hidden mb-4",children:e.jsxs(Re,{value:a,onValueChange:r,children:[e.jsx(Me,{className:"w-full mobile-input",children:e.jsx(Oe,{placeholder:"Select section to edit"})}),e.jsxs(_e,{children:[e.jsx(U,{value:"composers",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(cn,{className:"h-4 w-4"})," Writers/Composers"]})}),e.jsx(U,{value:"artists",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(yn,{className:"h-4 w-4"})," Recording Artists"]})}),e.jsx(U,{value:"labels",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Fo,{className:"h-4 w-4"})," Labels"]})}),e.jsx(U,{value:"studios",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(jn,{className:"h-4 w-4"})," Studios"]})}),e.jsx(U,{value:"publishers",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Os,{className:"h-4 w-4"})," Publishers"]})}),e.jsx(U,{value:"producers",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ue,{className:"h-4 w-4"})," Executive Producers"]})}),e.jsx(U,{value:"others",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ze,{className:"h-4 w-4"})," Other Contributors"]})})]})]})}),x.length>0&&e.jsxs(R,{className:"mb-4 border-orange-200 bg-orange-50 dark:bg-orange-900/20",children:[e.jsx(Y,{children:e.jsxs(Q,{className:"flex items-center gap-2 text-orange-700 dark:text-orange-300",children:[e.jsx(ys,{className:"h-5 w-5"}),"Percentage Validation Alerts"]})}),e.jsxs(L,{className:"space-y-3",children:[x.map((P,M)=>e.jsx("div",{className:`p-3 rounded-lg ${P.type==="error"?"bg-red-100 dark:bg-red-900/30":"bg-yellow-100 dark:bg-yellow-900/30"}`,children:e.jsxs("div",{className:"flex items-center gap-2",children:[P.type==="error"?e.jsx(ys,{className:"h-4 w-4 text-red-600 dark:text-red-400"}):e.jsx(ys,{className:"h-4 w-4 text-yellow-600 dark:text-yellow-400"}),e.jsxs("div",{children:[e.jsx("p",{className:`font-medium ${P.type==="error"?"text-red-700 dark:text-red-300":"text-yellow-700 dark:text-yellow-300"}`,children:P.category}),e.jsx("p",{className:`text-sm ${P.type==="error"?"text-red-600 dark:text-red-400":"text-yellow-600 dark:text-yellow-400"}`,children:P.message})]})]})},M)),e.jsxs("div",{className:"mt-4 p-3 bg-blue-50 dark:bg-blue-900/30 rounded-lg",children:[e.jsx("h4",{className:"font-medium text-blue-700 dark:text-blue-300 mb-2",children:"Wai'tuMusic Splitsheet Policy:"}),e.jsxs("ul",{className:"text-sm text-blue-600 dark:text-blue-400 space-y-1",children:[e.jsx("li",{children:" Songwriters/Authors: 50% (WC, RA lyrics, OC songwriter roles)"}),e.jsx("li",{children:" Melody Creators: 25% (RA music ownership, OC melody roles)"}),e.jsx("li",{children:" Music Composition: 25% (OC beat/production/music composition roles)"}),e.jsx("li",{children:" Publishing: 100% to Wai'tuMusic (unless represented by other PRO)"})]})]})]})]}),e.jsxs(ge,{value:"composers",className:"space-y-4",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-3",children:[e.jsx("h3",{className:"text-base sm:text-lg font-semibold",children:"Writer/Composer Document (WM-SSA-WC)"}),e.jsxs("div",{className:"flex gap-2 flex-wrap",children:[e.jsxs(E,{type:"button",onClick:y,variant:"secondary",size:"sm",disabled:l.watch("writerComposers").length<=1,className:"text-xs sm:text-sm h-8 sm:h-9",children:[e.jsx(Ib,{className:"h-3 w-3 sm:h-4 sm:w-4 mr-1 sm:mr-2"}),e.jsx("span",{className:"hidden sm:inline",children:"Auto-Divide %"}),e.jsx("span",{className:"sm:hidden",children:"Auto %"})]}),e.jsxs(E,{type:"button",onClick:()=>j("writerComposers"),variant:"outline",size:"sm",className:"text-xs sm:text-sm h-8 sm:h-9",children:[e.jsx(st,{className:"h-3 w-3 sm:h-4 sm:w-4 mr-1 sm:mr-2"}),e.jsx("span",{className:"hidden sm:inline",children:"Add Writer/Composer"}),e.jsx("span",{className:"sm:hidden",children:"Add Writer"})]})]})]}),l.watch("writerComposers").map((P,M)=>k("writerComposers",M,P,"WM-SSA-WC"))]}),e.jsxs(ge,{value:"artists",className:"space-y-4",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-3",children:[e.jsx("h3",{className:"text-base sm:text-lg font-semibold",children:"Recording Artist Document (WM-SSA-RA)"}),e.jsxs("div",{className:"flex gap-2 flex-wrap",children:[e.jsxs(E,{type:"button",onClick:f,variant:"secondary",size:"sm",disabled:l.watch("recordingArtists").length<=1,className:"text-xs sm:text-sm h-8 sm:h-9",children:[e.jsx(Ib,{className:"h-3 w-3 sm:h-4 sm:w-4 mr-1 sm:mr-2"}),e.jsx("span",{className:"hidden sm:inline",children:"Auto-Distribute %"}),e.jsx("span",{className:"sm:hidden",children:"Auto %"})]}),e.jsxs(E,{type:"button",onClick:()=>j("recordingArtists"),variant:"outline",size:"sm",className:"text-xs sm:text-sm h-8 sm:h-9",children:[e.jsx(st,{className:"h-3 w-3 sm:h-4 sm:w-4 mr-1 sm:mr-2"}),e.jsx("span",{className:"hidden sm:inline",children:"Add Recording Artist"}),e.jsx("span",{className:"sm:hidden",children:"Add Artist"})]})]})]}),l.watch("recordingArtists").map((P,M)=>k("recordingArtists",M,P,"WM-SSA-RA"))]}),e.jsxs(ge,{value:"labels",className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Label Document (WM-SSA-LD)"}),e.jsxs(E,{type:"button",onClick:()=>j("labels"),variant:"outline",children:[e.jsx(st,{className:"h-4 w-4 mr-2"}),"Add Label"]})]}),l.watch("labels").map((P,M)=>k("labels",M,P,"WM-SSA-LD"))]}),e.jsxs(ge,{value:"studios",className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Studio Document (WM-SSA-SD)"}),e.jsxs(E,{type:"button",onClick:()=>j("studios"),variant:"outline",children:[e.jsx(st,{className:"h-4 w-4 mr-2"}),"Add Studio"]})]}),l.watch("studios").map((P,M)=>k("studios",M,P,"WM-SSA-SD"))]}),e.jsxs(ge,{value:"publishers",className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Publisher Document (WM-SSA-PD)"}),e.jsxs(E,{type:"button",onClick:()=>j("publishers"),variant:"outline",children:[e.jsx(st,{className:"h-4 w-4 mr-2"}),"Add Publisher"]})]}),l.watch("publishers").map((P,M)=>k("publishers",M,P,"WM-SSA-PD"))]}),e.jsxs(ge,{value:"producers",className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Executive Producer Document (WM-SSA-EP)"}),e.jsxs(E,{type:"button",onClick:()=>j("executiveProducers"),variant:"outline",children:[e.jsx(st,{className:"h-4 w-4 mr-2"}),"Add Executive Producer"]})]}),(C=l.watch("executiveProducers"))==null?void 0:C.map((P,M)=>T(M))]}),e.jsxs(ge,{value:"others",className:"space-y-4",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-3",children:[e.jsx("h3",{className:"text-base sm:text-lg font-semibold",children:"Other Contributors Document (WM-SSA-OC)"}),e.jsxs(E,{type:"button",onClick:()=>j("otherContributors"),variant:"outline",size:"sm",className:"text-xs sm:text-sm h-8 sm:h-9",children:[e.jsx(st,{className:"h-3 w-3 sm:h-4 sm:w-4 mr-1 sm:mr-2"}),e.jsx("span",{className:"hidden sm:inline",children:"Add Other Contributor"}),e.jsx("span",{className:"sm:hidden",children:"Add Other"})]})]}),(w=l.watch("otherContributors"))==null?void 0:w.map((P,M)=>A(M))]})]}),e.jsx(R,{children:e.jsx(L,{className:"pt-6",children:e.jsxs("div",{className:"text-center space-y-4",children:[e.jsxs("div",{className:"bg-emerald-50 dark:bg-emerald-900/20 p-4 rounded-lg",children:[e.jsx("h4",{className:"font-semibold text-emerald-700 dark:text-emerald-300 mb-2",children:"Wai'tuMusic Splitsheet Service"}),e.jsx("p",{className:"text-2xl font-bold text-emerald-600 dark:text-emerald-400",children:"$15.00 USD"}),e.jsx("p",{className:"text-sm text-emerald-600 dark:text-emerald-400 mt-1",children:"Per authentic splitsheet with digital signatures & notifications"})]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Please do not fill in any item in BOLD. This is for official use only."}),e.jsx(E,{type:"submit",className:"w-full",disabled:v.isPending,onClick:()=>{console.log("Button clicked!"),console.log("Current form data:",l.getValues()),console.log("Form errors:",l.formState.errors)},children:v.isPending?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin w-4 h-4 mr-2 border-2 border-white border-t-transparent rounded-full"}),"Creating Splitsheet..."]}):e.jsxs(e.Fragment,{children:[e.jsx(ct,{className:"h-4 w-4 mr-2"}),"Create Authentic Splitsheet - $5.00"]})})]})})})]})})})})}function QX({isOpen:t,onClose:s,splitsheetId:n,partyName:a,partyRole:r,ownershipPercentage:i,accessToken:l}){const[c,o]=N.useState("upload"),[d,h]=N.useState(null),[u,m]=N.useState(""),[p,g]=N.useState(!1),x=N.useRef(null),{toast:v}=nt(),y=Xe({mutationFn:async A=>{const C=new FormData;C.append("splitsheetId",n.toString()),C.append("partyName",a),C.append("partyRole",r),C.append("signatureMode",A.signatureMode),A.signatureFile&&C.append("signatureFile",A.signatureFile),A.signatureText&&C.append("signatureText",A.signatureText),A.signatureDrawing&&C.append("signatureDrawing",A.signatureDrawing),l&&C.append("accessToken",l);const w=await fetch("/api/splitsheet-sign",{method:"POST",body:C});if(!w.ok)throw new Error("Failed to sign splitsheet");return w.json()},onSuccess:()=>{v({title:"Signature Recorded",description:"Your signature has been successfully recorded on the splitsheet."}),s()},onError:A=>{v({title:"Signing Failed",description:A.message||"Failed to record signature",variant:"destructive"})}}),f=A=>{var w;const C=(w=A.target.files)==null?void 0:w[0];C&&C.type.startsWith("image/")?h(C):v({title:"Invalid File",description:"Please upload a PNG or JPEG image file",variant:"destructive"})},b=A=>{g(!0);const C=x.current;if(!C)return;const w=C.getBoundingClientRect(),P=C.getContext("2d");P&&(P.beginPath(),P.moveTo(A.clientX-w.left,A.clientY-w.top))},j=A=>{if(!p)return;const C=x.current;if(!C)return;const w=C.getBoundingClientRect(),P=C.getContext("2d");P&&(P.lineTo(A.clientX-w.left,A.clientY-w.top),P.stroke())},S=()=>{g(!1)},k=()=>{const A=x.current;if(!A)return;const C=A.getContext("2d");C&&C.clearRect(0,0,A.width,A.height)},T=()=>{let A={signatureMode:c};switch(c){case"upload":if(!d){v({title:"Missing Signature",description:"Please upload a signature image",variant:"destructive"});return}A.signatureFile=d;break;case"draw":const C=x.current;if(!C)return;A.signatureDrawing=C.toDataURL();break;case"type":if(!u.trim()){v({title:"Missing Signature",description:"Please enter your name for the typed signature",variant:"destructive"});return}A.signatureText=u;break}y.mutate(A)};return e.jsx(kt,{open:t,onOpenChange:s,children:e.jsxs(wt,{className:"max-w-4xl max-h-[90vh] overflow-y-auto",children:[e.jsx(St,{children:e.jsxs(Ct,{className:"flex items-center gap-2",children:[e.jsx(xt,{className:"h-5 w-5"}),"Sign Splitsheet"]})}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs(R,{children:[e.jsx(Y,{children:e.jsx(Q,{className:"text-lg",children:"Your Role in this Splitsheet"})}),e.jsxs(L,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx(q,{className:"text-sm font-medium",children:"Your Name"}),e.jsx("div",{className:"text-lg",children:a})]}),e.jsxs("div",{children:[e.jsx(q,{className:"text-sm font-medium",children:"Your Role"}),e.jsx(X,{className:"capitalize",children:r.replace("_"," ")})]}),e.jsxs("div",{children:[e.jsx(q,{className:"text-sm font-medium",children:"Ownership %"}),e.jsxs("div",{className:"text-lg font-bold",children:[i,"%"]})]})]}),e.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 p-4 rounded-lg",children:[e.jsx("h4",{className:"font-semibold mb-2",children:"Wai'tuMusic Publishing Policy"}),e.jsx("p",{className:"text-sm",children:"By signing this splitsheet, you acknowledge that publishing rights default to 100% Wai'tuMusic unless you are represented by another PRO. Your composition ownership percentage above refers to songwriter/creator credits only."})]})]})]}),e.jsxs(R,{children:[e.jsx(Y,{children:e.jsx(Q,{children:"Choose Your Signature Method"})}),e.jsx(L,{children:e.jsxs(Ut,{value:c,onValueChange:A=>o(A),children:[e.jsxs(jt,{className:"grid w-full grid-cols-3",children:[e.jsxs(Ne,{value:"upload",className:"flex items-center gap-2",children:[e.jsx(Xs,{className:"h-4 w-4"}),"Upload PNG"]}),e.jsxs(Ne,{value:"draw",className:"flex items-center gap-2",children:[e.jsx(O6,{className:"h-4 w-4"}),"Draw"]}),e.jsxs(Ne,{value:"type",className:"flex items-center gap-2",children:[e.jsx(_i,{className:"h-4 w-4"}),"Type"]})]}),e.jsx(ge,{value:"upload",className:"space-y-4",children:e.jsxs("div",{children:[e.jsx(q,{htmlFor:"signature-upload",children:"Upload Transparent PNG Signature"}),e.jsx($,{id:"signature-upload",type:"file",accept:"image/png,image/jpeg",onChange:f,className:"mt-2"}),d&&e.jsxs("div",{className:"mt-2 text-sm text-green-600",children:[" File selected: ",d.name]})]})}),e.jsx(ge,{value:"draw",className:"space-y-4",children:e.jsxs("div",{children:[e.jsx(q,{children:"Draw Your Signature"}),e.jsxs("div",{className:"border rounded-lg p-4 bg-white dark:bg-gray-900",children:[e.jsx("canvas",{ref:x,width:600,height:200,className:"border border-gray-300 cursor-crosshair w-full",onMouseDown:b,onMouseMove:j,onMouseUp:S,onMouseLeave:S}),e.jsx(E,{type:"button",variant:"outline",size:"sm",onClick:k,className:"mt-2",children:"Clear"})]})]})}),e.jsx(ge,{value:"type",className:"space-y-4",children:e.jsxs("div",{children:[e.jsx(q,{htmlFor:"signature-text",children:"Type Your Full Legal Name"}),e.jsx($,{id:"signature-text",value:u,onChange:A=>m(A.target.value),placeholder:"Enter your full legal name",className:"mt-2 font-serif text-xl italic",style:{fontFamily:"Georgia, serif"}}),u&&e.jsxs("div",{className:"mt-2 p-3 border rounded bg-gray-50 dark:bg-gray-800",children:[e.jsx("div",{className:"text-sm text-muted-foreground mb-1",children:"Preview:"}),e.jsx("div",{className:"text-2xl font-serif italic",style:{fontFamily:"Georgia, serif"},children:u})]})]})})]})})]}),e.jsxs("div",{className:"flex gap-3 pt-4",children:[e.jsx(E,{variant:"outline",onClick:s,className:"flex-1",children:"Cancel"}),e.jsx(E,{onClick:T,disabled:y.isPending,className:"flex-1",children:y.isPending?"Recording Signature...":e.jsxs(e.Fragment,{children:[e.jsx(ct,{className:"h-4 w-4 mr-2"}),"Sign Splitsheet"]})})]})]})]})})}function ZX(){const[t,s]=N.useState("overview"),[n,a]=N.useState(null),[r,i]=N.useState(!1),[l,c]=N.useState(null),o=u=>{a(u),s("sign")},d=u=>{c(u),i(!0)},h=()=>{i(!1),c(null)};return e.jsxs("div",{className:"max-w-6xl mx-auto p-6 space-y-6",children:[e.jsxs("div",{className:"text-center space-y-2",children:[e.jsxs("h1",{className:"text-3xl font-bold flex items-center justify-center gap-2",children:[e.jsx(xt,{className:"h-8 w-8"}),"Splitsheet Management System"]}),e.jsx("p",{className:"text-muted-foreground",children:"Complete workflow demonstration: Creation  Signing  DJ Song Access"}),e.jsxs("div",{className:"flex justify-center gap-2 mt-4",children:[e.jsxs(E,{variant:t==="overview"?"default":"outline",size:"sm",onClick:()=>s("overview"),children:[e.jsx(Ns,{className:"h-4 w-4 mr-2"}),"Overview"]}),e.jsxs(E,{variant:t==="create"?"default":"outline",size:"sm",onClick:()=>s("create"),children:[e.jsx(xt,{className:"h-4 w-4 mr-2"}),"Create"]}),e.jsxs(E,{variant:t==="sign"?"default":"outline",size:"sm",onClick:()=>s("sign"),children:[e.jsx(go,{className:"h-4 w-4 mr-2"}),"Sign"]}),e.jsxs(E,{variant:t==="dj-access"?"default":"outline",size:"sm",onClick:()=>s("dj-access"),children:[e.jsx(qa,{className:"h-4 w-4 mr-2"}),"DJ Access"]})]})]}),t==="overview"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs(R,{children:[e.jsx(Y,{children:e.jsx(Q,{children:"Wai'tuMusic Splitsheet Policy"})}),e.jsx(L,{className:"space-y-4",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"text-center p-4 bg-blue-50 dark:bg-blue-900/20 rounded-lg",children:[e.jsx("h3",{className:"font-semibold",children:"Songwriters/Authors"}),e.jsx(X,{className:"bg-blue-500 text-white",children:"50%"}),e.jsx("p",{className:"text-sm mt-2",children:"People who wrote lyrics"})]}),e.jsxs("div",{className:"text-center p-4 bg-green-50 dark:bg-green-900/20 rounded-lg",children:[e.jsx("h3",{className:"font-semibold",children:"Melody Creators"}),e.jsx(X,{className:"bg-green-500 text-white",children:"25%"}),e.jsx("p",{className:"text-sm mt-2",children:"Created the melody"})]}),e.jsxs("div",{className:"text-center p-4 bg-purple-50 dark:bg-purple-900/20 rounded-lg",children:[e.jsx("h3",{className:"font-semibold",children:"Beat/Production"}),e.jsx(X,{className:"bg-purple-500 text-white",children:"25%"}),e.jsx("p",{className:"text-sm mt-2",children:"Beat makers, producers"})]}),e.jsxs("div",{className:"text-center p-4 bg-primary/10 rounded-lg",children:[e.jsx("h3",{className:"font-semibold",children:"Publishing Rights"}),e.jsx(X,{children:"100% Wai'tuMusic"}),e.jsx("p",{className:"text-sm mt-2",children:"Unless represented by other PRO"})]})]})})]}),e.jsxs(R,{children:[e.jsx(Y,{children:e.jsx(Q,{children:"Digital Signature System"})}),e.jsx(L,{children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"text-center p-4 border rounded-lg",children:[e.jsx(xt,{className:"h-8 w-8 mx-auto mb-2 text-blue-500"}),e.jsx("h4",{className:"font-semibold",children:"Upload PNG"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Upload transparent PNG signature"})]}),e.jsxs("div",{className:"text-center p-4 border rounded-lg",children:[e.jsx(go,{className:"h-8 w-8 mx-auto mb-2 text-green-500"}),e.jsx("h4",{className:"font-semibold",children:"Draw Signature"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Draw with mouse or touch"})]}),e.jsxs("div",{className:"text-center p-4 border rounded-lg",children:[e.jsx(xt,{className:"h-8 w-8 mx-auto mb-2 text-purple-500"}),e.jsx("h4",{className:"font-semibold",children:"Type Name"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Italicized font signature"})]})]})})]}),e.jsxs(R,{children:[e.jsx(Y,{children:e.jsx(Q,{children:"DJ Song Access Integration"})}),e.jsx(L,{children:e.jsxs("div",{className:"flex items-center justify-between p-4 bg-gradient-to-r from-emerald-50 to-cyan-50 dark:from-emerald-900/20 dark:to-cyan-900/20 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(qa,{className:"h-6 w-6 text-emerald-600"}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold",children:"Automatic DJ Access"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"DJs get access to songs only when splitsheets are fully signed"})]})]}),e.jsx(X,{className:"bg-emerald-500 text-white",children:"Complete Workflow"})]})})]})]}),t==="create"&&e.jsx(YX,{onSuccess:()=>o(1)}),t==="sign"&&e.jsx("div",{className:"space-y-6",children:e.jsxs(R,{children:[e.jsx(Y,{children:e.jsxs(Q,{className:"flex items-center gap-2",children:[e.jsx(go,{className:"h-5 w-5"}),"Splitsheet Signing Status"]})}),e.jsxs(L,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold",children:"Song Information"}),e.jsxs("p",{children:[e.jsx("strong",{children:"Title:"})," ",mockSplitsheet.songTitle]}),e.jsxs("p",{children:[e.jsx("strong",{children:"ISRC:"})," ",mockSplitsheet.songReference]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Status:"}),e.jsx(X,{variant:mockSplitsheet.fullySigned?"default":"secondary",className:"ml-2",children:mockSplitsheet.fullySigned?"Fully Signed":"Pending Signatures"})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold",children:"Progress"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"flex-1 bg-gray-200 dark:bg-gray-700 rounded-full h-2",children:e.jsx("div",{className:"bg-primary h-2 rounded-full transition-all duration-300",style:{width:`${mockSplitsheet.parties.filter(u=>u.signed).length/mockSplitsheet.parties.length*100}%`}})}),e.jsxs("span",{className:"text-sm",children:[mockSplitsheet.parties.filter(u=>u.signed).length,"/",mockSplitsheet.parties.length]})]})]})]}),e.jsx(ss,{}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold mb-3",children:"Required Signatures"}),e.jsx("div",{className:"space-y-3",children:mockSplitsheet.parties.map((u,m)=>e.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`w-3 h-3 rounded-full ${u.signed?"bg-green-500":"bg-gray-300"}`}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:u.name}),e.jsxs("div",{className:"text-sm text-muted-foreground",children:[u.role.replace("_"," "),"  ",u.percentage,"%"]})]})]}),e.jsx("div",{className:"flex items-center gap-2",children:u.signed?e.jsxs(X,{className:"bg-green-500 text-white",children:[e.jsx(ct,{className:"h-3 w-3 mr-1"}),"Signed"]}):e.jsxs(E,{size:"sm",onClick:()=>d(u),children:[e.jsx(go,{className:"h-4 w-4 mr-2"}),"Sign Now"]})})]},m))})]})]})]})}),t==="dj-access"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs(R,{children:[e.jsx(Y,{children:e.jsxs(Q,{className:"flex items-center gap-2",children:[mockSplitsheet.fullySigned?e.jsx(qa,{className:"h-5 w-5 text-green-500"}):e.jsx(mp,{className:"h-5 w-5 text-gray-500"}),"DJ Song Access Status"]})}),e.jsx(L,{className:"space-y-4",children:mockSplitsheet.fullySigned?e.jsxs("div",{className:"bg-green-50 dark:bg-green-900/20 p-4 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(ct,{className:"h-5 w-5 text-green-500"}),e.jsx("span",{className:"font-semibold text-green-700 dark:text-green-300",children:"DJ Access Granted"})]}),e.jsx("p",{className:"text-sm text-green-600 dark:text-green-400",children:"All parties have signed the splitsheet. DJs can now access this song for setlists."}),e.jsx("div",{className:"mt-3 p-3 bg-white dark:bg-gray-800 rounded border",children:e.jsxs("div",{className:"text-sm space-y-1",children:[e.jsxs("div",{children:[e.jsx("strong",{children:"Song:"})," ",mockSplitsheet.songTitle]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Access Code:"})," DJ-SONG-123456789"]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Original Audio:"})," Available"]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Vocal-Removed:"})," Available"]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Expires:"})," 30 days from signing completion"]})]})})]}):e.jsxs("div",{className:"bg-yellow-50 dark:bg-yellow-900/20 p-4 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(Qt,{className:"h-5 w-5 text-yellow-500"}),e.jsx("span",{className:"font-semibold text-yellow-700 dark:text-yellow-300",children:"DJ Access Pending"})]}),e.jsx("p",{className:"text-sm text-yellow-600 dark:text-yellow-400",children:"DJs cannot access this song until all splitsheet parties have signed."}),e.jsxs("div",{className:"mt-3",children:[e.jsxs("div",{className:"text-sm",children:[e.jsx("strong",{children:"Remaining signatures needed:"})," ",mockSplitsheet.parties.filter(u=>!u.signed).length]}),e.jsx("ul",{className:"text-sm mt-2 space-y-1",children:mockSplitsheet.parties.filter(u=>!u.signed).map((u,m)=>e.jsxs("li",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-2 h-2 bg-yellow-500 rounded-full"}),u.name," (",u.role.replace("_"," "),")"]},m))})]})]})})]}),e.jsxs(R,{children:[e.jsx(Y,{children:e.jsx(Q,{children:"Management Tier Benefits"})}),e.jsx(L,{children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"p-4 border rounded-lg",children:[e.jsx("h4",{className:"font-semibold",children:"Publisher Level"}),e.jsx(X,{className:"bg-blue-500 text-white mb-2",children:"10% Discount"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"ISRC service pricing discount for managed artists"})]}),e.jsxs("div",{className:"p-4 border rounded-lg",children:[e.jsx("h4",{className:"font-semibold",children:"Representation Level"}),e.jsx(X,{className:"bg-green-500 text-white mb-2",children:"50% Discount"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Enhanced pricing benefits for representation clients"})]}),e.jsxs("div",{className:"p-4 border rounded-lg",children:[e.jsx("h4",{className:"font-semibold",children:"Full Management"}),e.jsx(X,{className:"bg-purple-500 text-white mb-2",children:"100% Free"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Complete ISRC service coverage for managed talent"})]})]})})]})]}),l&&e.jsx(QX,{isOpen:r,onClose:h,splitsheetId:1,partyName:l.name,partyRole:l.role,ownershipPercentage:l.percentage})]})}function XX(){const{toast:t}=nt(),s=N.useRef(null),{data:n}=ke({queryKey:["/api/service-pricing","Create Splitsheet"],queryFn:async()=>(await xe("/api/service-pricing/Create Splitsheet")).json()});n!=null&&n.basePrice;const[a,r]=N.useState({songTitle:"",isrc:"",workId:"",upcEan:"",agreementDate:new Date().toISOString().split("T")[0],participants:[],basePrice:15,finalPrice:15,discountPercentage:0,paymentStatus:"pending"});lt.useEffect(()=>{n!=null&&n.basePrice&&r(_=>({..._,basePrice:n.basePrice,finalPrice:n.basePrice}))},[n]);const[i,l]=N.useState(null),[c,o]=N.useState(""),[d,h]=N.useState(!1),[u,m]=N.useState(null),{data:p=[],isLoading:g}=ke({queryKey:["/api/users/assignable-talent",c],enabled:c.length>=3}),x=Xe({mutationFn:async _=>{const B=new FormData;B.append("splitsheetData",JSON.stringify(_.splitsheetData)),_.audioFile&&B.append("audioFile",_.audioFile);const O=localStorage.getItem("token"),z=await fetch("/api/splitsheet-enhanced-create",{method:"POST",headers:{Authorization:`Bearer ${O}`},body:B});if(!z.ok){const F=await z.json();throw new Error(F.message||"Failed to create enhanced splitsheet")}return z.json()},onSuccess:_=>{t({title:"Splitsheet Created Successfully!",description:`${_.notificationsSent} notifications sent. ${_.newUsersCreated} new platform accounts created. ${_.isrcGenerated?"ISRC code generated.":""}`,duration:8e3}),r({songTitle:"",isrc:"",agreementDate:new Date().toISOString().split("T")[0],participants:[],basePrice:(n==null?void 0:n.basePrice)||15,finalPrice:(n==null?void 0:n.basePrice)||15,discountPercentage:0,paymentStatus:"pending"}),l(null),s.current&&(s.current.value="")},onError:_=>{t({title:"Error Creating Splitsheet",description:_.message,variant:"destructive",duration:8e3})}}),v=()=>{const _={id:`participant-${Date.now()}`,name:"",email:"",address:"",phone:"",ipiNumber:"",proAffiliation:"",nationalId:"",dateOfBirth:"",roles:[],hasSigned:!1};r(B=>({...B,participants:[...B.participants,_]}))},y=_=>{r(B=>({...B,participants:B.participants.filter((O,z)=>z!==_)}))},f=(_,B,O)=>{r(z=>({...z,participants:z.participants.map((F,K)=>K===_?{...F,[B]:O}:F)}))},b=(_,B)=>{f(_,"assignedUserId",B.id),f(_,"name",B.fullName),f(_,"email",B.email),h(!1),m(null),o(""),t({title:"User Assigned",description:`${B.fullName} assigned to this participant. Profile data will be auto-populated.`,duration:3e3})},j=_=>{const B=a.participants[_],O={type:"songwriter",percentage:0,notes:"",entryId:T("songwriter")};f(_,"roles",[...B.roles,O])},S=(_,B)=>{const z=a.participants[_].roles.filter((F,K)=>K!==B);f(_,"roles",z)},k=(_,B,O,z)=>{const F=a.participants[_];if(O==="type"&&F.roles.find((G,H)=>H!==B&&G.type===z)){t({title:"Duplicate Role Error",description:"This participant already has this role assigned.",variant:"destructive"});return}const K=F.roles.map((D,G)=>G===B?{...D,[O]:z,entryId:O==="type"?T(z):D.entryId}:D);f(_,"roles",K)},T=_=>{const O={songwriter:"WC",melody_creator:"MC",beat_music_composer:"BC",recording_artist:"RA",label_rep:"LD",publisher:"PD",studio_rep:"SD",executive_producer:"EP"}[_]||"XX",z=a.isrc||"PENDING",F=a.participants.reduce((K,D)=>{var G;return K+(((G=D.roles)==null?void 0:G.filter(H=>H.type===_).length)||0)},0)+1;return`WM-SSA-${O}-${z}-${F.toString().padStart(3,"0")}`},A=()=>{let _=0,B=0,O=0,z=0,F=0;return a.participants.forEach(K=>{var D;(D=K.roles)==null||D.forEach(G=>{switch(G.type){case"songwriter":_+=G.percentage||0;break;case"melody_creator":B+=G.percentage||0;break;case"beat_music_composer":O+=G.percentage||0;break;case"publisher":z+=G.percentage||0;break;case"executive_producer":F+=G.percentage||0;break}})}),{songwriting:_,melody:B,beatProduction:O,publishing:z,executiveProducer:F}},C=_=>{var O;const B=(O=_.target.files)==null?void 0:O[0];if(B){if(!B.type.includes("audio")){t({title:"Invalid File Type",description:"Please select a WAV or MP3 audio file.",variant:"destructive"});return}if(B.size>50*1024*1024){t({title:"File Too Large",description:"Please select a file smaller than 50MB.",variant:"destructive"});return}l(B),t({title:"Audio File Added",description:`${B.name} ready for upload. ISRC code will be generated automatically.`,duration:4e3})}},w=_=>{if(_.preventDefault(),!a.songTitle.trim()){t({title:"Validation Error",description:"Song title is required.",variant:"destructive"});return}if(!a.isrc.trim()){t({title:"Validation Error",description:"ISRC is required.",variant:"destructive"});return}const B=a.isrc.replace(/-/g,"");if(B.length!==11){t({title:"ISRC Format Error",description:`ISRC must be exactly 12 characters (excluding hyphens). Current: ${B.length}/12 characters.`,variant:"destructive"});return}if(!/^DM-A0D-\d{2}-\d{2}-\d{3}$/.test(a.isrc)){t({title:"ISRC Format Error",description:"ISRC format must be: DM-A0D-YY-NN-XXX",variant:"destructive"});return}if(a.participants.length===0){t({title:"Validation Error",description:"At least one participant is required.",variant:"destructive"});return}if(a.participants.filter(K=>!K.name.trim()||!K.email.trim()||!K.address.trim()).length>0){t({title:"Validation Error",description:"All participants must have name, email, and address.",variant:"destructive"});return}const F=A();if(F.songwriting>50){t({title:"Percentage Validation Error",description:"Songwriting percentages cannot exceed 50%.",variant:"destructive"});return}if(F.melody>25){t({title:"Percentage Validation Error",description:"Melody creation percentages cannot exceed 25%.",variant:"destructive"});return}if(F.beatProduction>25){t({title:"Percentage Validation Error",description:"Beat/Production percentages cannot exceed 25%.",variant:"destructive"});return}x.mutate({splitsheetData:a,audioFile:i})},P=A(),I=(()=>{const _=A(),B=_.songwriting/100*50,O=_.melody/100*25,z=_.beatProduction/100*25,F=B+O+z,K=_.publishing,D=K/100*50,G=_.executiveProducer>0,H=G?_.executiveProducer:100;return{songwritingWeighted:B,melodyWeighted:O,beatCompositionWeighted:z,totalCompositionPercent:F,publishingPercent:K,publishingWeighted:D,executiveProducerPercent:H,hasExecutiveProducers:G,totalWorkPercent:F+D}})(),W=_=>{if(!_)return"WM-SS-PENDING";const B=new Date,O=B.getFullYear().toString()+(B.getMonth()+1).toString().padStart(2,"0")+B.getDate().toString().padStart(2,"0"),z=_.replace(/-/g,""),F=z.substring(0,2),K=z.substring(2,5);return`WM-SS-${(F+K).toUpperCase()}-${O}-001`};return e.jsxs("div",{className:"max-w-4xl mx-auto p-6",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white mb-2",children:"Enhanced Splitsheet Creation"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-300",children:"Create professional splitsheets with user assignment, automatic data population, and notification system"})]}),e.jsxs("form",{onSubmit:w,className:"space-y-8",children:[e.jsxs(R,{children:[e.jsxs(Y,{children:[e.jsxs(Q,{className:"flex items-center gap-2",children:[e.jsx(Ue,{className:"h-5 w-5"}),"Work & Song Information"]}),e.jsx(rt,{children:"Work registration details and song information. A work represents a fully coded song registered with a PRO."})]}),e.jsxs(L,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(q,{htmlFor:"songTitle",children:"Song Title *"}),e.jsx($,{id:"songTitle",value:a.songTitle,onChange:_=>r(B=>({...B,songTitle:_.target.value})),placeholder:"Enter song title",required:!0})]}),e.jsxs("div",{children:[e.jsx(q,{htmlFor:"isrc",children:"ISRC *"}),e.jsx($,{id:"isrc",value:a.isrc,onChange:_=>r(B=>({...B,isrc:_.target.value.toUpperCase()})),placeholder:"DM-A0D-YY-NN-XXX",required:!0,className:`${a.isrc&&(a.isrc.replace(/-/g,"").length!==11||!/^DM-A0D-\d{2}-\d{2}-\d{3}$/.test(a.isrc))?"border-red-500 focus:border-red-500":a.isrc?"border-green-500 focus:border-green-500":""}`}),a.isrc&&e.jsxs("p",{className:`text-xs mt-1 ${a.isrc.replace(/-/g,"").length!==11||!/^DM-A0D-\d{2}-\d{2}-\d{3}$/.test(a.isrc)?"text-red-500":"text-green-500"}`,children:["Format: DM-A0D-YY-NN-XXX (",a.isrc.replace(/-/g,"").length,"/12 characters)"]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(q,{htmlFor:"workId",children:"Work ID (PRO-issued)"}),e.jsx($,{id:"workId",value:a.workId||"",onChange:_=>r(B=>({...B,workId:_.target.value})),placeholder:"Enter PRO Work ID"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Issued by ASCAP, BMI, SESAC, etc."})]}),e.jsxs("div",{children:[e.jsx(q,{htmlFor:"upcEan",children:"UPC/EAN Code"}),e.jsx($,{id:"upcEan",value:a.upcEan||"",onChange:_=>r(B=>({...B,upcEan:_.target.value})),placeholder:"Enter UPC/EAN from distributor"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Provided by music distributor"})]})]}),e.jsxs("div",{children:[e.jsx(q,{htmlFor:"agreementDate",children:"Agreement Date"}),e.jsx($,{id:"agreementDate",type:"date",value:a.agreementDate,onChange:_=>r(B=>({...B,agreementDate:_.target.value}))})]}),e.jsxs("div",{className:"bg-emerald-50 dark:bg-emerald-900/20 p-3 rounded-lg border border-emerald-200 dark:border-emerald-800",children:[e.jsxs("div",{className:"text-sm font-mono text-emerald-800 dark:text-emerald-200",children:["Reference: ",W(a.isrc)]}),e.jsxs("div",{className:"text-xs text-emerald-600 dark:text-emerald-400 mt-1",children:["Wai'tuMusic Splitsheet Agreement - Work Registration - ",a.isrc?"ISRC Validated":"Awaiting ISRC"]}),a.workId&&e.jsxs("div",{className:"text-xs text-emerald-600 dark:text-emerald-400",children:["Work ID: ",a.workId," | UPC/EAN: ",a.upcEan||"Not provided"]})]})]})]}),e.jsxs(R,{children:[e.jsxs(Y,{children:[e.jsxs(Q,{className:"flex items-center gap-2",children:[e.jsx(Xs,{className:"h-5 w-5"}),"Audio File Upload (Optional)"]}),e.jsx(rt,{children:"Upload audio file for automatic ISRC generation and metadata embedding"})]}),e.jsx(L,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsx("input",{type:"file",ref:s,onChange:C,accept:".wav,.mp3,audio/*",className:"hidden"}),e.jsxs(E,{type:"button",variant:"outline",onClick:()=>{var _;return(_=s.current)==null?void 0:_.click()},className:"w-full",children:[e.jsx(Xs,{className:"h-4 w-4 mr-2"}),i?`Selected: ${i.name}`:"Select Audio File (WAV/MP3)"]}),i&&e.jsxs("div",{className:"text-sm text-gray-600 dark:text-gray-300",children:[e.jsxs("p",{children:["File: ",i.name]}),e.jsxs("p",{children:["Size: ",(i.size/(1024*1024)).toFixed(2)," MB"]}),e.jsxs("p",{children:["Type: ",i.type]}),e.jsx(X,{variant:"secondary",children:"ISRC will be auto-generated"})]})]})})]}),e.jsxs(R,{children:[e.jsxs(Y,{children:[e.jsxs(Q,{className:"flex items-center gap-2",children:[e.jsx(Ze,{className:"h-5 w-5"}),"Participants Management"]}),e.jsx(rt,{children:"Assign platform users or manually enter participant information"})]}),e.jsxs(L,{className:"space-y-6",children:[d&&u!==null&&e.jsx("div",{className:"p-4 border rounded-lg bg-gray-50 dark:bg-gray-800",children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(q,{children:"Search Platform Users"}),e.jsx(E,{variant:"ghost",size:"sm",onClick:()=>{h(!1),m(null),o("")},children:e.jsx(Xt,{className:"h-4 w-4"})})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx($,{placeholder:"Search by name or email...",value:c,onChange:_=>o(_.target.value),className:"flex-1"}),e.jsx(Bs,{className:"h-4 w-4 text-gray-400 self-center"})]}),g&&e.jsx("p",{className:"text-sm text-gray-500",children:"Searching..."}),p.length>0&&e.jsx("div",{className:"space-y-2 max-h-40 overflow-y-auto",children:p.map(_=>e.jsx("div",{className:"p-2 border rounded cursor-pointer hover:bg-white dark:hover:bg-gray-700",onClick:()=>b(u,_),children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:_.fullName}),e.jsx("p",{className:"text-sm text-gray-500",children:_.email})]}),e.jsxs(X,{variant:"outline",children:["Role ID: ",_.roleId]})]})},_.id))})]})}),e.jsxs("div",{className:"space-y-4 p-4 bg-gray-50 dark:bg-gray-800 rounded-lg",children:[e.jsx("h4",{className:"text-lg font-semibold text-center",children:"Work Analysis: Composition & Publishing Sides"}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("h5",{className:"text-md font-semibold text-center text-blue-700 dark:text-blue-300",children:"Composition Side"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Songwriting (50% weight)"}),e.jsxs("p",{className:`text-lg font-bold ${P.songwriting>100?"text-red-600":"text-green-600"}`,children:[P.songwriting,"% / 100%"]}),e.jsxs("p",{className:"text-xs text-gray-500",children:["= ",I.songwritingWeighted.toFixed(1),"% of work"]})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Melody Creation (25% weight)"}),e.jsxs("p",{className:`text-lg font-bold ${P.melody>100?"text-red-600":"text-green-600"}`,children:[P.melody,"% / 100%"]}),e.jsxs("p",{className:"text-xs text-gray-500",children:["= ",I.melodyWeighted.toFixed(1),"% of work"]})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Beat/Music Composition (25% weight)"}),e.jsxs("p",{className:`text-lg font-bold ${P.beatProduction>100?"text-red-600":"text-green-600"}`,children:[P.beatProduction,"% / 100%"]}),e.jsxs("p",{className:"text-xs text-gray-500",children:["= ",I.beatCompositionWeighted.toFixed(1),"% of work"]})]})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("h5",{className:"text-md font-semibold text-center text-emerald-700 dark:text-emerald-300",children:"Publishing Side"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Publishing"}),e.jsxs("p",{className:`text-lg font-bold ${P.publishing>100?"text-red-600":"text-green-600"}`,children:[P.publishing,"% / 100%"]}),e.jsxs("p",{className:"text-xs text-gray-500",children:["= ",I.publishingWeighted.toFixed(1),"% of work"]})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Executive Producer"}),e.jsxs("p",{className:`text-lg font-bold ${I.executiveProducerPercent>100?"text-red-600":"text-green-600"}`,children:[I.executiveProducerPercent,"% / 100%"]}),e.jsx("p",{className:"text-xs text-gray-500",children:I.hasExecutiveProducers?"Manual entries":"Wai'tuMusic default"})]})]})]}),e.jsxs("div",{className:"text-center p-3 bg-white dark:bg-gray-900 rounded border",children:[e.jsx("p",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Total Work Share Registration (Composition + Publishing)"}),e.jsxs("p",{className:`text-xl font-bold ${Math.abs(I.totalWorkPercent-100)>.1?"text-red-600":"text-green-600"}`,children:[I.totalWorkPercent.toFixed(1),"% / 100%"]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:Math.abs(I.totalWorkPercent-100)<.1?" Perfect work split! Ready to proceed.":" Total work share registration must equal 100% to proceed."})]})]}),a.participants.map((_,B)=>{var O;return e.jsxs("div",{className:"p-4 border rounded-lg space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("h3",{className:"font-medium",children:["Participant ",B+1]}),e.jsxs("div",{className:"flex gap-2",children:[_.assignedUserId?e.jsxs(X,{variant:"secondary",className:"flex items-center gap-1",children:[e.jsx(ta,{className:"h-3 w-3"}),"Platform User"]}):e.jsxs(E,{type:"button",variant:"outline",size:"sm",onClick:()=>{m(B),h(!0)},children:[e.jsx(hr,{className:"h-4 w-4 mr-1"}),"Assign User"]}),e.jsx(E,{type:"button",variant:"ghost",size:"sm",onClick:()=>y(B),children:e.jsx(Xt,{className:"h-4 w-4"})})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(q,{children:"Full Name *"}),e.jsx($,{value:_.name,onChange:z=>f(B,"name",z.target.value),placeholder:"Enter full name",required:!0})]}),e.jsxs("div",{children:[e.jsx(q,{children:"Email Address *"}),e.jsx($,{type:"email",value:_.email,onChange:z=>f(B,"email",z.target.value),placeholder:"Enter email address",required:!0})]}),e.jsxs("div",{children:[e.jsx(q,{children:"Address *"}),e.jsx(mt,{value:_.address,onChange:z=>f(B,"address",z.target.value),placeholder:"Enter full address",required:!0})]}),e.jsxs("div",{children:[e.jsx(q,{children:"Phone Number"}),e.jsx($,{value:_.phone||"",onChange:z=>f(B,"phone",z.target.value),placeholder:"Enter phone number"})]}),e.jsxs("div",{children:[e.jsx(q,{children:"IPI Number"}),e.jsx($,{value:_.ipiNumber||"",onChange:z=>f(B,"ipiNumber",z.target.value),placeholder:"Enter IPI number"})]}),e.jsxs("div",{children:[e.jsx(q,{children:"PRO Affiliation"}),e.jsx($,{value:_.proAffiliation||"",onChange:z=>f(B,"proAffiliation",z.target.value),placeholder:"e.g., ASCAP, BMI, SESAC"})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(q,{children:"Roles & Percentages"}),e.jsxs(E,{type:"button",variant:"outline",size:"sm",onClick:()=>j(B),children:[e.jsx(st,{className:"h-4 w-4 mr-1"}),"Add Role"]})]}),(O=_.roles)==null?void 0:O.map((z,F)=>e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"text-xs text-gray-500 font-mono bg-gray-100 dark:bg-gray-900 px-2 py-1 rounded",children:["Entry ID: ",z.entryId||T(z.type)]}),e.jsxs("div",{className:"flex items-center gap-2 p-3 bg-gray-50 dark:bg-gray-800 rounded",children:[e.jsxs(Re,{value:z.type,onValueChange:K=>k(B,F,"type",K),children:[e.jsx(Me,{className:"w-48",children:e.jsx(Oe,{})}),e.jsxs(_e,{children:[e.jsx(U,{value:"songwriter",children:"Songwriter (50% weighted)"}),e.jsx(U,{value:"melody_creator",children:"Melody Creator (25% weighted)"}),e.jsx(U,{value:"beat_music_composer",children:"Beat/Music Composer (25% weighted)"}),e.jsx(U,{value:"recording_artist",children:"Recording Artist"}),e.jsx(U,{value:"label_rep",children:"Label Representative"}),e.jsx(U,{value:"publisher",children:"Publisher"}),e.jsx(U,{value:"studio_rep",children:"Studio Representative"}),e.jsx(U,{value:"executive_producer",children:"Executive Producer"})]})]}),e.jsx($,{type:"number",min:"0",max:"100",step:"0.1",value:z.percentage||0,onChange:K=>k(B,F,"percentage",parseFloat(K.target.value)||0),className:"w-20",placeholder:"%",readOnly:["recording_artist","label_rep","studio_rep"].includes(z.type),disabled:["recording_artist","label_rep","studio_rep"].includes(z.type)}),e.jsx("span",{className:"text-sm text-gray-500",children:"%"}),e.jsx($,{value:z.notes||"",onChange:K=>k(B,F,"notes",K.target.value),placeholder:"Notes (optional)",className:"flex-1"}),e.jsx(E,{type:"button",variant:"ghost",size:"sm",onClick:()=>S(B,F),children:e.jsx(Xt,{className:"h-4 w-4"})})]})]},F))]})]},_.id)}),e.jsxs(E,{type:"button",variant:"outline",onClick:v,className:"w-full",children:[e.jsx(st,{className:"h-4 w-4 mr-2"}),"Add Participant"]})]})]}),e.jsxs(R,{children:[e.jsxs(Y,{children:[e.jsx(Q,{children:"Service Pricing"}),e.jsx(rt,{children:"Enhanced splitsheet service pricing and payment information"})]}),e.jsx(L,{className:"space-y-4",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx(q,{children:"Base Price"}),e.jsx("div",{className:"text-2xl font-bold text-green-600",children:"$15.00"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Per authentic splitsheet"})]}),e.jsxs("div",{children:[e.jsx(q,{children:"Discount"}),e.jsx("div",{className:"text-lg font-medium",children:a.discountPercentage>0?`${a.discountPercentage}% off`:"No discount"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Management tier benefits"})]}),e.jsxs("div",{children:[e.jsx(q,{children:"Final Price"}),e.jsxs("div",{className:"text-2xl font-bold text-emerald-600",children:["$",a.finalPrice.toFixed(2)]}),e.jsx("p",{className:"text-sm text-gray-500",children:"Total due"})]})]})})]}),e.jsx("div",{className:"flex justify-end",children:e.jsx(E,{type:"submit",size:"lg",disabled:x.isPending,className:"min-w-48",children:x.isPending?"Creating Splitsheet...":`Create Splitsheet - $${a.finalPrice.toFixed(2)}`})})]})]})}function E1(){return e.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900",children:e.jsx(XX,{})})}function JX(){const{user:t}=_s(),[s,n]=N.useState(!1),[a,r]=N.useState(!1),[i,l]=N.useState(!1);return t?e.jsxs("div",{className:"container mx-auto px-4 py-8",children:[e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold",children:"Revenue Analytics"}),e.jsx("p",{className:"text-muted-foreground",children:"Comprehensive revenue tracking and analytics dashboard"})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[e.jsxs(R,{children:[e.jsxs(Y,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(Q,{className:"text-sm font-medium",children:"Total Revenue"}),e.jsx(It,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(L,{children:[e.jsx("div",{className:"text-2xl font-bold",children:"$0.00"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"No revenue data available"})]})]}),e.jsxs(R,{children:[e.jsxs(Y,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(Q,{className:"text-sm font-medium",children:"Monthly Revenue"}),e.jsx(wn,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(L,{children:[e.jsx("div",{className:"text-2xl font-bold",children:"$0.00"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Start earning revenue through bookings"})]})]}),e.jsxs(R,{children:[e.jsxs(Y,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(Q,{className:"text-sm font-medium",children:"Active Bookings"}),e.jsx(dt,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(L,{children:[e.jsx("div",{className:"text-2xl font-bold",children:"0"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"No active bookings"})]})]}),e.jsxs(R,{children:[e.jsxs(Y,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(Q,{className:"text-sm font-medium",children:"Growth Rate"}),e.jsx(_n,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(L,{children:[e.jsx("div",{className:"text-2xl font-bold",children:"0%"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Waiting for revenue data"})]})]})]}),e.jsxs(R,{children:[e.jsxs(Y,{children:[e.jsxs(Q,{className:"flex items-center gap-2",children:[e.jsx(wn,{className:"h-5 w-5"}),"Revenue Analytics & Forecasting"]}),e.jsx(rt,{children:"Manage your revenue streams, set goals, and generate AI-powered forecasts"})]}),e.jsxs(L,{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsx(E,{onClick:()=>n(!0),className:"flex items-center gap-2 h-auto p-4",variant:"outline",children:e.jsxs("div",{className:"flex flex-col items-center gap-2",children:[e.jsx(st,{className:"h-6 w-6"}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"font-semibold",children:"Add Revenue Stream"}),e.jsx("div",{className:"text-xs text-muted-foreground",children:"Track new income sources"})]})]})}),e.jsx(E,{onClick:()=>r(!0),className:"flex items-center gap-2 h-auto p-4",variant:"outline",children:e.jsxs("div",{className:"flex flex-col items-center gap-2",children:[e.jsx(Es,{className:"h-6 w-6"}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"font-semibold",children:"Create Revenue Goal"}),e.jsx("div",{className:"text-xs text-muted-foreground",children:"Set financial targets"})]})]})}),e.jsx(E,{onClick:()=>l(!0),className:"flex items-center gap-2 h-auto p-4",variant:"outline",children:e.jsxs("div",{className:"flex flex-col items-center gap-2",children:[e.jsx(Is,{className:"h-6 w-6"}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"font-semibold",children:"Generate Forecast"}),e.jsx("div",{className:"text-xs text-muted-foreground",children:"AI-powered predictions"})]})]})})]}),e.jsxs("div",{className:"text-center py-8 border-2 border-dashed border-muted rounded-lg",children:[e.jsx(wn,{className:"mx-auto h-12 w-12 text-muted-foreground mb-4"}),e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Start Building Your Revenue Analytics"}),e.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Use the buttons above to add revenue streams, set goals, and generate forecasts. Your analytics dashboard will appear here as you build your revenue data."}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 justify-center",children:[e.jsx(E,{onClick:()=>{window.location.href="/bookings"},variant:"default",children:"View Bookings"}),e.jsx(E,{onClick:()=>{window.location.href="/dashboard"},variant:"outline",children:"Go to Dashboard"})]})]})]})]})]})]}),e.jsx(RE,{open:s,onOpenChange:n,userId:t.id}),e.jsx(OE,{open:a,onOpenChange:r,userId:t.id}),e.jsx(DE,{open:i,onOpenChange:l,userId:t.id})]}):e.jsx("div",{className:"flex items-center justify-center min-h-screen",children:e.jsx("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-primary"})})}const eJ=lt.createContext(null);function tJ(){const t=lt.useContext(eJ);if(!t)throw new Error("useModals must be used within a ModalSystemProvider");return t}function sJ(){const t=tJ(),s=()=>{t.showNotification({type:"success",title:"Database Optimization Complete",message:"All database queries have been optimized and performance improved by 25%.",details:["Query response time reduced from 450ms to 340ms","Index optimization completed on 12 tables","Connection pool optimized for better resource usage","Automatic maintenance scheduled"],actionButton:{label:"View Performance Report",action:()=>console.log("Performance report opened")}})},n=()=>{t.showSystemConfig({configType:"database"})},a=()=>{t.showUserManagement({mode:"create",onUserAction:(p,g)=>{console.log("User action:",p,g),t.showSuccess("User Created Successfully",`New user ${g==null?void 0:g.name} has been created with ${g==null?void 0:g.role} privileges.`,{label:"Send Welcome Email",action:()=>console.log("Welcome email sent")})}})},r=()=>{t.showMediaManagement({mediaType:"photos"})},i=()=>{t.showProgress({title:"System Backup in Progress",message:"Creating comprehensive system backup...",steps:["Backing up database","Archiving media files","Compressing data","Uploading to secure storage","Verifying backup integrity"],currentStep:0,allowCancel:!0,onCancel:()=>console.log("Backup cancelled")});let p=0;const g=setInterval(()=>{p++,t.updateProgress(p/5*100,p),p>=5&&(clearInterval(g),t.closeModal("progress"),t.showSuccess("Backup Complete","System backup has been successfully created and stored securely.",{label:"Download Backup",action:()=>console.log("Backup download initiated")}))},1500)},l=()=>{t.showError("Database Connection Failed","Unable to establish connection to the database server. This may affect platform functionality.",{code:"DB_CONNECTION_ERROR",details:"Connection timeout after 30 seconds",stack:"at DatabaseConnection.connect (db.ts:42)"},["Check database server status and ensure it is running","Verify network connectivity between application and database","Check database credentials and connection string","Review database server logs for any error messages","Consider increasing connection timeout settings"],()=>{console.log("Retrying database connection..."),t.showProgress({title:"Reconnecting to Database",message:"Attempting to establish database connection...",allowCancel:!1}),setTimeout(()=>{t.closeModal("progress"),t.showSuccess("Connection Restored","Database connection has been successfully restored. All systems are operational.")},3e3)})},c=()=>{t.showDataIntegrityReport()},o=()=>{const p={title:"SXSW Music Festival 2025 - Artist Showcase",organizer:"SXSW Conference & Festivals",description:"Apply for performance opportunities at SXSW 2025. Showcase your music to industry professionals, media, and music fans from around the world.",sourceUrl:"https://www.sxsw.com/apply-to-play/",compensationType:"exposure",compensationRange:"Performance opportunity + industry exposure",applicationDeadline:"2025-02-15",tags:["festival","showcase","industry","networking"]};t.showOpportunityValidation(p,g=>{console.log("Opportunity validated:",g),t.showSuccess("Opportunity Validated","The opportunity data has been verified and is ready for use.",{label:"Add to Opportunities",action:()=>console.log("Opportunity added to system")})})},d=()=>{t.showSystemStatus({type:"maintenance",title:"Scheduled Maintenance",message:"System maintenance is scheduled to begin in 30 minutes. Some features may be temporarily unavailable.",timestamp:new Date().toISOString(),estimatedDuration:"2 hours",affectedSystems:["OppHub Scanner","Database Optimization","Email Services"],actionRequired:!0})},h=()=>{t.showDatabaseOptimization()},u=()=>{t.showSecurityScan()},m=()=>{t.showBackupProcess()};return e.jsxs("div",{className:"container mx-auto py-8 max-w-6xl",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold mb-4",children:"Modal System Test Suite"}),e.jsx("p",{className:"text-muted-foreground",children:"Comprehensive test interface for the new modal-based notification system that replaces all toast notifications."}),e.jsx(X,{variant:"outline",className:"mt-2",children:"Toast-Free Architecture"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[e.jsxs(R,{children:[e.jsx(Y,{children:e.jsxs(Q,{className:"flex items-center gap-2",children:[e.jsx(ct,{className:"h-5 w-5 text-green-500"}),"Notification Modals"]})}),e.jsxs(L,{className:"space-y-3",children:[e.jsx(E,{onClick:s,className:"w-full",children:"Test Success Notification"}),e.jsx(E,{onClick:l,variant:"destructive",className:"w-full",children:"Test Error Modal"}),e.jsx(E,{onClick:i,variant:"outline",className:"w-full",children:"Test Progress Modal"})]})]}),e.jsxs(R,{children:[e.jsx(Y,{children:e.jsxs(Q,{className:"flex items-center gap-2",children:[e.jsx(Gt,{className:"h-5 w-5 text-blue-500"}),"System Configuration"]})}),e.jsxs(L,{className:"space-y-3",children:[e.jsxs(E,{onClick:n,className:"w-full",children:[e.jsx(Jn,{className:"h-4 w-4 mr-2"}),"Database Config"]}),e.jsxs(E,{onClick:()=>t.showSystemConfig({configType:"security"}),className:"w-full",children:[e.jsx(Bt,{className:"h-4 w-4 mr-2"}),"Security Config"]}),e.jsxs(E,{onClick:()=>t.showSystemConfig({configType:"performance"}),className:"w-full",children:[e.jsx(_n,{className:"h-4 w-4 mr-2"}),"Performance Config"]})]})]}),e.jsxs(R,{children:[e.jsx(Y,{children:e.jsxs(Q,{className:"flex items-center gap-2",children:[e.jsx(Ze,{className:"h-5 w-5 text-purple-500"}),"User Management"]})}),e.jsxs(L,{className:"space-y-3",children:[e.jsx(E,{onClick:a,className:"w-full",children:"Create User"}),e.jsx(E,{onClick:()=>t.showUserManagement({mode:"edit",userData:{id:1,name:"John Doe",email:"john@example.com",role:"artist"}}),className:"w-full",children:"Edit User"}),e.jsx(E,{onClick:()=>t.showUserManagement({mode:"view",userData:{id:1,name:"John Doe",email:"john@example.com",role:"artist",status:"active",createdAt:"2025-01-01"}}),variant:"outline",className:"w-full",children:"View User Details"})]})]}),e.jsxs(R,{children:[e.jsx(Y,{children:e.jsxs(Q,{className:"flex items-center gap-2",children:[e.jsx(Ue,{className:"h-5 w-5 text-orange-500"}),"Media Management"]})}),e.jsxs(L,{className:"space-y-3",children:[e.jsx(E,{onClick:r,className:"w-full",children:"Photo Gallery"}),e.jsx(E,{onClick:()=>t.showMediaManagement({mediaType:"videos"}),className:"w-full",children:"Video Library"}),e.jsx(E,{onClick:()=>t.showMediaManagement({mediaType:"audio"}),className:"w-full",children:"Audio Files"})]})]}),e.jsxs(R,{children:[e.jsx(Y,{children:e.jsxs(Q,{className:"flex items-center gap-2",children:[e.jsx(Bt,{className:"h-5 w-5 text-green-600"}),"Data Integrity System"]})}),e.jsxs(L,{className:"space-y-3",children:[e.jsx(E,{onClick:c,className:"w-full",children:"Data Integrity Report"}),e.jsx(E,{onClick:o,className:"w-full",children:"Validate Opportunity"}),e.jsx(E,{onClick:d,variant:"outline",className:"w-full",children:"System Status"})]})]}),e.jsxs(R,{children:[e.jsx(Y,{children:e.jsxs(Q,{className:"flex items-center gap-2",children:[e.jsx(_n,{className:"h-5 w-5 text-red-500"}),"System Actions"]})}),e.jsxs(L,{className:"space-y-3",children:[e.jsx(E,{onClick:h,className:"w-full",children:"Database Optimization"}),e.jsx(E,{onClick:u,className:"w-full",children:"Security Scan"}),e.jsx(E,{onClick:m,className:"w-full",children:"Backup Process"})]})]})]}),e.jsxs(R,{className:"mt-8",children:[e.jsx(Y,{children:e.jsxs(Q,{className:"flex items-center gap-2",children:[e.jsx(gm,{className:"h-5 w-5 text-blue-500"}),"Modal System Features"]})}),e.jsx(L,{children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold mb-2",children:"Replaced Toast Notifications:"}),e.jsxs("ul",{className:"text-sm space-y-1 text-muted-foreground",children:[e.jsx("li",{children:" Success confirmations"}),e.jsx("li",{children:" Error notifications"}),e.jsx("li",{children:" Warning messages"}),e.jsx("li",{children:" Information alerts"}),e.jsx("li",{children:" Progress indicators"})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold mb-2",children:"Enhanced Features:"}),e.jsxs("ul",{className:"text-sm space-y-1 text-muted-foreground",children:[e.jsx("li",{children:" Detailed error information"}),e.jsx("li",{children:" Action buttons for follow-up"}),e.jsx("li",{children:" Progress tracking with steps"}),e.jsx("li",{children:" System status monitoring"}),e.jsx("li",{children:" Data integrity validation"})]})]})]})})]})]})}function nJ(){const[,t]=As();return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-purple-50 p-4",children:e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsxs("div",{className:"mb-6",children:[e.jsxs(E,{variant:"ghost",onClick:()=>t("/dashboard"),className:"mb-4",children:[e.jsx(Rn,{className:"w-4 h-4 mr-2"}),"Back to Dashboard"]}),e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx(Es,{className:"h-8 w-8 text-blue-600"}),e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"AI-Powered Opportunity Matching"})]}),e.jsx("p",{className:"text-gray-600 text-lg",children:"Discover personalized opportunities with intelligent matching algorithms tailored to your profile and career goals."})]}),e.jsxs(R,{children:[e.jsxs(Y,{children:[e.jsx(Q,{className:"text-xl",children:"Your Personalized Opportunity Feed"}),e.jsx("p",{className:"text-gray-600",children:"Our AI analyzes your profile, skills, location, and career stage to find the most relevant opportunities for you."})]}),e.jsx(L,{children:e.jsx(QT,{})})]})]})})}function aJ(){const[t,s]=N.useState(null),[n,a]=N.useState(null),[r,i]=N.useState(!1),l=[{professionalType:"photographer",hasEquipment:!0,equipment:{cameraModel:"Canon EOS R5",lensSpecs:["85mm f/1.2L","24-70mm f/2.8L"],sensorType:"Full Frame",maxISO:51200,megapixels:45,lightingEquipment:["Profoto B10 Plus","LED Panel Kit"]},artistGenre:"Caribbean Neo Soul",internalObjectives:["Album artwork preparation","Social media content for Instagram/TikTok","Press kit professional headshots"]},{professionalType:"photographer",hasEquipment:!1,artistGenre:"Afrobeats",internalObjectives:["Tour promotion materials","Brand consistency development"]},{professionalType:"videographer",hasEquipment:!0,equipment:{cameraModel:"Sony FX6",lensSpecs:["24-70mm f/2.8 GM","70-200mm f/2.8 GM"],videoCapabilities:["4K 120fps","S-Log3"],audioEquipment:["Rode Wireless GO II","Zoom F6 Recorder"],lightingEquipment:["Aputure 300d Mark II","RGB LED Panels"]},artistGenre:"Dancehall",internalObjectives:["Music video B-roll","Performance documentation","Behind-the-scenes content"]},{professionalType:"videographer",hasEquipment:!1,artistGenre:"Pop/R&B",internalObjectives:["Live performance capture","Social media video content"]}],c=async o=>{var d,h,u,m,p,g,x,v;i(!0),s(o),await new Promise(y=>setTimeout(y,1500)),o.hasEquipment&&o.equipment?a({type:"equipment-specific",technicalRequirements:{aperture:{recommended:(d=o.equipment.cameraModel)!=null&&d.includes("Canon")?"f/1.8 - f/2.8":"f/2.0 - f/2.8",range:"f/1.2 - f/4.0",reasoning:`Optimized for ${o.equipment.cameraModel} native performance and ${o.artistGenre} genre requirements`},shutterSpeed:{recommended:"1/125s - 1/250s",range:"1/60s - 1/500s",reasoning:"Balanced for performance movement and lighting conditions"},iso:{recommended:Math.min(1600,(o.equipment.maxISO||6400)/4),maxAcceptable:Math.min(6400,(o.equipment.maxISO||6400)/2),reasoning:`Utilizing ${o.equipment.cameraModel} optimal ISO performance range`}},equipmentSpecificGuidance:{hasEquipmentSpecs:!0,equipmentOptimizations:[`Camera optimization for ${o.equipment.cameraModel}`,o.equipment.lensSpecs?`Lens optimization: ${o.equipment.lensSpecs.join(", ")}`:"",o.equipment.lightingEquipment?`Lighting setup: ${o.equipment.lightingEquipment.join(", ")}`:""].filter(Boolean),specificRecommendations:[(h=o.equipment.cameraModel)!=null&&h.includes("Canon")?"Canon Color Science: Enhance skin tones using Portrait Picture Style":"",(u=o.equipment.cameraModel)!=null&&u.includes("Sony")?"Sony Real-time Eye AF: Ideal for performer tracking":"",(m=o.equipment.lensSpecs)!=null&&m.some(y=>y.includes("85mm"))?"85mm lens: Perfect for intimate performance shots and artist portraits":"",(p=o.equipment.lensSpecs)!=null&&p.some(y=>y.includes("24-70"))?"24-70mm zoom: Versatile for stage coverage without repositioning":""].filter(Boolean)},internalObjectiveAlignment:{hasInternalObjectives:!!(o.internalObjectives&&o.internalObjectives.length>0),objectiveGuidance:((g=o.internalObjectives)==null?void 0:g.map(y=>y.toLowerCase().includes("album")?"Album promotion focus: Capture professional-quality images suitable for album artwork and promotional materials":y.toLowerCase().includes("social media")?"Social media optimization: Focus on vertical formats and eye-catching compositions":y.toLowerCase().includes("press")?"Press kit development: Ensure professional headshots and performance documentation":y.toLowerCase().includes("tour")?"Tour promotion materials: Document performance energy and audience engagement":"Brand consistency: Maintain visual coherence with existing artist branding"))||[],strategicFocus:((x=o.internalObjectives)==null?void 0:x.map(y=>y.toLowerCase().includes("album")?"High-resolution, print-ready deliverables":y.toLowerCase().includes("social media")?"Multiple aspect ratios: 1:1, 9:16, 16:9":y.toLowerCase().includes("press")?"Publication-ready quality with comprehensive metadata":"Versatile content suitable for multiple applications"))||[]}}):a({type:"generic",genericCameraSettings:{aperture:"f/2.8 for most performance situations, f/1.8-f/2.0 for low light",shutterSpeed:"1/125s minimum for hand-held, 1/250s for performer movement",iso:"Start at ISO 1600, increase as needed up to camera native performance limit",focusMode:"Continuous AF (AI Servo/AF-C) for moving performers",meteringMode:"Matrix/Evaluative for complex stage lighting"},universalTechniques:["Shoot in RAW format for maximum post-processing flexibility","Use back-button focus for improved accuracy","Enable image stabilization if available on lens or body","Bracket exposures in challenging lighting conditions","Focus on performer's eyes when possible"],genreSpecificApproach:{energy:o.artistGenre==="Afrobeats"?"High-energy, vibrant shots capturing rhythmic intensity":"Polished, commercial-ready shots emphasizing star quality",lighting:o.artistGenre==="Dancehall"?"Embrace colorful stage lighting, use dramatic contrasts":"Clean, professional lighting that flatters performer",composition:"Performance shots, audience interaction, star moments"},fallbackEquipment:["Full-frame camera body preferred for low-light performance","85mm f/1.8 lens for portraits and performance shots","24-70mm f/2.8 for versatile stage coverage","External flash with diffusion for fill lighting","Backup camera body and extra batteries essential"],internalObjectiveAlignment:{hasInternalObjectives:!!(o.internalObjectives&&o.internalObjectives.length>0),objectiveGuidance:((v=o.internalObjectives)==null?void 0:v.map(y=>`Generic guidance aligned with: ${y}`))||["Standard professional documentation for comprehensive press kit and promotional use"],strategicFocus:["Versatile content suitable for multiple applications"]}}),i(!1)};return e.jsx("div",{className:"p-6 space-y-6",children:e.jsxs(R,{children:[e.jsx(Y,{children:e.jsxs(Q,{className:"flex items-center gap-2",children:[e.jsx(Es,{className:"w-5 h-5"}),"Technical Guidance System Demonstration"]})}),e.jsxs(L,{children:[e.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Demonstrates OppHub's ability to provide precise technical guidance based on actual professional equipment specifications, with comprehensive fallback to generic guidance when equipment details are unavailable."}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-6",children:l.map((o,d)=>{var h,u;return e.jsx(R,{className:"cursor-pointer hover:bg-muted/50 transition-colors",onClick:()=>c(o),children:e.jsxs(L,{className:"p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx(X,{variant:o.hasEquipment?"default":"secondary",children:o.hasEquipment?"Equipment-Specific":"Generic Guidance"}),e.jsx(Vi,{className:"w-4 h-4"})]}),e.jsx("h4",{className:"font-medium",children:o.professionalType.charAt(0).toUpperCase()+o.professionalType.slice(1)}),e.jsx("p",{className:"text-sm text-muted-foreground",children:o.artistGenre}),o.equipment&&e.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:[o.equipment.cameraModel," + ",((h=o.equipment.lensSpecs)==null?void 0:h.length)||0," lenses"]}),e.jsxs("div",{className:"mt-2",children:[e.jsx("p",{className:"text-xs font-medium",children:"Internal Objectives:"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:((u=o.internalObjectives)==null?void 0:u.slice(0,2).join(", "))||"Standard documentation"})]})]})},d)})}),r&&e.jsx("div",{className:"flex items-center justify-center py-8",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Gt,{className:"w-4 h-4 animate-spin"}),e.jsx("span",{children:"Generating technical guidance..."})]})}),n&&t&&e.jsxs(R,{children:[e.jsx(Y,{children:e.jsxs(Q,{className:"flex items-center gap-2",children:[n.type==="equipment-specific"?e.jsx(ct,{className:"w-5 h-5 text-green-500"}):e.jsx(Bl,{className:"w-5 h-5 text-blue-500"}),n.type==="equipment-specific"?"Equipment-Specific":"Generic"," Technical Guidance"]})}),e.jsx(L,{children:e.jsxs(Ut,{defaultValue:"technical",className:"w-full",children:[e.jsxs(jt,{className:"grid w-full grid-cols-3",children:[e.jsx(Ne,{value:"technical",children:"Technical Settings"}),e.jsx(Ne,{value:"equipment",children:"Equipment Guidance"}),e.jsx(Ne,{value:"objectives",children:"Internal Objectives"})]}),e.jsx(ge,{value:"technical",className:"space-y-4",children:n.type==="equipment-specific"?e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs(R,{children:[e.jsx(Y,{className:"pb-2",children:e.jsx(Q,{className:"text-sm",children:"Aperture"})}),e.jsxs(L,{children:[e.jsx("p",{className:"font-medium",children:n.technicalRequirements.aperture.recommended}),e.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:["Range: ",n.technicalRequirements.aperture.range]}),e.jsx("p",{className:"text-xs text-muted-foreground mt-2",children:n.technicalRequirements.aperture.reasoning})]})]}),e.jsxs(R,{children:[e.jsx(Y,{className:"pb-2",children:e.jsx(Q,{className:"text-sm",children:"Shutter Speed"})}),e.jsxs(L,{children:[e.jsx("p",{className:"font-medium",children:n.technicalRequirements.shutterSpeed.recommended}),e.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:["Range: ",n.technicalRequirements.shutterSpeed.range]}),e.jsx("p",{className:"text-xs text-muted-foreground mt-2",children:n.technicalRequirements.shutterSpeed.reasoning})]})]}),e.jsxs(R,{children:[e.jsx(Y,{className:"pb-2",children:e.jsx(Q,{className:"text-sm",children:"ISO"})}),e.jsxs(L,{children:[e.jsx("p",{className:"font-medium",children:n.technicalRequirements.iso.recommended}),e.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:["Max: ",n.technicalRequirements.iso.maxAcceptable]}),e.jsx("p",{className:"text-xs text-muted-foreground mt-2",children:n.technicalRequirements.iso.reasoning})]})]})]}):e.jsxs("div",{className:"space-y-4",children:[e.jsx("h4",{className:"font-medium",children:"Generic Camera Settings"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("strong",{children:"Aperture:"})," ",n.genericCameraSettings.aperture]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Shutter Speed:"})," ",n.genericCameraSettings.shutterSpeed]}),e.jsxs("div",{children:[e.jsx("strong",{children:"ISO:"})," ",n.genericCameraSettings.iso]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Focus Mode:"})," ",n.genericCameraSettings.focusMode]})]}),e.jsxs("div",{children:[e.jsx("h5",{className:"font-medium mb-2",children:"Universal Techniques:"}),e.jsx("ul",{className:"text-sm space-y-1",children:n.universalTechniques.map((o,d)=>e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx(ct,{className:"w-3 h-3 mt-0.5 text-green-500"}),o]},d))})]})]})}),e.jsx(ge,{value:"equipment",className:"space-y-4",children:n.type==="equipment-specific"?e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsxs("h4",{className:"font-medium mb-2 flex items-center gap-2",children:[e.jsx(ct,{className:"w-4 h-4 text-green-500"}),"Equipment Optimizations"]}),e.jsx("ul",{className:"text-sm space-y-1",children:n.equipmentSpecificGuidance.equipmentOptimizations.map((o,d)=>e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx(Gt,{className:"w-3 h-3 mt-0.5 text-blue-500"}),o]},d))})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium mb-2",children:"Specific Recommendations"}),e.jsx("ul",{className:"text-sm space-y-1",children:n.equipmentSpecificGuidance.specificRecommendations.map((o,d)=>e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx(Bl,{className:"w-3 h-3 mt-0.5 text-yellow-500"}),o]},d))})]})]}):e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsxs("h4",{className:"font-medium mb-2 flex items-center gap-2",children:[e.jsx(on,{className:"w-4 h-4 text-orange-500"}),"Generic Fallback Equipment"]}),e.jsx("ul",{className:"text-sm space-y-1",children:n.fallbackEquipment.map((o,d)=>e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx(Vi,{className:"w-3 h-3 mt-0.5 text-gray-500"}),o]},d))})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium mb-2",children:"Genre-Specific Approach"}),e.jsxs("div",{className:"text-sm space-y-2",children:[e.jsxs("div",{children:[e.jsx("strong",{children:"Energy:"})," ",n.genreSpecificApproach.energy]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Lighting:"})," ",n.genreSpecificApproach.lighting]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Composition:"})," ",n.genreSpecificApproach.composition]})]})]})]})}),e.jsx(ge,{value:"objectives",className:"space-y-4",children:e.jsxs("div",{children:[e.jsxs("h4",{className:"font-medium mb-2 flex items-center gap-2",children:[e.jsx(Es,{className:"w-4 h-4 text-purple-500"}),"Internal Objective Alignment",n.internalObjectiveAlignment.hasInternalObjectives&&e.jsx(X,{variant:"default",className:"ml-2",children:"Active"})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("h5",{className:"text-sm font-medium mb-1",children:"Objective Guidance:"}),e.jsx("ul",{className:"text-sm space-y-1",children:n.internalObjectiveAlignment.objectiveGuidance.map((o,d)=>e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx(Es,{className:"w-3 h-3 mt-0.5 text-purple-500"}),o]},d))})]}),e.jsxs("div",{children:[e.jsx("h5",{className:"text-sm font-medium mb-1",children:"Strategic Focus:"}),e.jsx("ul",{className:"text-sm space-y-1",children:n.internalObjectiveAlignment.strategicFocus.map((o,d)=>e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx(ct,{className:"w-3 h-3 mt-0.5 text-green-500"}),o]},d))})]})]})]})})]})})]})]})]})})}const rJ=()=>{const[t,s]=N.useState(null),[n,a]=N.useState(!1),[r,i]=N.useState(!1),[l,c]=N.useState(navigator.onLine);return N.useEffect(()=>{(()=>{const g=window.matchMedia("(display-mode: standalone)").matches,x=window.navigator.standalone===!0;i(g||x)})();const h=g=>{g.preventDefault(),s(g),a(!0)},u=()=>{i(!0),a(!1),s(null)},m=()=>c(!0),p=()=>c(!1);return window.addEventListener("beforeinstallprompt",h),window.addEventListener("appinstalled",u),window.addEventListener("online",m),window.addEventListener("offline",p),()=>{window.removeEventListener("beforeinstallprompt",h),window.removeEventListener("appinstalled",u),window.removeEventListener("online",m),window.removeEventListener("offline",p)}},[]),{isInstallable:n,isInstalled:r,isOnline:l,installPrompt:t,install:async()=>{if(t)try{await t.prompt();const{outcome:d}=await t.userChoice;d==="accepted"&&(s(null),a(!1))}catch(d){console.error("Installation failed:",d)}}}},iJ=()=>{const{isOnline:t}=rJ(),[s,n]=N.useState([]),[a,r]=N.useState(0);N.useEffect(()=>{(()=>{try{const u=localStorage.getItem("waitumusic_offline_bookings");if(u){const m=JSON.parse(u);n(m);const p=m.filter(g=>g.status==="pending_sync").length;r(p)}}catch(u){console.error("Error loading offline bookings:",u)}})();let h;return t&&a>0&&(h=setInterval(()=>{i()},3e4)),()=>{h&&clearInterval(h)}},[t,a]);const i=async()=>{if(t)try{const d=s.filter(h=>h.status==="pending_sync");for(const h of d)try{if((await fetch("/api/bookings",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("auth_token")}`},body:JSON.stringify({...h,syncedFromOffline:!0})})).ok){const m=s.map(p=>p.id===h.id?{...p,status:"synced"}:p);n(m),localStorage.setItem("waitumusic_offline_bookings",JSON.stringify(m)),r(p=>p-1)}}catch(u){console.error("Error syncing booking:",h.id,u)}}catch(d){console.error("Error during sync process:",d)}},l=async()=>{try{const d={artists:await c("/api/artists"),venues:await c("/api/venues"),userProfile:await c("/api/user/profile"),recentBookings:await c("/api/bookings?limit=20")};localStorage.setItem("waitumusic_offline_cache",JSON.stringify({data:d,timestamp:new Date().toISOString()}));const h=new CustomEvent("toast",{detail:{title:"Offline Data Downloaded",description:"Critical booking data is now available offline"}});window.dispatchEvent(h)}catch(d){console.error("Error downloading offline data:",d)}},c=async d=>{try{const h=await fetch(d,{headers:{Authorization:`Bearer ${localStorage.getItem("auth_token")}`}});return h.ok?await h.json():null}catch(h){return console.error("Error fetching data for offline cache:",d,h),null}},o=d=>{switch(d){case"synced":return"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-300";case"pending_sync":return"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-300";case"draft":return"bg-gray-100 text-gray-800 dark:bg-gray-800 dark:text-gray-300";default:return"bg-gray-100 text-gray-800 dark:bg-gray-800 dark:text-gray-300"}};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs(R,{children:[e.jsxs(Y,{children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[t?e.jsx(W6,{className:"h-5 w-5 text-green-500"}):e.jsx(G6,{className:"h-5 w-5 text-red-500"}),e.jsx(Q,{children:t?"Online":"Offline Mode"})]}),a>0&&e.jsxs(X,{variant:"secondary",className:"flex items-center space-x-1",children:[e.jsx(Xs,{className:"h-3 w-3"}),e.jsxs("span",{children:[a," pending sync"]})]})]}),e.jsx(rt,{children:t?"Connected to WaituMusic servers. All features available.":"Working offline. Some features may be limited, but you can still create bookings."})]}),e.jsx(L,{children:e.jsxs("div",{className:"flex space-x-2",children:[e.jsxs(E,{onClick:l,disabled:!t,variant:"outline",size:"sm",children:[e.jsx(Cs,{className:"h-4 w-4 mr-2"}),"Download for Offline"]}),a>0&&e.jsxs(E,{onClick:i,disabled:!t,size:"sm",children:[e.jsx(Xs,{className:"h-4 w-4 mr-2"}),"Sync Now"]})]})})]}),s.length>0&&e.jsxs(R,{children:[e.jsxs(Y,{children:[e.jsxs(Q,{className:"flex items-center space-x-2",children:[e.jsx(dt,{className:"h-5 w-5"}),e.jsx("span",{children:"Offline Bookings"})]}),e.jsx(rt,{children:"Bookings created or modified while offline"})]}),e.jsx(L,{children:e.jsx("div",{className:"space-y-3",children:s.map(d=>e.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(Ue,{className:"h-4 w-4 text-muted-foreground"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:d.artistName}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:[d.venue,"  ",new Date(d.eventDate).toLocaleDateString()]})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(X,{className:o(d.status),variant:"secondary",children:d.status.replace("_"," ")}),d.createdOffline&&e.jsx(X,{variant:"outline",className:"text-xs",children:"Created Offline"})]})]},d.id))})})]}),e.jsxs(R,{children:[e.jsxs(Y,{children:[e.jsx(Q,{children:"Offline Capabilities"}),e.jsx(rt,{children:"What you can do while offline"})]}),e.jsx(L,{children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("h4",{className:"font-medium text-green-600 dark:text-green-400",children:"Available Offline:"}),e.jsxs("ul",{className:"text-sm space-y-1 text-muted-foreground",children:[e.jsx("li",{children:" Create new bookings"}),e.jsx("li",{children:" View cached artist profiles"}),e.jsx("li",{children:" Access recent booking history"}),e.jsx("li",{children:" Edit draft bookings"}),e.jsx("li",{children:" Browse cached venue information"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("h4",{className:"font-medium text-yellow-600 dark:text-yellow-400",children:"Requires Internet:"}),e.jsxs("ul",{className:"text-sm space-y-1 text-muted-foreground",children:[e.jsx("li",{children:" Submit booking requests"}),e.jsx("li",{children:" Real-time availability checks"}),e.jsx("li",{children:" Payment processing"}),e.jsx("li",{children:" Live chat support"}),e.jsx("li",{children:" Social media integration"})]})]})]})})]})]})};function lJ(){const[t,s]=N.useState({totalInvestment:375e4,currentRevenue:85e4,artistsEnrolled:4,bookingsCompleted:156,roi:22.7,projectedRevenue:{year1:85e4,year2:15e5,year3:25e5,year4:4e6,year5:65e5}}),[n,a]=N.useState([{id:1,artistName:"L-L Octave",programLevel:"established",monthlyStipend:1e4,marketingSupport:75e3,tourSupport:15e4,recordingBudget:2e5,guaranteedBookings:36,totalEarnings:29e4,bookingsCompleted:42},{id:2,artistName:"JCro",programLevel:"developing",monthlyStipend:5e3,marketingSupport:35e3,tourSupport:6e4,recordingBudget:75e3,guaranteedBookings:24,totalEarnings:145e3,bookingsCompleted:28},{id:3,artistName:"Janet Azzouz",programLevel:"developing",monthlyStipend:5e3,marketingSupport:35e3,tourSupport:6e4,recordingBudget:75e3,guaranteedBookings:24,totalEarnings:132e3,bookingsCompleted:24},{id:4,artistName:"Princess Trinidad",programLevel:"emerging",monthlyStipend:2500,marketingSupport:15e3,tourSupport:25e3,recordingBudget:35e3,guaranteedBookings:12,totalEarnings:62e3,bookingsCompleted:16}]),r=c=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:0,maximumFractionDigits:0}).format(c),i=c=>{switch(c){case"superstar":return"bg-purple-100 text-purple-800 border-purple-200";case"established":return"bg-blue-100 text-blue-800 border-blue-200";case"developing":return"bg-green-100 text-green-800 border-green-200";case"emerging":return"bg-orange-100 text-orange-800 border-orange-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}},l=()=>n.reduce((c,o)=>c+o.monthlyStipend*12+o.marketingSupport+o.tourSupport+o.recordingBudget,0);return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-purple-50 p-6",children:e.jsxs("div",{className:"max-w-7xl mx-auto space-y-6",children:[e.jsxs("div",{className:"text-center space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-center space-x-3",children:[e.jsx(Ij,{className:"w-8 h-8 text-blue-600"}),e.jsx("h1",{className:"text-4xl font-bold text-gray-900",children:"ComeSeeTv USA, Inc. Integration"})]}),e.jsx("p",{className:"text-xl text-gray-600 max-w-3xl mx-auto",children:"Leveraging sister company resources for guaranteed financial success and artist development"}),e.jsx(X,{className:"bg-blue-100 text-blue-800 px-4 py-2 text-sm",children:"Registered US Corporation  Strategic Financial Partner"})]}),e.jsxs(Ut,{defaultValue:"overview",className:"space-y-6",children:[e.jsxs(jt,{className:"grid w-full grid-cols-4",children:[e.jsx(Ne,{value:"overview",children:"Financial Overview"}),e.jsx(Ne,{value:"artists",children:"Artist Programs"}),e.jsx(Ne,{value:"projections",children:"Revenue Projections"}),e.jsx(Ne,{value:"strategy",children:"Success Strategy"})]}),e.jsxs(ge,{value:"overview",className:"space-y-6",children:[e.jsxs("div",{className:"grid md:grid-cols-2 lg:grid-cols-4 gap-6",children:[e.jsx(R,{className:"bg-gradient-to-br from-green-50 to-green-100 border-green-200",children:e.jsxs(L,{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-green-600 text-sm font-medium",children:"Total Investment"}),e.jsx("p",{className:"text-2xl font-bold text-green-900",children:r(t.totalInvestment)})]}),e.jsx(It,{className:"w-8 h-8 text-green-600"})]}),e.jsx("p",{className:"text-xs text-green-700 mt-2",children:"ComeSeeTv USA backing"})]})}),e.jsx(R,{className:"bg-gradient-to-br from-blue-50 to-blue-100 border-blue-200",children:e.jsxs(L,{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-blue-600 text-sm font-medium",children:"Current Revenue"}),e.jsx("p",{className:"text-2xl font-bold text-blue-900",children:r(t.currentRevenue)})]}),e.jsx(Is,{className:"w-8 h-8 text-blue-600"})]}),e.jsxs("p",{className:"text-xs text-blue-700 mt-2",children:[t.roi.toFixed(1),"% ROI achieved"]})]})}),e.jsx(R,{className:"bg-gradient-to-br from-purple-50 to-purple-100 border-purple-200",children:e.jsxs(L,{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-purple-600 text-sm font-medium",children:"Artists Enrolled"}),e.jsx("p",{className:"text-2xl font-bold text-purple-900",children:t.artistsEnrolled})]}),e.jsx(Ze,{className:"w-8 h-8 text-purple-600"})]}),e.jsx("p",{className:"text-xs text-purple-700 mt-2",children:"In development programs"})]})}),e.jsx(R,{className:"bg-gradient-to-br from-orange-50 to-orange-100 border-orange-200",children:e.jsxs(L,{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-orange-600 text-sm font-medium",children:"Bookings Completed"}),e.jsx("p",{className:"text-2xl font-bold text-orange-900",children:t.bookingsCompleted})]}),e.jsx(dt,{className:"w-8 h-8 text-orange-600"})]}),e.jsx("p",{className:"text-xs text-orange-700 mt-2",children:"Guaranteed success rate"})]})})]}),e.jsxs(R,{children:[e.jsx(Y,{children:e.jsxs(Q,{className:"flex items-center",children:[e.jsx(s4,{className:"w-5 h-5 mr-2"}),"ComeSeeTv Investment Package Breakdown"]})}),e.jsxs(L,{children:[e.jsxs("div",{className:"grid md:grid-cols-2 lg:grid-cols-4 gap-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-green-600",children:"$250K"}),e.jsx("div",{className:"text-sm text-gray-600",children:"Startup Package"}),e.jsx("div",{className:"text-xs text-gray-500",children:"15% revenue share"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-blue-600",children:"$500K"}),e.jsx("div",{className:"text-sm text-gray-600",children:"Growth Package"}),e.jsx("div",{className:"text-xs text-gray-500",children:"12% revenue share"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-purple-600",children:"$1M"}),e.jsx("div",{className:"text-sm text-gray-600",children:"Premium Package"}),e.jsx("div",{className:"text-xs text-gray-500",children:"10% revenue share"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-orange-600",children:"$2M"}),e.jsx("div",{className:"text-sm text-gray-600",children:"Enterprise Package"}),e.jsx("div",{className:"text-xs text-gray-500",children:"8% revenue share"})]})]}),e.jsxs("div",{className:"mt-6 p-4 bg-blue-50 rounded-lg",children:[e.jsx("h4",{className:"font-medium text-blue-900 mb-2",children:"Package Benefits Include:"}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-2 text-sm text-blue-800",children:[e.jsx("div",{children:" US market access and distribution"}),e.jsx("div",{children:" Legal and business development support"}),e.jsx("div",{children:" Marketing and promotional infrastructure"}),e.jsx("div",{children:" Artist development funding"}),e.jsx("div",{children:" Guaranteed booking minimums"}),e.jsx("div",{children:" International expansion opportunities"})]})]})]})]})]}),e.jsx(ge,{value:"artists",className:"space-y-6",children:e.jsxs(R,{children:[e.jsxs(Y,{children:[e.jsxs(Q,{className:"flex items-center",children:[e.jsx(Rt,{className:"w-5 h-5 mr-2"}),"ComeSeeTv Artist Development Programs"]}),e.jsxs("p",{className:"text-sm text-gray-600",children:["Total Artist Investment: ",r(l())]})]}),e.jsx(L,{children:e.jsx("div",{className:"space-y-4",children:n.map(c=>e.jsxs(R,{className:"p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-10 h-10 bg-gradient-to-r from-blue-500 to-purple-500 rounded-full flex items-center justify-center text-white font-bold text-sm",children:c.artistName.charAt(0)}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold",children:c.artistName}),e.jsx(X,{className:i(c.programLevel),children:c.programLevel.charAt(0).toUpperCase()+c.programLevel.slice(1)})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"text-lg font-bold text-green-600",children:r(c.totalEarnings)}),e.jsx("div",{className:"text-xs text-gray-500",children:"Total earnings"})]})]}),e.jsxs("div",{className:"grid md:grid-cols-4 gap-4 text-sm",children:[e.jsxs("div",{className:"text-center p-2 bg-gray-50 rounded",children:[e.jsx("div",{className:"font-medium",children:r(c.monthlyStipend)}),e.jsx("div",{className:"text-gray-600",children:"Monthly Stipend"})]}),e.jsxs("div",{className:"text-center p-2 bg-gray-50 rounded",children:[e.jsx("div",{className:"font-medium",children:r(c.marketingSupport)}),e.jsx("div",{className:"text-gray-600",children:"Marketing Support"})]}),e.jsxs("div",{className:"text-center p-2 bg-gray-50 rounded",children:[e.jsx("div",{className:"font-medium",children:r(c.recordingBudget)}),e.jsx("div",{className:"text-gray-600",children:"Recording Budget"})]}),e.jsxs("div",{className:"text-center p-2 bg-gray-50 rounded",children:[e.jsxs("div",{className:"font-medium",children:[c.bookingsCompleted,"/",c.guaranteedBookings]}),e.jsx("div",{className:"text-gray-600",children:"Bookings Progress"})]})]}),e.jsxs("div",{className:"mt-3",children:[e.jsxs("div",{className:"flex justify-between text-xs text-gray-600 mb-1",children:[e.jsx("span",{children:"Booking Progress"}),e.jsxs("span",{children:[Math.min(100,c.bookingsCompleted/c.guaranteedBookings*100).toFixed(0),"%"]})]}),e.jsx(qs,{value:Math.min(100,c.bookingsCompleted/c.guaranteedBookings*100),className:"h-2"})]})]},c.id))})})]})}),e.jsx(ge,{value:"projections",className:"space-y-6",children:e.jsxs(R,{children:[e.jsx(Y,{children:e.jsxs(Q,{className:"flex items-center",children:[e.jsx(Es,{className:"w-5 h-5 mr-2"}),"5-Year Revenue Projections with ComeSeeTv Backing"]})}),e.jsxs(L,{children:[e.jsx("div",{className:"space-y-4",children:Object.entries(t.projectedRevenue).map(([c,o],d)=>e.jsxs("div",{className:"flex items-center justify-between p-4 bg-gradient-to-r from-blue-50 to-purple-50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-8 h-8 bg-blue-600 rounded-full flex items-center justify-center text-white font-bold text-sm",children:d+1}),e.jsxs("div",{children:[e.jsxs("div",{className:"font-medium",children:["Year ",d+1]}),e.jsxs("div",{className:"text-sm text-gray-600",children:[d===0&&"Platform launch with ComeSeeTv backing",d===1&&"Established artist programs",d===2&&"Full platform integration",d===3&&"International expansion",d===4&&"Superstar artist development"]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"text-xl font-bold text-green-600",children:r(o)}),d>0&&e.jsxs("div",{className:"text-sm text-green-700 flex items-center",children:[e.jsx(t4,{className:"w-3 h-3 mr-1"}),((o-Object.values(t.projectedRevenue)[d-1])/Object.values(t.projectedRevenue)[d-1]*100).toFixed(0),"% growth"]})]})]},c))}),e.jsxs("div",{className:"mt-6 p-4 bg-green-50 rounded-lg",children:[e.jsx("h4",{className:"font-medium text-green-900 mb-2",children:"Projected 5-Year Totals:"}),e.jsxs("div",{className:"grid md:grid-cols-3 gap-4 text-sm",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-green-600",children:r(Object.values(t.projectedRevenue).reduce((c,o)=>c+o,0))}),e.jsx("div",{className:"text-green-700",children:"Total Revenue"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-blue-600",children:r(t.totalInvestment)}),e.jsx("div",{className:"text-blue-700",children:"ComeSeeTv Investment"})]}),e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"text-2xl font-bold text-purple-600",children:[((Object.values(t.projectedRevenue).reduce((c,o)=>c+o,0)-t.totalInvestment)/t.totalInvestment*100).toFixed(0),"%"]}),e.jsx("div",{className:"text-purple-700",children:"5-Year ROI"})]})]})]})]})]})}),e.jsxs(ge,{value:"strategy",className:"space-y-6",children:[e.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[e.jsxs(R,{children:[e.jsx(Y,{children:e.jsxs(Q,{className:"flex items-center",children:[e.jsx(In,{className:"w-5 h-5 mr-2"}),"Platform Growth Strategy"]})}),e.jsx(L,{children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx(Bt,{className:"w-4 h-4 text-green-600 mt-0.5"}),e.jsxs("div",{className:"text-sm",children:[e.jsx("div",{className:"font-medium",children:"$3.75M Investment Pool"}),e.jsx("div",{className:"text-gray-600",children:"Complete financial backing for platform development"})]})]}),e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx(is,{className:"w-4 h-4 text-blue-600 mt-0.5"}),e.jsxs("div",{className:"text-sm",children:[e.jsx("div",{className:"font-medium",children:"US Market Access"}),e.jsx("div",{className:"text-gray-600",children:"Leverage ComeSeeTv registered status for market entry"})]})]}),e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx(Ij,{className:"w-4 h-4 text-purple-600 mt-0.5"}),e.jsxs("div",{className:"text-sm",children:[e.jsx("div",{className:"font-medium",children:"Legal & Business Support"}),e.jsx("div",{className:"text-gray-600",children:"Corporate structure and contract negotiation expertise"})]})]}),e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx(Is,{className:"w-4 h-4 text-orange-600 mt-0.5"}),e.jsxs("div",{className:"text-sm",children:[e.jsx("div",{className:"font-medium",children:"Marketing Infrastructure"}),e.jsx("div",{className:"text-gray-600",children:"Established promotional channels and industry connections"})]})]})]})})]}),e.jsxs(R,{children:[e.jsx(Y,{children:e.jsxs(Q,{className:"flex items-center",children:[e.jsx(Rt,{className:"w-5 h-5 mr-2"}),"Artist Success Guarantee"]})}),e.jsx(L,{children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx(It,{className:"w-4 h-4 text-green-600 mt-0.5"}),e.jsxs("div",{className:"text-sm",children:[e.jsx("div",{className:"font-medium",children:"Guaranteed Stipends"}),e.jsx("div",{className:"text-gray-600",children:"$2,500 - $25,000 monthly living support"})]})]}),e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx(dt,{className:"w-4 h-4 text-blue-600 mt-0.5"}),e.jsxs("div",{className:"text-sm",children:[e.jsx("div",{className:"font-medium",children:"Booking Minimums"}),e.jsx("div",{className:"text-gray-600",children:"12-52 guaranteed bookings annually per artist"})]})]}),e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx(Es,{className:"w-4 h-4 text-purple-600 mt-0.5"}),e.jsxs("div",{className:"text-sm",children:[e.jsx("div",{className:"font-medium",children:"Recording Budgets"}),e.jsx("div",{className:"text-gray-600",children:"$35K - $750K production funding"})]})]}),e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx(is,{className:"w-4 h-4 text-orange-600 mt-0.5"}),e.jsxs("div",{className:"text-sm",children:[e.jsx("div",{className:"font-medium",children:"Market Expansion"}),e.jsx("div",{className:"text-gray-600",children:"US access and international opportunities"})]})]})]})})]})]}),e.jsxs(R,{className:"bg-blue-50 border-blue-200",children:[e.jsx(Y,{children:e.jsxs(Q,{className:"flex items-center text-blue-900",children:[e.jsx(Bt,{className:"w-5 h-5 mr-2"}),"Risk Mitigation & Financial Security"]})}),e.jsx(L,{children:e.jsxs("div",{className:"grid md:grid-cols-2 gap-4 text-sm text-blue-800",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium mb-2",children:"Financial Stability"}),e.jsxs("ul",{className:"space-y-1",children:[e.jsx("li",{children:" ComeSeeTv backing provides market fluctuation protection"}),e.jsx("li",{children:" Diversified revenue streams across platform and artists"}),e.jsx("li",{children:" Emergency fund allocation from investment pool"})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium mb-2",children:"Legal Protection"}),e.jsxs("ul",{className:"space-y-1",children:[e.jsx("li",{children:" US corporate structure via ComeSeeTv USA, Inc."}),e.jsx("li",{children:" Comprehensive insurance for tours and projects"}),e.jsx("li",{children:" Professional legal support for all contracts"})]})]})]})})]})]})]})]})})}function oJ(){const[t,s]=N.useState([]),[n,a]=N.useState(!1),[r,i]=N.useState(new Date),l=async()=>{a(!0);try{const h=await xe("/api/data-integrity/issues");s(h.issues||[]),i(new Date)}catch(h){console.error("Failed to load data integrity issues:",h)}finally{a(!1)}},c=async()=>{a(!0);try{await xe("/api/data-integrity/run-fixes",{method:"POST"}),await l()}catch(h){console.error("Failed to run fixes:",h)}finally{a(!1)}};N.useEffect(()=>{l()},[]);const o=t.filter(h=>h.status==="active"),d=t.filter(h=>h.status==="fixed");return e.jsxs(R,{className:"w-full",children:[e.jsxs(Y,{className:"flex flex-row items-center justify-between",children:[e.jsxs(Q,{className:"flex items-center gap-2",children:[e.jsx(ya,{className:"h-5 w-5"}),"Data Integrity Fix Tracker"]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(E,{onClick:l,disabled:n,variant:"outline",size:"sm",children:[e.jsx(En,{className:`h-4 w-4 ${n?"animate-spin":""}`}),"Refresh"]}),e.jsx(E,{onClick:c,disabled:n||o.length===0,size:"sm",children:"Run Fixes"})]})]}),e.jsxs(L,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"bg-red-50 p-3 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ys,{className:"h-4 w-4 text-red-600"}),e.jsx("span",{className:"font-medium text-red-800",children:"Active Issues"})]}),e.jsx("div",{className:"text-2xl font-bold text-red-600",children:o.length})]}),e.jsxs("div",{className:"bg-green-50 p-3 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ct,{className:"h-4 w-4 text-green-600"}),e.jsx("span",{className:"font-medium text-green-800",children:"Fixed Issues"})]}),e.jsx("div",{className:"text-2xl font-bold text-green-600",children:d.length})]}),e.jsxs("div",{className:"bg-blue-50 p-3 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(En,{className:"h-4 w-4 text-blue-600"}),e.jsx("span",{className:"font-medium text-blue-800",children:"Last Refresh"})]}),e.jsx("div",{className:"text-sm text-blue-600",children:r.toLocaleTimeString()})]})]}),o.length>0&&e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium mb-2",children:"Active Issues"}),e.jsx("div",{className:"space-y-2",children:o.map(h=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-yellow-50 rounded-lg",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${h.type==="critical"?"bg-red-100 text-red-800":h.type==="medium"?"bg-yellow-100 text-yellow-800":"bg-blue-100 text-blue-800"}`,children:h.type}),e.jsx("span",{className:"font-medium",children:h.table})]}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:h.description})]}),e.jsx(ys,{className:"h-4 w-4 text-yellow-600"})]},h.id))})]}),d.length>0&&e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium mb-2",children:"Recently Fixed"}),e.jsx("div",{className:"space-y-2",children:d.slice(0,5).map(h=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-green-50 rounded-lg",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"px-2 py-1 text-xs rounded-full bg-green-100 text-green-800",children:"fixed"}),e.jsx("span",{className:"font-medium",children:h.table})]}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:h.description}),h.fixedAt&&e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Fixed: ",new Date(h.fixedAt).toLocaleString()]})]}),e.jsx(ct,{className:"h-4 w-4 text-green-600"})]},h.id))})]}),t.length===0&&!n&&e.jsxs("div",{className:"text-center py-8 text-gray-500",children:[e.jsx(ct,{className:"h-12 w-12 mx-auto mb-2 text-green-500"}),e.jsx("p",{children:"No data integrity issues found"}),e.jsx("p",{className:"text-sm",children:"All systems appear to be functioning normally"})]})]})]})}function cJ(){return e.jsxs("div",{className:"container mx-auto py-8 px-4 space-y-8",children:[e.jsxs("div",{className:"text-center space-y-4",children:[e.jsx("h1",{className:"text-4xl font-bold",children:"Data Integrity Fix Tracker"}),e.jsx("p",{className:"text-xl text-gray-600",children:"Demonstration of Dynamic Issue Tracking & Resolution"})]}),e.jsxs(R,{children:[e.jsx(Y,{children:e.jsxs(Q,{className:"flex items-center gap-2",children:[e.jsx(gm,{className:"h-5 w-5 text-blue-500"}),"How the Fix Tracker Works"]})}),e.jsx(L,{children:e.jsxs("div",{className:"grid md:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"text-center space-y-3",children:[e.jsx(ys,{className:"h-12 w-12 mx-auto text-red-500"}),e.jsx("h3",{className:"font-semibold",children:"1. Issues Detected"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Platform audit automatically detects data integrity issues and adds them to the active tracking list"})]}),e.jsxs("div",{className:"text-center space-y-3",children:[e.jsx(ya,{className:"h-12 w-12 mx-auto text-orange-500"}),e.jsx("h3",{className:"font-semibold",children:"2. Fixes Applied"}),e.jsx("p",{className:"text-sm text-gray-600",children:'When you apply a fix, the system records the action and marks the issue as "fixing"'})]}),e.jsxs("div",{className:"text-center space-y-3",children:[e.jsx(ct,{className:"h-12 w-12 mx-auto text-green-500"}),e.jsx("h3",{className:"font-semibold",children:"3. Issues Completed"}),e.jsx("p",{className:"text-sm text-gray-600",children:'Once verified, issues are marked as "completed" and automatically removed from the active issues list'})]})]})})]}),e.jsxs(R,{className:"bg-blue-50 border-blue-200",children:[e.jsx(Y,{children:e.jsx(Q,{className:"text-blue-800",children:"Real-Time Platform Status"})}),e.jsx(L,{children:e.jsxs("div",{className:"text-blue-700",children:[e.jsx("p",{className:"mb-2",children:e.jsx("strong",{children:"Latest Platform Audit Results:"})}),e.jsxs("ul",{className:"list-disc list-inside space-y-1 text-sm",children:[e.jsx("li",{children:" 4 components passing (Database Connectivity, User Authentication, Artist & Booking Management, System Performance)"}),e.jsx("li",{children:" 1 component failing (Data Integrity - 3 active issues detected)"}),e.jsx("li",{children:" 1 fix already applied and verified (internal_notes column added to bookings table)"}),e.jsx("li",{children:" 23 total users, 5 artists, 9 bookings tracked in system"})]})]})})]}),e.jsx(oJ,{}),e.jsxs(R,{className:"bg-green-50 border-green-200",children:[e.jsx(Y,{children:e.jsx(Q,{className:"text-green-800",children:"Try It Out"})}),e.jsx(L,{children:e.jsxs("div",{className:"text-green-700 space-y-2",children:[e.jsx("p",{children:e.jsx("strong",{children:"To see the fix tracker in action:"})}),e.jsxs("ol",{className:"list-decimal list-inside space-y-2 text-sm",children:[e.jsx("li",{children:"Select one of the active issues from the dropdown above"}),e.jsx("li",{children:"Enter a description of how you would fix the issue"}),e.jsx("li",{children:'Click "Apply Fix" - the issue will change status to "fixing"'}),e.jsx("li",{children:'Click "Mark Completed" next to the issue'}),e.jsx("li",{children:"Watch as the issue is automatically removed from the active issues list and moved to completed"}),e.jsx("li",{children:"Run Platform Audit again to see the updated metrics"})]}),e.jsx("p",{className:"mt-4 font-medium text-green-800",children:"This demonstrates how the system automatically updates status and removes resolved items from the active issues listing, exactly as requested!"})]})})]})]})}const dJ=({albumId:t,artistUserId:s,onAssignmentComplete:n})=>{const[a,r]=N.useState([]),[i,l]=N.useState(""),[c,o]=N.useState(!1),{toast:d}=nt(),h=Tt(),{data:u,isLoading:m}=ke({queryKey:["/api/albums",t],queryFn:()=>xe(`/api/albums/${t}`)}),{data:p=[],isLoading:g}=ke({queryKey:["/api/merchandise/artist",s],queryFn:()=>xe(`/api/merchandise/artist/${s}`)}),{data:x=[],isLoading:v}=ke({queryKey:["/api/album-merchandise-assignments",t],queryFn:()=>xe(`/api/album-merchandise-assignments?albumId=${t}`)}),y=Xe({mutationFn:T=>xe("/api/album-merchandise-assignments",{method:"POST",body:JSON.stringify(T)}),onSuccess:()=>{d({title:"Assignment Created",description:"Merchandise successfully linked to album"}),h.invalidateQueries({queryKey:["/api/album-merchandise-assignments"]}),r([]),l(""),n==null||n()},onError:T=>{d({title:"Assignment Failed",description:T.message||"Failed to link merchandise to album",variant:"destructive"})}}),f=Xe({mutationFn:T=>xe(`/api/album-merchandise-assignments/${T}`,{method:"DELETE"}),onSuccess:()=>{d({title:"Assignment Removed",description:"Merchandise unlinked from album"}),h.invalidateQueries({queryKey:["/api/album-merchandise-assignments"]})}}),b=()=>{if(a.length===0){d({title:"No Selection",description:"Please select at least one merchandise item",variant:"destructive"});return}a.forEach(T=>{y.mutate({albumId:t,merchandiseId:T,assignmentNotes:i.trim()||void 0})})},j=()=>x.map(T=>T.merchandiseId),S=()=>{const T=j();return p.filter(A=>!T.includes(A.id)&&A.isActive)};if(m||g||v)return e.jsx(R,{className:"w-full",children:e.jsx(L,{className:"p-6",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Qt,{className:"h-4 w-4 animate-spin"}),e.jsx("span",{children:"Loading merchandise assignment system..."})]})})});const k=S();return e.jsxs(R,{className:"w-full",children:[e.jsxs(Y,{children:[e.jsxs(Q,{className:"flex items-center space-x-2",children:[e.jsx(vu,{className:"h-5 w-5"}),e.jsx("span",{children:"Album-Merchandise Linking"})]}),e.jsxs(rt,{children:['Connect merchandise items to "',u==null?void 0:u.title,'" for cross-promotion and bundling opportunities']})]}),e.jsxs(L,{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center space-x-4 p-4 bg-muted/50 rounded-lg",children:[e.jsx(Ue,{className:"h-8 w-8 text-primary"}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold",children:u==null?void 0:u.title}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Uploaded ",u!=null&&u.createdAt?new Date(u.createdAt).toLocaleDateString():"Recently"]})]})]}),x.length>0&&e.jsxs("div",{className:"space-y-3",children:[e.jsxs("h4",{className:"font-medium flex items-center space-x-2",children:[e.jsx(ct,{className:"h-4 w-4 text-green-600"}),e.jsxs("span",{children:["Connected Merchandise (",x.length,")"]})]}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3",children:x.map(T=>e.jsxs(R,{className:"p-3",children:[e.jsxs("div",{className:"flex items-start justify-between space-x-2",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"font-medium text-sm truncate",children:T.merchandise.name}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:["$",T.merchandise.price]}),e.jsx(X,{variant:"outline",className:"text-xs mt-1",children:T.merchandise.category})]}),e.jsx(E,{size:"sm",variant:"ghost",onClick:()=>f.mutate(T.id),disabled:f.isPending,className:"text-xs",children:"Unlink"})]}),T.assignmentNotes&&e.jsxs("p",{className:"text-xs text-muted-foreground mt-2 italic",children:['"',T.assignmentNotes,'"']})]},T.id))})]}),k.length>0?e.jsx("div",{className:"space-y-4",children:e.jsxs(kt,{open:c,onOpenChange:o,children:[e.jsx(ma,{asChild:!0,children:e.jsxs(E,{className:"w-full sm:w-auto",children:[e.jsx(Na,{className:"h-4 w-4 mr-2"}),"Link New Merchandise (",k.length," available)"]})}),e.jsxs(wt,{className:"sm:max-w-[600px] max-h-[80vh] overflow-y-auto",children:[e.jsxs(St,{children:[e.jsx(Ct,{children:"Link Merchandise to Album"}),e.jsxs(us,{children:['Select merchandise items to associate with "',u==null?void 0:u.title,'" for promotional opportunities']})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsx(q,{children:"Available Merchandise"}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3 max-h-60 overflow-y-auto",children:k.map(T=>e.jsxs(R,{className:`p-3 cursor-pointer transition-colors ${a.includes(T.id)?"border-primary bg-primary/5":"hover:bg-muted/50"}`,onClick:()=>{r(A=>A.includes(T.id)?A.filter(C=>C!==T.id):[...A,T.id])},children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"font-medium text-sm truncate",children:T.name}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:["$",T.price]}),e.jsx(X,{variant:"secondary",className:"text-xs mt-1",children:T.category})]}),a.includes(T.id)&&e.jsx(ct,{className:"h-4 w-4 text-primary flex-shrink-0"})]}),T.description&&e.jsx("p",{className:"text-xs text-muted-foreground mt-2 line-clamp-2",children:T.description})]},T.id))})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(q,{htmlFor:"assignmentNotes",children:"Assignment Notes (Optional)"}),e.jsx(mt,{id:"assignmentNotes",placeholder:"Add notes about this merchandise connection (e.g., 'Bundle discount available', 'Limited edition tie-in')...",value:i,onChange:T=>l(T.target.value),rows:3})]}),e.jsxs("div",{className:"flex justify-end space-x-2 pt-4",children:[e.jsx(E,{variant:"outline",onClick:()=>o(!1),children:"Cancel"}),e.jsxs(E,{onClick:b,disabled:a.length===0||y.isPending,children:[e.jsx(vu,{className:"h-4 w-4 mr-2"}),"Link Selected (",a.length,")"]})]})]})]})]})}):e.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[e.jsx(Fs,{className:"h-12 w-12 mx-auto mb-3 opacity-50"}),e.jsx("p",{className:"font-medium",children:"No Available Merchandise"}),e.jsx("p",{className:"text-sm",children:p.length===0?"Create merchandise items first to enable album linking":"All merchandise items are already linked to this album"})]}),e.jsxs("div",{className:"flex items-center justify-between text-sm text-muted-foreground pt-4 border-t",children:[e.jsxs("span",{className:"flex items-center space-x-1",children:[e.jsx(Ze,{className:"h-3 w-3"}),e.jsxs("span",{children:[x.length," linked"]})]}),e.jsxs("span",{className:"flex items-center space-x-1",children:[e.jsx(Na,{className:"h-3 w-3"}),e.jsxs("span",{children:[k.length," available"]})]})]})]})]})},uJ=()=>{const t=yd(),[s,n]=As(),a=t.albumId?parseInt(t.albumId):void 0,r=new URLSearchParams(window.location.search),i=r.get("artistUserId")?parseInt(r.get("artistUserId")):void 0;if(!a||!i)return e.jsx("div",{className:"container mx-auto px-4 py-8",children:e.jsx(R,{children:e.jsxs(L,{className:"p-6 text-center",children:[e.jsx("p",{className:"text-muted-foreground",children:"Album upload information not found."}),e.jsx(E,{onClick:()=>n("/dashboard"),className:"mt-4",children:"Return to Dashboard"})]})})});const l=()=>{console.log("Merchandise assignment completed")},c=()=>{n("/dashboard")};return e.jsxs("div",{className:"container mx-auto px-4 py-8 space-y-6",children:[e.jsxs(R,{className:"border-green-200 bg-green-50 dark:bg-green-900/20",children:[e.jsxs(Y,{children:[e.jsxs(Q,{className:"flex items-center space-x-2 text-green-800 dark:text-green-200",children:[e.jsx(Ti,{className:"h-6 w-6"}),e.jsx("span",{children:"Album Upload Successful!"})]}),e.jsx(rt,{className:"text-green-700 dark:text-green-300",children:"Your album has been successfully uploaded and is now available on your profile. You can now link merchandise items to create promotional opportunities."})]}),e.jsx(L,{children:e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsxs(X,{variant:"secondary",className:"bg-green-100 text-green-800 dark:bg-green-800 dark:text-green-100",children:[e.jsx(Ue,{className:"h-3 w-3 mr-1"}),"Album Live"]}),e.jsxs(X,{variant:"secondary",className:"bg-blue-100 text-blue-800 dark:bg-blue-800 dark:text-blue-100",children:[e.jsx(Na,{className:"h-3 w-3 mr-1"}),"Ready for Merchandising"]})]})})]}),e.jsx(dJ,{albumId:a,artistUserId:i,onAssignmentComplete:l}),e.jsxs("div",{className:"flex justify-between",children:[e.jsxs(E,{variant:"outline",onClick:c,children:[e.jsx(Rn,{className:"h-4 w-4 mr-2"}),"Return to Dashboard"]}),e.jsxs("div",{className:"space-x-2",children:[e.jsx(E,{variant:"outline",onClick:()=>n(`/albums?id=${a}`),children:"View Album Details"}),e.jsx(E,{onClick:()=>n("/merchandise"),children:"Manage Merchandise"})]})]}),e.jsxs(R,{children:[e.jsxs(Y,{children:[e.jsx(Q,{children:"Next Steps"}),e.jsx(rt,{children:"Maximize your album's potential with these recommended actions"})]}),e.jsx(L,{className:"space-y-4",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("h4",{className:"font-medium",children:"Promotional Opportunities"}),e.jsxs("ul",{className:"text-sm text-muted-foreground space-y-1",children:[e.jsx("li",{children:" Link related merchandise for bundle sales"}),e.jsx("li",{children:" Create press releases for album launch"}),e.jsx("li",{children:" Schedule social media promotion campaigns"}),e.jsx("li",{children:" Set up booking opportunities featuring new material"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("h4",{className:"font-medium",children:"Revenue Optimization"}),e.jsxs("ul",{className:"text-sm text-muted-foreground space-y-1",children:[e.jsx("li",{children:" Configure merchandise cross-selling"}),e.jsx("li",{children:" Set up streaming distribution channels"}),e.jsx("li",{children:" Create tiered fan engagement packages"}),e.jsx("li",{children:" Enable direct-to-fan sales opportunities"})]})]})]})})]})]})};function mJ({currentSong:t,playlist:s=[],onSongChange:n,onAddToCart:a,isVisible:r=!0,onToggleVisibility:i}){var z,F;const{toast:l}=nt(),c=N.useRef(null),[o,d]=N.useState(!1),[h,u]=N.useState(0),[m,p]=N.useState(0),[g,x]=N.useState(1),[v,y]=N.useState(!1),[f,b]=N.useState(!1),[j,S]=N.useState("none"),[k,T]=N.useState(!1),[A,C]=N.useState(!1);N.useEffect(()=>{const K=c.current;if(!K||!(t!=null&&t.mp3Url))return;const D=()=>u(K.currentTime),G=()=>p(K.duration||0),H=()=>{d(!1),_()};K.addEventListener("timeupdate",D),K.addEventListener("loadedmetadata",G),K.addEventListener("ended",H);const V=t&&!t.isFree&&!t.isPaid;return T(V),()=>{K.removeEventListener("timeupdate",D),K.removeEventListener("loadedmetadata",G),K.removeEventListener("ended",H)}},[t]),N.useEffect(()=>{const K=c.current;K&&(K.volume=v?0:g)},[g,v]);const w=()=>{const K=c.current;!K||!(t!=null&&t.mp3Url)||(o?(K.pause(),d(!1)):k&&t?(K.currentTime=t.previewStartSeconds,K.play(),d(!0),setTimeout(()=>{var D;K&&!K.paused&&(K.pause(),d(!1),a&&!t.isFree&&l({title:" Preview Complete",description:`Purchase "${t.title}" to unlock the full track`,action:e.jsxs(E,{size:"sm",onClick:()=>a(t),className:"ml-2 bg-green-600 hover:bg-green-700",children:[e.jsx(Fs,{className:"h-3 w-3 mr-1"}),"$",((D=t.price)==null?void 0:D.toFixed(2))||"0.99"]}),duration:8e3}))},t.previewDuration*1e3)):(K.play(),d(!0)))},P=K=>{const D=c.current;if(!D||!t)return;const G=K[0];if(k){const H=t.previewStartSeconds+t.previewDuration;if(G<t.previewStartSeconds||G>H){l({title:"Preview Restriction",description:"Purchase the full song to access all content",variant:"destructive"});return}}D.currentTime=G,u(G)},M=K=>{x(K[0])},I=()=>{y(!v)},W=()=>{if(!s.length||!t)return;const K=s.findIndex(G=>G.id===t.id),D=K>0?K-1:s.length-1;n&&n(s[D])},_=()=>{if(!s.length||!t)return;const K=s.findIndex(G=>G.id===t.id);if(j==="one"){const G=c.current;G&&(G.currentTime=k?t.previewStartSeconds:0,o&&G.play());return}let D;if(f?D=Math.floor(Math.random()*s.length):D=K<s.length-1?K+1:0,j==="none"&&K===s.length-1){d(!1);return}n&&n(s[D])},B=()=>{t&&a&&a(t)},O=K=>{const D=Math.floor(K/60),G=Math.floor(K%60);return`${D}:${G.toString().padStart(2,"0")}`};return!r||!t?null:e.jsx(Ky,{children:e.jsxs("div",{className:"fixed bottom-0 left-0 right-0 z-50 bg-white dark:bg-black border-t shadow-lg",children:[e.jsx("audio",{ref:c,src:t.mp3Url,preload:"metadata"}),e.jsx(R,{className:"rounded-none border-0 border-t",children:e.jsxs("div",{className:`p-4 ${A?"pb-2":""}`,children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"flex items-center gap-3 flex-1 min-w-0",children:[t.coverArtUrl&&e.jsx("img",{src:t.coverArtUrl,alt:t.title,className:"w-12 h-12 rounded object-cover flex-shrink-0"}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsxs("div",{className:"font-medium text-sm truncate",children:[t.title,k&&!t.isFree&&e.jsxs("span",{className:"ml-2 px-1 py-0.5 bg-gradient-to-r from-orange-100 to-yellow-100 text-orange-700 text-xs rounded border border-orange-200",children:[" Preview - $",((z=t.price)==null?void 0:z.toFixed(2))||"0.99"]})]}),e.jsxs("div",{className:"text-xs text-gray-500 truncate",children:[t.artistName,t.albumTitle&&`  ${t.albumTitle}`]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(il,{children:[e.jsx(ll,{asChild:!0,children:e.jsx(E,{variant:"ghost",size:"sm",onClick:()=>b(!f),className:f?"text-blue-600":"",children:e.jsx(F6,{className:"h-4 w-4"})})}),e.jsx(Ai,{children:"Shuffle"})]}),e.jsxs(il,{children:[e.jsx(ll,{asChild:!0,children:e.jsx(E,{variant:"ghost",size:"sm",onClick:W,children:e.jsx(q6,{className:"h-4 w-4"})})}),e.jsx(Ai,{children:"Previous"})]}),e.jsx(E,{onClick:w,size:"sm",className:"w-8 h-8 rounded-full",children:o?e.jsx(Ry,{className:"h-4 w-4"}):e.jsx(Gn,{className:"h-4 w-4 ml-0.5"})}),e.jsxs(il,{children:[e.jsx(ll,{asChild:!0,children:e.jsx(E,{variant:"ghost",size:"sm",onClick:_,children:e.jsx(m4,{className:"h-4 w-4"})})}),e.jsx(Ai,{children:"Next"})]}),e.jsxs(il,{children:[e.jsx(ll,{asChild:!0,children:e.jsxs(E,{variant:"ghost",size:"sm",onClick:()=>S(j==="none"?"all":j==="all"?"one":"none"),className:j!=="none"?"text-blue-600":"",children:[e.jsx(L6,{className:"h-4 w-4"}),j==="one"&&e.jsx("span",{className:"absolute -top-1 -right-1 text-xs bg-blue-600 text-white rounded-full w-3 h-3 flex items-center justify-center",children:"1"})]})}),e.jsx(Ai,{children:j==="none"?"No Repeat":j==="all"?"Repeat All":"Repeat One"})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[k&&!t.isFree&&e.jsxs(il,{children:[e.jsx(ll,{asChild:!0,children:e.jsxs(E,{variant:"default",size:"sm",onClick:B,className:"bg-green-600 hover:bg-green-700 text-white animate-pulse hover:animate-none",children:[e.jsx(Fs,{className:"h-4 w-4 mr-1"}),"$",((F=t.price)==null?void 0:F.toFixed(2))||"0.99"]})}),e.jsx(Ai,{children:"Purchase full track to unlock complete audio"})]}),k&&t.isFree&&e.jsxs(il,{children:[e.jsx(ll,{asChild:!0,children:e.jsx(E,{variant:"ghost",size:"sm",onClick:B,className:"text-blue-600 hover:text-blue-700 hover:bg-blue-50",children:e.jsx(Fs,{className:"h-4 w-4"})})}),e.jsx(Ai,{children:"Add to collection"})]}),e.jsxs(il,{children:[e.jsx(ll,{asChild:!0,children:e.jsx(E,{variant:"ghost",size:"sm",children:e.jsx(gn,{className:"h-4 w-4"})})}),e.jsx(Ai,{children:"Add to Favorites"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(E,{variant:"ghost",size:"sm",onClick:I,children:v||g===0?e.jsx(mp,{className:"h-4 w-4"}):e.jsx(qa,{className:"h-4 w-4"})}),e.jsx("div",{className:"w-20",children:e.jsx(Di,{value:[v?0:g],onValueChange:M,max:1,step:.1,className:"w-full"})})]}),e.jsxs(m0,{children:[e.jsx(h0,{asChild:!0,children:e.jsx(E,{variant:"ghost",size:"sm",children:e.jsx(r4,{className:"h-4 w-4"})})}),e.jsxs(Ip,{align:"end",children:[e.jsx(ri,{onClick:()=>C(!A),children:A?e.jsxs(e.Fragment,{children:[e.jsx(c4,{className:"h-4 w-4 mr-2"}),"Expand Player"]}):e.jsxs(e.Fragment,{children:[e.jsx(d4,{className:"h-4 w-4 mr-2"}),"Minimize Player"]})}),i&&e.jsx(ri,{onClick:i,children:"Hide Player"})]})]})]})]}),!A&&e.jsxs("div",{className:"mt-3 flex items-center gap-3",children:[e.jsx("span",{className:"text-xs text-gray-500 w-10 text-right",children:O(h)}),e.jsxs("div",{className:"flex-1 relative",children:[e.jsx(Di,{value:[h],onValueChange:P,max:k&&t?t.previewStartSeconds+t.previewDuration:m,min:k&&t?t.previewStartSeconds:0,step:1,className:"w-full"}),k&&t&&e.jsx("div",{className:"absolute top-0 left-0 right-0 h-2 pointer-events-none",children:e.jsx("div",{className:"h-full bg-orange-200 rounded",style:{left:`${t.previewStartSeconds/m*100}%`,width:`${t.previewDuration/m*100}%`}})})]}),e.jsx("span",{className:"text-xs text-gray-500 w-10",children:O(k&&t?t.previewStartSeconds+t.previewDuration:m)})]})]})})]})})}const hJ=()=>{const[t,s]=N.useState(null),[n,a]=N.useState(!1),[r,i]=N.useState(!1);N.useEffect(()=>{if(window.matchMedia("(display-mode: standalone)").matches||window.navigator.standalone===!0){i(!0);return}const o=u=>{u.preventDefault(),s(u),a(!0)},d=()=>{i(!0),a(!1)};window.addEventListener("beforeinstallprompt",o),window.addEventListener("appinstalled",d);const h=setTimeout(()=>{!r&&!n&&a(!0)},3e3);return()=>{window.removeEventListener("beforeinstallprompt",o),window.removeEventListener("appinstalled",d),clearTimeout(h)}},[r,n]);const l=async()=>{if(!t)return;t.prompt();const{outcome:o}=await t.userChoice;o==="accepted"&&(s(null),a(!1))},c=()=>{a(!1),sessionStorage.setItem("pwa-prompt-dismissed","true")};return r||sessionStorage.getItem("pwa-prompt-dismissed")||!n?null:e.jsx("div",{className:"fixed bottom-4 right-4 z-50 max-w-sm",children:e.jsxs(R,{className:"shadow-lg border-purple-200 dark:border-purple-800",children:[e.jsxs(Y,{className:"pb-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Cs,{className:"h-5 w-5 text-purple-600"}),e.jsx(Q,{className:"text-lg",children:"Install WaituMusic"})]}),e.jsx(E,{variant:"ghost",size:"sm",onClick:c,className:"h-8 w-8 p-0",children:e.jsx(Xt,{className:"h-4 w-4"})})]}),e.jsx(rt,{children:"Get the full app experience with offline access and faster loading"})]}),e.jsxs(L,{className:"pt-0",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-3 text-sm text-muted-foreground",children:[e.jsx(Iy,{className:"h-4 w-4"}),e.jsx("span",{children:"Works on mobile"}),e.jsx(qr,{className:"h-4 w-4 ml-2"}),e.jsx("span",{children:"& desktop"})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsxs(E,{onClick:l,className:"flex-1",children:[e.jsx(Cs,{className:"h-4 w-4 mr-2"}),"Install App"]}),e.jsx(E,{variant:"outline",onClick:c,children:"Later"})]})]})]})})},xJ=pe.object({title:pe.string().min(1,"Title is required"),requirements:pe.string().min(10,"Requirements must be at least 10 characters"),equipmentNeeds:pe.string().min(5,"Equipment needs are required"),stageRequirements:pe.string().min(5,"Stage requirements are required"),lightingRequirements:pe.string().optional(),soundRequirements:pe.string().optional(),additionalNotes:pe.string().optional()}),pJ=({bookingId:t})=>{const[s,n]=N.useState("technical-rider"),a=Tt(),r=Cn({resolver:kn(xJ),defaultValues:{title:"",requirements:"",equipmentNeeds:"",stageRequirements:"",lightingRequirements:"",soundRequirements:"",additionalNotes:""}}),{data:i,isLoading:l}=ke({queryKey:["/api/advanced-booking/bookings/pending-approvals"],enabled:!!t}),{data:c,isLoading:o}=ke({queryKey:["/api/advanced-booking/managed-agents"]}),{data:d}=ke({queryKey:["/api/advanced-booking/bookings",t,"approval-status"],enabled:!!t}),h=Xe({mutationFn:async v=>{if(!t)throw new Error("Booking ID is required");return xe(`/api/advanced-booking/bookings/${t}/technical-rider`,{method:"POST",body:v})},onSuccess:()=>{a.invalidateQueries({queryKey:["/api/advanced-booking/bookings"]}),r.reset()}}),u=Xe({mutationFn:async({step:v,action:y,notes:f})=>{if(!t)throw new Error("Booking ID is required");return xe(`/api/advanced-booking/bookings/${t}/approval/${v}`,{method:"POST",body:{action:y,notes:f}})},onSuccess:()=>{a.invalidateQueries({queryKey:["/api/advanced-booking/bookings"]})}}),m=Xe({mutationFn:async()=>{if(!t)throw new Error("Booking ID is required");return xe(`/api/advanced-booking/bookings/${t}/auto-assign-agent`,{method:"POST"})},onSuccess:()=>{a.invalidateQueries({queryKey:["/api/advanced-booking/managed-agents"]})}}),p=v=>{h.mutate(v)},g=(v,y,f)=>{u.mutate({step:v,action:y,notes:f})},x=v=>{switch(v){case"approved":return e.jsx(ct,{className:"h-4 w-4 text-green-500"});case"rejected":return e.jsx(on,{className:"h-4 w-4 text-red-500"});case"pending":return e.jsx(Qt,{className:"h-4 w-4 text-yellow-500"});default:return e.jsx(Qt,{className:"h-4 w-4 text-gray-500"})}};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h2",{className:"text-2xl font-bold",children:"Advanced Booking Management"}),t&&e.jsxs(X,{variant:"outline",className:"px-3 py-1",children:["Booking #",t]})]}),e.jsxs(Ut,{value:s,onValueChange:n,className:"space-y-4",children:[e.jsxs(jt,{className:"grid w-full grid-cols-4",children:[e.jsxs(Ne,{value:"technical-rider",children:[e.jsx(xt,{className:"h-4 w-4 mr-2"}),"Technical Rider"]}),e.jsxs(Ne,{value:"approvals",children:[e.jsx(ct,{className:"h-4 w-4 mr-2"}),"Approvals"]}),e.jsxs(Ne,{value:"agents",children:[e.jsx(Ze,{className:"h-4 w-4 mr-2"}),"Managed Agents"]}),e.jsxs(Ne,{value:"workflow",children:[e.jsx(dt,{className:"h-4 w-4 mr-2"}),"Workflow"]})]}),e.jsx(ge,{value:"technical-rider",className:"space-y-4",children:e.jsxs(R,{children:[e.jsxs(Y,{children:[e.jsx(Q,{children:"Create Technical Rider"}),e.jsx(rt,{children:"Define technical requirements for this booking"})]}),e.jsx(L,{children:e.jsx(On,{...r,children:e.jsxs("form",{onSubmit:r.handleSubmit(p),className:"space-y-4",children:[e.jsx($e,{control:r.control,name:"title",render:({field:v})=>e.jsxs(Fe,{children:[e.jsx(qe,{children:"Rider Title"}),e.jsx(Le,{children:e.jsx($,{placeholder:"e.g., Main Stage Performance Setup",...v})}),e.jsx(ze,{})]})}),e.jsx($e,{control:r.control,name:"requirements",render:({field:v})=>e.jsxs(Fe,{children:[e.jsx(qe,{children:"General Requirements"}),e.jsx(Le,{children:e.jsx(mt,{placeholder:"Describe overall technical requirements...",className:"min-h-[100px]",...v})}),e.jsx(ze,{})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx($e,{control:r.control,name:"equipmentNeeds",render:({field:v})=>e.jsxs(Fe,{children:[e.jsx(qe,{children:"Equipment Needs"}),e.jsx(Le,{children:e.jsx(mt,{placeholder:"List required equipment...",className:"min-h-[80px]",...v})}),e.jsx(ze,{})]})}),e.jsx($e,{control:r.control,name:"stageRequirements",render:({field:v})=>e.jsxs(Fe,{children:[e.jsx(qe,{children:"Stage Requirements"}),e.jsx(Le,{children:e.jsx(mt,{placeholder:"Stage setup requirements...",className:"min-h-[80px]",...v})}),e.jsx(ze,{})]})}),e.jsx($e,{control:r.control,name:"lightingRequirements",render:({field:v})=>e.jsxs(Fe,{children:[e.jsx(qe,{children:"Lighting Requirements"}),e.jsx(Le,{children:e.jsx(mt,{placeholder:"Lighting setup details...",className:"min-h-[80px]",...v})}),e.jsx(ze,{})]})}),e.jsx($e,{control:r.control,name:"soundRequirements",render:({field:v})=>e.jsxs(Fe,{children:[e.jsx(qe,{children:"Sound Requirements"}),e.jsx(Le,{children:e.jsx(mt,{placeholder:"Sound system requirements...",className:"min-h-[80px]",...v})}),e.jsx(ze,{})]})})]}),e.jsx($e,{control:r.control,name:"additionalNotes",render:({field:v})=>e.jsxs(Fe,{children:[e.jsx(qe,{children:"Additional Notes"}),e.jsx(Le,{children:e.jsx(mt,{placeholder:"Any additional requirements or notes...",className:"min-h-[80px]",...v})}),e.jsx(ze,{})]})}),e.jsx(E,{type:"submit",disabled:h.isPending,className:"w-full md:w-auto",children:h.isPending?"Creating...":"Create Technical Rider"})]})})})]})}),e.jsx(ge,{value:"approvals",className:"space-y-4",children:e.jsxs(R,{children:[e.jsxs(Y,{children:[e.jsx(Q,{children:"Approval Workflow"}),e.jsx(rt,{children:"Manage booking approval steps and status"})]}),e.jsx(L,{children:l?e.jsx("div",{className:"text-center py-4",children:"Loading approvals..."}):(i==null?void 0:i.length)>0?e.jsx("div",{className:"space-y-3",children:i==null?void 0:i.map(v=>e.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[x(v.status),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:v.step}),v.notes&&e.jsx("p",{className:"text-sm text-muted-foreground",children:v.notes})]})]}),e.jsx("div",{className:"flex space-x-2",children:v.status==="pending"&&e.jsxs(e.Fragment,{children:[e.jsx(E,{size:"sm",onClick:()=>g(v.step,"approve"),disabled:u.isPending,children:"Approve"}),e.jsx(E,{size:"sm",variant:"outline",onClick:()=>g(v.step,"reject"),disabled:u.isPending,children:"Reject"})]})})]},v.id))}):e.jsx("div",{className:"text-center py-4 text-muted-foreground",children:"No approvals found for this booking"})})]})}),e.jsx(ge,{value:"agents",className:"space-y-4",children:e.jsxs(R,{children:[e.jsxs(Y,{children:[e.jsx(Q,{children:"Managed Agents"}),e.jsx(rt,{children:"Assign and manage agents for this booking"})]}),e.jsxs(L,{children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h3",{className:"text-lg font-medium",children:"Available Agents"}),t&&e.jsx(E,{onClick:()=>m.mutate(),disabled:m.isPending,children:"Auto-Assign Agent"})]}),o?e.jsx("div",{className:"text-center py-4",children:"Loading agents..."}):(c==null?void 0:c.length)>0?e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:c==null?void 0:c.map(v=>{var y,f;return e.jsxs(R,{className:"p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(X,{variant:v.isManaged?"default":"secondary",children:v.isManaged?"Managed":"Independent"}),e.jsxs("span",{className:"font-medium",children:["Agent #",v.userId]})]}),e.jsxs("div",{className:"flex items-center text-sm text-muted-foreground",children:[e.jsx(It,{className:"h-4 w-4 mr-1"}),"$",v.basePrice]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium",children:"Services:"}),e.jsx("div",{className:"flex flex-wrap gap-1 mt-1",children:(y=v.services)==null?void 0:y.map((b,j)=>e.jsx(X,{variant:"outline",className:"text-xs",children:b},j))})]}),((f=v.specializations)==null?void 0:f.length)>0&&e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium",children:"Specializations:"}),e.jsx("div",{className:"flex flex-wrap gap-1 mt-1",children:v.specializations.map((b,j)=>e.jsx(X,{variant:"secondary",className:"text-xs",children:b},j))})]})]})]},v.userId)})}):e.jsx("div",{className:"text-center py-4 text-muted-foreground",children:"No managed agents available"})]})]})}),e.jsx(ge,{value:"workflow",className:"space-y-4",children:e.jsxs(R,{children:[e.jsxs(Y,{children:[e.jsx(Q,{children:"Booking Workflow Status"}),e.jsx(rt,{children:"Track the progress of this booking through the workflow"})]}),e.jsx(L,{children:d!=null&&d.workflow?e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"text-center p-4 border rounded-lg",children:[e.jsx(ct,{className:"h-8 w-8 mx-auto mb-2 text-green-500"}),e.jsx("p",{className:"font-medium",children:"Initial Review"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Completed"})]}),e.jsxs("div",{className:"text-center p-4 border rounded-lg",children:[e.jsx(Qt,{className:"h-8 w-8 mx-auto mb-2 text-yellow-500"}),e.jsx("p",{className:"font-medium",children:"Technical Review"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"In Progress"})]}),e.jsxs("div",{className:"text-center p-4 border rounded-lg",children:[e.jsx(Qt,{className:"h-8 w-8 mx-auto mb-2 text-gray-400"}),e.jsx("p",{className:"font-medium",children:"Final Approval"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Pending"})]})]})}):e.jsx("div",{className:"text-center py-4 text-muted-foreground",children:"No workflow data available"})})]})})]})]})},fJ=()=>{var f,b,j,S,k;const[t,s]=N.useState(null),[n,a]=N.useState("overview"),[r,i]=N.useState({bookingId:"",counterPrice:"",notes:""}),l=Tt(),{data:c,isLoading:o}=ke({queryKey:["/api/advanced-booking/managed-agents"]}),{data:d,isLoading:h}=ke({queryKey:["/api/advanced-booking/agents",t,"metrics"],enabled:!!t}),{data:u,isLoading:m}=ke({queryKey:["/api/advanced-booking/counter-offers"]}),p=Xe({mutationFn:async T=>xe(`/api/advanced-booking/bookings/${T}/auto-assign-agent`,{method:"POST"}),onSuccess:()=>{l.invalidateQueries({queryKey:["/api/advanced-booking/managed-agents"]})}}),g=Xe({mutationFn:async T=>xe(`/api/advanced-booking/bookings/${T.bookingId}/counter-offer`,{method:"POST",body:{agentId:T.agentId,counterPrice:parseFloat(T.counterPrice),notes:T.notes}}),onSuccess:()=>{l.invalidateQueries({queryKey:["/api/advanced-booking/counter-offers"]}),i({bookingId:"",counterPrice:"",notes:""})}}),x=T=>{T.preventDefault(),t&&g.mutate({...r,agentId:t})},v=T=>T.isManaged?"10%":"5%",y=T=>{switch(T){case"accepted":return"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-300";case"rejected":return"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-300";case"pending":return"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-300";default:return"bg-gray-100 text-gray-800 dark:bg-gray-800 dark:text-gray-300"}};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h2",{className:"text-2xl font-bold",children:"Managed Agent Dashboard"}),e.jsxs(X,{variant:"outline",className:"px-3 py-1",children:[(c==null?void 0:c.length)||0," Active Agents"]})]}),e.jsxs(Ut,{value:n,onValueChange:a,className:"space-y-4",children:[e.jsxs(jt,{className:"grid w-full grid-cols-4",children:[e.jsxs(Ne,{value:"overview",children:[e.jsx(Ze,{className:"h-4 w-4 mr-2"}),"Overview"]}),e.jsxs(Ne,{value:"agents",children:[e.jsx(Rt,{className:"h-4 w-4 mr-2"}),"Agents"]}),e.jsxs(Ne,{value:"metrics",children:[e.jsx(Is,{className:"h-4 w-4 mr-2"}),"Metrics"]}),e.jsxs(Ne,{value:"counter-offers",children:[e.jsx(It,{className:"h-4 w-4 mr-2"}),"Counter Offers"]})]}),e.jsxs(ge,{value:"overview",className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs(R,{children:[e.jsxs(Y,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(Q,{className:"text-sm font-medium",children:"Total Agents"}),e.jsx(Ze,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsx(L,{children:e.jsx("div",{className:"text-2xl font-bold",children:(c==null?void 0:c.length)||0})})]}),e.jsxs(R,{children:[e.jsxs(Y,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(Q,{className:"text-sm font-medium",children:"Active Bookings"}),e.jsx(Qt,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsx(L,{children:e.jsx("div",{className:"text-2xl font-bold",children:(c==null?void 0:c.reduce((T,A)=>T+(A.totalBookings||0),0))||0})})]}),e.jsxs(R,{children:[e.jsxs(Y,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(Q,{className:"text-sm font-medium",children:"Total Revenue"}),e.jsx(It,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsx(L,{children:e.jsxs("div",{className:"text-2xl font-bold",children:["$",((f=c==null?void 0:c.reduce((T,A)=>T+(A.revenue||0),0))==null?void 0:f.toLocaleString())||"0"]})})]}),e.jsxs(R,{children:[e.jsxs(Y,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(Q,{className:"text-sm font-medium",children:"Avg Rating"}),e.jsx(Rt,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsx(L,{children:e.jsx("div",{className:"text-2xl font-bold",children:((c==null?void 0:c.reduce((T,A)=>T+(A.rating||0),0))/((c==null?void 0:c.length)||1)).toFixed(1)||"0.0"})})]})]}),e.jsxs(R,{children:[e.jsxs(Y,{children:[e.jsx(Q,{children:"Quick Actions"}),e.jsx(rt,{children:"Manage agent assignments and bookings"})]}),e.jsx(L,{children:e.jsx("div",{className:"flex space-x-4",children:e.jsxs("div",{className:"flex-1",children:[e.jsx($,{placeholder:"Enter Booking ID for auto-assignment",className:"mb-2",id:"booking-id-input"}),e.jsx(E,{onClick:()=>{const T=document.getElementById("booking-id-input"),A=parseInt(T.value);A&&(p.mutate(A),T.value="")},disabled:p.isPending,className:"w-full",children:"Auto-Assign Agent"})]})})})]})]}),e.jsx(ge,{value:"agents",className:"space-y-4",children:e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:o?e.jsx("div",{className:"col-span-full text-center py-4",children:"Loading agents..."}):(c==null?void 0:c.length)>0?c==null?void 0:c.map(T=>{var A,C;return e.jsxs(R,{className:`cursor-pointer transition-colors ${t===T.userId?"border-purple-300 bg-purple-50 dark:bg-purple-950":""}`,onClick:()=>s(T.userId),children:[e.jsxs(Y,{children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs(Q,{className:"text-lg",children:["Agent #",T.userId]}),e.jsx(X,{variant:T.isManaged?"default":"secondary",children:T.isManaged?"Managed":"Independent"})]}),e.jsxs(rt,{children:["Base Rate: $",T.basePrice,"  Commission: ",v(T)]})]}),e.jsx(L,{children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium mb-1",children:"Services:"}),e.jsxs("div",{className:"flex flex-wrap gap-1",children:[(A=T.services)==null?void 0:A.slice(0,3).map((w,P)=>e.jsx(X,{variant:"outline",className:"text-xs",children:w},P)),((C=T.services)==null?void 0:C.length)>3&&e.jsxs(X,{variant:"outline",className:"text-xs",children:["+",T.services.length-3," more"]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-muted-foreground",children:"Bookings"}),e.jsx("p",{className:"font-medium",children:T.totalBookings||0})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-muted-foreground",children:"Rating"}),e.jsx("p",{className:"font-medium",children:T.rating||"N/A"})]})]})]})})]},T.userId)}):e.jsx("div",{className:"col-span-full text-center py-4 text-muted-foreground",children:"No agents available"})})}),e.jsx(ge,{value:"metrics",className:"space-y-4",children:t?e.jsxs(R,{children:[e.jsxs(Y,{children:[e.jsxs(Q,{children:["Agent #",t," Metrics"]}),e.jsx(rt,{children:"Performance analytics and statistics"})]}),e.jsx(L,{children:h?e.jsx("div",{className:"text-center py-4",children:"Loading metrics..."}):(d==null?void 0:d.totalBookings)!==void 0?e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"text-center p-4 border rounded-lg",children:[e.jsx("div",{className:"text-2xl font-bold text-blue-600",children:(d==null?void 0:d.totalBookings)||0}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Total Bookings"})]}),e.jsxs("div",{className:"text-center p-4 border rounded-lg",children:[e.jsxs("div",{className:"text-2xl font-bold text-green-600",children:["$",((b=d==null?void 0:d.totalRevenue)==null?void 0:b.toLocaleString())||"0"]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Total Revenue"})]}),e.jsxs("div",{className:"text-center p-4 border rounded-lg",children:[e.jsx("div",{className:"text-2xl font-bold text-yellow-600",children:((j=d==null?void 0:d.averageRating)==null?void 0:j.toFixed(1))||"0.0"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Average Rating"})]}),e.jsxs("div",{className:"text-center p-4 border rounded-lg",children:[e.jsxs("div",{className:"text-2xl font-bold text-purple-600",children:[((S=d==null?void 0:d.completionRate)==null?void 0:S.toFixed(0))||"0","%"]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Completion Rate"})]}),e.jsxs("div",{className:"text-center p-4 border rounded-lg",children:[e.jsxs("div",{className:"text-2xl font-bold text-indigo-600",children:[(d==null?void 0:d.responseTime)||"0","h"]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Avg Response Time"})]}),e.jsxs("div",{className:"text-center p-4 border rounded-lg",children:[e.jsxs("div",{className:"text-2xl font-bold text-teal-600",children:[((k=d==null?void 0:d.clientSatisfaction)==null?void 0:k.toFixed(0))||"0","%"]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Client Satisfaction"})]})]}):e.jsx("div",{className:"text-center py-4 text-muted-foreground",children:"No metrics available for this agent"})})]}):e.jsx(R,{children:e.jsxs(L,{className:"text-center py-8",children:[e.jsx(Ze,{className:"h-12 w-12 mx-auto text-muted-foreground mb-4"}),e.jsx("p",{className:"text-muted-foreground",children:"Select an agent to view detailed metrics"})]})})}),e.jsx(ge,{value:"counter-offers",className:"space-y-4",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs(R,{children:[e.jsxs(Y,{children:[e.jsx(Q,{children:"Create Counter Offer"}),e.jsx(rt,{children:"Submit a counter offer for a booking"})]}),e.jsx(L,{children:e.jsxs("form",{onSubmit:x,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium",children:"Booking ID"}),e.jsx($,{type:"number",value:r.bookingId,onChange:T=>i(A=>({...A,bookingId:T.target.value})),placeholder:"Enter booking ID",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium",children:"Counter Price ($)"}),e.jsx($,{type:"number",step:"0.01",value:r.counterPrice,onChange:T=>i(A=>({...A,counterPrice:T.target.value})),placeholder:"Enter counter offer price",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium",children:"Notes"}),e.jsx(mt,{value:r.notes,onChange:T=>i(A=>({...A,notes:T.target.value})),placeholder:"Explain the counter offer...",className:"min-h-[80px]"})]}),e.jsx(E,{type:"submit",disabled:g.isPending||!t,className:"w-full",children:g.isPending?"Submitting...":"Submit Counter Offer"}),!t&&e.jsx("p",{className:"text-sm text-muted-foreground",children:"Select an agent first"})]})})]}),e.jsxs(R,{children:[e.jsxs(Y,{children:[e.jsx(Q,{children:"Recent Counter Offers"}),e.jsx(rt,{children:"Track status of submitted counter offers"})]}),e.jsx(L,{children:m?e.jsx("div",{className:"text-center py-4",children:"Loading offers..."}):(u==null?void 0:u.length)>0?e.jsx("div",{className:"space-y-3",children:u.map(T=>e.jsxs("div",{className:"p-3 border rounded-lg",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("span",{className:"font-medium",children:["Booking #",T.bookingId]}),e.jsx(X,{className:y(T.status),variant:"secondary",children:T.status})]}),e.jsxs("div",{className:"text-sm text-muted-foreground",children:[e.jsxs("p",{children:["Counter Price: $",T.counterPrice]}),e.jsxs("p",{children:["Original: $",T.originalPrice]}),T.notes&&e.jsxs("p",{children:["Notes: ",T.notes]})]})]},T.id))}):e.jsx("div",{className:"text-center py-4 text-muted-foreground",children:"No counter offers submitted yet"})})]})]})})]})]})};function gJ(){const[t,s]=N.useState(!1),[n,a]=N.useState({name:"",description:"",price:0,inventory:0,imageUrl:"",categoryId:1,artistUserId:19}),r=Tt(),{data:i,isLoading:l}=ke({queryKey:["/api/merchandise"],queryFn:()=>xe("/api/merchandise")});ke({queryKey:["/api/merchandise-categories"],queryFn:()=>xe("/api/merchandise-categories")});const c=Xe({mutationFn:d=>xe("/api/merchandise",{method:"POST",body:d}),onSuccess:()=>{r.invalidateQueries({queryKey:["/api/merchandise"]}),s(!1),a({name:"",description:"",price:0,inventory:0,imageUrl:"",categoryId:1,artistUserId:19})},onError:d=>{console.error("Merchandise creation error:",d)}}),o=()=>{!n.name||n.price<=0||c.mutate(n)};return l?e.jsx("div",{children:"Loading merchandise..."}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h2",{className:"text-2xl font-bold",children:"Merchandise Management"}),e.jsxs(kt,{open:t,onOpenChange:s,children:[e.jsx(ma,{asChild:!0,children:e.jsxs(E,{children:[e.jsx(st,{className:"w-4 h-4 mr-2"}),"Add Merchandise"]})}),e.jsxs(wt,{children:[e.jsx(St,{children:e.jsx(Ct,{children:"Create New Merchandise"})}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(q,{htmlFor:"name",children:"Product Name"}),e.jsx($,{id:"name",value:n.name,onChange:d=>a(h=>({...h,name:d.target.value})),placeholder:"T-Shirt, Vinyl, etc."})]}),e.jsxs("div",{children:[e.jsx(q,{htmlFor:"description",children:"Description"}),e.jsx(mt,{id:"description",value:n.description,onChange:d=>a(h=>({...h,description:d.target.value})),placeholder:"Product description..."})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(q,{htmlFor:"price",children:"Price ($)"}),e.jsx($,{id:"price",type:"number",step:"0.01",value:n.price,onChange:d=>a(h=>({...h,price:parseFloat(d.target.value)||0}))})]}),e.jsxs("div",{children:[e.jsx(q,{htmlFor:"inventory",children:"Inventory"}),e.jsx($,{id:"inventory",type:"number",value:n.inventory,onChange:d=>a(h=>({...h,inventory:parseInt(d.target.value)||0}))})]})]}),e.jsxs("div",{children:[e.jsx(q,{htmlFor:"imageUrl",children:"Image URL"}),e.jsx($,{id:"imageUrl",value:n.imageUrl,onChange:d=>a(h=>({...h,imageUrl:d.target.value})),placeholder:"https://..."})]}),e.jsx(E,{onClick:o,disabled:c.isPending,className:"w-full",children:c.isPending?"Creating...":"Create Merchandise"})]})]})]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:Array.isArray(i)&&i.length>0?i.map(d=>e.jsxs(R,{children:[e.jsx(Y,{children:e.jsxs(Q,{className:"flex items-center gap-2",children:[e.jsx(Na,{className:"w-5 h-5"}),d.name]})}),e.jsx(L,{children:e.jsxs("div",{className:"space-y-3",children:[d.description&&e.jsx("p",{className:"text-sm text-gray-600",children:d.description}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs(X,{variant:"secondary",className:"flex items-center gap-1",children:[e.jsx(It,{className:"w-3 h-3"}),"$",d.price]}),d.inventory!==void 0&&e.jsxs(X,{variant:d.inventory>10?"default":"destructive",children:["Stock: ",d.inventory]})]}),d.imageUrl&&e.jsx("img",{src:d.imageUrl,alt:d.name,className:"w-full h-32 object-cover rounded"}),e.jsxs(E,{variant:"outline",size:"sm",className:"w-full",children:[e.jsx(R6,{className:"w-4 h-4 mr-2"}),"Edit"]})]})})]},d.id)):e.jsxs("div",{className:"col-span-full text-center py-8",children:[e.jsx(Na,{className:"w-12 h-12 mx-auto mb-4 text-gray-400"}),e.jsx("p",{className:"text-gray-600",children:"No merchandise found. Create your first product!"})]})})]})}function M1(){const[t,s]=N.useState(!1),[n,a]=N.useState({subject:"",content:"",targetAudience:"all",scheduledDate:""}),r=Tt(),{data:i,isLoading:l}=ke({queryKey:["/api/newsletters"],queryFn:()=>xe("/api/newsletters")}),c=Xe({mutationFn:h=>xe("/api/newsletters",{method:"POST",body:h}),onSuccess:()=>{r.invalidateQueries({queryKey:["/api/newsletters"]}),s(!1),a({subject:"",content:"",targetAudience:"all",scheduledDate:""})},onError:h=>{console.error("Newsletter creation error:",h)}}),o=()=>{!n.subject||!n.content||c.mutate(n)},d=h=>{switch(h){case"draft":return"secondary";case"scheduled":return"default";case"sent":return"default";default:return"secondary"}};return l?e.jsx("div",{children:"Loading newsletters..."}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h2",{className:"text-2xl font-bold",children:"Newsletter Management"}),e.jsxs(kt,{open:t,onOpenChange:s,children:[e.jsx(ma,{asChild:!0,children:e.jsxs(E,{children:[e.jsx(st,{className:"w-4 h-4 mr-2"}),"Create Newsletter"]})}),e.jsxs(wt,{className:"max-w-3xl",children:[e.jsx(St,{children:e.jsx(Ct,{children:"Create New Newsletter"})}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(q,{htmlFor:"subject",children:"Subject Line"}),e.jsx($,{id:"subject",value:n.subject,onChange:h=>a(u=>({...u,subject:h.target.value})),placeholder:"Newsletter subject..."})]}),e.jsxs("div",{children:[e.jsx(q,{htmlFor:"targetAudience",children:"Target Audience"}),e.jsxs(Re,{value:n.targetAudience,onValueChange:h=>a(u=>({...u,targetAudience:h})),children:[e.jsx(Me,{children:e.jsx(Oe,{})}),e.jsxs(_e,{children:[e.jsx(U,{value:"all",children:"All Subscribers"}),e.jsx(U,{value:"fans",children:"Fans Only"}),e.jsx(U,{value:"artists",children:"Artists Only"}),e.jsx(U,{value:"professionals",children:"Professionals Only"}),e.jsx(U,{value:"managed",children:"Managed Users"})]})]})]}),e.jsxs("div",{children:[e.jsx(q,{htmlFor:"content",children:"Newsletter Content"}),e.jsx(mt,{id:"content",value:n.content,onChange:h=>a(u=>({...u,content:h.target.value})),placeholder:"Write your newsletter content here...",rows:8,className:"min-h-[200px]"})]}),e.jsxs("div",{children:[e.jsx(q,{htmlFor:"scheduledDate",children:"Schedule Send (Optional)"}),e.jsx($,{id:"scheduledDate",type:"datetime-local",value:n.scheduledDate,onChange:h=>a(u=>({...u,scheduledDate:h.target.value}))}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Leave empty to save as draft"})]}),e.jsxs("div",{className:"border rounded-lg p-4 space-y-3",children:[e.jsx("h3",{className:"font-semibold",children:"Quick Templates"}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsx(E,{type:"button",variant:"outline",size:"sm",onClick:()=>a(h=>({...h,subject:"New Music Alert! ",content:`We're excited to share the latest releases from our talented artists...

[Artist highlights]
[New releases]
[Upcoming events]

Stay tuned for more amazing music!`})),children:"New Releases"}),e.jsx(E,{type:"button",variant:"outline",size:"sm",onClick:()=>a(h=>({...h,subject:"Upcoming Events & Concerts",content:`Don't miss these upcoming performances from WaituMusic artists!

[Event listings]
[Booking information]
[Venue details]

Get your tickets now!`})),children:"Events Update"}),e.jsx(E,{type:"button",variant:"outline",size:"sm",onClick:()=>a(h=>({...h,subject:"Artist Spotlight",content:`This month we're featuring an incredible artist from our roster...

[Artist bio]
[Recent achievements]
[Social media links]
[Music samples]

Discover more amazing talent!`})),children:"Artist Spotlight"}),e.jsx(E,{type:"button",variant:"outline",size:"sm",onClick:()=>a(h=>({...h,subject:"WaituMusic Monthly Update",content:`Here's what's been happening at WaituMusic this month...

[Platform updates]
[New features]
[Success stories]
[Community highlights]

Thank you for being part of our community!`})),children:"Monthly Update"})]})]}),e.jsx(E,{onClick:o,disabled:c.isPending,className:"w-full",children:c.isPending?"Creating...":"Create Newsletter"})]})]})]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:Array.isArray(i)&&i.length>0?i.map(h=>e.jsxs(R,{children:[e.jsx(Y,{children:e.jsxs(Q,{className:"flex items-center gap-2",children:[e.jsx(vn,{className:"w-5 h-5"}),h.subject||`Newsletter #${h.id}`]})}),e.jsx(L,{children:e.jsxs("div",{className:"space-y-3",children:[e.jsx(X,{variant:d(h.status),children:h.status}),h.content&&e.jsxs("p",{className:"text-sm text-gray-600 line-clamp-3",children:[h.content.substring(0,150),h.content.length>150&&"..."]}),h.recipientCount&&e.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[e.jsx(Ns,{className:"w-4 h-4"}),h.recipientCount," recipients"]}),h.scheduledDate&&e.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[e.jsx(dt,{className:"w-4 h-4"}),"Scheduled: ",new Date(h.scheduledDate).toLocaleDateString()]}),h.sentDate&&e.jsxs("div",{className:"flex items-center gap-2 text-sm text-green-600",children:[e.jsx(gr,{className:"w-4 h-4"}),"Sent: ",new Date(h.sentDate).toLocaleDateString()]}),e.jsxs("p",{className:"text-xs text-gray-500",children:["Created: ",new Date(h.createdAt).toLocaleDateString()]}),e.jsxs("div",{className:"flex gap-2 pt-2",children:[e.jsxs(E,{variant:"outline",size:"sm",className:"flex-1",children:[e.jsx(Ns,{className:"w-3 h-3 mr-1"}),"Preview"]}),e.jsx(E,{variant:"outline",size:"sm",className:"flex-1",children:"Edit"}),h.status==="draft"&&e.jsxs(E,{variant:"outline",size:"sm",className:"flex-1",children:[e.jsx(gr,{className:"w-3 h-3 mr-1"}),"Send"]})]})]})})]},h.id)):e.jsxs("div",{className:"col-span-full text-center py-8",children:[e.jsx(vn,{className:"w-12 h-12 mx-auto mb-4 text-gray-400"}),e.jsx("p",{className:"text-gray-600",children:"No newsletters found. Create your first newsletter!"})]})})]})}function _1(){const[t,s]=N.useState(!1),[n,a]=N.useState({songTitle:"",participants:[]}),[r,i]=N.useState({name:"",role:"songwriter",percentage:0,email:""}),l=Tt(),{data:c,isLoading:o}=ke({queryKey:["/api/splitsheets"],queryFn:()=>xe("/api/splitsheets")}),d=Xe({mutationFn:p=>xe("/api/splitsheets",{method:"POST",body:JSON.stringify(p)}),onSuccess:()=>{l.invalidateQueries({queryKey:["/api/splitsheets"]}),s(!1),a({songTitle:"",participants:[]})}}),h=()=>{!r.name||r.percentage<=0||(a(p=>({...p,participants:[...p.participants,{...r}]})),i({name:"",role:"songwriter",percentage:0,email:""}))},u=n.participants.reduce((p,g)=>p+g.percentage,0),m=()=>{!n.songTitle||u!==100||d.mutate(n)};return o?e.jsx("div",{children:"Loading splitsheets..."}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h2",{className:"text-2xl font-bold",children:"Splitsheet Management"}),e.jsxs(kt,{open:t,onOpenChange:s,children:[e.jsx(ma,{asChild:!0,children:e.jsxs(E,{children:[e.jsx(st,{className:"w-4 h-4 mr-2"}),"Create Splitsheet"]})}),e.jsxs(wt,{className:"max-w-2xl",children:[e.jsx(St,{children:e.jsx(Ct,{children:"Create New Splitsheet"})}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx(q,{htmlFor:"songTitle",children:"Song Title"}),e.jsx($,{id:"songTitle",value:n.songTitle,onChange:p=>a(g=>({...g,songTitle:p.target.value})),placeholder:"Enter song title..."})]}),e.jsxs("div",{className:"border rounded-lg p-4 space-y-4",children:[e.jsxs("h3",{className:"font-semibold flex items-center gap-2",children:[e.jsx(Ze,{className:"w-4 h-4"}),"Add Participants"]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(q,{htmlFor:"participantName",children:"Name"}),e.jsx($,{id:"participantName",value:r.name,onChange:p=>i(g=>({...g,name:p.target.value})),placeholder:"Participant name"})]}),e.jsxs("div",{children:[e.jsx(q,{htmlFor:"participantEmail",children:"Email"}),e.jsx($,{id:"participantEmail",type:"email",value:r.email,onChange:p=>i(g=>({...g,email:p.target.value})),placeholder:"email@example.com"})]}),e.jsxs("div",{children:[e.jsx(q,{htmlFor:"participantRole",children:"Role"}),e.jsxs(Re,{value:r.role,onValueChange:p=>i(g=>({...g,role:p})),children:[e.jsx(Me,{children:e.jsx(Oe,{})}),e.jsxs(_e,{children:[e.jsx(U,{value:"songwriter",children:"Songwriter"}),e.jsx(U,{value:"producer",children:"Producer"}),e.jsx(U,{value:"composer",children:"Composer"}),e.jsx(U,{value:"performer",children:"Performer"}),e.jsx(U,{value:"publisher",children:"Publisher"})]})]})]}),e.jsxs("div",{children:[e.jsx(q,{htmlFor:"participantPercentage",children:"Percentage (%)"}),e.jsx($,{id:"participantPercentage",type:"number",min:"0",max:"100",value:r.percentage,onChange:p=>i(g=>({...g,percentage:parseFloat(p.target.value)||0}))})]})]}),e.jsx(E,{onClick:h,variant:"outline",size:"sm",children:"Add Participant"})]}),n.participants.length>0&&e.jsxs("div",{className:"space-y-2",children:[e.jsx("h4",{className:"font-medium",children:"Current Participants:"}),n.participants.map((p,g)=>e.jsxs("div",{className:"flex justify-between items-center p-2 bg-gray-50 rounded",children:[e.jsxs("span",{children:[p.name," (",p.role,")"]}),e.jsxs(X,{children:[p.percentage,"%"]})]},g)),e.jsxs("div",{className:"text-sm text-gray-600",children:["Total: ",u,"% ",u===100?"":"(Must equal 100%)"]})]}),e.jsx(E,{onClick:m,disabled:d.isPending||u!==100||!n.songTitle,className:"w-full",children:d.isPending?"Creating...":"Create Splitsheet"})]})]})]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:Array.isArray(c)&&c.length>0?c.map(p=>{var g;return e.jsxs(R,{children:[e.jsx(Y,{children:e.jsxs(Q,{className:"flex items-center gap-2",children:[e.jsx(Fb,{className:"w-5 h-5"}),p.songTitle||`Splitsheet #${p.id}`]})}),e.jsx(L,{children:e.jsxs("div",{className:"space-y-3",children:[e.jsx(X,{variant:p.status==="pending"?"secondary":"default",children:p.status}),e.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[e.jsx(D6,{className:"w-4 h-4"}),((g=p.participants)==null?void 0:g.length)||0," participants"]}),e.jsxs("p",{className:"text-xs text-gray-500",children:["Created: ",new Date(p.createdAt).toLocaleDateString()]})]})})]},p.id)}):e.jsxs("div",{className:"col-span-full text-center py-8",children:[e.jsx(Fb,{className:"w-12 h-12 mx-auto mb-4 text-gray-400"}),e.jsx("p",{className:"text-gray-600",children:"No splitsheets found. Create your first splitsheet!"})]})})]})}function R1(){const[t,s]=N.useState(!1),[n,a]=N.useState({title:"",type:"booking",terms:"",amount:0,startDate:"",endDate:""}),r=Tt(),{data:i,isLoading:l}=ke({queryKey:["/api/contracts"],queryFn:()=>xe("/api/contracts")}),c=Xe({mutationFn:d=>xe("/api/contracts",{method:"POST",body:JSON.stringify(d)}),onSuccess:()=>{r.invalidateQueries({queryKey:["/api/contracts"]}),s(!1),a({title:"",type:"booking",terms:"",amount:0,startDate:"",endDate:""})}}),o=()=>{!n.title||!n.type||c.mutate(n)};return l?e.jsx("div",{children:"Loading contracts..."}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h2",{className:"text-2xl font-bold",children:"Contract Management"}),e.jsxs(kt,{open:t,onOpenChange:s,children:[e.jsx(ma,{asChild:!0,children:e.jsxs(E,{children:[e.jsx(st,{className:"w-4 h-4 mr-2"}),"Create Contract"]})}),e.jsxs(wt,{className:"max-w-2xl",children:[e.jsx(St,{children:e.jsx(Ct,{children:"Create New Contract"})}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(q,{htmlFor:"title",children:"Contract Title"}),e.jsx($,{id:"title",value:n.title,onChange:d=>a(h=>({...h,title:d.target.value})),placeholder:"Performance Agreement, Recording Contract, etc."})]}),e.jsxs("div",{children:[e.jsx(q,{htmlFor:"type",children:"Contract Type"}),e.jsxs(Re,{value:n.type,onValueChange:d=>a(h=>({...h,type:d})),children:[e.jsx(Me,{children:e.jsx(Oe,{})}),e.jsxs(_e,{children:[e.jsx(U,{value:"booking",children:"Booking Agreement"}),e.jsx(U,{value:"recording",children:"Recording Contract"}),e.jsx(U,{value:"management",children:"Management Agreement"}),e.jsx(U,{value:"publishing",children:"Publishing Deal"}),e.jsx(U,{value:"licensing",children:"Licensing Agreement"}),e.jsx(U,{value:"performance",children:"Performance Contract"})]})]})]}),e.jsxs("div",{children:[e.jsx(q,{htmlFor:"terms",children:"Contract Terms"}),e.jsx(mt,{id:"terms",value:n.terms,onChange:d=>a(h=>({...h,terms:d.target.value})),placeholder:"Enter contract terms and conditions...",rows:4})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(q,{htmlFor:"amount",children:"Contract Value ($)"}),e.jsx($,{id:"amount",type:"number",step:"0.01",value:n.amount,onChange:d=>a(h=>({...h,amount:parseFloat(d.target.value)||0}))})]}),e.jsx("div",{}),e.jsxs("div",{children:[e.jsx(q,{htmlFor:"startDate",children:"Start Date"}),e.jsx($,{id:"startDate",type:"date",value:n.startDate,onChange:d=>a(h=>({...h,startDate:d.target.value}))})]}),e.jsxs("div",{children:[e.jsx(q,{htmlFor:"endDate",children:"End Date"}),e.jsx($,{id:"endDate",type:"date",value:n.endDate,onChange:d=>a(h=>({...h,endDate:d.target.value}))})]})]}),e.jsx(E,{onClick:o,disabled:c.isPending,className:"w-full",children:c.isPending?"Creating...":"Create Contract"})]})]})]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:Array.isArray(i)&&i.length>0?i.map(d=>e.jsxs(R,{children:[e.jsx(Y,{children:e.jsxs(Q,{className:"flex items-center gap-2",children:[e.jsx(xt,{className:"w-5 h-5"}),d.title||`Contract #${d.id}`]})}),e.jsx(L,{children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(X,{variant:d.status==="draft"?"secondary":"default",children:d.status}),d.type&&e.jsx(X,{variant:"outline",children:d.type})]}),d.amount&&e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx(It,{className:"w-4 h-4"}),"$",d.amount.toLocaleString()]}),(d.startDate||d.endDate)&&e.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[e.jsx(dt,{className:"w-4 h-4"}),d.startDate&&new Date(d.startDate).toLocaleDateString(),d.startDate&&d.endDate&&" - ",d.endDate&&new Date(d.endDate).toLocaleDateString()]}),e.jsxs("p",{className:"text-xs text-gray-500",children:["Created: ",new Date(d.createdAt).toLocaleDateString()]}),e.jsxs("div",{className:"flex gap-2 pt-2",children:[e.jsx(E,{variant:"outline",size:"sm",className:"flex-1",children:"View"}),e.jsx(E,{variant:"outline",size:"sm",className:"flex-1",children:"Edit"})]})]})})]},d.id)):e.jsxs("div",{className:"col-span-full text-center py-8",children:[e.jsx(xt,{className:"w-12 h-12 mx-auto mb-4 text-gray-400"}),e.jsx("p",{className:"text-gray-600",children:"No contracts found. Create your first contract!"})]})})]})}function O1(){const[t,s]=N.useState(!1),[n,a]=N.useState({eventName:"",venueType:"indoor",bandSize:4,requirements:"",stagePlot:[],monitorMixes:[]}),r=Tt(),{data:i,isLoading:l}=ke({queryKey:["/api/technical-riders"],queryFn:()=>xe("/api/technical-riders")}),c=Xe({mutationFn:d=>xe("/api/technical-riders",{method:"POST",body:JSON.stringify(d)}),onSuccess:()=>{r.invalidateQueries({queryKey:["/api/technical-riders"]}),s(!1),a({eventName:"",venueType:"indoor",bandSize:4,requirements:"",stagePlot:[],monitorMixes:[]})}}),o=()=>{n.eventName&&c.mutate(n)};return l?e.jsx("div",{children:"Loading technical riders..."}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h2",{className:"text-2xl font-bold",children:"Technical Rider Management"}),e.jsxs(kt,{open:t,onOpenChange:s,children:[e.jsx(ma,{asChild:!0,children:e.jsxs(E,{children:[e.jsx(st,{className:"w-4 h-4 mr-2"}),"Create Technical Rider"]})}),e.jsxs(wt,{className:"max-w-2xl",children:[e.jsx(St,{children:e.jsx(Ct,{children:"Create New Technical Rider"})}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(q,{htmlFor:"eventName",children:"Event Name"}),e.jsx($,{id:"eventName",value:n.eventName,onChange:d=>a(h=>({...h,eventName:d.target.value})),placeholder:"Concert, Festival, etc."})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(q,{htmlFor:"venueType",children:"Venue Type"}),e.jsxs(Re,{value:n.venueType,onValueChange:d=>a(h=>({...h,venueType:d})),children:[e.jsx(Me,{children:e.jsx(Oe,{})}),e.jsxs(_e,{children:[e.jsx(U,{value:"indoor",children:"Indoor Venue"}),e.jsx(U,{value:"outdoor",children:"Outdoor Venue"}),e.jsx(U,{value:"festival",children:"Festival Stage"}),e.jsx(U,{value:"club",children:"Club/Bar"}),e.jsx(U,{value:"theater",children:"Theater"})]})]})]}),e.jsxs("div",{children:[e.jsx(q,{htmlFor:"bandSize",children:"Band Size"}),e.jsx($,{id:"bandSize",type:"number",min:"1",max:"20",value:n.bandSize,onChange:d=>a(h=>({...h,bandSize:parseInt(d.target.value)||4}))})]})]}),e.jsxs("div",{children:[e.jsx(q,{htmlFor:"requirements",children:"Technical Requirements"}),e.jsx(mt,{id:"requirements",value:n.requirements,onChange:d=>a(h=>({...h,requirements:d.target.value})),placeholder:"PA system, monitor requirements, lighting, etc.",rows:4})]}),e.jsxs("div",{className:"border rounded-lg p-4 space-y-3",children:[e.jsxs("h3",{className:"font-semibold flex items-center gap-2",children:[e.jsx(Gt,{className:"w-4 h-4"}),"Quick Setup Templates"]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsx(E,{type:"button",variant:"outline",size:"sm",onClick:()=>a(d=>({...d,requirements:`Standard 4-piece band setup:
- Drum kit with mics
- 2 guitar amps
- Bass amp
- 4 vocal mics
- Monitor system`})),children:"4-Piece Band"}),e.jsx(E,{type:"button",variant:"outline",size:"sm",onClick:()=>a(d=>({...d,requirements:`Solo acoustic setup:
- 1 vocal mic
- 1 guitar DI
- Monitor wedge
- Simple lighting`})),children:"Solo Acoustic"}),e.jsx(E,{type:"button",variant:"outline",size:"sm",onClick:()=>a(d=>({...d,requirements:`DJ/Electronic setup:
- 2 CDJ turntables
- DJ mixer
- Monitor speakers
- Lighting controller`})),children:"DJ Setup"}),e.jsx(E,{type:"button",variant:"outline",size:"sm",onClick:()=>a(d=>({...d,requirements:`Full band with horns:
- Complete drum kit
- 3 guitar/bass amps
- 6-8 vocal mics
- Saxophone/trumpet mics
- In-ear monitors`})),children:"Full Band+"})]})]}),e.jsx(E,{onClick:o,disabled:c.isPending,className:"w-full",children:c.isPending?"Creating...":"Create Technical Rider"})]})]})]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:Array.isArray(i)&&i.length>0?i.map(d=>{var h,u;return e.jsxs(R,{children:[e.jsx(Y,{children:e.jsxs(Q,{className:"flex items-center gap-2",children:[e.jsx(yn,{className:"w-5 h-5"}),d.eventName||`Technical Rider #${d.id}`]})}),e.jsx(L,{children:e.jsxs("div",{className:"space-y-3",children:[e.jsx(X,{variant:d.status==="active"?"default":"secondary",children:d.status}),e.jsxs("div",{className:"flex items-center justify-between text-sm text-gray-600",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(qa,{className:"w-4 h-4"}),((h=d.stagePlot)==null?void 0:h.length)||0," inputs"]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(Ze,{className:"w-4 h-4"}),((u=d.monitorMixes)==null?void 0:u.length)||0," monitors"]})]}),e.jsxs("p",{className:"text-xs text-gray-500",children:["Created: ",new Date(d.createdAt).toLocaleDateString()]}),e.jsxs("div",{className:"flex gap-2 pt-2",children:[e.jsx(E,{variant:"outline",size:"sm",className:"flex-1",children:"View"}),e.jsx(E,{variant:"outline",size:"sm",className:"flex-1",children:"Edit"}),e.jsx(E,{variant:"outline",size:"sm",className:"flex-1",children:"Export PDF"})]})]})})]},d.id)}):e.jsxs("div",{className:"col-span-full text-center py-8",children:[e.jsx(yn,{className:"w-12 h-12 mx-auto mb-4 text-gray-400"}),e.jsx("p",{className:"text-gray-600",children:"No technical riders found. Create your first rider!"})]})})]})}function D1(){const[t,s]=N.useState(!1),[n,a]=N.useState(""),[r,i]=N.useState({songTitle:"",artistName:"",releaseYear:new Date().getFullYear(),recordingType:"original"}),l=Tt(),{data:c,isLoading:o}=ke({queryKey:["/api/isrc-codes"],queryFn:()=>xe("/api/isrc-codes")}),d=Xe({mutationFn:p=>xe("/api/isrc-codes",{method:"POST",body:JSON.stringify(p)}),onSuccess:()=>{l.invalidateQueries({queryKey:["/api/isrc-codes"]}),s(!1),i({songTitle:"",artistName:"",releaseYear:new Date().getFullYear(),recordingType:"original"})}}),h=(p,g)=>{const x=g.toString().slice(-2),v=Math.floor(Math.random()*9e4)+1e4;return`DM-WTM-${x}-${v}`},u=()=>{if(!r.songTitle||!r.artistName)return;const p=h(r.songTitle,r.releaseYear);d.mutate({...r,code:p})},m=async p=>{try{await navigator.clipboard.writeText(p),a(p),setTimeout(()=>a(""),2e3)}catch(g){console.error("Failed to copy:",g)}};return o?e.jsx("div",{children:"Loading ISRC codes..."}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h2",{className:"text-2xl font-bold",children:"ISRC Code Management"}),e.jsxs(kt,{open:t,onOpenChange:s,children:[e.jsx(ma,{asChild:!0,children:e.jsxs(E,{children:[e.jsx(st,{className:"w-4 h-4 mr-2"}),"Generate ISRC Code"]})}),e.jsxs(wt,{children:[e.jsx(St,{children:e.jsx(Ct,{children:"Generate New ISRC Code"})}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(q,{htmlFor:"songTitle",children:"Song Title"}),e.jsx($,{id:"songTitle",value:r.songTitle,onChange:p=>i(g=>({...g,songTitle:p.target.value})),placeholder:"Enter song title"})]}),e.jsxs("div",{children:[e.jsx(q,{htmlFor:"artistName",children:"Artist Name"}),e.jsx($,{id:"artistName",value:r.artistName,onChange:p=>i(g=>({...g,artistName:p.target.value})),placeholder:"Enter artist name"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(q,{htmlFor:"releaseYear",children:"Release Year"}),e.jsx($,{id:"releaseYear",type:"number",min:"1900",max:"2030",value:r.releaseYear,onChange:p=>i(g=>({...g,releaseYear:parseInt(p.target.value)||new Date().getFullYear()}))})]}),e.jsxs("div",{children:[e.jsx(q,{htmlFor:"recordingType",children:"Recording Type"}),e.jsxs(Re,{value:r.recordingType,onValueChange:p=>i(g=>({...g,recordingType:p})),children:[e.jsx(Me,{children:e.jsx(Oe,{})}),e.jsxs(_e,{children:[e.jsx(U,{value:"original",children:"Original Recording"}),e.jsx(U,{value:"remix",children:"Remix"}),e.jsx(U,{value:"remaster",children:"Remaster"}),e.jsx(U,{value:"live",children:"Live Recording"}),e.jsx(U,{value:"cover",children:"Cover Version"})]})]})]})]}),e.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg",children:[e.jsx("h3",{className:"font-semibold text-sm mb-2",children:"Preview ISRC Code:"}),e.jsx("code",{className:"text-lg font-mono bg-white px-3 py-2 rounded border",children:r.songTitle?h(r.songTitle,r.releaseYear):"DM-WTM-XX-XXXXX"}),e.jsx("p",{className:"text-xs text-gray-600 mt-2",children:"Format: DM (Dominica) - WTM (WaituMusic) - YY (Year) - XXXXX (Sequential)"})]}),e.jsx(E,{onClick:u,disabled:d.isPending,className:"w-full",children:d.isPending?"Generating...":"Generate ISRC Code"})]})]})]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:Array.isArray(c)&&c.length>0?c.map(p=>e.jsxs(R,{children:[e.jsx(Y,{children:e.jsxs(Q,{className:"flex items-center gap-2",children:[e.jsx(hx,{className:"w-5 h-5"}),p.songTitle||`ISRC #${p.id}`]})}),e.jsx(L,{children:e.jsxs("div",{className:"space-y-3",children:[p.code&&e.jsx("div",{className:"bg-gray-50 p-3 rounded-lg",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("code",{className:"font-mono text-sm",children:p.code}),e.jsx(E,{variant:"ghost",size:"sm",onClick:()=>m(p.code),className:"h-8 w-8 p-0",children:n===p.code?e.jsx(ir,{className:"w-4 h-4 text-green-600"}):e.jsx(co,{className:"w-4 h-4"})})]})}),p.artistName&&e.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[e.jsx(Ue,{className:"w-4 h-4"}),p.artistName]}),e.jsx(X,{variant:p.status==="generated"?"default":"secondary",children:p.status}),e.jsxs("p",{className:"text-xs text-gray-500",children:["Generated: ",new Date(p.createdAt).toLocaleDateString()]}),e.jsxs("div",{className:"flex gap-2 pt-2",children:[e.jsx(E,{variant:"outline",size:"sm",className:"flex-1",children:"Export"}),e.jsx(E,{variant:"outline",size:"sm",className:"flex-1",children:"Register"})]})]})})]},p.id)):e.jsxs("div",{className:"col-span-full text-center py-8",children:[e.jsx(hx,{className:"w-12 h-12 mx-auto mb-4 text-gray-400"}),e.jsx("p",{className:"text-gray-600",children:"No ISRC codes found. Generate your first code!"})]})})]})}const jJ=()=>{const[t,s]=N.useState(!1),[n,a]=N.useState(!1),{data:r,isLoading:i,refetch:l}=ke({queryKey:["/api/system-analysis/comprehensive"],enabled:!1}),c=Xe({mutationFn:()=>xe("/api/system-analysis/auto-fix",{method:"POST"}),onSuccess:p=>{nu({title:"Auto-fix Complete",description:`Fixed ${p.result.fixed} issues, ${p.result.failed} failed`}),l()},onError:p=>{nu({title:"Auto-fix Failed",description:"Failed to apply automatic fixes",variant:"destructive"})}}),o=async()=>{s(!0);try{await l(),nu({title:"System Analysis Complete",description:"Comprehensive system analysis has been completed"})}catch{nu({title:"Analysis Failed",description:"Failed to run system analysis",variant:"destructive"})}finally{s(!1)}},d=async()=>{a(!0);try{await c.mutateAsync()}finally{a(!1)}},h=p=>{switch(p){case"HEALTHY":return"text-green-600 dark:text-green-400";case"DEGRADED":return"text-yellow-600 dark:text-yellow-400";case"FAILING":return"text-orange-600 dark:text-orange-400";case"BROKEN":return"text-red-600 dark:text-red-400";default:return"text-gray-600 dark:text-gray-400"}},u=p=>{switch(p){case"HEALTHY":return e.jsx(Ti,{className:"h-4 w-4 text-green-600 dark:text-green-400"});case"DEGRADED":return e.jsx(ys,{className:"h-4 w-4 text-yellow-600 dark:text-yellow-400"});case"FAILING":return e.jsx(on,{className:"h-4 w-4 text-orange-600 dark:text-orange-400"});case"BROKEN":return e.jsx(Fa,{className:"h-4 w-4 text-red-600 dark:text-red-400"});default:return e.jsx(Qt,{className:"h-4 w-4 text-gray-600 dark:text-gray-400"})}},m=p=>{switch(p){case"CRITICAL":return"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200";case"HIGH":return"bg-orange-100 text-orange-800 dark:bg-orange-900 dark:text-orange-200";case"MEDIUM":return"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200";case"LOW":return"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200";default:return"bg-gray-100 text-gray-800 dark:bg-gray-900 dark:text-gray-200"}};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs(R,{children:[e.jsxs(Y,{children:[e.jsxs(Q,{className:"flex items-center space-x-2",children:[e.jsx(Bt,{className:"h-6 w-6"}),e.jsx("span",{children:"OppHub Comprehensive System Analyzer"})]}),e.jsx(rt,{children:"Proactive identification and prevention of all platform issues. This analyzer examines every component to identify what should be working but isn't, and implements preventive measures."})]}),e.jsx(L,{children:e.jsxs("div",{className:"flex flex-wrap gap-3",children:[e.jsxs(E,{onClick:o,disabled:t||i,className:"flex items-center space-x-2",children:[t||i?e.jsx(En,{className:"h-4 w-4 animate-spin"}):e.jsx(Lb,{className:"h-4 w-4"}),e.jsx("span",{children:t||i?"Analyzing...":"Run Comprehensive Analysis"})]}),(r==null?void 0:r.analysis)&&e.jsxs(E,{onClick:d,disabled:n,variant:"outline",className:"flex items-center space-x-2",children:[n?e.jsx(En,{className:"h-4 w-4 animate-spin"}):e.jsx(In,{className:"h-4 w-4"}),e.jsx("span",{children:n?"Applying Fixes...":"Apply Auto-Fixes"})]})]})})]}),(r==null?void 0:r.analysis)&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs(R,{children:[e.jsx(Y,{children:e.jsxs(Q,{className:"flex items-center justify-between",children:[e.jsx("span",{children:"Overall System Health"}),e.jsxs(X,{variant:r.analysis.overallHealth>=90?"default":r.analysis.overallHealth>=70?"secondary":"destructive",children:[r.analysis.overallHealth,"%"]})]})}),e.jsxs(L,{children:[e.jsx(qs,{value:r.analysis.overallHealth,className:"mb-4"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-green-600 dark:text-green-400",children:r.analysis.componentHealth.filter(p=>p.status==="HEALTHY").length}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Healthy Components"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-yellow-600 dark:text-yellow-400",children:r.analysis.componentHealth.filter(p=>["DEGRADED","FAILING"].includes(p.status)).length}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Degraded Components"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-red-600 dark:text-red-400",children:r.analysis.criticalIssues.length}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Critical Issues"})]})]})]})]}),e.jsxs(Ut,{defaultValue:"issues",className:"space-y-4",children:[e.jsxs(jt,{className:"grid w-full grid-cols-4",children:[e.jsx(Ne,{value:"issues",children:"Critical Issues"}),e.jsx(Ne,{value:"components",children:"Component Health"}),e.jsx(Ne,{value:"preventive",children:"Preventive Measures"}),e.jsx(Ne,{value:"recommendations",children:"Recommendations"})]}),e.jsx(ge,{value:"issues",className:"space-y-4",children:e.jsxs(R,{children:[e.jsxs(Y,{children:[e.jsx(Q,{children:"Critical Issues Requiring Immediate Attention"}),e.jsx(rt,{children:"Issues that should be working but aren't, and their root causes"})]}),e.jsx(L,{children:e.jsx(wc,{className:"h-96",children:r.analysis.criticalIssues.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx(Ti,{className:"h-12 w-12 text-green-600 mx-auto mb-4"}),e.jsx("p",{className:"text-lg font-medium",children:"No Critical Issues Found"}),e.jsx("p",{className:"text-muted-foreground",children:"All critical systems are functioning properly"})]}):e.jsx("div",{className:"space-y-4",children:r.analysis.criticalIssues.map((p,g)=>e.jsx(R,{className:"border-red-200 dark:border-red-800",children:e.jsxs(L,{className:"p-4",children:[e.jsxs("div",{className:"flex items-start justify-between mb-2",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Fa,{className:"h-5 w-5 text-red-600"}),e.jsx("span",{className:"font-medium",children:p.component})]}),e.jsx(X,{className:m(p.category),children:p.category})]}),e.jsx("h4",{className:"font-medium mb-2",children:p.issue}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Expected: "}),e.jsx("span",{className:"text-muted-foreground",children:p.expectedBehavior})]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Actual: "}),e.jsx("span",{className:"text-muted-foreground",children:p.actualBehavior})]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Root Cause: "}),e.jsx("span",{className:"text-muted-foreground",children:p.rootCause})]}),p.autoFixAvailable&&e.jsxs(X,{variant:"outline",className:"text-green-600",children:[e.jsx(In,{className:"h-3 w-3 mr-1"}),"Auto-fix Available"]})]})]})},g))})})})]})}),e.jsx(ge,{value:"components",className:"space-y-4",children:e.jsxs(R,{children:[e.jsxs(Y,{children:[e.jsx(Q,{children:"Component Health Status"}),e.jsx(rt,{children:"Detailed health status of all platform components"})]}),e.jsx(L,{children:e.jsx(wc,{className:"h-96",children:e.jsx("div",{className:"space-y-4",children:r.analysis.componentHealth.sort((p,g)=>g.criticalityScore-p.criticalityScore).map((p,g)=>e.jsx(R,{children:e.jsxs(L,{className:"p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[u(p.status),e.jsx("span",{className:"font-medium",children:p.name})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs(X,{variant:"outline",children:["Priority: ",p.criticalityScore]}),e.jsx(X,{className:h(p.status),children:p.status})]})]}),p.issues.length>0&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(ss,{}),e.jsxs("div",{className:"text-sm",children:[e.jsxs("span",{className:"font-medium",children:["Issues (",p.issues.length,"):"]}),e.jsx("ul",{className:"list-disc list-inside mt-1 space-y-1",children:p.issues.map((x,v)=>e.jsx("li",{className:"text-muted-foreground",children:x.issue},v))})]})]}),e.jsxs("div",{className:"text-sm text-muted-foreground mt-2",children:[e.jsx("span",{className:"font-medium",children:"Dependencies: "}),p.dependencies.join(", ")]})]})},g))})})})]})}),e.jsx(ge,{value:"preventive",className:"space-y-4",children:e.jsxs(R,{children:[e.jsxs(Y,{children:[e.jsx(Q,{children:"Preventive Measures"}),e.jsx(rt,{children:"Proactive measures to prevent future issues"})]}),e.jsx(L,{children:e.jsx(wc,{className:"h-96",children:e.jsx("div",{className:"space-y-2",children:r.analysis.preventiveMeasures.map((p,g)=>e.jsxs("div",{className:"flex items-start space-x-2 p-2 rounded border",children:[e.jsx(Bt,{className:"h-4 w-4 text-blue-600 mt-0.5"}),e.jsx("span",{className:"text-sm",children:p})]},g))})})})]})}),e.jsx(ge,{value:"recommendations",className:"space-y-4",children:e.jsxs(R,{children:[e.jsxs(Y,{children:[e.jsx(Q,{children:"Proactive Recommendations"}),e.jsx(rt,{children:"Strategic recommendations for long-term platform health"})]}),e.jsx(L,{children:e.jsx(wc,{className:"h-96",children:e.jsx("div",{className:"space-y-2",children:r.analysis.proactiveRecommendations.map((p,g)=>e.jsxs("div",{className:"flex items-start space-x-2 p-2 rounded border",children:[e.jsx(Is,{className:"h-4 w-4 text-green-600 mt-0.5"}),e.jsx("span",{className:"text-sm",children:p})]},g))})})})]})})]}),e.jsx(R,{children:e.jsx(L,{className:"p-4",children:e.jsxs("div",{className:"text-center text-sm text-muted-foreground",children:["Last analysis: ",new Date(r.timestamp).toLocaleString()]})})})]}),!r&&!i&&e.jsx(R,{children:e.jsxs(L,{className:"p-8 text-center",children:[e.jsx(Jn,{className:"h-16 w-16 text-muted-foreground mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium mb-2",children:"Ready to Analyze System Health"}),e.jsx("p",{className:"text-muted-foreground mb-4",children:`Click "Run Comprehensive Analysis" to identify all issues that should be working but aren't, and get proactive recommendations for prevention.`}),e.jsxs(E,{onClick:o,size:"lg",children:[e.jsx(Lb,{className:"h-4 w-4 mr-2"}),"Start Analysis"]})]})})]})};function vJ(){const t=[{title:"Merchandise Manager",description:"Manage products, inventory, and artist merchandise",icon:Na,route:"/merchandise-manager",color:"bg-blue-500"},{title:"Splitsheet Manager",description:"Create and manage music rights splitsheets",icon:y6,route:"/splitsheet-manager",color:"bg-green-500"},{title:"Contract Manager",description:"Handle legal documents and contract management",icon:xt,route:"/contract-manager",color:"bg-purple-500"},{title:"Technical Rider Manager",description:"Create performance specifications and technical requirements",icon:yn,route:"/technical-rider-manager",color:"bg-orange-500"},{title:"ISRC Manager",description:"Generate and manage music identification codes",icon:hx,route:"/isrc-manager",color:"bg-red-500"},{title:"Newsletter Manager",description:"Create and distribute marketing communications",icon:vn,route:"/newsletter-manager",color:"bg-indigo-500"}];return e.jsxs("div",{className:"container mx-auto px-4 py-8",children:[e.jsxs("div",{className:"mb-8",children:[e.jsxs("h1",{className:"text-3xl font-bold mb-4 flex items-center gap-3",children:[e.jsx(Gt,{className:"w-8 h-8"}),"System Management"]}),e.jsx("p",{className:"text-gray-600",children:"Access comprehensive management tools for all platform systems"})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:t.map(s=>{const n=s.icon;return e.jsxs(R,{className:"hover:shadow-lg transition-shadow",children:[e.jsx(Y,{children:e.jsxs(Q,{className:"flex items-center gap-3",children:[e.jsx("div",{className:`p-2 rounded-lg ${s.color} text-white`,children:e.jsx(n,{className:"w-5 h-5"})}),s.title]})}),e.jsxs(L,{children:[e.jsx("p",{className:"text-gray-600 mb-4",children:s.description}),e.jsx(Lt,{href:s.route,children:e.jsx(E,{className:"w-full",children:"Access Manager"})})]})]},s.route)})}),e.jsxs("div",{className:"mt-12 bg-gray-50 rounded-lg p-6",children:[e.jsxs("h2",{className:"text-xl font-semibold mb-4 flex items-center gap-2",children:[e.jsx(Ze,{className:"w-5 h-5"}),"System Status"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"bg-white p-4 rounded-lg",children:[e.jsx("h3",{className:"font-medium text-green-600",children:"All Systems Operational"}),e.jsx("p",{className:"text-sm text-gray-600",children:"6/6 management systems online"})]}),e.jsxs("div",{className:"bg-white p-4 rounded-lg",children:[e.jsx("h3",{className:"font-medium text-blue-600",children:"Database Connected"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Schema properly aligned"})]}),e.jsxs("div",{className:"bg-white p-4 rounded-lg",children:[e.jsx("h3",{className:"font-medium text-purple-600",children:"APIs Functional"}),e.jsx("p",{className:"text-sm text-gray-600",children:"All endpoints returning JSON"})]})]})]})]})}function yJ(){const[t]=As();return N.useEffect(()=>{window.scrollTo(0,0)},[t]),null}const NJ=()=>{const[t]=As();return N.useEffect(()=>{window.scrollTo({top:0,left:0,behavior:"smooth"})},[t]),null};function bJ(){const{toast:t}=nt(),{user:s}=_s(),[,n]=As(),a=s,i=a?(be=>[3,4].includes(be)?"artist":[5,6].includes(be)?"musician":[7,8].includes(be)?"professional":"fan")(a.roleId):"artist",l=[],{data:c=[],isLoading:o}=ke({queryKey:[`/api/users/${a==null?void 0:a.id}/hospitality-requirements?includeDemo=true`],enabled:!!(a!=null&&a.id)}),{data:d=[],isLoading:h}=ke({queryKey:[`/api/users/${a==null?void 0:a.id}/technical-requirements?includeDemo=true`],enabled:!!(a!=null&&a.id)}),{data:u=[],isLoading:m}=ke({queryKey:[`/api/users/${a==null?void 0:a.id}/performance-specs?includeDemo=true`],enabled:!!(a!=null&&a.id)}),p=["background_vocalist","producer","arranger","composer","songwriter","dj","music_director","sound_engineer","mixing_engineer","mastering_engineer","music_producer","beat_maker","orchestrator","lyricist","jingle_writer"],g=i==="artist"||i==="musician"||i==="professional"&&l.some(be=>p.includes(be.toLowerCase().replace(/\s+/g,"_"))),x=[3,5,7],v=[4,6,8],y=x.includes((a==null?void 0:a.roleId)||0),f=v.includes((a==null?void 0:a.roleId)||0),b=y||f,{data:j}=ke({queryKey:["/api/user/subscription-status"],enabled:f}),S=y||f&&(j==null?void 0:j.isActive),k=y||f&&(j==null?void 0:j.isActive),T=y||f&&(j==null?void 0:j.isActive),[A,C]=N.useState({fullName:(a==null?void 0:a.fullName)||"",bio:"",stageName:"",primaryGenre:"",secondaryGenres:[],topGenres:[],instruments:"",services:"",websiteUrl:"",phoneNumber:"",isRegisteredWithPRO:!1,performingRightsOrganization:"",ipiNumber:"",socialMediaHandles:[],technicalRequirements:[],hospitalityRequirements:[],performanceSpecs:[]});N.useEffect(()=>{if(console.log("Hospitality requirements loaded:",c),c.length>0){const be=c.map(Ie=>({id:Ie.id,category:Ie.requirement_type||"Other",requirement:Ie.requirement_name||"",notes:Ie.specifications||""}));console.log("Mapped hospitality data:",be),C(Ie=>({...Ie,hospitalityRequirements:be}))}},[c]),N.useEffect(()=>{if(console.log("Technical requirements loaded:",d),d.length>0){const be=d.map(Ie=>({id:Ie.id,category:Ie.requirement_type||"Other",requirement:Ie.requirement_name||"",notes:Ie.specifications||""}));console.log("Mapped technical data:",be),C(Ie=>({...Ie,technicalRequirements:be}))}},[d]),N.useEffect(()=>{if(console.log("Performance specs loaded:",u),u.length>0){const be=u.map(Ie=>({id:Ie.id,category:Ie.spec_type||"Other",specification:Ie.spec_name||"",notes:Ie.spec_value||""}));console.log("Mapped performance data:",be),C(Ie=>({...Ie,performanceSpecs:be}))}},[u]);const[w,P]=N.useState({platform:"",handle:""}),[M]=N.useState(["Instagram","TikTok","YouTube","Spotify","SoundCloud","Twitter","Facebook","LinkedIn","Website","Portfolio","Apple Music","Deezer"]),[I]=N.useState(["Pop","Hip-Hop","R&B","Gospel","Caribbean","Afrobeats","Neo Soul","Jazz","Blues","Country","Rock","Electronic","Folk","Reggae","Dancehall","Soca","Calypso","Latin","World","Classical"]),[W,_]=N.useState({category:"",requirement:"",notes:""}),[B]=N.useState(["Audio Equipment","Instruments","Stage Setup","Lighting","Power Requirements","Recording Equipment","Monitors","Microphones","Cables & Connections","Other"]),[O,z]=N.useState({category:"",requirement:"",notes:""}),[F]=N.useState(["Dressing Room","Catering","Transportation","Accommodation","Security","Guest List","Parking","Merchandise Space","Meet & Greet Area","Other"]),[K,D]=N.useState({category:"",specification:"",notes:""}),[G]=N.useState(["Setlist Requirements","Timing & Schedule","Special Effects","Costume Changes","Backup Musicians","Rehearsal Needs","Sound Check","Performance Flow","Other"]),H=(be,Ie)=>{C(ve=>({...ve,[be]:Ie}))},V=()=>{W.category&&W.requirement&&(C(be=>({...be,technicalRequirements:[...be.technicalRequirements,{...W}]})),_({category:"",requirement:"",notes:""}),t({title:"Technical Requirement Added",description:"Technical requirement added to your profile"}))},se=be=>{C(Ie=>({...Ie,technicalRequirements:Ie.technicalRequirements.filter((ve,ie)=>ie!==be)})),t({title:"Technical Requirement Removed",description:"Technical requirement removed from your profile"})},Z=()=>{O.category&&O.requirement&&(C(be=>({...be,hospitalityRequirements:[...be.hospitalityRequirements,{...O}]})),z({category:"",requirement:"",notes:""}),t({title:"Hospitality Requirement Added",description:"Hospitality requirement added to your profile"}))},le=be=>{C(Ie=>({...Ie,hospitalityRequirements:Ie.hospitalityRequirements.filter((ve,ie)=>ie!==be)})),t({title:"Hospitality Requirement Removed",description:"Hospitality requirement removed from your profile"})},ne=()=>{K.category&&K.specification&&(C(be=>({...be,performanceSpecs:[...be.performanceSpecs,{...K}]})),D({category:"",specification:"",notes:""}),t({title:"Performance Spec Added",description:"Performance specification added to your profile"}))},ue=be=>{C(Ie=>({...Ie,performanceSpecs:Ie.performanceSpecs.filter((ve,ie)=>ie!==be)})),t({title:"Performance Spec Removed",description:"Performance specification removed from your profile"})},te=()=>{w.platform&&w.handle&&(C(be=>({...be,socialMediaHandles:[...be.socialMediaHandles,{...w}]})),P({platform:"",handle:""}),t({title:"Social Handle Added",description:"Social media handle added to your profile"}))},Ae=be=>{C(Ie=>({...Ie,socialMediaHandles:Ie.socialMediaHandles.filter((ve,ie)=>ie!==be)})),t({title:"Social Handle Removed",description:"Social media handle removed from your profile"})},Ge=()=>{t({title:"Profile Updated",description:"Your profile has been updated successfully"}),n("/dashboard")};return a?e.jsxs("div",{className:"container mx-auto p-6 max-w-4xl",children:[e.jsxs("div",{className:"mb-6",children:[e.jsxs(E,{variant:"ghost",onClick:()=>n("/dashboard"),className:"mb-4",children:[e.jsx(Rn,{className:"h-4 w-4 mr-2"}),"Back to Dashboard"]}),e.jsx("h1",{className:"text-3xl font-bold",children:"Edit Profile"}),e.jsx("p",{className:"text-muted-foreground",children:"Update your profile information and preferences"})]}),e.jsxs("div",{className:"space-y-8 bg-white rounded-lg border p-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx("h2",{className:"text-xl font-semibold",children:"Basic Information"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(q,{htmlFor:"fullName",children:"Full Name"}),e.jsx($,{id:"fullName",value:A.fullName,onChange:be=>H("fullName",be.target.value),placeholder:"Enter your full name"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(q,{htmlFor:"phoneNumber",children:"Phone Number"}),e.jsx($,{id:"phoneNumber",value:A.phoneNumber,onChange:be=>H("phoneNumber",be.target.value),placeholder:"Your phone number"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(q,{htmlFor:"bio",children:"Bio"}),e.jsx(mt,{id:"bio",value:A.bio,onChange:be=>H("bio",be.target.value),placeholder:"Tell us about yourself...",rows:3})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(q,{htmlFor:"websiteUrl",children:"Website URL"}),e.jsx($,{id:"websiteUrl",value:A.websiteUrl,onChange:be=>H("websiteUrl",be.target.value),placeholder:"https://yourwebsite.com"})]})]}),i==="artist"&&e.jsxs("div",{className:"space-y-4",children:[e.jsx("h2",{className:"text-xl font-semibold",children:"Artist Information"}),e.jsx(j5,{currentStageName:A.stageName,onStageNameChange:be=>H("stageName",be),userType:i})]}),(i==="artist"||i==="musician")&&e.jsxs("div",{className:"space-y-4",children:[e.jsx("h2",{className:"text-xl font-semibold",children:"Musical Genres"}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(q,{htmlFor:"primaryGenre",children:"Primary Genre"}),e.jsxs(Re,{value:A.primaryGenre,onValueChange:be=>H("primaryGenre",be),children:[e.jsx(Me,{children:e.jsx(Oe,{placeholder:"Select your primary genre"})}),e.jsx(_e,{children:I.map(be=>e.jsx(U,{value:be,children:be},be))})]})]})]}),i==="musician"&&e.jsxs("div",{className:"space-y-4",children:[e.jsx("h2",{className:"text-xl font-semibold",children:"Instruments"}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(q,{htmlFor:"instruments",children:"Instruments You Play"}),e.jsx($,{id:"instruments",value:A.instruments,onChange:be=>H("instruments",be.target.value),placeholder:"e.g., Piano, Guitar, Drums"})]})]}),i==="professional"&&e.jsxs("div",{className:"space-y-4",children:[e.jsx("h2",{className:"text-xl font-semibold",children:"Professional Services"}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(q,{htmlFor:"services",children:"Services You Offer"}),e.jsx($,{id:"services",value:A.services,onChange:be=>H("services",be.target.value),placeholder:"e.g., Music Production, Sound Engineering"})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h2",{className:"text-xl font-semibold",children:"Social Media"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Add your social media profiles for better discoverability"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(Re,{value:w.platform,onValueChange:be=>P(Ie=>({...Ie,platform:be})),children:[e.jsx(Me,{className:"w-40",children:e.jsx(Oe,{placeholder:"Platform"})}),e.jsx(_e,{children:M.filter(be=>!A.socialMediaHandles.some(Ie=>Ie.platform===be)).map(be=>e.jsx(U,{value:be,children:be},be))})]}),e.jsx($,{placeholder:"@username or URL",value:w.handle,onChange:be=>P(Ie=>({...Ie,handle:be.target.value})),className:"flex-1"}),e.jsx(E,{onClick:te,size:"icon",children:e.jsx(st,{className:"h-4 w-4"})})]}),A.socialMediaHandles.length>0&&e.jsx("div",{className:"space-y-2",children:A.socialMediaHandles.map((be,Ie)=>e.jsxs("div",{className:"flex items-center justify-between p-2 border rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("span",{className:"font-medium",children:[be.platform,":"]}),e.jsx("span",{className:"text-muted-foreground",children:be.handle})]}),e.jsx(E,{variant:"ghost",size:"sm",onClick:()=>Ae(Ie),children:e.jsx(Xt,{className:"h-4 w-4"})})]},Ie))})]}),b&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h2",{className:"text-xl font-semibold flex items-center gap-2",children:" Technical Requirements"}),y&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ns,{className:"h-4 w-4 text-amber-500"}),e.jsx("span",{className:"bg-green-100 text-green-800 text-xs font-medium px-2 py-1 rounded-full",children:"FREE"})]}),f&&!k&&e.jsx("div",{className:"flex items-center gap-2",children:e.jsx("span",{className:"bg-orange-100 text-orange-800 text-xs font-medium px-2 py-1 rounded-full",children:"SUBSCRIPTION REQUIRED"})})]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Define your technical specifications for auto-populating technical riders"}),!k&&f&&e.jsxs("div",{className:"bg-orange-50 border border-orange-200 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(ns,{className:"h-5 w-5 text-orange-600"}),e.jsx("h4",{className:"font-medium text-orange-900",children:"Upgrade Required"})]}),e.jsx("p",{className:"text-sm text-orange-700 mb-3",children:"Technical requirements are available for managed users or with an active subscription."}),e.jsx(E,{variant:"outline",size:"sm",className:"border-orange-300 text-orange-700 hover:bg-orange-100",children:"Upgrade Now"})]}),k&&e.jsx("div",{children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-2",children:[e.jsxs(Re,{value:W.category,onValueChange:be=>_(Ie=>({...Ie,category:be})),children:[e.jsx(Me,{children:e.jsx(Oe,{placeholder:"Category"})}),e.jsx(_e,{children:B.map(be=>e.jsx(U,{value:be,children:be},be))})]}),e.jsx($,{placeholder:"Requirement details",value:W.requirement,onChange:be=>_(Ie=>({...Ie,requirement:be.target.value}))}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx($,{placeholder:"Notes (optional)",value:W.notes,onChange:be=>_(Ie=>({...Ie,notes:be.target.value})),className:"flex-1"}),e.jsx(E,{onClick:V,size:"icon",children:e.jsx(st,{className:"h-4 w-4"})})]})]})}),k&&A.technicalRequirements.length>0&&e.jsx("div",{className:"space-y-2",children:A.technicalRequirements.map((be,Ie)=>e.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg bg-blue-50",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("span",{className:"font-medium text-blue-800",children:[be.category,":"]}),e.jsx("span",{className:"text-blue-700",children:be.requirement})]}),be.notes&&e.jsxs("p",{className:"text-sm text-blue-600 mt-1",children:["Notes: ",be.notes]})]}),e.jsx(E,{variant:"ghost",size:"sm",onClick:()=>se(Ie),children:e.jsx(Vt,{className:"h-4 w-4"})})]},Ie))})]}),b&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h2",{className:"text-xl font-semibold flex items-center gap-2",children:" Hospitality Requirements"}),y&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ns,{className:"h-4 w-4 text-amber-500"}),e.jsx("span",{className:"bg-green-100 text-green-800 text-xs font-medium px-2 py-1 rounded-full",children:"FREE"})]}),f&&!S&&e.jsx("div",{className:"flex items-center gap-2",children:e.jsx("span",{className:"bg-orange-100 text-orange-800 text-xs font-medium px-2 py-1 rounded-full",children:"SUBSCRIPTION REQUIRED"})})]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Define your hospitality needs for auto-populating technical riders"}),!S&&f&&e.jsxs("div",{className:"bg-orange-50 border border-orange-200 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(ns,{className:"h-5 w-5 text-orange-600"}),e.jsx("h4",{className:"font-medium text-orange-900",children:"Upgrade Required"})]}),e.jsx("p",{className:"text-sm text-orange-700 mb-3",children:"Hospitality requirements are available for managed users or with an active subscription."}),e.jsx(E,{variant:"outline",size:"sm",className:"border-orange-300 text-orange-700 hover:bg-orange-100",children:"Upgrade Now"})]}),S&&e.jsx("div",{children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-2",children:[e.jsxs(Re,{value:O.category,onValueChange:be=>z(Ie=>({...Ie,category:be})),children:[e.jsx(Me,{children:e.jsx(Oe,{placeholder:"Category"})}),e.jsx(_e,{children:F.map(be=>e.jsx(U,{value:be,children:be},be))})]}),e.jsx($,{placeholder:"Requirement details",value:O.requirement,onChange:be=>z(Ie=>({...Ie,requirement:be.target.value}))}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx($,{placeholder:"Notes (optional)",value:O.notes,onChange:be=>z(Ie=>({...Ie,notes:be.target.value})),className:"flex-1"}),e.jsx(E,{onClick:Z,size:"icon",children:e.jsx(st,{className:"h-4 w-4"})})]})]})}),S&&A.hospitalityRequirements.length>0&&e.jsx("div",{className:"space-y-2",children:A.hospitalityRequirements.map((be,Ie)=>e.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg bg-green-50",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("span",{className:"font-medium text-green-800",children:[be.category,":"]}),e.jsx("span",{className:"text-green-700",children:be.requirement})]}),be.notes&&e.jsxs("p",{className:"text-sm text-green-600 mt-1",children:["Notes: ",be.notes]})]}),e.jsx(E,{variant:"ghost",size:"sm",onClick:()=>le(Ie),children:e.jsx(Vt,{className:"h-4 w-4"})})]},Ie))})]}),b&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h2",{className:"text-xl font-semibold flex items-center gap-2",children:" Performance Specifications"}),y&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ns,{className:"h-4 w-4 text-amber-500"}),e.jsx("span",{className:"bg-green-100 text-green-800 text-xs font-medium px-2 py-1 rounded-full",children:"FREE"})]}),f&&!T&&e.jsx("div",{className:"flex items-center gap-2",children:e.jsx("span",{className:"bg-orange-100 text-orange-800 text-xs font-medium px-2 py-1 rounded-full",children:"SUBSCRIPTION REQUIRED"})})]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Define your performance requirements for auto-populating technical riders"}),!T&&f&&e.jsxs("div",{className:"bg-orange-50 border border-orange-200 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(ns,{className:"h-5 w-5 text-orange-600"}),e.jsx("h4",{className:"font-medium text-orange-900",children:"Upgrade Required"})]}),e.jsx("p",{className:"text-sm text-orange-700 mb-3",children:"Performance specifications are available for managed users or with an active subscription."}),e.jsx(E,{variant:"outline",size:"sm",className:"border-orange-300 text-orange-700 hover:bg-orange-100",children:"Upgrade Now"})]}),T&&e.jsx("div",{children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-2",children:[e.jsxs(Re,{value:K.category,onValueChange:be=>D(Ie=>({...Ie,category:be})),children:[e.jsx(Me,{children:e.jsx(Oe,{placeholder:"Category"})}),e.jsx(_e,{children:G.map(be=>e.jsx(U,{value:be,children:be},be))})]}),e.jsx($,{placeholder:"Specification details",value:K.specification,onChange:be=>D(Ie=>({...Ie,specification:be.target.value}))}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx($,{placeholder:"Notes (optional)",value:K.notes,onChange:be=>D(Ie=>({...Ie,notes:be.target.value})),className:"flex-1"}),e.jsx(E,{onClick:ne,size:"icon",children:e.jsx(st,{className:"h-4 w-4"})})]})]})}),T&&A.performanceSpecs.length>0&&e.jsx("div",{className:"space-y-2",children:A.performanceSpecs.map((be,Ie)=>e.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg bg-purple-50",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("span",{className:"font-medium text-purple-800",children:[be.category,":"]}),e.jsx("span",{className:"text-purple-700",children:be.specification})]}),be.notes&&e.jsxs("p",{className:"text-sm text-purple-600 mt-1",children:["Notes: ",be.notes]})]}),e.jsx(E,{variant:"ghost",size:"sm",onClick:()=>ue(Ie),children:e.jsx(Vt,{className:"h-4 w-4"})})]},Ie))})]}),g&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("h2",{className:"text-xl font-semibold flex items-center gap-2",children:[e.jsx(xt,{className:"h-5 w-5"}),"Performance Rights Organization (PRO)"]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Register with a PRO to collect royalties for your musical works and performances. PROs are open to creators worldwide."}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(gt,{id:"pro-registered",checked:A.isRegisteredWithPRO,onCheckedChange:be=>C(Ie=>({...Ie,isRegisteredWithPRO:be}))}),e.jsx(q,{htmlFor:"pro-registered",children:"I am registered with a PRO"})]}),A.isRegisteredWithPRO&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 pl-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(q,{htmlFor:"pro-org",children:"PRO Organization"}),e.jsxs(Re,{value:A.performingRightsOrganization,onValueChange:be=>H("performingRightsOrganization",be),children:[e.jsx(Me,{children:e.jsx(Oe,{placeholder:"Select PRO"})}),e.jsxs(_e,{children:[e.jsx(U,{value:"ascap",children:"ASCAP (USA)"}),e.jsx(U,{value:"bmi",children:"BMI (USA)"}),e.jsx(U,{value:"sesac",children:"SESAC (USA)"}),e.jsx(U,{value:"socan",children:"SOCAN (Canada)"}),e.jsx(U,{value:"prs",children:"PRS for Music (UK)"}),e.jsx(U,{value:"gema",children:"GEMA (Germany)"}),e.jsx(U,{value:"sacem",children:"SACEM (France)"}),e.jsx(U,{value:"siae",children:"SIAE (Italy)"}),e.jsx(U,{value:"sgae",children:"SGAE (Spain)"}),e.jsx(U,{value:"other",children:"Other"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(q,{htmlFor:"ipi-number",children:"IPI Number (Optional)"}),e.jsx($,{id:"ipi-number",value:A.ipiNumber,onChange:be=>H("ipiNumber",be.target.value),placeholder:"e.g., 00123456789"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"International Publisher Identifier (if you have one)"})]})]})]})]}),e.jsxs("div",{className:"flex justify-end gap-3 pt-6 border-t",children:[e.jsxs(E,{variant:"outline",onClick:()=>n("/dashboard"),children:[e.jsx(Xt,{className:"h-4 w-4 mr-2"}),"Cancel"]}),e.jsxs(E,{onClick:Ge,children:[e.jsx(js,{className:"h-4 w-4 mr-2"}),"Save Changes"]})]})]})]}):e.jsx("div",{className:"container mx-auto p-6",children:e.jsx("div",{className:"text-center",children:e.jsx("h1",{className:"text-2xl font-bold mb-4",children:"Please log in to edit your profile"})})})}function wJ(){const{token:t}=yd(),[s,n]=As(),[a,r]=N.useState(""),[i,l]=N.useState(""),[c,o]=N.useState(!1);N.useEffect(()=>{const x=localStorage.getItem("share_email"),v=localStorage.getItem("share_name");x&&v&&(r(x),l(v),o(!0))},[]);const{data:d,isLoading:h,error:u,refetch:m}=ke({queryKey:["shared-document",t,a,i],queryFn:async()=>{if(!t)throw new Error("No token provided");const x=new URLSearchParams;a&&x.append("email",a),i&&x.append("name",i);const v=await fetch(`/api/share/${t}?${x}`,{method:"GET",headers:{"Content-Type":"application/json"}});if(!v.ok){const y=await v.json();throw new Error(y.message||"Failed to access document")}return v.json()},enabled:!!t&&c,retry:!1}),p=x=>{x.preventDefault(),localStorage.setItem("share_email",a),localStorage.setItem("share_name",i),o(!0)};return c?h?e.jsx("div",{className:"min-h-screen flex items-center justify-center",children:e.jsx(oa,{className:"h-8 w-8 animate-spin"})}):u?e.jsx("div",{className:"min-h-screen flex items-center justify-center p-4",children:e.jsxs(R,{className:"w-full max-w-md",children:[e.jsx(Y,{children:e.jsx(Q,{children:"Access Error"})}),e.jsxs(L,{children:[e.jsxs(Ua,{variant:"destructive",children:[e.jsx(on,{className:"h-4 w-4"}),e.jsx(sr,{children:u.message||"Unable to access this document"})]}),e.jsxs("div",{className:"mt-4 space-y-2",children:[e.jsx(E,{variant:"outline",className:"w-full",onClick:()=>n("/"),children:"Go to Home"}),e.jsx(E,{variant:"default",className:"w-full",onClick:()=>n("/register"),children:"Create an Account"})]})]})]})}):(()=>{if(!d)return null;const{documentType:x,documentId:v,accessType:y,sectionRestrictions:f}=d;return e.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 p-4",children:e.jsx("div",{className:"max-w-6xl mx-auto",children:e.jsxs(R,{children:[e.jsx(Y,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs(Q,{className:"flex items-center gap-2",children:[e.jsx(xt,{className:"h-5 w-5"}),x.replace("_"," ").toUpperCase()]}),e.jsxs(rt,{children:["Document ID: ",v,"  Access Level: ",y]})]}),(y==="download"||y==="full")&&e.jsxs(E,{variant:"outline",children:[e.jsx(Cs,{className:"h-4 w-4 mr-2"}),"Download"]})]})}),e.jsxs(L,{children:[e.jsx(Ua,{children:e.jsxs(sr,{children:["Welcome ",i,"! You have ",y," access to this ",x.replace("_"," "),".",f&&" Some sections may be restricted based on your access level."]})}),e.jsx("div",{className:"mt-6 p-6 bg-white dark:bg-gray-800 rounded-lg",children:e.jsx("p",{className:"text-center text-muted-foreground",children:"Document content would be displayed here based on the document type and your access level."})})]})]})})})})():e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 dark:bg-gray-900 p-4",children:e.jsxs(R,{className:"w-full max-w-md",children:[e.jsxs(Y,{children:[e.jsx(Q,{children:"Access Shared Document"}),e.jsx(rt,{children:"Please provide your information to access this document"})]}),e.jsxs(L,{children:[e.jsxs("form",{onSubmit:p,className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(q,{htmlFor:"name",children:"Your Name"}),e.jsx($,{id:"name",type:"text",value:i,onChange:x=>l(x.target.value),required:!0,placeholder:"Enter your full name"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(q,{htmlFor:"email",children:"Your Email"}),e.jsx($,{id:"email",type:"email",value:a,onChange:x=>r(x.target.value),required:!0,placeholder:"Enter your email address"})]}),e.jsx(E,{type:"submit",className:"w-full",children:"Continue"})]}),e.jsxs("div",{className:"mt-6 text-center text-sm text-muted-foreground",children:[e.jsx("p",{children:"Don't have a Wai'tuMusic account?"}),e.jsx(E,{variant:"link",onClick:()=>n("/register"),className:"text-primary",children:"Sign up for free"})]})]})]})})}function SJ(){var d,h;const[t]=As(),{addItem:s}=Zo();_s();const{toast:n}=nt(),[a,r]=N.useState(null);N.useEffect(()=>{const m=new URLSearchParams(window.location.search).get("id");m&&r(parseInt(m))},[t]);const{data:i=[],isLoading:l}=ke({queryKey:["/api/albums"]}),{data:c=[]}=ke({queryKey:["/api/songs"]}),{data:o=[]}=ke({queryKey:["/api/artists"]});if(a){const u=i.find(x=>x.id===a),m=c.filter(x=>x.albumId===a),p=o.find(x=>x.userId===(u==null?void 0:u.artistUserId));if(l)return e.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center",children:e.jsx("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-primary"})});if(!u)return e.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx(Ue,{className:"h-16 w-16 text-gray-400 mx-auto mb-4"}),e.jsx("h1",{className:"text-2xl font-bold mb-2",children:"Album not found"}),e.jsx("p",{className:"text-gray-600 mb-4",children:"The album you're looking for doesn't exist."}),e.jsxs(E,{onClick:()=>window.history.back(),children:[e.jsx(Rn,{className:"h-4 w-4 mr-2"}),"Go Back"]})]})});const g=((h=(d=p==null?void 0:p.stageNames)==null?void 0:d[0])==null?void 0:h.name)||"Unknown Artist";return e.jsx("div",{className:"container mx-auto px-4 py-8",children:e.jsxs("div",{className:"max-w-4xl mx-auto",children:[e.jsxs(E,{variant:"outline",className:"mb-6",onClick:()=>window.history.back(),children:[e.jsx(Rn,{className:"h-4 w-4 mr-2"}),"Back"]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-8 mb-8",children:[e.jsx("div",{children:u.coverImageUrl&&e.jsx("img",{src:u.coverImageUrl,alt:u.title,className:"w-full aspect-square rounded-lg object-cover shadow-lg"})}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold mb-2",children:u.title}),e.jsxs("p",{className:"text-xl text-gray-600 mb-2",children:["by ",g]}),u.genre&&e.jsx(X,{variant:"secondary",className:"mb-4",children:u.genre})]}),e.jsxs("div",{className:"space-y-2",children:[u.releaseDate&&e.jsxs("div",{className:"flex items-center text-gray-600",children:[e.jsx(dt,{className:"h-4 w-4 mr-2"}),"Released: ",new Date(u.releaseDate).toLocaleDateString()]}),u.totalTracks&&e.jsxs("div",{className:"flex items-center text-gray-600",children:[e.jsx(Ue,{className:"h-4 w-4 mr-2"}),u.totalTracks," tracks"]}),u.price&&e.jsxs("div",{className:"flex items-center text-green-600 font-semibold",children:[e.jsx(It,{className:"h-4 w-4 mr-1"}),"$",u.price]})]}),u.price&&e.jsxs(E,{className:"w-full",onClick:()=>{s({name:u.title,price:parseFloat(u.price),type:"album",artistName:g,imageUrl:u.coverImageUrl}),n({title:"Added to Cart",description:`${u.title} added to your cart`})},children:[e.jsx(Fs,{className:"h-4 w-4 mr-2"}),"Add to Cart - $",u.price]})]})]}),m.length>0&&e.jsxs(R,{children:[e.jsx(Y,{children:e.jsx(Q,{children:"Track Listing"})}),e.jsx(L,{children:e.jsx("div",{className:"space-y-2",children:m.map((x,v)=>e.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("span",{className:"text-gray-500 font-mono text-sm w-6 text-center",children:v+1}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium",children:x.title}),x.durationSeconds&&e.jsxs("p",{className:"text-sm text-gray-500",children:[Math.floor(x.durationSeconds/60),":",(x.durationSeconds%60).toString().padStart(2,"0")]})]})]}),e.jsx(E,{size:"sm",variant:"ghost",children:e.jsx(Gn,{className:"h-4 w-4"})})]},x.id))})})]})]})})}return l?e.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center",children:e.jsx("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-primary"})}):e.jsx("div",{className:"container mx-auto px-4 py-8",children:e.jsxs("div",{className:"max-w-6xl mx-auto",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold mb-4",children:"Albums"}),e.jsx("p",{className:"text-gray-600",children:"Discover amazing albums from our talented artists"})]}),i.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(Ue,{className:"h-16 w-16 text-gray-400 mx-auto mb-4"}),e.jsx("h2",{className:"text-xl font-semibold mb-2",children:"No albums available"}),e.jsx("p",{className:"text-gray-600",children:"Check back soon for new releases!"})]}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:i.map(u=>{var g,x;const m=o.find(v=>v.userId===u.artistUserId),p=((x=(g=m==null?void 0:m.stageNames)==null?void 0:g[0])==null?void 0:x.name)||"Unknown Artist";return e.jsxs(R,{className:"hover:shadow-lg transition-shadow",children:[e.jsx("div",{className:"aspect-square overflow-hidden rounded-t-lg",children:u.coverImageUrl?e.jsx("img",{src:u.coverImageUrl,alt:u.title,className:"w-full h-full object-cover hover:scale-105 transition-transform duration-200 cursor-pointer",onClick:()=>r(u.id)}):e.jsx("div",{className:"w-full h-full bg-gray-200 flex items-center justify-center cursor-pointer hover:bg-gray-300 transition-colors",onClick:()=>r(u.id),children:e.jsx(Ue,{className:"h-16 w-16 text-gray-400"})})}),e.jsxs(L,{className:"p-4",children:[e.jsx("h3",{className:"font-semibold text-lg mb-1 truncate",children:u.title}),e.jsxs("p",{className:"text-gray-600 mb-2 truncate",children:["by ",p]}),u.genre&&e.jsx(X,{variant:"outline",className:"mb-2 text-xs",children:u.genre}),e.jsxs("div",{className:"flex items-center justify-between",children:[u.price&&e.jsxs("span",{className:"font-semibold text-green-600",children:["$",u.price]}),e.jsx(E,{size:"sm",onClick:()=>r(u.id),children:"View Details"})]})]})]},u.id)})})]})})}function X0({isOpen:t,onClose:s,requirement:n,userId:a,requirementType:r}){const{toast:i}=nt(),l=Tt(),[c,o]=N.useState({requirementType:(n==null?void 0:n.requirementType)||(n==null?void 0:n.specType)||"",requirementName:(n==null?void 0:n.requirementName)||(n==null?void 0:n.specName)||"",specifications:(n==null?void 0:n.specifications)||(n==null?void 0:n.specValue)||"",isRequired:(n==null?void 0:n.isRequired)??!0}),d=()=>{const g=`/api/users/${a}`;switch(r){case"hospitality":return`${g}/hospitality-requirements/${n.id}`;case"technical":return`${g}/technical-requirements/${n.id}`;case"performance":return`${g}/performance-specs/${n.id}`;default:throw new Error("Invalid requirement type")}},h=()=>{switch(r){case"hospitality":return["/api/users",a,"hospitality-requirements"];case"technical":return["/api/users",a,"technical-requirements"];case"performance":return["/api/users",a,"performance-specs"];default:return[]}},u=Xe({mutationFn:async g=>await xe(d(),{method:"PUT",body:JSON.stringify(g)}),onSuccess:()=>{i({title:"Success",description:`${r.charAt(0).toUpperCase()+r.slice(1)} requirement updated successfully`}),l.invalidateQueries({queryKey:h()}),s()},onError:g=>{i({title:"Error",description:g.message||`Failed to update ${r} requirement`,variant:"destructive"})}}),m=g=>{if(g.preventDefault(),!c.requirementType||!c.requirementName){i({title:"Validation Error",description:"Type and name are required fields",variant:"destructive"});return}const x=r==="performance"?{specType:c.requirementType,specName:c.requirementName,specValue:c.specifications}:{requirementType:c.requirementType,requirementName:c.requirementName,specifications:c.specifications,isRequired:c.isRequired};u.mutate(x)},p=()=>{switch(r){case"hospitality":return[{value:"catering",label:"Catering"},{value:"accommodation",label:"Accommodation"},{value:"transportation",label:"Transportation"},{value:"green_room",label:"Green Room"},{value:"security",label:"Security"},{value:"other",label:"Other"}];case"technical":return[{value:"equipment",label:"Equipment"},{value:"stage_setup",label:"Stage Setup"},{value:"lighting",label:"Lighting"},{value:"sound",label:"Sound"},{value:"power",label:"Power"},{value:"other",label:"Other"}];case"performance":return[{value:"duration",label:"Duration"},{value:"break_requirements",label:"Break Requirements"},{value:"setup_time",label:"Setup Time"},{value:"sound_check",label:"Sound Check"},{value:"setlist",label:"Setlist"},{value:"other",label:"Other"}];default:return[]}};return e.jsx(kt,{open:t,onOpenChange:s,children:e.jsxs(wt,{className:"sm:max-w-[425px]",children:[e.jsxs(St,{children:[e.jsxs(Ct,{children:["Edit ",r.charAt(0).toUpperCase()+r.slice(1)," Requirement"]}),e.jsxs(us,{children:["Update your ",r," requirement details below."]})]}),e.jsxs("form",{onSubmit:m,className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(q,{htmlFor:"type",children:"Type"}),e.jsxs(Re,{value:c.requirementType,onValueChange:g=>o({...c,requirementType:g}),children:[e.jsx(Me,{children:e.jsx(Oe,{placeholder:"Select type"})}),e.jsx(_e,{children:p().map(g=>e.jsx(U,{value:g.value,children:g.label},g.value))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(q,{htmlFor:"name",children:"Name"}),e.jsx($,{id:"name",value:c.requirementName,onChange:g=>o({...c,requirementName:g.target.value}),placeholder:"Enter requirement name",required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(q,{htmlFor:"specifications",children:r==="performance"?"Value":"Specifications"}),e.jsx(mt,{id:"specifications",value:c.specifications,onChange:g=>o({...c,specifications:g.target.value}),placeholder:r==="performance"?"Enter specification value":"Enter detailed specifications",rows:3})]}),r!=="performance"&&e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(gt,{id:"required",checked:c.isRequired,onCheckedChange:g=>o({...c,isRequired:g})}),e.jsx(q,{htmlFor:"required",children:"Required"})]}),e.jsxs(hi,{children:[e.jsx(E,{type:"button",variant:"outline",onClick:s,children:"Cancel"}),e.jsx(E,{type:"submit",disabled:u.isPending,children:u.isPending?"Updating...":"Update"})]})]})]})})}function CJ(){const{user:t}=_s(),[,s]=As(),[n,a]=N.useState(!1),[r,i]=N.useState(null),{data:l,isLoading:c,error:o}=ke({queryKey:["/api/users",t==null?void 0:t.id,"hospitality-requirements"],enabled:!!(t!=null&&t.id)}),d=()=>{s("/dashboard?tab=profile")},h=m=>{i(m),a(!0)},u=()=>{a(!1),i(null)};return c?e.jsxs("div",{className:"container mx-auto p-6",children:[e.jsx("div",{className:"flex items-center gap-4 mb-6",children:e.jsxs(E,{variant:"ghost",onClick:d,children:[e.jsx(Rn,{className:"h-4 w-4 mr-2"}),"Back to Dashboard"]})}),e.jsx("div",{className:"space-y-4",children:[1,2,3].map(m=>e.jsxs(R,{className:"animate-pulse",children:[e.jsxs(Y,{children:[e.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/3"}),e.jsx("div",{className:"h-3 bg-gray-100 rounded w-2/3"})]}),e.jsxs(L,{children:[e.jsx("div",{className:"h-3 bg-gray-100 rounded w-full mb-2"}),e.jsx("div",{className:"h-3 bg-gray-100 rounded w-3/4"})]})]},m))})]}):o?e.jsxs("div",{className:"container mx-auto p-6",children:[e.jsx("div",{className:"flex items-center gap-4 mb-6",children:e.jsxs(E,{variant:"ghost",onClick:d,children:[e.jsx(Rn,{className:"h-4 w-4 mr-2"}),"Back to Dashboard"]})}),e.jsx(R,{className:"border-destructive",children:e.jsxs(Y,{children:[e.jsx(Q,{className:"text-destructive",children:"Error Loading Requirements"}),e.jsx(rt,{children:"Unable to load your hospitality requirements. Please try again later."})]})})]}):e.jsxs("div",{className:"container mx-auto p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs(E,{variant:"ghost",onClick:d,children:[e.jsx(Rn,{className:"h-4 w-4 mr-2"}),"Back to Dashboard"]}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold",children:"Hospitality Requirements"}),e.jsx("p",{className:"text-muted-foreground",children:"Manage your event hospitality and comfort needs"})]})]}),e.jsxs(E,{children:[e.jsx(st,{className:"h-4 w-4 mr-2"}),"Add Requirement"]})]}),e.jsx("div",{className:"grid gap-4",children:l&&l.length>0?l.map(m=>e.jsxs(R,{className:"hover:shadow-md transition-shadow",children:[e.jsx(Y,{children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{children:[e.jsx(Q,{className:"text-lg",children:m.requirementName}),e.jsx(rt,{className:"capitalize",children:m.requirementType.replace("_"," ")})]}),e.jsxs("div",{className:"flex gap-2",children:[m.isRequired?e.jsxs(X,{variant:"destructive",children:[e.jsx(ir,{className:"h-3 w-3 mr-1"}),"Required"]}):e.jsxs(X,{variant:"secondary",children:[e.jsx(Qt,{className:"h-3 w-3 mr-1"}),"Optional"]}),m.isDemo&&e.jsx(X,{variant:"outline",children:"Demo Data"})]})]})}),e.jsxs(L,{children:[e.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:m.specifications}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(E,{variant:"outline",size:"sm",onClick:()=>h(m),children:[e.jsx($s,{className:"h-3 w-3 mr-1"}),"Edit"]}),e.jsxs(E,{variant:"outline",size:"sm",className:"text-destructive",children:[e.jsx(Vt,{className:"h-3 w-3 mr-1"}),"Remove"]})]})]})]},m.id)):e.jsx(R,{children:e.jsxs(Y,{children:[e.jsx(Q,{children:"No Requirements Set"}),e.jsx(rt,{children:`You haven't set any hospitality requirements yet. Click "Add Requirement" to get started.`})]})})}),r&&e.jsx(X0,{isOpen:n,onClose:u,requirement:r,userId:(t==null?void 0:t.id)||0,requirementType:"hospitality"})]})}function kJ(){const{user:t}=_s(),[,s]=As(),[n,a]=N.useState(!1),[r,i]=N.useState(null),{data:l,isLoading:c,error:o}=ke({queryKey:["/api/users",t==null?void 0:t.id,"technical-requirements"],enabled:!!(t!=null&&t.id)}),d=()=>{s("/dashboard?tab=profile")},h=p=>{i(p),a(!0)},u=()=>{a(!1),i(null)},m=p=>{switch(p){case"equipment":return e.jsx(yn,{className:"h-4 w-4"});case"stage_setup":return e.jsx(qr,{className:"h-4 w-4"});case"lighting":return e.jsx(Bl,{className:"h-4 w-4"});default:return e.jsx(Gt,{className:"h-4 w-4"})}};return c?e.jsxs("div",{className:"container mx-auto p-6",children:[e.jsx("div",{className:"flex items-center gap-4 mb-6",children:e.jsxs(E,{variant:"ghost",onClick:d,children:[e.jsx(Rn,{className:"h-4 w-4 mr-2"}),"Back to Dashboard"]})}),e.jsx("div",{className:"space-y-4",children:[1,2,3].map(p=>e.jsxs(R,{className:"animate-pulse",children:[e.jsxs(Y,{children:[e.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/3"}),e.jsx("div",{className:"h-3 bg-gray-100 rounded w-2/3"})]}),e.jsxs(L,{children:[e.jsx("div",{className:"h-3 bg-gray-100 rounded w-full mb-2"}),e.jsx("div",{className:"h-3 bg-gray-100 rounded w-3/4"})]})]},p))})]}):o?e.jsxs("div",{className:"container mx-auto p-6",children:[e.jsx("div",{className:"flex items-center gap-4 mb-6",children:e.jsxs(E,{variant:"ghost",onClick:d,children:[e.jsx(Rn,{className:"h-4 w-4 mr-2"}),"Back to Dashboard"]})}),e.jsx(R,{className:"border-destructive",children:e.jsxs(Y,{children:[e.jsx(Q,{className:"text-destructive",children:"Error Loading Requirements"}),e.jsx(rt,{children:"Unable to load your technical requirements. Please try again later."})]})})]}):e.jsxs("div",{className:"container mx-auto p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs(E,{variant:"ghost",onClick:d,children:[e.jsx(Rn,{className:"h-4 w-4 mr-2"}),"Back to Dashboard"]}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold",children:"Technical Requirements"}),e.jsx("p",{className:"text-muted-foreground",children:"Manage your performance equipment and technical needs"})]})]}),e.jsxs(E,{children:[e.jsx(st,{className:"h-4 w-4 mr-2"}),"Add Requirement"]})]}),e.jsx("div",{className:"grid gap-4",children:l&&l.length>0?l.map(p=>e.jsxs(R,{className:"hover:shadow-md transition-shadow",children:[e.jsx(Y,{children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-primary/10 rounded-lg",children:m(p.requirementType)}),e.jsxs("div",{children:[e.jsx(Q,{className:"text-lg",children:p.requirementName}),e.jsx(rt,{className:"capitalize",children:p.requirementType.replace("_"," ")})]})]}),e.jsxs("div",{className:"flex gap-2",children:[p.isRequired?e.jsxs(X,{variant:"destructive",children:[e.jsx(ir,{className:"h-3 w-3 mr-1"}),"Required"]}):e.jsxs(X,{variant:"secondary",children:[e.jsx(Qt,{className:"h-3 w-3 mr-1"}),"Optional"]}),p.isDemo&&e.jsx(X,{variant:"outline",children:"Demo Data"})]})]})}),e.jsxs(L,{children:[e.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:p.specifications}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(E,{variant:"outline",size:"sm",onClick:()=>h(p),children:[e.jsx($s,{className:"h-3 w-3 mr-1"}),"Edit"]}),e.jsxs(E,{variant:"outline",size:"sm",className:"text-destructive",children:[e.jsx(Vt,{className:"h-3 w-3 mr-1"}),"Remove"]}),e.jsx(E,{variant:"outline",size:"sm",children:"Generate Rider"})]})]})]},p.id)):e.jsx(R,{children:e.jsxs(Y,{children:[e.jsx(Q,{children:"No Requirements Set"}),e.jsx(rt,{children:`You haven't set any technical requirements yet. Click "Add Requirement" to get started.`})]})})}),r&&e.jsx(X0,{isOpen:n,onClose:u,requirement:r,userId:(t==null?void 0:t.id)||0,requirementType:"technical"})]})}function AJ(){const{user:t}=_s(),[,s]=As(),[n,a]=N.useState(!1),[r,i]=N.useState(null),{data:l,isLoading:c,error:o}=ke({queryKey:["/api/users",t==null?void 0:t.id,"performance-requirements"],enabled:!!(t!=null&&t.id)}),d=()=>{s("/dashboard?tab=profile")},h=p=>{i(p),a(!0)},u=()=>{a(!1),i(null)},m=p=>{switch(p){case"setlist":return e.jsx(Ue,{className:"h-4 w-4"});case"band_requirements":return e.jsx(Ze,{className:"h-4 w-4"});case"venue_requirements":return e.jsx(Dn,{className:"h-4 w-4"});case"timing":return e.jsx(z6,{className:"h-4 w-4"});default:return e.jsx(Ue,{className:"h-4 w-4"})}};return c?e.jsxs("div",{className:"container mx-auto p-6",children:[e.jsx("div",{className:"flex items-center gap-4 mb-6",children:e.jsxs(E,{variant:"ghost",onClick:d,children:[e.jsx(Rn,{className:"h-4 w-4 mr-2"}),"Back to Dashboard"]})}),e.jsx("div",{className:"space-y-4",children:[1,2,3].map(p=>e.jsxs(R,{className:"animate-pulse",children:[e.jsxs(Y,{children:[e.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/3"}),e.jsx("div",{className:"h-3 bg-gray-100 rounded w-2/3"})]}),e.jsxs(L,{children:[e.jsx("div",{className:"h-3 bg-gray-100 rounded w-full mb-2"}),e.jsx("div",{className:"h-3 bg-gray-100 rounded w-3/4"})]})]},p))})]}):o?e.jsxs("div",{className:"container mx-auto p-6",children:[e.jsx("div",{className:"flex items-center gap-4 mb-6",children:e.jsxs(E,{variant:"ghost",onClick:d,children:[e.jsx(Rn,{className:"h-4 w-4 mr-2"}),"Back to Dashboard"]})}),e.jsx(R,{className:"border-destructive",children:e.jsxs(Y,{children:[e.jsx(Q,{className:"text-destructive",children:"Error Loading Requirements"}),e.jsx(rt,{children:"Unable to load your performance requirements. Please try again later."})]})})]}):e.jsxs("div",{className:"container mx-auto p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs(E,{variant:"ghost",onClick:d,children:[e.jsx(Rn,{className:"h-4 w-4 mr-2"}),"Back to Dashboard"]}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold",children:"Performance Requirements"}),e.jsx("p",{className:"text-muted-foreground",children:"Manage your performance specifications and show requirements"})]})]}),e.jsxs(E,{children:[e.jsx(st,{className:"h-4 w-4 mr-2"}),"Add Requirement"]})]}),e.jsx("div",{className:"grid gap-4",children:l&&l.length>0?l.map(p=>e.jsxs(R,{className:"hover:shadow-md transition-shadow",children:[e.jsx(Y,{children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-primary/10 rounded-lg",children:m(p.requirementType)}),e.jsxs("div",{children:[e.jsx(Q,{className:"text-lg",children:p.requirementName}),e.jsx(rt,{className:"capitalize",children:p.requirementType.replace("_"," ")})]})]}),e.jsxs("div",{className:"flex gap-2",children:[p.isRequired?e.jsxs(X,{variant:"destructive",children:[e.jsx(ir,{className:"h-3 w-3 mr-1"}),"Required"]}):e.jsxs(X,{variant:"secondary",children:[e.jsx(Qt,{className:"h-3 w-3 mr-1"}),"Optional"]}),p.isDemo&&e.jsx(X,{variant:"outline",children:"Demo Data"})]})]})}),e.jsxs(L,{children:[e.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:p.specifications}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(E,{variant:"outline",size:"sm",onClick:()=>h(p),children:[e.jsx($s,{className:"h-3 w-3 mr-1"}),"Edit"]}),e.jsxs(E,{variant:"outline",size:"sm",className:"text-destructive",children:[e.jsx(Vt,{className:"h-3 w-3 mr-1"}),"Remove"]}),e.jsx(E,{variant:"outline",size:"sm",children:"Preview Contract"})]})]})]},p.id)):e.jsx(R,{children:e.jsxs(Y,{children:[e.jsx(Q,{children:"No Requirements Set"}),e.jsx(rt,{children:`You haven't set any performance requirements yet. Click "Add Requirement" to get started.`})]})})}),r&&e.jsx(X0,{isOpen:n,onClose:u,requirement:r,userId:(t==null?void 0:t.id)||0,requirementType:"performance"})]})}function PJ(){return e.jsxs($$,{children:[e.jsx(yJ,{}),e.jsx(NJ,{}),e.jsxs(F_,{children:[e.jsx(yt,{path:"/",component:G$}),e.jsx(yt,{path:"/login",component:dB}),e.jsx(yt,{path:"/register",component:mB}),e.jsx(yt,{path:"/artists",component:lZ}),e.jsx(yt,{path:"/browse-artists",component:dZ}),e.jsx(yt,{path:"/artists/:id",component:cZ}),e.jsx(yt,{path:"/booking",component:xZ}),e.jsx(yt,{path:"/services",component:gZ}),e.jsx(yt,{path:"/consultation",component:yZ}),e.jsx(yt,{path:"/collaboration",component:NZ}),e.jsx(yt,{path:"/about",component:bZ}),e.jsx(yt,{path:"/contact",component:WZ}),e.jsx(yt,{path:"/cart",component:YZ}),e.jsx(yt,{path:"/store",component:ZZ}),e.jsx(yt,{path:"/albums",component:SJ}),e.jsx(yt,{path:"/share/:token",component:wJ}),e.jsx(yt,{path:"/opphub",children:e.jsx(qt,{children:e.jsx(MX,{})})}),e.jsx(yt,{path:"/opphub-classic",children:e.jsx(qt,{children:e.jsx(TX,{})})}),e.jsx(yt,{path:"/submit-opportunity",children:e.jsx(qt,{children:e.jsx(OX,{})})}),e.jsx(yt,{path:"/opportunities/:id",children:e.jsx(qt,{children:e.jsx(IX,{})})}),e.jsx(yt,{path:"/opphub-strategic",children:e.jsx(qt,{children:e.jsx(FX,{})})}),e.jsx(yt,{path:"/dashboard",children:e.jsx(qt,{children:e.jsx(tZ,{})})}),e.jsx(yt,{path:"/profile/edit",children:e.jsx(qt,{children:e.jsx(bJ,{})})}),e.jsx(yt,{path:"/hospitality-requirements",children:e.jsx(qt,{children:e.jsx(CJ,{})})}),e.jsx(yt,{path:"/technical-requirements",children:e.jsx(qt,{children:e.jsx(kJ,{})})}),e.jsx(yt,{path:"/performance-requirements",children:e.jsx(qt,{children:e.jsx(AJ,{})})}),e.jsx(yt,{path:"/recommendations",children:e.jsx(qt,{children:e.jsx(JZ,{})})}),e.jsx(yt,{path:"/admin",children:e.jsx(qt,{children:e.jsx(bg,{})})}),e.jsx(yt,{path:"/merchandise-manager",children:e.jsx(qt,{children:e.jsx(gJ,{})})}),e.jsx(yt,{path:"/newsletter-manager",children:e.jsx(qt,{children:e.jsx(M1,{})})}),e.jsx(yt,{path:"/splitsheet-manager",children:e.jsx(qt,{children:e.jsx(_1,{})})}),e.jsx(yt,{path:"/contract-manager",children:e.jsx(qt,{children:e.jsx(R1,{})})}),e.jsx(yt,{path:"/technical-rider-manager",children:e.jsx(qt,{children:e.jsx(O1,{})})}),e.jsx(yt,{path:"/isrc-manager",children:e.jsx(qt,{children:e.jsx(D1,{})})}),e.jsx(yt,{path:"/opportunity-matching",children:e.jsx(qt,{children:e.jsx(nJ,{})})}),e.jsx(yt,{path:"/health-monitor",children:e.jsx(qt,{children:e.jsx(qX,{})})}),e.jsx(yt,{path:"/platform-audit",children:e.jsx(qt,{children:e.jsx(s5,{})})}),e.jsx(yt,{path:"/booking-workflow-test",children:e.jsx(qt,{children:e.jsx(iX,{})})}),e.jsx(yt,{path:"/bookings/:id",children:e.jsx(qt,{children:e.jsx(SX,{})})}),e.jsx(yt,{path:"/comprehensive-workflow",children:e.jsx(qt,{children:e.jsx(yX,{})})}),e.jsx(yt,{path:"/technical-guidance-demo",children:e.jsx(qt,{children:e.jsx(aJ,{})})}),e.jsx(yt,{path:"/technical-rider-designer",children:e.jsx(qt,{children:e.jsx(k1,{})})}),e.jsx(yt,{path:"/technical-rider",children:e.jsx(qt,{children:e.jsx(k1,{})})}),e.jsx(yt,{path:"/management-walkthrough",children:e.jsx(qt,{children:e.jsx(lX,{})})}),e.jsx(yt,{path:"/enhanced-profile-test",children:e.jsx(qt,{children:e.jsx(cX,{})})}),e.jsx(yt,{path:"/admin/contracts",children:e.jsx(qt,{children:e.jsx(bg,{})})}),e.jsx(yt,{path:"/admin/bookings",children:e.jsx(qt,{children:e.jsx(bg,{})})}),e.jsx(yt,{path:"/musician-rates",children:e.jsx(qt,{children:e.jsx(uX,{})})}),e.jsx(yt,{path:"/users",children:e.jsx(qt,{children:e.jsx(PX,{})})}),e.jsx(yt,{path:"/revenue",component:JX}),e.jsx(yt,{path:"/pro-registration",children:e.jsx(qt,{children:e.jsx(LX,{})})}),e.jsx(yt,{path:"/splitsheet",children:e.jsx(qt,{children:e.jsx(E1,{})})}),e.jsx(yt,{path:"/splitsheet-manager",children:e.jsx(qt,{children:e.jsx(_1,{})})}),e.jsx(yt,{path:"/contract-manager",children:e.jsx(qt,{children:e.jsx(R1,{})})}),e.jsx(yt,{path:"/technical-rider-manager",children:e.jsx(qt,{children:e.jsx(O1,{})})}),e.jsx(yt,{path:"/isrc-manager",children:e.jsx(qt,{children:e.jsx(D1,{})})}),e.jsx(yt,{path:"/newsletter-manager",children:e.jsx(qt,{children:e.jsx(M1,{})})}),e.jsx(yt,{path:"/system-management",children:e.jsx(qt,{children:e.jsx(vJ,{})})}),e.jsx(yt,{path:"/enhanced-splitsheet",children:e.jsx(qt,{children:e.jsx(E1,{})})}),e.jsx(yt,{path:"/splitsheet-demo",component:ZX}),e.jsx(yt,{path:"/modal-system-test",children:e.jsx(qt,{children:e.jsx(sJ,{})})}),e.jsx(yt,{path:"/comeseetv-integration",children:e.jsx(qt,{children:e.jsx(lJ,{})})}),e.jsx(yt,{path:"/data-integrity-demo",children:e.jsx(qt,{children:e.jsx(cJ,{})})}),e.jsx(yt,{path:"/album-upload-complete/:albumId",children:e.jsx(qt,{children:e.jsx(uJ,{})})}),e.jsx(yt,{path:"/system-analyzer",children:e.jsx(qt,{children:e.jsx(jJ,{})})}),e.jsx(yt,{path:"/offline-booking",children:e.jsx(qt,{children:e.jsx(iJ,{})})}),e.jsx(yt,{path:"/advanced-booking",children:e.jsx(qt,{children:e.jsx(pJ,{})})}),e.jsx(yt,{path:"/managed-agents",children:e.jsx(qt,{children:e.jsx(fJ,{})})}),e.jsx(yt,{path:"/test-react",component:SL}),e.jsx(yt,{component:$X})]})]})}function TJ(){return console.log(" React app mounted successfully"),e.jsx(aR,{client:MC,children:e.jsx(mI,{children:e.jsx(lI,{children:e.jsx(gL,{children:e.jsx(wL,{children:e.jsx(jL,{children:e.jsx(yL,{children:e.jsx(Ky,{children:e.jsxs("div",{className:"min-h-screen bg-background",children:[e.jsx(PJ,{}),e.jsx(TO,{}),e.jsx(mJ,{}),e.jsx(hJ,{})]})})})})})})})})})}class EJ extends N.Component{constructor(){super(...arguments),this.state={hasError:!1}}static getDerivedStateFromError(s){return{hasError:!0,error:s}}componentDidCatch(s,n){console.error("ErrorBoundary caught an error:",s,n)}render(){return this.state.hasError?e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:e.jsxs("div",{className:"max-w-md w-full bg-white shadow-lg rounded-lg p-6",children:[e.jsx("h2",{className:"text-xl font-bold text-red-600 mb-4",children:"Something went wrong"}),e.jsx("p",{className:"text-gray-600 mb-4",children:"The application encountered an error and couldn't load properly."}),this.state.error&&e.jsx("div",{className:"bg-gray-100 p-3 rounded text-sm font-mono text-gray-800 mb-4",children:this.state.error.message}),e.jsx("button",{onClick:()=>window.location.reload(),className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700",children:"Reload Page"})]})}):this.props.children}}window.addEventListener("error",t=>{console.error("Global error:",t.error)});window.addEventListener("unhandledrejection",t=>{console.error("Unhandled promise rejection:",t.reason)});const Cg=document.getElementById("root");if(Cg)try{rC(Cg).render(e.jsx(EJ,{children:e.jsx(TJ,{})})),console.log(" WaituMusic app mounted successfully")}catch(t){console.error(" Failed to render app:",t);const s=t instanceof Error?t.message:"Unknown error";Cg.innerHTML=`<h1>Error: ${s}</h1>`}else console.error(" No root element found");
